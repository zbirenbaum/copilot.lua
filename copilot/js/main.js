"use strict";var tCt=Object.create;var o4=Object.defineProperty;var pRe=Object.getOwnPropertyDescriptor;var rCt=Object.getOwnPropertyNames;var nCt=Object.getPrototypeOf,iCt=Object.prototype.hasOwnProperty;var dRe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),fRe=t=>{throw TypeError(t)};var s=(t,e)=>o4(t,"name",{value:e,configurable:!0});var sg=(t,e)=>()=>(t&&(e=t(t=0)),e);var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fa=(t,e)=>{for(var r in e)o4(t,r,{get:e[r],enumerable:!0})},hRe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rCt(e))!iCt.call(t,i)&&i!==r&&o4(t,i,{get:()=>e[i],enumerable:!(n=pRe(e,i))||n.enumerable});return t};var Me=(t,e,r)=>(r=t!=null?tCt(nCt(t)):{},hRe(e||!t||!t.__esModule?o4(r,"default",{value:t,enumerable:!0}):r,t)),oCt=t=>hRe(o4({},"__esModule",{value:!0}),t),Fd=(t,e,r,n)=>{for(var i=n>1?void 0:n?pRe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&o4(e,r,i),i},pa=(t,e)=>(r,n)=>e(r,n,t);var cce=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&fRe("Object expected");var n,i;r&&(n=e[dRe("asyncDispose")]),n===void 0&&(n=e[dRe("dispose")],r&&(i=n)),typeof n!="function"&&fRe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},lce=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=sg(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var gRe=q(uce=>{d();var mRe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");uce.encode=function(t){if(0<=t&&t<mRe.length)return mRe[t];throw new TypeError("Must be between 0 and 63: "+t)};uce.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var pce=q(fce=>{d();var ARe=gRe(),dce=5,yRe=1<<dce,CRe=yRe-1,vRe=yRe;function sCt(t){return t<0?(-t<<1)+1:(t<<1)+0}s(sCt,"toVLQSigned");function aCt(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(aCt,"fromVLQSigned");fce.encode=s(function(e){var r="",n,i=sCt(e);do n=i&CRe,i>>>=dce,i>0&&(n|=vRe),r+=ARe.encode(n);while(i>0);return r},"base64VLQ_encode");fce.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=ARe.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&vRe),l&=CRe,o=o+(l<<a),a+=dce}while(c);n.value=aCt(o),n.rest=r},"base64VLQ_decode")});var c4=q(ed=>{d();function cCt(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(cCt,"getArg");ed.getArg=cCt;var ERe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,lCt=/^data:.+\,.+$/;function L9(t){var e=t.match(ERe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(L9,"urlParse");ed.urlParse=L9;function s4(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(s4,"urlGenerate");ed.urlGenerate=s4;function hce(t){var e=t,r=L9(t);if(r){if(!r.path)return t;e=r.path}for(var n=ed.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,s4(r)):e}s(hce,"normalize");ed.normalize=hce;function xRe(t,e){t===""&&(t="."),e===""&&(e=".");var r=L9(e),n=L9(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),s4(r);if(r||e.match(lCt))return e;if(n&&!n.host&&!n.path)return n.host=e,s4(n);var i=e.charAt(0)==="/"?e:hce(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,s4(n)):i}s(xRe,"join");ed.join=xRe;ed.isAbsolute=function(t){return t.charAt(0)==="/"||ERe.test(t)};function uCt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(uCt,"relative");ed.relative=uCt;var bRe=function(){var t=Object.create(null);return!("__proto__"in t)}();function IRe(t){return t}s(IRe,"identity");function dCt(t){return TRe(t)?"$"+t:t}s(dCt,"toSetString");ed.toSetString=bRe?IRe:dCt;function fCt(t){return TRe(t)?t.slice(1):t}s(fCt,"fromSetString");ed.fromSetString=bRe?IRe:fCt;function TRe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(TRe,"isProtoString");function pCt(t,e,r){var n=a4(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:a4(t.name,e.name)}s(pCt,"compareByOriginalPositions");ed.compareByOriginalPositions=pCt;function hCt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=a4(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:a4(t.name,e.name)}s(hCt,"compareByGeneratedPositionsDeflated");ed.compareByGeneratedPositionsDeflated=hCt;function a4(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(a4,"strcmp");function mCt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=a4(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:a4(t.name,e.name)}s(mCt,"compareByGeneratedPositionsInflated");ed.compareByGeneratedPositionsInflated=mCt;function gCt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(gCt,"parseSourceMapInput");ed.parseSourceMapInput=gCt;function ACt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=L9(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=xRe(s4(n),e)}return hce(e)}s(ACt,"computeSourceURL");ed.computeSourceURL=ACt});var Ace=q(wRe=>{d();var mce=c4(),gce=Object.prototype.hasOwnProperty,R_=typeof Map<"u";function W1(){this._array=[],this._set=R_?new Map:Object.create(null)}s(W1,"ArraySet");W1.fromArray=s(function(e,r){for(var n=new W1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");W1.prototype.size=s(function(){return R_?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");W1.prototype.add=s(function(e,r){var n=R_?e:mce.toSetString(e),i=R_?this.has(e):gce.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(R_?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");W1.prototype.has=s(function(e){if(R_)return this._set.has(e);var r=mce.toSetString(e);return gce.call(this._set,r)},"ArraySet_has");W1.prototype.indexOf=s(function(e){if(R_){var r=this._set.get(e);if(r>=0)return r}else{var n=mce.toSetString(e);if(gce.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");W1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");W1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");wRe.ArraySet=W1});var RRe=q(SRe=>{d();var _Re=c4();function yCt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||_Re.compareByGeneratedPositionsInflated(t,e)<=0}s(yCt,"generatedPositionAfter");function lH(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(lH,"MappingList");lH.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");lH.prototype.add=s(function(e){yCt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");lH.prototype.toArray=s(function(){return this._sorted||(this._array.sort(_Re.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");SRe.MappingList=lH});var yce=q(kRe=>{d();var M9=pce(),Nc=c4(),uH=Ace().ArraySet,CCt=RRe().MappingList;function ih(t){t||(t={}),this._file=Nc.getArg(t,"file",null),this._sourceRoot=Nc.getArg(t,"sourceRoot",null),this._skipValidation=Nc.getArg(t,"skipValidation",!1),this._sources=new uH,this._names=new uH,this._mappings=new CCt,this._sourcesContents=null}s(ih,"SourceMapGenerator");ih.prototype._version=3;ih.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new ih({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Nc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Nc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");ih.prototype.addMapping=s(function(e){var r=Nc.getArg(e,"generated"),n=Nc.getArg(e,"original",null),i=Nc.getArg(e,"source",null),o=Nc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");ih.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Nc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Nc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Nc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");ih.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Nc.relative(o,i));var a=new uH,c=new uH;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=Nc.join(n,l.source)),o!=null&&(l.source=Nc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=Nc.join(n,l)),o!=null&&(l=Nc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");ih.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");ih.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,h=this._mappings.toArray(),m=0,g=h.length;m<g;m++){if(u=h[m],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(m>0){if(!Nc.compareByGeneratedPositionsInflated(u,h[m-1]))continue;l+=","}l+=M9.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=M9.encode(p-a),a=p,l+=M9.encode(u.originalLine-1-i),i=u.originalLine-1,l+=M9.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=M9.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");ih.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Nc.relative(r,n));var i=Nc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");ih.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");ih.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");kRe.SourceMapGenerator=ih});var PRe=q(k_=>{d();k_.GREATEST_LOWER_BOUND=1;k_.LEAST_UPPER_BOUND=2;function Cce(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Cce(a,e,r,n,i,o):o==k_.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Cce(t,a,r,n,i,o):o==k_.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Cce,"recursiveSearch");k_.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Cce(-1,r.length,e,r,n,i||k_.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var BRe=q(DRe=>{d();function vce(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(vce,"swap");function vCt(t,e){return Math.round(t+Math.random()*(e-t))}s(vCt,"randomIntInRange");function Ece(t,e,r,n){if(r<n){var i=vCt(r,n),o=r-1;vce(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,vce(t,o,c));vce(t,o+1,c);var l=o+1;Ece(t,e,r,l-1),Ece(t,e,l+1,n)}}s(Ece,"doQuickSort");DRe.quickSort=function(t,e){Ece(t,e,0,t.length-1)}});var LRe=q(dH=>{d();var Lr=c4(),xce=PRe(),l4=Ace().ArraySet,ECt=pce(),F9=BRe().quickSort;function Us(t,e){var r=t;return typeof t=="string"&&(r=Lr.parseSourceMapInput(t)),r.sections!=null?new ag(r,e):new pu(r,e)}s(Us,"SourceMapConsumer");Us.fromSourceMap=function(t,e){return pu.fromSourceMap(t,e)};Us.prototype._version=3;Us.prototype.__generatedMappings=null;Object.defineProperty(Us.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Us.prototype.__originalMappings=null;Object.defineProperty(Us.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Us.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Us.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Us.GENERATED_ORDER=1;Us.ORIGINAL_ORDER=2;Us.GREATEST_LOWER_BOUND=1;Us.LEAST_UPPER_BOUND=2;Us.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Us.GENERATED_ORDER,a;switch(o){case Us.GENERATED_ORDER:a=this._generatedMappings;break;case Us.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=Lr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Us.prototype.allGeneratedPositionsFor=s(function(e){var r=Lr.getArg(e,"line"),n={source:Lr.getArg(e,"source"),originalLine:r,originalColumn:Lr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Lr.compareByOriginalPositions,xce.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:Lr.getArg(a,"generatedLine",null),column:Lr.getArg(a,"generatedColumn",null),lastColumn:Lr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:Lr.getArg(a,"generatedLine",null),column:Lr.getArg(a,"generatedColumn",null),lastColumn:Lr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");dH.SourceMapConsumer=Us;function pu(t,e){var r=t;typeof t=="string"&&(r=Lr.parseSourceMapInput(t));var n=Lr.getArg(r,"version"),i=Lr.getArg(r,"sources"),o=Lr.getArg(r,"names",[]),a=Lr.getArg(r,"sourceRoot",null),c=Lr.getArg(r,"sourcesContent",null),l=Lr.getArg(r,"mappings"),u=Lr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=Lr.normalize(a)),i=i.map(String).map(Lr.normalize).map(function(f){return a&&Lr.isAbsolute(a)&&Lr.isAbsolute(f)?Lr.relative(a,f):f}),this._names=l4.fromArray(o.map(String),!0),this._sources=l4.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return Lr.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(pu,"BasicSourceMapConsumer");pu.prototype=Object.create(Us.prototype);pu.prototype.consumer=Us;pu.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Lr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};pu.fromSourceMap=s(function(e,r){var n=Object.create(pu.prototype),i=n._names=l4.fromArray(e._names.toArray(),!0),o=n._sources=l4.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(m){return Lr.computeSourceURL(n.sourceRoot,m,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],h=new NRe;h.generatedLine=p.generatedLine,h.generatedColumn=p.generatedColumn,p.source&&(h.source=o.indexOf(p.source),h.originalLine=p.originalLine,h.originalColumn=p.originalColumn,p.name&&(h.name=i.indexOf(p.name)),l.push(h)),c.push(h)}return F9(n.__originalMappings,Lr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");pu.prototype._version=3;Object.defineProperty(pu.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function NRe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(NRe,"Mapping");pu.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},h={},m=[],g=[],A,y,E,b,_;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(A=new NRe,A.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(y=e.slice(f,b),E=p[y],E)f+=y.length;else{for(E=[];f<b;)ECt.decode(e,f,h),_=h.value,f=h.rest,E.push(_);if(E.length===2)throw new Error("Found a source, but no line and column");if(E.length===3)throw new Error("Found a source and line, but no column");p[y]=E}A.generatedColumn=i+E[0],i=A.generatedColumn,E.length>1&&(A.source=c+E[1],c+=E[1],A.originalLine=o+E[2],o=A.originalLine,A.originalLine+=1,A.originalColumn=a+E[3],a=A.originalColumn,E.length>4&&(A.name=l+E[4],l+=E[4])),g.push(A),typeof A.originalLine=="number"&&m.push(A)}F9(g,Lr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,F9(m,Lr.compareByOriginalPositions),this.__originalMappings=m},"SourceMapConsumer_parseMappings");pu.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return xce.search(e,r,o,a)},"SourceMapConsumer_findMapping");pu.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");pu.prototype.originalPositionFor=s(function(e){var r={generatedLine:Lr.getArg(e,"line"),generatedColumn:Lr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Lr.compareByGeneratedPositionsDeflated,Lr.getArg(e,"bias",Us.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=Lr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Lr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Lr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Lr.getArg(i,"originalLine",null),column:Lr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");pu.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");pu.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=Lr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Lr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");pu.prototype.generatedPositionFor=s(function(e){var r=Lr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Lr.getArg(e,"line"),originalColumn:Lr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Lr.compareByOriginalPositions,Lr.getArg(e,"bias",Us.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:Lr.getArg(o,"generatedLine",null),column:Lr.getArg(o,"generatedColumn",null),lastColumn:Lr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");dH.BasicSourceMapConsumer=pu;function ag(t,e){var r=t;typeof t=="string"&&(r=Lr.parseSourceMapInput(t));var n=Lr.getArg(r,"version"),i=Lr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new l4,this._names=new l4;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=Lr.getArg(a,"offset"),l=Lr.getArg(c,"line"),u=Lr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Us(Lr.getArg(a,"map"),e)}})}s(ag,"IndexedSourceMapConsumer");ag.prototype=Object.create(Us.prototype);ag.prototype.constructor=Us;ag.prototype._version=3;Object.defineProperty(ag.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});ag.prototype.originalPositionFor=s(function(e){var r={generatedLine:Lr.getArg(e,"line"),generatedColumn:Lr.getArg(e,"column")},n=xce.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");ag.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");ag.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");ag.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Lr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");ag.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=Lr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}F9(this.__generatedMappings,Lr.compareByGeneratedPositionsDeflated),F9(this.__originalMappings,Lr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");dH.IndexedSourceMapConsumer=ag});var FRe=q(MRe=>{d();var xCt=yce().SourceMapGenerator,fH=c4(),bCt=/(\r?\n)/,ICt=10,u4="$$$isSourceNode$$$";function M0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[u4]=!0,n!=null&&this.add(n)}s(M0,"SourceNode");M0.fromStringWithSourceMap=s(function(e,r,n){var i=new M0,o=e.split(bCt),a=0,c=s(function(){var h=g(),m=g()||"";return h+m;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(h){if(f!==null)if(l<h.generatedLine)p(f,c()),l++,u=0;else{var m=o[a]||"",g=m.substr(0,h.generatedColumn-u);o[a]=m.substr(h.generatedColumn-u),u=h.generatedColumn,p(f,g),f=h;return}for(;l<h.generatedLine;)i.add(c()),l++;if(u<h.generatedColumn){var m=o[a]||"";i.add(m.substr(0,h.generatedColumn)),o[a]=m.substr(h.generatedColumn),u=h.generatedColumn}f=h},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(h){var m=r.sourceContentFor(h);m!=null&&(n!=null&&(h=fH.join(n,h)),i.setSourceContent(h,m))}),i;function p(h,m){if(h===null||h.source===void 0)i.add(m);else{var g=n?fH.join(n,h.source):h.source;i.add(new M0(h.originalLine,h.originalColumn,g,m,h.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");M0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[u4]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");M0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[u4]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");M0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[u4]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");M0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");M0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[u4]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");M0.prototype.setSourceContent=s(function(e,r){this.sourceContents[fH.toSetString(e)]=r},"SourceNode_setSourceContent");M0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][u4]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(fH.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");M0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");M0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new xCt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,h=u.length;p<h;p++)u.charCodeAt(p)===ICt?(r.line++,r.column=0,p+1===h?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");MRe.SourceNode=M0});var ORe=q(pH=>{d();pH.SourceMapGenerator=yce().SourceMapGenerator;pH.SourceMapConsumer=LRe().SourceMapConsumer;pH.SourceNode=FRe().SourceNode});var URe=q((Dbr,QRe)=>{d();var TCt=Object.prototype.toString,bce=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function wCt(t){return TCt.call(t).slice(8,-1)==="ArrayBuffer"}s(wCt,"isArrayBuffer");function _Ct(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return bce?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(_Ct,"fromArrayBuffer");function SCt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return bce?Buffer.from(t,e):new Buffer(t,e)}s(SCt,"fromString");function RCt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return wCt(t)?_Ct(t,e,r):typeof t=="string"?SCt(t,e):bce?Buffer.from(t):new Buffer(t)}s(RCt,"bufferFrom");QRe.exports=RCt});var zRe=q((D_,_ce)=>{d();var kCt=ORe().SourceMapConsumer,Ice=require("path"),fy;try{fy=require("fs"),(!fy.existsSync||!fy.readFileSync)&&(fy=null)}catch{}var PCt=URe();function qRe(t,e){return t.require(e)}s(qRe,"dynamicRequire");var HRe=!1,WRe=!1,Tce=!1,O9="auto",P_={},Q9={},DCt=/^data:application\/json[^,]+base64,/,Cb=[],vb=[];function Sce(){return O9==="browser"?!0:O9==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(Sce,"isInBrowser");function BCt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(BCt,"hasGlobalProcessEventEmitter");function NCt(){return typeof process=="object"&&process!==null?process.version:""}s(NCt,"globalProcessVersion");function LCt(){if(typeof process=="object"&&process!==null)return process.stderr}s(LCt,"globalProcessStderr");function MCt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(MCt,"globalProcessExit");function hH(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(hH,"handlerExec");var Rce=hH(Cb);Cb.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in P_)return P_[t];var e="";try{if(fy)fy.existsSync(t)&&(e=fy.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return P_[t]=e});function wce(t,e){if(!t)return e;var r=Ice.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+Ice.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+Ice.resolve(r.slice(i.length),e)}s(wce,"supportRelativeURL");function FCt(t){var e;if(Sce())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Rce(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(FCt,"retrieveSourceMapURL");var kce=hH(vb);vb.push(function(t){var e=FCt(t);if(!e)return null;var r;if(DCt.test(e)){var n=e.slice(e.indexOf(",")+1);r=PCt(n,"base64").toString(),e=t}else e=wce(t,e),r=Rce(e);return r?{url:e,map:r}:null});function Pce(t){var e=Q9[t.source];if(!e){var r=kce(t.source);r?(e=Q9[t.source]={url:r.url,map:new kCt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=wce(e.url,i);P_[c]=a}})):e=Q9[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=wce(e.url,n.source),n}return t}s(Pce,"mapSourcePosition");function jRe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Pce({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+jRe(e[2])+")":t}s(jRe,"mapEvalOrigin");function OCt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(OCt,"CallSiteToString");function $Re(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=OCt,e}s($Re,"cloneCallSite");function GRe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(NCt())?0:62;n===1&&i>a&&!Sce()&&!t.isEval()&&(i-=a);var c=Pce({source:r,line:n,column:i});e.curPosition=c,t=$Re(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=jRe(u),t=$Re(t),t.getEvalOrigin=function(){return u}),t}s(GRe,"wrapCallSite");function QCt(t,e){Tce&&(P_={},Q9={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+GRe(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(QCt,"prepareStackTrace");function VRe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=P_[r];if(!o&&fy&&fy.existsSync(r))try{o=fy.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(VRe,"getErrorSource");function UCt(t){var e=VRe(t),r=LCt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),MCt(1)}s(UCt,"printErrorAndExit");function qCt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return UCt(arguments[1])}return t.apply(this,arguments)}}s(qCt,"shimEmitUncaughtException");var HCt=Cb.slice(0),WCt=vb.slice(0);D_.wrapCallSite=GRe;D_.getErrorSource=VRe;D_.mapSourcePosition=Pce;D_.retrieveSourceMap=kce;D_.install=function(t){if(t=t||{},t.environment&&(O9=t.environment,["node","browser","auto"].indexOf(O9)===-1))throw new Error("environment "+O9+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Cb.length=0),Cb.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(vb.length=0),vb.unshift(t.retrieveSourceMap)),t.hookRequire&&!Sce()){var e=qRe(_ce,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return P_[a]=o,Q9[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(Tce||(Tce="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),HRe||(HRe=!0,Error.prepareStackTrace=QCt),!WRe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=qRe(_ce,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&BCt()&&(WRe=!0,qCt())}};D_.resetRetrieveHandlers=function(){Cb.length=0,vb.length=0,Cb=HCt.slice(0),vb=WCt.slice(0),kce=hH(vb),Rce=hH(Cb)}});var Ki=q((gH,JRe)=>{d();(function(t,e){typeof gH=="object"?JRe.exports=gH=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(gH,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function E(){}return s(E,"F"),function(b){var _;return E.prototype=b,_=new E,E.prototype=null,_}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(E){var b=o(this);return E&&b.mixIn(E),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var E=this.extend();return E.init.apply(E,arguments),E},"create"),init:s(function(){},"init"),mixIn:s(function(E){for(var b in E)E.hasOwnProperty(b)&&(this[b]=E[b]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(E,b){E=this.words=E||[],b!=r?this.sigBytes=b:this.sigBytes=E.length*4},"init"),toString:s(function(E){return(E||p).stringify(this)},"toString"),concat:s(function(E){var b=this.words,_=E.words,S=this.sigBytes,P=E.sigBytes;if(this.clamp(),S%4)for(var B=0;B<P;B++){var F=_[B>>>2]>>>24-B%4*8&255;b[S+B>>>2]|=F<<24-(S+B)%4*8}else for(var Y=0;Y<P;Y+=4)b[S+Y>>>2]=_[Y>>>2];return this.sigBytes+=P,this},"concat"),clamp:s(function(){var E=this.words,b=this.sigBytes;E[b>>>2]&=4294967295<<32-b%4*8,E.length=e.ceil(b/4)},"clamp"),clone:s(function(){var E=l.clone.call(this);return E.words=this.words.slice(0),E},"clone"),random:s(function(E){for(var b=[],_=0;_<E;_+=4)b.push(i());return new u.init(b,E)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(E){for(var b=E.words,_=E.sigBytes,S=[],P=0;P<_;P++){var B=b[P>>>2]>>>24-P%4*8&255;S.push((B>>>4).toString(16)),S.push((B&15).toString(16))}return S.join("")},"stringify"),parse:s(function(E){for(var b=E.length,_=[],S=0;S<b;S+=2)_[S>>>3]|=parseInt(E.substr(S,2),16)<<24-S%8*4;return new u.init(_,b/2)},"parse")},h=f.Latin1={stringify:s(function(E){for(var b=E.words,_=E.sigBytes,S=[],P=0;P<_;P++){var B=b[P>>>2]>>>24-P%4*8&255;S.push(String.fromCharCode(B))}return S.join("")},"stringify"),parse:s(function(E){for(var b=E.length,_=[],S=0;S<b;S++)_[S>>>2]|=(E.charCodeAt(S)&255)<<24-S%4*8;return new u.init(_,b)},"parse")},m=f.Utf8={stringify:s(function(E){try{return decodeURIComponent(escape(h.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(E){return h.parse(unescape(encodeURIComponent(E)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(E){typeof E=="string"&&(E=m.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},"_append"),_process:s(function(E){var b,_=this._data,S=_.words,P=_.sigBytes,B=this.blockSize,F=B*4,Y=P/F;E?Y=e.ceil(Y):Y=e.max((Y|0)-this._minBufferSize,0);var ee=Y*B,V=e.min(ee*4,P);if(ee){for(var H=0;H<ee;H+=B)this._doProcessBlock(S,H);b=S.splice(0,ee),_.sigBytes-=V}return new u.init(b,V)},"_process"),clone:s(function(){var E=l.clone.call(this);return E._data=this._data.clone(),E},"clone"),_minBufferSize:0}),A=c.Hasher=g.extend({cfg:l.extend(),init:s(function(E){this.cfg=this.cfg.extend(E),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(E){return this._append(E),this._process(),this},"update"),finalize:s(function(E){E&&this._append(E);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(E){return function(b,_){return new E.init(_).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(E){return function(b,_){return new y.HMAC.init(E,_).finalize(b)}},"_createHmacHelper")}),y=a.algo={};return a}(Math);return t})});var $9=q((AH,XRe)=>{d();(function(t,e){typeof AH=="object"?XRe.exports=AH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(AH,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],h=0;h<f;h++){var m=u[h];p.push(m.high),p.push(m.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,h=0;h<p;h++)f[h]=f[h].clone();return u},"clone")})}(),t})});var e5e=q((yH,ZRe)=>{d();(function(t,e){typeof yH=="object"?ZRe.exports=yH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(yH,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var r5e=q((CH,t5e)=>{d();(function(t,e){typeof CH=="object"?t5e.exports=CH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(CH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var h=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var h=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var xb=q((vH,n5e)=>{d();(function(t,e){typeof vH=="object"?n5e.exports=vH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(vH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],h=0;h<u;h+=3)for(var m=l[h>>>2]>>>24-h%4*8&255,g=l[h+1>>>2]>>>24-(h+1)%4*8&255,A=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=m<<16|g<<8|A,E=0;E<4&&h+E*.75<u;E++)p.push(f.charAt(y>>>6*(3-E)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var h=u.charAt(64);if(h){var m=c.indexOf(h);m!==-1&&(l=m)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,h=0;h<l;h++)if(h%4){var m=u[c.charCodeAt(h-1)]<<h%4*2,g=u[c.charCodeAt(h)]>>>6-h%4*2,A=m|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var o5e=q((EH,i5e)=>{d();(function(t,e){typeof EH=="object"?i5e.exports=EH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(EH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var h=[],m=0;m<f;m+=3)for(var g=u[m>>>2]>>>24-m%4*8&255,A=u[m+1>>>2]>>>24-(m+1)%4*8&255,y=u[m+2>>>2]>>>24-(m+2)%4*8&255,E=g<<16|A<<8|y,b=0;b<4&&m+b*.75<f;b++)h.push(p.charAt(E>>>6*(3-b)&63));var _=p.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var h=0;h<f.length;h++)p[f.charCodeAt(h)]=h}var m=f.charAt(64);if(m){var g=c.indexOf(m);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,h=0;h<l;h++)if(h%4){var m=u[c.charCodeAt(h-1)]<<h%4*2,g=u[c.charCodeAt(h)]>>>6-h%4*2,A=m|g;f[p>>>2]|=A<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var bb=q((xH,s5e)=>{d();(function(t,e){typeof xH=="object"?s5e.exports=xH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(xH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var m=0;m<64;m++)c[m]=e.abs(e.sin(m+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(m,g){for(var A=0;A<16;A++){var y=g+A,E=m[y];m[y]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var b=this._hash.words,_=m[g+0],S=m[g+1],P=m[g+2],B=m[g+3],F=m[g+4],Y=m[g+5],ee=m[g+6],V=m[g+7],H=m[g+8],U=m[g+9],X=m[g+10],K=m[g+11],j=m[g+12],W=m[g+13],J=m[g+14],ie=m[g+15],ae=b[0],te=b[1],pe=b[2],Ae=b[3];ae=u(ae,te,pe,Ae,_,7,c[0]),Ae=u(Ae,ae,te,pe,S,12,c[1]),pe=u(pe,Ae,ae,te,P,17,c[2]),te=u(te,pe,Ae,ae,B,22,c[3]),ae=u(ae,te,pe,Ae,F,7,c[4]),Ae=u(Ae,ae,te,pe,Y,12,c[5]),pe=u(pe,Ae,ae,te,ee,17,c[6]),te=u(te,pe,Ae,ae,V,22,c[7]),ae=u(ae,te,pe,Ae,H,7,c[8]),Ae=u(Ae,ae,te,pe,U,12,c[9]),pe=u(pe,Ae,ae,te,X,17,c[10]),te=u(te,pe,Ae,ae,K,22,c[11]),ae=u(ae,te,pe,Ae,j,7,c[12]),Ae=u(Ae,ae,te,pe,W,12,c[13]),pe=u(pe,Ae,ae,te,J,17,c[14]),te=u(te,pe,Ae,ae,ie,22,c[15]),ae=f(ae,te,pe,Ae,S,5,c[16]),Ae=f(Ae,ae,te,pe,ee,9,c[17]),pe=f(pe,Ae,ae,te,K,14,c[18]),te=f(te,pe,Ae,ae,_,20,c[19]),ae=f(ae,te,pe,Ae,Y,5,c[20]),Ae=f(Ae,ae,te,pe,X,9,c[21]),pe=f(pe,Ae,ae,te,ie,14,c[22]),te=f(te,pe,Ae,ae,F,20,c[23]),ae=f(ae,te,pe,Ae,U,5,c[24]),Ae=f(Ae,ae,te,pe,J,9,c[25]),pe=f(pe,Ae,ae,te,B,14,c[26]),te=f(te,pe,Ae,ae,H,20,c[27]),ae=f(ae,te,pe,Ae,W,5,c[28]),Ae=f(Ae,ae,te,pe,P,9,c[29]),pe=f(pe,Ae,ae,te,V,14,c[30]),te=f(te,pe,Ae,ae,j,20,c[31]),ae=p(ae,te,pe,Ae,Y,4,c[32]),Ae=p(Ae,ae,te,pe,H,11,c[33]),pe=p(pe,Ae,ae,te,K,16,c[34]),te=p(te,pe,Ae,ae,J,23,c[35]),ae=p(ae,te,pe,Ae,S,4,c[36]),Ae=p(Ae,ae,te,pe,F,11,c[37]),pe=p(pe,Ae,ae,te,V,16,c[38]),te=p(te,pe,Ae,ae,X,23,c[39]),ae=p(ae,te,pe,Ae,W,4,c[40]),Ae=p(Ae,ae,te,pe,_,11,c[41]),pe=p(pe,Ae,ae,te,B,16,c[42]),te=p(te,pe,Ae,ae,ee,23,c[43]),ae=p(ae,te,pe,Ae,U,4,c[44]),Ae=p(Ae,ae,te,pe,j,11,c[45]),pe=p(pe,Ae,ae,te,ie,16,c[46]),te=p(te,pe,Ae,ae,P,23,c[47]),ae=h(ae,te,pe,Ae,_,6,c[48]),Ae=h(Ae,ae,te,pe,V,10,c[49]),pe=h(pe,Ae,ae,te,J,15,c[50]),te=h(te,pe,Ae,ae,Y,21,c[51]),ae=h(ae,te,pe,Ae,j,6,c[52]),Ae=h(Ae,ae,te,pe,B,10,c[53]),pe=h(pe,Ae,ae,te,X,15,c[54]),te=h(te,pe,Ae,ae,S,21,c[55]),ae=h(ae,te,pe,Ae,H,6,c[56]),Ae=h(Ae,ae,te,pe,ie,10,c[57]),pe=h(pe,Ae,ae,te,ee,15,c[58]),te=h(te,pe,Ae,ae,W,21,c[59]),ae=h(ae,te,pe,Ae,F,6,c[60]),Ae=h(Ae,ae,te,pe,K,10,c[61]),pe=h(pe,Ae,ae,te,P,15,c[62]),te=h(te,pe,Ae,ae,U,21,c[63]),b[0]=b[0]+ae|0,b[1]=b[1]+te|0,b[2]=b[2]+pe|0,b[3]=b[3]+Ae|0},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,g=m.words,A=this._nDataBytes*8,y=m.sigBytes*8;g[y>>>5]|=128<<24-y%32;var E=e.floor(A/4294967296),b=A;g[(y+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,g[(y+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,S=_.words,P=0;P<4;P++){var B=S[P];S[P]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m},"clone")});function u(m,g,A,y,E,b,_){var S=m+(g&A|~g&y)+E+_;return(S<<b|S>>>32-b)+g}s(u,"FF");function f(m,g,A,y,E,b,_){var S=m+(g&y|A&~y)+E+_;return(S<<b|S>>>32-b)+g}s(f,"GG");function p(m,g,A,y,E,b,_){var S=m+(g^A^y)+E+_;return(S<<b|S>>>32-b)+g}s(p,"HH");function h(m,g,A,y,E,b,_){var S=m+(A^(g|~y))+E+_;return(S<<b|S>>>32-b)+g}s(h,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var Dce=q((bH,a5e)=>{d();(function(t,e){typeof bH=="object"?a5e.exports=bH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(bH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],h=f[1],m=f[2],g=f[3],A=f[4],y=0;y<80;y++){if(y<16)a[y]=l[u+y]|0;else{var E=a[y-3]^a[y-8]^a[y-14]^a[y-16];a[y]=E<<1|E>>>31}var b=(p<<5|p>>>27)+A+a[y];y<20?b+=(h&m|~h&g)+1518500249:y<40?b+=(h^m^g)+1859775393:y<60?b+=(h&m|h&g|m&g)-1894007588:b+=(h^m^g)-899497514,A=g,g=m,m=h<<30|h>>>2,h=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+h|0,f[2]=f[2]+m|0,f[3]=f[3]+g|0,f[4]=f[4]+A|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var TH=q((IH,c5e)=>{d();(function(t,e){typeof IH=="object"?c5e.exports=IH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(IH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(A){for(var y=e.sqrt(A),E=2;E<=y;E++)if(!(A%E))return!1;return!0}s(p,"isPrime");function h(A){return(A-(A|0))*4294967296|0}s(h,"getFractionalBits");for(var m=2,g=0;g<64;)p(m)&&(g<8&&(c[g]=h(e.pow(m,1/2))),l[g]=h(e.pow(m,1/3)),g++),m++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,h){for(var m=this._hash.words,g=m[0],A=m[1],y=m[2],E=m[3],b=m[4],_=m[5],S=m[6],P=m[7],B=0;B<64;B++){if(B<16)u[B]=p[h+B]|0;else{var F=u[B-15],Y=(F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3,ee=u[B-2],V=(ee<<15|ee>>>17)^(ee<<13|ee>>>19)^ee>>>10;u[B]=Y+u[B-7]+V+u[B-16]}var H=b&_^~b&S,U=g&A^g&y^A&y,X=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),K=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),j=P+K+H+l[B]+u[B],W=X+U;P=S,S=_,_=b,b=E+j|0,E=y,y=A,A=g,g=j+W|0}m[0]=m[0]+g|0,m[1]=m[1]+A|0,m[2]=m[2]+y|0,m[3]=m[3]+E|0,m[4]=m[4]+b|0,m[5]=m[5]+_|0,m[6]=m[6]+S|0,m[7]=m[7]+P|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,h=p.words,m=this._nDataBytes*8,g=p.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=e.floor(m/4294967296),h[(g+64>>>9<<4)+15]=m,p.sigBytes=h.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var u5e=q((wH,l5e)=>{d();(function(t,e,r){typeof wH=="object"?l5e.exports=wH=e(Ki(),TH()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(wH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var Bce=q((_H,d5e)=>{d();(function(t,e,r){typeof _H=="object"?d5e.exports=_H=e(Ki(),$9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(_H,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var h=0;h<80;h++)f[h]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(h,m){for(var g=this._hash.words,A=g[0],y=g[1],E=g[2],b=g[3],_=g[4],S=g[5],P=g[6],B=g[7],F=A.high,Y=A.low,ee=y.high,V=y.low,H=E.high,U=E.low,X=b.high,K=b.low,j=_.high,W=_.low,J=S.high,ie=S.low,ae=P.high,te=P.low,pe=B.high,Ae=B.low,Oe=F,Te=Y,Je=ee,Fe=V,ct=H,St=U,vt=X,mt=K,ue=j,Ue=W,ye=J,We=ie,se=ae,le=te,qe=pe,Be=Ae,xe=0;xe<80;xe++){var je,et,pt=f[xe];if(xe<16)et=pt.high=h[m+xe*2]|0,je=pt.low=h[m+xe*2+1]|0;else{var Lt=f[xe-15],Kt=Lt.high,Ft=Lt.low,Qr=(Kt>>>1|Ft<<31)^(Kt>>>8|Ft<<24)^Kt>>>7,Sr=(Ft>>>1|Kt<<31)^(Ft>>>8|Kt<<24)^(Ft>>>7|Kt<<25),rn=f[xe-2],ve=rn.high,Ge=rn.low,ft=(ve>>>19|Ge<<13)^(ve<<3|Ge>>>29)^ve>>>6,It=(Ge>>>19|ve<<13)^(Ge<<3|ve>>>29)^(Ge>>>6|ve<<26),rr=f[xe-7],Xt=rr.high,xr=rr.low,ar=f[xe-16],er=ar.high,sr=ar.low;je=Sr+xr,et=Qr+Xt+(je>>>0<Sr>>>0?1:0),je=je+It,et=et+ft+(je>>>0<It>>>0?1:0),je=je+sr,et=et+er+(je>>>0<sr>>>0?1:0),pt.high=et,pt.low=je}var tr=ue&ye^~ue&se,kr=Ue&We^~Ue&le,Ur=Oe&Je^Oe&ct^Je&ct,Jr=Te&Fe^Te&St^Fe&St,hn=(Oe>>>28|Te<<4)^(Oe<<30|Te>>>2)^(Oe<<25|Te>>>7),Zn=(Te>>>28|Oe<<4)^(Te<<30|Oe>>>2)^(Te<<25|Oe>>>7),bn=(ue>>>14|Ue<<18)^(ue>>>18|Ue<<14)^(ue<<23|Ue>>>9),Jn=(Ue>>>14|ue<<18)^(Ue>>>18|ue<<14)^(Ue<<23|ue>>>9),Xr=u[xe],Gn=Xr.high,Pe=Xr.low,z=Be+Jn,Ce=qe+bn+(z>>>0<Be>>>0?1:0),z=z+kr,Ce=Ce+tr+(z>>>0<kr>>>0?1:0),z=z+Pe,Ce=Ce+Gn+(z>>>0<Pe>>>0?1:0),z=z+je,Ce=Ce+et+(z>>>0<je>>>0?1:0),Ie=Zn+Jr,M=hn+Ur+(Ie>>>0<Zn>>>0?1:0);qe=se,Be=le,se=ye,le=We,ye=ue,We=Ue,Ue=mt+z|0,ue=vt+Ce+(Ue>>>0<mt>>>0?1:0)|0,vt=ct,mt=St,ct=Je,St=Fe,Je=Oe,Fe=Te,Te=z+Ie|0,Oe=Ce+M+(Te>>>0<z>>>0?1:0)|0}Y=A.low=Y+Te,A.high=F+Oe+(Y>>>0<Te>>>0?1:0),V=y.low=V+Fe,y.high=ee+Je+(V>>>0<Fe>>>0?1:0),U=E.low=U+St,E.high=H+ct+(U>>>0<St>>>0?1:0),K=b.low=K+mt,b.high=X+vt+(K>>>0<mt>>>0?1:0),W=_.low=W+Ue,_.high=j+ue+(W>>>0<Ue>>>0?1:0),ie=S.low=ie+We,S.high=J+ye+(ie>>>0<We>>>0?1:0),te=P.low=te+le,P.high=ae+se+(te>>>0<le>>>0?1:0),Ae=B.low=Ae+Be,B.high=pe+qe+(Ae>>>0<Be>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,m=h.words,g=this._nDataBytes*8,A=h.sigBytes*8;m[A>>>5]|=128<<24-A%32,m[(A+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(A+128>>>10<<5)+31]=g,h.sigBytes=m.length*4,this._process();var y=this._hash.toX32();return y},"_doFinalize"),clone:s(function(){var h=n.clone.call(this);return h._hash=this._hash.clone(),h},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var p5e=q((SH,f5e)=>{d();(function(t,e,r){typeof SH=="object"?f5e.exports=SH=e(Ki(),$9(),Bce()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(SH,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var m5e=q((RH,h5e)=>{d();(function(t,e,r){typeof RH=="object"?h5e.exports=RH=e(Ki(),$9()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(RH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,A=0,y=0;y<24;y++){u[g+5*A]=(y+1)*(y+2)/2%64;var E=A%5,b=(2*g+3*A)%5;g=E,A=b}for(var g=0;g<5;g++)for(var A=0;A<5;A++)f[g+5*A]=A+(2*g+3*A)%5*5;for(var _=1,S=0;S<24;S++){for(var P=0,B=0,F=0;F<7;F++){if(_&1){var Y=(1<<F)-1;Y<32?B^=1<<Y:P^=1<<Y-32}_&128?_=_<<1^113:_<<=1}p[S]=c.create(P,B)}})();var h=[];(function(){for(var g=0;g<25;g++)h[g]=c.create()})();var m=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],A=0;A<25;A++)g[A]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,A){for(var y=this._state,E=this.blockSize/2,b=0;b<E;b++){var _=g[A+2*b],S=g[A+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var P=y[b];P.high^=S,P.low^=_}for(var B=0;B<24;B++){for(var F=0;F<5;F++){for(var Y=0,ee=0,V=0;V<5;V++){var P=y[F+5*V];Y^=P.high,ee^=P.low}var H=h[F];H.high=Y,H.low=ee}for(var F=0;F<5;F++)for(var U=h[(F+4)%5],X=h[(F+1)%5],K=X.high,j=X.low,Y=U.high^(K<<1|j>>>31),ee=U.low^(j<<1|K>>>31),V=0;V<5;V++){var P=y[F+5*V];P.high^=Y,P.low^=ee}for(var W=1;W<25;W++){var Y,ee,P=y[W],J=P.high,ie=P.low,ae=u[W];ae<32?(Y=J<<ae|ie>>>32-ae,ee=ie<<ae|J>>>32-ae):(Y=ie<<ae-32|J>>>64-ae,ee=J<<ae-32|ie>>>64-ae);var te=h[f[W]];te.high=Y,te.low=ee}var pe=h[0],Ae=y[0];pe.high=Ae.high,pe.low=Ae.low;for(var F=0;F<5;F++)for(var V=0;V<5;V++){var W=F+5*V,P=y[W],Oe=h[W],Te=h[(F+1)%5+5*V],Je=h[(F+2)%5+5*V];P.high=Oe.high^~Te.high&Je.high,P.low=Oe.low^~Te.low&Je.low}var P=y[0],Fe=p[B];P.high^=Fe.high,P.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,A=g.words,y=this._nDataBytes*8,E=g.sigBytes*8,b=this.blockSize*32;A[E>>>5]|=1<<24-E%32,A[(e.ceil((E+1)/b)*b>>>5)-1]|=128,g.sigBytes=A.length*4,this._process();for(var _=this._state,S=this.cfg.outputLength/8,P=S/8,B=[],F=0;F<P;F++){var Y=_[F],ee=Y.high,V=Y.low;ee=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,B.push(V),B.push(ee)}return new i.init(B,S)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),A=g._state=this._state.slice(0),y=0;y<25;y++)A[y]=A[y].clone();return g},"clone")});r.SHA3=o._createHelper(m),r.HmacSHA3=o._createHmacHelper(m)}(Math),t.SHA3})});var A5e=q((kH,g5e)=>{d();(function(t,e){typeof kH=="object"?g5e.exports=kH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(kH,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),m=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(S,P){for(var B=0;B<16;B++){var F=P+B,Y=S[F];S[F]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var ee=this._hash.words,V=p.words,H=h.words,U=c.words,X=l.words,K=u.words,j=f.words,W,J,ie,ae,te,pe,Ae,Oe,Te,Je;pe=W=ee[0],Ae=J=ee[1],Oe=ie=ee[2],Te=ae=ee[3],Je=te=ee[4];for(var Fe,B=0;B<80;B+=1)Fe=W+S[P+U[B]]|0,B<16?Fe+=g(J,ie,ae)+V[0]:B<32?Fe+=A(J,ie,ae)+V[1]:B<48?Fe+=y(J,ie,ae)+V[2]:B<64?Fe+=E(J,ie,ae)+V[3]:Fe+=b(J,ie,ae)+V[4],Fe=Fe|0,Fe=_(Fe,K[B]),Fe=Fe+te|0,W=te,te=ae,ae=_(ie,10),ie=J,J=Fe,Fe=pe+S[P+X[B]]|0,B<16?Fe+=b(Ae,Oe,Te)+H[0]:B<32?Fe+=E(Ae,Oe,Te)+H[1]:B<48?Fe+=y(Ae,Oe,Te)+H[2]:B<64?Fe+=A(Ae,Oe,Te)+H[3]:Fe+=g(Ae,Oe,Te)+H[4],Fe=Fe|0,Fe=_(Fe,j[B]),Fe=Fe+Je|0,pe=Je,Je=Te,Te=_(Oe,10),Oe=Ae,Ae=Fe;Fe=ee[1]+ie+Te|0,ee[1]=ee[2]+ae+Je|0,ee[2]=ee[3]+te+pe|0,ee[3]=ee[4]+W+Ae|0,ee[4]=ee[0]+J+Oe|0,ee[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var S=this._data,P=S.words,B=this._nDataBytes*8,F=S.sigBytes*8;P[F>>>5]|=128<<24-F%32,P[(F+64>>>9<<4)+14]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,S.sigBytes=(P.length+1)*4,this._process();for(var Y=this._hash,ee=Y.words,V=0;V<5;V++){var H=ee[V];ee[V]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return Y},"_doFinalize"),clone:s(function(){var S=o.clone.call(this);return S._hash=this._hash.clone(),S},"clone")});function g(S,P,B){return S^P^B}s(g,"f1");function A(S,P,B){return S&P|~S&B}s(A,"f2");function y(S,P,B){return(S|~P)^B}s(y,"f3");function E(S,P,B){return S&B|P&~B}s(E,"f4");function b(S,P,B){return S^(P|~B)}s(b,"f5");function _(S,P){return S<<P|S>>>32-P}s(_,"rotl"),r.RIPEMD160=o._createHelper(m),r.HmacRIPEMD160=o._createHmacHelper(m)}(Math),t.RIPEMD160})});var DH=q((PH,y5e)=>{d();(function(t,e){typeof PH=="object"?y5e.exports=PH=e(Ki()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(PH,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),m=this._iKey=u.clone(),g=h.words,A=m.words,y=0;y<f;y++)g[y]^=1549556828,A[y]^=909522486;h.sigBytes=m.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var v5e=q((BH,C5e)=>{d();(function(t,e,r){typeof BH=="object"?C5e.exports=BH=e(Ki(),TH(),DH()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(BH,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,h=c.create(p.hasher,u),m=i.create(),g=i.create([1]),A=m.words,y=g.words,E=p.keySize,b=p.iterations;A.length<E;){var _=h.update(f).finalize(g);h.reset();for(var S=_.words,P=S.length,B=_,F=1;F<b;F++){B=h.finalize(B),h.reset();for(var Y=B.words,ee=0;ee<P;ee++)S[ee]^=Y[ee]}m.concat(_),y[0]++}return m.sigBytes=E*4,m},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var $1=q((NH,E5e)=>{d();(function(t,e,r){typeof NH=="object"?E5e.exports=NH=e(Ki(),Dce(),DH()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(NH,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,h=p.hasher.create(),m=i.create(),g=m.words,A=p.keySize,y=p.iterations;g.length<A;){f&&h.update(f),f=h.update(l).finalize(u),h.reset();for(var E=1;E<y;E++)f=h.finalize(f),h.reset();m.concat(f)}return m.sigBytes=A*4,m},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var ll=q((LH,x5e)=>{d();(function(t,e,r){typeof LH=="object"?x5e.exports=LH=e(Ki(),$1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(LH,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,h=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,U){return this.create(this._ENC_XFORM_MODE,H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.create(this._DEC_XFORM_MODE,H,U)},"createDecryptor"),init:s(function(H,U,X){this.cfg=this.cfg.extend(X),this._xformMode=H,this._key=U,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var U=this._doFinalize();return U},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(U){return typeof U=="string"?V:F}return s(H,"selectCipherStrategy"),function(U){return{encrypt:s(function(X,K,j){return H(K).encrypt(U,X,K,j)},"encrypt"),decrypt:s(function(X,K,j){return H(K).decrypt(U,X,K,j)},"decrypt")}}}()}),m=n.StreamCipher=h.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=r.mode={},A=n.BlockCipherMode=i.extend({createEncryptor:s(function(H,U){return this.Encryptor.create(H,U)},"createEncryptor"),createDecryptor:s(function(H,U){return this.Decryptor.create(H,U)},"createDecryptor"),init:s(function(H,U){this._cipher=H,this._iv=U},"init")}),y=g.CBC=function(){var H=A.extend();H.Encryptor=H.extend({processBlock:s(function(X,K){var j=this._cipher,W=j.blockSize;U.call(this,X,K,W),j.encryptBlock(X,K),this._prevBlock=X.slice(K,K+W)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(X,K){var j=this._cipher,W=j.blockSize,J=X.slice(K,K+W);j.decryptBlock(X,K),U.call(this,X,K,W),this._prevBlock=J},"processBlock")});function U(X,K,j){var W,J=this._iv;J?(W=J,this._iv=e):W=this._prevBlock;for(var ie=0;ie<j;ie++)X[K+ie]^=W[ie]}return s(U,"xorBlock"),H}(),E=r.pad={},b=E.Pkcs7={pad:s(function(H,U){for(var X=U*4,K=X-H.sigBytes%X,j=K<<24|K<<16|K<<8|K,W=[],J=0;J<K;J+=4)W.push(j);var ie=o.create(W,K);H.concat(ie)},"pad"),unpad:s(function(H){var U=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=U},"unpad")},_=n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:b}),reset:s(function(){var H;h.reset.call(this);var U=this.cfg,X=U.iv,K=U.mode;this._xformMode==this._ENC_XFORM_MODE?H=K.createEncryptor:(H=K.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,X&&X.words):(this._mode=H.call(K,this,X&&X.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,U){this._mode.processBlock(H,U)},"_doProcessBlock"),_doFinalize:s(function(){var H,U=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(U.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),U.unpad(H)),H},"_doFinalize"),blockSize:128/32}),S=n.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),P=r.format={},B=P.OpenSSL={stringify:s(function(H){var U,X=H.ciphertext,K=H.salt;return K?U=o.create([1398893684,1701076831]).concat(K).concat(X):U=X,U.toString(u)},"stringify"),parse:s(function(H){var U,X=u.parse(H),K=X.words;return K[0]==1398893684&&K[1]==1701076831&&(U=o.create(K.slice(2,4)),K.splice(0,4),X.sigBytes-=16),S.create({ciphertext:X,salt:U})},"parse")},F=n.SerializableCipher=i.extend({cfg:i.extend({format:B}),encrypt:s(function(H,U,X,K){K=this.cfg.extend(K);var j=H.createEncryptor(X,K),W=j.finalize(U),J=j.cfg;return S.create({ciphertext:W,key:X,iv:J.iv,algorithm:H,mode:J.mode,padding:J.padding,blockSize:H.blockSize,formatter:K.format})},"encrypt"),decrypt:s(function(H,U,X,K){K=this.cfg.extend(K),U=this._parse(U,K.format);var j=H.createDecryptor(X,K).finalize(U.ciphertext);return j},"decrypt"),_parse:s(function(H,U){return typeof H=="string"?U.parse(H,this):H},"_parse")}),Y=r.kdf={},ee=Y.OpenSSL={execute:s(function(H,U,X,K,j){if(K||(K=o.random(64/8)),j)var W=p.create({keySize:U+X,hasher:j}).compute(H,K);else var W=p.create({keySize:U+X}).compute(H,K);var J=o.create(W.words.slice(U),X*4);return W.sigBytes=U*4,S.create({key:W,iv:J,salt:K})},"execute")},V=n.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:ee}),encrypt:s(function(H,U,X,K){K=this.cfg.extend(K);var j=K.kdf.execute(X,H.keySize,H.ivSize,K.salt,K.hasher);K.iv=j.iv;var W=F.encrypt.call(this,H,U,j.key,K);return W.mixIn(j),W},"encrypt"),decrypt:s(function(H,U,X,K){K=this.cfg.extend(K),U=this._parse(U,K.format);var j=K.kdf.execute(X,H.keySize,H.ivSize,U.salt,K.hasher);K.iv=j.iv;var W=F.decrypt.call(this,H,U,j.key,K);return W},"decrypt")})}()})});var I5e=q((MH,b5e)=>{d();(function(t,e,r){typeof MH=="object"?b5e.exports=MH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(MH,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var w5e=q((FH,T5e)=>{d();(function(t,e,r){typeof FH=="object"?T5e.exports=FH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(FH,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var S5e=q((OH,_5e)=>{d();(function(t,e,r){typeof OH=="object"?_5e.exports=OH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(OH,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var h=0;h<l;h++)o[a+h]^=p[h]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var k5e=q((QH,R5e)=>{d();(function(t,e,r){typeof QH=="object"?R5e.exports=QH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(QH,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var D5e=q((UH,P5e)=>{d();(function(t,e,r){typeof UH=="object"?P5e.exports=UH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(UH,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var N5e=q((qH,B5e)=>{d();(function(t,e,r){typeof qH=="object"?B5e.exports=qH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(qH,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var M5e=q((HH,L5e)=>{d();(function(t,e,r){typeof HH=="object"?L5e.exports=HH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(HH,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var O5e=q((WH,F5e)=>{d();(function(t,e,r){typeof WH=="object"?F5e.exports=WH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(WH,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var U5e=q(($H,Q5e)=>{d();(function(t,e,r){typeof $H=="object"?Q5e.exports=$H=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})($H,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var H5e=q((jH,q5e)=>{d();(function(t,e,r){typeof jH=="object"?q5e.exports=jH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(jH,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var $5e=q((GH,W5e)=>{d();(function(t,e,r){typeof GH=="object"?W5e.exports=GH=e(Ki(),ll()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(GH,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var G5e=q((VH,j5e)=>{d();(function(t,e,r){typeof VH=="object"?j5e.exports=VH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(VH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],h=[],m=[],g=[];(function(){for(var E=[],b=0;b<256;b++)b<128?E[b]=b<<1:E[b]=b<<1^283;for(var _=0,S=0,b=0;b<256;b++){var P=S^S<<1^S<<2^S<<3^S<<4;P=P>>>8^P&255^99,o[_]=P,a[P]=_;var B=E[_],F=E[B],Y=E[F],ee=E[P]*257^P*16843008;c[_]=ee<<24|ee>>>8,l[_]=ee<<16|ee>>>16,u[_]=ee<<8|ee>>>24,f[_]=ee;var ee=Y*16843009^F*65537^B*257^_*16843008;p[P]=ee<<24|ee>>>8,h[P]=ee<<16|ee>>>16,m[P]=ee<<8|ee>>>24,g[P]=ee,_?(_=B^E[E[E[Y^B]]],S^=E[E[S]]):_=S=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:s(function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,S=b.sigBytes/4,P=this._nRounds=S+6,B=(P+1)*4,F=this._keySchedule=[],Y=0;Y<B;Y++)Y<S?F[Y]=_[Y]:(E=F[Y-1],Y%S?S>6&&Y%S==4&&(E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255]):(E=E<<8|E>>>24,E=o[E>>>24]<<24|o[E>>>16&255]<<16|o[E>>>8&255]<<8|o[E&255],E^=A[Y/S|0]<<24),F[Y]=F[Y-S]^E);for(var ee=this._invKeySchedule=[],V=0;V<B;V++){var Y=B-V;if(V%4)var E=F[Y];else var E=F[Y-4];V<4||Y<=4?ee[V]=E:ee[V]=p[o[E>>>24]]^h[o[E>>>16&255]]^m[o[E>>>8&255]]^g[o[E&255]]}}},"_doReset"),encryptBlock:s(function(E,b){this._doCryptBlock(E,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(E,b){var _=E[b+1];E[b+1]=E[b+3],E[b+3]=_,this._doCryptBlock(E,b,this._invKeySchedule,p,h,m,g,a);var _=E[b+1];E[b+1]=E[b+3],E[b+3]=_},"decryptBlock"),_doCryptBlock:s(function(E,b,_,S,P,B,F,Y){for(var ee=this._nRounds,V=E[b]^_[0],H=E[b+1]^_[1],U=E[b+2]^_[2],X=E[b+3]^_[3],K=4,j=1;j<ee;j++){var W=S[V>>>24]^P[H>>>16&255]^B[U>>>8&255]^F[X&255]^_[K++],J=S[H>>>24]^P[U>>>16&255]^B[X>>>8&255]^F[V&255]^_[K++],ie=S[U>>>24]^P[X>>>16&255]^B[V>>>8&255]^F[H&255]^_[K++],ae=S[X>>>24]^P[V>>>16&255]^B[H>>>8&255]^F[U&255]^_[K++];V=W,H=J,U=ie,X=ae}var W=(Y[V>>>24]<<24|Y[H>>>16&255]<<16|Y[U>>>8&255]<<8|Y[X&255])^_[K++],J=(Y[H>>>24]<<24|Y[U>>>16&255]<<16|Y[X>>>8&255]<<8|Y[V&255])^_[K++],ie=(Y[U>>>24]<<24|Y[X>>>16&255]<<16|Y[V>>>8&255]<<8|Y[H&255])^_[K++],ae=(Y[X>>>24]<<24|Y[V>>>16&255]<<16|Y[H>>>8&255]<<8|Y[U&255])^_[K++];E[b]=W,E[b+1]=J,E[b+2]=ie,E[b+3]=ae},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(y)}(),t.AES})});var z5e=q((zH,V5e)=>{d();(function(t,e,r){typeof zH=="object"?V5e.exports=zH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(zH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var A=this._key,y=A.words,E=[],b=0;b<56;b++){var _=a[b]-1;E[b]=y[_>>>5]>>>31-_%32&1}for(var S=this._subKeys=[],P=0;P<16;P++){for(var B=S[P]=[],F=l[P],b=0;b<24;b++)B[b/6|0]|=E[(c[b]-1+F)%28]<<31-b%6,B[4+(b/6|0)]|=E[28+(c[b+24]-1+F)%28]<<31-b%6;B[0]=B[0]<<1|B[0]>>>31;for(var b=1;b<7;b++)B[b]=B[b]>>>(b-1)*4+3;B[7]=B[7]<<5|B[7]>>>27}for(var Y=this._invSubKeys=[],b=0;b<16;b++)Y[b]=S[15-b]},"_doReset"),encryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._subKeys)},"encryptBlock"),decryptBlock:s(function(A,y){this._doCryptBlock(A,y,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(A,y,E){this._lBlock=A[y],this._rBlock=A[y+1],h.call(this,4,252645135),h.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),h.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=E[b],S=this._lBlock,P=this._rBlock,B=0,F=0;F<8;F++)B|=u[F][((P^_[F])&f[F])>>>0];this._lBlock=P,this._rBlock=S^B}var Y=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Y,h.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),A[y]=this._lBlock,A[y+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function h(A,y){var E=(this._lBlock>>>A^this._rBlock)&y;this._rBlock^=E,this._lBlock^=E<<A}s(h,"exchangeLR");function m(A,y){var E=(this._rBlock>>>A^this._lBlock)&y;this._lBlock^=E,this._rBlock^=E<<A}s(m,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var A=this._key,y=A.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=y.slice(0,2),b=y.length<4?y.slice(0,2):y.slice(2,4),_=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=p.createEncryptor(n.create(E)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(A,y){this._des1.encryptBlock(A,y),this._des2.decryptBlock(A,y),this._des3.encryptBlock(A,y)},"encryptBlock"),decryptBlock:s(function(A,y){this._des3.decryptBlock(A,y),this._des2.encryptBlock(A,y),this._des1.decryptBlock(A,y)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var K5e=q((YH,Y5e)=>{d();(function(t,e,r){typeof YH=="object"?Y5e.exports=YH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(YH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],h=0;h<256;h++)p[h]=h;for(var h=0,m=0;h<256;h++){var g=h%f,A=u[g>>>2]>>>24-g%4*8&255;m=(m+p[h]+A)%256;var y=p[h];p[h]=p[m],p[m]=y}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,h=0;h<4;h++){u=(u+1)%256,f=(f+l[u])%256;var m=l[u];l[u]=l[f],l[f]=m,p|=l[(l[u]+l[f])%256]<<24-h*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var X5e=q((KH,J5e)=>{d();(function(t,e,r){typeof KH=="object"?J5e.exports=KH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(KH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,h=0;h<4;h++)f[h]=(f[h]<<8|f[h]>>>24)&16711935|(f[h]<<24|f[h]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var h=0;h<4;h++)u.call(this);for(var h=0;h<8;h++)g[h]^=m[h+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,_=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,S=b>>>16|_&4294901760,P=_<<16|b&65535;g[0]^=b,g[1]^=S,g[2]^=_,g[3]^=P,g[4]^=b,g[5]^=S,g[6]^=_,g[7]^=P;for(var h=0;h<4;h++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var h=this._X;u.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var m=0;m<4;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360,f[p+m]^=o[m]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,h=0;h<8;h++)a[h]=p[h];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var h=0;h<8;h++){var m=f[h]+p[h],g=m&65535,A=m>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((m&4294901760)*m|0)+((m&65535)*m|0);c[h]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var eke=q((JH,Z5e)=>{d();(function(t,e,r){typeof JH=="object"?Z5e.exports=JH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(JH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)m[g]^=h[g+4&7];if(p){var A=p.words,y=A[0],E=A[1],b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,_=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,S=b>>>16|_&4294901760,P=_<<16|b&65535;m[0]^=b,m[1]^=S,m[2]^=_,m[3]^=P,m[4]^=b,m[5]^=S,m[6]^=_,m[7]^=P;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var h=this._X;u.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var m=0;m<4;m++)o[m]=(o[m]<<8|o[m]>>>24)&16711935|(o[m]<<24|o[m]>>>8)&4278255360,f[p+m]^=o[m]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,h=0;h<8;h++)a[h]=p[h];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var h=0;h<8;h++){var m=f[h]+p[h],g=m&65535,A=m>>>16,y=((g*g>>>17)+g*A>>>15)+A*A,E=((m&4294901760)*m|0)+((m&65535)*m|0);c[h]=y^E}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var rke=q((XH,tke)=>{d();(function(t,e,r){typeof XH=="object"?tke.exports=XH=e(Ki(),xb(),bb(),$1(),ll()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(XH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,A){let y=A>>24&255,E=A>>16&255,b=A>>8&255,_=A&255,S=g.sbox[0][y]+g.sbox[1][E];return S=S^g.sbox[2][b],S=S+g.sbox[3][_],S}s(u,"F");function f(g,A,y){let E=A,b=y,_;for(let S=0;S<o;++S)E=E^g.pbox[S],b=u(g,E)^b,_=E,E=b,b=_;return _=E,E=b,b=_,b=b^g.pbox[o],E=E^g.pbox[o+1],{left:E,right:b}}s(f,"BlowFish_Encrypt");function p(g,A,y){let E=A,b=y,_;for(let S=o+1;S>1;--S)E=E^g.pbox[S],b=u(g,E)^b,_=E,E=b,b=_;return _=E,E=b,b=_,b=b^g.pbox[1],E=E^g.pbox[0],{left:E,right:b}}s(p,"BlowFish_Decrypt");function h(g,A,y){for(let P=0;P<4;P++){g.sbox[P]=[];for(let B=0;B<256;B++)g.sbox[P][B]=c[P][B]}let E=0;for(let P=0;P<o+2;P++)g.pbox[P]=a[P]^A[E],E++,E>=y&&(E=0);let b=0,_=0,S=0;for(let P=0;P<o+2;P+=2)S=f(g,b,_),b=S.left,_=S.right,g.pbox[P]=b,g.pbox[P+1]=_;for(let P=0;P<4;P++)for(let B=0;B<256;B+=2)S=f(g,b,_),b=S.left,_=S.right,g.sbox[P][B]=b,g.sbox[P][B+1]=_;return!0}s(h,"BlowFishInit");var m=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,A=g.words,y=g.sigBytes/4;h(l,A,y)}},"_doReset"),encryptBlock:s(function(g,A){var y=f(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"encryptBlock"),decryptBlock:s(function(g,A){var y=p(l,g[A],g[A+1]);g[A]=y.left,g[A+1]=y.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(m)}(),t.Blowfish})});var Ib=q((ZH,nke)=>{d();(function(t,e,r){typeof ZH=="object"?nke.exports=ZH=e(Ki(),$9(),e5e(),r5e(),xb(),o5e(),bb(),Dce(),TH(),u5e(),Bce(),p5e(),m5e(),A5e(),DH(),v5e(),$1(),ll(),I5e(),w5e(),S5e(),k5e(),D5e(),N5e(),M5e(),O5e(),U5e(),H5e(),$5e(),G5e(),z5e(),K5e(),X5e(),eke(),rke()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(ZH,function(t){return t})});var q4=q(ad=>{"use strict";d();Object.defineProperty(ad,"__esModule",{value:!0});ad.stringArray=ad.array=ad.func=ad.error=ad.number=ad.string=ad.boolean=void 0;function iwt(t){return t===!0||t===!1}s(iwt,"boolean");ad.boolean=iwt;function FPe(t){return typeof t=="string"||t instanceof String}s(FPe,"string");ad.string=FPe;function owt(t){return typeof t=="number"||t instanceof Number}s(owt,"number");ad.number=owt;function swt(t){return t instanceof Error}s(swt,"error");ad.error=swt;function awt(t){return typeof t=="function"}s(awt,"func");ad.func=awt;function OPe(t){return Array.isArray(t)}s(OPe,"array");ad.array=OPe;function cwt(t){return OPe(t)&&t.every(e=>FPe(e))}s(cwt,"stringArray");ad.stringArray=cwt});var oue=q(nn=>{"use strict";d();Object.defineProperty(nn,"__esModule",{value:!0});nn.Message=nn.NotificationType9=nn.NotificationType8=nn.NotificationType7=nn.NotificationType6=nn.NotificationType5=nn.NotificationType4=nn.NotificationType3=nn.NotificationType2=nn.NotificationType1=nn.NotificationType0=nn.NotificationType=nn.RequestType9=nn.RequestType8=nn.RequestType7=nn.RequestType6=nn.RequestType5=nn.RequestType4=nn.RequestType3=nn.RequestType2=nn.RequestType1=nn.RequestType=nn.RequestType0=nn.AbstractMessageSignature=nn.ParameterStructures=nn.ResponseError=nn.ErrorCodes=void 0;var G_=q4(),Lle;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Lle||(nn.ErrorCodes=Lle={}));var Mle=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=G_.number(e)?e:Lle.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};nn.ResponseError=Mle;var Nf=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};nn.ParameterStructures=Nf;Nf.auto=new Nf("auto");Nf.byPosition=new Nf("byPosition");Nf.byName=new Nf("byName");var Vs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Nf.auto}};nn.AbstractMessageSignature=Vs;var Fle=class extends Vs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};nn.RequestType0=Fle;var Ole=class extends Vs{static{s(this,"RequestType")}constructor(e,r=Nf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};nn.RequestType=Ole;var Qle=class extends Vs{static{s(this,"RequestType1")}constructor(e,r=Nf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};nn.RequestType1=Qle;var Ule=class extends Vs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};nn.RequestType2=Ule;var qle=class extends Vs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};nn.RequestType3=qle;var Hle=class extends Vs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};nn.RequestType4=Hle;var Wle=class extends Vs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};nn.RequestType5=Wle;var $le=class extends Vs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};nn.RequestType6=$le;var jle=class extends Vs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};nn.RequestType7=jle;var Gle=class extends Vs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};nn.RequestType8=Gle;var Vle=class extends Vs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};nn.RequestType9=Vle;var zle=class extends Vs{static{s(this,"NotificationType")}constructor(e,r=Nf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};nn.NotificationType=zle;var Yle=class extends Vs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};nn.NotificationType0=Yle;var Kle=class extends Vs{static{s(this,"NotificationType1")}constructor(e,r=Nf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};nn.NotificationType1=Kle;var Jle=class extends Vs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};nn.NotificationType2=Jle;var Xle=class extends Vs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};nn.NotificationType3=Xle;var Zle=class extends Vs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};nn.NotificationType4=Zle;var eue=class extends Vs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};nn.NotificationType5=eue;var tue=class extends Vs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};nn.NotificationType6=tue;var rue=class extends Vs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};nn.NotificationType7=rue;var nue=class extends Vs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};nn.NotificationType8=nue;var iue=class extends Vs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};nn.NotificationType9=iue;var QPe;(function(t){function e(i){let o=i;return o&&G_.string(o.method)&&(G_.string(o.id)||G_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&G_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(G_.string(o.id)||G_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(QPe||(nn.Message=QPe={}))});var aue=q(Lb=>{"use strict";d();var UPe;Object.defineProperty(Lb,"__esModule",{value:!0});Lb.LRUCache=Lb.LinkedMap=Lb.Touch=void 0;var cd;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(cd||(Lb.Touch=cd={}));var MW=class{static{s(this,"LinkedMap")}constructor(){this[UPe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=cd.None){let n=this._map.get(e);if(n)return r!==cd.None&&this.touch(n,r),n.value}set(e,r,n=cd.None){let i=this._map.get(e);if(i)i.value=r,n!==cd.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case cd.None:this.addItemLast(i);break;case cd.First:this.addItemFirst(i);break;case cd.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(UPe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==cd.First&&r!==cd.Last)){if(r===cd.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===cd.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Lb.LinkedMap=MW;var sue=class extends MW{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=cd.AsNew){return super.get(e,r)}peek(e){return super.get(e,cd.None)}set(e,r){return super.set(e,r,cd.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Lb.LRUCache=sue});var HPe=q(FW=>{"use strict";d();Object.defineProperty(FW,"__esModule",{value:!0});FW.Disposable=void 0;var qPe;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(qPe||(FW.Disposable=qPe={}))});var Mb=q(uue=>{"use strict";d();Object.defineProperty(uue,"__esModule",{value:!0});var cue;function lue(){if(cue===void 0)throw new Error("No runtime abstraction layer installed");return cue}s(lue,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");cue=r}s(e,"install"),t.install=e})(lue||(lue={}));uue.default=lue});var W4=q(H4=>{"use strict";d();Object.defineProperty(H4,"__esModule",{value:!0});H4.Emitter=H4.Event=void 0;var lwt=Mb(),WPe;(function(t){let e={dispose(){}};t.None=function(){return e}})(WPe||(H4.Event=WPe={}));var due=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,lwt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},OW=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new due),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};H4.Emitter=OW;OW._noop=function(){}});var qW=q($4=>{"use strict";d();Object.defineProperty($4,"__esModule",{value:!0});$4.CancellationTokenSource=$4.CancellationToken=void 0;var uwt=Mb(),dwt=q4(),fue=W4(),QW;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:fue.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:fue.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||dwt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(QW||($4.CancellationToken=QW={}));var fwt=Object.freeze(function(t,e){let r=(0,uwt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),UW=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?fwt:(this._emitter||(this._emitter=new fue.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},pue=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new UW),this._token}cancel(){this._token?this._token.cancel():this._token=QW.Cancelled}dispose(){this._token?this._token instanceof UW&&this._token.dispose():this._token=QW.None}};$4.CancellationTokenSource=pue});var $Pe=q(j4=>{"use strict";d();Object.defineProperty(j4,"__esModule",{value:!0});j4.SharedArrayReceiverStrategy=j4.SharedArraySenderStrategy=void 0;var pwt=qW(),u6;(function(t){t.Continue=0,t.Cancelled=1})(u6||(u6={}));var hue=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=u6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,u6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};j4.SharedArraySenderStrategy=hue;var mue=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===u6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},gue=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new mue(e)}cancel(){}dispose(){}},Aue=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new pwt.CancellationTokenSource:new gue(r)}};j4.SharedArrayReceiverStrategy=Aue});var Cue=q(HW=>{"use strict";d();Object.defineProperty(HW,"__esModule",{value:!0});HW.Semaphore=void 0;var hwt=Mb(),yue=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,hwt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};HW.Semaphore=yue});var GPe=q(Fb=>{"use strict";d();Object.defineProperty(Fb,"__esModule",{value:!0});Fb.ReadableStreamMessageReader=Fb.AbstractMessageReader=Fb.MessageReader=void 0;var Eue=Mb(),G4=q4(),vue=W4(),mwt=Cue(),jPe;(function(t){function e(r){let n=r;return n&&G4.func(n.listen)&&G4.func(n.dispose)&&G4.func(n.onError)&&G4.func(n.onClose)&&G4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(jPe||(Fb.MessageReader=jPe={}));var WW=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new vue.Emitter,this.closeEmitter=new vue.Emitter,this.partialMessageEmitter=new vue.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${G4.string(e.message)?e.message:"unknown"}`)}};Fb.AbstractMessageReader=WW;var xue;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Eue.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(xue||(xue={}));var bue=class extends WW{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=xue.fromOptions(r),this.buffer=(0,Eue.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new mwt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Eue.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Fb.ReadableStreamMessageReader=bue});var JPe=q(Ob=>{"use strict";d();Object.defineProperty(Ob,"__esModule",{value:!0});Ob.WriteableStreamMessageWriter=Ob.AbstractMessageWriter=Ob.MessageWriter=void 0;var VPe=Mb(),d6=q4(),gwt=Cue(),zPe=W4(),Awt="Content-Length: ",YPe=`\r
`,KPe;(function(t){function e(r){let n=r;return n&&d6.func(n.dispose)&&d6.func(n.onClose)&&d6.func(n.onError)&&d6.func(n.write)}s(e,"is"),t.is=e})(KPe||(Ob.MessageWriter=KPe={}));var $W=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new zPe.Emitter,this.closeEmitter=new zPe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${d6.string(e.message)?e.message:"unknown"}`)}};Ob.AbstractMessageWriter=$W;var Iue;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,VPe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,VPe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(Iue||(Iue={}));var Tue=class extends $W{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=Iue.fromOptions(r),this.errorCount=0,this.writeSemaphore=new gwt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(Awt,n.byteLength.toString(),YPe),i.push(YPe),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Ob.WriteableStreamMessageWriter=Tue});var XPe=q(jW=>{"use strict";d();Object.defineProperty(jW,"__esModule",{value:!0});jW.AbstractMessageBuffer=void 0;var ywt=13,Cwt=10,vwt=`\r
`,wue=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case ywt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case Cwt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(vwt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let h=f.substr(0,p),m=f.substr(p+1).trim();c.set(e?h.toLowerCase():h,m)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};jW.AbstractMessageBuffer=wue});var n3e=q(ui=>{"use strict";d();Object.defineProperty(ui,"__esModule",{value:!0});ui.createMessageConnection=ui.ConnectionOptions=ui.MessageStrategy=ui.CancellationStrategy=ui.CancellationSenderStrategy=ui.CancellationReceiverStrategy=ui.RequestCancellationReceiverStrategy=ui.IdCancellationReceiverStrategy=ui.ConnectionStrategy=ui.ConnectionError=ui.ConnectionErrors=ui.LogTraceNotification=ui.SetTraceNotification=ui.TraceFormat=ui.TraceValues=ui.Trace=ui.NullLogger=ui.ProgressType=ui.ProgressToken=void 0;var ZPe=Mb(),Ba=q4(),Mn=oue(),e3e=aue(),f6=W4(),_ue=qW(),m6;(function(t){t.type=new Mn.NotificationType("$/cancelRequest")})(m6||(m6={}));var Sue;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(Sue||(ui.ProgressToken=Sue={}));var p6;(function(t){t.type=new Mn.NotificationType("$/progress")})(p6||(p6={}));var Rue=class{static{s(this,"ProgressType")}constructor(){}};ui.ProgressType=Rue;var kue;(function(t){function e(r){return Ba.func(r)}s(e,"is"),t.is=e})(kue||(kue={}));ui.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Uo;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Uo||(ui.Trace=Uo={}));var t3e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(t3e||(ui.TraceValues=t3e={}));(function(t){function e(n){if(!Ba.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(Uo||(ui.Trace=Uo={}));var G0;(function(t){t.Text="text",t.JSON="json"})(G0||(ui.TraceFormat=G0={}));(function(t){function e(r){return Ba.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(G0||(ui.TraceFormat=G0={}));var Pue;(function(t){t.type=new Mn.NotificationType("$/setTrace")})(Pue||(ui.SetTraceNotification=Pue={}));var GW;(function(t){t.type=new Mn.NotificationType("$/logTrace")})(GW||(ui.LogTraceNotification=GW={}));var h6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(h6||(ui.ConnectionErrors=h6={}));var V4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ui.ConnectionError=V4;var Due;(function(t){function e(r){let n=r;return n&&Ba.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(Due||(ui.ConnectionStrategy=Due={}));var VW;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ba.func(n.dispose))}s(e,"is"),t.is=e})(VW||(ui.IdCancellationReceiverStrategy=VW={}));var Bue;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ba.func(n.dispose))}s(e,"is"),t.is=e})(Bue||(ui.RequestCancellationReceiverStrategy=Bue={}));var zW;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new _ue.CancellationTokenSource}});function e(r){return VW.is(r)||Bue.is(r)}s(e,"is"),t.is=e})(zW||(ui.CancellationReceiverStrategy=zW={}));var YW;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(m6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ba.func(n.sendCancellation)&&Ba.func(n.cleanup)}s(e,"is"),t.is=e})(YW||(ui.CancellationSenderStrategy=YW={}));var KW;(function(t){t.Message=Object.freeze({receiver:zW.Message,sender:YW.Message});function e(r){let n=r;return n&&zW.is(n.receiver)&&YW.is(n.sender)}s(e,"is"),t.is=e})(KW||(ui.CancellationStrategy=KW={}));var JW;(function(t){function e(r){let n=r;return n&&Ba.func(n.handleMessage)}s(e,"is"),t.is=e})(JW||(ui.MessageStrategy=JW={}));var r3e;(function(t){function e(r){let n=r;return n&&(KW.is(n.cancellationStrategy)||Due.is(n.connectionStrategy)||JW.is(n.messageStrategy))}s(e,"is"),t.is=e})(r3e||(ui.ConnectionOptions=r3e={}));var xg;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(xg||(xg={}));function Ewt(t,e,r,n){let i=r!==void 0?r:ui.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,h=new Map,m=new Map,g,A=new e3e.LinkedMap,y=new Map,E=new Set,b=new Map,_=Uo.Off,S=G0.Text,P,B=xg.New,F=new f6.Emitter,Y=new f6.Emitter,ee=new f6.Emitter,V=new f6.Emitter,H=new f6.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:KW.Message;function X(ve){if(ve===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+ve.toString()}s(X,"createRequestQueueKey");function K(ve){return ve===null?"res-unknown-"+(++c).toString():"res-"+ve.toString()}s(K,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function W(ve,Ge){Mn.Message.isRequest(Ge)?ve.set(X(Ge.id),Ge):Mn.Message.isResponse(Ge)?ve.set(K(Ge.id),Ge):ve.set(j(),Ge)}s(W,"addMessageToQueue");function J(ve){}s(J,"cancelUndispatched");function ie(){return B===xg.Listening}s(ie,"isListening");function ae(){return B===xg.Closed}s(ae,"isClosed");function te(){return B===xg.Disposed}s(te,"isDisposed");function pe(){(B===xg.New||B===xg.Listening)&&(B=xg.Closed,Y.fire(void 0))}s(pe,"closeHandler");function Ae(ve){F.fire([ve,void 0,void 0])}s(Ae,"readErrorHandler");function Oe(ve){F.fire(ve)}s(Oe,"writeErrorHandler"),t.onClose(pe),t.onError(Ae),e.onClose(pe),e.onError(Oe);function Te(){g||A.size===0||(g=(0,ZPe.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(Te,"triggerMessageQueue");function Je(ve){Mn.Message.isRequest(ve)?St(ve):Mn.Message.isNotification(ve)?mt(ve):Mn.Message.isResponse(ve)?vt(ve):ue(ve)}s(Je,"handleMessage");function Fe(){if(A.size===0)return;let ve=A.shift();try{let Ge=n?.messageStrategy;JW.is(Ge)?Ge.handleMessage(ve,Je):Je(ve)}finally{Te()}}s(Fe,"processMessageQueue");let ct=s(ve=>{try{if(Mn.Message.isNotification(ve)&&ve.method===m6.type.method){let Ge=ve.params.id,ft=X(Ge),It=A.get(ft);if(Mn.Message.isRequest(It)){let Xt=n?.connectionStrategy,xr=Xt&&Xt.cancelUndispatched?Xt.cancelUndispatched(It,J):void 0;if(xr&&(xr.error!==void 0||xr.result!==void 0)){A.delete(ft),b.delete(Ge),xr.id=It.id,se(xr,ve.method,Date.now()),e.write(xr).catch(()=>i.error("Sending response for canceled message failed."));return}}let rr=b.get(Ge);if(rr!==void 0){rr.cancel(),qe(ve);return}else E.add(Ge)}W(A,ve)}finally{Te()}},"callback");function St(ve){if(te())return;function Ge(er,sr,tr){let kr={jsonrpc:l,id:ve.id};er instanceof Mn.ResponseError?kr.error=er.toJson():kr.result=er===void 0?null:er,se(kr,sr,tr),e.write(kr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(er,sr,tr){let kr={jsonrpc:l,id:ve.id,error:er.toJson()};se(kr,sr,tr),e.write(kr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function It(er,sr,tr){er===void 0&&(er=null);let kr={jsonrpc:l,id:ve.id,result:er};se(kr,sr,tr),e.write(kr).catch(()=>i.error("Sending response failed."))}s(It,"replySuccess"),le(ve);let rr=f.get(ve.method),Xt,xr;rr&&(Xt=rr.type,xr=rr.handler);let ar=Date.now();if(xr||u){let er=ve.id??String(Date.now()),sr=VW.is(U.receiver)?U.receiver.createCancellationTokenSource(er):U.receiver.createCancellationTokenSource(ve);ve.id!==null&&E.has(ve.id)&&sr.cancel(),ve.id!==null&&b.set(er,sr);try{let tr;if(xr)if(ve.params===void 0){if(Xt!==void 0&&Xt.numberOfParams!==0){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines ${Xt.numberOfParams} params but received none.`),ve.method,ar);return}tr=xr(sr.token)}else if(Array.isArray(ve.params)){if(Xt!==void 0&&Xt.parameterStructures===Mn.ParameterStructures.byName){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by name but received parameters by position`),ve.method,ar);return}tr=xr(...ve.params,sr.token)}else{if(Xt!==void 0&&Xt.parameterStructures===Mn.ParameterStructures.byPosition){ft(new Mn.ResponseError(Mn.ErrorCodes.InvalidParams,`Request ${ve.method} defines parameters by position but received parameters by name`),ve.method,ar);return}tr=xr(ve.params,sr.token)}else u&&(tr=u(ve.method,ve.params,sr.token));let kr=tr;tr?kr.then?kr.then(Ur=>{b.delete(er),Ge(Ur,ve.method,ar)},Ur=>{b.delete(er),Ur instanceof Mn.ResponseError?ft(Ur,ve.method,ar):Ur&&Ba.string(Ur.message)?ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${Ur.message}`),ve.method,ar):ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ar)}):(b.delete(er),Ge(tr,ve.method,ar)):(b.delete(er),It(tr,ve.method,ar))}catch(tr){b.delete(er),tr instanceof Mn.ResponseError?Ge(tr,ve.method,ar):tr&&Ba.string(tr.message)?ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed with message: ${tr.message}`),ve.method,ar):ft(new Mn.ResponseError(Mn.ErrorCodes.InternalError,`Request ${ve.method} failed unexpectedly without providing any details.`),ve.method,ar)}}else ft(new Mn.ResponseError(Mn.ErrorCodes.MethodNotFound,`Unhandled method ${ve.method}`),ve.method,ar)}s(St,"handleRequest");function vt(ve){if(!te())if(ve.id===null)ve.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(ve.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=ve.id,ft=y.get(Ge);if(Be(ve,ft),ft!==void 0){y.delete(Ge);try{if(ve.error){let It=ve.error;ft.reject(new Mn.ResponseError(It.code,It.message,It.data))}else if(ve.result!==void 0)ft.resolve(ve.result);else throw new Error("Should never happen.")}catch(It){It.message?i.error(`Response handler '${ft.method}' failed with message: ${It.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(vt,"handleResponse");function mt(ve){if(te())return;let Ge,ft;if(ve.method===m6.type.method){let It=ve.params.id;E.delete(It),qe(ve);return}else{let It=h.get(ve.method);It&&(ft=It.handler,Ge=It.type)}if(ft||p)try{if(qe(ve),ft)if(ve.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Mn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(ve.params)){let It=ve.params;ve.method===p6.type.method&&It.length===2&&Sue.is(It[0])?ft({token:It[0],value:It[1]}):(Ge!==void 0&&(Ge.parameterStructures===Mn.ParameterStructures.byName&&i.error(`Notification ${ve.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==ve.params.length&&i.error(`Notification ${ve.method} defines ${Ge.numberOfParams} params but received ${It.length} arguments`)),ft(...It))}else Ge!==void 0&&Ge.parameterStructures===Mn.ParameterStructures.byPosition&&i.error(`Notification ${ve.method} defines parameters by position but received parameters by name`),ft(ve.params);else p&&p(ve.method,ve.params)}catch(It){It.message?i.error(`Notification handler '${ve.method}' failed with message: ${It.message}`):i.error(`Notification handler '${ve.method}' failed unexpectedly.`)}else ee.fire(ve)}s(mt,"handleNotification");function ue(ve){if(!ve){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(ve,null,4)}`);let Ge=ve;if(Ba.string(Ge.id)||Ba.number(Ge.id)){let ft=Ge.id,It=y.get(ft);It&&It.reject(new Error("The received response has neither a result nor an error property."))}}s(ue,"handleInvalidMessage");function Ue(ve){if(ve!=null)switch(_){case Uo.Verbose:return JSON.stringify(ve,null,4);case Uo.Compact:return JSON.stringify(ve);default:return}}s(Ue,"stringifyTrace");function ye(ve){if(!(_===Uo.Off||!P))if(S===G0.Text){let Ge;(_===Uo.Verbose||_===Uo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),P.log(`Sending request '${ve.method} - (${ve.id})'.`,Ge)}else xe("send-request",ve)}s(ye,"traceSendingRequest");function We(ve){if(!(_===Uo.Off||!P))if(S===G0.Text){let Ge;(_===Uo.Verbose||_===Uo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),P.log(`Sending notification '${ve.method}'.`,Ge)}else xe("send-notification",ve)}s(We,"traceSendingNotification");function se(ve,Ge,ft){if(!(_===Uo.Off||!P))if(S===G0.Text){let It;(_===Uo.Verbose||_===Uo.Compact)&&(ve.error&&ve.error.data?It=`Error data: ${Ue(ve.error.data)}

`:ve.result?It=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(It=`No result returned.

`)),P.log(`Sending response '${Ge} - (${ve.id})'. Processing request took ${Date.now()-ft}ms`,It)}else xe("send-response",ve)}s(se,"traceSendingResponse");function le(ve){if(!(_===Uo.Off||!P))if(S===G0.Text){let Ge;(_===Uo.Verbose||_===Uo.Compact)&&ve.params&&(Ge=`Params: ${Ue(ve.params)}

`),P.log(`Received request '${ve.method} - (${ve.id})'.`,Ge)}else xe("receive-request",ve)}s(le,"traceReceivedRequest");function qe(ve){if(!(_===Uo.Off||!P||ve.method===GW.type.method))if(S===G0.Text){let Ge;(_===Uo.Verbose||_===Uo.Compact)&&(ve.params?Ge=`Params: ${Ue(ve.params)}

`:Ge=`No parameters provided.

`),P.log(`Received notification '${ve.method}'.`,Ge)}else xe("receive-notification",ve)}s(qe,"traceReceivedNotification");function Be(ve,Ge){if(!(_===Uo.Off||!P))if(S===G0.Text){let ft;if((_===Uo.Verbose||_===Uo.Compact)&&(ve.error&&ve.error.data?ft=`Error data: ${Ue(ve.error.data)}

`:ve.result?ft=`Result: ${Ue(ve.result)}

`:ve.error===void 0&&(ft=`No result returned.

`)),Ge){let It=ve.error?` Request failed: ${ve.error.message} (${ve.error.code}).`:"";P.log(`Received response '${Ge.method} - (${ve.id})' in ${Date.now()-Ge.timerStart}ms.${It}`,ft)}else P.log(`Received response ${ve.id} without active response promise.`,ft)}else xe("receive-response",ve)}s(Be,"traceReceivedResponse");function xe(ve,Ge){if(!P||_===Uo.Off)return;let ft={isLSPMessage:!0,type:ve,message:Ge,timestamp:Date.now()};P.log(ft)}s(xe,"logLSPMessage");function je(){if(ae())throw new V4(h6.Closed,"Connection is closed.");if(te())throw new V4(h6.Disposed,"Connection is disposed.")}s(je,"throwIfClosedOrDisposed");function et(){if(ie())throw new V4(h6.AlreadyListening,"Connection is already listening")}s(et,"throwIfListening");function pt(){if(!ie())throw new Error("Call listen() first.")}s(pt,"throwIfNotListening");function Lt(ve){return ve===void 0?null:ve}s(Lt,"undefinedToNull");function Kt(ve){if(ve!==null)return ve}s(Kt,"nullToUndefined");function Ft(ve){return ve!=null&&!Array.isArray(ve)&&typeof ve=="object"}s(Ft,"isNamedParam");function Qr(ve,Ge){switch(ve){case Mn.ParameterStructures.auto:return Ft(Ge)?Kt(Ge):[Lt(Ge)];case Mn.ParameterStructures.byName:if(!Ft(Ge))throw new Error("Received parameters by name but param is not an object literal.");return Kt(Ge);case Mn.ParameterStructures.byPosition:return[Lt(Ge)];default:throw new Error(`Unknown parameter structure ${ve.toString()}`)}}s(Qr,"computeSingleParam");function Sr(ve,Ge){let ft,It=ve.numberOfParams;switch(It){case 0:ft=void 0;break;case 1:ft=Qr(ve.parameterStructures,Ge[0]);break;default:ft=[];for(let rr=0;rr<Ge.length&&rr<It;rr++)ft.push(Lt(Ge[rr]));if(Ge.length<It)for(let rr=Ge.length;rr<It;rr++)ft.push(null);break}return ft}s(Sr,"computeMessageParams");let rn={sendNotification:s((ve,...Ge)=>{je();let ft,It;if(Ba.string(ve)){ft=ve;let Xt=Ge[0],xr=0,ar=Mn.ParameterStructures.auto;Mn.ParameterStructures.is(Xt)&&(xr=1,ar=Xt);let er=Ge.length,sr=er-xr;switch(sr){case 0:It=void 0;break;case 1:It=Qr(ar,Ge[xr]);break;default:if(ar===Mn.ParameterStructures.byName)throw new Error(`Received ${sr} parameters for 'by Name' notification parameter structure.`);It=Ge.slice(xr,er).map(tr=>Lt(tr));break}}else{let Xt=Ge;ft=ve.method,It=Sr(ve,Xt)}let rr={jsonrpc:l,method:ft,params:It};return We(rr),e.write(rr).catch(Xt=>{throw i.error("Sending notification failed."),Xt})},"sendNotification"),onNotification:s((ve,Ge)=>{je();let ft;return Ba.func(ve)?p=ve:Ge&&(Ba.string(ve)?(ft=ve,h.set(ve,{type:void 0,handler:Ge})):(ft=ve.method,h.set(ve.method,{type:ve,handler:Ge}))),{dispose:s(()=>{ft!==void 0?h.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((ve,Ge,ft)=>{if(m.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return m.set(Ge,ft),{dispose:s(()=>{m.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((ve,Ge,ft)=>rn.sendNotification(p6.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:V.event,sendRequest:s((ve,...Ge)=>{je(),pt();let ft,It,rr;if(Ba.string(ve)){ft=ve;let er=Ge[0],sr=Ge[Ge.length-1],tr=0,kr=Mn.ParameterStructures.auto;Mn.ParameterStructures.is(er)&&(tr=1,kr=er);let Ur=Ge.length;_ue.CancellationToken.is(sr)&&(Ur=Ur-1,rr=sr);let Jr=Ur-tr;switch(Jr){case 0:It=void 0;break;case 1:It=Qr(kr,Ge[tr]);break;default:if(kr===Mn.ParameterStructures.byName)throw new Error(`Received ${Jr} parameters for 'by Name' request parameter structure.`);It=Ge.slice(tr,Ur).map(hn=>Lt(hn));break}}else{let er=Ge;ft=ve.method,It=Sr(ve,er);let sr=ve.numberOfParams;rr=_ue.CancellationToken.is(er[sr])?er[sr]:void 0}let Xt=o++,xr;rr&&(xr=rr.onCancellationRequested(()=>{let er=U.sender.sendCancellation(rn,Xt);return er===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Xt}`),Promise.resolve()):er.catch(()=>{i.log(`Sending cancellation messages for id ${Xt} failed`)})}));let ar={jsonrpc:l,id:Xt,method:ft,params:It};return ye(ar),typeof U.sender.enableCancellation=="function"&&U.sender.enableCancellation(ar),new Promise(async(er,sr)=>{let tr=s(Jr=>{er(Jr),U.sender.cleanup(Xt),xr?.dispose()},"resolveWithCleanup"),kr=s(Jr=>{sr(Jr),U.sender.cleanup(Xt),xr?.dispose()},"rejectWithCleanup"),Ur={method:ft,timerStart:Date.now(),resolve:tr,reject:kr};try{await e.write(ar),y.set(Xt,Ur)}catch(Jr){throw i.error("Sending request failed."),Ur.reject(new Mn.ResponseError(Mn.ErrorCodes.MessageWriteError,Jr.message?Jr.message:"Unknown reason")),Jr}})},"sendRequest"),onRequest:s((ve,Ge)=>{je();let ft=null;return kue.is(ve)?(ft=void 0,u=ve):Ba.string(ve)?(ft=null,Ge!==void 0&&(ft=ve,f.set(ve,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=ve.method,f.set(ve.method,{type:ve,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>y.size>0,"hasPendingResponse"),trace:s(async(ve,Ge,ft)=>{let It=!1,rr=G0.Text;ft!==void 0&&(Ba.boolean(ft)?It=ft:(It=ft.sendNotification||!1,rr=ft.traceFormat||G0.Text)),_=ve,S=rr,_===Uo.Off?P=void 0:P=Ge,It&&!ae()&&!te()&&await rn.sendNotification(Pue.type,{value:Uo.toString(ve)})},"trace"),onError:F.event,onClose:Y.event,onUnhandledNotification:ee.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;B=xg.Disposed,H.fire(void 0);let ve=new Mn.ResponseError(Mn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of y.values())Ge.reject(ve);y=new Map,b=new Map,E=new Set,A=new e3e.LinkedMap,Ba.func(e.dispose)&&e.dispose(),Ba.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{je(),et(),B=xg.Listening,t.listen(ct)},"listen"),inspect:s(()=>{(0,ZPe.default)().console.log("inspect")},"inspect")};return rn.onNotification(GW.type,ve=>{if(_===Uo.Off||!P)return;let Ge=_===Uo.Verbose||_===Uo.Compact;P.log(ve.message,Ge?ve.verbose:void 0)}),rn.onNotification(p6.type,ve=>{let Ge=m.get(ve.token);Ge?Ge(ve.value):V.fire(ve)}),rn}s(Ewt,"createMessageConnection");ui.createMessageConnection=Ewt});var XW=q(At=>{"use strict";d();Object.defineProperty(At,"__esModule",{value:!0});At.ProgressType=At.ProgressToken=At.createMessageConnection=At.NullLogger=At.ConnectionOptions=At.ConnectionStrategy=At.AbstractMessageBuffer=At.WriteableStreamMessageWriter=At.AbstractMessageWriter=At.MessageWriter=At.ReadableStreamMessageReader=At.AbstractMessageReader=At.MessageReader=At.SharedArrayReceiverStrategy=At.SharedArraySenderStrategy=At.CancellationToken=At.CancellationTokenSource=At.Emitter=At.Event=At.Disposable=At.LRUCache=At.Touch=At.LinkedMap=At.ParameterStructures=At.NotificationType9=At.NotificationType8=At.NotificationType7=At.NotificationType6=At.NotificationType5=At.NotificationType4=At.NotificationType3=At.NotificationType2=At.NotificationType1=At.NotificationType0=At.NotificationType=At.ErrorCodes=At.ResponseError=At.RequestType9=At.RequestType8=At.RequestType7=At.RequestType6=At.RequestType5=At.RequestType4=At.RequestType3=At.RequestType2=At.RequestType1=At.RequestType0=At.RequestType=At.Message=At.RAL=void 0;At.MessageStrategy=At.CancellationStrategy=At.CancellationSenderStrategy=At.CancellationReceiverStrategy=At.ConnectionError=At.ConnectionErrors=At.LogTraceNotification=At.SetTraceNotification=At.TraceFormat=At.TraceValues=At.Trace=void 0;var Ss=oue();Object.defineProperty(At,"Message",{enumerable:!0,get:s(function(){return Ss.Message},"get")});Object.defineProperty(At,"RequestType",{enumerable:!0,get:s(function(){return Ss.RequestType},"get")});Object.defineProperty(At,"RequestType0",{enumerable:!0,get:s(function(){return Ss.RequestType0},"get")});Object.defineProperty(At,"RequestType1",{enumerable:!0,get:s(function(){return Ss.RequestType1},"get")});Object.defineProperty(At,"RequestType2",{enumerable:!0,get:s(function(){return Ss.RequestType2},"get")});Object.defineProperty(At,"RequestType3",{enumerable:!0,get:s(function(){return Ss.RequestType3},"get")});Object.defineProperty(At,"RequestType4",{enumerable:!0,get:s(function(){return Ss.RequestType4},"get")});Object.defineProperty(At,"RequestType5",{enumerable:!0,get:s(function(){return Ss.RequestType5},"get")});Object.defineProperty(At,"RequestType6",{enumerable:!0,get:s(function(){return Ss.RequestType6},"get")});Object.defineProperty(At,"RequestType7",{enumerable:!0,get:s(function(){return Ss.RequestType7},"get")});Object.defineProperty(At,"RequestType8",{enumerable:!0,get:s(function(){return Ss.RequestType8},"get")});Object.defineProperty(At,"RequestType9",{enumerable:!0,get:s(function(){return Ss.RequestType9},"get")});Object.defineProperty(At,"ResponseError",{enumerable:!0,get:s(function(){return Ss.ResponseError},"get")});Object.defineProperty(At,"ErrorCodes",{enumerable:!0,get:s(function(){return Ss.ErrorCodes},"get")});Object.defineProperty(At,"NotificationType",{enumerable:!0,get:s(function(){return Ss.NotificationType},"get")});Object.defineProperty(At,"NotificationType0",{enumerable:!0,get:s(function(){return Ss.NotificationType0},"get")});Object.defineProperty(At,"NotificationType1",{enumerable:!0,get:s(function(){return Ss.NotificationType1},"get")});Object.defineProperty(At,"NotificationType2",{enumerable:!0,get:s(function(){return Ss.NotificationType2},"get")});Object.defineProperty(At,"NotificationType3",{enumerable:!0,get:s(function(){return Ss.NotificationType3},"get")});Object.defineProperty(At,"NotificationType4",{enumerable:!0,get:s(function(){return Ss.NotificationType4},"get")});Object.defineProperty(At,"NotificationType5",{enumerable:!0,get:s(function(){return Ss.NotificationType5},"get")});Object.defineProperty(At,"NotificationType6",{enumerable:!0,get:s(function(){return Ss.NotificationType6},"get")});Object.defineProperty(At,"NotificationType7",{enumerable:!0,get:s(function(){return Ss.NotificationType7},"get")});Object.defineProperty(At,"NotificationType8",{enumerable:!0,get:s(function(){return Ss.NotificationType8},"get")});Object.defineProperty(At,"NotificationType9",{enumerable:!0,get:s(function(){return Ss.NotificationType9},"get")});Object.defineProperty(At,"ParameterStructures",{enumerable:!0,get:s(function(){return Ss.ParameterStructures},"get")});var Nue=aue();Object.defineProperty(At,"LinkedMap",{enumerable:!0,get:s(function(){return Nue.LinkedMap},"get")});Object.defineProperty(At,"LRUCache",{enumerable:!0,get:s(function(){return Nue.LRUCache},"get")});Object.defineProperty(At,"Touch",{enumerable:!0,get:s(function(){return Nue.Touch},"get")});var xwt=HPe();Object.defineProperty(At,"Disposable",{enumerable:!0,get:s(function(){return xwt.Disposable},"get")});var i3e=W4();Object.defineProperty(At,"Event",{enumerable:!0,get:s(function(){return i3e.Event},"get")});Object.defineProperty(At,"Emitter",{enumerable:!0,get:s(function(){return i3e.Emitter},"get")});var o3e=qW();Object.defineProperty(At,"CancellationTokenSource",{enumerable:!0,get:s(function(){return o3e.CancellationTokenSource},"get")});Object.defineProperty(At,"CancellationToken",{enumerable:!0,get:s(function(){return o3e.CancellationToken},"get")});var s3e=$Pe();Object.defineProperty(At,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return s3e.SharedArraySenderStrategy},"get")});Object.defineProperty(At,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return s3e.SharedArrayReceiverStrategy},"get")});var Lue=GPe();Object.defineProperty(At,"MessageReader",{enumerable:!0,get:s(function(){return Lue.MessageReader},"get")});Object.defineProperty(At,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Lue.AbstractMessageReader},"get")});Object.defineProperty(At,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Lue.ReadableStreamMessageReader},"get")});var Mue=JPe();Object.defineProperty(At,"MessageWriter",{enumerable:!0,get:s(function(){return Mue.MessageWriter},"get")});Object.defineProperty(At,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Mue.AbstractMessageWriter},"get")});Object.defineProperty(At,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Mue.WriteableStreamMessageWriter},"get")});var bwt=XPe();Object.defineProperty(At,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return bwt.AbstractMessageBuffer},"get")});var Cu=n3e();Object.defineProperty(At,"ConnectionStrategy",{enumerable:!0,get:s(function(){return Cu.ConnectionStrategy},"get")});Object.defineProperty(At,"ConnectionOptions",{enumerable:!0,get:s(function(){return Cu.ConnectionOptions},"get")});Object.defineProperty(At,"NullLogger",{enumerable:!0,get:s(function(){return Cu.NullLogger},"get")});Object.defineProperty(At,"createMessageConnection",{enumerable:!0,get:s(function(){return Cu.createMessageConnection},"get")});Object.defineProperty(At,"ProgressToken",{enumerable:!0,get:s(function(){return Cu.ProgressToken},"get")});Object.defineProperty(At,"ProgressType",{enumerable:!0,get:s(function(){return Cu.ProgressType},"get")});Object.defineProperty(At,"Trace",{enumerable:!0,get:s(function(){return Cu.Trace},"get")});Object.defineProperty(At,"TraceValues",{enumerable:!0,get:s(function(){return Cu.TraceValues},"get")});Object.defineProperty(At,"TraceFormat",{enumerable:!0,get:s(function(){return Cu.TraceFormat},"get")});Object.defineProperty(At,"SetTraceNotification",{enumerable:!0,get:s(function(){return Cu.SetTraceNotification},"get")});Object.defineProperty(At,"LogTraceNotification",{enumerable:!0,get:s(function(){return Cu.LogTraceNotification},"get")});Object.defineProperty(At,"ConnectionErrors",{enumerable:!0,get:s(function(){return Cu.ConnectionErrors},"get")});Object.defineProperty(At,"ConnectionError",{enumerable:!0,get:s(function(){return Cu.ConnectionError},"get")});Object.defineProperty(At,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return Cu.CancellationReceiverStrategy},"get")});Object.defineProperty(At,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return Cu.CancellationSenderStrategy},"get")});Object.defineProperty(At,"CancellationStrategy",{enumerable:!0,get:s(function(){return Cu.CancellationStrategy},"get")});Object.defineProperty(At,"MessageStrategy",{enumerable:!0,get:s(function(){return Cu.MessageStrategy},"get")});var Iwt=Mb();At.RAL=Iwt.default});var l3e=q(Uue=>{"use strict";d();Object.defineProperty(Uue,"__esModule",{value:!0});var a3e=require("util"),ov=XW(),ZW=class t extends ov.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new a3e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};ZW.emptyBuffer=Buffer.allocUnsafe(0);var Fue=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ov.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ov.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ov.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ov.Disposable.create(()=>this.stream.off("data",e))}},Oue=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ov.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ov.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ov.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},c3e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new ZW(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new a3e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Fue(t),"asReadableStream"),asWritableStream:s(t=>new Oue(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Que(){return c3e}s(Que,"RIL");(function(t){function e(){ov.RAL.install(c3e)}s(e,"install"),t.install=e})(Que||(Que={}));Uue.default=Que});var Y_=q(lo=>{"use strict";d();var Twt=lo&&lo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wwt=lo&&lo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Twt(e,t,r)};Object.defineProperty(lo,"__esModule",{value:!0});lo.createMessageConnection=lo.createServerSocketTransport=lo.createClientSocketTransport=lo.createServerPipeTransport=lo.createClientPipeTransport=lo.generateRandomPipeName=lo.StreamMessageWriter=lo.StreamMessageReader=lo.SocketMessageWriter=lo.SocketMessageReader=lo.PortMessageWriter=lo.PortMessageReader=lo.IPCMessageWriter=lo.IPCMessageReader=void 0;var z4=l3e();z4.default.install();var u3e=require("path"),_wt=require("os"),Swt=require("crypto"),r$=require("net"),V0=XW();wwt(XW(),lo);var que=class extends V0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),V0.Disposable.create(()=>this.process.off("message",e))}};lo.IPCMessageReader=que;var Hue=class extends V0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};lo.IPCMessageWriter=Hue;var Wue=class extends V0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new V0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};lo.PortMessageReader=Wue;var $ue=class extends V0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};lo.PortMessageWriter=$ue;var V_=class extends V0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,z4.default)().stream.asReadableStream(e),r)}};lo.SocketMessageReader=V_;var z_=class extends V0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,z4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};lo.SocketMessageWriter=z_;var e$=class extends V0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,z4.default)().stream.asReadableStream(e),r)}};lo.StreamMessageReader=e$;var t$=class extends V0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,z4.default)().stream.asWritableStream(e),r)}};lo.StreamMessageWriter=t$;var d3e=process.env.XDG_RUNTIME_DIR,Rwt=new Map([["linux",107],["darwin",103]]);function kwt(){let t=(0,Swt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;d3e?e=u3e.join(d3e,`vscode-ipc-${t}.sock`):e=u3e.join(_wt.tmpdir(),`vscode-${t}.sock`);let r=Rwt.get(process.platform);return r!==void 0&&e.length>r&&(0,z4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(kwt,"generateRandomPipeName");lo.generateRandomPipeName=kwt;function Pwt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,r$.createServer)(c=>{a.close(),r([new V_(c,e),new z_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Pwt,"createClientPipeTransport");lo.createClientPipeTransport=Pwt;function Dwt(t,e="utf-8"){let r=(0,r$.createConnection)(t);return[new V_(r,e),new z_(r,e)]}s(Dwt,"createServerPipeTransport");lo.createServerPipeTransport=Dwt;function Bwt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,r$.createServer)(c=>{a.close(),r([new V_(c,e),new z_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Bwt,"createClientSocketTransport");lo.createClientSocketTransport=Bwt;function Nwt(t,e="utf-8"){let r=(0,r$.createConnection)(t,"127.0.0.1");return[new V_(r,e),new z_(r,e)]}s(Nwt,"createServerSocketTransport");lo.createServerSocketTransport=Nwt;function Lwt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Lwt,"isReadableStream");function Mwt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Mwt,"isWritableStream");function Fwt(t,e,r,n){r||(r=V0.NullLogger);let i=Lwt(t)?new e$(t):t,o=Mwt(e)?new t$(e):e;return V0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,V0.createMessageConnection)(i,o,r,n)}s(Fwt,"createMessageConnection");lo.createMessageConnection=Fwt});var jue=q((UMr,f3e)=>{"use strict";d();f3e.exports=Y_()});var i$=q((p3e,n$)=>{d();(function(t){if(typeof n$=="object"&&typeof n$.exports=="object"){var e=t(require,p3e);e!==void 0&&(n$.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(z){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),z.is=Ce})(r||(e.DocumentUri=r={}));var n;(function(z){function Ce(Ie){return typeof Ie=="string"}s(Ce,"is"),z.is=Ce})(n||(e.URI=n={}));var i;(function(z){z.MIN_VALUE=-2147483648,z.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&z.MIN_VALUE<=Ie&&Ie<=z.MAX_VALUE}s(Ce,"is"),z.is=Ce})(i||(e.integer=i={}));var o;(function(z){z.MIN_VALUE=0,z.MAX_VALUE=2147483647;function Ce(Ie){return typeof Ie=="number"&&z.MIN_VALUE<=Ie&&Ie<=z.MAX_VALUE}s(Ce,"is"),z.is=Ce})(o||(e.uinteger=o={}));var a;(function(z){function Ce(M,D){return M===Number.MAX_VALUE&&(M=o.MAX_VALUE),D===Number.MAX_VALUE&&(D=o.MAX_VALUE),{line:M,character:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&Pe.uinteger(D.line)&&Pe.uinteger(D.character)}s(Ie,"is"),z.is=Ie})(a||(e.Position=a={}));var c;(function(z){function Ce(M,D,Z,ge){if(Pe.uinteger(M)&&Pe.uinteger(D)&&Pe.uinteger(Z)&&Pe.uinteger(ge))return{start:a.create(M,D),end:a.create(Z,ge)};if(a.is(M)&&a.is(D))return{start:M,end:D};throw new Error("Range#create called with invalid arguments[".concat(M,", ").concat(D,", ").concat(Z,", ").concat(ge,"]"))}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&a.is(D.start)&&a.is(D.end)}s(Ie,"is"),z.is=Ie})(c||(e.Range=c={}));var l;(function(z){function Ce(M,D){return{uri:M,range:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&c.is(D.range)&&(Pe.string(D.uri)||Pe.undefined(D.uri))}s(Ie,"is"),z.is=Ie})(l||(e.Location=l={}));var u;(function(z){function Ce(M,D,Z,ge){return{targetUri:M,targetRange:D,targetSelectionRange:Z,originSelectionRange:ge}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&c.is(D.targetRange)&&Pe.string(D.targetUri)&&c.is(D.targetSelectionRange)&&(c.is(D.originSelectionRange)||Pe.undefined(D.originSelectionRange))}s(Ie,"is"),z.is=Ie})(u||(e.LocationLink=u={}));var f;(function(z){function Ce(M,D,Z,ge){return{red:M,green:D,blue:Z,alpha:ge}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&Pe.numberRange(D.red,0,1)&&Pe.numberRange(D.green,0,1)&&Pe.numberRange(D.blue,0,1)&&Pe.numberRange(D.alpha,0,1)}s(Ie,"is"),z.is=Ie})(f||(e.Color=f={}));var p;(function(z){function Ce(M,D){return{range:M,color:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&c.is(D.range)&&f.is(D.color)}s(Ie,"is"),z.is=Ie})(p||(e.ColorInformation=p={}));var h;(function(z){function Ce(M,D,Z){return{label:M,textEdit:D,additionalTextEdits:Z}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.undefined(D.textEdit)||P.is(D))&&(Pe.undefined(D.additionalTextEdits)||Pe.typedArray(D.additionalTextEdits,P.is))}s(Ie,"is"),z.is=Ie})(h||(e.ColorPresentation=h={}));var m;(function(z){z.Comment="comment",z.Imports="imports",z.Region="region"})(m||(e.FoldingRangeKind=m={}));var g;(function(z){function Ce(M,D,Z,ge,Se,lt){var wt={startLine:M,endLine:D};return Pe.defined(Z)&&(wt.startCharacter=Z),Pe.defined(ge)&&(wt.endCharacter=ge),Pe.defined(Se)&&(wt.kind=Se),Pe.defined(lt)&&(wt.collapsedText=lt),wt}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&Pe.uinteger(D.startLine)&&Pe.uinteger(D.startLine)&&(Pe.undefined(D.startCharacter)||Pe.uinteger(D.startCharacter))&&(Pe.undefined(D.endCharacter)||Pe.uinteger(D.endCharacter))&&(Pe.undefined(D.kind)||Pe.string(D.kind))}s(Ie,"is"),z.is=Ie})(g||(e.FoldingRange=g={}));var A;(function(z){function Ce(M,D){return{location:M,message:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&l.is(D.location)&&Pe.string(D.message)}s(Ie,"is"),z.is=Ie})(A||(e.DiagnosticRelatedInformation=A={}));var y;(function(z){z.Error=1,z.Warning=2,z.Information=3,z.Hint=4})(y||(e.DiagnosticSeverity=y={}));var E;(function(z){z.Unnecessary=1,z.Deprecated=2})(E||(e.DiagnosticTag=E={}));var b;(function(z){function Ce(Ie){var M=Ie;return Pe.objectLiteral(M)&&Pe.string(M.href)}s(Ce,"is"),z.is=Ce})(b||(e.CodeDescription=b={}));var _;(function(z){function Ce(M,D,Z,ge,Se,lt){var wt={range:M,message:D};return Pe.defined(Z)&&(wt.severity=Z),Pe.defined(ge)&&(wt.code=ge),Pe.defined(Se)&&(wt.source=Se),Pe.defined(lt)&&(wt.relatedInformation=lt),wt}s(Ce,"create"),z.create=Ce;function Ie(M){var D,Z=M;return Pe.defined(Z)&&c.is(Z.range)&&Pe.string(Z.message)&&(Pe.number(Z.severity)||Pe.undefined(Z.severity))&&(Pe.integer(Z.code)||Pe.string(Z.code)||Pe.undefined(Z.code))&&(Pe.undefined(Z.codeDescription)||Pe.string((D=Z.codeDescription)===null||D===void 0?void 0:D.href))&&(Pe.string(Z.source)||Pe.undefined(Z.source))&&(Pe.undefined(Z.relatedInformation)||Pe.typedArray(Z.relatedInformation,A.is))}s(Ie,"is"),z.is=Ie})(_||(e.Diagnostic=_={}));var S;(function(z){function Ce(M,D){for(var Z=[],ge=2;ge<arguments.length;ge++)Z[ge-2]=arguments[ge];var Se={title:M,command:D};return Pe.defined(Z)&&Z.length>0&&(Se.arguments=Z),Se}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.string(D.title)&&Pe.string(D.command)}s(Ie,"is"),z.is=Ie})(S||(e.Command=S={}));var P;(function(z){function Ce(Z,ge){return{range:Z,newText:ge}}s(Ce,"replace"),z.replace=Ce;function Ie(Z,ge){return{range:{start:Z,end:Z},newText:ge}}s(Ie,"insert"),z.insert=Ie;function M(Z){return{range:Z,newText:""}}s(M,"del"),z.del=M;function D(Z){var ge=Z;return Pe.objectLiteral(ge)&&Pe.string(ge.newText)&&c.is(ge.range)}s(D,"is"),z.is=D})(P||(e.TextEdit=P={}));var B;(function(z){function Ce(M,D,Z){var ge={label:M};return D!==void 0&&(ge.needsConfirmation=D),Z!==void 0&&(ge.description=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&Pe.string(D.label)&&(Pe.boolean(D.needsConfirmation)||D.needsConfirmation===void 0)&&(Pe.string(D.description)||D.description===void 0)}s(Ie,"is"),z.is=Ie})(B||(e.ChangeAnnotation=B={}));var F;(function(z){function Ce(Ie){var M=Ie;return Pe.string(M)}s(Ce,"is"),z.is=Ce})(F||(e.ChangeAnnotationIdentifier=F={}));var Y;(function(z){function Ce(Z,ge,Se){return{range:Z,newText:ge,annotationId:Se}}s(Ce,"replace"),z.replace=Ce;function Ie(Z,ge,Se){return{range:{start:Z,end:Z},newText:ge,annotationId:Se}}s(Ie,"insert"),z.insert=Ie;function M(Z,ge){return{range:Z,newText:"",annotationId:ge}}s(M,"del"),z.del=M;function D(Z){var ge=Z;return P.is(ge)&&(B.is(ge.annotationId)||F.is(ge.annotationId))}s(D,"is"),z.is=D})(Y||(e.AnnotatedTextEdit=Y={}));var ee;(function(z){function Ce(M,D){return{textDocument:M,edits:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&ae.is(D.textDocument)&&Array.isArray(D.edits)}s(Ie,"is"),z.is=Ie})(ee||(e.TextDocumentEdit=ee={}));var V;(function(z){function Ce(M,D,Z){var ge={kind:"create",uri:M};return D!==void 0&&(D.overwrite!==void 0||D.ignoreIfExists!==void 0)&&(ge.options=D),Z!==void 0&&(ge.annotationId=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&D.kind==="create"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||F.is(D.annotationId))}s(Ie,"is"),z.is=Ie})(V||(e.CreateFile=V={}));var H;(function(z){function Ce(M,D,Z,ge){var Se={kind:"rename",oldUri:M,newUri:D};return Z!==void 0&&(Z.overwrite!==void 0||Z.ignoreIfExists!==void 0)&&(Se.options=Z),ge!==void 0&&(Se.annotationId=ge),Se}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&D.kind==="rename"&&Pe.string(D.oldUri)&&Pe.string(D.newUri)&&(D.options===void 0||(D.options.overwrite===void 0||Pe.boolean(D.options.overwrite))&&(D.options.ignoreIfExists===void 0||Pe.boolean(D.options.ignoreIfExists)))&&(D.annotationId===void 0||F.is(D.annotationId))}s(Ie,"is"),z.is=Ie})(H||(e.RenameFile=H={}));var U;(function(z){function Ce(M,D,Z){var ge={kind:"delete",uri:M};return D!==void 0&&(D.recursive!==void 0||D.ignoreIfNotExists!==void 0)&&(ge.options=D),Z!==void 0&&(ge.annotationId=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&D.kind==="delete"&&Pe.string(D.uri)&&(D.options===void 0||(D.options.recursive===void 0||Pe.boolean(D.options.recursive))&&(D.options.ignoreIfNotExists===void 0||Pe.boolean(D.options.ignoreIfNotExists)))&&(D.annotationId===void 0||F.is(D.annotationId))}s(Ie,"is"),z.is=Ie})(U||(e.DeleteFile=U={}));var X;(function(z){function Ce(Ie){var M=Ie;return M&&(M.changes!==void 0||M.documentChanges!==void 0)&&(M.documentChanges===void 0||M.documentChanges.every(function(D){return Pe.string(D.kind)?V.is(D)||H.is(D)||U.is(D):ee.is(D)}))}s(Ce,"is"),z.is=Ce})(X||(e.WorkspaceEdit=X={}));var K=function(){function z(Ce,Ie){this.edits=Ce,this.changeAnnotations=Ie}return s(z,"TextEditChangeImpl"),z.prototype.insert=function(Ce,Ie,M){var D,Z;if(M===void 0?D=P.insert(Ce,Ie):F.is(M)?(Z=M,D=Y.insert(Ce,Ie,M)):(this.assertChangeAnnotations(this.changeAnnotations),Z=this.changeAnnotations.manage(M),D=Y.insert(Ce,Ie,Z)),this.edits.push(D),Z!==void 0)return Z},z.prototype.replace=function(Ce,Ie,M){var D,Z;if(M===void 0?D=P.replace(Ce,Ie):F.is(M)?(Z=M,D=Y.replace(Ce,Ie,M)):(this.assertChangeAnnotations(this.changeAnnotations),Z=this.changeAnnotations.manage(M),D=Y.replace(Ce,Ie,Z)),this.edits.push(D),Z!==void 0)return Z},z.prototype.delete=function(Ce,Ie){var M,D;if(Ie===void 0?M=P.del(Ce):F.is(Ie)?(D=Ie,M=Y.del(Ce,Ie)):(this.assertChangeAnnotations(this.changeAnnotations),D=this.changeAnnotations.manage(Ie),M=Y.del(Ce,D)),this.edits.push(M),D!==void 0)return D},z.prototype.add=function(Ce){this.edits.push(Ce)},z.prototype.all=function(){return this.edits},z.prototype.clear=function(){this.edits.splice(0,this.edits.length)},z.prototype.assertChangeAnnotations=function(Ce){if(Ce===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},z}(),j=function(){function z(Ce){this._annotations=Ce===void 0?Object.create(null):Ce,this._counter=0,this._size=0}return s(z,"ChangeAnnotations"),z.prototype.all=function(){return this._annotations},Object.defineProperty(z.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),z.prototype.manage=function(Ce,Ie){var M;if(F.is(Ce)?M=Ce:(M=this.nextId(),Ie=Ce),this._annotations[M]!==void 0)throw new Error("Id ".concat(M," is already in use."));if(Ie===void 0)throw new Error("No annotation provided for id ".concat(M));return this._annotations[M]=Ie,this._size++,M},z.prototype.nextId=function(){return this._counter++,this._counter.toString()},z}(),W=function(){function z(Ce){var Ie=this;this._textEditChanges=Object.create(null),Ce!==void 0?(this._workspaceEdit=Ce,Ce.documentChanges?(this._changeAnnotations=new j(Ce.changeAnnotations),Ce.changeAnnotations=this._changeAnnotations.all(),Ce.documentChanges.forEach(function(M){if(ee.is(M)){var D=new K(M.edits,Ie._changeAnnotations);Ie._textEditChanges[M.textDocument.uri]=D}})):Ce.changes&&Object.keys(Ce.changes).forEach(function(M){var D=new K(Ce.changes[M]);Ie._textEditChanges[M]=D})):this._workspaceEdit={}}return s(z,"WorkspaceChange"),Object.defineProperty(z.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),z.prototype.getTextEditChange=function(Ce){if(ae.is(Ce)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Ie={uri:Ce.uri,version:Ce.version},M=this._textEditChanges[Ie.uri];if(!M){var D=[],Z={textDocument:Ie,edits:D};this._workspaceEdit.documentChanges.push(Z),M=new K(D,this._changeAnnotations),this._textEditChanges[Ie.uri]=M}return M}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var M=this._textEditChanges[Ce];if(!M){var D=[];this._workspaceEdit.changes[Ce]=D,M=new K(D),this._textEditChanges[Ce]=M}return M}},z.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},z.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},z.prototype.createFile=function(Ce,Ie,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;B.is(Ie)||F.is(Ie)?D=Ie:M=Ie;var Z,ge;if(D===void 0?Z=V.create(Ce,M):(ge=F.is(D)?D:this._changeAnnotations.manage(D),Z=V.create(Ce,M,ge)),this._workspaceEdit.documentChanges.push(Z),ge!==void 0)return ge},z.prototype.renameFile=function(Ce,Ie,M,D){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Z;B.is(M)||F.is(M)?Z=M:D=M;var ge,Se;if(Z===void 0?ge=H.create(Ce,Ie,D):(Se=F.is(Z)?Z:this._changeAnnotations.manage(Z),ge=H.create(Ce,Ie,D,Se)),this._workspaceEdit.documentChanges.push(ge),Se!==void 0)return Se},z.prototype.deleteFile=function(Ce,Ie,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var D;B.is(Ie)||F.is(Ie)?D=Ie:M=Ie;var Z,ge;if(D===void 0?Z=U.create(Ce,M):(ge=F.is(D)?D:this._changeAnnotations.manage(D),Z=U.create(Ce,M,ge)),this._workspaceEdit.documentChanges.push(Z),ge!==void 0)return ge},z}();e.WorkspaceChange=W;var J;(function(z){function Ce(M){return{uri:M}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.string(D.uri)}s(Ie,"is"),z.is=Ie})(J||(e.TextDocumentIdentifier=J={}));var ie;(function(z){function Ce(M,D){return{uri:M,version:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.integer(D.version)}s(Ie,"is"),z.is=Ie})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var ae;(function(z){function Ce(M,D){return{uri:M,version:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.string(D.uri)&&(D.version===null||Pe.integer(D.version))}s(Ie,"is"),z.is=Ie})(ae||(e.OptionalVersionedTextDocumentIdentifier=ae={}));var te;(function(z){function Ce(M,D,Z,ge){return{uri:M,languageId:D,version:Z,text:ge}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.string(D.uri)&&Pe.string(D.languageId)&&Pe.integer(D.version)&&Pe.string(D.text)}s(Ie,"is"),z.is=Ie})(te||(e.TextDocumentItem=te={}));var pe;(function(z){z.PlainText="plaintext",z.Markdown="markdown";function Ce(Ie){var M=Ie;return M===z.PlainText||M===z.Markdown}s(Ce,"is"),z.is=Ce})(pe||(e.MarkupKind=pe={}));var Ae;(function(z){function Ce(Ie){var M=Ie;return Pe.objectLiteral(Ie)&&pe.is(M.kind)&&Pe.string(M.value)}s(Ce,"is"),z.is=Ce})(Ae||(e.MarkupContent=Ae={}));var Oe;(function(z){z.Text=1,z.Method=2,z.Function=3,z.Constructor=4,z.Field=5,z.Variable=6,z.Class=7,z.Interface=8,z.Module=9,z.Property=10,z.Unit=11,z.Value=12,z.Enum=13,z.Keyword=14,z.Snippet=15,z.Color=16,z.File=17,z.Reference=18,z.Folder=19,z.EnumMember=20,z.Constant=21,z.Struct=22,z.Event=23,z.Operator=24,z.TypeParameter=25})(Oe||(e.CompletionItemKind=Oe={}));var Te;(function(z){z.PlainText=1,z.Snippet=2})(Te||(e.InsertTextFormat=Te={}));var Je;(function(z){z.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Fe;(function(z){function Ce(M,D,Z){return{newText:M,insert:D,replace:Z}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&Pe.string(D.newText)&&c.is(D.insert)&&c.is(D.replace)}s(Ie,"is"),z.is=Ie})(Fe||(e.InsertReplaceEdit=Fe={}));var ct;(function(z){z.asIs=1,z.adjustIndentation=2})(ct||(e.InsertTextMode=ct={}));var St;(function(z){function Ce(Ie){var M=Ie;return M&&(Pe.string(M.detail)||M.detail===void 0)&&(Pe.string(M.description)||M.description===void 0)}s(Ce,"is"),z.is=Ce})(St||(e.CompletionItemLabelDetails=St={}));var vt;(function(z){function Ce(Ie){return{label:Ie}}s(Ce,"create"),z.create=Ce})(vt||(e.CompletionItem=vt={}));var mt;(function(z){function Ce(Ie,M){return{items:Ie||[],isIncomplete:!!M}}s(Ce,"create"),z.create=Ce})(mt||(e.CompletionList=mt={}));var ue;(function(z){function Ce(M){return M.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(Ce,"fromPlainText"),z.fromPlainText=Ce;function Ie(M){var D=M;return Pe.string(D)||Pe.objectLiteral(D)&&Pe.string(D.language)&&Pe.string(D.value)}s(Ie,"is"),z.is=Ie})(ue||(e.MarkedString=ue={}));var Ue;(function(z){function Ce(Ie){var M=Ie;return!!M&&Pe.objectLiteral(M)&&(Ae.is(M.contents)||ue.is(M.contents)||Pe.typedArray(M.contents,ue.is))&&(Ie.range===void 0||c.is(Ie.range))}s(Ce,"is"),z.is=Ce})(Ue||(e.Hover=Ue={}));var ye;(function(z){function Ce(Ie,M){return M?{label:Ie,documentation:M}:{label:Ie}}s(Ce,"create"),z.create=Ce})(ye||(e.ParameterInformation=ye={}));var We;(function(z){function Ce(Ie,M){for(var D=[],Z=2;Z<arguments.length;Z++)D[Z-2]=arguments[Z];var ge={label:Ie};return Pe.defined(M)&&(ge.documentation=M),Pe.defined(D)?ge.parameters=D:ge.parameters=[],ge}s(Ce,"create"),z.create=Ce})(We||(e.SignatureInformation=We={}));var se;(function(z){z.Text=1,z.Read=2,z.Write=3})(se||(e.DocumentHighlightKind=se={}));var le;(function(z){function Ce(Ie,M){var D={range:Ie};return Pe.number(M)&&(D.kind=M),D}s(Ce,"create"),z.create=Ce})(le||(e.DocumentHighlight=le={}));var qe;(function(z){z.File=1,z.Module=2,z.Namespace=3,z.Package=4,z.Class=5,z.Method=6,z.Property=7,z.Field=8,z.Constructor=9,z.Enum=10,z.Interface=11,z.Function=12,z.Variable=13,z.Constant=14,z.String=15,z.Number=16,z.Boolean=17,z.Array=18,z.Object=19,z.Key=20,z.Null=21,z.EnumMember=22,z.Struct=23,z.Event=24,z.Operator=25,z.TypeParameter=26})(qe||(e.SymbolKind=qe={}));var Be;(function(z){z.Deprecated=1})(Be||(e.SymbolTag=Be={}));var xe;(function(z){function Ce(Ie,M,D,Z,ge){var Se={name:Ie,kind:M,location:{uri:Z,range:D}};return ge&&(Se.containerName=ge),Se}s(Ce,"create"),z.create=Ce})(xe||(e.SymbolInformation=xe={}));var je;(function(z){function Ce(Ie,M,D,Z){return Z!==void 0?{name:Ie,kind:M,location:{uri:D,range:Z}}:{name:Ie,kind:M,location:{uri:D}}}s(Ce,"create"),z.create=Ce})(je||(e.WorkspaceSymbol=je={}));var et;(function(z){function Ce(M,D,Z,ge,Se,lt){var wt={name:M,detail:D,kind:Z,range:ge,selectionRange:Se};return lt!==void 0&&(wt.children=lt),wt}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&Pe.string(D.name)&&Pe.number(D.kind)&&c.is(D.range)&&c.is(D.selectionRange)&&(D.detail===void 0||Pe.string(D.detail))&&(D.deprecated===void 0||Pe.boolean(D.deprecated))&&(D.children===void 0||Array.isArray(D.children))&&(D.tags===void 0||Array.isArray(D.tags))}s(Ie,"is"),z.is=Ie})(et||(e.DocumentSymbol=et={}));var pt;(function(z){z.Empty="",z.QuickFix="quickfix",z.Refactor="refactor",z.RefactorExtract="refactor.extract",z.RefactorInline="refactor.inline",z.RefactorRewrite="refactor.rewrite",z.Source="source",z.SourceOrganizeImports="source.organizeImports",z.SourceFixAll="source.fixAll"})(pt||(e.CodeActionKind=pt={}));var Lt;(function(z){z.Invoked=1,z.Automatic=2})(Lt||(e.CodeActionTriggerKind=Lt={}));var Kt;(function(z){function Ce(M,D,Z){var ge={diagnostics:M};return D!=null&&(ge.only=D),Z!=null&&(ge.triggerKind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.typedArray(D.diagnostics,_.is)&&(D.only===void 0||Pe.typedArray(D.only,Pe.string))&&(D.triggerKind===void 0||D.triggerKind===Lt.Invoked||D.triggerKind===Lt.Automatic)}s(Ie,"is"),z.is=Ie})(Kt||(e.CodeActionContext=Kt={}));var Ft;(function(z){function Ce(M,D,Z){var ge={title:M},Se=!0;return typeof D=="string"?(Se=!1,ge.kind=D):S.is(D)?ge.command=D:ge.edit=D,Se&&Z!==void 0&&(ge.kind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D&&Pe.string(D.title)&&(D.diagnostics===void 0||Pe.typedArray(D.diagnostics,_.is))&&(D.kind===void 0||Pe.string(D.kind))&&(D.edit!==void 0||D.command!==void 0)&&(D.command===void 0||S.is(D.command))&&(D.isPreferred===void 0||Pe.boolean(D.isPreferred))&&(D.edit===void 0||X.is(D.edit))}s(Ie,"is"),z.is=Ie})(Ft||(e.CodeAction=Ft={}));var Qr;(function(z){function Ce(M,D){var Z={range:M};return Pe.defined(D)&&(Z.data=D),Z}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.command)||S.is(D.command))}s(Ie,"is"),z.is=Ie})(Qr||(e.CodeLens=Qr={}));var Sr;(function(z){function Ce(M,D){return{tabSize:M,insertSpaces:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&Pe.uinteger(D.tabSize)&&Pe.boolean(D.insertSpaces)}s(Ie,"is"),z.is=Ie})(Sr||(e.FormattingOptions=Sr={}));var rn;(function(z){function Ce(M,D,Z){return{range:M,target:D,data:Z}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&c.is(D.range)&&(Pe.undefined(D.target)||Pe.string(D.target))}s(Ie,"is"),z.is=Ie})(rn||(e.DocumentLink=rn={}));var ve;(function(z){function Ce(M,D){return{range:M,parent:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&c.is(D.range)&&(D.parent===void 0||z.is(D.parent))}s(Ie,"is"),z.is=Ie})(ve||(e.SelectionRange=ve={}));var Ge;(function(z){z.namespace="namespace",z.type="type",z.class="class",z.enum="enum",z.interface="interface",z.struct="struct",z.typeParameter="typeParameter",z.parameter="parameter",z.variable="variable",z.property="property",z.enumMember="enumMember",z.event="event",z.function="function",z.method="method",z.macro="macro",z.keyword="keyword",z.modifier="modifier",z.comment="comment",z.string="string",z.number="number",z.regexp="regexp",z.operator="operator",z.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(z){z.declaration="declaration",z.definition="definition",z.readonly="readonly",z.static="static",z.deprecated="deprecated",z.abstract="abstract",z.async="async",z.modification="modification",z.documentation="documentation",z.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var It;(function(z){function Ce(Ie){var M=Ie;return Pe.objectLiteral(M)&&(M.resultId===void 0||typeof M.resultId=="string")&&Array.isArray(M.data)&&(M.data.length===0||typeof M.data[0]=="number")}s(Ce,"is"),z.is=Ce})(It||(e.SemanticTokens=It={}));var rr;(function(z){function Ce(M,D){return{range:M,text:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D!=null&&c.is(D.range)&&Pe.string(D.text)}s(Ie,"is"),z.is=Ie})(rr||(e.InlineValueText=rr={}));var Xt;(function(z){function Ce(M,D,Z){return{range:M,variableName:D,caseSensitiveLookup:Z}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D!=null&&c.is(D.range)&&Pe.boolean(D.caseSensitiveLookup)&&(Pe.string(D.variableName)||D.variableName===void 0)}s(Ie,"is"),z.is=Ie})(Xt||(e.InlineValueVariableLookup=Xt={}));var xr;(function(z){function Ce(M,D){return{range:M,expression:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return D!=null&&c.is(D.range)&&(Pe.string(D.expression)||D.expression===void 0)}s(Ie,"is"),z.is=Ie})(xr||(e.InlineValueEvaluatableExpression=xr={}));var ar;(function(z){function Ce(M,D){return{frameId:M,stoppedLocation:D}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.defined(D)&&c.is(M.stoppedLocation)}s(Ie,"is"),z.is=Ie})(ar||(e.InlineValueContext=ar={}));var er;(function(z){z.Type=1,z.Parameter=2;function Ce(Ie){return Ie===1||Ie===2}s(Ce,"is"),z.is=Ce})(er||(e.InlayHintKind=er={}));var sr;(function(z){function Ce(M){return{value:M}}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.location===void 0||l.is(D.location))&&(D.command===void 0||S.is(D.command))}s(Ie,"is"),z.is=Ie})(sr||(e.InlayHintLabelPart=sr={}));var tr;(function(z){function Ce(M,D,Z){var ge={position:M,label:D};return Z!==void 0&&(ge.kind=Z),ge}s(Ce,"create"),z.create=Ce;function Ie(M){var D=M;return Pe.objectLiteral(D)&&a.is(D.position)&&(Pe.string(D.label)||Pe.typedArray(D.label,sr.is))&&(D.kind===void 0||er.is(D.kind))&&D.textEdits===void 0||Pe.typedArray(D.textEdits,P.is)&&(D.tooltip===void 0||Pe.string(D.tooltip)||Ae.is(D.tooltip))&&(D.paddingLeft===void 0||Pe.boolean(D.paddingLeft))&&(D.paddingRight===void 0||Pe.boolean(D.paddingRight))}s(Ie,"is"),z.is=Ie})(tr||(e.InlayHint=tr={}));var kr;(function(z){function Ce(Ie){return{kind:"snippet",value:Ie}}s(Ce,"createSnippet"),z.createSnippet=Ce})(kr||(e.StringValue=kr={}));var Ur;(function(z){function Ce(Ie,M,D,Z){return{insertText:Ie,filterText:M,range:D,command:Z}}s(Ce,"create"),z.create=Ce})(Ur||(e.InlineCompletionItem=Ur={}));var Jr;(function(z){function Ce(Ie){return{items:Ie}}s(Ce,"create"),z.create=Ce})(Jr||(e.InlineCompletionList=Jr={}));var hn;(function(z){z.Invoked=0,z.Automatic=1})(hn||(e.InlineCompletionTriggerKind=hn={}));var Zn;(function(z){function Ce(Ie,M){return{range:Ie,text:M}}s(Ce,"create"),z.create=Ce})(Zn||(e.SelectedCompletionInfo=Zn={}));var bn;(function(z){function Ce(Ie,M){return{triggerKind:Ie,selectedCompletionInfo:M}}s(Ce,"create"),z.create=Ce})(bn||(e.InlineCompletionContext=bn={}));var Jn;(function(z){function Ce(Ie){var M=Ie;return Pe.objectLiteral(M)&&n.is(M.uri)&&Pe.string(M.name)}s(Ce,"is"),z.is=Ce})(Jn||(e.WorkspaceFolder=Jn={})),e.EOL=[`
`,`\r
`,"\r"];var Xr;(function(z){function Ce(Z,ge,Se,lt){return new Gn(Z,ge,Se,lt)}s(Ce,"create"),z.create=Ce;function Ie(Z){var ge=Z;return!!(Pe.defined(ge)&&Pe.string(ge.uri)&&(Pe.undefined(ge.languageId)||Pe.string(ge.languageId))&&Pe.uinteger(ge.lineCount)&&Pe.func(ge.getText)&&Pe.func(ge.positionAt)&&Pe.func(ge.offsetAt))}s(Ie,"is"),z.is=Ie;function M(Z,ge){for(var Se=Z.getText(),lt=D(ge,function(mr,si){var Vi=mr.range.start.line-si.range.start.line;return Vi===0?mr.range.start.character-si.range.start.character:Vi}),wt=Se.length,zt=lt.length-1;zt>=0;zt--){var Zt=lt[zt],Yt=Z.offsetAt(Zt.range.start),xt=Z.offsetAt(Zt.range.end);if(xt<=wt)Se=Se.substring(0,Yt)+Zt.newText+Se.substring(xt,Se.length);else throw new Error("Overlapping edit");wt=Yt}return Se}s(M,"applyEdits"),z.applyEdits=M;function D(Z,ge){if(Z.length<=1)return Z;var Se=Z.length/2|0,lt=Z.slice(0,Se),wt=Z.slice(Se);D(lt,ge),D(wt,ge);for(var zt=0,Zt=0,Yt=0;zt<lt.length&&Zt<wt.length;){var xt=ge(lt[zt],wt[Zt]);xt<=0?Z[Yt++]=lt[zt++]:Z[Yt++]=wt[Zt++]}for(;zt<lt.length;)Z[Yt++]=lt[zt++];for(;Zt<wt.length;)Z[Yt++]=wt[Zt++];return Z}s(D,"mergeSort")})(Xr||(e.TextDocument=Xr={}));var Gn=function(){function z(Ce,Ie,M,D){this._uri=Ce,this._languageId=Ie,this._version=M,this._content=D,this._lineOffsets=void 0}return s(z,"FullTextDocument"),Object.defineProperty(z.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),z.prototype.getText=function(Ce){if(Ce){var Ie=this.offsetAt(Ce.start),M=this.offsetAt(Ce.end);return this._content.substring(Ie,M)}return this._content},z.prototype.update=function(Ce,Ie){this._content=Ce.text,this._version=Ie,this._lineOffsets=void 0},z.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var Ce=[],Ie=this._content,M=!0,D=0;D<Ie.length;D++){M&&(Ce.push(D),M=!1);var Z=Ie.charAt(D);M=Z==="\r"||Z===`
`,Z==="\r"&&D+1<Ie.length&&Ie.charAt(D+1)===`
`&&D++}M&&Ie.length>0&&Ce.push(Ie.length),this._lineOffsets=Ce}return this._lineOffsets},z.prototype.positionAt=function(Ce){Ce=Math.max(Math.min(Ce,this._content.length),0);var Ie=this.getLineOffsets(),M=0,D=Ie.length;if(D===0)return a.create(0,Ce);for(;M<D;){var Z=Math.floor((M+D)/2);Ie[Z]>Ce?D=Z:M=Z+1}var ge=M-1;return a.create(ge,Ce-Ie[ge])},z.prototype.offsetAt=function(Ce){var Ie=this.getLineOffsets();if(Ce.line>=Ie.length)return this._content.length;if(Ce.line<0)return 0;var M=Ie[Ce.line],D=Ce.line+1<Ie.length?Ie[Ce.line+1]:this._content.length;return Math.max(Math.min(M+Ce.character,D),M)},Object.defineProperty(z.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),z}(),Pe;(function(z){var Ce=Object.prototype.toString;function Ie(xt){return typeof xt<"u"}s(Ie,"defined"),z.defined=Ie;function M(xt){return typeof xt>"u"}s(M,"undefined"),z.undefined=M;function D(xt){return xt===!0||xt===!1}s(D,"boolean"),z.boolean=D;function Z(xt){return Ce.call(xt)==="[object String]"}s(Z,"string"),z.string=Z;function ge(xt){return Ce.call(xt)==="[object Number]"}s(ge,"number"),z.number=ge;function Se(xt,mr,si){return Ce.call(xt)==="[object Number]"&&mr<=xt&&xt<=si}s(Se,"numberRange"),z.numberRange=Se;function lt(xt){return Ce.call(xt)==="[object Number]"&&-2147483648<=xt&&xt<=2147483647}s(lt,"integer"),z.integer=lt;function wt(xt){return Ce.call(xt)==="[object Number]"&&0<=xt&&xt<=2147483647}s(wt,"uinteger"),z.uinteger=wt;function zt(xt){return Ce.call(xt)==="[object Function]"}s(zt,"func"),z.func=zt;function Zt(xt){return xt!==null&&typeof xt=="object"}s(Zt,"objectLiteral"),z.objectLiteral=Zt;function Yt(xt,mr){return Array.isArray(xt)&&xt.every(mr)}s(Yt,"typedArray"),z.typedArray=Yt})(Pe||(Pe={}))})});var ya=q(Lf=>{"use strict";d();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.ProtocolNotificationType=Lf.ProtocolNotificationType0=Lf.ProtocolRequestType=Lf.ProtocolRequestType0=Lf.RegistrationType=Lf.MessageDirection=void 0;var Y4=Y_(),h3e;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(h3e||(Lf.MessageDirection=h3e={}));var Gue=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};Lf.RegistrationType=Gue;var Vue=class extends Y4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};Lf.ProtocolRequestType0=Vue;var zue=class extends Y4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,Y4.ParameterStructures.byName)}};Lf.ProtocolRequestType=zue;var Yue=class extends Y4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};Lf.ProtocolNotificationType0=Yue;var Kue=class extends Y4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,Y4.ParameterStructures.byName)}};Lf.ProtocolNotificationType=Kue});var o$=q(Fc=>{"use strict";d();Object.defineProperty(Fc,"__esModule",{value:!0});Fc.objectLiteral=Fc.typedArray=Fc.stringArray=Fc.array=Fc.func=Fc.error=Fc.number=Fc.string=Fc.boolean=void 0;function Owt(t){return t===!0||t===!1}s(Owt,"boolean");Fc.boolean=Owt;function m3e(t){return typeof t=="string"||t instanceof String}s(m3e,"string");Fc.string=m3e;function Qwt(t){return typeof t=="number"||t instanceof Number}s(Qwt,"number");Fc.number=Qwt;function Uwt(t){return t instanceof Error}s(Uwt,"error");Fc.error=Uwt;function qwt(t){return typeof t=="function"}s(qwt,"func");Fc.func=qwt;function g3e(t){return Array.isArray(t)}s(g3e,"array");Fc.array=g3e;function Hwt(t){return g3e(t)&&t.every(e=>m3e(e))}s(Hwt,"stringArray");Fc.stringArray=Hwt;function Wwt(t,e){return Array.isArray(t)&&t.every(e)}s(Wwt,"typedArray");Fc.typedArray=Wwt;function $wt(t){return t!==null&&typeof t=="object"}s($wt,"objectLiteral");Fc.objectLiteral=$wt});var C3e=q(s$=>{"use strict";d();Object.defineProperty(s$,"__esModule",{value:!0});s$.ImplementationRequest=void 0;var A3e=ya(),y3e;(function(t){t.method="textDocument/implementation",t.messageDirection=A3e.MessageDirection.clientToServer,t.type=new A3e.ProtocolRequestType(t.method)})(y3e||(s$.ImplementationRequest=y3e={}))});var x3e=q(a$=>{"use strict";d();Object.defineProperty(a$,"__esModule",{value:!0});a$.TypeDefinitionRequest=void 0;var v3e=ya(),E3e;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=v3e.MessageDirection.clientToServer,t.type=new v3e.ProtocolRequestType(t.method)})(E3e||(a$.TypeDefinitionRequest=E3e={}))});var T3e=q(K4=>{"use strict";d();Object.defineProperty(K4,"__esModule",{value:!0});K4.DidChangeWorkspaceFoldersNotification=K4.WorkspaceFoldersRequest=void 0;var c$=ya(),b3e;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=c$.MessageDirection.serverToClient,t.type=new c$.ProtocolRequestType0(t.method)})(b3e||(K4.WorkspaceFoldersRequest=b3e={}));var I3e;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=c$.MessageDirection.clientToServer,t.type=new c$.ProtocolNotificationType(t.method)})(I3e||(K4.DidChangeWorkspaceFoldersNotification=I3e={}))});var S3e=q(l$=>{"use strict";d();Object.defineProperty(l$,"__esModule",{value:!0});l$.ConfigurationRequest=void 0;var w3e=ya(),_3e;(function(t){t.method="workspace/configuration",t.messageDirection=w3e.MessageDirection.serverToClient,t.type=new w3e.ProtocolRequestType(t.method)})(_3e||(l$.ConfigurationRequest=_3e={}))});var P3e=q(J4=>{"use strict";d();Object.defineProperty(J4,"__esModule",{value:!0});J4.ColorPresentationRequest=J4.DocumentColorRequest=void 0;var u$=ya(),R3e;(function(t){t.method="textDocument/documentColor",t.messageDirection=u$.MessageDirection.clientToServer,t.type=new u$.ProtocolRequestType(t.method)})(R3e||(J4.DocumentColorRequest=R3e={}));var k3e;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=u$.MessageDirection.clientToServer,t.type=new u$.ProtocolRequestType(t.method)})(k3e||(J4.ColorPresentationRequest=k3e={}))});var N3e=q(X4=>{"use strict";d();Object.defineProperty(X4,"__esModule",{value:!0});X4.FoldingRangeRefreshRequest=X4.FoldingRangeRequest=void 0;var d$=ya(),D3e;(function(t){t.method="textDocument/foldingRange",t.messageDirection=d$.MessageDirection.clientToServer,t.type=new d$.ProtocolRequestType(t.method)})(D3e||(X4.FoldingRangeRequest=D3e={}));var B3e;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=d$.MessageDirection.serverToClient,t.type=new d$.ProtocolRequestType0(t.method)})(B3e||(X4.FoldingRangeRefreshRequest=B3e={}))});var F3e=q(f$=>{"use strict";d();Object.defineProperty(f$,"__esModule",{value:!0});f$.DeclarationRequest=void 0;var L3e=ya(),M3e;(function(t){t.method="textDocument/declaration",t.messageDirection=L3e.MessageDirection.clientToServer,t.type=new L3e.ProtocolRequestType(t.method)})(M3e||(f$.DeclarationRequest=M3e={}))});var U3e=q(p$=>{"use strict";d();Object.defineProperty(p$,"__esModule",{value:!0});p$.SelectionRangeRequest=void 0;var O3e=ya(),Q3e;(function(t){t.method="textDocument/selectionRange",t.messageDirection=O3e.MessageDirection.clientToServer,t.type=new O3e.ProtocolRequestType(t.method)})(Q3e||(p$.SelectionRangeRequest=Q3e={}))});var $3e=q(Qb=>{"use strict";d();Object.defineProperty(Qb,"__esModule",{value:!0});Qb.WorkDoneProgressCancelNotification=Qb.WorkDoneProgressCreateRequest=Qb.WorkDoneProgress=void 0;var jwt=Y_(),h$=ya(),q3e;(function(t){t.type=new jwt.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(q3e||(Qb.WorkDoneProgress=q3e={}));var H3e;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=h$.MessageDirection.serverToClient,t.type=new h$.ProtocolRequestType(t.method)})(H3e||(Qb.WorkDoneProgressCreateRequest=H3e={}));var W3e;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=h$.MessageDirection.clientToServer,t.type=new h$.ProtocolNotificationType(t.method)})(W3e||(Qb.WorkDoneProgressCancelNotification=W3e={}))});var z3e=q(Ub=>{"use strict";d();Object.defineProperty(Ub,"__esModule",{value:!0});Ub.CallHierarchyOutgoingCallsRequest=Ub.CallHierarchyIncomingCallsRequest=Ub.CallHierarchyPrepareRequest=void 0;var Z4=ya(),j3e;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Z4.MessageDirection.clientToServer,t.type=new Z4.ProtocolRequestType(t.method)})(j3e||(Ub.CallHierarchyPrepareRequest=j3e={}));var G3e;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Z4.MessageDirection.clientToServer,t.type=new Z4.ProtocolRequestType(t.method)})(G3e||(Ub.CallHierarchyIncomingCallsRequest=G3e={}));var V3e;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Z4.MessageDirection.clientToServer,t.type=new Z4.ProtocolRequestType(t.method)})(V3e||(Ub.CallHierarchyOutgoingCallsRequest=V3e={}))});var eDe=q(Mf=>{"use strict";d();Object.defineProperty(Mf,"__esModule",{value:!0});Mf.SemanticTokensRefreshRequest=Mf.SemanticTokensRangeRequest=Mf.SemanticTokensDeltaRequest=Mf.SemanticTokensRequest=Mf.SemanticTokensRegistrationType=Mf.TokenFormat=void 0;var sv=ya(),Y3e;(function(t){t.Relative="relative"})(Y3e||(Mf.TokenFormat=Y3e={}));var g6;(function(t){t.method="textDocument/semanticTokens",t.type=new sv.RegistrationType(t.method)})(g6||(Mf.SemanticTokensRegistrationType=g6={}));var K3e;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=sv.MessageDirection.clientToServer,t.type=new sv.ProtocolRequestType(t.method),t.registrationMethod=g6.method})(K3e||(Mf.SemanticTokensRequest=K3e={}));var J3e;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=sv.MessageDirection.clientToServer,t.type=new sv.ProtocolRequestType(t.method),t.registrationMethod=g6.method})(J3e||(Mf.SemanticTokensDeltaRequest=J3e={}));var X3e;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=sv.MessageDirection.clientToServer,t.type=new sv.ProtocolRequestType(t.method),t.registrationMethod=g6.method})(X3e||(Mf.SemanticTokensRangeRequest=X3e={}));var Z3e;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=sv.MessageDirection.serverToClient,t.type=new sv.ProtocolRequestType0(t.method)})(Z3e||(Mf.SemanticTokensRefreshRequest=Z3e={}))});var nDe=q(m$=>{"use strict";d();Object.defineProperty(m$,"__esModule",{value:!0});m$.ShowDocumentRequest=void 0;var tDe=ya(),rDe;(function(t){t.method="window/showDocument",t.messageDirection=tDe.MessageDirection.serverToClient,t.type=new tDe.ProtocolRequestType(t.method)})(rDe||(m$.ShowDocumentRequest=rDe={}))});var sDe=q(g$=>{"use strict";d();Object.defineProperty(g$,"__esModule",{value:!0});g$.LinkedEditingRangeRequest=void 0;var iDe=ya(),oDe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=iDe.MessageDirection.clientToServer,t.type=new iDe.ProtocolRequestType(t.method)})(oDe||(g$.LinkedEditingRangeRequest=oDe={}))});var hDe=q(ld=>{"use strict";d();Object.defineProperty(ld,"__esModule",{value:!0});ld.WillDeleteFilesRequest=ld.DidDeleteFilesNotification=ld.DidRenameFilesNotification=ld.WillRenameFilesRequest=ld.DidCreateFilesNotification=ld.WillCreateFilesRequest=ld.FileOperationPatternKind=void 0;var gh=ya(),aDe;(function(t){t.file="file",t.folder="folder"})(aDe||(ld.FileOperationPatternKind=aDe={}));var cDe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolRequestType(t.method)})(cDe||(ld.WillCreateFilesRequest=cDe={}));var lDe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolNotificationType(t.method)})(lDe||(ld.DidCreateFilesNotification=lDe={}));var uDe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolRequestType(t.method)})(uDe||(ld.WillRenameFilesRequest=uDe={}));var dDe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolNotificationType(t.method)})(dDe||(ld.DidRenameFilesNotification=dDe={}));var fDe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolNotificationType(t.method)})(fDe||(ld.DidDeleteFilesNotification=fDe={}));var pDe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=gh.MessageDirection.clientToServer,t.type=new gh.ProtocolRequestType(t.method)})(pDe||(ld.WillDeleteFilesRequest=pDe={}))});var CDe=q(qb=>{"use strict";d();Object.defineProperty(qb,"__esModule",{value:!0});qb.MonikerRequest=qb.MonikerKind=qb.UniquenessLevel=void 0;var mDe=ya(),gDe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(gDe||(qb.UniquenessLevel=gDe={}));var ADe;(function(t){t.$import="import",t.$export="export",t.local="local"})(ADe||(qb.MonikerKind=ADe={}));var yDe;(function(t){t.method="textDocument/moniker",t.messageDirection=mDe.MessageDirection.clientToServer,t.type=new mDe.ProtocolRequestType(t.method)})(yDe||(qb.MonikerRequest=yDe={}))});var bDe=q(Hb=>{"use strict";d();Object.defineProperty(Hb,"__esModule",{value:!0});Hb.TypeHierarchySubtypesRequest=Hb.TypeHierarchySupertypesRequest=Hb.TypeHierarchyPrepareRequest=void 0;var eP=ya(),vDe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=eP.MessageDirection.clientToServer,t.type=new eP.ProtocolRequestType(t.method)})(vDe||(Hb.TypeHierarchyPrepareRequest=vDe={}));var EDe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=eP.MessageDirection.clientToServer,t.type=new eP.ProtocolRequestType(t.method)})(EDe||(Hb.TypeHierarchySupertypesRequest=EDe={}));var xDe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=eP.MessageDirection.clientToServer,t.type=new eP.ProtocolRequestType(t.method)})(xDe||(Hb.TypeHierarchySubtypesRequest=xDe={}))});var wDe=q(tP=>{"use strict";d();Object.defineProperty(tP,"__esModule",{value:!0});tP.InlineValueRefreshRequest=tP.InlineValueRequest=void 0;var A$=ya(),IDe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=A$.MessageDirection.clientToServer,t.type=new A$.ProtocolRequestType(t.method)})(IDe||(tP.InlineValueRequest=IDe={}));var TDe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=A$.MessageDirection.serverToClient,t.type=new A$.ProtocolRequestType0(t.method)})(TDe||(tP.InlineValueRefreshRequest=TDe={}))});var kDe=q(Wb=>{"use strict";d();Object.defineProperty(Wb,"__esModule",{value:!0});Wb.InlayHintRefreshRequest=Wb.InlayHintResolveRequest=Wb.InlayHintRequest=void 0;var rP=ya(),_De;(function(t){t.method="textDocument/inlayHint",t.messageDirection=rP.MessageDirection.clientToServer,t.type=new rP.ProtocolRequestType(t.method)})(_De||(Wb.InlayHintRequest=_De={}));var SDe;(function(t){t.method="inlayHint/resolve",t.messageDirection=rP.MessageDirection.clientToServer,t.type=new rP.ProtocolRequestType(t.method)})(SDe||(Wb.InlayHintResolveRequest=SDe={}));var RDe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=rP.MessageDirection.serverToClient,t.type=new rP.ProtocolRequestType0(t.method)})(RDe||(Wb.InlayHintRefreshRequest=RDe={}))});var FDe=q(Ah=>{"use strict";d();Object.defineProperty(Ah,"__esModule",{value:!0});Ah.DiagnosticRefreshRequest=Ah.WorkspaceDiagnosticRequest=Ah.DocumentDiagnosticRequest=Ah.DocumentDiagnosticReportKind=Ah.DiagnosticServerCancellationData=void 0;var MDe=Y_(),Gwt=o$(),nP=ya(),PDe;(function(t){function e(r){let n=r;return n&&Gwt.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(PDe||(Ah.DiagnosticServerCancellationData=PDe={}));var DDe;(function(t){t.Full="full",t.Unchanged="unchanged"})(DDe||(Ah.DocumentDiagnosticReportKind=DDe={}));var BDe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=nP.MessageDirection.clientToServer,t.type=new nP.ProtocolRequestType(t.method),t.partialResult=new MDe.ProgressType})(BDe||(Ah.DocumentDiagnosticRequest=BDe={}));var NDe;(function(t){t.method="workspace/diagnostic",t.messageDirection=nP.MessageDirection.clientToServer,t.type=new nP.ProtocolRequestType(t.method),t.partialResult=new MDe.ProgressType})(NDe||(Ah.WorkspaceDiagnosticRequest=NDe={}));var LDe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=nP.MessageDirection.serverToClient,t.type=new nP.ProtocolRequestType0(t.method)})(LDe||(Ah.DiagnosticRefreshRequest=LDe={}))});var $De=q(Wa=>{"use strict";d();Object.defineProperty(Wa,"__esModule",{value:!0});Wa.DidCloseNotebookDocumentNotification=Wa.DidSaveNotebookDocumentNotification=Wa.DidChangeNotebookDocumentNotification=Wa.NotebookCellArrayChange=Wa.DidOpenNotebookDocumentNotification=Wa.NotebookDocumentSyncRegistrationType=Wa.NotebookDocument=Wa.NotebookCell=Wa.ExecutionSummary=Wa.NotebookCellKind=void 0;var A6=i$(),bg=o$(),by=ya(),Jue;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Jue||(Wa.NotebookCellKind=Jue={}));var Xue;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return bg.objectLiteral(o)&&A6.uinteger.is(o.executionOrder)&&(o.success===void 0||bg.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Xue||(Wa.ExecutionSummary=Xue={}));var y$;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return bg.objectLiteral(a)&&Jue.is(a.kind)&&A6.DocumentUri.is(a.document)&&(a.metadata===void 0||bg.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Xue.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(bg.objectLiteral(o)&&bg.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let h=u[p];if(!i(o[h],a[h]))return!1}}return!0}s(i,"equalsMetadata")})(y$||(Wa.NotebookCell=y$={}));var ODe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return bg.objectLiteral(i)&&bg.string(i.uri)&&A6.integer.is(i.version)&&bg.typedArray(i.cells,y$.is)}s(r,"is"),t.is=r})(ODe||(Wa.NotebookDocument=ODe={}));var iP;(function(t){t.method="notebookDocument/sync",t.messageDirection=by.MessageDirection.clientToServer,t.type=new by.RegistrationType(t.method)})(iP||(Wa.NotebookDocumentSyncRegistrationType=iP={}));var QDe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=by.MessageDirection.clientToServer,t.type=new by.ProtocolNotificationType(t.method),t.registrationMethod=iP.method})(QDe||(Wa.DidOpenNotebookDocumentNotification=QDe={}));var UDe;(function(t){function e(n){let i=n;return bg.objectLiteral(i)&&A6.uinteger.is(i.start)&&A6.uinteger.is(i.deleteCount)&&(i.cells===void 0||bg.typedArray(i.cells,y$.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(UDe||(Wa.NotebookCellArrayChange=UDe={}));var qDe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=by.MessageDirection.clientToServer,t.type=new by.ProtocolNotificationType(t.method),t.registrationMethod=iP.method})(qDe||(Wa.DidChangeNotebookDocumentNotification=qDe={}));var HDe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=by.MessageDirection.clientToServer,t.type=new by.ProtocolNotificationType(t.method),t.registrationMethod=iP.method})(HDe||(Wa.DidSaveNotebookDocumentNotification=HDe={}));var WDe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=by.MessageDirection.clientToServer,t.type=new by.ProtocolNotificationType(t.method),t.registrationMethod=iP.method})(WDe||(Wa.DidCloseNotebookDocumentNotification=WDe={}))});var VDe=q(C$=>{"use strict";d();Object.defineProperty(C$,"__esModule",{value:!0});C$.InlineCompletionRequest=void 0;var jDe=ya(),GDe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=jDe.MessageDirection.clientToServer,t.type=new jDe.ProtocolRequestType(t.method)})(GDe||(C$.InlineCompletionRequest=GDe={}))});var sNe=q(be=>{"use strict";d();Object.defineProperty(be,"__esModule",{value:!0});be.WorkspaceSymbolRequest=be.CodeActionResolveRequest=be.CodeActionRequest=be.DocumentSymbolRequest=be.DocumentHighlightRequest=be.ReferencesRequest=be.DefinitionRequest=be.SignatureHelpRequest=be.SignatureHelpTriggerKind=be.HoverRequest=be.CompletionResolveRequest=be.CompletionRequest=be.CompletionTriggerKind=be.PublishDiagnosticsNotification=be.WatchKind=be.RelativePattern=be.FileChangeType=be.DidChangeWatchedFilesNotification=be.WillSaveTextDocumentWaitUntilRequest=be.WillSaveTextDocumentNotification=be.TextDocumentSaveReason=be.DidSaveTextDocumentNotification=be.DidCloseTextDocumentNotification=be.DidChangeTextDocumentNotification=be.TextDocumentContentChangeEvent=be.DidOpenTextDocumentNotification=be.TextDocumentSyncKind=be.TelemetryEventNotification=be.LogMessageNotification=be.ShowMessageRequest=be.ShowMessageNotification=be.MessageType=be.DidChangeConfigurationNotification=be.ExitNotification=be.ShutdownRequest=be.InitializedNotification=be.InitializeErrorCodes=be.InitializeRequest=be.WorkDoneProgressOptions=be.TextDocumentRegistrationOptions=be.StaticRegistrationOptions=be.PositionEncodingKind=be.FailureHandlingKind=be.ResourceOperationKind=be.UnregistrationRequest=be.RegistrationRequest=be.DocumentSelector=be.NotebookCellTextDocumentFilter=be.NotebookDocumentFilter=be.TextDocumentFilter=void 0;be.MonikerRequest=be.MonikerKind=be.UniquenessLevel=be.WillDeleteFilesRequest=be.DidDeleteFilesNotification=be.WillRenameFilesRequest=be.DidRenameFilesNotification=be.WillCreateFilesRequest=be.DidCreateFilesNotification=be.FileOperationPatternKind=be.LinkedEditingRangeRequest=be.ShowDocumentRequest=be.SemanticTokensRegistrationType=be.SemanticTokensRefreshRequest=be.SemanticTokensRangeRequest=be.SemanticTokensDeltaRequest=be.SemanticTokensRequest=be.TokenFormat=be.CallHierarchyPrepareRequest=be.CallHierarchyOutgoingCallsRequest=be.CallHierarchyIncomingCallsRequest=be.WorkDoneProgressCancelNotification=be.WorkDoneProgressCreateRequest=be.WorkDoneProgress=be.SelectionRangeRequest=be.DeclarationRequest=be.FoldingRangeRefreshRequest=be.FoldingRangeRequest=be.ColorPresentationRequest=be.DocumentColorRequest=be.ConfigurationRequest=be.DidChangeWorkspaceFoldersNotification=be.WorkspaceFoldersRequest=be.TypeDefinitionRequest=be.ImplementationRequest=be.ApplyWorkspaceEditRequest=be.ExecuteCommandRequest=be.PrepareRenameRequest=be.RenameRequest=be.PrepareSupportDefaultBehavior=be.DocumentOnTypeFormattingRequest=be.DocumentRangesFormattingRequest=be.DocumentRangeFormattingRequest=be.DocumentFormattingRequest=be.DocumentLinkResolveRequest=be.DocumentLinkRequest=be.CodeLensRefreshRequest=be.CodeLensResolveRequest=be.CodeLensRequest=be.WorkspaceSymbolResolveRequest=void 0;be.InlineCompletionRequest=be.DidCloseNotebookDocumentNotification=be.DidSaveNotebookDocumentNotification=be.DidChangeNotebookDocumentNotification=be.NotebookCellArrayChange=be.DidOpenNotebookDocumentNotification=be.NotebookDocumentSyncRegistrationType=be.NotebookDocument=be.NotebookCell=be.ExecutionSummary=be.NotebookCellKind=be.DiagnosticRefreshRequest=be.WorkspaceDiagnosticRequest=be.DocumentDiagnosticRequest=be.DocumentDiagnosticReportKind=be.DiagnosticServerCancellationData=be.InlayHintRefreshRequest=be.InlayHintResolveRequest=be.InlayHintRequest=be.InlineValueRefreshRequest=be.InlineValueRequest=be.TypeHierarchySupertypesRequest=be.TypeHierarchySubtypesRequest=be.TypeHierarchyPrepareRequest=void 0;var $t=ya(),zDe=i$(),Ml=o$(),Vwt=C3e();Object.defineProperty(be,"ImplementationRequest",{enumerable:!0,get:s(function(){return Vwt.ImplementationRequest},"get")});var zwt=x3e();Object.defineProperty(be,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return zwt.TypeDefinitionRequest},"get")});var rNe=T3e();Object.defineProperty(be,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return rNe.WorkspaceFoldersRequest},"get")});Object.defineProperty(be,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return rNe.DidChangeWorkspaceFoldersNotification},"get")});var Ywt=S3e();Object.defineProperty(be,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Ywt.ConfigurationRequest},"get")});var nNe=P3e();Object.defineProperty(be,"DocumentColorRequest",{enumerable:!0,get:s(function(){return nNe.DocumentColorRequest},"get")});Object.defineProperty(be,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return nNe.ColorPresentationRequest},"get")});var iNe=N3e();Object.defineProperty(be,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return iNe.FoldingRangeRequest},"get")});Object.defineProperty(be,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return iNe.FoldingRangeRefreshRequest},"get")});var Kwt=F3e();Object.defineProperty(be,"DeclarationRequest",{enumerable:!0,get:s(function(){return Kwt.DeclarationRequest},"get")});var Jwt=U3e();Object.defineProperty(be,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Jwt.SelectionRangeRequest},"get")});var nde=$3e();Object.defineProperty(be,"WorkDoneProgress",{enumerable:!0,get:s(function(){return nde.WorkDoneProgress},"get")});Object.defineProperty(be,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return nde.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(be,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return nde.WorkDoneProgressCancelNotification},"get")});var ide=z3e();Object.defineProperty(be,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return ide.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return ide.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(be,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return ide.CallHierarchyPrepareRequest},"get")});var oP=eDe();Object.defineProperty(be,"TokenFormat",{enumerable:!0,get:s(function(){return oP.TokenFormat},"get")});Object.defineProperty(be,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return oP.SemanticTokensRequest},"get")});Object.defineProperty(be,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return oP.SemanticTokensDeltaRequest},"get")});Object.defineProperty(be,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return oP.SemanticTokensRangeRequest},"get")});Object.defineProperty(be,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return oP.SemanticTokensRefreshRequest},"get")});Object.defineProperty(be,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return oP.SemanticTokensRegistrationType},"get")});var Xwt=nDe();Object.defineProperty(be,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Xwt.ShowDocumentRequest},"get")});var Zwt=sDe();Object.defineProperty(be,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return Zwt.LinkedEditingRangeRequest},"get")});var K_=hDe();Object.defineProperty(be,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return K_.FileOperationPatternKind},"get")});Object.defineProperty(be,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return K_.DidCreateFilesNotification},"get")});Object.defineProperty(be,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return K_.WillCreateFilesRequest},"get")});Object.defineProperty(be,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return K_.DidRenameFilesNotification},"get")});Object.defineProperty(be,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return K_.WillRenameFilesRequest},"get")});Object.defineProperty(be,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return K_.DidDeleteFilesNotification},"get")});Object.defineProperty(be,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return K_.WillDeleteFilesRequest},"get")});var ode=CDe();Object.defineProperty(be,"UniquenessLevel",{enumerable:!0,get:s(function(){return ode.UniquenessLevel},"get")});Object.defineProperty(be,"MonikerKind",{enumerable:!0,get:s(function(){return ode.MonikerKind},"get")});Object.defineProperty(be,"MonikerRequest",{enumerable:!0,get:s(function(){return ode.MonikerRequest},"get")});var sde=bDe();Object.defineProperty(be,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return sde.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(be,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return sde.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(be,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return sde.TypeHierarchySupertypesRequest},"get")});var oNe=wDe();Object.defineProperty(be,"InlineValueRequest",{enumerable:!0,get:s(function(){return oNe.InlineValueRequest},"get")});Object.defineProperty(be,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return oNe.InlineValueRefreshRequest},"get")});var ade=kDe();Object.defineProperty(be,"InlayHintRequest",{enumerable:!0,get:s(function(){return ade.InlayHintRequest},"get")});Object.defineProperty(be,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return ade.InlayHintResolveRequest},"get")});Object.defineProperty(be,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return ade.InlayHintRefreshRequest},"get")});var y6=FDe();Object.defineProperty(be,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return y6.DiagnosticServerCancellationData},"get")});Object.defineProperty(be,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return y6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(be,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return y6.DocumentDiagnosticRequest},"get")});Object.defineProperty(be,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return y6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(be,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return y6.DiagnosticRefreshRequest},"get")});var Iy=$De();Object.defineProperty(be,"NotebookCellKind",{enumerable:!0,get:s(function(){return Iy.NotebookCellKind},"get")});Object.defineProperty(be,"ExecutionSummary",{enumerable:!0,get:s(function(){return Iy.ExecutionSummary},"get")});Object.defineProperty(be,"NotebookCell",{enumerable:!0,get:s(function(){return Iy.NotebookCell},"get")});Object.defineProperty(be,"NotebookDocument",{enumerable:!0,get:s(function(){return Iy.NotebookDocument},"get")});Object.defineProperty(be,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return Iy.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(be,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return Iy.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(be,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return Iy.NotebookCellArrayChange},"get")});Object.defineProperty(be,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return Iy.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return Iy.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(be,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return Iy.DidCloseNotebookDocumentNotification},"get")});var e_t=VDe();Object.defineProperty(be,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return e_t.InlineCompletionRequest},"get")});var Zue;(function(t){function e(r){let n=r;return Ml.string(n)||Ml.string(n.language)||Ml.string(n.scheme)||Ml.string(n.pattern)}s(e,"is"),t.is=e})(Zue||(be.TextDocumentFilter=Zue={}));var ede;(function(t){function e(r){let n=r;return Ml.objectLiteral(n)&&(Ml.string(n.notebookType)||Ml.string(n.scheme)||Ml.string(n.pattern))}s(e,"is"),t.is=e})(ede||(be.NotebookDocumentFilter=ede={}));var tde;(function(t){function e(r){let n=r;return Ml.objectLiteral(n)&&(Ml.string(n.notebook)||ede.is(n.notebook))&&(n.language===void 0||Ml.string(n.language))}s(e,"is"),t.is=e})(tde||(be.NotebookCellTextDocumentFilter=tde={}));var rde;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Ml.string(n)&&!Zue.is(n)&&!tde.is(n))return!1;return!0}s(e,"is"),t.is=e})(rde||(be.DocumentSelector=rde={}));var YDe;(function(t){t.method="client/registerCapability",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(YDe||(be.RegistrationRequest=YDe={}));var KDe;(function(t){t.method="client/unregisterCapability",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(KDe||(be.UnregistrationRequest=KDe={}));var JDe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(JDe||(be.ResourceOperationKind=JDe={}));var XDe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(XDe||(be.FailureHandlingKind=XDe={}));var ZDe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(ZDe||(be.PositionEncodingKind=ZDe={}));var eBe;(function(t){function e(r){let n=r;return n&&Ml.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(eBe||(be.StaticRegistrationOptions=eBe={}));var tBe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||rde.is(n.documentSelector))}s(e,"is"),t.is=e})(tBe||(be.TextDocumentRegistrationOptions=tBe={}));var rBe;(function(t){function e(n){let i=n;return Ml.objectLiteral(i)&&(i.workDoneProgress===void 0||Ml.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Ml.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(rBe||(be.WorkDoneProgressOptions=rBe={}));var nBe;(function(t){t.method="initialize",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(nBe||(be.InitializeRequest=nBe={}));var iBe;(function(t){t.unknownProtocolVersion=1})(iBe||(be.InitializeErrorCodes=iBe={}));var oBe;(function(t){t.method="initialized",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(oBe||(be.InitializedNotification=oBe={}));var sBe;(function(t){t.method="shutdown",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType0(t.method)})(sBe||(be.ShutdownRequest=sBe={}));var aBe;(function(t){t.method="exit",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType0(t.method)})(aBe||(be.ExitNotification=aBe={}));var cBe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(cBe||(be.DidChangeConfigurationNotification=cBe={}));var lBe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(lBe||(be.MessageType=lBe={}));var uBe;(function(t){t.method="window/showMessage",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(uBe||(be.ShowMessageNotification=uBe={}));var dBe;(function(t){t.method="window/showMessageRequest",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType(t.method)})(dBe||(be.ShowMessageRequest=dBe={}));var fBe;(function(t){t.method="window/logMessage",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(fBe||(be.LogMessageNotification=fBe={}));var pBe;(function(t){t.method="telemetry/event",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(pBe||(be.TelemetryEventNotification=pBe={}));var hBe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(hBe||(be.TextDocumentSyncKind=hBe={}));var mBe;(function(t){t.method="textDocument/didOpen",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(mBe||(be.DidOpenTextDocumentNotification=mBe={}));var gBe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(gBe||(be.TextDocumentContentChangeEvent=gBe={}));var ABe;(function(t){t.method="textDocument/didChange",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(ABe||(be.DidChangeTextDocumentNotification=ABe={}));var yBe;(function(t){t.method="textDocument/didClose",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(yBe||(be.DidCloseTextDocumentNotification=yBe={}));var CBe;(function(t){t.method="textDocument/didSave",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(CBe||(be.DidSaveTextDocumentNotification=CBe={}));var vBe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(vBe||(be.TextDocumentSaveReason=vBe={}));var EBe;(function(t){t.method="textDocument/willSave",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(EBe||(be.WillSaveTextDocumentNotification=EBe={}));var xBe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(xBe||(be.WillSaveTextDocumentWaitUntilRequest=xBe={}));var bBe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolNotificationType(t.method)})(bBe||(be.DidChangeWatchedFilesNotification=bBe={}));var IBe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(IBe||(be.FileChangeType=IBe={}));var TBe;(function(t){function e(r){let n=r;return Ml.objectLiteral(n)&&(zDe.URI.is(n.baseUri)||zDe.WorkspaceFolder.is(n.baseUri))&&Ml.string(n.pattern)}s(e,"is"),t.is=e})(TBe||(be.RelativePattern=TBe={}));var wBe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(wBe||(be.WatchKind=wBe={}));var _Be;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolNotificationType(t.method)})(_Be||(be.PublishDiagnosticsNotification=_Be={}));var SBe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(SBe||(be.CompletionTriggerKind=SBe={}));var RBe;(function(t){t.method="textDocument/completion",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(RBe||(be.CompletionRequest=RBe={}));var kBe;(function(t){t.method="completionItem/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(kBe||(be.CompletionResolveRequest=kBe={}));var PBe;(function(t){t.method="textDocument/hover",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(PBe||(be.HoverRequest=PBe={}));var DBe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(DBe||(be.SignatureHelpTriggerKind=DBe={}));var BBe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(BBe||(be.SignatureHelpRequest=BBe={}));var NBe;(function(t){t.method="textDocument/definition",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(NBe||(be.DefinitionRequest=NBe={}));var LBe;(function(t){t.method="textDocument/references",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(LBe||(be.ReferencesRequest=LBe={}));var MBe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(MBe||(be.DocumentHighlightRequest=MBe={}));var FBe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(FBe||(be.DocumentSymbolRequest=FBe={}));var OBe;(function(t){t.method="textDocument/codeAction",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(OBe||(be.CodeActionRequest=OBe={}));var QBe;(function(t){t.method="codeAction/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(QBe||(be.CodeActionResolveRequest=QBe={}));var UBe;(function(t){t.method="workspace/symbol",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(UBe||(be.WorkspaceSymbolRequest=UBe={}));var qBe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(qBe||(be.WorkspaceSymbolResolveRequest=qBe={}));var HBe;(function(t){t.method="textDocument/codeLens",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(HBe||(be.CodeLensRequest=HBe={}));var WBe;(function(t){t.method="codeLens/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(WBe||(be.CodeLensResolveRequest=WBe={}));var $Be;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType0(t.method)})($Be||(be.CodeLensRefreshRequest=$Be={}));var jBe;(function(t){t.method="textDocument/documentLink",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(jBe||(be.DocumentLinkRequest=jBe={}));var GBe;(function(t){t.method="documentLink/resolve",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(GBe||(be.DocumentLinkResolveRequest=GBe={}));var VBe;(function(t){t.method="textDocument/formatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(VBe||(be.DocumentFormattingRequest=VBe={}));var zBe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(zBe||(be.DocumentRangeFormattingRequest=zBe={}));var YBe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(YBe||(be.DocumentRangesFormattingRequest=YBe={}));var KBe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(KBe||(be.DocumentOnTypeFormattingRequest=KBe={}));var JBe;(function(t){t.Identifier=1})(JBe||(be.PrepareSupportDefaultBehavior=JBe={}));var XBe;(function(t){t.method="textDocument/rename",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(XBe||(be.RenameRequest=XBe={}));var ZBe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(ZBe||(be.PrepareRenameRequest=ZBe={}));var eNe;(function(t){t.method="workspace/executeCommand",t.messageDirection=$t.MessageDirection.clientToServer,t.type=new $t.ProtocolRequestType(t.method)})(eNe||(be.ExecuteCommandRequest=eNe={}));var tNe;(function(t){t.method="workspace/applyEdit",t.messageDirection=$t.MessageDirection.serverToClient,t.type=new $t.ProtocolRequestType("workspace/applyEdit")})(tNe||(be.ApplyWorkspaceEditRequest=tNe={}))});var cNe=q(v$=>{"use strict";d();Object.defineProperty(v$,"__esModule",{value:!0});v$.createProtocolConnection=void 0;var aNe=Y_();function t_t(t,e,r,n){return aNe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,aNe.createMessageConnection)(t,e,r,n)}s(t_t,"createProtocolConnection");v$.createProtocolConnection=t_t});var uNe=q(Ff=>{"use strict";d();var r_t=Ff&&Ff.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),E$=Ff&&Ff.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&r_t(e,t,r)};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.LSPErrorCodes=Ff.createProtocolConnection=void 0;E$(Y_(),Ff);E$(i$(),Ff);E$(ya(),Ff);E$(sNe(),Ff);var n_t=cNe();Object.defineProperty(Ff,"createProtocolConnection",{enumerable:!0,get:s(function(){return n_t.createProtocolConnection},"get")});var lNe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(lNe||(Ff.LSPErrorCodes=lNe={}))});var pi=q(Ty=>{"use strict";d();var i_t=Ty&&Ty.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dNe=Ty&&Ty.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&i_t(e,t,r)};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.createProtocolConnection=void 0;var o_t=jue();dNe(jue(),Ty);dNe(uNe(),Ty);function s_t(t,e,r,n){return(0,o_t.createMessageConnection)(t,e,r,n)}s(s_t,"createProtocolConnection");Ty.createProtocolConnection=s_t});var e8e=q((L$,ZNe)=>{d();(function(t,e){typeof L$=="object"&&typeof ZNe<"u"?e(L$):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(L$,function(t){"use strict";function e(w,k){return w||k}s(e,"_pureAssign");function r(w,k){return w[k]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",h="Symbol",m="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),_=r(b,l),S=e(String),P=r(S,l),B=e(Math),F=e(Array),Y=r(F,l),ee=r(Y,"slice");function V(w,k){try{return{v:w.apply(this,k)}}catch(N){return{e:N}}}s(V,"safe");function H(w){return function(k){return typeof k===w}}s(H,"_createIs");function U(w){var k="[object "+w+"]";return function(N){return!!(N&&X(N)===k)}}s(U,"_createObjIs");function X(w){return _[E].call(w)}s(X,"objToString");function K(w){return typeof w===f||w===f}s(K,"isUndefined");function j(w){return!J(w)}s(j,"isStrictUndefined");function W(w){return w===i||K(w)}s(W,"isNullOrUndefined");function J(w){return!!w||w!==n}s(J,"isDefined");var ie=H("string"),ae=H(a);function te(w){return!w&&W(w)?!1:!!w&&typeof w===c}s(te,"isObject");var pe=r(F,"isArray"),Ae=U("Error"),Oe=r(b,"getOwnPropertyDescriptor");function Te(w,k){return!!w&&_.hasOwnProperty[y](w,k)}s(Te,"objHasOwnProperty");var Je=e(r(b,"hasOwn"),Fe);function Fe(w,k){return Te(w,k)||!!Oe(w,k)}s(Fe,"polyObjHasOwn");function ct(w,k,N){if(w&&te(w)){for(var $ in w)if(Je(w,$)&&k[y](N||w,$,w[$])===-1)break}}s(ct,"objForEachKey");var St={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function vt(w){var k={};if(k[St.c]=!0,k[St.e]=!0,w.l){k.get=function(){return w.l.v};var N=Oe(w.l,"v");N&&N.set&&(k.set=function($){w.l.v=$})}return ct(w,function($,de){k[St[$]]=j(de)?k[St[$]]:de}),k}s(vt,"_createProp");var mt=r(b,"defineProperty");function ue(w,k,N){return mt(w,k,vt(N))}s(ue,"objDefine");function Ue(w,k,N,$,de){var we={};return ct(w,function(ke,$e){ye(we,ke,k?$e:ke),ye(we,$e,N?$e:ke)}),$?$(we):we}s(Ue,"_createKeyValueMap");function ye(w,k,N,$){mt(w,k,{value:N,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var We=e(S),se="[object Error]";function le(w,k){var N=o,$=_[E][y](w);$===se&&(w={stack:We(w.stack),message:We(w.message),name:We(w.name)});try{N=JSON.stringify(w,i,k?typeof k=="number"?k:4:n),N=(N?N.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||We(w)}catch(de){N=" - "+le(de,k)}return $+": "+N}s(le,"dumpObj");function qe(w){throw new Error(w)}s(qe,"throwError");function Be(w){throw new TypeError(w)}s(Be,"throwTypeError");var xe=r(b,"freeze");function je(w){return w}s(je,"_doNothing");function et(w){return w[u]||i}s(et,"_getProto");var pt=r(b,"assign"),Lt=r(b,"keys"),Kt=e(xe,je),Ft=e(r(b,"getPrototypeOf"),et);function Qr(w){return Ue(w,1,0,Kt)}s(Qr,"createEnum");function Sr(w){var k={};return ct(w,function(N,$){ye(k,N,$[1]),ye(k,$[0],$[1])}),Kt(k)}s(Sr,"createSimpleMap");function rn(w){return Sr(w)}s(rn,"createTypeMap");var ve="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function It(){if(!Ge){var w=V(ft).v||{};Ge=w[ve]=w[ve]||{}}return Ge}s(It,"_getGlobalConfig");var rr=Xt;function Xt(w,k,N){var $=k?k[w]:i;return function(de){var we=(de?de[w]:i)||$;if(we||N){var ke=arguments;return(we||N).apply(de,we?ee[y](ke,1):ke)}Be('"'+We(w)+'" not defined for '+le(de))}}s(Xt,"_unwrapFunctionWithPoly");var xr=r(B,"min"),ar=r(B,"max"),er=rr("slice",P),sr=rr("substring",P),tr=Xt("substr",P,kr);function kr(w,k,N){return W(w)&&Be("Invalid "+le(w)),N<0?o:(k=k||0,k<0&&(k=ar(k+w[g],0)),K(N)?er(w,k):er(w,k,k+N))}s(kr,"polyStrSubstr");function Ur(w,k){return sr(w,0,k)}s(Ur,"strLeft");var Jr="_urid",hn;function Zn(){if(!hn){var w=It();hn=w.gblSym=w.gblSym||{k:{},s:{}}}return hn}s(Zn,"_globalSymbolRegistry");function bn(w){var k={description:We(w),toString:s(function(){return h+"("+w+")"},"toString")};return k[m]=!0,k}s(bn,"polyNewSymbol");function Jn(w){var k=Zn();if(!Je(k.k,w)){var N=bn(w),$=Lt(k.s).length;N[Jr]=function(){return $+"_"+N[E]()},k.k[w]=N,k.s[N[Jr]()]=We(w)}return k.k[w]}s(Jn,"polySymbolFor");var Xr;function Gn(){Xr=It()}s(Gn,"_initTestHooks");function Pe(w){return mt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(Pe,"createCachedValue");var z="window",Ce;function Ie(w,k){var N;return function(){return!Xr&&Gn(),(!N||Xr.lzy)&&(N=Pe(V(w,k).v)),N.v}}s(Ie,"_getGlobalInstFn");function M(w){return!Xr&&Gn(),(!Ce||w===!1||Xr.lzy)&&(Ce=Pe(V(ft).v||i)),Ce.v}s(M,"getGlobal");function D(w,k){var N;if(!Ce||k===!1?N=M(k):N=Ce.v,N&&N[w])return N[w];if(w===z)try{return window}catch{}return i}s(D,"getInst");var Z=Ie(D,["document"]);function ge(){return!!Se()}s(ge,"hasWindow");var Se=Ie(D,[z]);function lt(){return!!wt()}s(lt,"hasNavigator");var wt=Ie(D,["navigator"]),zt,Zt;function Yt(){return zt=Pe(V(D,[h]).v),zt}s(Yt,"_initSymbol");function xt(w){var k=(Xr.lzy?0:zt)||Yt();return k.v?k.v[w]:n}s(xt,"_getSymbolKey");function mr(w,k){!Xr&&Gn();var N=(Xr.lzy?0:zt)||Yt();return N.v?N.v(w):k?i:bn(w)}s(mr,"newSymbol");function si(w){return!Xr&&Gn(),Zt=(Xr.lzy?0:Zt)||Pe(V(xt,["for"]).v),(Zt.v||Jn)(w)}s(si,"symbolFor");function Vi(w,k,N){return w.apply(k,N)}s(Vi,"fnApply");function En(w,k,N){if(w)for(var $=w[g]>>>0,de=0;de<$&&!(de in w&&k[y](N||w,w[de],de,w)===-1);de++);}s(En,"arrForEach");var so=rr("indexOf",Y),gi=rr("map",Y),jo=rr("reduce",Y),ca=e(r(b,"create"),ic);function ic(w){if(!w)return{};var k=typeof w;k!==c&&k!==a&&Be("Prototype must be an Object or function: "+le(w));function N(){}return s(N,"tempFunc"),N[l]=w,new N}s(ic,"polyObjCreate");var So;function Fs(w,k){var N=b.setPrototypeOf||function($,de){var we;!So&&(So=Pe((we={},we[u]=[],we instanceof Array))),So.v?$[u]=de:ct(de,function(ke,$e){return $[ke]=$e})};return N(w,k)}s(Fs,"objSetPrototypeOf");function Gu(w,k,N){V(ue,[k,A,{v:w,c:!0,e:!1}]),k=Fs(k,N);function $(){this[p]=k,V(ue,[this,A,{v:w,c:!0,e:!1}])}return s($,"__"),k[l]=N===i?ca(N):($[l]=N[l],new $),k}s(Gu,"_createCustomError");function oc(w,k){k&&(w[A]=k)}s(oc,"_setName");function Fm(w,k,N){var $=N||Error,de=$[l][A],we=Error.captureStackTrace;return Gu(w,function(){var ke=this,$e=arguments;try{V(oc,[$,w]);var nt=Vi($,ke,ee[y]($e))||ke;if(nt!==ke){var Et=Ft(ke);Et!==Ft(nt)&&Fs(nt,Et)}return we&&we(nt,ke[p]),k&&k(nt,$e),nt}finally{V(oc,[$,de])}},$)}s(Fm,"createCustomError");function ol(){return(Date.now||Om)()}s(ol,"utcNow");function Om(){return new Date().getTime()}s(Om,"polyUtcNow");function Qm(w){return s(function(N){return W(N)&&Be("strTrim called ["+le(N)+"]"),N&&N.replace&&(N=N.replace(w,o)),N},"_doTrim")}s(Qm,"_createTrimFn");var rx=Qm(/^\s+|(?=\s)\s+$/g),wa=Xt("trim",P,rx),su=r(B,"floor"),au,Vu,Um;function wl(w){if(!w||typeof w!==c)return!1;Um||(Um=ge()?Se():!0);var k=!1;if(w!==Um){Vu||(au=Function[l][E],Vu=au[y](b));try{var N=Ft(w);k=!N,k||(Te(N,p)&&(N=N[p]),k=!!(N&&typeof N===a&&au[y](N)===Vu))}catch{}}return k}s(wl,"isPlainObject");var nx;function y1(){return!Xr&&Gn(),(!nx||Xr.lzy)&&(nx=Pe(V(D,["performance"]).v)),nx.v}s(y1,"getPerformance");var ix=r(B,"round"),yf=Xt("endsWith",P,Cf);function Cf(w,k,N){ie(w)||Be("'"+le(w)+"' is not a string");var $=ie(k)?k:We(k),de=!K(N)&&N<w[g]?N:w[g];return sr(w,de-$[g],de)===$}s(Cf,"polyStrEndsWith");var qr=rr("indexOf",P),sc="ref",qm="unref",Hm="hasRef",p8="enabled";function Rc(w,k,N){var $=!0,de=w?k(i):i,we;function ke(){return $=!1,de&&de[qm]&&de[qm](),we}s(ke,"_unref");function $e(){de&&N(de),de=i}s($e,"_cancel");function nt(){return de=k(de),$||ke(),we}s(nt,"_refresh");function Et(pr){!pr&&de&&$e(),pr&&!de&&nt()}return s(Et,"_setEnabled"),we={cancel:$e,refresh:nt},we[Hm]=function(){return de&&de[Hm]?de[Hm]():$},we[sc]=function(){return $=!0,de&&de[sc]&&de[sc](),we},we[qm]=ke,we=mt(we,p8,{get:s(function(){return!!de},"get"),set:Et}),{h:we,dn:s(function(){de=i},"dn")}}s(Rc,"_createTimerHandler");function FA(w,k,N){var $=pe(k),de=$?k.length:0,we=(de>0?k[0]:$?n:k)||setTimeout,ke=(de>1?k[1]:n)||clearTimeout,$e=N[0];N[0]=function(){nt.dn(),Vi($e,n,ee[y](arguments))};var nt=Rc(w,function(Et){if(Et){if(Et.refresh)return Et.refresh(),Et;Vi(ke,n,[Et])}return Vi(we,n,N)},function(Et){Vi(ke,n,[Et])});return nt.h}s(FA,"_createTimeoutWith");function C1(w,k){return FA(!0,n,ee[y](arguments))}s(C1,"scheduleTimeout");var Wp=Qr,OA=rn,ox="toLowerCase",hs="length",zu="warnToConsole",QA="throwInternal",W5="watch",h8="apply",zi="push",UA="splice",Wm="logger",$5="cancel",sx="name",Yu="unload",m8="version",g8="loggingLevelConsole",A8="messageId",v1="message",y8="diagLog",DU="userAgent",C8="split",ax="replace",qA="type",BU="evtName",j5="traceFlags",v8="getAttribute",G5;function Nse(w,k){G5||(G5=Fm("AggregationError",function($,de){de[hs]>1&&($.errors=de[1])}));var N=w||"One or more errors occurred.";throw En(k,function($,de){N+=`
`.concat(de," > ").concat(le($))}),new G5(N,k||[])}s(Nse,"throwAggregationError");var Lse="function",NU="object",Mse="undefined",$m="prototype",V5=Object,E8=V5[$m];(M()||{}).Symbol,(M()||{}).Reflect;var z5="hasOwnProperty",Fse=s(function(w){for(var k,N=1,$=arguments.length;N<$;N++){k=arguments[N];for(var de in k)E8[z5].call(k,de)&&(w[de]=k[de])}return w},"__objAssignFnImpl"),Y5=pt||Fse,K5=s(function(w,k){return K5=V5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,$){N.__proto__=$}||function(N,$){for(var de in $)$[z5](de)&&(N[de]=$[de])},K5(w,k)},"extendStaticsFn");function HA(w,k){typeof k!==Lse&&k!==null&&Be("Class extends value "+String(k)+" is not a constructor or null"),K5(w,k);function N(){this.constructor=w}s(N,"__"),w[$m]=k===null?ca(k):(N[$m]=k[$m],new N)}s(HA,"__extendsFn");var J5,E1="constructor",vf="prototype",Ef="function",x1="_dynInstFuncs",cx="_isDynProxy",WA="_dynClass",lx="_dynCls$",x8="_dynInstChk",b1=x8,ux="_dfOpts",b8="_unknown_",X5="__proto__",dx="_dyn"+X5,Ow="__dynProto$Gbl",Z5="_dynInstProto",fx="useBaseInst",px="setInstFuncs",Qw=Object,I1=Qw.getPrototypeOf,hx=Qw.getOwnPropertyNames,I8=M(),ek=I8[Ow]||(I8[Ow]={o:(J5={},J5[px]=!0,J5[fx]=!0,J5),n:1e3});function mx(w){return w&&(w===Qw[vf]||w===Array[vf])}s(mx,"_isObjectOrArrayPrototype");function gx(w){return mx(w)||w===Function[vf]}s(gx,"_isObjectArrayOrFunctionPrototype");function jm(w){var k;if(w){if(I1)return I1(w);var N=w[X5]||w[vf]||(w[E1]?w[E1][vf]:null);k=w[dx]||N,Te(w,dx)||(delete w[Z5],k=w[dx]=w[Z5]||w[dx],w[Z5]=N)}return k}s(jm,"_getObjProto");function $p(w,k){var N=[];if(hx)N=hx(w);else for(var $ in w)typeof $=="string"&&Te(w,$)&&N.push($);if(N&&N.length>0)for(var de=0;de<N.length;de++)k(N[de])}s($p,"_forEachProp");function Ax(w,k,N){return k!==E1&&typeof w[k]===Ef&&(N||Te(w,k))&&k!==X5&&k!==vf}s(Ax,"_isDynamicCandidate");function yx(w){Be("DynamicProto: "+w)}s(yx,"_throwTypeError");function tk(w){var k=ca(null);return $p(w,function(N){!k[N]&&Ax(w,N,!1)&&(k[N]=w[N])}),k}s(tk,"_getInstanceFuncs");function T8(w,k){for(var N=w.length-1;N>=0;N--)if(w[N]===k)return!0;return!1}s(T8,"_hasVisited");function w8(w,k,N,$){function de(nt,Et,pr){var Bn=Et[pr];if(Bn[cx]&&$){var Xn=nt[x1]||{};Xn[b1]!==!1&&(Bn=(Xn[Et[WA]]||{})[pr]||Bn)}return function(){return Bn.apply(nt,arguments)}}s(de,"_instFuncProxy");var we=ca(null);$p(N,function(nt){we[nt]=de(k,N,nt)});for(var ke=jm(w),$e=[];ke&&!gx(ke)&&!T8($e,ke);)$p(ke,function(nt){!we[nt]&&Ax(ke,nt,!I1)&&(we[nt]=de(k,ke,nt))}),$e.push(ke),ke=jm(ke);return we}s(w8,"_getBaseFuncs");function Ose(w,k,N,$){var de=null;if(w&&Te(N,WA)){var we=w[x1]||ca(null);if(de=(we[N[WA]]||ca(null))[k],de||yx("Missing ["+k+"] "+Ef),!de[x8]&&we[b1]!==!1){for(var ke=!Te(w,k),$e=jm(w),nt=[];ke&&$e&&!gx($e)&&!T8(nt,$e);){var Et=$e[k];if(Et){ke=Et===$;break}nt.push($e),$e=jm($e)}try{ke&&(w[k]=de),de[x8]=1}catch{we[b1]=!1}}}return de}s(Ose,"_getInstFunc");function Qse(w,k,N){var $=k[w];return $===N&&($=jm(k)[w]),typeof $!==Ef&&yx("["+w+"] is not a "+Ef),$}s(Qse,"_getProtoFunc");function Use(w,k,N,$,de){function we(nt,Et){var pr=s(function(){var Bn=Ose(this,Et,nt,pr)||Qse(Et,nt,pr);return Bn.apply(this,arguments)},"dynProtoProxy");return pr[cx]=1,pr}if(s(we,"_createDynamicPrototype"),!mx(w)){var ke=N[x1]=N[x1]||ca(null);if(!mx(ke)){var $e=ke[k]=ke[k]||ca(null);ke[b1]!==!1&&(ke[b1]=!!de),mx($e)||$p(N,function(nt){Ax(N,nt,!1)&&N[nt]!==$[nt]&&($e[nt]=N[nt],delete N[nt],(!Te(w,nt)||w[nt]&&!w[nt][cx])&&(w[nt]=we(w,nt)))})}}}s(Use,"_populatePrototype");function qse(w,k){if(I1){for(var N=[],$=jm(k);$&&!gx($)&&!T8(N,$);){if($===w)return!0;N.push($),$=jm($)}return!1}return!0}s(qse,"_checkPrototype");function _8(w,k){return Te(w,vf)?w.name||k||b8:((w||{})[E1]||{}).name||k||b8}s(_8,"_getObjName");function Uw(w,k,N,$){Te(w,vf)||yx("theClass is an invalid class definition.");var de=w[vf];qse(de,k)||yx("["+_8(w)+"] not in hierarchy of ["+_8(k)+"]");var we=null;Te(de,WA)?we=de[WA]:(we=lx+_8(w,"_")+"$"+ek.n,ek.n++,de[WA]=we);var ke=Uw[ux],$e=!!ke[fx];$e&&$&&$[fx]!==void 0&&($e=!!$[fx]);var nt=tk(k),Et=w8(de,k,nt,$e);N(k,Et);var pr=!!I1&&!!ke[px];pr&&$&&(pr=!!$[px]),Use(de,we,k,nt,pr!==!1)}s(Uw,"dynamicProto"),Uw[ux]=ek.o;var cu=void 0,_a="",LU="Not dynamic - ",MU=/-([a-z])/g,qw=/([^\w\d_$])/g,S8=/^(\d+[\w\d_$])/;function R8(w){return!W(w)}s(R8,"isNotNullOrUndefined");function rk(w){var k=w;return k&&ie(k)&&(k=k[ax](MU,function(N,$){return $.toUpperCase()}),k=k[ax](qw,"_"),k=k[ax](S8,function(N,$){return"_"+$})),k}s(rk,"normalizeJsName");function FU(w,k){return w&&k?qr(w,k)!==-1:!1}s(FU,"strContains");function Gm(w){return w&&w.toISOString()||""}s(Gm,"toISOString");function $A(w){return Ae(w)?w[sx]:_a}s($A,"getExceptionName");function Hw(w){return function(){function k(){var N=this;w&&ct(w,function($,de){N[$]=de})}return s(k,"class_1"),k}()}s(Hw,"createClassFromInterface");var OU="console",nk="JSON",Hse="crypto",jA="msCrypto",Cx="msie",ai="trident/",vx=null,T1=null,Vm=null;function ik(){return typeof console!==Mse?console:D(OU)}s(ik,"getConsole");function fo(){return!!(typeof JSON===NU&&JSON||D(nk)!==null)}s(fo,"hasJSON");function Ex(){return fo()?JSON||D(nk):null}s(Ex,"getJSON");function ac(){return D(Hse)}s(ac,"getCrypto");function xx(){return D(jA)}s(xx,"getMsCrypto");function Ww(){var w=wt();if(w&&(w[DU]!==T1||vx===null)){T1=w[DU];var k=(T1||_a)[ox]();vx=FU(k,Cx)||FU(k,ai)}return vx}s(Ww,"isIE");function GA(w){return(Vm===null||w===!1)&&(Vm=lt()&&!!wt().sendBeacon),Vm}s(GA,"isBeaconsSupported");function $w(w,k){if(w)for(var N=0;N<w[hs];N++){var $=w[N];if($[sx]&&$[sx]===k)return $}return{}}s($w,"_getNamedValue");function ok(w){var k=Z();return k&&w?$w(k.querySelectorAll("meta"),w).content:null}s(ok,"findMetaTag");function jp(w){var k,N=y1();if(N){var $=N.getEntriesByType("navigation")||[];k=$w(($[hs]>0?$[0]:{}).serverTiming,w).description}return k}s(jp,"findNamedServerTiming");var bx=4294967296,R0=4294967295,Ix=123456789,VA=987654321,_l=!1,Tx=Ix,Gp=VA;function QU(w){w<0&&(w>>>=0),Tx=Ix+w&R0,Gp=VA-w&R0,_l=!0}s(QU,"_mwcSeed");function w1(){try{var w=ol()&2147483647;QU((Math.random()*bx^w)+w)}catch{}}s(w1,"_autoSeedMwc");function sk(w){return w>0?su(wx()/R0*(w+1))>>>0:0}s(sk,"randomValue");function wx(w){var k=0,N=ac()||xx();return N&&N.getRandomValues&&(k=N.getRandomValues(new Uint32Array(1))[0]&R0),k===0&&Ww()&&(_l||w1(),k=UU()&R0),k===0&&(k=su(bx*Math.random()|0)),w||(k>>>=0),k}s(wx,"random32");function UU(w){Gp=36969*(Gp&65535)+(Gp>>16)&R0,Tx=18e3*(Tx&65535)+(Tx>>16)&R0;var k=(Gp<<16)+(Tx&65535)>>>0&R0|0;return w||(k>>>=0),k}s(UU,"mwcRandom32");function _1(w){w===void 0&&(w=22);for(var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=wx()>>>0,$=0,de=_a;de[hs]<w;)$++,de+=k.charAt(N&63),N>>>=6,$===5&&(N=(wx()<<2&4294967295|N&3)>>>0,$=0);return de}s(_1,"newId");var Vp="3.3.6",ak="."+_1(6),S1=0;function zp(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(zp,"_canAcceptData");function ck(w,k){var N=k[w.id];if(!N){N={};try{zp(k)&&ue(k,w.id,{e:!1,v:N})}catch{}}return N}s(ck,"_getCache");function zm(w,k){return k===void 0&&(k=!1),rk(w+S1+++(k?"."+Vp:_a)+ak)}s(zm,"createUniqueNamespace");function Yp(w){var k={id:zm("_aiData-"+(w||_a)+"."+Vp),accept:s(function(N){return zp(N)},"accept"),get:s(function(N,$,de,we){var ke=N[k.id];return ke?ke[rk($)]:(we&&(ke=ck(k,N),ke[rk($)]=de),de)},"get"),kill:s(function(N,$){if(N&&N[$])try{delete N[$]}catch{}},"kill")};return k}s(Yp,"createElmNodeData");function zA(w){return w&&te(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(zA,"_isConfigDefaults");function lk(w,k,N){var $,de=N.dfVal||J;if(k&&N.fb){var we=N.fb;pe(we)||(we=[we]);for(var ke=0;ke<we[hs];ke++){var $e=we[ke],nt=k[$e];if(de(nt)?$=nt:w&&(nt=w.cfg[$e],de(nt)&&($=nt),w.set(w.cfg,We($e),nt)),de($))break}}return!de($)&&de(N.v)&&($=N.v),$}s(lk,"_getDefault");function YA(w,k,N){var $=N;if(N&&zA(N)&&($=lk(w,k,N)),$){zA($)&&($=YA(w,k,$));var de;pe($)?(de=[],de[hs]=$[hs]):wl($)&&(de={}),de&&(ct($,function(we,ke){ke&&zA(ke)&&(ke=YA(w,k,ke)),de[we]=ke}),$=de)}return $}s(YA,"_resolveDefaultValue");function KA(w,k,N,$){var de,we,ke,$e=$,nt,Et,pr,Bn;zA($e)?(de=$e.isVal,we=$e.set,pr=$e.rdOnly,Bn=$e.blkVal,nt=$e.mrg,Et=$e.ref,!Et&&K(Et)&&(Et=!!nt),ke=lk(w,k,$e)):ke=$,Bn&&w.blkVal(k,N);var Xn,Cr=!0,Dr=k[N];(Dr||!W(Dr))&&(Xn=Dr,Cr=!1,de&&Xn!==ke&&!de(Xn)&&(Xn=ke,Cr=!0),we&&(Xn=we(Xn,ke,k),Cr=Xn===ke)),Cr?ke?Xn=YA(w,k,ke):Xn=ke:(wl(Xn)||pe(ke))&&nt&&ke&&(wl(ke)||pe(ke))&&ct(ke,function(Vn,Nn){KA(w,Xn,Vn,Nn)}),w.set(k,N,Xn),Et&&w.ref(k,N),pr&&w.rdOnly(k,N)}s(KA,"_applyDefaultValue");var lu=si("[[ai_dynCfg_1]]"),k8=si("[[ai_blkDynCfg_1]]"),jw=si("[[ai_frcDynCfg_1]]");function P8(w){if(w){var k;if(pe(w)?(k=[],k[hs]=w[hs]):wl(w)&&(k={}),k)return ct(w,function(N,$){k[N]=P8($)}),k}return w}s(P8,"_cfgDeepCopy");function D8(w){if(w){var k=w[lu]||w;if(k.cfg&&(k.cfg===w||k.cfg[lu]===k))return k}return null}s(D8,"getDynamicConfigHandler");function _x(w){if(w&&(wl(w)||pe(w)))try{w[k8]=!0}catch{}return w}s(_x,"blockDynamicConversion");function JA(w,k,N){var $=!1;return N&&!w[k.blkVal]&&($=N[jw],!$&&!N[k8]&&($=wl(N)||pe(N))),$}s(JA,"_canMakeDynamic");function k0(w){Be("InvalidAccess:"+w)}s(k0,"throwInvalidAccess");var qU=["push","pop","shift","unshift","splice"],Ym=s(function(w,k,N,$){w&&w[QA](3,108,"".concat(N," [").concat(k,"] failed - ")+le($))},"_throwDynamicError");function B8(w,k,N){pe(k)&&En(qU,function($){var de=k[$];k[$]=function(){for(var we=[],ke=0;ke<arguments.length;ke++)we[ke]=arguments[ke];var $e=de[h8](this,we);return R1(w,k,N,"Patching"),$e}})}s(B8,"_patchArray");function Km(w,k){var N=Oe(w,k);return N&&N.get}s(Km,"_getOwnPropGetter");function HU(w,k,N,$){var de={n:N,h:[],trk:s(function(Et){Et&&Et.fn&&(so(de.h,Et)===-1&&de.h[zi](Et),w.trk(Et,de))},"trk"),clr:s(function(Et){var pr=so(de.h,Et);pr!==-1&&de.h[UA](pr,1)},"clr")},we=!0,ke=!1;function $e(){we&&(ke=ke||JA($e,w,$),$&&!$[lu]&&ke&&($=R1(w,$,N,"Converting")),we=!1);var Et=w.act;return Et&&de.trk(Et),$}s($e,"_getProperty"),$e[w.prop]={chng:s(function(){w.add(de)},"chng")};function nt(Et){if($!==Et){$e[w.ro]&&!w.upd&&k0("["+N+"] is read-only:"+le(k)),we&&(ke=ke||JA($e,w,$),we=!1);var pr=ke&&$e[w.rf];if(ke)if(pr){ct($,function(Xn){$[Xn]=Et?Et[Xn]:cu});try{ct(Et,function(Xn,Cr){Sx(w,$,Xn,Cr)}),Et=$}catch(Xn){Ym((w.hdlr||{})[Wm],N,"Assigning",Xn),ke=!1}}else $&&$[lu]&&ct($,function(Xn){var Cr=Km($,Xn);if(Cr){var Dr=Cr[w.prop];Dr&&Dr.chng()}});if(Et!==$){var Bn=Et&&JA($e,w,Et);!pr&&Bn&&(Et=R1(w,Et,N,"Converting")),$=Et,ke=Bn}w.add(de)}}s(nt,"_setProperty"),ue(k,de.n,{g:$e,s:nt})}s(HU,"_createDynamicProperty");function Sx(w,k,N,$){if(k){var de=Km(k,N),we=de&&!!de[w.prop];we?k[N]=$:HU(w,k,N,$)}return k}s(Sx,"_setDynamicProperty");function N8(w,k,N,$){if(k){var de=Km(k,N),we=de&&!!de[w.prop],ke=$&&$[0],$e=$&&$[1],nt=$&&$[2];if(!we){if(nt)try{_x(k)}catch(Et){Ym((w.hdlr||{})[Wm],N,"Blocking",Et)}try{Sx(w,k,N,k[N]),de=Km(k,N)}catch(Et){Ym((w.hdlr||{})[Wm],N,"State",Et)}}ke&&(de[w.rf]=ke),$e&&(de[w.ro]=$e),nt&&(de[w.blkVal]=!0)}return k}s(N8,"_setDynamicPropertyState");function R1(w,k,N,$){try{ct(k,function(de,we){Sx(w,k,de,we)}),k[lu]||(mt(k,lu,{get:s(function(){return w.hdlr},"get")}),B8(w,k,N))}catch(de){Ym((w.hdlr||{})[Wm],N,$,de)}return k}s(R1,"_makeDynamicObject");var k1="[[ai_",xf="]]";function WU(w){var k=mr(k1+"get"+w.uid+xf),N=mr(k1+"ro"+w.uid+xf),$=mr(k1+"rf"+w.uid+xf),de=mr(k1+"blkVal"+w.uid+xf),we=mr(k1+"dtl"+w.uid+xf),ke=null,$e=null,nt;function Et(Cr,Dr){var Vn=nt.act;try{nt.act=Cr,Cr&&Cr[we]&&(En(Cr[we],function(ki){ki.clr(Cr)}),Cr[we]=[]),Dr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(ki){var Nn=w[Wm];throw Nn&&Nn[QA](1,107,le(ki)),ki}finally{nt.act=Vn||null}}s(Et,"_useHandler");function pr(){if(ke){var Cr=ke;ke=null,$e&&$e[$5](),$e=null;var Dr=[];if(En(Cr,function(Vn){if(Vn&&(Vn[we]&&(En(Vn[we],function(Nn){Nn.clr(Vn)}),Vn[we]=null),Vn.fn))try{Et(Vn,Vn.fn)}catch(Nn){Dr[zi](Nn)}}),ke)try{pr()}catch(Vn){Dr[zi](Vn)}Dr[hs]>0&&Nse("Watcher error(s): ",Dr)}}s(pr,"_notifyWatchers");function Bn(Cr){if(Cr&&Cr.h[hs]>0){ke||(ke=[]),$e||($e=C1(function(){$e=null,pr()},0));for(var Dr=0;Dr<Cr.h[hs];Dr++){var Vn=Cr.h[Dr];Vn&&so(ke,Vn)===-1&&ke[zi](Vn)}}}s(Bn,"_addWatcher");function Xn(Cr,Dr){if(Cr){var Vn=Cr[we]=Cr[we]||[];so(Vn,Dr)===-1&&Vn[zi](Dr)}}return s(Xn,"_trackHandler"),nt={prop:k,ro:N,rf:$,blkVal:de,hdlr:w,add:Bn,notify:pr,use:Et,trk:Xn},nt}s(WU,"_createState");function Wse(w,k){var N={fn:k,rm:s(function(){N.fn=null,w=null,k=null},"rm")};return ue(N,"toJSON",{v:s(function(){return"WatcherHandler"+(N.fn?"":"[X]")},"v")}),w.use(N,k),N}s(Wse,"_createAndUseHandler");function $U(w,k,N){var $=D8(k);if($)return $;var de=zm("dyncfg",!0),we=k&&N!==!1?k:P8(k),ke;function $e(){ke.notify()}s($e,"_notifyWatchers");function nt(Nn,ki,Ro){try{Nn=Sx(ke,Nn,ki,Ro)}catch(Yi){Ym(w,ki,"Setting value",Yi)}return Nn[ki]}s(nt,"_setValue");function Et(Nn){return Wse(ke,Nn)}s(Et,"_watch");function pr(Nn,ki){ke.use(null,function(Ro){var Yi=ke.upd;try{K(ki)||(ke.upd=ki),Nn(Ro)}finally{ke.upd=Yi}})}s(pr,"_block");function Bn(Nn,ki){var Ro;return N8(ke,Nn,ki,(Ro={},Ro[0]=!0,Ro))[ki]}s(Bn,"_ref");function Xn(Nn,ki){var Ro;return N8(ke,Nn,ki,(Ro={},Ro[1]=!0,Ro))[ki]}s(Xn,"_rdOnly");function Cr(Nn,ki){var Ro;return N8(ke,Nn,ki,(Ro={},Ro[2]=!0,Ro))[ki]}s(Cr,"_blkPropValue");function Dr(Nn,ki){return ki&&ct(ki,function(Ro,Yi){KA(Vn,Nn,Ro,Yi)}),Nn}s(Dr,"_applyDefaults");var Vn={uid:null,cfg:we,logger:w,notify:$e,set:nt,setDf:Dr,watch:Et,ref:Bn,rdOnly:Xn,blkVal:Cr,_block:pr};return ue(Vn,"uid",{c:!1,e:!1,w:!1,v:de}),ke=WU(Vn),R1(ke,we,"config","Creating"),Vn}s($U,"_createDynamicHandler");function jU(w,k){w?(w[zu](k),w[QA](2,108,k)):k0(k)}s(jU,"_logInvalidAccess");function Gw(w,k,N,$){var de=$U(N,w||{},$);return k&&de.setDf(de.cfg,k),de}s(Gw,"createDynamicConfig");function GU(w,k,N){var $=w[lu]||w;return $.cfg&&($.cfg===w||$.cfg[lu]===$)?$[W5](k):(jU(N,LU+le(w)),Gw(w,null,N)[W5](k))}s(GU,"onConfigChange");var uk=null;function VU(){var w=D("Microsoft");return w&&(uk=w.ApplicationInsights),uk}s(VU,"_getExtensionNamespace");function $se(w){var k=uk;return!k&&w.disableDbgExt!==!0&&(k=uk||VU()),k?k.ChromeDbgExt:null}s($se,"getDebugExt");var Rx,dk="warnToConsole",zU="AI (Internal): ",YU="AI: ",jse="AITR_",Gse={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},KU=(Rx={},Rx[0]=null,Rx[1]="errorToConsole",Rx[2]=dk,Rx[3]="debugToConsole",Rx);function JU(w){return w?'"'+w[ax](/\"/g,_a)+'"':_a}s(JU,"_sanitizeDiagnosticText");function fk(w,k){var N=ik();if(N){var $="log";N[w]&&($=w),ae(N[$])&&N[$](k)}}s(fk,"_logToConsole");var pk=function(){function w(k,N,$,de){$===void 0&&($=!1);var we=this;we[A8]=k,we[v1]=($?YU:zU)+k;var ke=_a;fo()&&(ke=Ex().stringify(de));var $e=(N?" message:"+JU(N):_a)+(de?" props:"+JU(ke):_a);we[v1]+=$e}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function Vse(w,k){return(w||{})[Wm]||new hk(k)}s(Vse,"safeGetLogger");var hk=function(){function w(k){this.identifier="DiagnosticLogger",this.queue=[];var N=0,$={},de,we,ke,$e,nt;Uw(w,this,function(Et){nt=Bn(k||{}),Et.consoleLoggingLevel=function(){return de},Et[QA]=function(Dr,Vn,Nn,ki,Ro){Ro===void 0&&(Ro=!1);var Yi=new pk(Vn,Nn,Ro,ki);if($e)throw le(Yi);var kc=KU[Dr]||dk;if(K(Yi[v1]))Cr("throw"+(Dr===1?"Critical":"Warning"),Yi);else{if(Ro){var sb=+Yi[A8];!$[sb]&&de>=Dr&&(Et[kc](Yi[v1]),$[sb]=!0)}else de>=Dr&&Et[kc](Yi[v1]);pr(Dr,Yi)}},Et.debugToConsole=function(Dr){fk("debug",Dr),Cr("warning",Dr)},Et[zu]=function(Dr){fk("warn",Dr),Cr("warning",Dr)},Et.errorToConsole=function(Dr){fk("error",Dr),Cr("error",Dr)},Et.resetInternalMessageCount=function(){N=0,$={}},Et.logInternalMessage=pr,Et[Yu]=function(Dr){nt&&nt.rm(),nt=null};function pr(Dr,Vn){if(!Xn()){var Nn=!0,ki=jse+Vn[A8];if($[ki]?Nn=!1:$[ki]=!0,Nn&&(Dr<=we&&(Et.queue[zi](Vn),N++,Cr(Dr===1?"error":"warn",Vn)),N===ke)){var Ro="Internal events throttle limit per PageView reached for this app.",Yi=new pk(23,Ro,!1);Et.queue[zi](Yi),Dr===1?Et.errorToConsole(Ro):Et[zu](Ro)}}}s(pr,"_logInternalMessage");function Bn(Dr){return GU(Gw(Dr,Gse,Et).cfg,function(Vn){var Nn=Vn.cfg;de=Nn[g8],we=Nn.loggingLevelTelemetry,ke=Nn.maxMessageLimit,$e=Nn.enableDebug})}s(Bn,"_setDefaultsFromConfig");function Xn(){return N>=ke}s(Xn,"_areInternalMessagesThrottled");function Cr(Dr,Vn){var Nn=$se(k||{});Nn&&Nn[y8]&&Nn[y8](Dr,Vn)}s(Cr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function mk(w){return w||new hk}s(mk,"_getLogger");function Bd(w,k,N,$,de,we){we===void 0&&(we=!1),mk(w)[QA](k,N,$,de,we)}s(Bd,"_throwInternal");function gk(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],k=_a,N,$=0;$<4;$++)N=wx(),k+=w[N&15]+w[N>>4&15]+w[N>>8&15]+w[N>>12&15]+w[N>>16&15]+w[N>>20&15]+w[N>>24&15]+w[N>>28&15];var de=w[8+(wx()&3)|0];return tr(k,0,8)+tr(k,9,4)+"4"+tr(k,13,3)+de+tr(k,16,3)+tr(k,19,12)}s(gk,"generateW3CId");var kx=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,L8="00",bf="ff",Ri="00000000000000000000000000000000",Jm="0000000000000000",cc=1;function P0(w,k,N){return w&&w[hs]===k&&w!==N?!!w.match(/^[\da-f]*$/i):!1}s(P0,"_isValid");function Ak(w,k,N){return P0(w,k)?w:N}s(Ak,"_formatValue");function P1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var k=w.toString(16);k[hs]<2;)k="0"+k;return k}s(P1,"_formatFlags");function Px(w,k,N,$){return{version:P0($,2,bf)?$:L8,traceId:Dx(w)?w:gk(),spanId:Bx(k)?k:Ur(gk(),16),traceFlags:N>=0&&N<=255?N:1}}s(Px,"createTraceParent");function If(w,k){if(!w||(pe(w)&&(w=w[0]||""),!w||!ie(w)||w[hs]>8192))return null;if(w.indexOf(",")!==-1){var N=w[C8](",");w=N[k>0&&N[hs]>k?k:0]}var $=kx.exec(wa(w));return!$||$[1]===bf||$[2]===Ri||$[3]===Jm?null:{version:($[1]||_a)[ox](),traceId:($[2]||_a)[ox](),spanId:($[3]||_a)[ox](),traceFlags:parseInt($[4],16)}}s(If,"parseTraceParent");function Dx(w){return P0(w,32,Ri)}s(Dx,"isValidTraceId");function Bx(w){return P0(w,16,Jm)}s(Bx,"isValidSpanId");function Nx(w){return!(!w||!P0(w[m8],2,bf)||!P0(w.traceId,32,Ri)||!P0(w.spanId,16,Jm)||!P0(P1(w[j5]),2))}s(Nx,"isValidTraceParent");function yk(w){return Nx(w)?(w[j5]&cc)===cc:!1}s(yk,"isSampledFlag");function D1(w){if(w){var k=P1(w[j5]);P0(k,2)||(k="01");var N=w[m8]||L8;return N!=="00"&&N!=="ff"&&(N=L8),"".concat(N.toLowerCase(),"-").concat(Ak(w.traceId,32,Ri).toLowerCase(),"-").concat(Ak(w.spanId,16,Jm).toLowerCase(),"-").concat(k.toLowerCase())}return""}s(D1,"formatTraceParent");function M8(w){var k="traceparent",N=If(ok(k),w);return N||(N=If(jp(k),w)),N}s(M8,"findW3cTraceParent");function F8(w){var k=w.getElementsByTagName("script"),N=[];return En(k,function($){var de=$[v8]("src");if(de){var we=$[v8]("crossorigin"),ke=$.hasAttribute("async")===!0,$e=$.hasAttribute("defer")===!0,nt=$[v8]("referrerpolicy"),Et={url:de};we&&(Et.crossOrigin=we),ke&&(Et.async=ke),$e&&(Et.defer=$e),nt&&(Et.referrerPolicy=nt),N[zi](Et)}}),N}s(F8,"findAllScripts");var Ck="on",Vw="attachEvent",vk="addEventListener",Ek="detachEvent",XU="removeEventListener",O8="events";zm("aiEvtPageHide"),zm("aiEvtPageShow");var zse=/\.[\.]+/g,Yse=/[\.]+$/,xk=1,Lx=Yp("events"),Sl=/^([^.]*)(?:\.(.+)|)/;function zw(w){return w&&w[ax]?w[ax](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_a):w}s(zw,"_normalizeNamespace");function sl(w,k){if(k){var N=_a;pe(k)?(N=_a,En(k,function(de){de=zw(de),de&&(de[0]!=="."&&(de="."+de),N+=de)})):N=zw(k),N&&(N[0]!=="."&&(N="."+N),w=(w||_a)+N)}var $=Sl.exec(w||_a)||[];return{type:$[1],ns:($[2]||_a).replace(zse,".").replace(Yse,_a)[C8](".").sort().join(".")}}s(sl,"_getEvtNamespace");function XA(w,k,N){N===void 0&&(N=!0);var $=Lx.get(w,O8,{},N),de=$[k];return de||(de=$[k]=[]),de}s(XA,"_getRegisteredEvents");function ZU(w,k,N,$){w&&k&&k[qA]&&(w[XU]?w[XU](k[qA],N,$):w[Ek]&&w[Ek](Ck+k[qA],N))}s(ZU,"_doDetach");function Kse(w,k,N,$){var de=!1;return w&&k&&k[qA]&&N&&(w[vk]?(w[vk](k[qA],N,$),de=!0):w[Vw]&&(w[Vw](Ck+k[qA],N),de=!0)),de}s(Kse,"_doAttach");function Yw(w,k,N,$){for(var de=k[hs];de--;){var we=k[de];we&&(!N.ns||N.ns===we[BU].ns)&&(!$||$(we))&&(ZU(w,we[BU],we.handler,we.capture),k[UA](de,1))}}s(Yw,"_doUnregister");function Q8(w,k,N){if(k[qA])Yw(w,XA(w,k[qA]),k,N);else{var $=Lx.get(w,O8,{});ct($,function(de,we){Yw(w,we,k,N)}),Lt($)[hs]===0&&Lx.kill(w,O8)}}s(Q8,"_unregisterEvents");function Jse(w,k){var N;return k?(pe(k)?N=[w].concat(k):N=[w,k],N=sl("xx",N).ns[C8](".")):N=w,N}s(Jse,"mergeEvtNamespace");function U8(w,k,N,$,de){de===void 0&&(de=!1);var we=!1;if(w)try{var ke=sl(k,$);if(we=Kse(w,ke,N,de),we&&Lx.accept(w)){var $e={guid:xk++,evtName:ke,handler:N,capture:de};XA(w,ke.type)[zi]($e)}}catch{}return we}s(U8,"eventOn");function eq(w,k,N,$,de){if(de===void 0&&(de=!1),w)try{var we=sl(k,$),ke=!1;Q8(w,we,function($e){return we.ns&&!N||$e.handler===N?(ke=!0,!0):!1}),ke||ZU(w,we,N,de)}catch{}}s(eq,"eventOff");var bk="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",tq="sampleRate",Ik="ProcessLegacy",rq="http.method",q8="https://dc.services.visualstudio.com",Kw="/v2/track",Kp="not_specified",H8="iKey",nq=OA({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),ZA="split",Dn="length",Mx="toLowerCase",B1="ingestionendpoint",N1="toString",W8="removeItem",Jw="message",Fx="count",Tk="preTriggerDate",$8="getUTCDate",wk="stringify",Ox="pathname",L1="match",j8="correlationHeaderExcludePatterns",Tf="name",Qx="extensionConfig",Jp="properties",Ku="measurements",Ux="sizeInBytes",Xw="typeName",qx="exceptions",Zw="severityLevel",Hx="problemGroup",Nd="parsedStack",_k="hasFullStack",Sk="assembly",D0="fileName",Wx="line",ey="aiDataContract",e_="duration";function G8(w,k,N){var $=k[Dn],de=V8(w,k);if(de[Dn]!==$){for(var we=0,ke=de;N[ke]!==void 0;)we++,ke=sr(de,0,147)+iq(we);de=ke}return de}s(G8,"dataSanitizeKeyAndAddUniqueness");function V8(w,k){var N;return k&&(k=wa(We(k)),k[Dn]>150&&(N=sr(k,0,150),Bd(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:k},!0))),N||k}s(V8,"dataSanitizeKey");function al(w,k,N){N===void 0&&(N=1024);var $;return k&&(N=N||1024,k=wa(We(k)),k[Dn]>N&&($=sr(k,0,N),Bd(w,2,61,"string value is too long. It has been truncated to "+N+" characters.",{value:k},!0))),$||k}s(al,"dataSanitizeString");function Xp(w,k){return Y8(w,k,2048,66)}s(Xp,"dataSanitizeUrl");function Rk(w,k){var N;return k&&k[Dn]>32768&&(N=sr(k,0,32768),Bd(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:k},!0)),N||k}s(Rk,"dataSanitizeMessage");function z8(w,k){var N;if(k){var $=""+k;$[Dn]>32768&&(N=sr($,0,32768),Bd(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:k},!0))}return N||k}s(z8,"dataSanitizeException");function Xm(w,k){if(k){var N={};ct(k,function($,de){if(te(de)&&fo())try{de=Ex()[wk](de)}catch(we){Bd(w,2,49,"custom property is not valid",{exception:we},!0)}de=al(w,de,8192),$=G8(w,$,N),N[$]=de}),k=N}return k}s(Xm,"dataSanitizeProperties");function wf(w,k){if(k){var N={};ct(k,function($,de){$=G8(w,$,N),N[$]=de}),k=N}return k}s(wf,"dataSanitizeMeasurements");function $x(w,k){return k&&Y8(w,k,128,69)[N1]()}s($x,"dataSanitizeId");function Y8(w,k,N,$){var de;return k&&(k=wa(We(k)),k[Dn]>N&&(de=sr(k,0,N),Bd(w,2,$,"input is too long, it has been truncated to "+N+" characters.",{data:k},!0))),de||k}s(Y8,"dataSanitizeInput");function iq(w){var k="00"+w;return tr(k,k[Dn]-3)}s(iq,"dsPadNumber");var K8=Z()||{},oq=0,Xse=[null,null,null,null,null];function jx(w){var k=oq,N=Xse,$=N[k];return K8.createElement?N[k]||($=N[k]=K8.createElement("a")):$={host:aq(w,!0)},$.href=w,k++,k>=N[Dn]&&(k=0),oq=k,$}s(jx,"urlParseUrl");function Zse(w){var k,N=jx(w);return N&&(k=N.href),k}s(Zse,"urlGetAbsoluteUrl");function eae(w){var k,N=jx(w);return N&&(k=N[Ox]),k}s(eae,"urlGetPathName");function sq(w,k){return w?w.toUpperCase()+" "+k:k}s(sq,"urlGetCompleteUrl");function aq(w,k){var N=Zm(w,k)||"";if(N){var $=N[L1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[Dn]>3&&ie($[2])&&$[2][Dn]>0)return $[2]+($[3]||"")}return N}s(aq,"urlParseHost");function Zm(w,k){var N=null;if(w){var $=w[L1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if($!=null&&$[Dn]>2&&ie($[2])&&$[2][Dn]>0&&(N=$[2]||"",k&&$[Dn]>2)){var de=($[1]||"")[Mx](),we=$[3]||"";(de==="http"&&we===":80"||de==="https"&&we===":443")&&(we=""),N+=we}}return N}s(Zm,"urlParseFullHost");var cq=[q8+Kw,"https://breeze.aimon.applicationinsights.io"+Kw,"https://dc-int.services.visualstudio.com"+Kw],Gx="cid-v1:";function lq(w){return so(cq,w[Mx]())!==-1}s(lq,"isInternalApplicationInsightsEndpoint");function J8(w){Gx=w}s(J8,"correlationIdSetPrefix");function X8(){return Gx}s(X8,"correlationIdGetPrefix");function ty(w,k,N){if(!k||w&&w.disableCorrelationHeaders)return!1;if(w&&w[j8]){for(var $=0;$<w.correlationHeaderExcludePatterns[Dn];$++)if(w[j8][$].test(k))return!1}var de=jx(k).host[Mx]();if(de&&(qr(de,":443")!==-1||qr(de,":80")!==-1)&&(de=(Zm(k,!0)||"")[Mx]()),(!w||!w.enableCorsCorrelation)&&de&&de!==N)return!1;var we=w&&w.correlationHeaderDomains;if(we){var ke;if(En(we,function(Et){var pr=new RegExp(Et.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));ke=ke||pr.test(de)}),!ke)return!1}var $e=w&&w.correlationHeaderExcludedDomains;if(!$e||$e[Dn]===0)return!0;for(var $=0;$<$e[Dn];$++){var nt=new RegExp($e[$].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(nt.test(de))return!1}return de&&de[Dn]>0}s(ty,"correlationIdCanIncludeCorrelationHeader");function uq(w){if(w){var k=dq(w,nq[1]);if(k&&k!==Gx)return k}}s(uq,"correlationIdGetCorrelationContext");function dq(w,k){if(w)for(var N=w[ZA](","),$=0;$<N[Dn];++$){var de=N[$][ZA]("=");if(de[Dn]===2&&de[0]===k)return de[1]}}s(dq,"correlationIdGetCorrelationContextValue");function fq(w,k,N,$){var de,we=$,ke=$;if(k&&k[Dn]>0){var $e=jx(k);if(de=$e.host,!we)if($e[Ox]!=null){var nt=$e.pathname[Dn]===0?"/":$e[Ox];nt.charAt(0)!=="/"&&(nt="/"+nt),ke=$e[Ox],we=al(w,N?N+" "+nt:nt)}else we=al(w,k)}else de=$,we=$;return{target:de,name:we,data:ke}}s(fq,"AjaxHelperParseDependencyPath");function tae(){var w=y1();if(w&&w.now&&w.timing){var k=w.now()+w.timing.navigationStart;if(k>0)return k}return ol()}s(tae,"dateTimeUtilsNow");function rae(w,k){var N=null;return w!==0&&k!==0&&!W(w)&&!W(k)&&(N=k-w),N}s(rae,"dateTimeUtilsDuration");function Z8(w,k){var N=w||{};return{getName:s(function(){return N[Tf]},"getName"),setName:s(function($){k&&k.setName($),N[Tf]=$},"setName"),getTraceId:s(function(){return N.traceID},"getTraceId"),setTraceId:s(function($){k&&k.setTraceId($),Dx($)&&(N.traceID=$)},"setTraceId"),getSpanId:s(function(){return N.parentID},"getSpanId"),setSpanId:s(function($){k&&k.setSpanId($),Bx($)&&(N.parentID=$)},"setSpanId"),getTraceFlags:s(function(){return N.traceFlags},"getTraceFlags"),setTraceFlags:s(function($){k&&k.setTraceFlags($),N.traceFlags=$},"setTraceFlags")}}s(Z8,"createDistributedTraceContextFromTrace");var Vx=Wp({LocalStorage:0,SessionStorage:1}),nae=Wp({AI:0,AI_AND_W3C:1,W3C:2}),t_=Wp({Normal:1,Critical:2}),ry=void 0,B0=void 0,pq="";function zx(){return kk()?Yx(Vx.LocalStorage):null}s(zx,"_getLocalStorageObject");function Yx(w){try{if(W(M()))return null;var k=new Date()[N1](),N=D(w===Vx.LocalStorage?"localStorage":"sessionStorage"),$=pq+k;N.setItem($,k);var de=N.getItem($)!==k;if(N[W8]($),!de)return N}catch{}return null}s(Yx,"_getVerifiedStorageObject");function Kx(){return eg()?Yx(Vx.SessionStorage):null}s(Kx,"_getSessionStorageObject");function r_(){ry=!1,B0=!1}s(r_,"utlDisableStorage");function n_(w){pq=w||""}s(n_,"utlSetStoragePrefix");function iae(){ry=kk(!0),B0=eg(!0)}s(iae,"utlEnableStorage");function kk(w){return(w||ry===void 0)&&(ry=!!Yx(Vx.LocalStorage)),ry}s(kk,"utlCanUseLocalStorage");function hq(w,k){var N=zx();if(N!==null)try{return N.getItem(k)}catch($){ry=!1,Bd(w,2,1,"Browser failed read of local storage. "+$A($),{exception:le($)})}return null}s(hq,"utlGetLocalStorage");function mq(w,k,N){var $=zx();if($!==null)try{return $.setItem(k,N),!0}catch(de){ry=!1,Bd(w,2,3,"Browser failed write to local storage. "+$A(de),{exception:le(de)})}return!1}s(mq,"utlSetLocalStorage");function _f(w,k){var N=zx();if(N!==null)try{return N[W8](k),!0}catch($){ry=!1,Bd(w,2,5,"Browser failed removal of local storage item. "+$A($),{exception:le($)})}return!1}s(_f,"utlRemoveStorage");function eg(w){return(w||B0===void 0)&&(B0=!!Yx(Vx.SessionStorage)),B0}s(eg,"utlCanUseSessionStorage");function Jx(){var w=[];return eg()&&ct(D("sessionStorage"),function(k){w.push(k)}),w}s(Jx,"utlGetSessionStorageKeys");function gq(w,k){var N=Kx();if(N!==null)try{return N.getItem(k)}catch($){B0=!1,Bd(w,2,2,"Browser failed read of session storage. "+$A($),{exception:le($)})}return null}s(gq,"utlGetSessionStorage");function oae(w,k,N){var $=Kx();if($!==null)try{return $.setItem(k,N),!0}catch(de){B0=!1,Bd(w,2,4,"Browser failed write to session storage. "+$A(de),{exception:le(de)})}return!1}s(oae,"utlSetSessionStorage");function Aq(w,k){var N=Kx();if(N!==null)try{return N[W8](k),!0}catch($){B0=!1,Bd(w,2,6,"Browser failed removal of session storage item. "+$A($),{exception:le($)})}return!1}s(Aq,"utlRemoveSessionStorage");var sae="appInsightsThrottle",aae=function(){function w(k,N){var $=this,de,we,ke,$e,nt,Et,pr,Bn=!1,Xn=!1;Dr(),$._getDbgPlgTargets=function(){return[pr]},$.getConfig=function(){return ke},$.canThrottle=function(Dt){var Hr=p9(Dt),mn=Vn(Dt);return Ro(mn,de,Hr)},$.isTriggered=function(Dt){return Nq(Dt)},$.isReady=function(){return Bn},$.flush=function(Dt){try{var Hr=Lq(Dt);if(Hr&&Hr[Dn]>0){var mn=Hr.slice(0);return pr[Dt]=[],En(mn,function(ss){Cr(ss.msgID,ss[Jw],ss.severity,!1)}),!0}}catch{}return!1},$.flushAll=function(){try{if(pr){var Dt=!0;return ct(pr,function(Hr){var mn=$.flush(parseInt(Hr));Dt=Dt&&mn}),Dt}}catch{}return!1},$.onReadyState=function(Dt,Hr){return Hr===void 0&&(Hr=!0),Bn=W(Dt)?!0:Dt,Bn&&Hr?$.flushAll():null},$.sendMessage=function(Dt,Hr,mn){return Cr(Dt,Hr,mn,!0)};function Cr(Dt,Hr,mn,ss){if(Bn){var Pc=Tae(Dt);if(!Pc)return;var Sa=Vn(Dt),Dc=p9(Dt),F1=Ro(Sa,de,Dc),ay=!1,ab=0,Mq=Nq(Dt);try{F1&&!Mq?(ab=xr(Sa.limit.maxSendNumber,Dc[Fx]+1),Dc[Fx]=0,ay=!0,nt[Dt]=!0,Dc[Tk]=new Date):(nt[Dt]=F1,Dc[Fx]+=1);var Fq=Yi(Dt);f9(we,Fq,Dc);for(var $k=0;$k<ab;$k++)Bq(Dt,we,Hr,mn)}catch{}return{isThrottled:ay,throttleNum:ab}}else if(ss){var wae=Lq(Dt);wae.push({msgID:Dt,message:Hr,severity:mn})}return null}s(Cr,"_flushMessage");function Dr(){we=Vse(k),nt={},$e={},pr={},ke={},Nn(109),Et=R8(N)?N:"",k.addUnloadHook(GU(k.config,function(Dt){var Hr=Dt.cfg;de=kk();var mn=Hr.throttleMgrCfg||{};ct(mn,function(ss,Pc){Nn(parseInt(ss),Pc)})}))}s(Dr,"_initConfig");function Vn(Dt){return ke[Dt]||ke[109]}s(Vn,"_getCfgByKey");function Nn(Dt,Hr){var mn,ss;try{var Pc=Hr||{},Sa={};Sa.disabled=!!Pc.disabled;var Dc=Pc.interval||{};Xn=Dc?.daysOfMonth&&Dc?.daysOfMonth[Dn]>0,Sa.interval=ki(Dc);var F1={samplingRate:((mn=Pc.limit)===null||mn===void 0?void 0:mn.samplingRate)||100,maxSendNumber:((ss=Pc.limit)===null||ss===void 0?void 0:ss.maxSendNumber)||1};Sa.limit=F1,ke[Dt]=Sa}catch{}}s(Nn,"_setCfgByKey");function ki(Dt){Dt=Dt||{};var Hr=Dt?.monthInterval,mn=Dt?.dayInterval;return W(Hr)&&W(mn)&&(Dt.monthInterval=3,Xn||(Dt.daysOfMonth=[28],Xn=!0)),Dt={monthInterval:Dt?.monthInterval,dayInterval:Dt?.dayInterval,daysOfMonth:Dt?.daysOfMonth},Dt}s(ki,"_getIntervalConfig");function Ro(Dt,Hr,mn){if(Dt&&!Dt.disabled&&Hr&&R8(mn)){var ss=d_(),Pc=mn.date,Sa=Dt.interval,Dc=1;if(Sa?.monthInterval){var F1=(ss.getUTCFullYear()-Pc.getUTCFullYear())*12+ss.getUTCMonth()-Pc.getUTCMonth();Dc=Wk(Sa.monthInterval,0,F1)}var ay=1;if(Xn)ay=so(Sa.daysOfMonth,ss[$8]());else if(Sa?.dayInterval){var ab=su((ss.getTime()-Pc.getTime())/864e5);ay=Wk(Sa.dayInterval,0,ab)}return Dc>=0&&ay>=0}return!1}s(Ro,"_canThrottle");function Yi(Dt,Hr){var mn=R8(Hr)?Hr:"";return Dt?sae+mn+"-"+Dt:null}s(Yi,"_getLocalStorageName");function kc(Dt){try{if(Dt){var Hr=new Date;return Dt.getUTCFullYear()===Hr.getUTCFullYear()&&Dt.getUTCMonth()===Hr.getUTCMonth()&&Dt[$8]()===Hr[$8]()}}catch{}return!1}s(kc,"_isTriggeredOnCurDate");function sb(Dt,Hr,mn){try{var ss={date:d_(),count:0};if(Dt){var Pc=JSON.parse(Dt),Sa={date:d_(Pc.date)||ss.date,count:Pc[Fx]||ss[Fx],preTriggerDate:Pc.preTriggerDate?d_(Pc[Tk]):void 0};return Sa}else return f9(Hr,mn,ss),ss}catch{}return null}s(sb,"_getLocalStorageObj");function d_(Dt){try{if(Dt){var Hr=new Date(Dt);if(!isNaN(Hr.getDate()))return Hr}else return new Date}catch{}return null}s(d_,"_getThrottleDate");function f9(Dt,Hr,mn){try{return mq(Dt,Hr,wa(JSON[wk](mn)))}catch{}return!1}s(f9,"_resetLocalStorage");function Wk(Dt,Hr,mn){return Dt<=0?1:mn>=Hr&&(mn-Hr)%Dt==0?su((mn-Hr)/Dt)+1:-1}s(Wk,"_checkInterval");function Bq(Dt,Hr,mn,ss){Bd(Hr,ss||1,Dt,mn)}s(Bq,"_sendMessage");function Tae(Dt){try{var Hr=Vn(Dt);return sk(1e6)<=Hr.limit.samplingRate}catch{}return!1}s(Tae,"_canSampledIn");function p9(Dt){try{var Hr=$e[Dt];if(!Hr){var mn=Yi(Dt,Et);Hr=sb(hq(we,mn),we,mn),$e[Dt]=Hr}return $e[Dt]}catch{}return null}s(p9,"_getLocalStorageObjByKey");function Nq(Dt){var Hr=nt[Dt];if(W(Hr)){Hr=!1;var mn=p9(Dt);mn&&(Hr=kc(mn[Tk])),nt[Dt]=Hr}return nt[Dt]}s(Nq,"_isTrigger");function Lq(Dt){return pr=pr||{},W(pr[Dt])&&(pr[Dt]=[]),pr[Dt]}s(Lq,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),e9=";",Zp="=";function Pk(w){if(!w)return{};var k=w[ZA](e9),N=jo(k,function(de,we){var ke=we[ZA](Zp);if(ke[Dn]===2){var $e=ke[0][Mx](),nt=ke[1];de[$e]=nt}return de},{});if(Lt(N)[Dn]>0){if(N.endpointsuffix){var $=N.location?N.location+".":"";N[B1]=N[B1]||"https://"+$+"dc."+N.endpointsuffix}N[B1]=N[B1]||q8,yf(N[B1],"/")&&(N[B1]=N[B1].slice(0,-1))}return N}s(Pk,"parseConnectionString");var Dk={parse:Pk},Bk=function(){function w(k,N,$){var de=this,we=this;we.ver=1,we.sampleRate=100,we.tags={},we[Tf]=al(k,$)||Kp,we.data=N,we.time=Gm(new Date),we[ey]={time:1,iKey:1,name:1,sampleRate:s(function(){return de.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),cae=function(){function w(k,N,$,de){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var we=this;we.ver=2,we[Tf]=al(k,N)||Kp,we[Jp]=Xm(k,$),we[Ku]=wf(k,de)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),lae=58,yq=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,uae=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Xx=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Cq=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,dae=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,fae=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,pae=/([^\(\s\n]+):([0-9]+)$/,vq="<no_method>",Zx="error",Ld="stack",i_="stackDetails",Nk="errorSrc",o_="message",s_="description",t9=[{re:uae,len:5,m:1,fn:2,ln:3,col:4},{chk:Lk,pre:Nr,re:Xx,len:4,m:1,fn:2,ln:3},{re:Cq,len:3,m:1,fn:2,hdl:n9},{re:dae,len:2,fn:1,hdl:n9}];function Nr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Nr,"_scrubAnonymous");function Lk(w){return qr(w,"[native")<0}s(Lk,"_ignoreNative");function a_(w,k){var N=w;return N&&!ie(N)&&(JSON&&JSON[wk]?(N=JSON[wk](w),k&&(!N||N==="{}")&&(ae(w[N1])?N=w[N1]():N=""+w)):N=""+w+" - (Missing JSON.stringify)"),N||""}s(a_,"_stringify");function ny(w,k){var N=w;return w&&(N&&!ie(N)&&(N=w[o_]||w[s_]||N),N&&!ie(N)&&(N=a_(N,!0)),w.filename&&(N=N+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),k&&k!=="String"&&k!=="Object"&&k!=="Error"&&qr(N||"",k)===-1&&(N=k+": "+N),N||""}s(ny,"_formatMessage");function Eq(w){try{if(te(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(Eq,"_isExceptionDetailsInternal");function xq(w){try{if(te(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(xq,"_isExceptionInternal");function Mk(w){return w&&w.src&&ie(w.src)&&w.obj&&pe(w.obj)}s(Mk,"_isStackDetails");function tg(w){var k=w||"";ie(k)||(ie(k[Ld])?k=k[Ld]:k=""+k);var N=k[ZA](`
`);return{src:k,obj:N}}s(tg,"_convertStackObj");function bq(w){for(var k=[],N=w[ZA](`
`),$=0;$<N[Dn];$++){var de=N[$];N[$+1]&&(de+="@"+N[$+1],$++),k.push(de)}return{src:w,obj:k}}s(bq,"_getOperaStack");function Fk(w){var k=null;if(w)try{if(w[Ld])k=tg(w[Ld]);else if(w[Zx]&&w[Zx][Ld])k=tg(w[Zx][Ld]);else if(w.exception&&w.exception[Ld])k=tg(w.exception[Ld]);else if(Mk(w))k=w;else if(Mk(w[i_]))k=w[i_];else if(Se()&&Se().opera&&w[o_])k=bq(w[Jw]);else if(w.reason&&w.reason[Ld])k=tg(w.reason[Ld]);else if(ie(w))k=tg(w);else{var N=w[o_]||w[s_]||"";ie(w[Nk])&&(N&&(N+=`
`),N+=" from "+w[Nk]),N&&(k=tg(N))}}catch($){k=tg($)}return k||{src:"",obj:null}}s(Fk,"_getStackFromErrorObj");function Iq(w){var k="";return w&&(w.obj?k=w.obj.join(`
`):k=w.src||""),k}s(Iq,"_formatStackTrace");function Ok(w){var k,N=w.obj;if(N&&N[Dn]>0){k=[];var $=0,de=!1,we=0;En(N,function(Vn){if(de||hae(Vn)){var Nn=We(Vn);de=!0;var ki=mae(Nn,$);ki&&(we+=ki[Ux],k.push(ki),$++)}});var ke=32*1024;if(we>ke)for(var $e=0,nt=k[Dn]-1,Et=0,pr=$e,Bn=nt;$e<nt;){var Xn=k[$e][Ux],Cr=k[nt][Ux];if(Et+=Xn+Cr,Et>ke){var Dr=Bn-pr+1;k.splice(pr,Dr);break}pr=$e,Bn=nt,$e++,nt--}}return k}s(Ok,"_parseStack");function eb(w){var k="";if(w&&(k=w.typeName||w[Tf]||"",!k))try{var N=/function (.{1,200})\(/,$=N.exec(w.constructor[N1]());k=$&&$[Dn]>1?$[1]:""}catch{}return k}s(eb,"_getErrorType");function Qk(w){if(w)try{if(!ie(w)){var k=eb(w),N=a_(w,!1);return(!N||N==="{}")&&(w[Zx]&&(w=w[Zx],k=eb(w)),N=a_(w,!0)),qr(N,k)!==0&&k!=="String"?k+":"+N:N}}catch{}return""+(w||"")}s(Qk,"_formatErrorCode");var eh=function(){function w(k,N,$,de,we,ke){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var $e=this;$e.ver=2,xq(N)?($e[qx]=N[qx]||[],$e[Jp]=N[Jp],$e[Ku]=N[Ku],N[Zw]&&($e[Zw]=N[Zw]),N.id&&($e.id=N.id,N[Jp].id=N.id),N[Hx]&&($e[Hx]=N[Hx]),W(N.isManual)||($e.isManual=N.isManual)):($||($={}),ke&&($.id=ke),$e[qx]=[_q(k,N,$)],$e[Jp]=Xm(k,$),$e[Ku]=wf(k,de),we&&($e[Zw]=we),ke&&($e.id=ke))}return s(w,"Exception"),w.CreateAutoException=function(k,N,$,de,we,ke,$e,nt){var Et=eb(we||ke||k);return{message:ny(k,Et),url:N,lineNumber:$,columnNumber:de,error:Qk(we||ke||k),evt:Qk(ke||k),typeName:Et,stackDetails:Fk($e||we||ke),errorSrc:nt}},w.CreateFromInterface=function(k,N,$,de){var we=N[qx]&&gi(N[qx],function($e){return r9(k,$e)}),ke=new w(k,Y5(Y5({},N),{exceptions:we}),$,de);return ke},w.prototype.toInterface=function(){var k=this,N=k.exceptions,$=k.properties,de=k.measurements,we=k.severityLevel,ke=k.problemGroup,$e=k.id,nt=k.isManual,Et=N instanceof Array&&gi(N,function(pr){return pr.toInterface()})||void 0;return{ver:"4.0",exceptions:Et,severityLevel:we,properties:$,measurements:de,problemGroup:ke,id:$e,isManual:nt}},w.CreateSimpleException=function(k,N,$,de,we,ke){var $e;return{exceptions:[($e={},$e[_k]=!0,$e.message=k,$e.stack=we,$e.typeName=N,$e)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=Qk,w}(),Tq=Kt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function wq(){var w=this,k=pe(w[Nd])&&gi(w[Nd],function($){return Rq($)}),N={id:w.id,outerId:w.outerId,typeName:w[Xw],message:w[Jw],hasFullStack:w[_k],stack:w[Ld],parsedStack:k||void 0};return N}s(wq,"_toInterface");function _q(w,k,N){var $,de,we,ke,$e,nt,Et,pr;if(Eq(k))ke=k[Xw],$e=k[Jw],Et=k[Ld],pr=k[Nd]||[],nt=k[_k];else{var Bn=k,Xn=Bn&&Bn.evt;Ae(Bn)||(Bn=Bn[Zx]||Xn||Bn),ke=al(w,eb(Bn))||Kp,$e=Rk(w,ny(k||Bn,ke))||Kp;var Cr=k[i_]||Fk(k);pr=Ok(Cr),pe(pr)&&gi(pr,function(Dr){Dr[Sk]=al(w,Dr[Sk]),Dr[D0]=al(w,Dr[D0])}),Et=z8(w,Iq(Cr)),nt=pe(pr)&&pr[Dn]>0,N&&(N[Xw]=N[Xw]||ke)}return $={},$[ey]=Tq,$.id=de,$.outerId=we,$.typeName=ke,$.message=$e,$[_k]=nt,$.stack=Et,$.parsedStack=pr,$.toInterface=wq,$}s(_q,"_createExceptionDetails");function r9(w,k){var N=pe(k[Nd])&&gi(k[Nd],function(de){return Sq(de)})||k[Nd],$=_q(w,Y5(Y5({},k),{parsedStack:N}));return $}s(r9,"_createExDetailsFromInterface");function c_(w,k){var N=k[L1](fae);if(N&&N[Dn]>=4)w[D0]=N[1],w[Wx]=parseInt(N[2]);else{var $=k[L1](pae);$&&$[Dn]>=3?(w[D0]=$[1],w[Wx]=parseInt($[2])):w[D0]=k}}s(c_,"_parseFilename");function n9(w,k,N){var $=w[D0];k.fn&&N&&N[Dn]>k.fn&&(k.ln&&N[Dn]>k.ln?($=wa(N[k.fn]||""),w[Wx]=parseInt(wa(N[k.ln]||""))||0):$=wa(N[k.fn]||"")),$&&c_(w,$)}s(n9,"_handleFilename");function hae(w){var k=!1;if(w&&ie(w)){var N=wa(w);N&&(k=yq.test(N))}return k}s(hae,"_isStackFrame");var i9=Kt({level:1,method:1,assembly:0,fileName:0,line:0});function mae(w,k){var N,$;if(w&&ie(w)&&wa(w)){$=(N={},N[ey]=i9,N.level=k,N.assembly=wa(w),N.method=vq,N.fileName="",N.line=0,N.sizeInBytes=0,N);for(var de=0;de<t9[Dn];){var we=t9[de];if(we.chk&&!we.chk(w))break;we.pre&&(w=we.pre(w));var ke=w[L1](we.re);if(ke&&ke[Dn]>=we.len){we.m&&($.method=wa(ke[we.m]||vq)),we.hdl?we.hdl($,we,ke):we.fn&&(we.ln?($[D0]=wa(ke[we.fn]||""),$[Wx]=parseInt(wa(ke[we.ln]||""))||0):c_($,ke[we.fn]||""));break}de++}}return o9($)}s(mae,"_extractStackFrame");function Sq(w){var k,N=(k={},k[ey]=i9,k.level=w.level,k.method=w.method,k.assembly=w[Sk],k.fileName=w[D0],k.line=w[Wx],k.sizeInBytes=0,k);return o9(N)}s(Sq,"_stackFrameFromInterface");function o9(w){var k=lae;return w&&(k+=w.method[Dn],k+=w.assembly[Dn],k+=w.fileName[Dn],k+=w.level.toString()[Dn],k+=w.line.toString()[Dn],w[Ux]=k),w}s(o9,"_populateFrameSizeInBytes");function Rq(w){return{level:w.level,method:w.method,assembly:w[Sk],fileName:w[D0],line:w[Wx]}}s(Rq,"_parsedFrameToInterface");var kq=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),gae=function(){function w(k,N,$,de,we,ke,$e,nt,Et){this.aiDataContract={ver:1,metrics:1,properties:0};var pr=this;pr.ver=2;var Bn=new kq;Bn[Fx]=de>0?de:void 0,Bn.max=isNaN(ke)||ke===null?void 0:ke,Bn.min=isNaN(we)||we===null?void 0:we,Bn[Tf]=al(k,N)||Kp,Bn.value=$,Bn.stdDev=isNaN($e)||$e===null?void 0:$e,pr.metrics=[Bn],pr[Jp]=Xm(k,nt),pr[Ku]=wf(k,Et)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),tb="";function Aae(w,k){return k===void 0&&(k=!1),w==null?k:w.toString()[Mx]()==="true"}s(Aae,"stringToBoolOrDefault");function s9(w){(isNaN(w)||w<0)&&(w=0),w=ix(w);var k=tb+w%1e3,N=tb+su(w/1e3)%60,$=tb+su(w/(1e3*60))%60,de=tb+su(w/(1e3*60*60))%24,we=su(w/(1e3*60*60*24));return k=k[Dn]===1?"00"+k:k[Dn]===2?"0"+k:k,N=N[Dn]<2?"0"+N:N,$=$[Dn]<2?"0"+$:$,de=de[Dn]<2?"0"+de:de,(we>0?we+".":tb)+de+":"+$+":"+N+"."+k}s(s9,"msToTimeSpan");function yae(w,k){var N=null;return En(w,function($){if($.identifier===k)return N=$,-1}),N}s(yae,"getExtensionByName");function iy(w,k,N,$,de){return!de&&ie(w)&&(w==="Script error."||w==="Script error")}s(iy,"isCrossOriginError");var Cae=function(){function w(k,N,$,de,we,ke,$e){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var nt=this;nt.ver=2,nt.id=$x(k,$e),nt.url=Xp(k,$),nt[Tf]=al(k,N)||Kp,isNaN(de)||(nt[e_]=s9(de)),nt[Jp]=Xm(k,we),nt[Ku]=wf(k,ke)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),rb=function(){function w(k,N,$,de,we,ke,$e,nt,Et,pr,Bn,Xn){Et===void 0&&(Et="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Cr=this;Cr.ver=2,Cr.id=N,Cr[e_]=s9(we),Cr.success=ke,Cr.resultCode=$e+"",Cr.type=al(k,Et);var Dr=fq(k,$,nt,de);Cr.data=Xp(k,de)||Dr.data,Cr.target=al(k,Dr.target),pr&&(Cr.target="".concat(Cr.target," | ").concat(pr)),Cr[Tf]=al(k,Dr[Tf]),Cr[Jp]=Xm(k,Bn),Cr[Ku]=wf(k,Xn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),a9=function(){function w(k,N,$,de,we){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var ke=this;ke.ver=2,N=N||Kp,ke[Jw]=Rk(k,N),ke[Jp]=Xm(k,de),ke[Ku]=wf(k,we),$&&(ke[Zw]=$)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),l_=function(){function w(k,N,$,de,we,ke,$e){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var nt=this;nt.ver=2,nt.url=Xp(k,$),nt[Tf]=al(k,N)||Kp,nt[Jp]=Xm(k,we),nt[Ku]=wf(k,ke),$e&&(nt.domProcessing=$e.domProcessing,nt[e_]=$e[e_],nt.networkConnect=$e.networkConnect,nt.perfTotal=$e.perfTotal,nt.receivedResponse=$e.receivedResponse,nt.sentRequest=$e.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),vae=function(){function w(k,N){this.aiDataContract={baseType:1,baseData:1},this.baseType=k,this.baseData=N}return s(w,"Data"),w}(),Uk=Wp({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Eae=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(k,N,$,de){de===void 0&&(de=!1);var we;return $&&k[Qx]&&k[Qx][$]&&!W(k[Qx][$][N])?we=k[Qx][$][N]:we=k[N],W(we)?de:we},w}();function th(w){var k="ai."+w+".";return function(N){return k+N}}s(th,"_aiNameFunc");var nb=th("application"),lc=th("device"),qk=th("location"),ib=th("operation"),Hk=th("session"),oy=th("user"),M1=th("cloud"),u_=th("internal"),sy=function(w){HA(k,w);function k(){return w.call(this)||this}return s(k,"ContextTagKeys"),k}(Hw({applicationVersion:nb("ver"),applicationBuild:nb("build"),applicationTypeId:nb("typeId"),applicationId:nb("applicationId"),applicationLayer:nb("layer"),deviceId:lc("id"),deviceIp:lc("ip"),deviceLanguage:lc("language"),deviceLocale:lc("locale"),deviceModel:lc("model"),deviceFriendlyName:lc("friendlyName"),deviceNetwork:lc("network"),deviceNetworkName:lc("networkName"),deviceOEMName:lc("oemName"),deviceOS:lc("os"),deviceOSVersion:lc("osVersion"),deviceRoleInstance:lc("roleInstance"),deviceRoleName:lc("roleName"),deviceScreenResolution:lc("screenResolution"),deviceType:lc("type"),deviceMachineName:lc("machineName"),deviceVMName:lc("vmName"),deviceBrowser:lc("browser"),deviceBrowserVersion:lc("browserVersion"),locationIp:qk("ip"),locationCountry:qk("country"),locationProvince:qk("province"),locationCity:qk("city"),operationId:ib("id"),operationName:ib("name"),operationParentId:ib("parentId"),operationRootId:ib("rootId"),operationSyntheticSource:ib("syntheticSource"),operationCorrelationVector:ib("correlationVector"),sessionId:Hk("id"),sessionIsFirst:Hk("isFirst"),sessionIsNew:Hk("isNew"),userAccountAcquisitionDate:oy("accountAcquisitionDate"),userAccountId:oy("accountId"),userAgent:oy("userAgent"),userId:oy("id"),userStoreRegion:oy("storeRegion"),userAuthUserId:oy("authUserId"),userAnonymousUserAcquisitionDate:oy("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:oy("authUserAcquisitionDate"),cloudName:M1("name"),cloudRole:M1("role"),cloudRoleVer:M1("roleVer"),cloudRoleInstance:M1("roleInstance"),cloudEnvironment:M1("environment"),cloudLocation:M1("location"),cloudDeploymentUnit:M1("deploymentUnit"),internalNodeName:u_("nodeName"),internalSdkVersion:u_("sdkVersion"),internalAgentVersion:u_("agentVersion"),internalSnippet:u_("snippet"),internalSdkSrc:u_("sdkSrc")}));function c9(w,k,N,$,de,we){N=al($,N)||Kp,(W(w)||W(k)||W(N))&&qe("Input doesn't contain all required fields");var ke="";w[H8]&&(ke=w[H8],delete w[H8]);var $e={name:N,time:Gm(new Date),iKey:ke,ext:we||{},tags:[],data:{},baseType:k,baseData:w};return W(de)||ct(de,function(nt,Et){$e.data[nt]=Et}),$e}s(c9,"createTelemetryItem");var l9=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=c9,w}(),xae={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},bae=new sy;function Pq(w){var k=null;if(ae(Event))k=new Event(w);else{var N=Z();N&&N.createEvent&&(k=N.createEvent("Event"),k.initEvent(w,!0,!0))}return k}s(Pq,"createDomEvent");function u9(w,k){eq(w,null,null,k)}s(u9,"_disableEvents");function Dq(w){var k=Z(),N=wt(),$=!1,de=[],we=1;N&&!W(N.onLine)&&!N.onLine&&(we=2);var ke=0,$e=Xn(),nt=Jse(zm("OfflineListener"),w);try{if(pr(Se())&&($=!0),k){var Et=k.body||k;Et.ononline&&pr(Et)&&($=!0)}}catch{$=!1}function pr(Yi){var kc=!1;return Yi&&(kc=U8(Yi,"online",Vn,nt),kc&&U8(Yi,"offline",Nn,nt)),kc}s(pr,"_enableEvents");function Bn(){return $e}s(Bn,"_isOnline");function Xn(){return!(ke===2||we===2)}s(Xn,"calCurrentState");function Cr(){var Yi=Xn();$e!==Yi&&($e=Yi,En(de,function(kc){var sb={isOnline:$e,rState:we,uState:ke};try{kc(sb)}catch{}}))}s(Cr,"listnerNoticeCheck");function Dr(Yi){ke=Yi,Cr()}s(Dr,"setOnlineState");function Vn(){we=1,Cr()}s(Vn,"_setOnline");function Nn(){we=2,Cr()}s(Nn,"_setOffline");function ki(){var Yi=Se();if(Yi&&$){if(u9(Yi,nt),k){var kc=k.body||k;K(kc.ononline)||u9(kc,nt)}$=!1}}s(ki,"_unload");function Ro(Yi){return de.push(Yi),{rm:s(function(){var kc=de.indexOf(Yi);if(kc>-1)return de.splice(kc,1)},"rm")}}return s(Ro,"addListener"),{isOnline:Bn,isListening:s(function(){return $},"isListening"),unload:ki,addListener:Ro,setOnlineState:Dr}}s(Dq,"createOfflineListener");var Iae="AppInsightsPropertiesPlugin",d9="AppInsightsChannelPlugin",ob="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=ob,t.BreezeChannelIdentifier=d9,t.ConfigurationManager=Eae,t.ConnectionStringParser=Dk,t.ContextTagKeys=sy,t.CtxTagKeys=bae,t.DEFAULT_BREEZE_ENDPOINT=q8,t.DEFAULT_BREEZE_PATH=Kw,t.Data=vae,t.DisabledPropertyName=bk,t.DistributedTracingModes=nae,t.Envelope=Bk,t.Event=cae,t.EventPersistence=t_,t.Exception=eh,t.Extensions=xae,t.HttpMethod=rq,t.Metric=gae,t.PageView=Cae,t.PageViewPerformance=l_,t.ProcessLegacy=Ik,t.PropertiesPluginIdentifier=Iae,t.RemoteDependencyData=rb,t.RequestHeaders=nq,t.SampleRate=tq,t.SeverityLevel=Uk,t.TelemetryItemCreator=l9,t.ThrottleMgr=aae,t.Trace=a9,t.correlationIdCanIncludeCorrelationHeader=ty,t.correlationIdGetCorrelationContext=uq,t.correlationIdGetCorrelationContextValue=dq,t.correlationIdGetPrefix=X8,t.correlationIdSetPrefix=J8,t.createDistributedTraceContextFromTrace=Z8,t.createDomEvent=Pq,t.createOfflineListener=Dq,t.createTelemetryItem=c9,t.createTraceParent=Px,t.dataSanitizeException=z8,t.dataSanitizeId=$x,t.dataSanitizeInput=Y8,t.dataSanitizeKey=V8,t.dataSanitizeKeyAndAddUniqueness=G8,t.dataSanitizeMeasurements=wf,t.dataSanitizeMessage=Rk,t.dataSanitizeProperties=Xm,t.dataSanitizeString=al,t.dataSanitizeUrl=Xp,t.dateTimeUtilsDuration=rae,t.dateTimeUtilsNow=tae,t.dsPadNumber=iq,t.findAllScripts=F8,t.findW3cTraceParent=M8,t.formatTraceParent=D1,t.getExtensionByName=yae,t.isBeaconApiSupported=GA,t.isCrossOriginError=iy,t.isInternalApplicationInsightsEndpoint=lq,t.isSampledFlag=yk,t.isValidSpanId=Bx,t.isValidTraceId=Dx,t.isValidTraceParent=Nx,t.msToTimeSpan=s9,t.parseConnectionString=Pk,t.parseTraceParent=If,t.strNotSpecified=Kp,t.stringToBoolOrDefault=Aae,t.urlGetAbsoluteUrl=Zse,t.urlGetCompleteUrl=sq,t.urlGetPathName=eae,t.urlParseFullHost=Zm,t.urlParseHost=aq,t.urlParseUrl=jx,t.utlCanUseLocalStorage=kk,t.utlCanUseSessionStorage=eg,t.utlDisableStorage=r_,t.utlEnableStorage=iae,t.utlGetLocalStorage=hq,t.utlGetSessionStorage=gq,t.utlGetSessionStorageKeys=Jx,t.utlRemoveSessionStorage=Aq,t.utlRemoveStorage=_f,t.utlSetLocalStorage=mq,t.utlSetSessionStorage=oae,t.utlSetStoragePrefix=n_})});var r8e=q((M$,t8e)=>{d();(function(t,e){typeof M$=="object"&&typeof t8e<"u"?e(M$):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(M$,function(t){"use strict";function e(v,x){return v||x}s(e,"_pureAssign");function r(v,x){return v[x]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",h="Symbol",m="_polyfill",g="length",A="name",y="call",E="toString",b=e(Object),_=r(b,l),S=e(String),P=r(S,l),B=e(Math),F=e(Array),Y=r(F,l),ee=r(Y,"slice");function V(v,x){try{return{v:v.apply(this,x)}}catch(T){return{e:T}}}s(V,"safe");function H(v,x){var T=V(v);return T.e?x:T.v}s(H,"safeGet");var U;function X(v){return function(x){return typeof x===v}}s(X,"_createIs");function K(v){var x="[object "+v+"]";return function(T){return!!(T&&j(T)===x)}}s(K,"_createObjIs");function j(v){return _[E].call(v)}s(j,"objToString");function W(v){return typeof v===f||v===f}s(W,"isUndefined");function J(v){return!te(v)}s(J,"isStrictUndefined");function ie(v){return v===i||W(v)}s(ie,"isNullOrUndefined");function ae(v){return v===i||!te(v)}s(ae,"isStrictNullOrUndefined");function te(v){return!!v||v!==n}s(te,"isDefined");function pe(v){return!U&&(U=["string","number","boolean",f,"symbol","bigint"]),v!==c&&U.indexOf(v)!==-1}s(pe,"isPrimitiveType");var Ae=X("string"),Oe=X(a);function Te(v){return!v&&ie(v)?!1:!!v&&typeof v===c}s(Te,"isObject");var Je=r(F,"isArray"),Fe=K("Date"),ct=X("number"),St=X("boolean"),vt=K("Error");function mt(v){return!!(v&&v.then&&Oe(v.then))}s(mt,"isPromiseLike");function ue(v){return!(!v||H(function(){return!(v&&0+v)},!v))}s(ue,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(v,x){return!!v&&_.hasOwnProperty[y](v,x)}s(ye,"objHasOwnProperty");var We=e(r(b,"hasOwn"),se);function se(v,x){return ye(v,x)||!!Ue(v,x)}s(se,"polyObjHasOwn");function le(v,x,T){if(v&&Te(v)){for(var R in v)if(We(v,R)&&x[y](T||v,R,v[R])===-1)break}}s(le,"objForEachKey");var qe={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Be(v){var x={};if(x[qe.c]=!0,x[qe.e]=!0,v.l){x.get=function(){return v.l.v};var T=Ue(v.l,"v");T&&T.set&&(x.set=function(R){v.l.v=R})}return le(v,function(R,L){x[qe[R]]=J(L)?x[qe[R]]:L}),x}s(Be,"_createProp");var xe=r(b,"defineProperty");function je(v,x,T){return xe(v,x,Be(T))}s(je,"objDefine");function et(v,x,T,R,L){var Q={};return le(v,function(G,ce){pt(Q,G,x?ce:G),pt(Q,ce,T?ce:G)}),R?R(Q):Q}s(et,"_createKeyValueMap");function pt(v,x,T,R){xe(v,x,{value:T,enumerable:!0,writable:!1})}s(pt,"_assignMapValue");var Lt=e(S),Kt="[object Error]";function Ft(v,x){var T=o,R=_[E][y](v);R===Kt&&(v={stack:Lt(v.stack),message:Lt(v.message),name:Lt(v.name)});try{T=JSON.stringify(v,i,x?typeof x=="number"?x:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Lt(v)}catch(L){T=" - "+Ft(L,x)}return R+": "+T}s(Ft,"dumpObj");function Qr(v){throw new Error(v)}s(Qr,"throwError");function Sr(v){throw new TypeError(v)}s(Sr,"throwTypeError");var rn=r(b,"freeze");function ve(v){return v}s(ve,"_doNothing");function Ge(v){return v[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),It=r(b,"keys");function rr(v){return rn&&le(v,function(x,T){(Je(T)||Te(T))&&rr(T)}),Xt(v)}s(rr,"objDeepFreeze");var Xt=e(rn,ve),xr=e(r(b,"getPrototypeOf"),Ge);function ar(v){return et(v,1,0,Xt)}s(ar,"createEnum");function er(v){return et(v,0,0,Xt)}s(er,"createEnumKeyMap");function sr(v){var x={};return le(v,function(T,R){pt(x,T,R[1]),pt(x,R[0],R[1])}),Xt(x)}s(sr,"createSimpleMap");function tr(v){return sr(v)}s(tr,"createTypeMap");var kr=er({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ur="__tsUtils$gblCfg",Jr;function hn(){var v;return typeof globalThis!==f&&(v=globalThis),!v&&typeof self!==f&&(v=self),!v&&typeof window!==f&&(v=window),!v&&typeof global!==f&&(v=global),v}s(hn,"_getGlobalValue");function Zn(){if(!Jr){var v=V(hn).v||{};Jr=v[Ur]=v[Ur]||{}}return Jr}s(Zn,"_getGlobalConfig");var bn=Jn;function Jn(v,x,T){var R=x?x[v]:i;return function(L){var Q=(L?L[v]:i)||R;if(Q||T){var G=arguments;return(Q||T).apply(L,Q?ee[y](G,1):G)}Sr('"'+Lt(v)+'" not defined for '+Ft(L))}}s(Jn,"_unwrapFunctionWithPoly");function Xr(v){return function(x){return x[v]}}s(Xr,"_unwrapProp");var Gn=r(B,"min"),Pe=r(B,"max"),z=bn("slice",P),Ce=bn("substring",P),Ie=Jn("substr",P,M);function M(v,x,T){return ie(v)&&Sr("Invalid "+Ft(v)),T<0?o:(x=x||0,x<0&&(x=Pe(x+v[g],0)),W(T)?z(v,x):z(v,x,x+T))}s(M,"polyStrSubstr");function D(v,x){return Ce(v,0,x)}s(D,"strLeft");var Z="_urid",ge;function Se(){if(!ge){var v=Zn();ge=v.gblSym=v.gblSym||{k:{},s:{}}}return ge}s(Se,"_globalSymbolRegistry");var lt;function wt(v){var x={description:Lt(v),toString:s(function(){return h+"("+v+")"},"toString")};return x[m]=!0,x}s(wt,"polyNewSymbol");function zt(v){var x=Se();if(!We(x.k,v)){var T=wt(v),R=It(x.s).length;T[Z]=function(){return R+"_"+T[E]()},x.k[v]=T,x.s[T[Z]()]=Lt(v)}return x.k[v]}s(zt,"polySymbolFor");function Zt(v){!lt&&(lt={});var x,T=kr[v];return T&&(x=lt[T]=lt[T]||wt(h+"."+T)),x}s(Zt,"polyGetKnownSymbol");var Yt;function xt(){Yt=Zn()}s(xt,"_initTestHooks");function mr(v){var x={};return!Yt&&xt(),x.b=Yt.lzy,xe(x,"v",{configurable:!0,get:s(function(){var T=v();return Yt.lzy||xe(x,"v",{value:T}),x.b=Yt.lzy,T},"get")}),x}s(mr,"getLazy");function si(v){return xe({toJSON:s(function(){return v},"toJSON")},"v",{value:v})}s(si,"createCachedValue");var Vi="window",En;function so(v,x){var T;return function(){return!Yt&&xt(),(!T||Yt.lzy)&&(T=si(V(v,x).v)),T.v}}s(so,"_getGlobalInstFn");function gi(v){return!Yt&&xt(),(!En||v===!1||Yt.lzy)&&(En=si(V(hn).v||i)),En.v}s(gi,"getGlobal");function jo(v,x){var T;if(!En||x===!1?T=gi(x):T=En.v,T&&T[v])return T[v];if(v===Vi)try{return window}catch{}return i}s(jo,"getInst");function ca(){return!!ic()}s(ca,"hasDocument");var ic=so(jo,["document"]);function So(){return!!Fs()}s(So,"hasWindow");var Fs=so(jo,[Vi]);function Gu(){return!!oc()}s(Gu,"hasNavigator");var oc=so(jo,["navigator"]),Fm=so(function(){return!!V(function(){return process&&(process.versions||{}).node}).v}),ol,Om;function Qm(){return ol=si(V(jo,[h]).v),ol}s(Qm,"_initSymbol");function rx(v){var x=(Yt.lzy?0:ol)||Qm();return x.v?x.v[v]:n}s(rx,"_getSymbolKey");function wa(){return!!su()}s(wa,"hasSymbol");function su(){return!Yt&&xt(),((Yt.lzy?0:ol)||Qm()).v}s(su,"getSymbol");function au(v,x){var T=kr[v];!Yt&&xt();var R=(Yt.lzy?0:ol)||Qm();return R.v?R.v[T||v]:x?n:Zt(v)}s(au,"getKnownSymbol");function Vu(v,x){!Yt&&xt();var T=(Yt.lzy?0:ol)||Qm();return T.v?T.v(v):x?i:wt(v)}s(Vu,"newSymbol");function Um(v){return!Yt&&xt(),Om=(Yt.lzy?0:Om)||si(V(rx,["for"]).v),(Om.v||zt)(v)}s(Um,"symbolFor");function wl(v){return!!v&&Oe(v.next)}s(wl,"isIterator");function nx(v){return!ae(v)&&Oe(v[au(3)])}s(nx,"isIterable");var y1;function ix(v,x,T){if(v&&(wl(v)||(!y1&&(y1=si(au(3))),v=v[y1.v]?v[y1.v]():i),wl(v))){var R=n,L=n;try{for(var Q=0;!(L=v.next()).done&&x[y](T||v,L.value,Q,v)!==-1;)Q++}catch(G){R={e:G},v.throw&&(L=i,v.throw(R))}finally{try{L&&!L.done&&v.return&&v.return(L)}finally{if(R)throw R.e}}}}s(ix,"iterForOf");function yf(v,x,T){return v.apply(x,T)}s(yf,"fnApply");function Cf(v,x){return!W(x)&&v&&(Je(x)?yf(v.push,v,x):wl(x)||nx(x)?ix(x,function(T){v.push(T)}):v.push(x)),v}s(Cf,"arrAppend");function qr(v,x,T){if(v)for(var R=v[g]>>>0,L=0;L<R&&!(L in v&&x[y](T||v,v[L],L,v)===-1);L++);}s(qr,"arrForEach");var sc=bn("indexOf",Y),qm=bn("map",Y);function Hm(v,x,T){return((v?v.slice:i)||ee).apply(v,ee[y](arguments,1))}s(Hm,"arrSlice");var p8=bn("reduce",Y),Rc=e(r(b,"create"),FA);function FA(v){if(!v)return{};var x=typeof v;x!==c&&x!==a&&Sr("Prototype must be an Object or function: "+Ft(v));function T(){}return s(T,"tempFunc"),T[l]=v,new T}s(FA,"polyObjCreate");var C1;function Wp(v,x){var T=b.setPrototypeOf||function(R,L){var Q;!C1&&(C1=si((Q={},Q[u]=[],Q instanceof Array))),C1.v?R[u]=L:le(L,function(G,ce){return R[G]=ce})};return T(v,x)}s(Wp,"objSetPrototypeOf");function OA(v,x,T){V(je,[x,A,{v,c:!0,e:!1}]),x=Wp(x,T);function R(){this[p]=x,V(je,[this,A,{v,c:!0,e:!1}])}return s(R,"__"),x[l]=T===i?Rc(T):(R[l]=T[l],new R),x}s(OA,"_createCustomError");function ox(v,x){x&&(v[A]=x)}s(ox,"_setName");function hs(v,x,T){var R=T||Error,L=R[l][A],Q=Error.captureStackTrace;return OA(v,function(){var G=this,ce=arguments;try{V(ox,[R,v]);var fe=yf(R,G,ee[y](ce))||G;if(fe!==G){var Ee=xr(G);Ee!==xr(fe)&&Wp(fe,Ee)}return Q&&Q(fe,G[p]),x&&x(fe,ce),fe}finally{V(ox,[R,L])}},R)}s(hs,"createCustomError");function zu(){return(Date.now||QA)()}s(zu,"utcNow");function QA(){return new Date().getTime()}s(QA,"polyUtcNow");function W5(v){return s(function(T){return ie(T)&&Sr("strTrim called ["+Ft(T)+"]"),T&&T.replace&&(T=T.replace(v,o)),T},"_doTrim")}s(W5,"_createTrimFn");var h8=W5(/^\s+|(?=\s)\s+$/g),zi=Jn("trim",P,h8),UA=r(B,"floor"),Wm,$5,sx;function Yu(v){if(!v||typeof v!==c)return!1;sx||(sx=So()?Fs():!0);var x=!1;if(v!==sx){$5||(Wm=Function[l][E],$5=Wm[y](b));try{var T=xr(v);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&Wm[y](T)===$5))}catch{}}return x}s(Yu,"isPlainObject");function m8(v){return v.value&&j5(v),!0}s(m8,"_defaultDeepCopyHandler");var g8=[ax,j5,BU,qA];function A8(v,x,T,R){var L;return qr(v,function(Q){if(Q.k===x)return L=Q,-1}),L||(L={k:x,v:x},v.push(L),R(L)),L.v}s(A8,"_getSetVisited");function v1(v,x,T,R){var L=T.handler,Q=T.path?R?T.path.concat(R):T.path:[],G={handler:T.handler,src:T.src,path:Q},ce=typeof x,fe=!1,Ee=x===i;Ee||(x&&ce===c?fe=Yu(x):Ee=pe(ce));var Re={type:ce,isPrim:Ee,isPlain:fe,value:x,result:x,path:Q,origin:T.src,copy:s(function(Qe,Ze){return v1(v,Qe,Ze?G:T,Ze)},"copy"),copyTo:s(function(Qe,Ze){return y8(v,Qe,Ze,G)},"copyTo")};return Re.isPrim?L&&L[y](T,Re)?Re.result:x:A8(v,x,Q,function(Qe){je(Re,"result",{g:s(function(){return Qe.v},"g"),s:s(function(Ye){Qe.v=Ye},"s")});for(var Ze=0,He=L;!(He||(Ze<g8.length?g8[Ze++]:m8))[y](T,Re);)He=i})}s(v1,"_deepCopy");function y8(v,x,T,R){if(!ie(T))for(var L in T)x[L]=v1(v,T[L],R,L);return x}s(y8,"_copyProps");function DU(v,x,T){var R={handler:T,src:x,path:[]};return y8([],v,x,R)}s(DU,"objCopyProps");function C8(v,x){var T={handler:x,src:v};return v1([],v,T)}s(C8,"objDeepCopy");function ax(v){var x=v.value;if(Je(x)){var T=v.result=[];return T.length=x.length,v.copyTo(T,x),!0}return!1}s(ax,"arrayDeepCopyHandler");function qA(v){var x=v.value;return Fe(x)?(v.result=new Date(x.getTime()),!0):!1}s(qA,"dateDeepCopyHandler");function BU(v){return v.type===a}s(BU,"functionDeepCopyHandler");function j5(v){var x=v.value;if(x&&v.isPlain){var T=v.result={};return v.copyTo(T,x),!0}return!1}s(j5,"plainObjDeepCopyHandler");function v8(v,x){return qr(x,function(T){DU(v,T)}),v}s(v8,"_doExtend");function G5(v,x,T,R,L,Q,G){return v8(C8(v)||{},ee[y](arguments))}s(G5,"deepExtend");var Nse=Xr(g),Lse=r(B,"round"),NU=Jn("endsWith",P,Mse);function Mse(v,x,T){Ae(v)||Sr("'"+Ft(v)+"' is not a string");var R=Ae(x)?x:Lt(x),L=!W(T)&&T<v[g]?T:v[g];return Ce(v,L-R[g],L)===R}s(Mse,"polyStrEndsWith");var $m=bn("indexOf",P),V5="ref",E8="unref",z5="hasRef",Fse="enabled";function Y5(v,x,T){var R=!0,L=v?x(i):i,Q;function G(){return R=!1,L&&L[E8]&&L[E8](),Q}s(G,"_unref");function ce(){L&&T(L),L=i}s(ce,"_cancel");function fe(){return L=x(L),R||G(),Q}s(fe,"_refresh");function Ee(Re){!Re&&L&&ce(),Re&&!L&&fe()}return s(Ee,"_setEnabled"),Q={cancel:ce,refresh:fe},Q[z5]=function(){return L&&L[z5]?L[z5]():R},Q[V5]=function(){return R=!0,L&&L[V5]&&L[V5](),Q},Q[E8]=G,Q=xe(Q,Fse,{get:s(function(){return!!L},"get"),set:Ee}),{h:Q,dn:s(function(){L=i},"dn")}}s(Y5,"_createTimerHandler");function K5(v,x,T){var R=Je(x),L=R?x.length:0,Q=(L>0?x[0]:R?n:x)||setTimeout,G=(L>1?x[1]:n)||clearTimeout,ce=T[0];T[0]=function(){fe.dn(),yf(ce,n,ee[y](arguments))};var fe=Y5(v,function(Ee){if(Ee){if(Ee.refresh)return Ee.refresh(),Ee;yf(G,n,[Ee])}return yf(Q,n,T)},function(Ee){yf(G,n,[Ee])});return fe.h}s(K5,"_createTimeoutWith");function HA(v,x){return K5(!0,n,ee[y](arguments))}s(HA,"scheduleTimeout");function J5(v,x){return K5(!1,n,ee[y](arguments))}s(J5,"createTimeout");var E1,vf="constructor",Ef="prototype",x1="function",cx="_dynInstFuncs",WA="_isDynProxy",lx="_dynClass",x8="_dynCls$",b1="_dynInstChk",ux=b1,b8="_dfOpts",X5="_unknown_",dx="__proto__",Ow="_dyn"+dx,Z5="__dynProto$Gbl",fx="_dynInstProto",px="useBaseInst",Qw="setInstFuncs",I1=Object,hx=I1.getPrototypeOf,I8=I1.getOwnPropertyNames,ek=gi(),mx=ek[Z5]||(ek[Z5]={o:(E1={},E1[Qw]=!0,E1[px]=!0,E1),n:1e3});function gx(v){return v&&(v===I1[Ef]||v===Array[Ef])}s(gx,"_isObjectOrArrayPrototype");function jm(v){return gx(v)||v===Function[Ef]}s(jm,"_isObjectArrayOrFunctionPrototype");function $p(v){var x;if(v){if(hx)return hx(v);var T=v[dx]||v[Ef]||(v[vf]?v[vf][Ef]:null);x=v[Ow]||T,ye(v,Ow)||(delete v[fx],x=v[Ow]=v[fx]||v[Ow],v[fx]=T)}return x}s($p,"_getObjProto");function Ax(v,x){var T=[];if(I8)T=I8(v);else for(var R in v)typeof R=="string"&&ye(v,R)&&T.push(R);if(T&&T.length>0)for(var L=0;L<T.length;L++)x(T[L])}s(Ax,"_forEachProp");function yx(v,x,T){return x!==vf&&typeof v[x]===x1&&(T||ye(v,x))&&x!==dx&&x!==Ef}s(yx,"_isDynamicCandidate");function tk(v){Sr("DynamicProto: "+v)}s(tk,"_throwTypeError");function T8(v){var x=Rc(null);return Ax(v,function(T){!x[T]&&yx(v,T,!1)&&(x[T]=v[T])}),x}s(T8,"_getInstanceFuncs");function w8(v,x){for(var T=v.length-1;T>=0;T--)if(v[T]===x)return!0;return!1}s(w8,"_hasVisited");function Ose(v,x,T,R){function L(fe,Ee,Re){var Qe=Ee[Re];if(Qe[WA]&&R){var Ze=fe[cx]||{};Ze[ux]!==!1&&(Qe=(Ze[Ee[lx]]||{})[Re]||Qe)}return function(){return Qe.apply(fe,arguments)}}s(L,"_instFuncProxy");var Q=Rc(null);Ax(T,function(fe){Q[fe]=L(x,T,fe)});for(var G=$p(v),ce=[];G&&!jm(G)&&!w8(ce,G);)Ax(G,function(fe){!Q[fe]&&yx(G,fe,!hx)&&(Q[fe]=L(x,G,fe))}),ce.push(G),G=$p(G);return Q}s(Ose,"_getBaseFuncs");function Qse(v,x,T,R){var L=null;if(v&&ye(T,lx)){var Q=v[cx]||Rc(null);if(L=(Q[T[lx]]||Rc(null))[x],L||tk("Missing ["+x+"] "+x1),!L[b1]&&Q[ux]!==!1){for(var G=!ye(v,x),ce=$p(v),fe=[];G&&ce&&!jm(ce)&&!w8(fe,ce);){var Ee=ce[x];if(Ee){G=Ee===R;break}fe.push(ce),ce=$p(ce)}try{G&&(v[x]=L),L[b1]=1}catch{Q[ux]=!1}}}return L}s(Qse,"_getInstFunc");function Use(v,x,T){var R=x[v];return R===T&&(R=$p(x)[v]),typeof R!==x1&&tk("["+v+"] is not a "+x1),R}s(Use,"_getProtoFunc");function qse(v,x,T,R,L){function Q(fe,Ee){var Re=s(function(){var Qe=Qse(this,Ee,fe,Re)||Use(Ee,fe,Re);return Qe.apply(this,arguments)},"dynProtoProxy");return Re[WA]=1,Re}if(s(Q,"_createDynamicPrototype"),!gx(v)){var G=T[cx]=T[cx]||Rc(null);if(!gx(G)){var ce=G[x]=G[x]||Rc(null);G[ux]!==!1&&(G[ux]=!!L),gx(ce)||Ax(T,function(fe){yx(T,fe,!1)&&T[fe]!==R[fe]&&(ce[fe]=T[fe],delete T[fe],(!ye(v,fe)||v[fe]&&!v[fe][WA])&&(v[fe]=Q(v,fe)))})}}}s(qse,"_populatePrototype");function _8(v,x){if(hx){for(var T=[],R=$p(x);R&&!jm(R)&&!w8(T,R);){if(R===v)return!0;T.push(R),R=$p(R)}return!1}return!0}s(_8,"_checkPrototype");function Uw(v,x){return ye(v,Ef)?v.name||x||X5:((v||{})[vf]||{}).name||x||X5}s(Uw,"_getObjName");function cu(v,x,T,R){ye(v,Ef)||tk("theClass is an invalid class definition.");var L=v[Ef];_8(L,x)||tk("["+Uw(v)+"] not in hierarchy of ["+Uw(x)+"]");var Q=null;ye(L,lx)?Q=L[lx]:(Q=x8+Uw(v,"_")+"$"+mx.n,mx.n++,L[lx]=Q);var G=cu[b8],ce=!!G[px];ce&&R&&R[px]!==void 0&&(ce=!!R[px]);var fe=T8(x),Ee=Ose(L,x,fe,ce);T(x,Ee);var Re=!!hx&&!!G[Qw];Re&&R&&(Re=!!R[Qw]),qse(L,Q,x,fe,Re!==!1)}s(cu,"dynamicProto"),cu[b8]=mx.o;var _a="function",LU="object",MU="undefined",qw="prototype",S8=Object,R8=S8[qw];(gi()||{}).Symbol,(gi()||{}).Reflect;var rk="hasOwnProperty",FU=s(function(v){for(var x,T=1,R=arguments.length;T<R;T++){x=arguments[T];for(var L in x)R8[rk].call(x,L)&&(v[L]=x[L])}return v},"__objAssignFnImpl"),Gm=ft||FU,$A=s(function(v,x){return $A=S8.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,R){T.__proto__=R}||function(T,R){for(var L in R)R[rk](L)&&(T[L]=R[L])},$A(v,x)},"extendStaticsFn");function Hw(v,x){typeof x!==_a&&x!==null&&Sr("Class extends value "+String(x)+" is not a constructor or null"),$A(v,x);function T(){this.constructor=v}s(T,"__"),v[qw]=x===null?Rc(x):(T[qw]=x[qw],new T)}s(Hw,"__extendsFn");function OU(v,x){for(var T=0,R=x.length,L=v.length;T<R;T++,L++)v[L]=x[T];return v}s(OU,"__spreadArrayFn");var nk=ar,Hse=tr,jA=nk({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Cx="toLowerCase",ai="length",vx="warnToConsole",T1="throwInternal",Vm="watch",ik="apply",fo="push",Ex="splice",ac="logger",xx="cancel",Ww="initialize",GA="identifier",$w="removeNotificationListener",ok="addNotificationListener",jp="isInitialized",bx="value",R0="getNotifyMgr",Ix="getPlugin",VA="name",_l="processNext",Tx="getProcessTelContext",Gp="enabled",QU="stopPollingInternalLogs",w1="unload",sk="onComplete",wx="version",UU="loggingLevelConsole",_1="createNew",Vp="teardown",ak="messageId",S1="message",zp="diagLog",ck="_doTeardown",zm="update",Yp="getNext",zA="setNextPlugin",lk="userAgent",YA="split",KA="replace",lu="type",k8="evtName",jw="status",P8="getAllResponseHeaders",D8="isChildEvt",_x="data",JA="getCtx",k0="setCtx",qU="itemsReceived",Ym="urlString",B8="headers",Km="timeout",HU="traceFlags",Sx;function N8(v,x){Sx||(Sx=hs("AggregationError",function(R,L){L[ai]>1&&(R.errors=L[1])}));var T=v||"One or more errors occurred.";throw qr(x,function(R,L){T+=`
`.concat(L," > ").concat(Ft(R))}),new Sx(T,x||[])}s(N8,"throwAggregationError");var R1="Promise",k1="rejected";function xf(v,x){return WU(v,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:k1,rejected:!0,reason:T}):T})}s(xf,"doAwaitResponse");function WU(v,x,T,R){var L=v;try{if(mt(v))(x||T)&&(L=v.then(x,T));else try{x&&(L=x(v))}catch(Q){if(T)L=T(Q);else throw Q}}finally{R&&Wse(L,R)}return L}s(WU,"doAwait");function Wse(v,x){var T=v;return x&&(mt(v)?v.finally?T=v.finally(x):T=v.then(function(R){return x(),R},function(R){throw x(),R}):x()),T}s(Wse,"doFinally");var $U=["pending","resolving","resolved",k1],jU="dispatchEvent",Gw;function GU(v){var x;return v&&v.createEvent&&(x=v.createEvent("Event")),!!x&&x.initEvent}s(GU,"_hasInitEventFn");function uk(v,x,T,R){var L=ic();!Gw&&(Gw=si(!!V(GU,[L]).v));var Q=Gw.v?L.createEvent("Event"):R?new Event(x):{};if(T&&T(Q),Gw.v&&Q.initEvent(x,!1,!0),Q&&v[jU])v[jU](Q);else{var G=v["on"+x];if(G)G(Q);else{var ce=jo("console");ce&&(ce.error||ce.log)(x,Ft(Q))}}}s(uk,"emitEvent");var VU="unhandledRejection",$se=VU.toLowerCase(),Rx=10,dk;function zU(v){return Oe(v)?v.toString():Ft(v)}s(zU,"dumpFnObj");function YU(v,x,T){var R=Hm(arguments,3),L=0,Q=!1,G,ce=[],fe=!1,Ee=null,Re;function Qe(nr,Tr){try{fe=!0,Ee&&Ee.cancel(),Ee=null;var ei=v(function(Li,Mi){ce.push(function(){try{var Oo=L===2?nr:Tr,xn=W(Oo)?G:Oe(Oo)?Oo(G):Oo;mt(xn)?xn.then(Li,Mi):Oo?Li(xn):L===3?Mi(xn):Li(xn)}catch(zr){Mi(zr)}}),Q&&gt()},R);return ei}finally{}}s(Qe,"_then");function Ze(nr){return Qe(void 0,nr)}s(Ze,"_catch");function He(nr){var Tr=nr,ei=nr;return Oe(nr)&&(Tr=s(function(Li){return nr&&nr(),Li},"thenFinally"),ei=s(function(Li){throw nr&&nr(),Li},"catchFinally")),Qe(Tr,ei)}s(He,"_finally");function Ye(){return $U[L]}s(Ye,"_strState");function gt(){if(ce.length>0){var nr=ce.slice();ce=[],fe=!0,Ee&&Ee.cancel(),Ee=null,x(nr)}}s(gt,"_processQueue");function ot(nr,Tr){return function(ei){if(L===Tr){if(nr===2&&mt(ei)){L=1,ei.then(ot(2,1),ot(3,1));return}L=nr,Q=!0,G=ei,gt(),!fe&&nr===3&&!Ee&&(Ee=HA(Tt,Rx))}}}s(ot,"_createSettleIfFn");function Tt(){if(!fe)if(fe=!0,Fm())process.emit(VU,G,Re);else{var nr=Fs()||gi();!dk&&(dk=si(V(jo,[R1+"RejectionEvent"]).v)),uk(nr,$se,function(Tr){return je(Tr,"promise",{g:s(function(){return Re},"g")}),Tr.reason=G,Tr},!!dk.v)}}s(Tt,"_notifyUnhandledRejection"),Re={then:Qe,catch:Ze,finally:He},xe(Re,"state",{get:Ye}),wa()&&(Re[au(11)]="IPromise");function Ht(){return"IPromise "+Ye()+(Q?" - "+zU(G):"")}return s(Ht,"_toString"),Re.toString=Ht,s(function(){Oe(T)||Sr(R1+": executor is not a function - "+zU(T));var Tr=ot(3,0);try{T.call(Re,ot(2,0),Tr)}catch(ei){Tr(ei)}},"_initialize")(),Re}s(YU,"_createPromise");function jse(v){return function(x){var T=Hm(arguments,1);return v(function(R,L){try{var Q=[],G=1;ix(x,function(ce,fe){ce&&(G++,WU(ce,function(Ee){Q[fe]=Ee,--G===0&&R(Q)},L))}),G--,G===0&&R(Q)}catch(ce){L(ce)}},T)}}s(jse,"_createAllPromise");function Gse(v){return si(function(x){var T=Hm(arguments,1);return v(function(R,L){var Q=[],G=1;function ce(fe,Ee){G++,xf(fe,function(Re){Re.rejected?Q[Ee]={status:k1,reason:Re.reason}:Q[Ee]={status:"fulfilled",value:Re.value},--G===0&&R(Q)})}s(ce,"processItem");try{Je(x)?qr(x,ce):nx(x)?ix(x,ce):Sr("Input is not an iterable"),G--,G===0&&R(Q)}catch(fe){L(fe)}},T)})}s(Gse,"_createAllSettledPromise");function KU(v){qr(v,function(x){try{x()}catch{}})}s(KU,"syncItemProcessor");function JU(v){var x=ct(v)?v:0;return function(T){HA(function(){KU(T)},x)}}s(JU,"timeoutItemProcessor");function fk(v,x){return YU(fk,JU(x),v,x)}s(fk,"createAsyncPromise");var pk;function Vse(v,x){!pk&&(pk=si(V(jo,[R1]).v||null));var T=pk.v;if(!T)return fk(v);Oe(v)||Sr(R1+": executor is not a function - "+Ft(v));var R=0;function L(){return $U[R]}s(L,"_strState");var Q=new T(function(G,ce){function fe(Re){R=2,G(Re)}s(fe,"_resolve");function Ee(Re){R=3,ce(Re)}s(Ee,"_reject"),v(fe,Ee)});return xe(Q,"state",{get:L}),Q}s(Vse,"createNativePromise");var hk;function mk(v){return YU(mk,KU,v)}s(mk,"createSyncPromise");function Bd(v,x){return!hk&&(hk=Gse(mk)),hk.v(v,x)}s(Bd,"createSyncAllSettledPromise");var gk;function kx(v,x){return!gk&&(gk=si(Vse)),gk.v.call(this,v,x)}s(kx,"createPromise");var L8=jse(kx),bf=void 0,Ri="",Jm="channels",cc="core",P0="createPerfMgr",Ak="disabled",P1="extensionConfig",Px="extensions",If="processTelemetry",Dx="priority",Bx="eventsSent",Nx="eventsDiscarded",yk="eventsSendRequest",D1="perfEvent",M8="offlineEventsStored",F8="offlineBatchSent",Ck="offlineBatchDrop",Vw="getPerfMgr",vk="domain",Ek="path",XU="Not dynamic - ",O8=/-([a-z])/g,zse=/([^\w\d_$])/g,Yse=/^(\d+[\w\d_$])/;function xk(v){return!ie(v)}s(xk,"isNotNullOrUndefined");function Lx(v){var x=v;return x&&Ae(x)&&(x=x[KA](O8,function(T,R){return R.toUpperCase()}),x=x[KA](zse,"_"),x=x[KA](Yse,function(T,R){return"_"+R})),x}s(Lx,"normalizeJsName");function Sl(v,x){return v&&x?$m(v,x)!==-1:!1}s(Sl,"strContains");function zw(v){return v&&v.toISOString()||""}s(zw,"toISOString");function sl(v){return vt(v)?v[VA]:Ri}s(sl,"getExceptionName");function XA(v,x,T,R,L){var Q=T;return v&&(Q=v[x],Q!==T&&(!L||L(Q))&&(!R||R(T))&&(Q=T,v[x]=Q)),Q}s(XA,"setValue");function ZU(v,x,T){var R;return v?(R=v[x],!R&&ie(R)&&(R=W(T)?{}:T,v[x]=R)):R=W(T)?{}:T,R}s(ZU,"getSetValue");function Kse(v,x){var T=null,R=null;return Oe(v)?T=v:R=v,function(){var L=arguments;if(T&&(R=T()),R)return R[x][ik](R,L)}}s(Kse,"_createProxyFunction");function Yw(v,x,T,R,L){v&&x&&T&&(L!==!1||W(v[x]))&&(v[x]=Kse(T,R))}s(Yw,"proxyFunctionAs");function Q8(v,x,T,R){return v&&x&&Te(v)&&Je(T)&&qr(T,function(L){Ae(L)&&Yw(v,L,x,L,R)}),v}s(Q8,"proxyFunctions");function Jse(v){return function(){function x(){var T=this;v&&le(v,function(R,L){T[R]=L})}return s(x,"class_1"),x}()}s(Jse,"createClassFromInterface");function U8(v){return v&&ft&&(v=S8(ft({},v))),v}s(U8,"optimizeObject");function eq(v,x,T,R,L,Q){var G=arguments,ce=G[0]||{},fe=G[ai],Ee=!1,Re=1;for(fe>0&&St(ce)&&(Ee=ce,ce=G[Re]||{},Re++),Te(ce)||(ce={});Re<fe;Re++){var Qe=G[Re],Ze=Je(Qe),He=Te(Qe);for(var Ye in Qe){var gt=Ze&&Ye in Qe||He&&We(Qe,Ye);if(gt){var ot=Qe[Ye],Tt=void 0;if(Ee&&ot&&((Tt=Je(ot))||Yu(ot))){var Ht=ce[Ye];Tt?Je(Ht)||(Ht=[]):Yu(Ht)||(Ht={}),ot=eq(Ee,Ht,ot)}ot!==void 0&&(ce[Ye]=ot)}}}return ce}s(eq,"objExtend");function bk(v){try{return v.responseText}catch{}return null}s(bk,"getResponseText");function tq(v,x){return v?"XDomainRequest,Response:"+bk(v)||"":x}s(tq,"formatErrorMessageXdr");function Ik(v,x){return v?"XMLHttpRequest,Status:"+v[jw]+",Response:"+bk(v)||v.response||"":x}s(Ik,"formatErrorMessageXhr");function rq(v,x){return x&&(ct(x)?v=[x].concat(v):Je(x)&&(v=x.concat(v))),v}s(rq,"prependTransports");var q8="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Kw="withCredentials",Kp="timeout";function H8(v,x,T,R,L,Q){R===void 0&&(R=!1),L===void 0&&(L=!1);function G(fe,Ee,Re){try{fe[Ee]=Re}catch{}}s(G,"_wrapSetXhrProp");var ce=new XMLHttpRequest;return R&&G(ce,q8,R),T&&G(ce,Kw,T),ce.open(v,x,!L),T&&G(ce,Kw,T),!L&&Q&&G(ce,Kp,Q),ce}s(H8,"openXhr");function nq(v){var x={};if(Ae(v)){var T=zi(v)[YA](/[\r\n]+/);qr(T,function(R){if(R){var L=R.indexOf(": ");if(L!==-1){var Q=zi(R.substring(0,L))[Cx](),G=zi(R.substring(L+1));x[Q]=G}else x[zi(R)]=1}})}return x}s(nq,"convertAllHeadersToMap");function ZA(v,x,T){if(!v[T]&&x&&x.getResponseHeader){var R=x.getResponseHeader(T);R&&(v[T]=zi(R))}return v}s(ZA,"_appendHeader");var Dn="kill-duration",Mx="kill-duration-seconds",B1="time-delta-millis";function N1(v,x){var T={};return v[P8]?T=nq(v[P8]()):x&&(T=ZA(T,v,B1),T=ZA(T,v,Dn),T=ZA(T,v,Mx)),T}s(N1,"_getAllResponseHeaders");var W8="documentMode",Jw="location",Fx="console",Tk="JSON",$8="crypto",wk="msCrypto",Ox="msie",L1="trident/",j8="XMLHttpRequest",Tf=null,Qx=null,Jp=!1,Ku=null,Ux=null;function Xw(v,x){var T=!1;if(v){try{if(T=x in v,!T){var R=v[qw];R&&(T=x in R)}}catch{}if(!T)try{var L=new v;T=!W(L[x])}catch{}}return T}s(Xw,"_hasProperty");function qx(v){if(v&&Jp){var x=jo("__mockLocation");if(x)return x}return typeof location===LU&&location?location:jo(Jw)}s(qx,"getLocation");function Zw(){return typeof console!==MU?console:jo(Fx)}s(Zw,"getConsole");function Hx(){return!!(typeof JSON===LU&&JSON||jo(Tk)!==null)}s(Hx,"hasJSON");function Nd(){return Hx()?JSON||jo(Tk):null}s(Nd,"getJSON");function _k(){return jo($8)}s(_k,"getCrypto");function Sk(){return jo(wk)}s(Sk,"getMsCrypto");function D0(){var v=oc();if(v&&(v[lk]!==Qx||Tf===null)){Qx=v[lk];var x=(Qx||Ri)[Cx]();Tf=Sl(x,Ox)||Sl(x,L1)}return Tf}s(D0,"isIE");function Wx(v){if(v===void 0&&(v=null),!v){var x=oc()||{};v=x?(x.userAgent||Ri)[Cx]():Ri}var T=(v||Ri)[Cx]();if(Sl(T,Ox)){var R=ic()||{};return Pe(parseInt(T[YA](Ox)[1]),R[W8]||0)}else if(Sl(T,L1)){var L=parseInt(T[YA](L1)[1]);if(L)return L+4}return null}s(Wx,"getIEVersion");function ey(v){return(Ux===null||v===!1)&&(Ux=Gu()&&!!oc().sendBeacon),Ux}s(ey,"isBeaconsSupported");function e_(v){var x=!1;try{x=!!jo("fetch");var T=jo("Request");x&&v&&T&&(x=Xw(T,"keepalive"))}catch{}return x}s(e_,"isFetchSupported");function G8(){return Ku===null&&(Ku=typeof XDomainRequest!==MU,Ku&&V8()&&(Ku=Ku&&!Xw(jo(j8),"withCredentials"))),Ku}s(G8,"useXDomainRequest");function V8(){var v=!1;try{var x=jo(j8);v=!!x}catch{}return v}s(V8,"isXhrSupported");var al=4294967296,Xp=4294967295,Rk=123456789,z8=987654321,Xm=!1,wf=Rk,$x=z8;function Y8(v){v<0&&(v>>>=0),wf=Rk+v&Xp,$x=z8-v&Xp,Xm=!0}s(Y8,"_mwcSeed");function iq(){try{var v=zu()&2147483647;Y8((Math.random()*al^v)+v)}catch{}}s(iq,"_autoSeedMwc");function K8(v){var x=0,T=_k()||Sk();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&Xp),x===0&&D0()&&(Xm||iq(),x=oq()&Xp),x===0&&(x=UA(al*Math.random()|0)),v||(x>>>=0),x}s(K8,"random32");function oq(v){$x=36969*($x&65535)+($x>>16)&Xp,wf=18e3*(wf&65535)+(wf>>16)&Xp;var x=($x<<16)+(wf&65535)>>>0&Xp|0;return v||(x>>>=0),x}s(oq,"mwcRandom32");function Xse(v){v===void 0&&(v=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=K8()>>>0,R=0,L=Ri;L[ai]<v;)R++,L+=x.charAt(T&63),T>>>=6,R===5&&(T=(K8()<<2&4294967295|T&3)>>>0,R=0);return L}s(Xse,"newId");var jx="3.3.6",Zse="."+Xse(6),eae=0;function sq(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}s(sq,"_canAcceptData");function aq(v,x){var T=x[v.id];if(!T){T={};try{sq(x)&&je(x,v.id,{e:!1,v:T})}catch{}}return T}s(aq,"_getCache");function Zm(v,x){return x===void 0&&(x=!1),Lx(v+eae+++(x?"."+jx:Ri)+Zse)}s(Zm,"createUniqueNamespace");function cq(v){var x={id:Zm("_aiData-"+(v||Ri)+"."+jx),accept:s(function(T){return sq(T)},"accept"),get:s(function(T,R,L,Q){var G=T[x.id];return G?G[Lx(R)]:(Q&&(G=aq(x,T),G[Lx(R)]=L),L)},"get"),kill:s(function(T,R){if(T&&T[R])try{delete T[R]}catch{}},"kill")};return x}s(cq,"createElmNodeData");function Gx(v){return v&&Te(v)&&(v.isVal||v.fb||We(v,"v")||We(v,"mrg")||We(v,"ref")||v.set)}s(Gx,"_isConfigDefaults");function lq(v,x,T){var R,L=T.dfVal||te;if(x&&T.fb){var Q=T.fb;Je(Q)||(Q=[Q]);for(var G=0;G<Q[ai];G++){var ce=Q[G],fe=x[ce];if(L(fe)?R=fe:v&&(fe=v.cfg[ce],L(fe)&&(R=fe),v.set(v.cfg,Lt(ce),fe)),L(R))break}}return!L(R)&&L(T.v)&&(R=T.v),R}s(lq,"_getDefault");function J8(v,x,T){var R=T;if(T&&Gx(T)&&(R=lq(v,x,T)),R){Gx(R)&&(R=J8(v,x,R));var L;Je(R)?(L=[],L[ai]=R[ai]):Yu(R)&&(L={}),L&&(le(R,function(Q,G){G&&Gx(G)&&(G=J8(v,x,G)),L[Q]=G}),R=L)}return R}s(J8,"_resolveDefaultValue");function X8(v,x,T,R){var L,Q,G,ce=R,fe,Ee,Re,Qe;Gx(ce)?(L=ce.isVal,Q=ce.set,Re=ce.rdOnly,Qe=ce.blkVal,fe=ce.mrg,Ee=ce.ref,!Ee&&W(Ee)&&(Ee=!!fe),G=lq(v,x,ce)):G=R,Qe&&v.blkVal(x,T);var Ze,He=!0,Ye=x[T];(Ye||!ie(Ye))&&(Ze=Ye,He=!1,L&&Ze!==G&&!L(Ze)&&(Ze=G,He=!0),Q&&(Ze=Q(Ze,G,x),He=Ze===G)),He?G?Ze=J8(v,x,G):Ze=G:(Yu(Ze)||Je(G))&&fe&&G&&(Yu(G)||Je(G))&&le(G,function(gt,ot){X8(v,Ze,gt,ot)}),v.set(x,T,Ze),Ee&&v.ref(x,T),Re&&v.rdOnly(x,T)}s(X8,"_applyDefaultValue");var ty=Um("[[ai_dynCfg_1]]"),uq=Um("[[ai_blkDynCfg_1]]"),dq=Um("[[ai_frcDynCfg_1]]");function fq(v){if(v){var x;if(Je(v)?(x=[],x[ai]=v[ai]):Yu(v)&&(x={}),x)return le(v,function(T,R){x[T]=fq(R)}),x}return v}s(fq,"_cfgDeepCopy");function tae(v){if(v){var x=v[ty]||v;if(x.cfg&&(x.cfg===v||x.cfg[ty]===x))return x}return null}s(tae,"getDynamicConfigHandler");function rae(v){if(v&&(Yu(v)||Je(v)))try{v[uq]=!0}catch{}return v}s(rae,"blockDynamicConversion");function Z8(v,x,T){var R=!1;return T&&!v[x.blkVal]&&(R=T[dq],!R&&!T[uq]&&(R=Yu(T)||Je(T))),R}s(Z8,"_canMakeDynamic");function Vx(v){Sr("InvalidAccess:"+v)}s(Vx,"throwInvalidAccess");var nae=["push","pop","shift","unshift","splice"],t_=s(function(v,x,T,R){v&&v[T1](3,108,"".concat(T," [").concat(x,"] failed - ")+Ft(R))},"_throwDynamicError");function ry(v,x,T){Je(x)&&qr(nae,function(R){var L=x[R];x[R]=function(){for(var Q=[],G=0;G<arguments.length;G++)Q[G]=arguments[G];var ce=L[ik](this,Q);return Kx(v,x,T,"Patching"),ce}})}s(ry,"_patchArray");function B0(v,x){var T=Ue(v,x);return T&&T.get}s(B0,"_getOwnPropGetter");function pq(v,x,T,R){var L={n:T,h:[],trk:s(function(Ee){Ee&&Ee.fn&&(sc(L.h,Ee)===-1&&L.h[fo](Ee),v.trk(Ee,L))},"trk"),clr:s(function(Ee){var Re=sc(L.h,Ee);Re!==-1&&L.h[Ex](Re,1)},"clr")},Q=!0,G=!1;function ce(){Q&&(G=G||Z8(ce,v,R),R&&!R[ty]&&G&&(R=Kx(v,R,T,"Converting")),Q=!1);var Ee=v.act;return Ee&&L.trk(Ee),R}s(ce,"_getProperty"),ce[v.prop]={chng:s(function(){v.add(L)},"chng")};function fe(Ee){if(R!==Ee){ce[v.ro]&&!v.upd&&Vx("["+T+"] is read-only:"+Ft(x)),Q&&(G=G||Z8(ce,v,R),Q=!1);var Re=G&&ce[v.rf];if(G)if(Re){le(R,function(Ze){R[Ze]=Ee?Ee[Ze]:bf});try{le(Ee,function(Ze,He){zx(v,R,Ze,He)}),Ee=R}catch(Ze){t_((v.hdlr||{})[ac],T,"Assigning",Ze),G=!1}}else R&&R[ty]&&le(R,function(Ze){var He=B0(R,Ze);if(He){var Ye=He[v.prop];Ye&&Ye.chng()}});if(Ee!==R){var Qe=Ee&&Z8(ce,v,Ee);!Re&&Qe&&(Ee=Kx(v,Ee,T,"Converting")),R=Ee,G=Qe}v.add(L)}}s(fe,"_setProperty"),je(x,L.n,{g:ce,s:fe})}s(pq,"_createDynamicProperty");function zx(v,x,T,R){if(x){var L=B0(x,T),Q=L&&!!L[v.prop];Q?x[T]=R:pq(v,x,T,R)}return x}s(zx,"_setDynamicProperty");function Yx(v,x,T,R){if(x){var L=B0(x,T),Q=L&&!!L[v.prop],G=R&&R[0],ce=R&&R[1],fe=R&&R[2];if(!Q){if(fe)try{rae(x)}catch(Ee){t_((v.hdlr||{})[ac],T,"Blocking",Ee)}try{zx(v,x,T,x[T]),L=B0(x,T)}catch(Ee){t_((v.hdlr||{})[ac],T,"State",Ee)}}G&&(L[v.rf]=G),ce&&(L[v.ro]=ce),fe&&(L[v.blkVal]=!0)}return x}s(Yx,"_setDynamicPropertyState");function Kx(v,x,T,R){try{le(x,function(L,Q){zx(v,x,L,Q)}),x[ty]||(xe(x,ty,{get:s(function(){return v.hdlr},"get")}),ry(v,x,T))}catch(L){t_((v.hdlr||{})[ac],T,R,L)}return x}s(Kx,"_makeDynamicObject");var r_="[[ai_",n_="]]";function iae(v){var x=Vu(r_+"get"+v.uid+n_),T=Vu(r_+"ro"+v.uid+n_),R=Vu(r_+"rf"+v.uid+n_),L=Vu(r_+"blkVal"+v.uid+n_),Q=Vu(r_+"dtl"+v.uid+n_),G=null,ce=null,fe;function Ee(He,Ye){var gt=fe.act;try{fe.act=He,He&&He[Q]&&(qr(He[Q],function(Tt){Tt.clr(He)}),He[Q]=[]),Ye({cfg:v.cfg,set:v.set.bind(v),setDf:v.setDf.bind(v),ref:v.ref.bind(v),rdOnly:v.rdOnly.bind(v)})}catch(Tt){var ot=v[ac];throw ot&&ot[T1](1,107,Ft(Tt)),Tt}finally{fe.act=gt||null}}s(Ee,"_useHandler");function Re(){if(G){var He=G;G=null,ce&&ce[xx](),ce=null;var Ye=[];if(qr(He,function(gt){if(gt&&(gt[Q]&&(qr(gt[Q],function(ot){ot.clr(gt)}),gt[Q]=null),gt.fn))try{Ee(gt,gt.fn)}catch(ot){Ye[fo](ot)}}),G)try{Re()}catch(gt){Ye[fo](gt)}Ye[ai]>0&&N8("Watcher error(s): ",Ye)}}s(Re,"_notifyWatchers");function Qe(He){if(He&&He.h[ai]>0){G||(G=[]),ce||(ce=HA(function(){ce=null,Re()},0));for(var Ye=0;Ye<He.h[ai];Ye++){var gt=He.h[Ye];gt&&sc(G,gt)===-1&&G[fo](gt)}}}s(Qe,"_addWatcher");function Ze(He,Ye){if(He){var gt=He[Q]=He[Q]||[];sc(gt,Ye)===-1&&gt[fo](Ye)}}return s(Ze,"_trackHandler"),fe={prop:x,ro:T,rf:R,blkVal:L,hdlr:v,add:Qe,notify:Re,use:Ee,trk:Ze},fe}s(iae,"_createState");function kk(v,x){var T={fn:x,rm:s(function(){T.fn=null,v=null,x=null},"rm")};return je(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),v.use(T,x),T}s(kk,"_createAndUseHandler");function hq(v,x,T){var R=tae(x);if(R)return R;var L=Zm("dyncfg",!0),Q=x&&T!==!1?x:fq(x),G;function ce(){G.notify()}s(ce,"_notifyWatchers");function fe(ot,Tt,Ht){try{ot=zx(G,ot,Tt,Ht)}catch(nr){t_(v,Tt,"Setting value",nr)}return ot[Tt]}s(fe,"_setValue");function Ee(ot){return kk(G,ot)}s(Ee,"_watch");function Re(ot,Tt){G.use(null,function(Ht){var nr=G.upd;try{W(Tt)||(G.upd=Tt),ot(Ht)}finally{G.upd=nr}})}s(Re,"_block");function Qe(ot,Tt){var Ht;return Yx(G,ot,Tt,(Ht={},Ht[0]=!0,Ht))[Tt]}s(Qe,"_ref");function Ze(ot,Tt){var Ht;return Yx(G,ot,Tt,(Ht={},Ht[1]=!0,Ht))[Tt]}s(Ze,"_rdOnly");function He(ot,Tt){var Ht;return Yx(G,ot,Tt,(Ht={},Ht[2]=!0,Ht))[Tt]}s(He,"_blkPropValue");function Ye(ot,Tt){return Tt&&le(Tt,function(Ht,nr){X8(gt,ot,Ht,nr)}),ot}s(Ye,"_applyDefaults");var gt={uid:null,cfg:Q,logger:v,notify:ce,set:fe,setDf:Ye,watch:Ee,ref:Qe,rdOnly:Ze,blkVal:He,_block:Re};return je(gt,"uid",{c:!1,e:!1,w:!1,v:L}),G=iae(gt),Kx(G,Q,"config","Creating"),gt}s(hq,"_createDynamicHandler");function mq(v,x){v?(v[vx](x),v[T1](2,108,x)):Vx(x)}s(mq,"_logInvalidAccess");function _f(v,x,T,R){var L=hq(T,v||{},R);return x&&L.setDf(L.cfg,x),L}s(_f,"createDynamicConfig");function eg(v,x,T){var R=v[ty]||v;return R.cfg&&(R.cfg===v||R.cfg[ty]===R)?R[Vm](x):(mq(T,XU+Ft(v)),_f(v,null,T)[Vm](x))}s(eg,"onConfigChange");function Jx(v,x){if(v&&v[w1])return v[w1](x)}s(Jx,"runTargetUnload");function gq(v,x,T){var R;return T||(R=kx(function(L){T=L})),v&&Nse(v)>0?xf(Jx(v[0],x),function(){gq(Hm(v,1),x,T)}):T(),R}s(gq,"doUnloadAll");var oae=500,Aq="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function sae(v,x,T){return!v&&ie(v)?x:St(v)?v:Lt(v)[Cx]()==="true"}s(sae,"_stringToBoolOrDefault");function aae(v){return{mrg:!0,v}}s(aae,"cfgDfMerge");function e9(v,x,T){return{fb:T,isVal:v,v:x}}s(e9,"cfgDfValidate");function Zp(v,x){return{fb:x,set:sae,v:!!v}}s(Zp,"cfgDfBoolean");var Pk=[Bx,Nx,yk,D1],Dk=null,Bk;function cae(v,x){return function(){var T=arguments,R=yq(x);if(R){var L=R.listener;L&&L[v]&&L[v][ik](L,T)}}}s(cae,"_listenerProxyFunc");function lae(){var v=jo("Microsoft");return v&&(Dk=v.ApplicationInsights),Dk}s(lae,"_getExtensionNamespace");function yq(v){var x=Dk;return!x&&v.disableDbgExt!==!0&&(x=Dk||lae()),x?x.ChromeDbgExt:null}s(yq,"getDebugExt");function uae(v){if(!Bk){Bk={};for(var x=0;x<Pk[ai];x++)Bk[Pk[x]]=cae(Pk[x],v)}return Bk}s(uae,"getDebugListener");var Xx,Cq="warnToConsole",dae="AI (Internal): ",fae="AI: ",pae="AITR_",vq={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Zx=(Xx={},Xx[0]=null,Xx[1]="errorToConsole",Xx[2]=Cq,Xx[3]="debugToConsole",Xx);function Ld(v){return v?'"'+v[KA](/\"/g,Ri)+'"':Ri}s(Ld,"_sanitizeDiagnosticText");function i_(v,x){var T=Zw();if(T){var R="log";T[v]&&(R=v),Oe(T[R])&&T[R](x)}}s(i_,"_logToConsole");var Nk=function(){function v(x,T,R,L){R===void 0&&(R=!1);var Q=this;Q[ak]=x,Q[S1]=(R?fae:dae)+x;var G=Ri;Hx()&&(G=Nd().stringify(L));var ce=(T?" message:"+Ld(T):Ri)+(L?" props:"+Ld(G):Ri);Q[S1]+=ce}return s(v,"_InternalLogMessage"),v.dataType="MessageData",v}();function o_(v,x){return(v||{})[ac]||new s_(x)}s(o_,"safeGetLogger");var s_=function(){function v(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,R={},L,Q,G,ce,fe;cu(v,this,function(Ee){fe=Qe(x||{}),Ee.consoleLoggingLevel=function(){return L},Ee[T1]=function(Ye,gt,ot,Tt,Ht){Ht===void 0&&(Ht=!1);var nr=new Nk(gt,ot,Ht,Tt);if(ce)throw Ft(nr);var Tr=Zx[Ye]||Cq;if(W(nr[S1]))He("throw"+(Ye===1?"Critical":"Warning"),nr);else{if(Ht){var ei=+nr[ak];!R[ei]&&L>=Ye&&(Ee[Tr](nr[S1]),R[ei]=!0)}else L>=Ye&&Ee[Tr](nr[S1]);Re(Ye,nr)}},Ee.debugToConsole=function(Ye){i_("debug",Ye),He("warning",Ye)},Ee[vx]=function(Ye){i_("warn",Ye),He("warning",Ye)},Ee.errorToConsole=function(Ye){i_("error",Ye),He("error",Ye)},Ee.resetInternalMessageCount=function(){T=0,R={}},Ee.logInternalMessage=Re,Ee[w1]=function(Ye){fe&&fe.rm(),fe=null};function Re(Ye,gt){if(!Ze()){var ot=!0,Tt=pae+gt[ak];if(R[Tt]?ot=!1:R[Tt]=!0,ot&&(Ye<=Q&&(Ee.queue[fo](gt),T++,He(Ye===1?"error":"warn",gt)),T===G)){var Ht="Internal events throttle limit per PageView reached for this app.",nr=new Nk(23,Ht,!1);Ee.queue[fo](nr),Ye===1?Ee.errorToConsole(Ht):Ee[vx](Ht)}}}s(Re,"_logInternalMessage");function Qe(Ye){return eg(_f(Ye,vq,Ee).cfg,function(gt){var ot=gt.cfg;L=ot[UU],Q=ot.loggingLevelTelemetry,G=ot.maxMessageLimit,ce=ot.enableDebug})}s(Qe,"_setDefaultsFromConfig");function Ze(){return T>=G}s(Ze,"_areInternalMessagesThrottled");function He(Ye,gt){var ot=yq(x||{});ot&&ot[zp]&&ot[zp](Ye,gt)}s(He,"_debugExtMsg")})}return s(v,"DiagnosticLogger"),v.__ieDyn=1,v}();function t9(v){return v||new s_}s(t9,"_getLogger");function Nr(v,x,T,R,L,Q){Q===void 0&&(Q=!1),t9(v)[T1](x,T,R,L,Q)}s(Nr,"_throwInternal");function Lk(v,x){t9(v)[vx](x)}s(Lk,"_warnToConsole");var a_,ny,Eq="toGMTString",xq="toUTCString",Mk="cookie",tg="expires",bq="isCookieUseDisabled",Fk="disableCookiesUsage",Iq="_ckMgr",Ok=null,eb=null,Qk=null,eh,Tq={},wq={},_q=(a_={cookieCfg:aae((ny={},ny[vk]={fb:"cookieDomain",dfVal:xk},ny.path={fb:"cookiePath",dfVal:xk},ny.enabled=bf,ny.ignoreCookies=bf,ny.blockedCookies=bf,ny)),cookieDomain:bf,cookiePath:bf},a_[Fk]=bf,a_);function r9(){!eh&&(eh=mr(function(){return ic()}))}s(r9,"_getDoc");function c_(v){return v?v.isEnabled():!0}s(c_,"_isMgrEnabled");function n9(v,x){return x&&v&&Je(v.ignoreCookies)?sc(v.ignoreCookies,x)!==-1:!1}s(n9,"_isIgnoredCookie");function hae(v,x){return x&&v&&Je(v.blockedCookies)&&sc(v.blockedCookies,x)!==-1?!0:n9(v,x)}s(hae,"_isBlockedCookie");function i9(v,x){var T=x[Gp];if(ie(T)){var R=void 0;W(v[bq])||(R=!v[bq]),W(v[Fk])||(R=!v[Fk]),T=R}return T}s(i9,"_isCfgEnabled");function mae(v,x){var T,R,L,Q,G,ce,fe,Ee;v=_f(v||wq,null,x).cfg,Q=eg(v,function(Qe){Qe.setDf(Qe.cfg,_q),T=Qe.ref(Qe.cfg,"cookieCfg"),R=T[Ek]||"/",L=T[vk],G=i9(v,T)!==!1,ce=T.getCookie||gae,fe=T.setCookie||tb,Ee=T.delCookie||tb},x);var Re={isEnabled:s(function(){var Qe=i9(v,T)!==!1&&G&&Sq(x),Ze=wq[Iq];return Qe&&Ze&&Re!==Ze&&(Qe=c_(Ze)),Qe},"isEnabled"),setEnabled:s(function(Qe){G=Qe!==!1,T[Gp]=Qe},"setEnabled"),set:s(function(Qe,Ze,He,Ye,gt){var ot=!1;if(c_(Re)&&!hae(T,Qe)){var Tt={},Ht=zi(Ze||Ri),nr=$m(Ht,";");if(nr!==-1&&(Ht=zi(D(Ze,nr)),Tt=o9(Ce(Ze,nr+1))),XA(Tt,vk,Ye||L,ue,W),!ie(He)){var Tr=D0();if(W(Tt[tg])){var ei=zu(),Li=ei+He*1e3;if(Li>0){var Mi=new Date;Mi.setTime(Li),XA(Tt,tg,Rq(Mi,Tr?Eq:xq)||Rq(Mi,Tr?Eq:xq)||Ri,ue)}}Tr||XA(Tt,"max-age",Ri+He,null,W)}var Oo=qx();Oo&&Oo.protocol==="https:"&&(XA(Tt,"secure",null,null,W),eb===null&&(eb=!Aae((oc()||{})[lk])),eb&&XA(Tt,"SameSite","None",null,W)),XA(Tt,Ek,gt||R,null,W),fe(Qe,kq(Ht,Tt)),ot=!0}return ot},"set"),get:s(function(Qe){var Ze=Ri;return c_(Re)&&!n9(T,Qe)&&(Ze=ce(Qe)),Ze},"get"),del:s(function(Qe,Ze){var He=!1;return c_(Re)&&(He=Re.purge(Qe,Ze)),He},"del"),purge:s(function(Qe,Ze){var He,Ye=!1;if(Sq(x)){var gt=(He={},He[Ek]=Ze||"/",He[tg]="Thu, 01 Jan 1970 00:00:01 GMT",He);D0()||(gt["max-age"]="0"),Ee(Qe,kq(Ri,gt)),Ye=!0}return Ye},"purge"),unload:s(function(Qe){Q&&Q.rm(),Q=null},"unload")};return Re[Iq]=Re,Re}s(mae,"createCookieMgr");function Sq(v){if(Ok===null){Ok=!1,!eh&&r9();try{var x=eh.v||{};Ok=x[Mk]!==void 0}catch(T){Nr(v,2,68,"Cannot access document.cookie - "+sl(T),{exception:Ft(T)})}}return Ok}s(Sq,"areCookiesSupported");function o9(v){var x={};if(v&&v[ai]){var T=zi(v)[YA](";");qr(T,function(R){if(R=zi(R||Ri),R){var L=$m(R,"=");L===-1?x[R]=null:x[zi(D(R,L))]=zi(Ce(R,L+1))}})}return x}s(o9,"_extractParts");function Rq(v,x){return Oe(v[x])?v[x]():null}s(Rq,"_formatDate");function kq(v,x){var T=v||Ri;return le(x,function(R,L){T+="; "+R+(ie(L)?Ri:"="+L)}),T}s(kq,"_formatCookieValue");function gae(v){var x=Ri;if(!eh&&r9(),eh.v){var T=eh.v[Mk]||Ri;Qk!==T&&(Tq=o9(T),Qk=T),x=zi(Tq[v]||Ri)}return x}s(gae,"_getCookieValue");function tb(v,x){!eh&&r9(),eh.v&&(eh.v[Mk]=v+"="+x)}s(tb,"_setCookieValue");function Aae(v){return Ae(v)?!!(Sl(v,"CPU iPhone OS 12")||Sl(v,"iPad; CPU OS 12")||Sl(v,"Macintosh; Intel Mac OS X 10_14")&&Sl(v,"Version/")&&Sl(v,"Safari")||Sl(v,"Macintosh; Intel Mac OS X 10_14")&&NU(v,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Sl(v,"Chrome/5")||Sl(v,"Chrome/6")||Sl(v,"UnrealEngine")&&!Sl(v,"Chrome")||Sl(v,"UCBrowser/12")||Sl(v,"UCBrowser/11")):!1}s(Aae,"uaDisallowsSameSiteNone");var s9={perfEvtsSendAll:!1};function yae(v){v.h=null;var x=v.cb;v.cb=[],qr(x,function(T){V(T.fn,[T.arg])})}s(yae,"_runScheduledListeners");function iy(v,x,T,R){qr(v,function(L){L&&L[x]&&(T?(T.cb[fo]({fn:R,arg:L}),T.h=T.h||HA(yae,0,T)):V(R,[L]))})}s(iy,"_runListeners");var Cae=function(){function v(x){this.listeners=[];var T,R,L=[],Q={h:null,cb:[]},G=_f(x,s9);R=G[Vm](function(ce){T=!!ce.cfg.perfEvtsSendAll}),cu(v,this,function(ce){je(ce,"listeners",{g:s(function(){return L},"g")}),ce[ok]=function(fe){L[fo](fe)},ce[$w]=function(fe){for(var Ee=sc(L,fe);Ee>-1;)L[Ex](Ee,1),Ee=sc(L,fe)},ce[Bx]=function(fe){iy(L,Bx,Q,function(Ee){Ee[Bx](fe)})},ce[Nx]=function(fe,Ee){iy(L,Nx,Q,function(Re){Re[Nx](fe,Ee)})},ce[yk]=function(fe,Ee){iy(L,yk,Ee?Q:null,function(Re){Re[yk](fe,Ee)})},ce[D1]=function(fe){fe&&(T||!fe[D8]())&&iy(L,D1,null,function(Ee){fe.isAsync?HA(function(){return Ee[D1](fe)},0):Ee[D1](fe)})},ce[M8]=function(fe){fe&&fe[ai]&&iy(L,M8,Q,function(Ee){Ee[M8](fe)})},ce[F8]=function(fe){fe&&fe[_x]&&iy(L,F8,Q,function(Ee){Ee[F8](fe)})},ce[Ck]=function(fe,Ee){if(fe>0){var Re=Ee||0;iy(L,Ck,Q,function(Qe){Qe[Ck](fe,Re)})}},ce[w1]=function(fe){var Ee=s(function(){R&&R.rm(),R=null,L=[],Q.h&&Q.h[xx](),Q.h=null,Q.cb=[]},"_finishUnload"),Re;if(iy(L,"unload",null,function(Qe){var Ze=Qe[w1](fe);Ze&&(Re||(Re=[]),Re[fo](Ze))}),Re)return kx(function(Qe){return xf(L8(Re),function(){Ee(),Qe()})});Ee()}})}return s(v,"NotificationManager"),v.__ieDyn=1,v}(),rb="ctx",a9="ParentContextKey",l_="ChildrenContextKey",vae=null,Uk=function(){function v(x,T,R){var L=this;if(L.start=zu(),L[VA]=x,L.isAsync=R,L[D8]=function(){return!1},Oe(T)){var Q;je(L,"payload",{g:s(function(){return!Q&&Oe(T)&&(Q=T(),T=null),Q},"g")})}L[JA]=function(G){return G?G===v[a9]||G===v[l_]?L[G]:(L[rb]||{})[G]:null},L[k0]=function(G,ce){if(G)if(G===v[a9])L[G]||(L[D8]=function(){return!0}),L[G]=ce;else if(G===v[l_])L[G]=ce;else{var fe=L[rb]=L[rb]||{};fe[G]=ce}},L.complete=function(){var G=0,ce=L[JA](v[l_]);if(Je(ce))for(var fe=0;fe<ce[ai];fe++){var Ee=ce[fe];Ee&&(G+=Ee.time)}L.time=zu()-L.start,L.exTime=L.time-G,L.complete=function(){}}}return s(v,"PerfEvent"),v.ParentContextKey="parent",v.ChildrenContextKey="childEvts",v}(),Eae=function(){function v(x){this.ctx={},cu(v,this,function(T){T.create=function(R,L,Q){return new Uk(R,L,Q)},T.fire=function(R){R&&(R.complete(),x&&Oe(x[D1])&&x[D1](R))},T[k0]=function(R,L){if(R){var Q=T[rb]=T[rb]||{};Q[R]=L}},T[JA]=function(R){return(T[rb]||{})[R]}})}return s(v,"PerfManager"),v.__ieDyn=1,v}(),th="CoreUtils.doPerf";function nb(v,x,T,R,L){if(v){var Q=v;if(Q[Vw]&&(Q=Q[Vw]()),Q){var G=void 0,ce=Q[JA](th);try{if(G=Q.create(x(),R,L),G){if(ce&&G[k0]&&(G[k0](Uk[a9],ce),ce[JA]&&ce[k0])){var fe=ce[JA](Uk[l_]);fe||(fe=[],ce[k0](Uk[l_],fe)),fe[fo](G)}return Q[k0](th,G),T(G)}}catch(Ee){G&&G[k0]&&G[k0]("exception",Ee)}finally{G&&Q.fire(G),Q[k0](th,ce)}}}return T()}s(nb,"doPerf");function lc(){return vae}s(lc,"getGblPerfMgr");var qk="00000000000000000000000000000000",ib="0000000000000000";function Hk(v,x,T){return v&&v[ai]===x&&v!==T?!!v.match(/^[\da-f]*$/i):!1}s(Hk,"_isValid");function oy(v){return Hk(v,32,qk)}s(oy,"isValidTraceId");function M1(v){return Hk(v,16,ib)}s(M1,"isValidSpanId");var u_=cq("plugin");function sy(v){return u_.get(v,"state",{},!0)}s(sy,"_getPluginState");function c9(v,x){for(var T=[],R=null,L=v[Yp](),Q;L;){var G=L[Ix]();if(G){R&&R[zA]&&G[If]&&R[zA](G),Q=sy(G);var ce=!!Q[jp];G[jp]&&(ce=G[jp]()),ce||T[fo](G),R=G,L=L[Yp]()}}qr(T,function(fe){var Ee=v[cc]();fe[Ww](v.getCfg(),Ee,x,v[Yp]()),Q=sy(fe),!fe[cc]&&!Q[cc]&&(Q[cc]=Ee),Q[jp]=!0,delete Q[Vp]})}s(c9,"initializePlugins");function l9(v){return v.sort(function(x,T){var R=0;if(T){var L=T[If];x[If]?R=L?x[Dx]-T[Dx]:1:L&&(R=-1)}else R=x?1:-1;return R})}s(l9,"sortPlugins");function xae(v){var x={};return{getName:s(function(){return x[VA]},"getName"),setName:s(function(T){v&&v.setName(T),x[VA]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){v&&v.setTraceId(T),oy(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){v&&v.setSpanId(T),M1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[HU]},"getTraceFlags"),setTraceFlags:s(function(T){v&&v.setTraceFlags(T),x[HU]=T},"setTraceFlags")}}s(xae,"createDistributedTraceContext");var bae="TelemetryPluginChain",Pq="_hasRun",u9="_getTelCtx",Dq=0;function Iae(v,x,T){for(;v;){if(v[Ix]()===T)return v;v=v[Yp]()}return N([T],x.config||{},x)}s(Iae,"_getNextProxyStart");function d9(v,x,T,R){var L=null,Q=[];x||(x=_f({},null,T[ac])),R!==null&&(L=R?Iae(v,T,R):v);var G={_next:fe,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return o_(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Re,getConfig:Qe,hasNext:s(function(){return!!L},"hasNext"),getNext:s(function(){return L},"getNext"),setNext:s(function(He){L=He},"setNext"),iterate:Ze,onComplete:ce}};function ce(He,Ye){for(var gt=[],ot=2;ot<arguments.length;ot++)gt[ot-2]=arguments[ot];He&&Q[fo]({func:He,self:W(Ye)?G.ctx:Ye,args:gt})}s(ce,"_addOnComplete");function fe(){var He=L;if(L=He?He[Yp]():null,!He){var Ye=Q;Ye&&Ye[ai]>0&&(qr(Ye,function(gt){try{gt.func.call(gt.self,gt.args)}catch(ot){Nr(T[ac],2,73,"Unexpected Exception during onComplete - "+Ft(ot))}}),Q=[])}return He}s(fe,"_moveNext");function Ee(He,Ye){var gt=null,ot=x.cfg;if(ot&&He){var Tt=ot[P1];!Tt&&Ye&&(Tt={}),ot[P1]=Tt,Tt=x.ref(ot,P1),Tt&&(gt=Tt[He],!gt&&Ye&&(gt={}),Tt[He]=gt,gt=x.ref(Tt,He))}return gt}s(Ee,"_getExtCfg");function Re(He,Ye){var gt=Ee(He,!0);return Ye&&le(Ye,function(ot,Tt){if(ie(gt[ot])){var Ht=x.cfg[ot];(Ht||!ie(Ht))&&(gt[ot]=Ht)}X8(x,gt,ot,Tt)}),x.setDf(gt,Ye)}s(Re,"_resolveExtCfg");function Qe(He,Ye,gt){gt===void 0&&(gt=!1);var ot,Tt=Ee(He,!1),Ht=x.cfg;return Tt&&(Tt[Ye]||!ie(Tt[Ye]))?ot=Tt[Ye]:(Ht[Ye]||!ie(Ht[Ye]))&&(ot=Ht[Ye]),ot||!ie(ot)?ot:gt}s(Qe,"_getConfig");function Ze(He){for(var Ye;Ye=G._next();){var gt=Ye[Ix]();gt&&He(gt)}}return s(Ze,"_iterateChain"),G}s(d9,"_createInternalContext");function ob(v,x,T,R){var L=_f(x),Q=d9(v,L,T,R),G=Q.ctx;function ce(Ee){var Re=Q._next();return Re&&Re[If](Ee,G),!Re}s(ce,"_processNext");function fe(Ee,Re){return Ee===void 0&&(Ee=null),Je(Ee)&&(Ee=N(Ee,L.cfg,T,Re)),ob(Ee||G[Yp](),L.cfg,T,Re)}return s(fe,"_createNew"),G[_l]=ce,G[_1]=fe,G}s(ob,"createProcessTelemetryContext");function w(v,x,T){var R=_f(x.config),L=d9(v,R,x,T),Q=L.ctx;function G(fe){var Ee=L._next();return Ee&&Ee[w1](Q,fe),!Ee}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,R.cfg,x,Ee)),w(fe||Q[Yp](),x,Ee)}return s(ce,"_createNew"),Q[_l]=G,Q[_1]=ce,Q}s(w,"createProcessTelemetryUnloadContext");function k(v,x,T){var R=_f(x.config),L=d9(v,R,x,T),Q=L.ctx;function G(fe){return Q.iterate(function(Ee){Oe(Ee[zm])&&Ee[zm](Q,fe)})}s(G,"_processNext");function ce(fe,Ee){return fe===void 0&&(fe=null),Je(fe)&&(fe=N(fe,R.cfg,x,Ee)),k(fe||Q[Yp](),x,Ee)}return s(ce,"_createNew"),Q[_l]=G,Q[_1]=ce,Q}s(k,"createProcessTelemetryUpdateContext");function N(v,x,T,R){var L=null,Q=!R;if(Je(v)&&v[ai]>0){var G=null;qr(v,function(ce){if(!Q&&R===ce&&(Q=!0),Q&&ce&&Oe(ce[If])){var fe=$(ce,x,T);L||(L=fe),G&&G._setNext(fe),G=fe}})}return R&&!L?N([R],x,T):L}s(N,"createTelemetryProxyChain");function $(v,x,T){var R=null,L=Oe(v[If]),Q=Oe(v[zA]),G;v?G=v[GA]+"-"+v[Dx]+"-"+Dq++:G="Unknown-0-"+Dq++;var ce={getPlugin:s(function(){return v},"getPlugin"),getNext:s(function(){return R},"getNext"),processTelemetry:Re,unload:Qe,update:Ze,_id:G,_setNext:s(function(He){R=He},"_setNext")};function fe(){var He;return v&&Oe(v[u9])&&(He=v[u9]()),He||(He=ob(ce,x,T)),He}s(fe,"_getTelCtx");function Ee(He,Ye,gt,ot,Tt){var Ht=!1,nr=v?v[GA]:bae,Tr=He[Pq];return Tr||(Tr=He[Pq]={}),He.setNext(R),v&&nb(He[cc](),function(){return nr+":"+gt},function(){Tr[G]=!0;try{var ei=R?R._id:Ri;ei&&(Tr[ei]=!1),Ht=Ye(He)}catch(Mi){var Li=R?Tr[R._id]:!0;Li&&(Ht=!0),(!R||!Li)&&Nr(He[zp](),1,73,"Plugin ["+nr+"] failed during "+gt+" - "+Ft(Mi)+", run flags: "+Ft(Tr))}},ot,Tt),Ht}s(Ee,"_processChain");function Re(He,Ye){Ye=Ye||fe();function gt(ot){if(!v||!L)return!1;var Tt=sy(v);return Tt[Vp]||Tt[Ak]?!1:(Q&&v[zA](R),v[If](He,ot),!0)}s(gt,"_callProcessTelemetry"),Ee(Ye,gt,"processTelemetry",function(){return{item:He}},!He.sync)||Ye[_l](He)}s(Re,"_processTelemetry");function Qe(He,Ye){function gt(){var ot=!1;if(v){var Tt=sy(v),Ht=v[cc]||Tt[cc];v&&(!Ht||Ht===He.core())&&!Tt[Vp]&&(Tt[cc]=null,Tt[Vp]=!0,Tt[jp]=!1,v[Vp]&&v[Vp](He,Ye)===!0&&(ot=!0))}return ot}s(gt,"_callTeardown"),Ee(He,gt,"unload",function(){},Ye.isAsync)||He[_l](Ye)}s(Qe,"_unloadPlugin");function Ze(He,Ye){function gt(){var ot=!1;if(v){var Tt=sy(v),Ht=v[cc]||Tt[cc];v&&(!Ht||Ht===He.core())&&!Tt[Vp]&&v[zm]&&v[zm](He,Ye)===!0&&(ot=!0)}return ot}s(gt,"_callUpdate"),Ee(He,gt,"update",function(){},!1)||He[_l](Ye)}return s(Ze,"_updatePlugin"),Xt(ce)}s($,"createTelemetryPluginProxy");function de(){var v=[];function x(R){R&&v[fo](R)}s(x,"_addHandler");function T(R,L){qr(v,function(Q){try{Q(R,L)}catch(G){Nr(R[zp](),2,73,"Unexpected error calling unload handler - "+Ft(G))}}),v=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(de,"createUnloadHandlerContainer");function we(){var v=[];function x(R){var L=v;v=[],qr(L,function(Q){try{(Q.rm||Q.remove).call(Q)}catch(G){Nr(R,2,73,"Unloading:"+Ft(G))}})}s(x,"_doUnload");function T(R){R&&Cf(v,R)}return s(T,"_addHook"),{run:x,add:T}}s(we,"createUnloadHookContainer");var ke,$e="getPlugin",nt=(ke={},ke[P1]={isVal:xk,v:{}},ke),Et=function(){function v(){var x=this,T,R,L,Q,G;Ee(),cu(v,x,function(Re){Re[Ww]=function(Qe,Ze,He,Ye){fe(Qe,Ze,Ye),T=!0},Re[Vp]=function(Qe,Ze){var He=Re[cc];if(!He||Qe&&He!==Qe[cc]())return;var Ye,gt=!1,ot=Qe||w(null,He,L&&L[$e]?L[$e]():L),Tt=Ze||{reason:0,isAsync:!1};function Ht(){gt||(gt=!0,Q.run(ot,Ze),G.run(ot[zp]()),Ye===!0&&ot[_l](Tt),Ee())}return s(Ht,"_unloadCallback"),!Re[ck]||Re[ck](ot,Tt,Ht)!==!0?Ht():Ye=!0,Ye},Re[zm]=function(Qe,Ze){var He=Re[cc];if(!He||Qe&&He!==Qe[cc]())return;var Ye,gt=!1,ot=Qe||k(null,He,L&&L[$e]?L[$e]():L),Tt=Ze||{reason:0};function Ht(){gt||(gt=!0,fe(ot.getCfg(),ot.core(),ot[Yp]()))}return s(Ht,"_updateCallback"),!Re._doUpdate||Re._doUpdate(ot,Tt,Ht)!==!0?Ht():Ye=!0,Ye},Yw(Re,"_addUnloadCb",function(){return Q},"add"),Yw(Re,"_addHook",function(){return G},"add"),je(Re,"_unloadHooks",{g:s(function(){return G},"g")})}),x[zp]=function(Re){return ce(Re)[zp]()},x[jp]=function(){return T},x.setInitialized=function(Re){T=Re},x[zA]=function(Re){L=Re},x[_l]=function(Re,Qe){Qe?Qe[_l](Re):L&&Oe(L[If])&&L[If](Re,null)},x._getTelCtx=ce;function ce(Re){Re===void 0&&(Re=null);var Qe=Re;if(!Qe){var Ze=R||ob(null,{},x[cc]);L&&L[$e]?Qe=Ze[_1](null,L[$e]):Qe=Ze[_1](null,L)}return Qe}s(ce,"_getTelCtx");function fe(Re,Qe,Ze){_f(Re,nt,o_(Qe)),!Ze&&Qe&&(Ze=Qe[Tx]()[Yp]());var He=L;L&&L[$e]&&(He=L[$e]()),x[cc]=Qe,R=ob(Ze,Re,Qe,He)}s(fe,"_setDefaults");function Ee(){T=!1,x[cc]=null,R=null,L=null,G=we(),Q=de()}s(Ee,"_initDefaults")}return s(v,"BaseTelemetryPlugin"),v.__ieDyn=1,v}();function pr(v,x,T){var R={id:x,fn:T};Cf(v,R);var L={remove:s(function(){qr(v,function(Q,G){if(Q.id===R.id)return v[Ex](G,1),-1})},"remove")};return L}s(pr,"_addInitializer");function Bn(v,x,T){for(var R=!1,L=v[ai],Q=0;Q<L;++Q){var G=v[Q];if(G)try{if(G.fn[ik](null,[x])===!1){R=!0;break}}catch(ce){Nr(T,2,64,"Telemetry initializer failed: "+sl(ce),{exception:Ft(ce)},!0)}}return!R}s(Bn,"_runInitializers");var Xn=function(v){Hw(x,v);function x(){var T=v.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var R,L;Q(),cu(x,T,function(G,ce){G.addTelemetryInitializer=function(fe){return pr(L,R++,fe)},G[If]=function(fe,Ee){Bn(L,fe,Ee?Ee[zp]():G[zp]())&&G[_l](fe,Ee)},G[ck]=function(){Q()}});function Q(){R=0,L=[]}return s(Q,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(Et),Cr,Dr="Plugins must provide initialize method",Vn="_notificationManager",Nn="SDK is still unloading...",ki="SDK is not initialized",Ro=100,Yi=5e4,kc=rr((Cr={cookieCfg:{}},Cr[Px]={rdOnly:!0,ref:!0,v:[]},Cr[Jm]={rdOnly:!0,ref:!0,v:[]},Cr[P1]={ref:!0,v:{}},Cr[P0]=bf,Cr.loggingLevelConsole=0,Cr.diagnosticLogInterval=bf,Cr));function sb(v,x){return new Eae(x)}s(sb,"_createPerfManager");function d_(v,x,T){var R=[],L=[],Q={};return qr(T,function(G){(ie(G)||ie(G[Ww]))&&Qr(Dr);var ce=G[Dx],fe=G[GA];G&&ce&&(ie(Q[ce])?Q[ce]=fe:Lk(v,"Two extensions have same priority #"+ce+" - "+Q[ce]+", "+fe)),!ce||ce<x?R[fo](G):L[fo](G)}),{core:R,channels:L}}s(d_,"_validateExtensions");function f9(v,x){var T=!1;return qr(x,function(R){if(R===v)return T=!0,-1}),T}s(f9,"_isPluginPresent");function Wk(v,x,T,R){T&&le(T,function(L,Q){R&&Yu(Q)&&Yu(x[L])&&Wk(v,x[L],Q,R),R&&Yu(Q)&&Yu(x[L])?Wk(v,x[L],Q,R):v.set(x,L,Q)})}s(Wk,"_deepMergeConfig");function Bq(v,x){var T=null,R=-1;return qr(v,function(L,Q){if(L.w===x)return T=L,R=Q,-1}),{i:R,l:T}}s(Bq,"_findWatcher");function Tae(v,x){var T=Bq(v,x).l;return T||(T={w:x,rm:s(function(){var R=Bq(v,x);R.i!==-1&&v[Ex](R.i,1)},"rm")},v[fo](T)),T}s(Tae,"_addDelayedCfgListener");function p9(v,x,T){qr(x,function(R){var L=eg(v,R.w,T);delete R.w,R.rm=function(){L.rm()}})}s(p9,"_registerDelayedCfgListener");function Nq(v,x,T,R){return x.add(v[Vm](function(L){var Q=L.cfg.disableDbgExt;Q===!0&&R&&(T[$w](R),R=null),T&&!R&&Q!==!0&&(R=uae(L.cfg),T[ok](R))})),R}s(Nq,"_initDebugListener");function Lq(v){return je({rm:s(function(){v.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(v)+">"},"v")})}s(Lq,"_createUnloadHook");var Dt=function(){function v(){var x,T,R,L,Q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt,ot,Tt,Ht,nr,Tr,ei,Li,Mi,Oo,xn,zr,Fi,ua,ms,Wt,Yr,ko;cu(v,this,function(Pt){dt(),Pt._getDbgPlgTargets=function(){return[Mi,L]},Pt[jp]=function(){return T},Pt.activeStatus=function(){return zr},Pt._setPendingStatus=function(){zr=3},Pt[Ww]=function(yt,br,qn,Wr){He&&Qr(Nn),Pt[jp]()&&Qr("Core cannot be initialized more than once"),x=_f(yt,kc,qn||Pt[ac],!1),yt=x.cfg,du(x[Vm](function(Ko){var Qs=Ko.cfg,Zu=zr===3;if(!Zu){ua=Qs.initInMemoMaxSize||Ro;var Sf=Qs.instrumentationKey,ig=Qs.endpointUrl;if(ie(Sf)){ei=null,zr=jA.INACTIVE;var og="Please provide instrumentation key";T?(Nr(R,1,100,og),Ra()):Qr(og);return}var r4=[];if(mt(Sf)?(r4[fo](Sf),ei=null):ei=Sf,mt(ig)?(r4[fo](ig),Fi=null):Fi=ig,r4[ai]){ms=!1,zr=3;var B9=xk(Qs.initTimeOut)?Qs.initTimeOut:Yi,nce=Bd(r4);HA(function(){ms||Ln()},B9),xf(nce,function(Ab){try{if(ms)return;if(!Ab.rejected){var yb=Ab[bx];if(yb&&yb[ai]){var oH=yb[0];if(ei=oH&&oH[bx],yb[ai]>1){var sH=yb[1];Fi=sH&&sH[bx]}}ei&&(yt.instrumentationKey=ei,yt.endpointUrl=Fi)}Ln()}catch{ms||Ln()}})}else Ln();var n4=Ko.ref(Ko.cfg,P1);le(n4,function(Ab){Ko.ref(n4,Ab)})}})),Q=Wr,nr=Nq(x,Ht,Q&&Pt[R0](),nr),mb(),Pt[ac]=qn;var Hn=yt[Px];if(Re=[],Re[fo].apply(Re,OU(OU([],br,!1),Hn)),Qe=yt[Jm],ka(null),(!Ze||Ze[ai]===0)&&Qr("No "+Jm+" available"),Qe&&Qe[ai]>1){var Go=Pt[Ix]("TeeChannelController");(!Go||!Go.plugin)&&Nr(R,1,28,"TeeChannel required")}p9(yt,Li,R),Li=null,T=!0,zr===jA.ACTIVE&&Ra()},Pt.getChannels=function(){var yt=[];return Ze&&qr(Ze,function(br){yt[fo](br)}),Xt(yt)},Pt.track=function(yt){nb(Pt[Vw](),function(){return"AppInsightsCore:track"},function(){yt===null&&(da(yt),Qr("Invalid telemetry item")),!yt[VA]&&ie(yt[VA])&&(da(yt),Qr("telemetry name required")),yt.iKey=yt.iKey||ei,yt.time=yt.time||zw(new Date),yt.ver=yt.ver||"4.0",!He&&Pt[jp]()&&zr===jA.ACTIVE?Bc()[_l](yt):zr!==jA.INACTIVE&&L[ai]<=ua&&L[fo](yt)},function(){return{item:yt}},!yt.sync)},Pt[Tx]=Bc,Pt[R0]=function(){return Q||(Q=new Cae(x.cfg),Pt[Vn]=Q),Q},Pt[ok]=function(yt){Pt.getNotifyMgr()[ok](yt)},Pt[$w]=function(yt){Q&&Q[$w](yt)},Pt.getCookieMgr=function(){return fe||(fe=mae(x.cfg,Pt[ac])),fe},Pt.setCookieMgr=function(yt){fe!==yt&&(Jx(fe,!1),fe=yt)},Pt[Vw]=function(){return G||ce||lc()},Pt.setPerfMgr=function(yt){G=yt},Pt.eventCnt=function(){return L[ai]},Pt.releaseQueue=function(){if(T&&L[ai]>0){var yt=L;L=[],zr===2?qr(yt,function(br){br.iKey=br.iKey||ei,Bc()[_l](br)}):Nr(R,2,20,"core init status is not active")}},Pt.pollInternalLogs=function(yt){return gt=yt||null,ko=!1,Wt&&Wt[xx](),Qo(!0)};function Ln(){ms=!0,ie(ei)?(zr=jA.INACTIVE,Nr(R,1,112,"ikey can't be resolved from promises")):zr=jA.ACTIVE,Ra()}s(Ln,"_setStatus");function Ra(){T&&(Pt.releaseQueue(),Pt.pollInternalLogs())}s(Ra,"_releaseQueues");function Qo(yt){if((!Wt||!Wt[Gp])&&!ko){var br=yt||R&&R.queue[ai]>0;br&&(Yr||(Yr=!0,du(x[Vm](function(qn){var Wr=qn.cfg.diagnosticLogInterval;(!Wr||!(Wr>0))&&(Wr=1e4);var Hn=!1;Wt&&(Hn=Wt[Gp],Wt[xx]()),Wt=J5(hb,Wr),Wt.unref(),Wt[Gp]=Hn}))),Wt[Gp]=!0)}return Wt}s(Qo,"_startLogPoller"),Pt[QU]=function(){ko=!0,Wt&&Wt[xx](),hb()},Q8(Pt,function(){return Ye},["addTelemetryInitializer"]),Pt[w1]=function(yt,br,qn){yt===void 0&&(yt=!0),T||Qr(ki),He&&Qr(Nn);var Wr={reason:50,isAsync:yt,flushComplete:!1},Hn;yt&&!br&&(Hn=kx(function(Qs){br=Qs}));var Go=w(nh(),Pt);Go[sk](function(){Ht.run(Pt[ac]),gq([fe,Q,R],yt,function(){dt(),br&&br(Wr)})},Pt);function Ko(Qs){Wr.flushComplete=Qs,He=!0,Tt.run(Go,Wr),Pt[QU](),Go[_l](Wr)}return s(Ko,"_doUnload"),hb(),rg(yt,Ko,6,qn),Hn},Pt[Ix]=Dl,Pt.addPlugin=function(yt,br,qn,Wr){if(!yt){Wr&&Wr(!1),gb(Dr);return}var Hn=Dl(yt[GA]);if(Hn&&!br){Wr&&Wr(!1),gb("Plugin ["+yt[GA]+"] is already loaded!");return}var Go={reason:16};function Ko(Sf){Re[fo](yt),Go.added=[yt],ka(Go),Wr&&Wr(!0)}if(s(Ko,"_addPlugin"),Hn){var Qs=[Hn.plugin],Zu={reason:2,isAsync:!!qn};Md(Qs,Zu,function(Sf){Sf?(Go.removed=Qs,Go.reason|=32,Ko()):Wr&&Wr(!1)})}else Ko()},Pt.updateCfg=function(yt,br){br===void 0&&(br=!0);var qn;if(Pt[jp]()){qn={reason:1,cfg:x.cfg,oldCfg:G5({},x.cfg),newConfig:G5({},yt),merge:br},yt=qn.newConfig;var Wr=x.cfg;yt[Px]=Wr[Px],yt[Jm]=Wr[Jm]}x._block(function(Hn){var Go=Hn.cfg;Wk(Hn,Go,yt,br),br||le(Go,function(Ko){We(yt,Ko)||Hn.set(Go,Ko,bf)}),Hn.setDf(Go,kc)},!0),x.notify(),qn&&ng(qn)},Pt.evtNamespace=function(){return ot},Pt.flush=rg,Pt.getTraceCtx=function(yt){return Tr||(Tr=xae()),Tr},Pt.setTraceCtx=function(yt){Tr=yt||null},Pt.addUnloadHook=du,Yw(Pt,"addUnloadCb",function(){return Tt},"add"),Pt.onCfgChange=function(yt){var br;return T?br=eg(x.cfg,yt,Pt[ac]):br=Tae(Li,yt),Lq(br)},Pt.getWParam=function(){return ca()||x.cfg.enableWParam?0:-1};function Pl(){var yt={};Oo=[];var br=s(function(qn){qn&&qr(qn,function(Wr){if(Wr[GA]&&Wr[wx]&&!yt[Wr.identifier]){var Hn=Wr[GA]+"="+Wr[wx];Oo[fo](Hn),yt[Wr.identifier]=Wr}})},"_addPluginVersions");br(Ze),Qe&&qr(Qe,function(qn){br(qn)}),br(Re)}s(Pl,"_setPluginVersions");function dt(){T=!1,x=_f({},kc,Pt[ac]),x.cfg[UU]=1,je(Pt,"config",{g:s(function(){return x.cfg},"g"),s:s(function(br){Pt.updateCfg(br,!1)},"s")}),je(Pt,"pluginVersionStringArr",{g:s(function(){return Oo||Pl(),Oo},"g")}),je(Pt,"pluginVersionString",{g:s(function(){return xn||(Oo||Pl(),xn=Oo.join(";")),xn||Ri},"g")}),je(Pt,"logger",{g:s(function(){return R||(R=new s_(x.cfg),x[ac]=R),R},"g"),s:s(function(br){x[ac]=br,R!==br&&(Jx(R,!1),R=br)},"s")}),Pt[ac]=new s_(x.cfg),Mi=[];var yt=Pt.config[Px]||[];yt.splice(0,yt[ai]),Cf(yt,Mi),Ye=new Xn,L=[],Jx(Q,!1),Q=null,G=null,ce=null,Jx(fe,!1),fe=null,Ee=null,Re=[],Qe=null,Ze=null,He=!1,gt=null,ot=Zm("AIBaseCore",!0),Tt=de(),Tr=null,ei=null,Ht=we(),Li=[],xn=null,Oo=null,ko=!1,Wt=null,Yr=!1,zr=0,Fi=null,ua=null,ms=!1}s(dt,"_initDefaults");function Bc(){var yt=ob(nh(),x.cfg,Pt);return yt[sk](Qo),yt}s(Bc,"_createTelCtx");function ka(yt){var br=d_(Pt[ac],oae,Re);Ee=null,xn=null,Oo=null,Ze=(Qe||[])[0]||[],Ze=l9(Cf(Ze,br[Jm]));var qn=Cf(l9(br[cc]),Ze);Mi=Xt(qn);var Wr=Pt.config[Px]||[];Wr.splice(0,Wr[ai]),Cf(Wr,Mi);var Hn=Bc();Ze&&Ze[ai]>0&&c9(Hn[_1](Ze),qn),c9(Hn,qn),yt&&ng(yt)}s(ka,"_initPluginChain");function Dl(yt){var br=null,qn=null,Wr=[];return qr(Mi,function(Hn){if(Hn[GA]===yt&&Hn!==Ye)return qn=Hn,-1;Hn.getChannel&&Wr[fo](Hn)}),!qn&&Wr[ai]>0&&qr(Wr,function(Hn){if(qn=Hn.getChannel(yt),!qn)return-1}),qn&&(br={plugin:qn,setEnabled:s(function(Hn){sy(qn)[Ak]=!Hn},"setEnabled"),isEnabled:s(function(){var Hn=sy(qn);return!Hn[Vp]&&!Hn[Ak]},"isEnabled"),remove:s(function(Hn,Go){Hn===void 0&&(Hn=!0);var Ko=[qn],Qs={reason:1,isAsync:Hn};Md(Ko,Qs,function(Zu){Zu&&ka({reason:32,removed:Ko}),Go&&Go(Zu)})},"remove")}),br}s(Dl,"_getPlugin");function nh(){if(!Ee){var yt=(Mi||[]).slice();sc(yt,Ye)===-1&&yt[fo](Ye),Ee=N(l9(yt),x.cfg,Pt)}return Ee}s(nh,"_getPluginChain");function Md(yt,br,qn){if(yt&&yt[ai]>0){var Wr=N(yt,x.cfg,Pt),Hn=w(Wr,Pt);Hn[sk](function(){var Go=!1,Ko=[];qr(Re,function(Zu,Sf){f9(Zu,yt)?Go=!0:Ko[fo](Zu)}),Re=Ko,xn=null,Oo=null;var Qs=[];Qe&&(qr(Qe,function(Zu,Sf){var ig=[];qr(Zu,function(og){f9(og,yt)?Go=!0:ig[fo](og)}),Qs[fo](ig)}),Qe=Qs),qn&&qn(Go),Qo()}),Hn[_l](br)}else qn(!1)}s(Md,"_removePlugins");function hb(){if(R&&R.queue){var yt=R.queue.slice(0);R.queue[ai]=0,qr(yt,function(br){var qn={name:gt||"InternalMessageId: "+br[ak],iKey:ei,time:zw(new Date),baseType:Nk.dataType,baseData:{message:br[S1]}};Pt.track(qn)})}}s(hb,"_flushInternalLogs");function rg(yt,br,qn,Wr){var Hn=1,Go=!1,Ko=null;Wr=Wr||5e3;function Qs(){Hn--,Go&&Hn===0&&(Ko&&Ko[xx](),Ko=null,br&&br(Go),br=null)}if(s(Qs,"doCallback"),Ze&&Ze[ai]>0){var Zu=Bc()[_1](Ze);Zu.iterate(function(Sf){if(Sf.flush){Hn++;var ig=!1;Sf.flush(yt,function(){ig=!0,Qs()},qn)||ig||(yt&&Ko==null?Ko=HA(function(){Ko=null,Qs()},Wr):Qs())}})}return Go=!0,Qs(),!0}s(rg,"_flushChannels");function mb(){var yt;du(x[Vm](function(br){var qn=br.cfg.enablePerfMgr;if(qn){var Wr=br.cfg[P0];(yt!==Wr||!yt)&&(Wr||(Wr=sb),ZU(br.cfg,P0,Wr),yt=Wr,ce=null),!G&&!ce&&Oe(Wr)&&(ce=Wr(Pt,Pt[R0]()))}else ce=null,yt=null}))}s(mb,"_initPerfManager");function ng(yt){var br=k(nh(),Pt);br[sk](Qo),(!Pt._updateHook||Pt._updateHook(br,yt)!==!0)&&br[_l](yt)}s(ng,"_doUpdate");function gb(yt){var br=Pt[ac];br?(Nr(br,2,73,yt),Qo()):Qr(yt)}s(gb,"_logOrThrowError");function da(yt){var br=Pt[R0]();br&&br[Nx]([yt],2)}s(da,"_notifyInvalidEvent");function du(yt){Ht.add(yt)}s(du,"_addUnloadHook")})}return s(v,"AppInsightsCore"),v.__ieDyn=1,v}();function Hr(v,x){try{if(v&&v!==""){var T=Nd().parse(v);if(T&&T[qU]&&T[qU]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ai])return T}}catch(R){Nr(x,1,43,"Cannot parse the response. "+(R[VA]||Ft(R)),{response:v})}return null}s(Hr,"parseResponse");var mn="",ss="NoResponseBody",Pc="&"+ss+"=true",Sa="POST",Dc=function(){function v(){var x=0,T,R,L,Q,G,ce,fe,Ee,Re,Qe,Ze,He,Ye,gt;cu(v,this,function(ot,Tt){var Ht=!0;ms(),ot[Ww]=function(Wt,Yr){L=Yr,R&&Nr(L,1,28,"Sender is already initialized"),ot.SetConfig(Wt),R=!0},ot._getDbgPlgTargets=function(){return[R,Q,ce,T]},ot.SetConfig=function(Wt){try{if(G=Wt.senderOnCompleteCallBack||{},ce=!!Wt.disableCredentials,fe=Wt.fetchCredentials,Q=!!Wt.isOneDs,T=!!Wt.enableSendPromise,Re=!!Wt.disableXhr,Qe=!!Wt.disableBeacon,Ze=!!Wt.disableBeaconSync,gt=Wt.timeWrapper,Ye=!!Wt.addNoResponse,He=!!Wt.disableFetchKeepAlive,Ee={sendPOST:zr},Q||(Ht=!1),ce){var Yr=qx();Yr&&Yr.protocol&&Yr.protocol[Cx]()==="file:"&&(Ht=!1)}return!0}catch{}return!1},ot.getSyncFetchPayload=function(){return x},ot.getSenderInst=function(Wt,Yr){return Wt&&Wt[ai]?Li(Wt,Yr):null},ot.getFallbackInst=function(){return Ee},ot[ck]=function(Wt,Yr){ms()};function nr(Wt,Yr){Mi(Yr,200,{},Wt)}s(nr,"_onSuccess");function Tr(Wt,Yr){Nr(L,2,26,"Failed to send telemetry.",{message:Wt}),Mi(Yr,400,{})}s(Tr,"_onError");function ei(Wt){Tr("No endpoint url is provided for the batch",Wt)}s(ei,"_onNoPayloadUrl");function Li(Wt,Yr){for(var ko=0,Pt=null,Ln=0;Pt==null&&Ln<Wt[ai];)ko=Wt[Ln],!Re&&ko===1?G8()?Pt=ua:V8()&&(Pt=zr):ko===2&&e_(Yr)&&(!Yr||!He)?Pt=Fi:ko===3&&ey()&&(Yr?!Ze:!Qe)&&(Pt=xn),Ln++;return Pt?{_transport:ko,_isSync:Yr,sendPOST:Pt}:null}s(Li,"_getSenderInterface");function Mi(Wt,Yr,ko,Pt){try{Wt&&Wt(Yr,ko,Pt)}catch{}}s(Mi,"_doOnComplete");function Oo(Wt,Yr){var ko=oc(),Pt=Wt[Ym];if(!Pt)return ei(Yr),!0;Pt=Wt[Ym]+(Ye?Pc:mn);var Ln=Wt[_x],Ra=Q?Ln:new Blob([Ln],{type:"text/plain;charset=UTF-8"}),Qo=ko.sendBeacon(Pt,Ra);return Qo}s(Oo,"_doBeaconSend");function xn(Wt,Yr,ko){var Pt=Wt[_x];try{if(Pt)if(Oo(Wt,Yr))nr(mn,Yr);else{var Ln=G&&G.beaconOnRetry;Ln&&Oe(Ln)?Ln(Wt,Yr,Oo):(Ee&&Ee.sendPOST(Wt,Yr,!0),Nr(L,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ra){Q&&Lk(L,"Failed to send telemetry using sendBeacon API. Ex:"+Ft(Ra)),Mi(Yr,Q?0:400,{},mn)}}s(xn,"_beaconSender");function zr(Wt,Yr,ko){var Pt,Ln,Ra,Qo=Wt[B8]||{};!ko&&T&&(Pt=kx(function(ka,Dl){Ln=ka,Ra=Dl})),Q&&ko&&Wt.disableXhrSync&&(ko=!1);var Pl=Wt[Ym];if(!Pl){ei(Yr),Ln&&Ln(!1);return}var dt=H8(Sa,Pl,Ht,!0,ko,Wt[Km]);Q||dt.setRequestHeader("Content-type","application/json"),qr(It(Qo),function(ka){dt.setRequestHeader(ka,Qo[ka])}),dt.onreadystatechange=function(){Q||(Bc(dt),dt.readyState===4&&Ln&&Ln(!0))},dt.onload=function(){Q&&Bc(dt)};function Bc(ka){var Dl=G&&G.xhrOnComplete,nh=Dl&&Oe(Dl);if(nh)Dl(ka,Yr,Wt);else{var Md=bk(ka);Mi(Yr,ka[jw],N1(ka,Q),Md)}}return s(Bc,"_doOnReadyFunc"),dt.onerror=function(ka){Mi(Yr,Q?dt[jw]:400,N1(dt,Q),Q?mn:Ik(dt)),Ra&&Ra(ka)},dt.ontimeout=function(){Mi(Yr,Q?dt[jw]:500,N1(dt,Q),Q?mn:Ik(dt)),Ln&&Ln(!1)},dt.send(Wt[_x]),Pt}s(zr,"_xhrSender");function Fi(Wt,Yr,ko){var Pt,Ln=Wt[Ym],Ra=Wt[_x],Qo=Q?Ra:new Blob([Ra],{type:"application/json"}),Pl,dt,Bc,ka=new Headers,Dl=Ra[ai],nh=!1,Md=!1,hb=Wt[B8]||{},rg=(Pt={method:Sa,body:Qo},Pt[Aq]=!0,Pt);Wt.headers&&It(Wt.headers)[ai]>0&&(qr(It(hb),function(da){ka.append(da,hb[da])}),rg[B8]=ka),fe?rg.credentials=fe:Ht&&Q&&(rg.credentials="include"),ko&&(rg.keepalive=!0,x+=Dl,Q?Wt._sendReason===2&&(nh=!0,Ye&&(Ln+=Pc)):nh=!0);var mb=new Request(Ln,rg);try{mb[Aq]=!0}catch{}if(!ko&&T&&(Pl=kx(function(da,du){dt=da,Bc=du})),!Ln){ei(Yr),dt&&dt(!1);return}function ng(da){Mi(Yr,Q?0:400,{},Q?mn:da)}s(ng,"_handleError");function gb(da,du,yt){var br=da[jw],qn=G.fetchOnComplete;qn&&Oe(qn)?qn(da,Yr,yt||mn,du):Mi(Yr,br,{},yt||mn)}s(gb,"_onFetchComplete");try{xf(fetch(Q?Ln:mb,Q?rg:null),function(da){if(ko&&(x-=Dl,Dl=0),!Md)if(Md=!0,da.rejected)ng(da.reason&&da.reason[S1]),Bc&&Bc(da.reason);else{var du=da[bx];try{!Q&&!du.ok?(ng(du.statusText),dt&&dt(!1)):Q&&!du.body?(gb(du,null,mn),dt&&dt(!0)):xf(du.text(),function(yt){gb(du,Wt,yt[bx]),dt&&dt(!0)})}catch(yt){ng(Ft(yt)),Bc&&Bc(yt)}}})}catch(da){Md||(ng(Ft(da)),Bc&&Bc(da))}return nh&&!Md&&(Md=!0,Mi(Yr,200,{}),dt&&dt(!0)),Q&&!Md&&Wt[Km]>0&&gt&&gt.set(function(){Md||(Md=!0,Mi(Yr,500,{}),dt&&dt(!0))},Wt[Km]),Pl}s(Fi,"_doFetchSender");function ua(Wt,Yr,ko){var Pt=Fs(),Ln=new XDomainRequest,Ra=Wt[_x];Ln.onload=function(){var ka=bk(Ln),Dl=G&&G.xdrOnComplete;Dl&&Oe(Dl)?Dl(Ln,Yr,Wt):Mi(Yr,200,{},ka)},Ln.onerror=function(){Mi(Yr,400,{},Q?mn:tq(Ln))},Ln.ontimeout=function(){Mi(Yr,500,{})},Ln.onprogress=function(){};var Qo=Pt&&Pt.location&&Pt.location.protocol||"",Pl=Wt[Ym];if(!Pl){ei(Yr);return}if(!Q&&Pl.lastIndexOf(Qo,0)!==0){var dt="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Nr(L,2,40,". "+dt),Tr(dt,Yr);return}var Bc=Q?Pl:Pl[KA](/^(https?:)/,"");Ln.open(Sa,Bc),Wt[Km]&&(Ln[Km]=Wt[Km]),Ln.send(Ra),Q&&ko?gt&&gt.set(function(){Ln.send(Ra)},0):Ln.send(Ra)}s(ua,"_xdrSender");function ms(){x=0,R=!1,T=!1,L=null,Q=null,G=null,ce=null,fe=null,Ee=null,Re=!1,Qe=!1,Ze=!1,He=!1,Ye=!1,gt=null}s(ms,"_initDefaults")})}return s(v,"SenderPostManager"),v.__ieDyn=1,v}(),F1="on",ay="attachEvent",ab="addEventListener",Mq="detachEvent",Fq="removeEventListener",$k="events";Zm("aiEvtPageHide"),Zm("aiEvtPageShow");var wae=/\.[\.]+/g,f2e=/[\.]+$/,MAt=1,Oq=cq("events"),FAt=/^([^.]*)(?:\.(.+)|)/;function p2e(v){return v&&v[KA]?v[KA](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ri):v}s(p2e,"_normalizeNamespace");function _ae(v,x){if(x){var T=Ri;Je(x)?(T=Ri,qr(x,function(L){L=p2e(L),L&&(L[0]!=="."&&(L="."+L),T+=L)})):T=p2e(x),T&&(T[0]!=="."&&(T="."+T),v=(v||Ri)+T)}var R=FAt.exec(v||Ri)||[];return{type:R[1],ns:(R[2]||Ri).replace(wae,".").replace(f2e,Ri)[YA](".").sort().join(".")}}s(_ae,"_getEvtNamespace");function h2e(v,x,T){T===void 0&&(T=!0);var R=Oq.get(v,$k,{},T),L=R[x];return L||(L=R[x]=[]),L}s(h2e,"_getRegisteredEvents");function m2e(v,x,T,R){v&&x&&x[lu]&&(v[Fq]?v[Fq](x[lu],T,R):v[Mq]&&v[Mq](F1+x[lu],T))}s(m2e,"_doDetach");function OAt(v,x,T,R){var L=!1;return v&&x&&x[lu]&&T&&(v[ab]?(v[ab](x[lu],T,R),L=!0):v[ay]&&(v[ay](F1+x[lu],T),L=!0)),L}s(OAt,"_doAttach");function g2e(v,x,T,R){for(var L=x[ai];L--;){var Q=x[L];Q&&(!T.ns||T.ns===Q[k8].ns)&&(!R||R(Q))&&(m2e(v,Q[k8],Q.handler,Q.capture),x[Ex](L,1))}}s(g2e,"_doUnregister");function QAt(v,x,T){if(x[lu])g2e(v,h2e(v,x[lu]),x,T);else{var R=Oq.get(v,$k,{});le(R,function(L,Q){g2e(v,Q,x,T)}),It(R)[ai]===0&&Oq.kill(v,$k)}}s(QAt,"_unregisterEvents");function A2e(v,x){var T;return x?(Je(x)?T=[v].concat(x):T=[v,x],T=_ae("xx",T).ns[YA](".")):T=v,T}s(A2e,"mergeEvtNamespace");function y2e(v,x,T,R,L){L===void 0&&(L=!1);var Q=!1;if(v)try{var G=_ae(x,R);if(Q=OAt(v,G,T,L),Q&&Oq.accept(v)){var ce={guid:MAt++,evtName:G,handler:T,capture:L};h2e(v,G.type)[fo](ce)}}catch{}return Q}s(y2e,"eventOn");function UAt(v,x,T,R,L){if(L===void 0&&(L=!1),v)try{var Q=_ae(x,R),G=!1;QAt(v,Q,function(ce){return Q.ns&&!T||ce.handler===T?(G=!0,!0):!1}),G||m2e(v,Q,T,L)}catch{}}s(UAt,"eventOff");var C2e="sampleRate",Sae="ProcessLegacy",v2e="http.method",Rae="https://dc.services.visualstudio.com",jk="/v2/track",cb="not_specified",E2e=Hse({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Qq="split",Ti="length",kae="toLowerCase",f_="ingestionendpoint",h9="toString",x2e="removeItem",Uq="message",qAt="count",Pae="stringify",Dae="pathname",m9="match",lb="name",cy="properties",O1="measurements",qq="sizeInBytes",Hq="typeName",g9="exceptions",A9="severityLevel",Bae="problemGroup",Gk="parsedStack",Wq="hasFullStack",$q="assembly",Q1="fileName",Vk="line",jq="aiDataContract",Gq="duration";function b2e(v,x,T){var R=x[Ti],L=HAt(v,x);if(L[Ti]!==R){for(var Q=0,G=L;T[G]!==void 0;)Q++,G=Ce(L,0,147)+jAt(Q);L=G}return L}s(b2e,"dataSanitizeKeyAndAddUniqueness");function HAt(v,x){var T;return x&&(x=zi(Lt(x)),x[Ti]>150&&(T=Ce(x,0,150),Nr(v,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(HAt,"dataSanitizeKey");function Ju(v,x,T){T===void 0&&(T=1024);var R;return x&&(T=T||1024,x=zi(Lt(x)),x[Ti]>T&&(R=Ce(x,0,T),Nr(v,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),R||x}s(Ju,"dataSanitizeString");function Nae(v,x){return T2e(v,x,2048,66)}s(Nae,"dataSanitizeUrl");function I2e(v,x){var T;return x&&x[Ti]>32768&&(T=Ce(x,0,32768),Nr(v,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(I2e,"dataSanitizeMessage");function WAt(v,x){var T;if(x){var R=""+x;R[Ti]>32768&&(T=Ce(R,0,32768),Nr(v,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(WAt,"dataSanitizeException");function p_(v,x){if(x){var T={};le(x,function(R,L){if(Te(L)&&Hx())try{L=Nd()[Pae](L)}catch(Q){Nr(v,2,49,"custom property is not valid",{exception:Q},!0)}L=Ju(v,L,8192),R=b2e(v,R,T),T[R]=L}),x=T}return x}s(p_,"dataSanitizeProperties");function h_(v,x){if(x){var T={};le(x,function(R,L){R=b2e(v,R,T),T[R]=L}),x=T}return x}s(h_,"dataSanitizeMeasurements");function $At(v,x){return x&&T2e(v,x,128,69)[h9]()}s($At,"dataSanitizeId");function T2e(v,x,T,R){var L;return x&&(x=zi(Lt(x)),x[Ti]>T&&(L=Ce(x,0,T),Nr(v,2,R,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),L||x}s(T2e,"dataSanitizeInput");function jAt(v){var x="00"+v;return Ie(x,x[Ti]-3)}s(jAt,"dsPadNumber");var w2e=ic()||{},_2e=0,GAt=[null,null,null,null,null];function VAt(v){var x=_2e,T=GAt,R=T[x];return w2e.createElement?T[x]||(R=T[x]=w2e.createElement("a")):R={host:zAt(v,!0)},R.href=v,x++,x>=T[Ti]&&(x=0),_2e=x,R}s(VAt,"urlParseUrl");function zAt(v,x){var T=YAt(v,x)||"";if(T){var R=T[m9](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(R!=null&&R[Ti]>3&&Ae(R[2])&&R[2][Ti]>0)return R[2]+(R[3]||"")}return T}s(zAt,"urlParseHost");function YAt(v,x){var T=null;if(v){var R=v[m9](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(R!=null&&R[Ti]>2&&Ae(R[2])&&R[2][Ti]>0&&(T=R[2]||"",x&&R[Ti]>2)){var L=(R[1]||"")[kae](),Q=R[3]||"";(L==="http"&&Q===":80"||L==="https"&&Q===":443")&&(Q=""),T+=Q}}return T}s(YAt,"urlParseFullHost");var KAt=[Rae+jk,"https://breeze.aimon.applicationinsights.io"+jk,"https://dc-int.services.visualstudio.com"+jk];function S2e(v){return sc(KAt,v[kae]())!==-1}s(S2e,"isInternalApplicationInsightsEndpoint");function JAt(v,x,T,R){var L,Q=R,G=R;if(x&&x[Ti]>0){var ce=VAt(x);if(L=ce.host,!Q)if(ce[Dae]!=null){var fe=ce.pathname[Ti]===0?"/":ce[Dae];fe.charAt(0)!=="/"&&(fe="/"+fe),G=ce[Dae],Q=Ju(v,T?T+" "+fe:fe)}else Q=Ju(v,x)}else L=R,Q=R;return{target:L,name:Q,data:G}}s(JAt,"AjaxHelperParseDependencyPath");var Lae=nk({LocalStorage:0,SessionStorage:1}),zk=void 0,R2e="";function k2e(v){try{if(ie(gi()))return null;var x=new Date()[h9](),T=jo(v===Lae.LocalStorage?"localStorage":"sessionStorage"),R=R2e+x;T.setItem(R,x);var L=T.getItem(R)!==x;if(T[x2e](R),!L)return T}catch{}return null}s(k2e,"_getVerifiedStorageObject");function Mae(){return P2e()?k2e(Lae.SessionStorage):null}s(Mae,"_getSessionStorageObject");function XAt(v){R2e=v||""}s(XAt,"utlSetStoragePrefix");function P2e(v){return(v||zk===void 0)&&(zk=!!k2e(Lae.SessionStorage)),zk}s(P2e,"utlCanUseSessionStorage");function ZAt(v,x){var T=Mae();if(T!==null)try{return T.getItem(x)}catch(R){zk=!1,Nr(v,2,2,"Browser failed read of session storage. "+sl(R),{exception:Ft(R)})}return null}s(ZAt,"utlGetSessionStorage");function eyt(v,x,T){var R=Mae();if(R!==null)try{return R.setItem(x,T),!0}catch(L){zk=!1,Nr(v,2,4,"Browser failed write to session storage. "+sl(L),{exception:Ft(L)})}return!1}s(eyt,"utlSetSessionStorage");function tyt(v,x){var T=Mae();if(T!==null)try{return T[x2e](x),!0}catch(R){zk=!1,Nr(v,2,6,"Browser failed removal of session storage item. "+sl(R),{exception:Ft(R)})}return!1}s(tyt,"utlRemoveSessionStorage");var ryt=";",nyt="=";function Fae(v){if(!v)return{};var x=v[Qq](ryt),T=p8(x,function(L,Q){var G=Q[Qq](nyt);if(G[Ti]===2){var ce=G[0][kae](),fe=G[1];L[ce]=fe}return L},{});if(It(T)[Ti]>0){if(T.endpointsuffix){var R=T.location?T.location+".":"";T[f_]=T[f_]||"https://"+R+"dc."+T.endpointsuffix}T[f_]=T[f_]||Rae,NU(T[f_],"/")&&(T[f_]=T[f_].slice(0,-1))}return T}s(Fae,"parseConnectionString");var iyt=function(){function v(x,T,R){var L=this,Q=this;Q.ver=1,Q.sampleRate=100,Q.tags={},Q[lb]=Ju(x,R)||cb,Q.data=T,Q.time=zw(new Date),Q[jq]={time:1,iKey:1,name:1,sampleRate:s(function(){return L.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(v,"Envelope"),v}(),Yk=function(){function v(x,T,R,L){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Q=this;Q.ver=2,Q[lb]=Ju(x,T)||cb,Q[cy]=p_(x,R),Q[O1]=h_(x,L)}return s(v,"Event"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Event",v.dataType="EventData",v}(),oyt=58,syt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,ayt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,cyt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,lyt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,uyt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,dyt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,fyt=/([^\(\s\n]+):([0-9]+)$/,D2e="<no_method>",Kk="error",rh="stack",Oae="stackDetails",B2e="errorSrc",Qae="message",N2e="description",L2e=[{re:ayt,len:5,m:1,fn:2,ln:3,col:4},{chk:hyt,pre:pyt,re:cyt,len:4,m:1,fn:2,ln:3},{re:lyt,len:3,m:1,fn:2,hdl:q2e},{re:uyt,len:2,fn:1,hdl:q2e}];function pyt(v){return v.replace(/(\(anonymous\))/,"<anonymous>")}s(pyt,"_scrubAnonymous");function hyt(v){return $m(v,"[native")<0}s(hyt,"_ignoreNative");function Uae(v,x){var T=v;return T&&!Ae(T)&&(JSON&&JSON[Pae]?(T=JSON[Pae](v),x&&(!T||T==="{}")&&(Oe(v[h9])?T=v[h9]():T=""+v)):T=""+v+" - (Missing JSON.stringify)"),T||""}s(Uae,"_stringify");function M2e(v,x){var T=v;return v&&(T&&!Ae(T)&&(T=v[Qae]||v[N2e]||T),T&&!Ae(T)&&(T=Uae(T,!0)),v.filename&&(T=T+" @"+(v.filename||"")+":"+(v.lineno||"?")+":"+(v.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&$m(T||"",x)===-1&&(T=x+": "+T),T||""}s(M2e,"_formatMessage");function myt(v){try{if(Te(v))return"hasFullStack"in v&&"typeName"in v}catch{}return!1}s(myt,"_isExceptionDetailsInternal");function gyt(v){try{if(Te(v))return"ver"in v&&"exceptions"in v&&"properties"in v}catch{}return!1}s(gyt,"_isExceptionInternal");function F2e(v){return v&&v.src&&Ae(v.src)&&v.obj&&Je(v.obj)}s(F2e,"_isStackDetails");function m_(v){var x=v||"";Ae(x)||(Ae(x[rh])?x=x[rh]:x=""+x);var T=x[Qq](`
`);return{src:x,obj:T}}s(m_,"_convertStackObj");function Ayt(v){for(var x=[],T=v[Qq](`
`),R=0;R<T[Ti];R++){var L=T[R];T[R+1]&&(L+="@"+T[R+1],R++),x.push(L)}return{src:v,obj:x}}s(Ayt,"_getOperaStack");function O2e(v){var x=null;if(v)try{if(v[rh])x=m_(v[rh]);else if(v[Kk]&&v[Kk][rh])x=m_(v[Kk][rh]);else if(v.exception&&v.exception[rh])x=m_(v.exception[rh]);else if(F2e(v))x=v;else if(F2e(v[Oae]))x=v[Oae];else if(Fs()&&Fs().opera&&v[Qae])x=Ayt(v[Uq]);else if(v.reason&&v.reason[rh])x=m_(v.reason[rh]);else if(Ae(v))x=m_(v);else{var T=v[Qae]||v[N2e]||"";Ae(v[B2e])&&(T&&(T+=`
`),T+=" from "+v[B2e]),T&&(x=m_(T))}}catch(R){x=m_(R)}return x||{src:"",obj:null}}s(O2e,"_getStackFromErrorObj");function yyt(v){var x="";return v&&(v.obj?x=v.obj.join(`
`):x=v.src||""),x}s(yyt,"_formatStackTrace");function Cyt(v){var x,T=v.obj;if(T&&T[Ti]>0){x=[];var R=0,L=!1,Q=0;qr(T,function(gt){if(L||byt(gt)){var ot=Lt(gt);L=!0;var Tt=Iyt(ot,R);Tt&&(Q+=Tt[qq],x.push(Tt),R++)}});var G=32*1024;if(Q>G)for(var ce=0,fe=x[Ti]-1,Ee=0,Re=ce,Qe=fe;ce<fe;){var Ze=x[ce][qq],He=x[fe][qq];if(Ee+=Ze+He,Ee>G){var Ye=Qe-Re+1;x.splice(Re,Ye);break}Re=ce,Qe=fe,ce++,fe--}}return x}s(Cyt,"_parseStack");function Vq(v){var x="";if(v&&(x=v.typeName||v[lb]||"",!x))try{var T=/function (.{1,200})\(/,R=T.exec(v.constructor[h9]());x=R&&R[Ti]>1?R[1]:""}catch{}return x}s(Vq,"_getErrorType");function qae(v){if(v)try{if(!Ae(v)){var x=Vq(v),T=Uae(v,!1);return(!T||T==="{}")&&(v[Kk]&&(v=v[Kk],x=Vq(v)),T=Uae(v,!0)),$m(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(v||"")}s(qae,"_formatErrorCode");var zq=function(){function v(x,T,R,L,Q,G){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ce=this;ce.ver=2,gyt(T)?(ce[g9]=T[g9]||[],ce[cy]=T[cy],ce[O1]=T[O1],T[A9]&&(ce[A9]=T[A9]),T.id&&(ce.id=T.id,T[cy].id=T.id),T[Bae]&&(ce[Bae]=T[Bae]),ie(T.isManual)||(ce.isManual=T.isManual)):(R||(R={}),G&&(R.id=G),ce[g9]=[Q2e(x,T,R)],ce[cy]=p_(x,R),ce[O1]=h_(x,L),Q&&(ce[A9]=Q),G&&(ce.id=G))}return s(v,"Exception"),v.CreateAutoException=function(x,T,R,L,Q,G,ce,fe){var Ee=Vq(Q||G||x);return{message:M2e(x,Ee),url:T,lineNumber:R,columnNumber:L,error:qae(Q||G||x),evt:qae(G||x),typeName:Ee,stackDetails:O2e(ce||Q||G),errorSrc:fe}},v.CreateFromInterface=function(x,T,R,L){var Q=T[g9]&&qm(T[g9],function(ce){return xyt(x,ce)}),G=new v(x,Gm(Gm({},T),{exceptions:Q}),R,L);return G},v.prototype.toInterface=function(){var x=this,T=x.exceptions,R=x.properties,L=x.measurements,Q=x.severityLevel,G=x.problemGroup,ce=x.id,fe=x.isManual,Ee=T instanceof Array&&qm(T,function(Re){return Re.toInterface()})||void 0;return{ver:"4.0",exceptions:Ee,severityLevel:Q,properties:R,measurements:L,problemGroup:G,id:ce,isManual:fe}},v.CreateSimpleException=function(x,T,R,L,Q,G){var ce;return{exceptions:[(ce={},ce[Wq]=!0,ce.message=x,ce.stack=Q,ce.typeName=T,ce)]}},v.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",v.dataType="ExceptionData",v.formatError=qae,v}(),vyt=Xt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Eyt(){var v=this,x=Je(v[Gk])&&qm(v[Gk],function(R){return wyt(R)}),T={id:v.id,outerId:v.outerId,typeName:v[Hq],message:v[Uq],hasFullStack:v[Wq],stack:v[rh],parsedStack:x||void 0};return T}s(Eyt,"_toInterface");function Q2e(v,x,T){var R,L,Q,G,ce,fe,Ee,Re;if(myt(x))G=x[Hq],ce=x[Uq],Ee=x[rh],Re=x[Gk]||[],fe=x[Wq];else{var Qe=x,Ze=Qe&&Qe.evt;vt(Qe)||(Qe=Qe[Kk]||Ze||Qe),G=Ju(v,Vq(Qe))||cb,ce=I2e(v,M2e(x||Qe,G))||cb;var He=x[Oae]||O2e(x);Re=Cyt(He),Je(Re)&&qm(Re,function(Ye){Ye[$q]=Ju(v,Ye[$q]),Ye[Q1]=Ju(v,Ye[Q1])}),Ee=WAt(v,yyt(He)),fe=Je(Re)&&Re[Ti]>0,T&&(T[Hq]=T[Hq]||G)}return R={},R[jq]=vyt,R.id=L,R.outerId=Q,R.typeName=G,R.message=ce,R[Wq]=fe,R.stack=Ee,R.parsedStack=Re,R.toInterface=Eyt,R}s(Q2e,"_createExceptionDetails");function xyt(v,x){var T=Je(x[Gk])&&qm(x[Gk],function(L){return Tyt(L)})||x[Gk],R=Q2e(v,Gm(Gm({},x),{parsedStack:T}));return R}s(xyt,"_createExDetailsFromInterface");function U2e(v,x){var T=x[m9](dyt);if(T&&T[Ti]>=4)v[Q1]=T[1],v[Vk]=parseInt(T[2]);else{var R=x[m9](fyt);R&&R[Ti]>=3?(v[Q1]=R[1],v[Vk]=parseInt(R[2])):v[Q1]=x}}s(U2e,"_parseFilename");function q2e(v,x,T){var R=v[Q1];x.fn&&T&&T[Ti]>x.fn&&(x.ln&&T[Ti]>x.ln?(R=zi(T[x.fn]||""),v[Vk]=parseInt(zi(T[x.ln]||""))||0):R=zi(T[x.fn]||"")),R&&U2e(v,R)}s(q2e,"_handleFilename");function byt(v){var x=!1;if(v&&Ae(v)){var T=zi(v);T&&(x=syt.test(T))}return x}s(byt,"_isStackFrame");var H2e=Xt({level:1,method:1,assembly:0,fileName:0,line:0});function Iyt(v,x){var T,R;if(v&&Ae(v)&&zi(v)){R=(T={},T[jq]=H2e,T.level=x,T.assembly=zi(v),T.method=D2e,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var L=0;L<L2e[Ti];){var Q=L2e[L];if(Q.chk&&!Q.chk(v))break;Q.pre&&(v=Q.pre(v));var G=v[m9](Q.re);if(G&&G[Ti]>=Q.len){Q.m&&(R.method=zi(G[Q.m]||D2e)),Q.hdl?Q.hdl(R,Q,G):Q.fn&&(Q.ln?(R[Q1]=zi(G[Q.fn]||""),R[Vk]=parseInt(zi(G[Q.ln]||""))||0):U2e(R,G[Q.fn]||""));break}L++}}return W2e(R)}s(Iyt,"_extractStackFrame");function Tyt(v){var x,T=(x={},x[jq]=H2e,x.level=v.level,x.method=v.method,x.assembly=v[$q],x.fileName=v[Q1],x.line=v[Vk],x.sizeInBytes=0,x);return W2e(T)}s(Tyt,"_stackFrameFromInterface");function W2e(v){var x=oyt;return v&&(x+=v.method[Ti],x+=v.assembly[Ti],x+=v.fileName[Ti],x+=v.level.toString()[Ti],x+=v.line.toString()[Ti],v[qq]=x),v}s(W2e,"_populateFrameSizeInBytes");function wyt(v){return{level:v.level,method:v.method,assembly:v[$q],fileName:v[Q1],line:v[Vk]}}s(wyt,"_parsedFrameToInterface");var _yt=function(){function v(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(v,"DataPoint"),v}(),y9=function(){function v(x,T,R,L,Q,G,ce,fe,Ee){this.aiDataContract={ver:1,metrics:1,properties:0};var Re=this;Re.ver=2;var Qe=new _yt;Qe[qAt]=L>0?L:void 0,Qe.max=isNaN(G)||G===null?void 0:G,Qe.min=isNaN(Q)||Q===null?void 0:Q,Qe[lb]=Ju(x,T)||cb,Qe.value=R,Qe.stdDev=isNaN(ce)||ce===null?void 0:ce,Re.metrics=[Qe],Re[cy]=p_(x,fe),Re[O1]=h_(x,Ee)}return s(v,"Metric"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",v.dataType="MetricData",v}(),C9="";function $2e(v){(isNaN(v)||v<0)&&(v=0),v=Lse(v);var x=C9+v%1e3,T=C9+UA(v/1e3)%60,R=C9+UA(v/(1e3*60))%60,L=C9+UA(v/(1e3*60*60))%24,Q=UA(v/(1e3*60*60*24));return x=x[Ti]===1?"00"+x:x[Ti]===2?"0"+x:x,T=T[Ti]<2?"0"+T:T,R=R[Ti]<2?"0"+R:R,L=L[Ti]<2?"0"+L:L,(Q>0?Q+".":C9)+L+":"+R+":"+T+"."+x}s($2e,"msToTimeSpan");var Yq=function(){function v(x,T,R,L,Q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var fe=this;fe.ver=2,fe.id=$At(x,ce),fe.url=Nae(x,R),fe[lb]=Ju(x,T)||cb,isNaN(L)||(fe[Gq]=$2e(L)),fe[cy]=p_(x,Q),fe[O1]=h_(x,G)}return s(v,"PageView"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",v.dataType="PageviewData",v}(),Kq=function(){function v(x,T,R,L,Q,G,ce,fe,Ee,Re,Qe,Ze){Ee===void 0&&(Ee="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var He=this;He.ver=2,He.id=T,He[Gq]=$2e(Q),He.success=G,He.resultCode=ce+"",He.type=Ju(x,Ee);var Ye=JAt(x,R,fe,L);He.data=Nae(x,L)||Ye.data,He.target=Ju(x,Ye.target),Re&&(He.target="".concat(He.target," | ").concat(Re)),He[lb]=Ju(x,Ye[lb]),He[cy]=p_(x,Qe),He[O1]=h_(x,Ze)}return s(v,"RemoteDependencyData"),v.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",v.dataType="RemoteDependencyData",v}(),Jq=function(){function v(x,T,R,L,Q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var G=this;G.ver=2,T=T||cb,G[Uq]=I2e(x,T),G[cy]=p_(x,L),G[O1]=h_(x,Q),R&&(G[A9]=R)}return s(v,"Trace"),v.envelopeType="Microsoft.ApplicationInsights.{0}.Message",v.dataType="MessageData",v}(),Xq=function(){function v(x,T,R,L,Q,G,ce){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var fe=this;fe.ver=2,fe.url=Nae(x,R),fe[lb]=Ju(x,T)||cb,fe[cy]=p_(x,Q),fe[O1]=h_(x,G),ce&&(fe.domProcessing=ce.domProcessing,fe[Gq]=ce[Gq],fe.networkConnect=ce.networkConnect,fe.perfTotal=ce.perfTotal,fe.receivedResponse=ce.receivedResponse,fe.sentRequest=ce.sentRequest)}return s(v,"PageViewPerformance"),v.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",v.dataType="PageviewPerformanceData",v}(),g_=function(){function v(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(v,"Data"),v}(),Syt=nk({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ub(v){var x="ai."+v+".";return function(T){return x+T}}s(ub,"_aiNameFunc");var v9=ub("application"),cl=ub("device"),Zq=ub("location"),Jk=ub("operation"),Hae=ub("session"),db=ub("user"),A_=ub("cloud"),E9=ub("internal"),j2e=function(v){Hw(x,v);function x(){return v.call(this)||this}return s(x,"ContextTagKeys"),x}(Jse({applicationVersion:v9("ver"),applicationBuild:v9("build"),applicationTypeId:v9("typeId"),applicationId:v9("applicationId"),applicationLayer:v9("layer"),deviceId:cl("id"),deviceIp:cl("ip"),deviceLanguage:cl("language"),deviceLocale:cl("locale"),deviceModel:cl("model"),deviceFriendlyName:cl("friendlyName"),deviceNetwork:cl("network"),deviceNetworkName:cl("networkName"),deviceOEMName:cl("oemName"),deviceOS:cl("os"),deviceOSVersion:cl("osVersion"),deviceRoleInstance:cl("roleInstance"),deviceRoleName:cl("roleName"),deviceScreenResolution:cl("screenResolution"),deviceType:cl("type"),deviceMachineName:cl("machineName"),deviceVMName:cl("vmName"),deviceBrowser:cl("browser"),deviceBrowserVersion:cl("browserVersion"),locationIp:Zq("ip"),locationCountry:Zq("country"),locationProvince:Zq("province"),locationCity:Zq("city"),operationId:Jk("id"),operationName:Jk("name"),operationParentId:Jk("parentId"),operationRootId:Jk("rootId"),operationSyntheticSource:Jk("syntheticSource"),operationCorrelationVector:Jk("correlationVector"),sessionId:Hae("id"),sessionIsFirst:Hae("isFirst"),sessionIsNew:Hae("isNew"),userAccountAcquisitionDate:db("accountAcquisitionDate"),userAccountId:db("accountId"),userAgent:db("userAgent"),userId:db("id"),userStoreRegion:db("storeRegion"),userAuthUserId:db("authUserId"),userAnonymousUserAcquisitionDate:db("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:db("authUserAcquisitionDate"),cloudName:A_("name"),cloudRole:A_("role"),cloudRoleVer:A_("roleVer"),cloudRoleInstance:A_("roleInstance"),cloudEnvironment:A_("environment"),cloudLocation:A_("location"),cloudDeploymentUnit:A_("deploymentUnit"),internalNodeName:E9("nodeName"),internalSdkVersion:E9("sdkVersion"),internalAgentVersion:E9("agentVersion"),internalSnippet:E9("snippet"),internalSdkSrc:E9("sdkSrc")})),Rl=new j2e;function G2e(v,x){UAt(v,null,null,x)}s(G2e,"_disableEvents");function Ryt(v){var x=ic(),T=oc(),R=!1,L=[],Q=1;T&&!ie(T.onLine)&&!T.onLine&&(Q=2);var G=0,ce=Ze(),fe=A2e(Zm("OfflineListener"),v);try{if(Re(Fs())&&(R=!0),x){var Ee=x.body||x;Ee.ononline&&Re(Ee)&&(R=!0)}}catch{R=!1}function Re(nr){var Tr=!1;return nr&&(Tr=y2e(nr,"online",gt,fe),Tr&&y2e(nr,"offline",ot,fe)),Tr}s(Re,"_enableEvents");function Qe(){return ce}s(Qe,"_isOnline");function Ze(){return!(G===2||Q===2)}s(Ze,"calCurrentState");function He(){var nr=Ze();ce!==nr&&(ce=nr,qr(L,function(Tr){var ei={isOnline:ce,rState:Q,uState:G};try{Tr(ei)}catch{}}))}s(He,"listnerNoticeCheck");function Ye(nr){G=nr,He()}s(Ye,"setOnlineState");function gt(){Q=1,He()}s(gt,"_setOnline");function ot(){Q=2,He()}s(ot,"_setOffline");function Tt(){var nr=Fs();if(nr&&R){if(G2e(nr,fe),x){var Tr=x.body||x;W(Tr.ononline)||G2e(Tr,fe)}R=!1}}s(Tt,"_unload");function Ht(nr){return L.push(nr),{rm:s(function(){var Tr=L.indexOf(nr);if(Tr>-1)return L.splice(Tr,1)},"rm")}}return s(Ht,"addListener"),{isOnline:Qe,isListening:s(function(){return R},"isListening"),unload:Tt,addListener:Ht,setOnlineState:Ye}}s(Ryt,"createOfflineListener");var kyt="AppInsightsChannelPlugin",y_="duration",uu="tags",Wae="deviceType",N0="data",U1="name",x9="traceID",Pi="length",b9="stringify",C_="measurements",ly="dataType",v_="envelopeType",E_="toString",x_="enqueue",b_="count",q1="push",$ae="emitLineDelimitedJson",Xk="clear",eH="markAsSent",I9="clearSent",jae="bufferOverride",T9="BUFFER_KEY",fb="SENT_BUFFER_KEY",Zk="concat",w9="MAX_BUFFER_SIZE",_9="triggerSend",Xu="diagLog",Gae="initialize",S9="_sender",R9="endpointUrl",k9="instrumentationKey",Vae="customHeaders",V2e="maxBatchSizeInBytes",zae="onunloadDisableBeacon",Yae="isBeaconApiDisabled",z2e="alwaysUseXhrOverride",Y2e="enableSessionStorageBuffer",uy="_buffer",K2e="onunloadDisableFetch",J2e="disableSendBeaconSplit",tH="getSenderInst",I_="_onError",Kae="_onPartialSuccess",rH="_onSuccess",Jae="itemsReceived",Xae="itemsAccepted",Zae="baseType",nH="sampleRate",Pyt="getHashCodeScore",ece="baseType",la="baseData",kl="properties",X2e="true";function uc(v,x,T){return XA(v,x,T,ue)}s(uc,"_setValueIf");function Dyt(v,x,T){var R=T[uu]=T[uu]||{},L=x.ext=x.ext||{},Q=x[uu]=x[uu]||[],G=L.user;G&&(uc(R,Rl.userAuthUserId,G.authId),uc(R,Rl.userId,G.id||G.localId));var ce=L.app;ce&&uc(R,Rl.sessionId,ce.sesId);var fe=L.device;fe&&(uc(R,Rl.deviceId,fe.id||fe.localId),uc(R,Rl[Wae],fe.deviceClass),uc(R,Rl.deviceIp,fe.ip),uc(R,Rl.deviceModel,fe.model),uc(R,Rl[Wae],fe[Wae]));var Ee=x.ext.web;if(Ee){uc(R,Rl.deviceLanguage,Ee.browserLang),uc(R,Rl.deviceBrowserVersion,Ee.browserVer),uc(R,Rl.deviceBrowser,Ee.browser);var Re=T[N0]=T[N0]||{},Qe=Re[la]=Re[la]||{},Ze=Qe[kl]=Qe[kl]||{};uc(Ze,"domain",Ee.domain),uc(Ze,"isManual",Ee.isManual?X2e:null),uc(Ze,"screenRes",Ee.screenRes),uc(Ze,"userConsent",Ee.userConsent?X2e:null)}var He=L.os;He&&(uc(R,Rl.deviceOS,He[U1]),uc(R,Rl.deviceOSVersion,He.osVer));var Ye=L.trace;Ye&&(uc(R,Rl.operationParentId,Ye.parentID),uc(R,Rl.operationName,Ju(v,Ye[U1])),uc(R,Rl.operationId,Ye[x9]));for(var gt={},ot=Q[Pi]-1;ot>=0;ot--){var Tt=Q[ot];le(Tt,function(nr,Tr){gt[nr]=Tr}),Q.splice(ot,1)}le(Q,function(nr,Tr){gt[nr]=Tr});var Ht=Gm(Gm({},R),gt);Ht[Rl.internalSdkVersion]||(Ht[Rl.internalSdkVersion]=Ju(v,"javascript:".concat(Byt.Version),64)),T[uu]=U8(Ht)}s(Dyt,"_extractPartAExtensions");function pb(v,x,T){ie(v)||le(v,function(R,L){ct(L)?T[R]=L:Ae(L)?x[R]=L:Hx()&&(x[R]=Nd()[b9](L))})}s(pb,"_extractPropsAndMeasurements");function T_(v,x){ie(v)||le(v,function(T,R){v[T]=R||x})}s(T_,"_convertPropsUndefinedToCustomDefinedValue");function w_(v,x,T,R){var L=new iyt(v,R,x);uc(L,"sampleRate",T[C2e]),(T[la]||{}).startTime&&(L.time=zw(T[la].startTime)),L.iKey=T.iKey;var Q=T.iKey.replace(/-/g,"");return L[U1]=L[U1].replace("{0}",Q),Dyt(v,T,L),T[uu]=T[uu]||[],U8(L)}s(w_,"_createEnvelope");function __(v,x){ie(x[la])&&Nr(v,1,46,"telemetryItem.baseData cannot be null.")}s(__,"EnvelopeCreatorInit");var Byt={Version:"3.3.6"};function Nyt(v,x,T){__(v,x);var R=x[la][C_]||{},L=x[la][kl]||{};pb(x[N0],L,R),ie(T)||T_(L,T);var Q=x[la];if(ie(Q))return Lk(v,"Invalid input for dependency data"),null;var G=Q[kl]&&Q[kl][v2e]?Q[kl][v2e]:"GET",ce=new Kq(v,Q.id,Q.target,Q[U1],Q[y_],Q.success,Q.responseCode,G,Q.type,Q.correlationContext,L,R),fe=new g_(Kq[ly],ce);return w_(v,Kq[v_],x,fe)}s(Nyt,"DependencyEnvelopeCreator");function Z2e(v,x,T){__(v,x);var R={},L={};x[ece]!==Yk[ly]&&(R.baseTypeSource=x[ece]),x[ece]===Yk[ly]?(R=x[la][kl]||{},L=x[la][C_]||{}):x[la]&&pb(x[la],R,L),pb(x[N0],R,L),ie(T)||T_(R,T);var Q=x[la][U1],G=new Yk(v,Q,R,L),ce=new g_(Yk[ly],G);return w_(v,Yk[v_],x,ce)}s(Z2e,"EventEnvelopeCreator");function Lyt(v,x,T){__(v,x);var R=x[la][C_]||{},L=x[la][kl]||{};pb(x[N0],L,R),ie(T)||T_(L,T);var Q=x[la],G=zq.CreateFromInterface(v,Q,L,R),ce=new g_(zq[ly],G);return w_(v,zq[v_],x,ce)}s(Lyt,"ExceptionEnvelopeCreator");function Myt(v,x,T){__(v,x);var R=x[la],L=R[kl]||{},Q=R[C_]||{};pb(x[N0],L,Q),ie(T)||T_(L,T);var G=new y9(v,R[U1],R.average,R.sampleCount,R.min,R.max,R.stdDev,L,Q),ce=new g_(y9[ly],G);return w_(v,y9[v_],x,ce)}s(Myt,"MetricEnvelopeCreator");function Fyt(v,x,T){__(v,x);var R,L=x[la];!ie(L)&&!ie(L[kl])&&!ie(L[kl][y_])?(R=L[kl][y_],delete L[kl][y_]):!ie(x[N0])&&!ie(x[N0][y_])&&(R=x[N0][y_],delete x[N0][y_]);var Q=x[la],G;((x.ext||{}).trace||{})[x9]&&(G=x.ext.trace[x9]);var ce=Q.id||G,fe=Q[U1],Ee=Q.uri,Re=Q[kl]||{},Qe=Q[C_]||{};if(ie(Q.refUri)||(Re.refUri=Q.refUri),ie(Q.pageType)||(Re.pageType=Q.pageType),ie(Q.isLoggedIn)||(Re.isLoggedIn=Q.isLoggedIn[E_]()),!ie(Q[kl])){var Ze=Q[kl];le(Ze,function(gt,ot){Re[gt]=ot})}pb(x[N0],Re,Qe),ie(T)||T_(Re,T);var He=new Yq(v,fe,Ee,R,Re,Qe,ce),Ye=new g_(Yq[ly],He);return w_(v,Yq[v_],x,Ye)}s(Fyt,"PageViewEnvelopeCreator");function Oyt(v,x,T){__(v,x);var R=x[la],L=R[U1],Q=R.uri||R.url,G=R[kl]||{},ce=R[C_]||{};pb(x[N0],G,ce),ie(T)||T_(G,T);var fe=new Xq(v,L,Q,void 0,G,ce,R),Ee=new g_(Xq[ly],fe);return w_(v,Xq[v_],x,Ee)}s(Oyt,"PageViewPerformanceEnvelopeCreator");function Qyt(v,x,T){__(v,x);var R=x[la].message,L=x[la].severityLevel,Q=x[la][kl]||{},G=x[la][C_]||{};pb(x[N0],Q,G),ie(T)||T_(Q,T);var ce=new Jq(v,R,L,Q,G),fe=new g_(Jq[ly],ce);return w_(v,Jq[v_],x,fe)}s(Qyt,"TraceEnvelopeCreator");var eRe=function(){function v(x,T){var R=[],L=!1,Q=T.maxRetryCnt;this._get=function(){return R},this._set=function(G){return R=G,R},cu(v,this,function(G){G[x_]=function(ce){if(G[b_]()>=T.eventsLimitInMem){L||(Nr(x,2,105,"Maximum in-memory buffer size reached: "+G[b_](),!0),L=!0);return}ce.cnt=ce.cnt||0,!(!ie(Q)&&ce.cnt>Q)&&R[q1](ce)},G[b_]=function(){return R[Pi]},G.size=function(){for(var ce=R[Pi],fe=0;fe<R[Pi];fe++)ce+=R[fe].item[Pi];return T[$ae]||(ce+=2),ce},G[Xk]=function(){R=[],L=!1},G.getItems=function(){return R.slice(0)},G.batchPayloads=function(ce){if(ce&&ce[Pi]>0){var fe=[];qr(ce,function(Re){fe[q1](Re.item)});var Ee=T[$ae]?fe.join(`
`):"["+fe.join(",")+"]";return Ee}return null},G.createNew=function(ce,fe,Ee){var Re=R.slice(0);ce=ce||x,fe=fe||{};var Qe=Ee?new tRe(ce,fe):new tce(ce,fe);return qr(Re,function(Ze){Qe[x_](Ze)}),Qe}})}return s(v,"BaseSendBuffer"),v.__ieDyn=1,v}(),tce=function(v){Hw(x,v);function x(T,R){var L=v.call(this,T,R)||this;return cu(x,L,function(Q,G){Q[eH]=function(ce){G[Xk]()},Q[I9]=function(ce){}}),L}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(eRe),Uyt=["AI_buffer","AI_sentBuffer"],tRe=function(v){Hw(x,v);function x(R,L){var Q=v.call(this,R,L)||this,G=!1,ce=L?.namePrefix,fe=L[jae]||{getItem:ZAt,setItem:eyt},Ee=fe.getItem,Re=fe.setItem,Qe=L.maxRetryCnt;return cu(x,Q,function(Ze,He){var Ye=Tr(x[T9]),gt=Tr(x[fb]),ot=Mi(),Tt=gt[Zk](ot),Ht=Ze._set(Ye[Zk](Tt));Ht[Pi]>x[w9]&&(Ht[Pi]=x[w9]),Li(x[fb],[]),Li(x[T9],Ht),Ze[x_]=function(xn){if(Ze[b_]()>=x[w9]){G||(Nr(R,2,67,"Maximum buffer size reached: "+Ze[b_](),!0),G=!0);return}xn.cnt=xn.cnt||0,!(!ie(Qe)&&xn.cnt>Qe)&&(He[x_](xn),Li(x[T9],Ze._get()))},Ze[Xk]=function(){He[Xk](),Li(x[T9],Ze._get()),Li(x[fb],[]),G=!1},Ze[eH]=function(xn){Li(x[T9],Ze._set(nr(xn,Ze._get())));var zr=Tr(x[fb]);zr instanceof Array&&xn instanceof Array&&(zr=zr[Zk](xn),zr[Pi]>x[w9]&&(Nr(R,1,67,"Sent buffer reached its maximum size: "+zr[Pi],!0),zr[Pi]=x[w9]),Li(x[fb],zr))},Ze[I9]=function(xn){var zr=Tr(x[fb]);zr=nr(xn,zr),Li(x[fb],zr)},Ze.createNew=function(xn,zr,Fi){Fi=!!Fi;var ua=Ze._get().slice(0),ms=Tr(x[fb]).slice(0);xn=xn||R,zr=zr||{},Ze[Xk]();var Wt=Fi?new x(xn,zr):new tce(xn,zr);return qr(ua,function(Yr){Wt[x_](Yr)}),Fi&&Wt[eH](ms),Wt};function nr(xn,zr){var Fi=[],ua=[];return qr(xn,function(ms){ua[q1](ms.item)}),qr(zr,function(ms){!Oe(ms)&&sc(ua,ms.item)===-1&&Fi[q1](ms)}),Fi}s(nr,"_removePayloadsFromBuffer");function Tr(xn){var zr=xn;return zr=ce?ce+"_"+zr:zr,ei(zr)}s(Tr,"_getBuffer");function ei(xn){try{var zr=Ee(R,xn);if(zr){var Fi=Nd().parse(zr);if(Ae(Fi)&&(Fi=Nd().parse(Fi)),Fi&&Je(Fi))return Fi}}catch(ua){Nr(R,1,42," storage key: "+xn+", "+sl(ua),{exception:Ft(ua)})}return[]}s(ei,"_getBufferBase");function Li(xn,zr){var Fi=xn;try{Fi=ce?ce+"_"+Fi:Fi;var ua=JSON[b9](zr);Re(R,Fi,ua)}catch(ms){Re(R,Fi,JSON[b9]([])),Nr(R,2,41," storage key: "+Fi+", "+sl(ms)+". Buffer cleared",{exception:Ft(ms)})}}s(Li,"_setBuffer");function Mi(){var xn=[];try{return qr(Uyt,function(zr){var Fi=Oo(zr);if(xn=xn[Zk](Fi),ce){var ua=ce+"_"+zr,ms=Oo(ua);xn=xn[Zk](ms)}}),xn}catch(zr){Nr(R,2,41,"Transfer events from previous buffers: "+sl(zr)+". previous Buffer items can not be removed",{exception:Ft(zr)})}return[]}s(Mi,"_getPreviousEvents");function Oo(xn){try{var zr=ei(xn),Fi=[];return qr(zr,function(ua){var ms={item:ua,cnt:0};Fi[q1](ms)}),tyt(R,xn),Fi}catch{}return[]}s(Oo,"_getItemsFromPreviousKey")}),Q}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(eRe),qyt=function(){function v(x){cu(v,this,function(T){T.serialize=function(G){var ce=R(G,"root");try{return Nd()[b9](ce)}catch(fe){Nr(x,1,48,fe&&Oe(fe[E_])?fe[E_]():"Error serializing object",null,!0)}};function R(G,ce){var fe="__aiCircularRefCheck",Ee={};if(!G)return Nr(x,1,48,"cannot serialize object because it is null or undefined",{name:ce},!0),Ee;if(G[fe])return Nr(x,2,50,"Circular reference detected while serializing object",{name:ce},!0),Ee;if(!G.aiDataContract){if(ce==="measurements")Ee=Q(G,"number",ce);else if(ce==="properties")Ee=Q(G,"string",ce);else if(ce==="tags")Ee=Q(G,"string",ce);else if(Je(G))Ee=L(G,ce);else{Nr(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ce},!0);try{Nd()[b9](G),Ee=G}catch(Re){Nr(x,1,48,Re&&Oe(Re[E_])?Re[E_]():"Error serializing object",null,!0)}}return Ee}return G[fe]=!0,le(G.aiDataContract,function(Re,Qe){var Ze=Oe(Qe)?Qe()&1:Qe&1,He=Oe(Qe)?Qe()&4:Qe&4,Ye=Qe&2,gt=G[Re]!==void 0,ot=Te(G[Re])&&G[Re]!==null;if(Ze&&!gt&&!Ye)Nr(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Re,name:ce});else if(!He){var Tt=void 0;ot?Ye?Tt=L(G[Re],Re):Tt=R(G[Re],Re):Tt=G[Re],Tt!==void 0&&(Ee[Re]=Tt)}}),delete G[fe],Ee}s(R,"_serializeObject");function L(G,ce){var fe;if(G)if(!Je(G))Nr(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ce},!0);else{fe=[];for(var Ee=0;Ee<G[Pi];Ee++){var Re=G[Ee],Qe=R(Re,ce+"["+Ee+"]");fe[q1](Qe)}}return fe}s(L,"_serializeArray");function Q(G,ce,fe){var Ee;return G&&(Ee={},le(G,function(Re,Qe){if(ce==="string")Qe===void 0?Ee[Re]="undefined":Qe===null?Ee[Re]="null":Qe[E_]?Ee[Re]=Qe[E_]():Ee[Re]="invalid field: toString() is not defined.";else if(ce==="number")if(Qe===void 0)Ee[Re]="undefined";else if(Qe===null)Ee[Re]="null";else{var Ze=parseFloat(Qe);Ee[Re]=Ze}else Ee[Re]="invalid field: "+fe+" is of unknown type.",Nr(x,1,Ee[Re],null,!0)})),Ee}s(Q,"_serializeStringMap")})}return s(v,"Serializer"),v.__ieDyn=1,v}(),Hyt=8,Wyt=function(){function v(){}return s(v,"HashCodeScoreGenerator"),v.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/v.INT_MAX_VALUE;return T*100},v.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[Pi]<Hyt;)x=x[Zk](x);for(var T=5381,R=0;R<x[Pi];++R)T=(T<<5)+T+x.charCodeAt(R),T=T&T;return Math.abs(T)},v.INT_MAX_VALUE=2147483647,v}(),$yt=function(){function v(){var x=this,T=new Wyt,R=new j2e;x.getSamplingScore=function(L){var Q=0;return L[uu]&&L[uu][R.userId]?Q=T.getHashCodeScore(L[uu][R.userId]):L.ext&&L.ext.user&&L.ext.user.id?Q=T[Pyt](L.ext.user.id):L[uu]&&L[uu][R.operationId]?Q=T.getHashCodeScore(L[uu][R.operationId]):L.ext&&L.ext.telemetryTrace&&L.ext.telemetryTrace[x9]?Q=T.getHashCodeScore(L.ext.telemetryTrace[x9]):Q=Math.random()*100,Q}}return s(v,"SamplingScoreGenerator"),v}(),jyt=function(){function v(x,T){this.INT_MAX_VALUE=2147483647;var R=T||o_(null);(x>100||x<0)&&(R.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[nH]=x,this.samplingScoreGenerator=new $yt}return s(v,"Sample"),v.prototype.isSampledIn=function(x){var T=this[nH],R=!1;return T==null||T>=100||x.baseType===y9[ly]?!0:(R=this.samplingScoreGenerator.getSamplingScore(x)<T,R)},v}(),Os,H1,dy=void 0,rRe="",Gyt=65e3;function nRe(v){try{return v.responseText}catch{}return null}s(nRe,"_getResponseText");function Vyt(v){return v&&v.sendPOST}s(Vyt,"isOverrideFn");var iRe=rr((Os={endpointUrl:e9(ue,Rae+jk)},Os[$ae]=Zp(),Os.maxBatchInterval=15e3,Os[V2e]=102400,Os.disableTelemetry=Zp(),Os[Y2e]=Zp(!0),Os.isRetryDisabled=Zp(),Os[Yae]=Zp(!0),Os[J2e]=Zp(!0),Os.disableXhr=Zp(),Os[K2e]=Zp(),Os[zae]=Zp(),Os[k9]=dy,Os.namePrefix=dy,Os.samplingPercentage=e9(zyt,100),Os[Vae]=dy,Os.convertUndefined=dy,Os.eventsLimitInMem=1e4,Os[jae]=!1,Os.httpXHROverride={isVal:Vyt,v:dy},Os[z2e]=Zp(),Os.transports=dy,Os.retryCodes=dy,Os.maxRetryCnt={isVal:ct,v:10},Os));function zyt(v){return!isNaN(v)&&v>0&&v<=100}s(zyt,"_chkSampling");var Yyt=(H1={},H1[Yk.dataType]=Z2e,H1[Jq.dataType]=Qyt,H1[Yq.dataType]=Fyt,H1[Xq.dataType]=Oyt,H1[zq.dataType]=Lyt,H1[y9.dataType]=Myt,H1[Kq.dataType]=Nyt,H1),oRe=function(v){Hw(x,v);function x(){var T=v.call(this)||this;T.priority=1001,T.identifier=kyt;var R,L,Q,G,ce,fe,Ee,Re=0,Qe,Ze,He,Ye,gt,ot,Tt,Ht,nr,Tr,ei,Li,Mi,Oo,xn,zr,Fi,ua,ms,Wt,Yr,ko,Pt,Ln,Ra,Qo,Pl;return cu(x,T,function(dt,Bc){aRe(),dt.pause=function(){Ab(),Q=!0},dt.resume=function(){Q&&(Q=!1,L=null,Ko(),n4())},dt.flush=function(Ve,bt,cr){if(Ve===void 0&&(Ve=!0),!Q){Ab();try{return dt[_9](Ve,null,cr||1)}catch(Mr){Nr(dt[Xu](),1,22,"flush failed, telemetry will not be collected: "+sl(Mr),{exception:Ft(Mr)})}}},dt.onunloadFlush=function(){if(!Q)if(Tt||Wt)try{return dt[_9](!0,Sf,2)}catch(Ve){Nr(dt[Xu](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+sl(Ve),{exception:Ft(Ve)})}else dt.flush(!1)},dt.addHeader=function(Ve,bt){Ee[Ve]=bt},dt[Gae]=function(Ve,bt,cr,Mr){dt.isInitialized()&&Nr(dt[Xu](),1,28,"Sender is already initialized"),Bc[Gae](Ve,bt,cr,Mr);var Wn=dt.identifier;ce=new qyt(bt.logger),R=0,L=null,dt[S9]=null,fe=0;var In=dt[Xu]();He=A2e(Zm("Sender"),bt.evtNamespace&&bt.evtNamespace()),Ze=Ryt(He),dt._addHook(eg(Ve,function(po){var dc=po.cfg;dc.storagePrefix&&XAt(dc.storagePrefix);var L0=ob(null,dc,bt),xi=L0.getExtCfg(Wn,iRe),cRe=xi[R9];if(Ye&&cRe===Ye){var ice=dc[R9];ice&&ice!==cRe&&(xi[R9]=ice)}mt(xi[k9])&&(xi[k9]=dc[k9]),je(dt,"_senderConfig",{g:s(function(){return xi},"g")}),gt!==xi[R9]&&(Ye=gt=xi[R9]),bt.activeStatus()===jA.PENDING?dt.pause():bt.activeStatus()===jA.ACTIVE&&dt.resume(),Tr&&Tr!==xi[Vae]&&qr(Tr,function(fu){delete Ee[fu.header]}),ot=xi[V2e],Tt=(xi[zae]===!1||xi[Yae]===!1)&&ey(),Ht=xi[zae]===!1&&ey(),nr=xi[Yae]===!1&&ey(),Wt=xi[z2e],Yr=!!xi.disableXhr,Pl=xi.retryCodes;var oce=xi[jae],i4=!!xi[Y2e]&&(!!oce||P2e()),lRe=xi.namePrefix,Zyt=i4!==zr||i4&&ua!==lRe||i4&&Fi!==oce;if(dt[uy]){if(Zyt)try{dt[uy]=dt[uy].createNew(In,xi,i4)}catch(fu){Nr(dt[Xu](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+sl(fu),{exception:Ft(fu)})}Ko()}else dt[uy]=i4?new tRe(In,xi):new tce(In,xi);ua=lRe,zr=i4,Fi=oce,ko=!xi[K2e]&&e_(!0),Ra=!!xi[J2e],dt._sample=new jyt(xi.samplingPercentage,In),Li=xi[k9],!mt(Li)&&!sRe(Li,dc)&&Nr(In,1,100,"Invalid Instrumentation key "+Li),Tr=xi[Vae],Ae(Ye)&&!S2e(Ye)&&Tr&&Tr[Pi]>0?qr(Tr,function(fu){T.addHeader(fu.header,fu.value)}):Tr=null,ms=xi.enableSendPromise;var uRe=Dl();Qo?Qo.SetConfig(uRe):(Qo=new Dc,Qo[Gae](uRe,In));var aH=xi.httpXHROverride,cH=null,N9=null,eCt=rq([3,1,2],xi.transports);cH=Qo&&Qo[tH](eCt,!1);var sce=Qo&&Qo.getFallbackInst();Pt=s(function(fu,S_){return Wr(sce,fu,S_)},"_xhrSend"),Ln=s(function(fu,S_){return Wr(sce,fu,S_,!1)},"_fallbackSend"),cH=Wt?aH:cH||aH||sce,dt[S9]=function(fu,S_){return Wr(cH,fu,S_)},ko&&(Qe=r4);var ace=rq([3,1],xi.unloadTransports);ko||(ace=ace.filter(function(fu){return fu!==2})),N9=Qo&&Qo[tH](ace,!0),N9=Wt?aH:N9||aH,(Wt||xi.unloadTransports||!Qe)&&N9&&(Qe=s(function(fu,S_){return Wr(N9,fu,S_)},"_syncUnloadSender")),Qe||(Qe=Pt),ei=xi.disableTelemetry,Mi=xi.convertUndefined||dy,Oo=xi.isRetryDisabled,xn=xi.maxBatchInterval}))},dt.processTelemetry=function(Ve,bt){bt=dt._getTelCtx(bt);var cr=bt[Xu]();try{var Mr=ng(Ve,cr);if(!Mr)return;var Wn=gb(Ve,cr);if(!Wn)return;var In=ce.serialize(Wn),po=dt[uy];Ko(In);var dc={item:In,cnt:0};po[x_](dc),n4()}catch(L0){Nr(cr,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+sl(L0),{exception:Ft(L0)})}dt.processNext(Ve,bt)},dt.isCompletelyIdle=function(){return!Q&&Re===0&&dt._buffer[b_]()===0},dt.getOfflineListener=function(){return Ze},dt._xhrReadyStateChange=function(Ve,bt,cr){if(!og(bt))return nh(Ve,bt,cr)},dt[_9]=function(Ve,bt,cr){Ve===void 0&&(Ve=!0);var Mr;if(!Q)try{var Wn=dt[uy];if(ei)Wn[Xk]();else if(Wn[b_]()>0){var In=Wn.getItems();sH(cr||0,Ve),bt?Mr=bt.call(dt,In,Ve):Mr=dt[S9](In,Ve)}Ab()}catch(dc){var po=Wx();(!po||po>9)&&Nr(dt[Xu](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+sl(dc),{exception:Ft(dc)})}return Mr},dt.getOfflineSupport=function(){return{getUrl:s(function(){return Ye},"getUrl"),createPayload:yt,serialize:da,batch:du,shouldProcess:s(function(Ve){return!!ng(Ve)},"shouldProcess")}},dt._doTeardown=function(Ve,bt){dt.onunloadFlush(),Jx(Ze,!1),aRe()},dt[I_]=function(Ve,bt,cr){if(!og(Ve))return Md(Ve,bt)},dt[Kae]=function(Ve,bt){if(!og(Ve))return hb(Ve,bt)},dt[rH]=function(Ve,bt){if(!og(Ve))return rg(Ve)},dt._xdrOnLoad=function(Ve,bt){if(!og(bt))return ka(Ve,bt)};function ka(Ve,bt){var cr=nRe(Ve);if(Ve&&(cr+""=="200"||cr===""))R=0,dt[rH](bt,0);else{var Mr=Hr(cr);Mr&&Mr[Jae]&&Mr[Jae]>Mr[Xae]&&!Oo?dt[Kae](bt,Mr):dt[I_](bt,tq(Ve))}}s(ka,"_xdrOnLoad");function Dl(){try{var Ve={xdrOnComplete:s(function(cr,Mr,Wn){var In=mb(Wn);if(In)return ka(cr,In)},"xdrOnComplete"),fetchOnComplete:s(function(cr,Mr,Wn,In){var po=mb(In);if(po)return Qs(cr.status,po,cr.url,po[Pi],cr.statusText,Wn||"")},"fetchOnComplete"),xhrOnComplete:s(function(cr,Mr,Wn){var In=mb(Wn);if(In)return nh(cr,In,In[Pi])},"xhrOnComplete"),beaconOnRetry:s(function(cr,Mr,Wn){return ig(cr,Mr,Wn)},"beaconOnRetry")},bt={enableSendPromise:ms,isOneDs:!1,disableCredentials:!1,disableXhr:Yr,disableBeacon:!nr,disableBeaconSync:!Ht,senderOnCompleteCallBack:Ve};return bt}catch{}return null}s(Dl,"_getSendPostMgrConfig");function nh(Ve,bt,cr){Ve.readyState===4&&Qs(Ve.status,bt,Ve.responseURL,cr,Ik(Ve),nRe(Ve)||Ve.response)}s(nh,"_xhrReadyStateChange");function Md(Ve,bt,cr){Nr(dt[Xu](),2,26,"Failed to send telemetry.",{message:bt}),dt._buffer&&dt._buffer[I9](Ve)}s(Md,"_onError");function hb(Ve,bt){for(var cr=[],Mr=[],Wn=bt.errors.reverse(),In=0,po=Wn;In<po.length;In++){var dc=po[In],L0=Ve.splice(dc.index,1)[0];yb(dc.statusCode)?Mr[q1](L0):cr[q1](L0)}Ve[Pi]>0&&dt[rH](Ve,bt[Xae]),cr[Pi]>0&&dt[I_](cr,Ik(null,["partial success",bt[Xae],"of",bt.itemsReceived].join(" "))),Mr[Pi]>0&&(B9(Mr),Nr(dt[Xu](),2,40,"Partial success. Delivered: "+Ve[Pi]+", Failed: "+cr[Pi]+". Will retry to send "+Mr[Pi]+" our of "+bt[Jae]+" items"))}s(hb,"_onPartialSuccess");function rg(Ve,bt){dt._buffer&&dt._buffer[I9](Ve)}s(rg,"_onSuccess");function mb(Ve){try{if(Ve){var bt=Ve,cr=bt.oriPayload;return cr&&cr[Pi]?cr:null}}catch{}return null}s(mb,"_getPayloadArr");function ng(Ve,bt){if(ei)return!1;if(!Ve)return bt&&Nr(bt,1,7,"Cannot send empty telemetry"),!1;if(Ve.baseData&&!Ve[Zae])return bt&&Nr(bt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ve[Zae]||(Ve[Zae]="EventData"),!dt[S9])return bt&&Nr(bt,1,28,"Sender was not initialized"),!1;if(br(Ve))Ve[C2e]=dt._sample[nH];else return bt&&Nr(bt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:dt._sample[nH]}),!1;return!0}s(ng,"_validate");function gb(Ve,bt){var cr=Ve.iKey||Li,Mr=x.constructEnvelope(Ve,cr,bt,Mi);if(!Mr){Nr(bt,1,47,"Unable to create an AppInsights envelope");return}var Wn=!1;if(Ve[uu]&&Ve[uu][Sae]&&(qr(Ve[uu][Sae],function(In){try{In&&In(Mr)===!1&&(Wn=!0,Lk(bt,"Telemetry processor check returns false"))}catch(po){Nr(bt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+sl(po),{exception:Ft(po)},!0)}}),delete Ve[uu][Sae]),!Wn)return Mr}s(gb,"_getEnvelope");function da(Ve){var bt=rRe,cr=dt[Xu]();try{var Mr=ng(Ve,cr),Wn=null;Mr&&(Wn=gb(Ve,cr)),Wn&&(bt=ce.serialize(Wn))}catch{}return bt}s(da,"_serialize");function du(Ve){var bt=rRe;return Ve&&Ve[Pi]&&(bt="["+Ve.join(",")+"]"),bt}s(du,"_batch");function yt(Ve){var bt=Go();return{urlString:Ye,data:Ve,headers:bt}}s(yt,"_createPayload");function br(Ve){return dt._sample.isSampledIn(Ve)}s(br,"_isSampledIn");function qn(Ve,bt,cr,Mr){bt===200&&Ve?dt._onSuccess(Ve,Ve[Pi]):Mr&&dt[I_](Ve,Mr)}s(qn,"_getOnComplete");function Wr(Ve,bt,cr,Mr){Mr===void 0&&(Mr=!0);var Wn=s(function(dc,L0,xi){return qn(bt,dc,L0,xi)},"onComplete"),In=Hn(bt),po=Ve&&Ve.sendPOST;return po&&In?(Mr&&dt._buffer[eH](bt),po(In,Wn,!cr)):null}s(Wr,"_doSend");function Hn(Ve){if(Je(Ve)&&Ve[Pi]>0){var bt=dt[uy].batchPayloads(Ve),cr=Go(),Mr={data:bt,urlString:Ye,headers:cr,disableXhrSync:Yr,disableFetchKeepAlive:!ko,oriPayload:Ve};return Mr}return null}s(Hn,"_getPayload");function Go(){try{var Ve=Ee||{};return S2e(Ye)&&(Ve[E2e[6]]=E2e[7]),Ve}catch{}return null}s(Go,"_getHeaders");function Ko(Ve){var bt=Ve?Ve[Pi]:0;return dt[uy].size()+bt>ot?((!Ze||Ze.isOnline())&&dt[_9](!0,null,10),!0):!1}s(Ko,"_checkMaxSize");function Qs(Ve,bt,cr,Mr,Wn,In){var po=null;if(dt._appId||(po=Hr(In),po&&po.appId&&(dt._appId=po.appId)),(Ve<200||Ve>=300)&&Ve!==0){if((Ve===301||Ve===307||Ve===308)&&!Zu(cr)){dt[I_](bt,Wn);return}if(Ze&&!Ze.isOnline()){if(!Oo){var dc=10;B9(bt,dc),Nr(dt[Xu](),2,40,". Offline - Response Code: ".concat(Ve,". Offline status: ").concat(!Ze.isOnline(),". Will retry to send ").concat(bt.length," items."))}return}!Oo&&yb(Ve)?(B9(bt),Nr(dt[Xu](),2,40,". Response code "+Ve+". Will retry to send "+bt[Pi]+" items.")):dt[I_](bt,Wn)}else Zu(cr),Ve===206?(po||(po=Hr(In)),po&&!Oo?dt[Kae](bt,po):dt[I_](bt,Wn)):(R=0,dt[rH](bt,Mr))}s(Qs,"_checkResponsStatus");function Zu(Ve){return fe>=10?!1:!ie(Ve)&&Ve!==""&&Ve!==Ye?(Ye=Ve,++fe,!0):!1}s(Zu,"_checkAndUpdateEndPointUrl");function Sf(Ve,bt){if(Qe)Qe(Ve,!1);else{var cr=Qo&&Qo[tH]([3],!0);return Wr(cr,Ve,bt)}}s(Sf,"_doUnloadSend");function ig(Ve,bt,cr){var Mr=Ve,Wn=Mr&&Mr.oriPayload;if(Ra)Ln&&Ln(Wn,!0),Nr(dt[Xu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var In=[],po=0;po<Wn[Pi];po++){var dc=Wn[po],L0=[dc],xi=Hn(L0);cr(xi,bt)?dt._onSuccess(L0,L0[Pi]):In[q1](dc)}In[Pi]>0&&(Ln&&Ln(In,!0),Nr(dt[Xu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(ig,"_onBeaconRetry");function og(Ve){try{if(Ve&&Ve[Pi])return Ae(Ve[0])}catch{}return null}s(og,"_isStringArr");function r4(Ve,bt){var cr=null;if(Je(Ve)){for(var Mr=Ve[Pi],Wn=0;Wn<Ve[Pi];Wn++)Mr+=Ve[Wn].item[Pi];var In=Qo.getSyncFetchPayload();In+Mr<=Gyt?cr=2:ey()?cr=3:(cr=1,Nr(dt[Xu](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var po=Qo&&Qo[tH]([cr],!0);return Wr(po,Ve,bt)}return null}s(r4,"_fetchKeepAliveSender");function B9(Ve,bt){if(bt===void 0&&(bt=1),!(!Ve||Ve[Pi]===0)){var cr=dt[uy];cr[I9](Ve),R++;for(var Mr=0,Wn=Ve;Mr<Wn.length;Mr++){var In=Wn[Mr];In.cnt=In.cnt||0,In.cnt++,cr[x_](In)}nce(bt),n4()}}s(B9,"_resendPayload");function nce(Ve){var bt=10,cr;if(R<=1)cr=bt;else{var Mr=(Math.pow(2,R)-1)/2,Wn=UA(Math.random()*Mr*bt)+1;Wn=Ve*Wn,cr=Pe(Gn(Wn,3600),bt)}var In=zu()+cr*1e3;L=In}s(nce,"_setRetryTime");function n4(){if(!G&&!Q){var Ve=L?Pe(0,L-zu()):0,bt=Pe(xn,Ve);G=HA(function(){G=null,dt[_9](!0,null,1)},bt)}}s(n4,"_setupTimer");function Ab(){G&&G.cancel(),G=null,L=null}s(Ab,"_clearScheduledTimer");function yb(Ve){return ie(Pl)?Ve===401||Ve===408||Ve===429||Ve===500||Ve===502||Ve===503||Ve===504:Pl[Pi]&&Pl.indexOf(Ve)>-1}s(yb,"_isRetriable");function oH(){var Ve="getNotifyMgr";return dt.core[Ve]?dt.core[Ve]():dt.core._notificationManager}s(oH,"_getNotifyMgr");function sH(Ve,bt){var cr=oH();if(cr&&cr.eventsSendRequest)try{cr.eventsSendRequest(Ve,bt)}catch(Mr){Nr(dt[Xu](),1,74,"send request notification failed: "+sl(Mr),{exception:Ft(Mr)})}}s(sH,"_notifySendRequest");function sRe(Ve,bt){var cr=bt.disableInstrumentationKeyValidation,Mr=ie(cr)?!1:cr;if(Mr)return!0;var Wn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",In=new RegExp(Wn);return In.test(Ve)}s(sRe,"_validateInstrumentationKey");function aRe(){dt[S9]=null,dt[uy]=null,dt._appId=null,dt._sample=null,Ee={},Ze=null,R=0,L=null,Q=!1,G=null,ce=null,fe=0,Re=0,Qe=null,He=null,Ye=null,gt=null,ot=0,Tt=!1,Tr=null,ei=!1,Li=null,Mi=dy,Oo=!1,zr=null,ua=dy,Yr=!1,ko=!1,Ra=!1,Pt=null,Ln=null,Qo=null,je(dt,"_senderConfig",{g:s(function(){return eq({},iRe)},"g")})}s(aRe,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,R,L,Q){var G;R!==T.iKey&&!ie(R)?G=Gm(Gm({},T),{iKey:R}):G=T;var ce=Yyt[G.baseType]||Z2e;return ce(L,G,Q)},x}(Et),e4="instrumentationKey",iH="connectionString",P9="endpointUrl",D9="userOverrideEndpointUrl",t4,rce=void 0,Kyt=(t4={diagnosticLogInterval:e9(Jyt,1e4)},t4[iH]=rce,t4.endpointUrl=rce,t4[e4]=rce,t4.extensionConfig={},t4);function Jyt(v){return v&&v>0}s(Jyt,"_chkDiagLevel");var Xyt=function(){function v(x){var T=new Dt,R;(ie(x)||ie(x[e4])&&ie(x[iH]))&&Qr("Invalid input configuration"),cu(v,this,function(Q){je(Q,"config",{g:s(function(){return R},"g")}),G(),Q.initialize=G,Q.track=L,Q8(Q,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function G(){var ce=_f(x||{},Kyt);R=ce.cfg,T.addUnloadHook(eg(ce,function(){var fe=R[iH];if(mt(fe)){var Ee=mk(function(He,Ye){xf(fe,function(gt){var ot=gt.value,Tt=R[e4];if(!gt.rejected&&ot){R[iH]=ot;var Ht=Fae(ot);Tt=Ht.instrumentationkey||Tt}He(Tt)})}),Re=mk(function(He,Ye){xf(fe,function(gt){var ot=gt.value,Tt=R[P9];if(!gt.rejected&&ot){var Ht=Fae(ot),nr=Ht.ingestionendpoint;Tt=nr?nr+jk:Tt}He(Tt)})});R[e4]=Ee,R[P9]=R[D9]||Re}if(Ae(fe)){var Qe=Fae(fe),Ze=Qe.ingestionendpoint;R[P9]=R[D9]?R[D9]:Ze+jk,R[e4]=Qe.instrumentationkey||R[e4]}R[P9]=R[D9]?R[D9]:R[P9]})),T.initialize(R,[new oRe])}s(G,"_initialize")});function L(Q){Q&&(Q.baseData=Q.baseData||{},Q.baseType=Q.baseType||"EventData"),T.track(Q)}s(L,"_track")}return s(v,"ApplicationInsights"),v.__ieDyn=1,v}();t.AppInsightsCore=Dt,t.ApplicationInsights=Xyt,t.Sender=oRe,t.SeverityLevel=Syt,t.arrForEach=qr,t.isNullOrUndefined=ie,t.proxyFunctions=Q8,t.throwError=Qr})});var ofe=q((B$r,p9e)=>{d();var CP=1e3,vP=CP*60,EP=vP*60,aS=EP*24,CSt=aS*7,vSt=aS*365.25;p9e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ESt(t);if(r==="number"&&isFinite(t))return e.long?bSt(t):xSt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ESt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*vSt;case"weeks":case"week":case"w":return r*CSt;case"days":case"day":case"d":return r*aS;case"hours":case"hour":case"hrs":case"hr":case"h":return r*EP;case"minutes":case"minute":case"mins":case"min":case"m":return r*vP;case"seconds":case"second":case"secs":case"sec":case"s":return r*CP;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(ESt,"parse");function xSt(t){var e=Math.abs(t);return e>=aS?Math.round(t/aS)+"d":e>=EP?Math.round(t/EP)+"h":e>=vP?Math.round(t/vP)+"m":e>=CP?Math.round(t/CP)+"s":t+"ms"}s(xSt,"fmtShort");function bSt(t){var e=Math.abs(t);return e>=aS?fj(t,e,aS,"day"):e>=EP?fj(t,e,EP,"hour"):e>=vP?fj(t,e,vP,"minute"):e>=CP?fj(t,e,CP,"second"):t+" ms"}s(bSt,"fmtLong");function fj(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(fj,"plural")});var sfe=q((M$r,h9e)=>{d();function ISt(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=ofe(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let h=0;h<f.length;h++)p=(p<<5)-p+f.charCodeAt(h),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,h=null,m,g;function A(...y){if(!A.enabled)return;let E=A,b=Number(new Date),_=b-(p||b);E.diff=_,E.prev=p,E.curr=b,p=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let S=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(B,F)=>{if(B==="%%")return"%";S++;let Y=r.formatters[F];if(typeof Y=="function"){let ee=y[S];B=Y.call(E,ee),y.splice(S,1),S--}return B}),r.formatArgs.call(E,y),(E.log||r.log).apply(E,y)}return s(A,"debug"),A.namespace=f,A.useColors=r.useColors(),A.color=r.selectColor(f),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:s(()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(f)),g),"get"),set:s(y=>{h=y},"set")}),typeof r.init=="function"&&r.init(A),A}s(r,"createDebug");function n(f,p){let h=r(this.namespace+(typeof p>"u"?":":p)+f);return h.log=this.log,h}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,h=(typeof f=="string"?f:"").split(/[\s,]+/),m=h.length;for(p=0;p<m;p++)h[p]&&(f=h[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,h;for(p=0,h=r.skips.length;p<h;p++)if(r.skips[p].test(f))return!1;for(p=0,h=r.names.length;p<h;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(ISt,"setup");h9e.exports=ISt});var m9e=q((X0,pj)=>{d();X0.formatArgs=wSt;X0.save=_St;X0.load=SSt;X0.useColors=TSt;X0.storage=RSt();X0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();X0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function TSt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(TSt,"useColors");function wSt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+pj.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(wSt,"formatArgs");X0.log=console.debug||console.log||(()=>{});function _St(t){try{t?X0.storage.setItem("debug",t):X0.storage.removeItem("debug")}catch{}}s(_St,"save");function SSt(){let t;try{t=X0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(SSt,"load");function RSt(){try{return localStorage}catch{}}s(RSt,"localstorage");pj.exports=sfe()(X0);var{formatters:kSt}=pj.exports;kSt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var A9e=q((q$r,g9e)=>{"use strict";d();g9e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var v9e=q((W$r,C9e)=>{"use strict";d();var PSt=require("os"),y9e=require("tty"),Eh=A9e(),{env:Ul}=process,Jb;Eh("no-color")||Eh("no-colors")||Eh("color=false")||Eh("color=never")?Jb=0:(Eh("color")||Eh("colors")||Eh("color=true")||Eh("color=always"))&&(Jb=1);"FORCE_COLOR"in Ul&&(Ul.FORCE_COLOR==="true"?Jb=1:Ul.FORCE_COLOR==="false"?Jb=0:Jb=Ul.FORCE_COLOR.length===0?1:Math.min(parseInt(Ul.FORCE_COLOR,10),3));function afe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(afe,"translateLevel");function cfe(t,e){if(Jb===0)return 0;if(Eh("color=16m")||Eh("color=full")||Eh("color=truecolor"))return 3;if(Eh("color=256"))return 2;if(t&&!e&&Jb===void 0)return 0;let r=Jb||0;if(Ul.TERM==="dumb")return r;if(process.platform==="win32"){let n=PSt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Ul)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Ul)||Ul.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ul)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ul.TEAMCITY_VERSION)?1:0;if(Ul.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ul){let n=parseInt((Ul.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ul.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ul.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ul.TERM)||"COLORTERM"in Ul?1:r}s(cfe,"supportsColor");function DSt(t){let e=cfe(t,t&&t.isTTY);return afe(e)}s(DSt,"getSupportLevel");C9e.exports={supportsColor:DSt,stdout:afe(cfe(!0,y9e.isatty(1))),stderr:afe(cfe(!0,y9e.isatty(2)))}});var x9e=q((Iu,mj)=>{d();var BSt=require("tty"),hj=require("util");Iu.init=USt;Iu.log=FSt;Iu.formatArgs=LSt;Iu.save=OSt;Iu.load=QSt;Iu.useColors=NSt;Iu.destroy=hj.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Iu.colors=[6,2,3,4,5,1];try{let t=v9e();t&&(t.stderr||t).level>=2&&(Iu.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Iu.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function NSt(){return"colors"in Iu.inspectOpts?!!Iu.inspectOpts.colors:BSt.isatty(process.stderr.fd)}s(NSt,"useColors");function LSt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+mj.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=MSt()+e+" "+t[0]}s(LSt,"formatArgs");function MSt(){return Iu.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(MSt,"getDate");function FSt(...t){return process.stderr.write(hj.format(...t)+`
`)}s(FSt,"log");function OSt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(OSt,"save");function QSt(){return process.env.DEBUG}s(QSt,"load");function USt(t){t.inspectOpts={};let e=Object.keys(Iu.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Iu.inspectOpts[e[r]]}s(USt,"init");mj.exports=sfe()(Iu);var{formatters:E9e}=mj.exports;E9e.o=function(t){return this.inspectOpts.colors=this.useColors,hj.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};E9e.O=function(t){return this.inspectOpts.colors=this.useColors,hj.inspect(t,this.inspectOpts)}});var By=q((z$r,lfe)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?lfe.exports=m9e():lfe.exports=x9e()});var T9e=q(qf=>{"use strict";d();var qSt=qf&&qf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HSt=qf&&qf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),b9e=qf&&qf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qSt(e,t,r);return HSt(e,t),e};Object.defineProperty(qf,"__esModule",{value:!0});qf.req=qf.json=qf.toBuffer=void 0;var WSt=b9e(require("http")),$St=b9e(require("https"));async function I9e(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(I9e,"toBuffer");qf.toBuffer=I9e;async function jSt(t){let r=(await I9e(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(jSt,"json");qf.json=jSt;function GSt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?$St:WSt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(GSt,"req");qf.req=GSt});var dfe=q(Z0=>{"use strict";d();var _9e=Z0&&Z0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VSt=Z0&&Z0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S9e=Z0&&Z0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_9e(e,t,r);return VSt(e,t),e},zSt=Z0&&Z0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_9e(e,t,r)};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.Agent=void 0;var YSt=S9e(require("net")),w9e=S9e(require("http")),KSt=require("https");zSt(T9e(),Z0);var Ny=Symbol("AgentBaseInternalState"),ufe=class extends w9e.Agent{static{s(this,"Agent")}constructor(e){super(e),this[Ny]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new YSt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?KSt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof w9e.Agent)return c.addRequest(e,i);this[Ny].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[Ny].currentSocket;if(this[Ny].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Ny].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Ny]&&(this[Ny].defaultPort=e)}get protocol(){return this[Ny].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Ny]&&(this[Ny].protocol=e)}};Z0.Agent=ufe});var R9e=q(xP=>{"use strict";d();var JSt=xP&&xP.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xP,"__esModule",{value:!0});xP.parseProxyResponse=void 0;var XSt=JSt(By()),gj=(0,XSt.default)("https-proxy-agent:parse-proxy-response");function ZSt(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),gj("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),gj("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),h=p.indexOf(`\r
\r
`);if(h===-1){gj("have not received end of HTTP headers yet..."),o();return}let m=p.slice(0,h).toString("ascii").split(`\r
`),g=m.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=g.split(" "),y=+A[1],E=A.slice(2).join(" "),b={};for(let _ of m){if(!_)continue;let S=_.indexOf(":");if(S===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let P=_.slice(0,S).toLowerCase(),B=_.slice(S+1).trimStart(),F=b[P];typeof F=="string"?b[P]=[F,B]:Array.isArray(F)?F.push(B):b[P]=B}gj("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:y,statusText:E,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(ZSt,"parseProxyResponse");xP.parseProxyResponse=ZSt});var N9e=q(xh=>{"use strict";d();var e2t=xh&&xh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),t2t=xh&&xh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),D9e=xh&&xh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&e2t(e,t,r);return t2t(e,t),e},B9e=xh&&xh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xh,"__esModule",{value:!0});xh.HttpsProxyAgent=void 0;var ffe=D9e(require("net")),k9e=D9e(require("tls")),r2t=B9e(require("assert")),n2t=B9e(By()),i2t=dfe(),o2t=require("url"),s2t=R9e(),M6=(0,n2t.default)("https-proxy-agent"),Aj=class extends i2t.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new o2t.URL(e):e,this.proxyHeaders=r?.headers??{},M6("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?P9e(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){M6("Creating `tls.Socket`: %o",this.connectOpts);let h=this.connectOpts.servername||this.connectOpts.host;i=k9e.connect({...this.connectOpts,servername:h})}else M6("Creating `net.Socket`: %o",this.connectOpts),i=ffe.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=ffe.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let h=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(h).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let h of Object.keys(o))c+=`${h}: ${o[h]}\r
`;let l=(0,s2t.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",a2t),r.secureEndpoint){M6("Upgrading socket connection to TLS");let h=r.servername||r.host;return k9e.connect({...P9e(r,"host","path","port"),socket:i,servername:h})}return i}i.destroy();let p=new ffe.Socket({writable:!1});return p.readable=!0,e.once("socket",h=>{M6("Replaying proxy buffer for failed request"),(0,r2t.default)(h.listenerCount("data")>0),h.push(f),h.push(null)}),p}};Aj.protocols=["http","https"];xh.HttpsProxyAgent=Aj;function a2t(t){t.resume()}s(a2t,"resume");function P9e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(P9e,"omit")});var F9e=q(bh=>{"use strict";d();var c2t=bh&&bh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),l2t=bh&&bh.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),M9e=bh&&bh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&c2t(e,t,r);return l2t(e,t),e},u2t=bh&&bh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bh,"__esModule",{value:!0});bh.HttpProxyAgent=void 0;var d2t=M9e(require("net")),f2t=M9e(require("tls")),p2t=u2t(By()),h2t=require("events"),m2t=dfe(),L9e=require("url"),bP=(0,p2t.default)("http-proxy-agent"),yj=class extends m2t.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new L9e.URL(e):e,this.proxyHeaders=r?.headers??{},bP("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?g2t(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new L9e.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;bP("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(bP("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),bP("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(bP("Creating `tls.Socket`: %o",this.connectOpts),o=f2t.connect(this.connectOpts)):(bP("Creating `net.Socket`: %o",this.connectOpts),o=d2t.connect(this.connectOpts)),await(0,h2t.once)(o,"connect"),o}};yj.protocols=["http","https"];bh.HttpProxyAgent=yj;function g2t(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(g2t,"omit")});var o6e=q(Bj=>{"use strict";d();Object.defineProperty(Bj,"__esModule",{value:!0});Bj.state=void 0;Bj.state={instrumenterImplementation:void 0}});var p6e=q(Oj=>{"use strict";d();Object.defineProperty(Oj,"__esModule",{value:!0});Oj.state=void 0;Oj.state={operationRequestMap:new WeakMap}});var VP=q((ppe,ALe)=>{d();var kG=require("buffer"),jy=kG.Buffer;function gLe(t,e){for(var r in t)e[r]=t[r]}s(gLe,"copyProps");jy.from&&jy.alloc&&jy.allocUnsafe&&jy.allocUnsafeSlow?ALe.exports=kG:(gLe(kG,ppe),ppe.Buffer=JS);function JS(t,e,r){return jy(t,e,r)}s(JS,"SafeBuffer");JS.prototype=Object.create(jy.prototype);gLe(jy,JS);JS.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return jy(t,e,r)};JS.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=jy(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};JS.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return jy(t)};JS.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return kG.SlowBuffer(t)}});var hpe=q((Edn,yLe)=>{d();var PG=VP().Buffer,z5t=require("stream"),Y5t=require("util");function DG(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=PG.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=PG.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(DG,"DataStream");Y5t.inherits(DG,z5t);DG.prototype.write=s(function(e){this.buffer=PG.concat([this.buffer,PG.from(e)]),this.emit("data",e)},"write");DG.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");yLe.exports=DG});var vLe=q((Idn,CLe)=>{"use strict";d();function mpe(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(mpe,"getParamSize");var K5t={ES256:mpe(256),ES384:mpe(384),ES512:mpe(521)};function J5t(t){var e=K5t[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(J5t,"getParamBytesForAlg");CLe.exports=J5t});var _Le=q((_dn,wLe)=>{"use strict";d();var BG=VP().Buffer,xLe=vLe(),NG=128,bLe=0,X5t=32,Z5t=16,ekt=2,ILe=Z5t|X5t|bLe<<6,LG=ekt|bLe<<6;function tkt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(tkt,"base64Url");function TLe(t){if(BG.isBuffer(t))return t;if(typeof t=="string")return BG.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(TLe,"signatureAsBuffer");function rkt(t,e){t=TLe(t);var r=xLe(e),n=r+1,i=t.length,o=0;if(t[o++]!==ILe)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(NG|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==LG)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==LG)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,h=r-u,m=BG.allocUnsafe(p+c+h+u);for(o=0;o<p;++o)m[o]=0;t.copy(m,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+h;++o)m[o]=0;return t.copy(m,o,f+Math.max(-h,0),f+u),m=m.toString("base64"),m=tkt(m),m}s(rkt,"derToJose");function ELe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=NG;return i&&--n,n}s(ELe,"countPadding");function nkt(t,e){t=TLe(t);var r=xLe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=ELe(t,0,r),o=ELe(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<NG,f=BG.allocUnsafe((u?2:3)+l),p=0;return f[p++]=ILe,u?f[p++]=l:(f[p++]=NG|1,f[p++]=l&255),f[p++]=LG,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=LG,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(nkt,"joseToDer");wLe.exports={derToJose:rkt,joseToDer:nkt}});var RLe=q((kdn,SLe)=>{"use strict";d();var zL=require("buffer").Buffer,gpe=require("buffer").SlowBuffer;SLe.exports=MG;function MG(t,e){if(!zL.isBuffer(t)||!zL.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(MG,"bufferEq");MG.install=function(){zL.prototype.equal=gpe.prototype.equal=s(function(e){return MG(this,e)},"equal")};var ikt=zL.prototype.equal,okt=gpe.prototype.equal;MG.restore=function(){zL.prototype.equal=ikt,gpe.prototype.equal=okt}});var vpe=q((Bdn,OLe)=>{d();var YP=VP().Buffer,wh=require("crypto"),PLe=_Le(),kLe=require("util"),skt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,YL="secret must be a string or buffer",zP="key must be a string or a buffer",akt="key must be a string, a buffer or an object",ype=typeof wh.createPublicKey=="function";ype&&(zP+=" or a KeyObject",YL+="or a KeyObject");function DLe(t){if(!YP.isBuffer(t)&&typeof t!="string"&&(!ype||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Bg(zP)}s(DLe,"checkIsPublicKey");function BLe(t){if(!YP.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Bg(akt)}s(BLe,"checkIsPrivateKey");function ckt(t){if(!YP.isBuffer(t)){if(typeof t=="string")return t;if(!ype||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Bg(YL)}}s(ckt,"checkIsSecretKey");function Cpe(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Cpe,"fromBase64");function NLe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(NLe,"toBase64");function Bg(t){var e=[].slice.call(arguments,1),r=kLe.format.bind(kLe,t).apply(null,e);return new TypeError(r)}s(Bg,"typeError");function lkt(t){return YP.isBuffer(t)||typeof t=="string"}s(lkt,"bufferOrString");function KL(t){return lkt(t)||(t=JSON.stringify(t)),t}s(KL,"normalizeInput");function LLe(t){return s(function(r,n){ckt(n),r=KL(r);var i=wh.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return Cpe(o)},"sign")}s(LLe,"createHmacSigner");var Ape,ukt="timingSafeEqual"in wh?s(function(e,r){return e.byteLength!==r.byteLength?!1:wh.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return Ape||(Ape=RLe()),Ape(e,r)},"timingSafeEqual");function dkt(t){return s(function(r,n,i){var o=LLe(t)(r,i);return ukt(YP.from(n),YP.from(o))},"verify")}s(dkt,"createHmacVerifier");function MLe(t){return s(function(r,n){BLe(n),r=KL(r);var i=wh.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return Cpe(o)},"sign")}s(MLe,"createKeySigner");function FLe(t){return s(function(r,n,i){DLe(i),r=KL(r),n=NLe(n);var o=wh.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(FLe,"createKeyVerifier");function fkt(t){return s(function(r,n){BLe(n),r=KL(r);var i=wh.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:wh.constants.RSA_PKCS1_PSS_PADDING,saltLength:wh.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Cpe(o)},"sign")}s(fkt,"createPSSKeySigner");function pkt(t){return s(function(r,n,i){DLe(i),r=KL(r),n=NLe(n);var o=wh.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:wh.constants.RSA_PKCS1_PSS_PADDING,saltLength:wh.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(pkt,"createPSSKeyVerifier");function hkt(t){var e=MLe(t);return s(function(){var n=e.apply(null,arguments);return n=PLe.derToJose(n,"ES"+t),n},"sign")}s(hkt,"createECDSASigner");function mkt(t){var e=FLe(t);return s(function(n,i,o){i=PLe.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(mkt,"createECDSAVerifer");function gkt(){return s(function(){return""},"sign")}s(gkt,"createNoneSigner");function Akt(){return s(function(e,r){return r===""},"verify")}s(Akt,"createNoneVerifier");OLe.exports=s(function(e){var r={hs:LLe,rs:MLe,ps:fkt,es:hkt,none:gkt},n={hs:dkt,rs:FLe,ps:pkt,es:mkt,none:Akt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Bg(skt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var Epe=q((Mdn,QLe)=>{d();var ykt=require("buffer").Buffer;QLe.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||ykt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var jLe=q((Qdn,$Le)=>{d();var Ckt=VP().Buffer,ULe=hpe(),vkt=vpe(),Ekt=require("stream"),qLe=Epe(),xpe=require("util");function HLe(t,e){return Ckt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(HLe,"base64url");function xkt(t,e,r){r=r||"utf8";var n=HLe(qLe(t),"binary"),i=HLe(qLe(e),r);return xpe.format("%s.%s",n,i)}s(xkt,"jwsSecuredInput");function WLe(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=vkt(e.alg),a=xkt(e,r,i),c=o.sign(a,n);return xpe.format("%s.%s",a,c)}s(WLe,"jwsSign");function FG(t){var e=t.secret||t.privateKey||t.key,r=new ULe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new ULe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(FG,"SignStream");xpe.inherits(FG,Ekt);FG.prototype.sign=s(function(){try{var e=WLe({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");FG.sign=WLe;$Le.exports=FG});var tMe=q((Hdn,eMe)=>{d();var VLe=VP().Buffer,GLe=hpe(),bkt=vpe(),Ikt=require("stream"),zLe=Epe(),Tkt=require("util"),wkt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function _kt(t){return Object.prototype.toString.call(t)==="[object Object]"}s(_kt,"isObject");function Skt(t){if(_kt(t))return t;try{return JSON.parse(t)}catch{return}}s(Skt,"safeJsonParse");function YLe(t){var e=t.split(".",1)[0];return Skt(VLe.from(e,"base64").toString("binary"))}s(YLe,"headerFromJWS");function Rkt(t){return t.split(".",2).join(".")}s(Rkt,"securedInputFromJWS");function KLe(t){return t.split(".")[2]}s(KLe,"signatureFromJWS");function kkt(t,e){e=e||"utf8";var r=t.split(".")[1];return VLe.from(r,"base64").toString(e)}s(kkt,"payloadFromJWS");function JLe(t){return wkt.test(t)&&!!YLe(t)}s(JLe,"isValidJws");function XLe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=zLe(t);var i=KLe(t),o=Rkt(t),a=bkt(e);return a.verify(o,i,r)}s(XLe,"jwsVerify");function ZLe(t,e){if(e=e||{},t=zLe(t),!JLe(t))return null;var r=YLe(t);if(!r)return null;var n=kkt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:KLe(t)}}s(ZLe,"jwsDecode");function KP(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new GLe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new GLe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(KP,"VerifyStream");Tkt.inherits(KP,Ikt);KP.prototype.verify=s(function(){try{var e=XLe(this.signature.buffer,this.algorithm,this.key.buffer),r=ZLe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");KP.decode=ZLe;KP.isValid=JLe;KP.verify=XLe;eMe.exports=KP});var QG=q(yI=>{d();var rMe=jLe(),OG=tMe(),Pkt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];yI.ALGORITHMS=Pkt;yI.sign=rMe.sign;yI.verify=OG.verify;yI.decode=OG.decode;yI.isValid=OG.isValid;yI.createSign=s(function(e){return new rMe(e)},"createSign");yI.createVerify=s(function(e){return new OG(e)},"createVerify")});var bpe=q((zdn,nMe)=>{d();var Dkt=QG();nMe.exports=function(t,e){e=e||{};var r=Dkt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var JL=q((Kdn,iMe)=>{d();var UG=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");UG.prototype=Object.create(Error.prototype);UG.prototype.constructor=UG;iMe.exports=UG});var Ipe=q((Zdn,sMe)=>{d();var oMe=JL(),qG=s(function(t,e){oMe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");qG.prototype=Object.create(oMe.prototype);qG.prototype.constructor=qG;sMe.exports=qG});var Tpe=q((rfn,cMe)=>{d();var aMe=JL(),HG=s(function(t,e){aMe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");HG.prototype=Object.create(aMe.prototype);HG.prototype.constructor=HG;cMe.exports=HG});var wpe=q((ofn,lMe)=>{d();var Bkt=ofe();lMe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=Bkt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var XL=q((afn,uMe)=>{"use strict";d();var Nkt="2.0.0",Lkt=Number.MAX_SAFE_INTEGER||9007199254740991,Mkt=16,Fkt=250,Okt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];uMe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Mkt,MAX_SAFE_BUILD_LENGTH:Fkt,MAX_SAFE_INTEGER:Lkt,RELEASE_TYPES:Okt,SEMVER_SPEC_VERSION:Nkt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ZL=q((lfn,dMe)=>{"use strict";d();var Qkt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};dMe.exports=Qkt});var JP=q((Gy,fMe)=>{"use strict";d();var{MAX_SAFE_COMPONENT_LENGTH:_pe,MAX_SAFE_BUILD_LENGTH:Ukt,MAX_LENGTH:qkt}=XL(),Hkt=ZL();Gy=fMe.exports={};var Wkt=Gy.re=[],$kt=Gy.safeRe=[],wr=Gy.src=[],jkt=Gy.safeSrc=[],_r=Gy.t={},Gkt=0,Spe="[a-zA-Z0-9-]",Vkt=[["\\s",1],["\\d",qkt],[Spe,Ukt]],zkt=s(t=>{for(let[e,r]of Vkt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),di=s((t,e,r)=>{let n=zkt(e),i=Gkt++;Hkt(t,i,e),_r[t]=i,wr[i]=e,jkt[i]=n,Wkt[i]=new RegExp(e,r?"g":void 0),$kt[i]=new RegExp(n,r?"g":void 0)},"createToken");di("NUMERICIDENTIFIER","0|[1-9]\\d*");di("NUMERICIDENTIFIERLOOSE","\\d+");di("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Spe}*`);di("MAINVERSION",`(${wr[_r.NUMERICIDENTIFIER]})\\.(${wr[_r.NUMERICIDENTIFIER]})\\.(${wr[_r.NUMERICIDENTIFIER]})`);di("MAINVERSIONLOOSE",`(${wr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${wr[_r.NUMERICIDENTIFIERLOOSE]})\\.(${wr[_r.NUMERICIDENTIFIERLOOSE]})`);di("PRERELEASEIDENTIFIER",`(?:${wr[_r.NONNUMERICIDENTIFIER]}|${wr[_r.NUMERICIDENTIFIER]})`);di("PRERELEASEIDENTIFIERLOOSE",`(?:${wr[_r.NONNUMERICIDENTIFIER]}|${wr[_r.NUMERICIDENTIFIERLOOSE]})`);di("PRERELEASE",`(?:-(${wr[_r.PRERELEASEIDENTIFIER]}(?:\\.${wr[_r.PRERELEASEIDENTIFIER]})*))`);di("PRERELEASELOOSE",`(?:-?(${wr[_r.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${wr[_r.PRERELEASEIDENTIFIERLOOSE]})*))`);di("BUILDIDENTIFIER",`${Spe}+`);di("BUILD",`(?:\\+(${wr[_r.BUILDIDENTIFIER]}(?:\\.${wr[_r.BUILDIDENTIFIER]})*))`);di("FULLPLAIN",`v?${wr[_r.MAINVERSION]}${wr[_r.PRERELEASE]}?${wr[_r.BUILD]}?`);di("FULL",`^${wr[_r.FULLPLAIN]}$`);di("LOOSEPLAIN",`[v=\\s]*${wr[_r.MAINVERSIONLOOSE]}${wr[_r.PRERELEASELOOSE]}?${wr[_r.BUILD]}?`);di("LOOSE",`^${wr[_r.LOOSEPLAIN]}$`);di("GTLT","((?:<|>)?=?)");di("XRANGEIDENTIFIERLOOSE",`${wr[_r.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);di("XRANGEIDENTIFIER",`${wr[_r.NUMERICIDENTIFIER]}|x|X|\\*`);di("XRANGEPLAIN",`[v=\\s]*(${wr[_r.XRANGEIDENTIFIER]})(?:\\.(${wr[_r.XRANGEIDENTIFIER]})(?:\\.(${wr[_r.XRANGEIDENTIFIER]})(?:${wr[_r.PRERELEASE]})?${wr[_r.BUILD]}?)?)?`);di("XRANGEPLAINLOOSE",`[v=\\s]*(${wr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${wr[_r.XRANGEIDENTIFIERLOOSE]})(?:\\.(${wr[_r.XRANGEIDENTIFIERLOOSE]})(?:${wr[_r.PRERELEASELOOSE]})?${wr[_r.BUILD]}?)?)?`);di("XRANGE",`^${wr[_r.GTLT]}\\s*${wr[_r.XRANGEPLAIN]}$`);di("XRANGELOOSE",`^${wr[_r.GTLT]}\\s*${wr[_r.XRANGEPLAINLOOSE]}$`);di("COERCEPLAIN",`(^|[^\\d])(\\d{1,${_pe}})(?:\\.(\\d{1,${_pe}}))?(?:\\.(\\d{1,${_pe}}))?`);di("COERCE",`${wr[_r.COERCEPLAIN]}(?:$|[^\\d])`);di("COERCEFULL",wr[_r.COERCEPLAIN]+`(?:${wr[_r.PRERELEASE]})?(?:${wr[_r.BUILD]})?(?:$|[^\\d])`);di("COERCERTL",wr[_r.COERCE],!0);di("COERCERTLFULL",wr[_r.COERCEFULL],!0);di("LONETILDE","(?:~>?)");di("TILDETRIM",`(\\s*)${wr[_r.LONETILDE]}\\s+`,!0);Gy.tildeTrimReplace="$1~";di("TILDE",`^${wr[_r.LONETILDE]}${wr[_r.XRANGEPLAIN]}$`);di("TILDELOOSE",`^${wr[_r.LONETILDE]}${wr[_r.XRANGEPLAINLOOSE]}$`);di("LONECARET","(?:\\^)");di("CARETTRIM",`(\\s*)${wr[_r.LONECARET]}\\s+`,!0);Gy.caretTrimReplace="$1^";di("CARET",`^${wr[_r.LONECARET]}${wr[_r.XRANGEPLAIN]}$`);di("CARETLOOSE",`^${wr[_r.LONECARET]}${wr[_r.XRANGEPLAINLOOSE]}$`);di("COMPARATORLOOSE",`^${wr[_r.GTLT]}\\s*(${wr[_r.LOOSEPLAIN]})$|^$`);di("COMPARATOR",`^${wr[_r.GTLT]}\\s*(${wr[_r.FULLPLAIN]})$|^$`);di("COMPARATORTRIM",`(\\s*)${wr[_r.GTLT]}\\s*(${wr[_r.LOOSEPLAIN]}|${wr[_r.XRANGEPLAIN]})`,!0);Gy.comparatorTrimReplace="$1$2$3";di("HYPHENRANGE",`^\\s*(${wr[_r.XRANGEPLAIN]})\\s+-\\s+(${wr[_r.XRANGEPLAIN]})\\s*$`);di("HYPHENRANGELOOSE",`^\\s*(${wr[_r.XRANGEPLAINLOOSE]})\\s+-\\s+(${wr[_r.XRANGEPLAINLOOSE]})\\s*$`);di("STAR","(<|>)?=?\\s*\\*");di("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");di("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var WG=q((pfn,pMe)=>{"use strict";d();var Ykt=Object.freeze({loose:!0}),Kkt=Object.freeze({}),Jkt=s(t=>t?typeof t!="object"?Ykt:t:Kkt,"parseOptions");pMe.exports=Jkt});var Rpe=q((gfn,gMe)=>{"use strict";d();var hMe=/^[0-9]+$/,mMe=s((t,e)=>{let r=hMe.test(t),n=hMe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),Xkt=s((t,e)=>mMe(e,t),"rcompareIdentifiers");gMe.exports={compareIdentifiers:mMe,rcompareIdentifiers:Xkt}});var pd=q((Cfn,yMe)=>{"use strict";d();var $G=ZL(),{MAX_LENGTH:AMe,MAX_SAFE_INTEGER:jG}=XL(),{safeRe:GG,t:VG}=JP(),Zkt=WG(),{compareIdentifiers:XP}=Rpe(),kpe=class t{static{s(this,"SemVer")}constructor(e,r){if(r=Zkt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>AMe)throw new TypeError(`version is longer than ${AMe} characters`);$G("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?GG[VG.LOOSE]:GG[VG.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>jG||this.major<0)throw new TypeError("Invalid major version");if(this.minor>jG||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>jG||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<jG)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($G("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),XP(this.major,e.major)||XP(this.minor,e.minor)||XP(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if($G("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return XP(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if($G("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return XP(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?GG[VG.PRERELEASELOOSE]:GG[VG.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),XP(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};yMe.exports=kpe});var XS=q((xfn,vMe)=>{"use strict";d();var CMe=pd(),e4t=s((t,e,r=!1)=>{if(t instanceof CMe)return t;try{return new CMe(t,e)}catch(n){if(!r)return null;throw n}},"parse");vMe.exports=e4t});var xMe=q((Tfn,EMe)=>{"use strict";d();var t4t=XS(),r4t=s((t,e)=>{let r=t4t(t,e);return r?r.version:null},"valid");EMe.exports=r4t});var IMe=q((Sfn,bMe)=>{"use strict";d();var n4t=XS(),i4t=s((t,e)=>{let r=n4t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");bMe.exports=i4t});var _Me=q((Pfn,wMe)=>{"use strict";d();var TMe=pd(),o4t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new TMe(t instanceof TMe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");wMe.exports=o4t});var kMe=q((Nfn,RMe)=>{"use strict";d();var SMe=XS(),s4t=s((t,e)=>{let r=SMe(t,null,!0),n=SMe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");RMe.exports=s4t});var DMe=q((Ffn,PMe)=>{"use strict";d();var a4t=pd(),c4t=s((t,e)=>new a4t(t,e).major,"major");PMe.exports=c4t});var NMe=q((Ufn,BMe)=>{"use strict";d();var l4t=pd(),u4t=s((t,e)=>new l4t(t,e).minor,"minor");BMe.exports=u4t});var MMe=q((Wfn,LMe)=>{"use strict";d();var d4t=pd(),f4t=s((t,e)=>new d4t(t,e).patch,"patch");LMe.exports=f4t});var OMe=q((Gfn,FMe)=>{"use strict";d();var p4t=XS(),h4t=s((t,e)=>{let r=p4t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");FMe.exports=h4t});var _h=q((Yfn,UMe)=>{"use strict";d();var QMe=pd(),m4t=s((t,e,r)=>new QMe(t,r).compare(new QMe(e,r)),"compare");UMe.exports=m4t});var HMe=q((Xfn,qMe)=>{"use strict";d();var g4t=_h(),A4t=s((t,e,r)=>g4t(e,t,r),"rcompare");qMe.exports=A4t});var $Me=q((t0n,WMe)=>{"use strict";d();var y4t=_h(),C4t=s((t,e)=>y4t(t,e,!0),"compareLoose");WMe.exports=C4t});var zG=q((i0n,GMe)=>{"use strict";d();var jMe=pd(),v4t=s((t,e,r)=>{let n=new jMe(t,r),i=new jMe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");GMe.exports=v4t});var zMe=q((a0n,VMe)=>{"use strict";d();var E4t=zG(),x4t=s((t,e)=>t.sort((r,n)=>E4t(r,n,e)),"sort");VMe.exports=x4t});var KMe=q((u0n,YMe)=>{"use strict";d();var b4t=zG(),I4t=s((t,e)=>t.sort((r,n)=>b4t(n,r,e)),"rsort");YMe.exports=I4t});var eM=q((p0n,JMe)=>{"use strict";d();var T4t=_h(),w4t=s((t,e,r)=>T4t(t,e,r)>0,"gt");JMe.exports=w4t});var YG=q((g0n,XMe)=>{"use strict";d();var _4t=_h(),S4t=s((t,e,r)=>_4t(t,e,r)<0,"lt");XMe.exports=S4t});var Ppe=q((C0n,ZMe)=>{"use strict";d();var R4t=_h(),k4t=s((t,e,r)=>R4t(t,e,r)===0,"eq");ZMe.exports=k4t});var Dpe=q((x0n,eFe)=>{"use strict";d();var P4t=_h(),D4t=s((t,e,r)=>P4t(t,e,r)!==0,"neq");eFe.exports=D4t});var KG=q((T0n,tFe)=>{"use strict";d();var B4t=_h(),N4t=s((t,e,r)=>B4t(t,e,r)>=0,"gte");tFe.exports=N4t});var JG=q((S0n,rFe)=>{"use strict";d();var L4t=_h(),M4t=s((t,e,r)=>L4t(t,e,r)<=0,"lte");rFe.exports=M4t});var Bpe=q((P0n,nFe)=>{"use strict";d();var F4t=Ppe(),O4t=Dpe(),Q4t=eM(),U4t=KG(),q4t=YG(),H4t=JG(),W4t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return F4t(t,r,n);case"!=":return O4t(t,r,n);case">":return Q4t(t,r,n);case">=":return U4t(t,r,n);case"<":return q4t(t,r,n);case"<=":return H4t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");nFe.exports=W4t});var oFe=q((N0n,iFe)=>{"use strict";d();var $4t=pd(),j4t=XS(),{safeRe:XG,t:ZG}=JP(),G4t=s((t,e)=>{if(t instanceof $4t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?XG[ZG.COERCEFULL]:XG[ZG.COERCE]);else{let l=e.includePrerelease?XG[ZG.COERCERTLFULL]:XG[ZG.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return j4t(`${n}.${i}.${o}${a}${c}`,e)},"coerce");iFe.exports=G4t});var aFe=q((F0n,sFe)=>{"use strict";d();var Npe=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};sFe.exports=Npe});var Sh=q((U0n,dFe)=>{"use strict";d();var V4t=/\s+/g,Lpe=class t{static{s(this,"Range")}constructor(e,r){if(r=Y4t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Mpe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(V4t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!lFe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&rPt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&ePt)|(this.options.loose&&tPt))+":"+e,i=cFe.get(n);if(i)return i;let o=this.options.loose,a=o?Vf[zd.HYPHENRANGELOOSE]:Vf[zd.HYPHENRANGE];e=e.replace(a,fPt(this.options.includePrerelease)),Ks("hyphen replace",e),e=e.replace(Vf[zd.COMPARATORTRIM],J4t),Ks("comparator trim",e),e=e.replace(Vf[zd.TILDETRIM],X4t),Ks("tilde trim",e),e=e.replace(Vf[zd.CARETTRIM],Z4t),Ks("caret trim",e);let c=e.split(" ").map(p=>nPt(p,this.options)).join(" ").split(/\s+/).map(p=>dPt(p,this.options));o&&(c=c.filter(p=>(Ks("loose invalid filter",p,this.options),!!p.match(Vf[zd.COMPARATORLOOSE])))),Ks("range list",c);let l=new Map,u=c.map(p=>new Mpe(p,this.options));for(let p of u){if(lFe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return cFe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>uFe(n,r)&&e.set.some(i=>uFe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new K4t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(pPt(this.set[r],e,this.options))return!0;return!1}};dFe.exports=Lpe;var z4t=aFe(),cFe=new z4t,Y4t=WG(),Mpe=tM(),Ks=ZL(),K4t=pd(),{safeRe:Vf,t:zd,comparatorTrimReplace:J4t,tildeTrimReplace:X4t,caretTrimReplace:Z4t}=JP(),{FLAG_INCLUDE_PRERELEASE:ePt,FLAG_LOOSE:tPt}=XL(),lFe=s(t=>t.value==="<0.0.0-0","isNullSet"),rPt=s(t=>t.value==="","isAny"),uFe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),nPt=s((t,e)=>(Ks("comp",t,e),t=sPt(t,e),Ks("caret",t),t=iPt(t,e),Ks("tildes",t),t=cPt(t,e),Ks("xrange",t),t=uPt(t,e),Ks("stars",t),t),"parseComparator"),Yd=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),iPt=s((t,e)=>t.trim().split(/\s+/).map(r=>oPt(r,e)).join(" "),"replaceTildes"),oPt=s((t,e)=>{let r=e.loose?Vf[zd.TILDELOOSE]:Vf[zd.TILDE];return t.replace(r,(n,i,o,a,c)=>{Ks("tilde",t,n,i,o,a,c);let l;return Yd(i)?l="":Yd(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:Yd(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(Ks("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ks("tilde return",l),l})},"replaceTilde"),sPt=s((t,e)=>t.trim().split(/\s+/).map(r=>aPt(r,e)).join(" "),"replaceCarets"),aPt=s((t,e)=>{Ks("caret",t,e);let r=e.loose?Vf[zd.CARETLOOSE]:Vf[zd.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{Ks("caret",t,i,o,a,c,l);let u;return Yd(o)?u="":Yd(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Yd(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(Ks("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(Ks("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),Ks("caret return",u),u})},"replaceCaret"),cPt=s((t,e)=>(Ks("replaceXRanges",t,e),t.split(/\s+/).map(r=>lPt(r,e)).join(" ")),"replaceXRanges"),lPt=s((t,e)=>{t=t.trim();let r=e.loose?Vf[zd.XRANGELOOSE]:Vf[zd.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{Ks("xRange",t,n,i,o,a,c,l);let u=Yd(o),f=u||Yd(a),p=f||Yd(c),h=p;return i==="="&&h&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),Ks("xRange return",n),n})},"replaceXRange"),uPt=s((t,e)=>(Ks("replaceStars",t,e),t.trim().replace(Vf[zd.STAR],"")),"replaceStars"),dPt=s((t,e)=>(Ks("replaceGTE0",t,e),t.trim().replace(Vf[e.includePrerelease?zd.GTE0PRE:zd.GTE0],"")),"replaceGTE0"),fPt=s(t=>(e,r,n,i,o,a,c,l,u,f,p,h)=>(Yd(n)?r="":Yd(i)?r=`>=${n}.0.0${t?"-0":""}`:Yd(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Yd(u)?l="":Yd(f)?l=`<${+u+1}.0.0-0`:Yd(p)?l=`<${u}.${+f+1}.0-0`:h?l=`<=${u}.${f}.${p}-${h}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),pPt=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ks(t[n].semver),t[n].semver!==Mpe.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var tM=q((W0n,AFe)=>{"use strict";d();var rM=Symbol("SemVer ANY"),Qpe=class t{static{s(this,"Comparator")}static get ANY(){return rM}constructor(e,r){if(r=fFe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ope("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===rM?this.value="":this.value=this.operator+this.semver.version,Ope("comp",this)}parse(e){let r=this.options.loose?pFe[hFe.COMPARATORLOOSE]:pFe[hFe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new mFe(n[2],this.options.loose):this.semver=rM}toString(){return this.value}test(e){if(Ope("Comparator.test",e,this.options.loose),this.semver===rM||e===rM)return!0;if(typeof e=="string")try{e=new mFe(e,this.options)}catch{return!1}return Fpe(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new gFe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new gFe(this.value,r).test(e.semver):(r=fFe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Fpe(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Fpe(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};AFe.exports=Qpe;var fFe=WG(),{safeRe:pFe,t:hFe}=JP(),Fpe=Bpe(),Ope=ZL(),mFe=pd(),gFe=Sh()});var nM=q((G0n,yFe)=>{"use strict";d();var hPt=Sh(),mPt=s((t,e,r)=>{try{e=new hPt(e,r)}catch{return!1}return e.test(t)},"satisfies");yFe.exports=mPt});var vFe=q((Y0n,CFe)=>{"use strict";d();var gPt=Sh(),APt=s((t,e)=>new gPt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");CFe.exports=APt});var xFe=q((X0n,EFe)=>{"use strict";d();var yPt=pd(),CPt=Sh(),vPt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new CPt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new yPt(n,r))}),n},"maxSatisfying");EFe.exports=vPt});var IFe=q((tpn,bFe)=>{"use strict";d();var EPt=pd(),xPt=Sh(),bPt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new xPt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new EPt(n,r))}),n},"minSatisfying");bFe.exports=bPt});var _Fe=q((ipn,wFe)=>{"use strict";d();var Upe=pd(),IPt=Sh(),TFe=eM(),TPt=s((t,e)=>{t=new IPt(t,e);let r=new Upe("0.0.0");if(t.test(r)||(r=new Upe("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new Upe(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||TFe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||TFe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");wFe.exports=TPt});var RFe=q((apn,SFe)=>{"use strict";d();var wPt=Sh(),_Pt=s((t,e)=>{try{return new wPt(t,e).range||"*"}catch{return null}},"validRange");SFe.exports=_Pt});var eV=q((upn,BFe)=>{"use strict";d();var SPt=pd(),DFe=tM(),{ANY:RPt}=DFe,kPt=Sh(),PPt=nM(),kFe=eM(),PFe=YG(),DPt=JG(),BPt=KG(),NPt=s((t,e,r,n)=>{t=new SPt(t,n),e=new kPt(e,n);let i,o,a,c,l;switch(r){case">":i=kFe,o=DPt,a=PFe,c=">",l=">=";break;case"<":i=PFe,o=BPt,a=kFe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(PPt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,h=null;if(f.forEach(m=>{m.semver===RPt&&(m=new DFe(">=0.0.0")),p=p||m,h=h||m,i(m.semver,p.semver,n)?p=m:a(m.semver,h.semver,n)&&(h=m)}),p.operator===c||p.operator===l||(!h.operator||h.operator===c)&&o(t,h.semver))return!1;if(h.operator===l&&a(t,h.semver))return!1}return!0},"outside");BFe.exports=NPt});var LFe=q((ppn,NFe)=>{"use strict";d();var LPt=eV(),MPt=s((t,e,r)=>LPt(t,e,">",r),"gtr");NFe.exports=MPt});var FFe=q((gpn,MFe)=>{"use strict";d();var FPt=eV(),OPt=s((t,e,r)=>FPt(t,e,"<",r),"ltr");MFe.exports=OPt});var UFe=q((Cpn,QFe)=>{"use strict";d();var OFe=Sh(),QPt=s((t,e,r)=>(t=new OFe(t,r),e=new OFe(e,r),t.intersects(e,r)),"intersects");QFe.exports=QPt});var HFe=q((xpn,qFe)=>{"use strict";d();var UPt=nM(),qPt=_h();qFe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>qPt(f,p,r));for(let f of a)UPt(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var zFe=q((Ipn,VFe)=>{"use strict";d();var WFe=Sh(),Hpe=tM(),{ANY:qpe}=Hpe,iM=nM(),Wpe=_h(),HPt=s((t,e,r={})=>{if(t===e)return!0;t=new WFe(t,r),e=new WFe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=$Pt(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),WPt=[new Hpe(">=0.0.0-0")],$Fe=[new Hpe(">=0.0.0")],$Pt=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===qpe){if(e.length===1&&e[0].semver===qpe)return!0;r.includePrerelease?t=WPt:t=$Fe}if(e.length===1&&e[0].semver===qpe){if(r.includePrerelease)return!0;e=$Fe}let n=new Set,i,o;for(let m of t)m.operator===">"||m.operator===">="?i=jFe(i,m,r):m.operator==="<"||m.operator==="<="?o=GFe(o,m,r):n.add(m.semver);if(n.size>1)return null;let a;if(i&&o){if(a=Wpe(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let m of n){if(i&&!iM(m,String(i),r)||o&&!iM(m,String(o),r))return null;for(let g of e)if(!iM(m,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let m of e){if(f=f||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",i){if(h&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===h.major&&m.semver.minor===h.minor&&m.semver.patch===h.patch&&(h=!1),m.operator===">"||m.operator===">="){if(c=jFe(i,m,r),c===m&&c!==i)return!1}else if(i.operator===">="&&!iM(i.semver,String(m),r))return!1}if(o){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator==="<"||m.operator==="<="){if(l=GFe(o,m,r),l===m&&l!==o)return!1}else if(o.operator==="<="&&!iM(o.semver,String(m),r))return!1}if(!m.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||h||p)},"simpleSubset"),jFe=s((t,e,r)=>{if(!t)return e;let n=Wpe(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),GFe=s((t,e,r)=>{if(!t)return e;let n=Wpe(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");VFe.exports=HPt});var ZP=q((_pn,JFe)=>{"use strict";d();var $pe=JP(),YFe=XL(),jPt=pd(),KFe=Rpe(),GPt=XS(),VPt=xMe(),zPt=IMe(),YPt=_Me(),KPt=kMe(),JPt=DMe(),XPt=NMe(),ZPt=MMe(),e3t=OMe(),t3t=_h(),r3t=HMe(),n3t=$Me(),i3t=zG(),o3t=zMe(),s3t=KMe(),a3t=eM(),c3t=YG(),l3t=Ppe(),u3t=Dpe(),d3t=KG(),f3t=JG(),p3t=Bpe(),h3t=oFe(),m3t=tM(),g3t=Sh(),A3t=nM(),y3t=vFe(),C3t=xFe(),v3t=IFe(),E3t=_Fe(),x3t=RFe(),b3t=eV(),I3t=LFe(),T3t=FFe(),w3t=UFe(),_3t=HFe(),S3t=zFe();JFe.exports={parse:GPt,valid:VPt,clean:zPt,inc:YPt,diff:KPt,major:JPt,minor:XPt,patch:ZPt,prerelease:e3t,compare:t3t,rcompare:r3t,compareLoose:n3t,compareBuild:i3t,sort:o3t,rsort:s3t,gt:a3t,lt:c3t,eq:l3t,neq:u3t,gte:d3t,lte:f3t,cmp:p3t,coerce:h3t,Comparator:m3t,Range:g3t,satisfies:A3t,toComparators:y3t,maxSatisfying:C3t,minSatisfying:v3t,minVersion:E3t,validRange:x3t,outside:b3t,gtr:I3t,ltr:T3t,intersects:w3t,simplifyRange:_3t,subset:S3t,SemVer:jPt,re:$pe.re,src:$pe.src,tokens:$pe.t,SEMVER_SPEC_VERSION:YFe.SEMVER_SPEC_VERSION,RELEASE_TYPES:YFe.RELEASE_TYPES,compareIdentifiers:KFe.compareIdentifiers,rcompareIdentifiers:KFe.rcompareIdentifiers}});var ZFe=q((Rpn,XFe)=>{d();var R3t=ZP();XFe.exports=R3t.satisfies(process.version,">=15.7.0")});var tOe=q((Ppn,eOe)=>{d();var k3t=ZP();eOe.exports=k3t.satisfies(process.version,">=16.9.0")});var jpe=q((Bpn,rOe)=>{d();var P3t=ZFe(),D3t=tOe(),B3t={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},N3t={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};rOe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=B3t[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(P3t)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=N3t[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(D3t){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Gpe=q((Lpn,nOe)=>{d();var L3t=ZP();nOe.exports=L3t.satisfies(process.version,"^6.12.0 || >=8.0.0")});var sOe=q((Fpn,oOe)=>{d();var ks=JL(),M3t=Ipe(),iOe=Tpe(),F3t=bpe(),O3t=wpe(),Q3t=jpe(),U3t=Gpe(),q3t=QG(),{KeyObject:H3t,createSecretKey:W3t,createPublicKey:$3t}=require("crypto"),Vpe=["RS256","RS384","RS512"],j3t=["ES256","ES384","ES512"],zpe=["RS256","RS384","RS512"],G3t=["HS256","HS384","HS512"];U3t&&(Vpe.splice(Vpe.length,0,"PS256","PS384","PS512"),zpe.splice(zpe.length,0,"PS256","PS384","PS512"));oOe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new ks("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new ks("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new ks("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new ks("jwt must be provided"));if(typeof t!="string")return i(new ks("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new ks("jwt malformed"));let c;try{c=F3t(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new ks("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new ks("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new ks("error in secret or public key callback: "+f.message));let h=a[2].trim()!=="";if(!h&&p)return i(new ks("jwt signature is required"));if(h&&!p)return i(new ks("secret or public key must be provided"));if(!h&&!r.algorithms)return i(new ks('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof H3t))try{p=$3t(p)}catch{try{p=W3t(typeof p=="string"?Buffer.from(p):p)}catch{return i(new ks("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=G3t:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=zpe:p.asymmetricKeyType==="ec"?r.algorithms=j3t:r.algorithms=Vpe),r.algorithms.indexOf(c.header.alg)===-1)return i(new ks("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new ks(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new ks(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{Q3t(l.alg,p)}catch(A){return i(A)}let m;try{m=q3t.verify(t,c.header.alg,p)}catch(A){return i(A)}if(!m)return i(new ks("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new ks("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new M3t("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new ks("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new iOe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let A=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return A.some(function(_){return _ instanceof RegExp?_.test(b):_===b})}))return i(new ks("jwt audience invalid. expected: "+A.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new ks("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new ks("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new ks("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new ks("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new ks("iat required when maxAge is specified"));let A=O3t(r.maxAge,g.iat);if(typeof A>"u")return i(new ks('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(r.clockTolerance||0))return i(new iOe("maxAge exceeded",new Date(A*1e3)))}if(r.complete===!0){let A=c.signature;return i(null,{header:l,payload:g,signature:A})}return i(null,g)})}});var fOe=q((Upn,dOe)=>{d();var aOe=1/0,lOe=9007199254740991,V3t=17976931348623157e292,cOe=NaN,z3t="[object Arguments]",Y3t="[object Function]",K3t="[object GeneratorFunction]",J3t="[object String]",X3t="[object Symbol]",Z3t=/^\s+|\s+$/g,eDt=/^[-+]0x[0-9a-f]+$/i,tDt=/^0b[01]+$/i,rDt=/^0o[0-7]+$/i,nDt=/^(?:0|[1-9]\d*)$/,iDt=parseInt;function oDt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(oDt,"arrayMap");function sDt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(sDt,"baseFindIndex");function aDt(t,e,r){if(e!==e)return sDt(t,cDt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(aDt,"baseIndexOf");function cDt(t){return t!==t}s(cDt,"baseIsNaN");function lDt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(lDt,"baseTimes");function uDt(t,e){return oDt(e,function(r){return t[r]})}s(uDt,"baseValues");function dDt(t,e){return function(r){return t(e(r))}}s(dDt,"overArg");var tV=Object.prototype,Kpe=tV.hasOwnProperty,rV=tV.toString,fDt=tV.propertyIsEnumerable,pDt=dDt(Object.keys,Object),hDt=Math.max;function mDt(t,e){var r=uOe(t)||vDt(t)?lDt(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||Kpe.call(t,o))&&!(i&&(o=="length"||ADt(o,n)))&&r.push(o);return r}s(mDt,"arrayLikeKeys");function gDt(t){if(!yDt(t))return pDt(t);var e=[];for(var r in Object(t))Kpe.call(t,r)&&r!="constructor"&&e.push(r);return e}s(gDt,"baseKeys");function ADt(t,e){return e=e??lOe,!!e&&(typeof t=="number"||nDt.test(t))&&t>-1&&t%1==0&&t<e}s(ADt,"isIndex");function yDt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||tV;return t===r}s(yDt,"isPrototype");function CDt(t,e,r,n){t=Jpe(t)?t:kDt(t),r=r&&!n?_Dt(r):0;var i=t.length;return r<0&&(r=hDt(i+r,0)),IDt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&aDt(t,e,r)>-1}s(CDt,"includes");function vDt(t){return EDt(t)&&Kpe.call(t,"callee")&&(!fDt.call(t,"callee")||rV.call(t)==z3t)}s(vDt,"isArguments");var uOe=Array.isArray;function Jpe(t){return t!=null&&bDt(t.length)&&!xDt(t)}s(Jpe,"isArrayLike");function EDt(t){return Xpe(t)&&Jpe(t)}s(EDt,"isArrayLikeObject");function xDt(t){var e=Ype(t)?rV.call(t):"";return e==Y3t||e==K3t}s(xDt,"isFunction");function bDt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=lOe}s(bDt,"isLength");function Ype(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(Ype,"isObject");function Xpe(t){return!!t&&typeof t=="object"}s(Xpe,"isObjectLike");function IDt(t){return typeof t=="string"||!uOe(t)&&Xpe(t)&&rV.call(t)==J3t}s(IDt,"isString");function TDt(t){return typeof t=="symbol"||Xpe(t)&&rV.call(t)==X3t}s(TDt,"isSymbol");function wDt(t){if(!t)return t===0?t:0;if(t=SDt(t),t===aOe||t===-aOe){var e=t<0?-1:1;return e*V3t}return t===t?t:0}s(wDt,"toFinite");function _Dt(t){var e=wDt(t),r=e%1;return e===e?r?e-r:e:0}s(_Dt,"toInteger");function SDt(t){if(typeof t=="number")return t;if(TDt(t))return cOe;if(Ype(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ype(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Z3t,"");var r=tDt.test(t);return r||rDt.test(t)?iDt(t.slice(2),r?2:8):eDt.test(t)?cOe:+t}s(SDt,"toNumber");function RDt(t){return Jpe(t)?mDt(t):gDt(t)}s(RDt,"keys");function kDt(t){return t?uDt(t,RDt(t)):[]}s(kDt,"values");dOe.exports=CDt});var hOe=q((Wpn,pOe)=>{d();var PDt="[object Boolean]",DDt=Object.prototype,BDt=DDt.toString;function NDt(t){return t===!0||t===!1||LDt(t)&&BDt.call(t)==PDt}s(NDt,"isBoolean");function LDt(t){return!!t&&typeof t=="object"}s(LDt,"isObjectLike");pOe.exports=NDt});var COe=q((Gpn,yOe)=>{d();var mOe=1/0,MDt=17976931348623157e292,gOe=NaN,FDt="[object Symbol]",ODt=/^\s+|\s+$/g,QDt=/^[-+]0x[0-9a-f]+$/i,UDt=/^0b[01]+$/i,qDt=/^0o[0-7]+$/i,HDt=parseInt,WDt=Object.prototype,$Dt=WDt.toString;function jDt(t){return typeof t=="number"&&t==YDt(t)}s(jDt,"isInteger");function AOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(AOe,"isObject");function GDt(t){return!!t&&typeof t=="object"}s(GDt,"isObjectLike");function VDt(t){return typeof t=="symbol"||GDt(t)&&$Dt.call(t)==FDt}s(VDt,"isSymbol");function zDt(t){if(!t)return t===0?t:0;if(t=KDt(t),t===mOe||t===-mOe){var e=t<0?-1:1;return e*MDt}return t===t?t:0}s(zDt,"toFinite");function YDt(t){var e=zDt(t),r=e%1;return e===e?r?e-r:e:0}s(YDt,"toInteger");function KDt(t){if(typeof t=="number")return t;if(VDt(t))return gOe;if(AOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=AOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(ODt,"");var r=UDt.test(t);return r||qDt.test(t)?HDt(t.slice(2),r?2:8):QDt.test(t)?gOe:+t}s(KDt,"toNumber");yOe.exports=jDt});var EOe=q((Ypn,vOe)=>{d();var JDt="[object Number]",XDt=Object.prototype,ZDt=XDt.toString;function eBt(t){return!!t&&typeof t=="object"}s(eBt,"isObjectLike");function tBt(t){return typeof t=="number"||eBt(t)&&ZDt.call(t)==JDt}s(tBt,"isNumber");vOe.exports=tBt});var TOe=q((Xpn,IOe)=>{d();var rBt="[object Object]";function nBt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(nBt,"isHostObject");function iBt(t,e){return function(r){return t(e(r))}}s(iBt,"overArg");var oBt=Function.prototype,xOe=Object.prototype,bOe=oBt.toString,sBt=xOe.hasOwnProperty,aBt=bOe.call(Object),cBt=xOe.toString,lBt=iBt(Object.getPrototypeOf,Object);function uBt(t){return!!t&&typeof t=="object"}s(uBt,"isObjectLike");function dBt(t){if(!uBt(t)||cBt.call(t)!=rBt||nBt(t))return!1;var e=lBt(t);if(e===null)return!0;var r=sBt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&bOe.call(r)==aBt}s(dBt,"isPlainObject");IOe.exports=dBt});var _Oe=q((thn,wOe)=>{d();var fBt="[object String]",pBt=Object.prototype,hBt=pBt.toString,mBt=Array.isArray;function gBt(t){return!!t&&typeof t=="object"}s(gBt,"isObjectLike");function ABt(t){return typeof t=="string"||!mBt(t)&&gBt(t)&&hBt.call(t)==fBt}s(ABt,"isString");wOe.exports=ABt});var DOe=q((ihn,POe)=>{d();var yBt="Expected a function",SOe=1/0,CBt=17976931348623157e292,ROe=NaN,vBt="[object Symbol]",EBt=/^\s+|\s+$/g,xBt=/^[-+]0x[0-9a-f]+$/i,bBt=/^0b[01]+$/i,IBt=/^0o[0-7]+$/i,TBt=parseInt,wBt=Object.prototype,_Bt=wBt.toString;function SBt(t,e){var r;if(typeof e!="function")throw new TypeError(yBt);return t=BBt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(SBt,"before");function RBt(t){return SBt(2,t)}s(RBt,"once");function kOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(kOe,"isObject");function kBt(t){return!!t&&typeof t=="object"}s(kBt,"isObjectLike");function PBt(t){return typeof t=="symbol"||kBt(t)&&_Bt.call(t)==vBt}s(PBt,"isSymbol");function DBt(t){if(!t)return t===0?t:0;if(t=NBt(t),t===SOe||t===-SOe){var e=t<0?-1:1;return e*CBt}return t===t?t:0}s(DBt,"toFinite");function BBt(t){var e=DBt(t),r=e%1;return e===e?r?e-r:e:0}s(BBt,"toInteger");function NBt(t){if(typeof t=="number")return t;if(PBt(t))return ROe;if(kOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=kOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(EBt,"");var r=bBt.test(t);return r||IBt.test(t)?TBt(t.slice(2),r?2:8):xBt.test(t)?ROe:+t}s(NBt,"toNumber");POe.exports=RBt});var qOe=q((ahn,UOe)=>{d();var BOe=wpe(),LBt=Gpe(),MBt=jpe(),NOe=QG(),FBt=fOe(),nV=hOe(),LOe=COe(),Zpe=EOe(),FOe=TOe(),CI=_Oe(),OBt=DOe(),{KeyObject:QBt,createSecretKey:UBt,createPrivateKey:qBt}=require("crypto"),OOe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];LBt&&OOe.splice(3,0,"PS256","PS384","PS512");var HBt={expiresIn:{isValid:s(function(t){return LOe(t)||CI(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return LOe(t)||CI(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return CI(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:FBt.bind(null,OOe),message:'"algorithm" must be a valid string enum value'},header:{isValid:FOe,message:'"header" must be an object'},encoding:{isValid:CI,message:'"encoding" must be a string'},issuer:{isValid:CI,message:'"issuer" must be a string'},subject:{isValid:CI,message:'"subject" must be a string'},jwtid:{isValid:CI,message:'"jwtid" must be a string'},noTimestamp:{isValid:nV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:CI,message:'"keyid" must be a string'},mutatePayload:{isValid:nV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:nV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:nV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},WBt={iat:{isValid:Zpe,message:'"iat" should be a number of seconds'},exp:{isValid:Zpe,message:'"exp" should be a number of seconds'},nbf:{isValid:Zpe,message:'"nbf" should be a number of seconds'}};function QOe(t,e,r,n){if(!FOe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(QOe,"validate");function $Bt(t){return QOe(HBt,!1,t,"options")}s($Bt,"validateOptions");function jBt(t){return QOe(WBt,!0,t,"payload")}s(jBt,"validatePayload");var MOe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},GBt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];UOe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof QBt))try{e=qBt(e)}catch{try{e=UBt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{jBt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=GBt.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{$Bt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{MBt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=BOe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=BOe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(MOe).forEach(function(u){let f=MOe[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&OBt(n),NOe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=NOe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var WOe=q((uhn,HOe)=>{d();HOe.exports={decode:bpe(),verify:sOe(),sign:qOe(),JsonWebTokenError:JL(),NotBeforeError:Ipe(),TokenExpiredError:Tpe()}});function ANt(){try{return ihe.default.statSync("/.dockerenv"),!0}catch{return!1}}function yNt(){try{return ihe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function ohe(){return nhe===void 0&&(nhe=ANt()||yNt()),nhe}var ihe,nhe,i7e=sg(()=>{d();ihe=Me(require("node:fs"),1);s(ANt,"hasDockerEnv");s(yNt,"hasDockerCGroup");s(ohe,"isDocker")});function a3(){return she===void 0&&(she=CNt()||ohe()),she}var o7e,she,CNt,ahe=sg(()=>{d();o7e=Me(require("node:fs"),1);i7e();CNt=s(()=>{try{return o7e.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(a3,"isInsideContainer")});var che,a7e,c7e,s7e,c3,l7e=sg(()=>{d();che=Me(require("node:process"),1),a7e=Me(require("node:os"),1),c7e=Me(require("node:fs"),1);ahe();s7e=s(()=>{if(che.default.platform!=="linux")return!1;if(a7e.default.release().toLowerCase().includes("microsoft"))return!a3();try{return c7e.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!a3():!1}catch{return!1}},"isWsl"),c3=che.default.env.__IS_WSL_TEST__?s7e:s7e()});function r2(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var u7e=sg(()=>{d();s(r2,"defineLazyProperty")});async function lhe(){if(f7e.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await vNt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var d7e,f7e,p7e,vNt,h7e=sg(()=>{d();d7e=require("node:util"),f7e=Me(require("node:process"),1),p7e=require("node:child_process"),vNt=(0,d7e.promisify)(p7e.execFile);s(lhe,"defaultBrowserId")});async function A7e(t,{humanReadableOutput:e=!0}={}){if(m7e.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await ENt("osascript",["-e",t,r]);return n.trim()}var m7e,g7e,uhe,ENt,y7e=sg(()=>{d();m7e=Me(require("node:process"),1),g7e=require("node:util"),uhe=require("node:child_process"),ENt=(0,g7e.promisify)(uhe.execFile);s(A7e,"runAppleScript")});async function dhe(t){return A7e(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var C7e=sg(()=>{d();y7e();s(dhe,"bundleName")});async function fhe(t=xNt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new gV(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=bNt[n];if(!i)throw new gV(`Unknown browser ID: ${n}`);return i}var v7e,E7e,xNt,bNt,gV,x7e=sg(()=>{d();v7e=require("node:util"),E7e=require("node:child_process"),xNt=(0,v7e.promisify)(E7e.execFile),bNt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},gV=class extends Error{static{s(this,"UnknownBrowserError")}};s(fhe,"defaultBrowser")});async function phe(){if(AV.default.platform==="darwin"){let t=await lhe();return{name:await dhe(t),id:t}}if(AV.default.platform==="linux"){let{stdout:t}=await INt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:TNt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(AV.default.platform==="win32")return fhe();throw new Error("Only macOS, Linux, and Windows are supported")}var b7e,AV,I7e,INt,TNt,T7e=sg(()=>{d();b7e=require("node:util"),AV=Me(require("node:process"),1),I7e=require("node:child_process");h7e();C7e();x7e();INt=(0,b7e.promisify)(I7e.execFile),TNt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(phe,"defaultBrowser")});var B7e={};fa(B7e,{apps:()=>i2,default:()=>hM,openApp:()=>kNt});async function SNt(){let t=await D7e(),r=mhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await wNt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function R7e(t){if(typeof t=="string"||Array.isArray(t))return t;let{[_7e]:e}=t;if(!e)throw new Error(`${_7e} is not supported`);return e}function yhe({[l3]:t},{wsl:e}){if(e&&c3)return R7e(e);if(!t)throw new Error(`${l3} is not supported`);return R7e(t)}var fM,mhe,ghe,k7e,P7e,Ahe,n2,wNt,hhe,w7e,l3,_7e,_Nt,D7e,S7e,pM,RNt,kNt,i2,hM,yV=sg(()=>{d();fM=Me(require("node:process"),1),mhe=require("node:buffer"),ghe=Me(require("node:path"),1),k7e=require("node:url"),P7e=Me(require("node:util"),1),Ahe=Me(require("node:child_process"),1),n2=Me(require("node:fs/promises"),1);l7e();u7e();T7e();ahe();wNt=P7e.default.promisify(Ahe.default.execFile),hhe=ghe.default.dirname((0,k7e.fileURLToPath)(importMetaUrlShim)),w7e=ghe.default.join(hhe,"xdg-open"),{platform:l3,arch:_7e}=fM.default,_Nt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await n2.default.access(r,n2.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await n2.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),D7e=s(async()=>`${await _Nt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(SNt,"getWindowsDefaultBrowserFromWsl");S7e=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),pM=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return S7e(t.app,c=>pM({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return S7e(e,c=>pM({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=c3?await SNt():await phe();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),pM({...t,app:{name:i2[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(l3==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(l3==="win32"||c3&&!a3()&&!e){n=c3?await D7e():`${fM.default.env.SYSTEMROOT||fM.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),c3||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=mhe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!hhe||hhe==="/",l=!1;try{await n2.default.access(w7e,n2.constants.X_OK),l=!0}catch{}n=fM.default.versions.electron??(l3==="android"||c||!l)?"xdg-open":w7e}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}l3==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=Ahe.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),RNt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return pM({...e,target:t})},"open"),kNt=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return pM({...e,app:{name:t,arguments:r}})},"openApp");s(R7e,"detectArchBinary");s(yhe,"detectPlatformBinary");i2={};r2(i2,"chrome",()=>yhe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));r2(i2,"firefox",()=>yhe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));r2(i2,"edge",()=>yhe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));r2(i2,"browser",()=>"browser");r2(i2,"browserPrivate",()=>"browserPrivate");hM=RNt});var nQe=q(zy=>{"use strict";d();Object.defineProperty(zy,"__esModule",{value:!0});zy.bytePairEncode=zy.BinaryMap=zy.binaryMapKey=void 0;var e8t=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");zy.binaryMapKey=e8t;var _he=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,zy.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,zy.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};zy.BinaryMap=_he;var Vy=new Int32Array(128),Xd=new Int32Array(128);function t8t(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;Vy.length<r*2;)Xd=new Int32Array(Xd.length*2),Vy=new Int32Array(Vy.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Xd[l]=l,Vy[l]=u}Xd[r-1]=r-1,Vy[r-1]=2147483647,Xd[r]=r,Vy[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Xd[l],Xd[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){Vy[Xd[i]]=a(i,1),i>0&&(Vy[Xd[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Xd[l]=Xd[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=Vy[Xd[l]];Vy[Xd[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Xd[l],Xd[l+1]));return c}s(t8t,"bytePairEncode");zy.bytePairEncode=t8t});var iQe=q(_V=>{"use strict";d();Object.defineProperty(_V,"__esModule",{value:!0});_V.makeTextEncoder=void 0;var She=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},Rhe=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},r8t=s(()=>typeof Buffer<"u"?new Rhe:new She,"makeTextEncoder");_V.makeTextEncoder=r8t});var oQe=q(SV=>{"use strict";d();Object.defineProperty(SV,"__esModule",{value:!0});SV.LRUCache=void 0;var khe=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Phe(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};SV.LRUCache=khe;var Phe=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Bhe=q(kV=>{"use strict";d();Object.defineProperty(kV,"__esModule",{value:!0});kV.TikTokenizer=void 0;var RV=nQe(),n8t=iQe(),i8t=oQe();function o8t(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(o8t,"loadTikTokenBpe");function s8t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(s8t,"escapeRegExp");var Dhe=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,n8t.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new i8t.LRUCache(i);let o=typeof e=="string"?o8t(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new RV.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>s8t(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,RV.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let h=o-a;a+=h,c+=f.length,r.push(...p.slice(0,h));break}else{let h=this.textEncoder.encode(f),m=this.encoder.get(h,0,h.length);if(m!==void 0)if(this.cache.set(f,[m]),a+1<=o)a++,c+=f.length,r.push(m);else break;else{let g=(0,RV.bytePairEncode)(h,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let A of g)r.push(A)}else{let A=o-a;a+=A,c+=f.length;for(let y=0;y<A;y++)r.push(g[y]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:h}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=h,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let h,m;if([h,m]=this.findNextSpecialToken(e,o,n),m>o){let g,A=e.substring(o,m);for(this.regex.lastIndex=0;g=this.regex.exec(A);){let y=g[0],E=this.cache.get(y);if(E)a+=E.length,c+=y.length,i.push(...E),l.set(a,c);else{let b=this.textEncoder.encode(y),_=this.encoder.get(b);if(_!==void 0)this.cache.set(y,[_]),a++,c+=y.length,i.push(_),l.set(a,c);else{let S=(0,RV.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(y,S),a+=S.length,c+=y.length;for(let P of S)i.push(P);l.set(a,c)}}}}if(h!==null){if(o=o+this.encodeSpecialToken(i,h),a++,c+=h[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[h,m]of l)if(h>=u){f=h,p=m;break}if(f>r){let h=this.encode(e,n),m=h.slice(h.length-r);return{tokenIds:m,text:this.decode(m)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};kV.TikTokenizer=Dhe});var mQe=q(Wc=>{"use strict";d();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.createTokenizer=Wc.createByEncoderName=Wc.createByModelName=Wc.getRegexByModel=Wc.getRegexByEncoder=Wc.getSpecialTokensByModel=Wc.getSpecialTokensByEncoder=Wc.MODEL_TO_ENCODING=void 0;var a8t=Bhe(),c8t=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Wc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var PV="<|endoftext|>",sQe="<|fim_prefix|>",aQe="<|fim_middle|>",cQe="<|fim_suffix|>",lQe="<|endofprompt|>",wM="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",uQe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",l8t=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],dQe=l8t.join("|");function Nhe(t){let e="";if(Wc.MODEL_TO_ENCODING.has(t))e=Wc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of c8t)if(t.startsWith(r)){e=n;break}return e}s(Nhe,"getEncoderFromModelName");async function u8t(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(u8t,"fetchAndSaveFile");function Lhe(t){let e=new Map([[PV,50256]]);switch(t){case"o200k_base":e=new Map([[PV,199999],[lQe,200018]]);break;case"cl100k_base":e=new Map([[PV,100257],[sQe,100258],[aQe,100259],[cQe,100260],[lQe,100276]]);break;case"p50k_edit":e=new Map([[PV,50256],[sQe,50281],[aQe,50282],[cQe,50283]]);break;default:break}return e}s(Lhe,"getSpecialTokensByEncoder");Wc.getSpecialTokensByEncoder=Lhe;function d8t(t){let e=Nhe(t);return Lhe(e)}s(d8t,"getSpecialTokensByModel");Wc.getSpecialTokensByModel=d8t;function fQe(t){switch(t){case"o200k_base":return dQe;case"cl100k_base":return uQe;default:break}return wM}s(fQe,"getRegexByEncoder");Wc.getRegexByEncoder=fQe;function f8t(t){let e=Nhe(t);return fQe(e)}s(f8t,"getRegexByModel");Wc.getRegexByModel=f8t;async function p8t(t,e=null){return pQe(Nhe(t),e)}s(p8t,"createByModelName");Wc.createByModelName=p8t;async function pQe(t,e=null){let r,n,i=Lhe(t);switch(t){case"o200k_base":r=dQe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=uQe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=wM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=wM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=wM,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=wM,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await u8t(n,u),console.log(`Saved file to ${u}`)),hQe(u,i,r)}s(pQe,"createByEncoderName");Wc.createByEncoderName=pQe;function hQe(t,e,r,n=8192){return new a8t.TikTokenizer(t,e,r,n)}s(hQe,"createTokenizer");Wc.createTokenizer=hQe});var gQe=q($c=>{"use strict";d();Object.defineProperty($c,"__esModule",{value:!0});$c.createTokenizer=$c.createByEncoderName=$c.createByModelName=$c.getSpecialTokensByModel=$c.getSpecialTokensByEncoder=$c.getRegexByModel=$c.getRegexByEncoder=$c.MODEL_TO_ENCODING=$c.TikTokenizer=void 0;var h8t=Bhe();Object.defineProperty($c,"TikTokenizer",{enumerable:!0,get:s(function(){return h8t.TikTokenizer},"get")});var TI=mQe();Object.defineProperty($c,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return TI.MODEL_TO_ENCODING},"get")});Object.defineProperty($c,"getRegexByEncoder",{enumerable:!0,get:s(function(){return TI.getRegexByEncoder},"get")});Object.defineProperty($c,"getRegexByModel",{enumerable:!0,get:s(function(){return TI.getRegexByModel},"get")});Object.defineProperty($c,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return TI.getSpecialTokensByEncoder},"get")});Object.defineProperty($c,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return TI.getSpecialTokensByModel},"get")});Object.defineProperty($c,"createByModelName",{enumerable:!0,get:s(function(){return TI.createByModelName},"get")});Object.defineProperty($c,"createByEncoderName",{enumerable:!0,get:s(function(){return TI.createByEncoderName},"get")});Object.defineProperty($c,"createTokenizer",{enumerable:!0,get:s(function(){return TI.createTokenizer},"get")})});var $he=q((Dwn,QQe)=>{"use strict";d();QQe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var qQe=q((Lwn,UQe)=>{"use strict";d();var G6t=$he();function V6t(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=G6t(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(V6t,"parsePath");UQe.exports=V6t});var VQe=q((Own,GQe)=>{"use strict";d();var z6t=qQe();function Y6t(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Y6t,"_interopDefaultLegacy");var K6t=Y6t(z6t);function J6t(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(J6t,"getAugmentedNamespace");var WQe={},X6t="text/plain",Z6t="us-ascii",HQe=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),eLt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[h,m=""]=p.split("=").map(g=>g.trim());return h==="charset"&&(m=m.toLowerCase(),m===Z6t)?"":`${h}${m?`=${m}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==X6t)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function tLt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return eLt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],h=f.index,m=i.pathname.slice(c,h);l+=m.replace(/\/{2,}/g,"/"),l+=p,c=h+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];HQe(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])HQe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(tLt,"normalizeUrl");var rLt=Object.freeze({__proto__:null,default:tLt}),nLt=J6t(rLt);Object.defineProperty(WQe,"__esModule",{value:!0});var iLt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oLt=nLt,sLt=$Qe(oLt),aLt=K6t.default,cLt=$Qe(aLt);function $Qe(t){return t&&t.__esModule?t:{default:t}}s($Qe,"_interopRequireDefault");var jQe=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":iLt(r))!=="object"&&(r={stripHash:!1}),e=(0,sLt.default)(e,r));var o=(0,cLt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");jQe.MAX_INPUT_LENGTH=2048;var lLt=WQe.default=jQe;GQe.exports=lLt});var KQe=q((qwn,YQe)=>{"use strict";d();var uLt=$he();function zQe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=uLt(t);if(t=t.substring(t.indexOf("://")+3),zQe(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(zQe,"isSsh");YQe.exports=zQe});var ZQe=q(($wn,XQe)=>{"use strict";d();var dLt=VQe(),JQe=KQe();function fLt(t){let e=dLt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),JQe(e.protocols)||e.protocols.length===0&&JQe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(fLt,"gitUp");XQe.exports=fLt});var tUe=q((Vwn,eUe)=>{"use strict";d();var pLt=ZQe();function jhe(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=pLt(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return jhe.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),h=o.indexOf("src",2),m=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:h>0?h-1:m>0?m-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var A=o.length>a&&o[a+1]==="-"?a+1:a;o.length>A+2&&["raw","src","blob","tree","edit"].indexOf(o[A+1])>=0&&(n.filepathtype=o[A+1],n.ref=o[A+2],o.length>A+3&&(n.filepath=o.slice(A+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var y=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,E=y.exec(n.pathname);return E!=null&&(n.source="bitbucket-server",E[1]==="users"?n.owner="~"+E[2]:n.owner=E[2],n.organization=n.owner,n.name=E[3],o=E[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=gLt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(jhe,"gitUrlParse");jhe.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?hLt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+mLt(t)+i;default:return t.href}};function hLt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(hLt,"buildToken");function mLt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(mLt,"buildPath");function gLt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(gLt,"findLongestMatchingSubstring");eUe.exports=jhe});var YV=q((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var E=0,b=1;;){var _=t[e++];if(E+=(127&_)*b,b*=128,!(128&_))break}return E}s(n,"_");function i(){var E=n();return UTF8ArrayToString(t,(e+=E)-E,E)}s(i,"n");function o(E,b){if(E)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var h=i();u.neededDynlibs.push(h)}}else for(o(a!=="dylink.0");e<r;){var m=t[e++],g=n();if(m===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(m===2)for(f=n(),p=0;p<f;++p)h=i(),u.neededDynlibs.push(h);else if(m===3)for(var A=n();A--;){var y=i();256&n()&&u.tlsExports.add(y)}else if(m===4)for(A=n();A--;)i(),y=i(),(3&n())==1&&u.weakImports.add(y);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let A=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),y=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,E=e.substr(y,100).split(`
`)[0],b,_=E.match(QUERY_WORD_REGEX)[0];switch(A){case 2:b=new RangeError(`Bad node name '${_}'`);break;case 3:b=new RangeError(`Bad field name '${_}'`);break;case 4:b=new RangeError(`Bad capture name @${_}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${y}: '${E}'...`),_="";break;default:b=new SyntaxError(`Bad syntax at offset ${y}: '${E}'...`),_=""}throw b.index=y,b.length=_.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let A=0;A<a;A++){let y=C._ts_query_capture_name_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");l[A]=UTF8ToString(y,E)}for(let A=0;A<o;A++){let y=C._ts_query_string_value_for_id(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");u[A]=UTF8ToString(y,E)}let f=new Array(c),p=new Array(c),h=new Array(c),m=new Array(c),g=new Array(c);for(let A=0;A<c;A++){let y=C._ts_query_predicates_for_pattern(i,A,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");m[A]=[],g[A]=[];let b=[],_=y;for(let S=0;S<E;S++){let P=getValue(_,"i32");_+=SIZE_OF_INT;let B=getValue(_,"i32");if(_+=SIZE_OF_INT,P===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[B]});else if(P===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[B]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let F=b[0].value,Y=!0;switch(F){case"not-eq?":Y=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let U=b[1].name,X=b[2].name;g[A].push(function(K){let j,W;for(let J of K)J.name===U&&(j=J.node),J.name===X&&(W=J.node);return j===void 0||W===void 0||j.text===W.text===Y})}else{let U=b[1].name,X=b[2].value;g[A].push(function(K){for(let j of K)if(j.name===U)return j.node.text===X===Y;return!0})}break;case"not-match?":Y=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let ee=b[1].name,V=new RegExp(b[2].value);g[A].push(function(U){for(let X of U)if(X.name===ee)return V.test(X.node.text)===Y;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[A]||(f[A]={}),f[A][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${F}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(U=>U.type!=="string"))throw new Error(`Arguments to \`#${F}\` predicate must be a strings.".`);let H=F==="is?"?p:h;H[A]||(H[A]={}),H[A][b[1].value]=b[2]?b[2].value:null;break;default:m[A].push({operator:F,operands:b.slice(1)})}b.length=0}}Object.freeze(f[A]),Object.freeze(p[A]),Object.freeze(h[A])}return C._free(n),new Query(INTERNAL,i,l,g,m,Object.freeze(f),Object.freeze(p),Object.freeze(h))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let h=0;h<a;h++){let m=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,A),this.textPredicates[m].every(y=>y(A))){u[f++]={pattern:m,captures:A};let y=this.setProperties[m];y&&(u[h].setProperties=y);let E=this.assertedProperties[m];E&&(u[h].assertedProperties=E);let b=this.refutedProperties[m];b&&(u[h].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let h=0;h<a;h++){let m=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let A=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[m].every(y=>y(f))){let y=f[A],E=this.setProperties[m];E&&(y.setProperties=E);let b=this.assertedProperties[m];b&&(y.assertedProperties=b);let _=this.refutedProperties[m];_&&(y.refutedProperties=_),u.push(y)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Pme=q((T5n,UUe)=>{d();var kme=require("fs"),bz=require("path"),JM=bz.join,zMt=bz.dirname,OUe=kme.accessSync&&function(t){try{kme.accessSync(t)}catch{return!1}return!0}||kme.existsSync||bz.existsSync,QUe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function YMt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(QUe).map(function(l){l in t||(t[l]=QUe[l])}),t.module_root||(t.module_root=KMt(__filename)),bz.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=JM.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(YMt,"bindings");UUe.exports=YMt;function KMt(t){for(var e=zMt(t),r;;){if(e==="."&&(e=process.cwd()),OUe(JM(e,"dist")))return JM(e,"dist");if(OUe(JM(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=JM(e,"..")}}s(KMt,"getRoot")});var HUe=q((S5n,qUe)=>{d();qUe.exports=Pme()("node_sqlite3.node")});var jUe=q($Ue=>{d();var JMt=require("util");function XMt(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return JMt.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=WUe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+WUe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(XMt,"extendTrace");$Ue.extendTrace=XMt;function WUe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(WUe,"filter")});var YUe=q((VUe,zUe)=>{d();var ZMt=require("path"),Mh=HUe(),T3=require("events").EventEmitter;zUe.exports=VUe=Mh;function w3(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new Iz(this,e,r);return t.call(this,i,n)}}s(w3,"normalizeMethod");function Bme(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(Bme,"inherits");Mh.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new ef(t,e,r);let n;if(t=ZMt.resolve(t),!Mh.cached.objects[t])n=Mh.cached.objects[t]=new ef(t,e,r);else{n=Mh.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var ef=Mh.Database,Iz=Mh.Statement,Dme=Mh.Backup;Bme(ef,T3);Bme(Iz,T3);Bme(Dme,T3);ef.prototype.prepare=w3(function(t,e){return e.length?t.bind.apply(t,e):t});ef.prototype.run=w3(function(t,e){return t.run.apply(t,e).finalize(),this});ef.prototype.get=w3(function(t,e){return t.get.apply(t,e).finalize(),this});ef.prototype.all=w3(function(t,e){return t.all.apply(t,e).finalize(),this});ef.prototype.each=w3(function(t,e){return t.each.apply(t,e).finalize(),this});ef.prototype.map=w3(function(t,e){return t.map.apply(t,e).finalize(),this});ef.prototype.backup=function(){let t;return arguments.length<=2?t=new Dme(this,arguments[0],"main","main",!0,arguments[1]):t=new Dme(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Mh.BUSY,Mh.LOCKED],t};Iz.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var GUe=!1,Nme=["trace","profile","change"];ef.prototype.addListener=ef.prototype.on=function(t){let e=T3.prototype.addListener.apply(this,arguments);return Nme.indexOf(t)>=0&&this.configure(t,!0),e};ef.prototype.removeListener=function(t){let e=T3.prototype.removeListener.apply(this,arguments);return Nme.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};ef.prototype.removeAllListeners=function(t){let e=T3.prototype.removeAllListeners.apply(this,arguments);return Nme.indexOf(t)>=0&&this.configure(t,!1),e};Mh.verbose=function(){if(!GUe){let t=jUe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(ef.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(Iz.prototype,e)}),GUe=!0}return Mh}});var Fz=q(Vc=>{"use strict";d();Object.defineProperty(Vc,"__esModule",{value:!0});Vc.thenable=Vc.typedArray=Vc.stringArray=Vc.array=Vc.func=Vc.error=Vc.number=Vc.string=Vc.boolean=void 0;function tFt(t){return t===!0||t===!1}s(tFt,"boolean");Vc.boolean=tFt;function eqe(t){return typeof t=="string"||t instanceof String}s(eqe,"string");Vc.string=eqe;function rFt(t){return typeof t=="number"||t instanceof Number}s(rFt,"number");Vc.number=rFt;function nFt(t){return t instanceof Error}s(nFt,"error");Vc.error=nFt;function tqe(t){return typeof t=="function"}s(tqe,"func");Vc.func=tqe;function rqe(t){return Array.isArray(t)}s(rqe,"array");Vc.array=rqe;function iFt(t){return rqe(t)&&t.every(e=>eqe(e))}s(iFt,"stringArray");Vc.stringArray=iFt;function oFt(t,e){return Array.isArray(t)&&t.every(e)}s(oFt,"typedArray");Vc.typedArray=oFt;function sFt(t){return t&&tqe(t.then)}s(sFt,"thenable");Vc.thenable=sFt});var Fme=q(Fh=>{"use strict";d();Object.defineProperty(Fh,"__esModule",{value:!0});Fh.generateUuid=Fh.parse=Fh.isUUID=Fh.v4=Fh.empty=void 0;var eF=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},tF=class t extends eF{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};tF._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];tF._timeHighBits=["8","9","a","b"];Fh.empty=new eF("00000000-0000-0000-0000-000000000000");function nqe(){return new tF}s(nqe,"v4");Fh.v4=nqe;var aFt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function iqe(t){return aFt.test(t)}s(iqe,"isUUID");Fh.isUUID=iqe;function cFt(t){if(!iqe(t))throw new Error("invalid uuid");return new eF(t)}s(cFt,"parse");Fh.parse=cFt;function lFt(){return nqe().asHex()}s(lFt,"generateUuid");Fh.generateUuid=lFt});var oqe=q(LI=>{"use strict";d();Object.defineProperty(LI,"__esModule",{value:!0});LI.attachPartialResult=LI.ProgressFeature=LI.attachWorkDone=void 0;var NI=pi(),uFt=Fme(),y2=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(NI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(NI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(NI.WorkDoneProgress.type,this._token,{kind:"end"})}};y2.Instances=new Map;var Oz=class extends y2{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new NI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},rF=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},Qz=class extends rF{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new NI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function dFt(t,e){if(e===void 0||e.workDoneToken===void 0)return new rF;let r=e.workDoneToken;return delete e.workDoneToken,new y2(t,r)}s(dFt,"attachWorkDone");LI.attachWorkDone=dFt;var fFt=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(NI.WorkDoneProgressCancelNotification.type,r=>{let n=y2.Instances.get(r.token);(n instanceof Oz||n instanceof Qz)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new rF:new y2(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,uFt.generateUuid)();return this.connection.sendRequest(NI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Oz(this.connection,e))}else return Promise.resolve(new Qz)}},"ProgressFeature");LI.ProgressFeature=fFt;var Ome;(function(t){t.type=new NI.ProgressType})(Ome||(Ome={}));var Qme=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Ome.type,this._token,e)}};function pFt(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Qme(t,r)}s(pFt,"attachPartialResult");LI.attachPartialResult=pFt});var sqe=q(Uz=>{"use strict";d();Object.defineProperty(Uz,"__esModule",{value:!0});Uz.ConfigurationFeature=void 0;var hFt=pi(),mFt=Fz(),gFt=s(t=>class extends t{getConfiguration(e){return e?mFt.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(hFt.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");Uz.ConfigurationFeature=gFt});var aqe=q(Hz=>{"use strict";d();Object.defineProperty(Hz,"__esModule",{value:!0});Hz.WorkspaceFoldersFeature=void 0;var qz=pi(),AFt=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new qz.Emitter,this.connection.onNotification(qz.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(qz.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(qz.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");Hz.WorkspaceFoldersFeature=AFt});var cqe=q(Wz=>{"use strict";d();Object.defineProperty(Wz,"__esModule",{value:!0});Wz.CallHierarchyFeature=void 0;var Ume=pi(),yFt=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Ume.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Ume.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Ume.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");Wz.CallHierarchyFeature=yFt});var Hme=q(MI=>{"use strict";d();Object.defineProperty(MI,"__esModule",{value:!0});MI.SemanticTokensBuilder=MI.SemanticTokensDiff=MI.SemanticTokensFeature=void 0;var $z=pi(),CFt=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest($z.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=$z.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=$z.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=$z.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");MI.SemanticTokensFeature=CFt;var jz=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};MI.SemanticTokensDiff=jz;var qme=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new jz(this._prevData,this._data).computeDiff()}:this.build()}};MI.SemanticTokensBuilder=qme});var lqe=q(Gz=>{"use strict";d();Object.defineProperty(Gz,"__esModule",{value:!0});Gz.ShowDocumentFeature=void 0;var vFt=pi(),EFt=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(vFt.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");Gz.ShowDocumentFeature=EFt});var uqe=q(Vz=>{"use strict";d();Object.defineProperty(Vz,"__esModule",{value:!0});Vz.FileOperationsFeature=void 0;var S3=pi(),xFt=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(S3.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(S3.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(S3.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(S3.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(S3.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(S3.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");Vz.FileOperationsFeature=xFt});var dqe=q(zz=>{"use strict";d();Object.defineProperty(zz,"__esModule",{value:!0});zz.LinkedEditingRangeFeature=void 0;var bFt=pi(),IFt=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(bFt.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");zz.LinkedEditingRangeFeature=IFt});var fqe=q(Yz=>{"use strict";d();Object.defineProperty(Yz,"__esModule",{value:!0});Yz.TypeHierarchyFeature=void 0;var Wme=pi(),TFt=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Wme.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=Wme.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=Wme.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");Yz.TypeHierarchyFeature=TFt});var hqe=q(Kz=>{"use strict";d();Object.defineProperty(Kz,"__esModule",{value:!0});Kz.InlineValueFeature=void 0;var pqe=pi(),wFt=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(pqe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(pqe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");Kz.InlineValueFeature=wFt});var gqe=q(Jz=>{"use strict";d();Object.defineProperty(Jz,"__esModule",{value:!0});Jz.FoldingRangeFeature=void 0;var mqe=pi(),_Ft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(mqe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=mqe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");Jz.FoldingRangeFeature=_Ft});var Aqe=q(Xz=>{"use strict";d();Object.defineProperty(Xz,"__esModule",{value:!0});Xz.InlayHintFeature=void 0;var $me=pi(),SFt=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest($me.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest($me.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest($me.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");Xz.InlayHintFeature=SFt});var yqe=q(Zz=>{"use strict";d();Object.defineProperty(Zz,"__esModule",{value:!0});Zz.DiagnosticFeature=void 0;var nF=pi(),RFt=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(nF.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(nF.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(nF.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(nF.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(nF.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");Zz.DiagnosticFeature=RFt});var Gme=q(eY=>{"use strict";d();Object.defineProperty(eY,"__esModule",{value:!0});eY.TextDocuments=void 0;var C2=pi(),jme=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new C2.Emitter,this._onDidOpen=new C2.Emitter,this._onDidClose=new C2.Emitter,this._onDidSave=new C2.Emitter,this._onWillSave=new C2.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=C2.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),C2.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};eY.TextDocuments=jme});var zme=q(R3=>{"use strict";d();Object.defineProperty(R3,"__esModule",{value:!0});R3.NotebookDocuments=R3.NotebookSyncFeature=void 0;var Oh=pi(),Cqe=Gme(),kFt=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Oh.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Oh.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Oh.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Oh.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");R3.NotebookSyncFeature=kFt;var tY=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Oh.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Oh.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Oh.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};tY.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Vme=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof Cqe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new Cqe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Oh.Emitter,this._onDidChange=new Oh.Emitter,this._onDidSave=new Oh.Emitter,this._onDidClose=new Oh.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new tY,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],h=[];if(l.cells!==void 0){let E=l.cells;if(E.structure!==void 0){let b=E.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),E.structure.didOpen!==void 0)for(let _ of E.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(E.structure.didClose)for(let _ of E.structure.didClose)r.closeTextDocument({textDocument:_}),f.push(_.uri)}if(E.data!==void 0){let b=new Map(E.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let S=b.get(o.cells[_].document);if(S!==void 0){let P=o.cells.splice(_,1,S);if(p.push({old:P[0],new:S}),b.delete(S.document),b.size===0)break}}}if(E.textContent!==void 0)for(let b of E.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),h.push(b.document.uri)}this.updateCellMap(o);let m={notebookDocument:o};c&&(m.metadata={old:a,new:o.metadata});let g=[];for(let E of u)g.push(this.getNotebookCell(E));let A=[];for(let E of f)A.push(this.getNotebookCell(E));let y=[];for(let E of h)y.push(this.getNotebookCell(E));(g.length>0||A.length>0||p.length>0||y.length>0)&&(m.cells={added:g,removed:A,changed:{data:p,textContent:y}}),(m.metadata!==void 0||m.cells!==void 0)&&this._onDidChange.fire(m)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Oh.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};R3.NotebookDocuments=Vme});var vqe=q(rY=>{"use strict";d();Object.defineProperty(rY,"__esModule",{value:!0});rY.MonikerFeature=void 0;var PFt=pi(),DFt=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=PFt.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");rY.MonikerFeature=DFt});var ege=q(Fo=>{"use strict";d();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.createConnection=Fo.combineFeatures=Fo.combineNotebooksFeatures=Fo.combineLanguagesFeatures=Fo.combineWorkspaceFeatures=Fo.combineWindowFeatures=Fo.combineClientFeatures=Fo.combineTracerFeatures=Fo.combineTelemetryFeatures=Fo.combineConsoleFeatures=Fo._NotebooksImpl=Fo._LanguagesImpl=Fo.BulkUnregistration=Fo.BulkRegistration=Fo.ErrorMessageTracker=void 0;var ir=pi(),Qh=Fz(),Kme=Fme(),li=oqe(),BFt=sqe(),NFt=aqe(),LFt=cqe(),MFt=Hme(),FFt=lqe(),OFt=uqe(),QFt=dqe(),UFt=fqe(),qFt=hqe(),HFt=gqe(),WFt=Aqe(),$Ft=yqe(),jFt=zme(),GFt=vqe();function Yme(t){if(t!==null)return t}s(Yme,"null2Undefined");var Jme=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Fo.ErrorMessageTracker=Jme;var nY=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(ir.MessageType.Error,e)}warn(e){this.send(ir.MessageType.Warning,e)}info(e){this.send(ir.MessageType.Info,e)}log(e){this.send(ir.MessageType.Log,e)}debug(e){this.send(ir.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(ir.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,ir.RAL)().console.error("Sending log message failed")})}},Xme=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:ir.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(ir.ShowMessageRequest.type,n).then(Yme)}showWarningMessage(e,...r){let n={type:ir.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(ir.ShowMessageRequest.type,n).then(Yme)}showInformationMessage(e,...r){let n={type:ir.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(ir.ShowMessageRequest.type,n).then(Yme)}},Eqe=(0,FFt.ShowDocumentFeature)((0,li.ProgressFeature)(Xme)),xqe;(function(t){function e(){return new iY}s(e,"create"),t.create=e})(xqe||(Fo.BulkRegistration=xqe={}));var iY=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Qh.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=Kme.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},bqe;(function(t){function e(){return new iF(void 0,[])}s(e,"create"),t.create=e})(bqe||(Fo.BulkUnregistration=bqe={}));var iF=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(ir.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Qh.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(ir.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},oY=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof iY?this.registerMany(e):e instanceof iF?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Qh.string(r)?r:r.method,o=Kme.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(ir.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Qh.string(e)?e:e.method,i=Kme.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(ir.RegistrationRequest.type,o).then(a=>ir.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(ir.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(ir.RegistrationRequest.type,r).then(()=>new iF(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},Zme=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(ir.ApplyWorkspaceEditRequest.type,n)}},Iqe=(0,OFt.FileOperationsFeature)((0,NFt.WorkspaceFoldersFeature)((0,BFt.ConfigurationFeature)(Zme))),sY=class{static{s(this,"TracerImpl")}constructor(){this._trace=ir.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==ir.Trace.Off&&this.connection.sendNotification(ir.LogTraceNotification.type,{message:e,verbose:this._trace===ir.Trace.Verbose?r:void 0}).catch(()=>{})}},aY=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(ir.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},cY=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,li.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,li.attachPartialResult)(this.connection,r)}};Fo._LanguagesImpl=cY;var Tqe=(0,HFt.FoldingRangeFeature)((0,GFt.MonikerFeature)((0,$Ft.DiagnosticFeature)((0,WFt.InlayHintFeature)((0,qFt.InlineValueFeature)((0,UFt.TypeHierarchyFeature)((0,QFt.LinkedEditingRangeFeature)((0,MFt.SemanticTokensFeature)((0,LFt.CallHierarchyFeature)(cY))))))))),lY=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,li.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,li.attachPartialResult)(this.connection,r)}};Fo._NotebooksImpl=lY;var wqe=(0,jFt.NotebookSyncFeature)(lY);function _qe(t,e){return function(r){return e(t(r))}}s(_qe,"combineConsoleFeatures");Fo.combineConsoleFeatures=_qe;function Sqe(t,e){return function(r){return e(t(r))}}s(Sqe,"combineTelemetryFeatures");Fo.combineTelemetryFeatures=Sqe;function Rqe(t,e){return function(r){return e(t(r))}}s(Rqe,"combineTracerFeatures");Fo.combineTracerFeatures=Rqe;function kqe(t,e){return function(r){return e(t(r))}}s(kqe,"combineClientFeatures");Fo.combineClientFeatures=kqe;function Pqe(t,e){return function(r){return e(t(r))}}s(Pqe,"combineWindowFeatures");Fo.combineWindowFeatures=Pqe;function Dqe(t,e){return function(r){return e(t(r))}}s(Dqe,"combineWorkspaceFeatures");Fo.combineWorkspaceFeatures=Dqe;function Bqe(t,e){return function(r){return e(t(r))}}s(Bqe,"combineLanguagesFeatures");Fo.combineLanguagesFeatures=Bqe;function Nqe(t,e){return function(r){return e(t(r))}}s(Nqe,"combineNotebooksFeatures");Fo.combineNotebooksFeatures=Nqe;function VFt(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,_qe),tracer:r(t.tracer,e.tracer,Rqe),telemetry:r(t.telemetry,e.telemetry,Sqe),client:r(t.client,e.client,kqe),window:r(t.window,e.window,Pqe),workspace:r(t.workspace,e.workspace,Dqe),languages:r(t.languages,e.languages,Bqe),notebooks:r(t.notebooks,e.notebooks,Nqe)}}s(VFt,"combineFeatures");Fo.combineFeatures=VFt;function zFt(t,e,r){let n=r&&r.console?new(r.console(nY)):new nY,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(sY)):new sY,a=r&&r.telemetry?new(r.telemetry(aY)):new aY,c=r&&r.client?new(r.client(oY)):new oY,l=r&&r.window?new(r.window(Eqe)):new Eqe,u=r&&r.workspace?new(r.workspace(Iqe)):new Iqe,f=r&&r.languages?new(r.languages(Tqe)):new Tqe,p=r&&r.notebooks?new(r.notebooks(wqe)):new wqe,h=[n,o,a,c,l,u,f,p];function m(b){return b instanceof Promise?b:Qh.thenable(b)?new Promise((_,S)=>{b.then(P=>_(P),P=>S(P))}):Promise.resolve(b)}s(m,"asPromise");let g,A,y,E={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,..._)=>i.sendRequest(Qh.string(b)?b:b.method,..._),"sendRequest"),onRequest:s((b,_)=>i.onRequest(b,_),"onRequest"),sendNotification:s((b,_)=>{let S=Qh.string(b)?b:b.method;return i.sendNotification(S,_)},"sendNotification"),onNotification:s((b,_)=>i.onNotification(b,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(A=b,{dispose:s(()=>{A=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(ir.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(ir.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(ir.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(ir.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(ir.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(ir.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(ir.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(ir.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(ir.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(ir.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(ir.HoverRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(ir.CompletionRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(ir.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(ir.SignatureHelpRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(ir.DeclarationRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(b=>i.onRequest(ir.DefinitionRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(ir.TypeDefinitionRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(ir.ImplementationRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(b=>i.onRequest(ir.ReferencesRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(ir.DocumentHighlightRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(ir.DocumentSymbolRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(ir.WorkspaceSymbolRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(ir.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(ir.CodeActionRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(ir.CodeActionResolveRequest.type,(_,S)=>b(_,S)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(ir.CodeLensRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(ir.CodeLensResolveRequest.type,(_,S)=>b(_,S)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(ir.DocumentFormattingRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(ir.DocumentRangeFormattingRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(ir.DocumentOnTypeFormattingRequest.type,(_,S)=>b(_,S)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(ir.RenameRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(ir.PrepareRenameRequest.type,(_,S)=>b(_,S)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(ir.DocumentLinkRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(ir.DocumentLinkResolveRequest.type,(_,S)=>b(_,S)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(ir.DocumentColorRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(ir.ColorPresentationRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(ir.FoldingRangeRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(ir.SelectionRangeRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),(0,li.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(ir.ExecuteCommandRequest.type,(_,S)=>b(_,S,(0,li.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of h)b.attach(E);return i.onRequest(ir.InitializeRequest.type,b=>{e.initialize(b),Qh.string(b.trace)&&(o.trace=ir.Trace.fromString(b.trace));for(let _ of h)_.initialize(b.capabilities);if(A){let _=A(b,new ir.CancellationTokenSource().token,(0,li.attachWorkDone)(i,b),void 0);return m(_).then(S=>{if(S instanceof ir.ResponseError)return S;let P=S;P||(P={capabilities:{}});let B=P.capabilities;B||(B={},P.capabilities=B),B.textDocumentSync===void 0||B.textDocumentSync===null?B.textDocumentSync=Qh.number(E.__textDocumentSync)?E.__textDocumentSync:ir.TextDocumentSyncKind.None:!Qh.number(B.textDocumentSync)&&!Qh.number(B.textDocumentSync.change)&&(B.textDocumentSync.change=Qh.number(E.__textDocumentSync)?E.__textDocumentSync:ir.TextDocumentSyncKind.None);for(let F of h)F.fillServerCapabilities(B);return P})}else{let _={capabilities:{textDocumentSync:ir.TextDocumentSyncKind.None}};for(let S of h)S.fillServerCapabilities(_.capabilities);return _}}),i.onRequest(ir.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new ir.CancellationTokenSource().token)}),i.onNotification(ir.ExitNotification.type,()=>{try{y&&y()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(ir.SetTraceNotification.type,b=>{o.trace=ir.Trace.fromString(b.value)}),E}s(zFt,"createConnection");Fo.createConnection=zFt});var Lqe=q(Zf=>{"use strict";d();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.resolveModulePath=Zf.FileSystem=Zf.resolveGlobalYarnPath=Zf.resolveGlobalNodePath=Zf.resolve=Zf.uriToFilePath=void 0;var YFt=require("url"),Ug=require("path"),tge=require("fs"),oge=require("child_process");function KFt(t){let e=YFt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return Ug.normalize(r.join("/"))}s(KFt,"uriToFilePath");Zf.uriToFilePath=KFt;function rge(){return process.platform==="win32"}s(rge,"isWindows");function uY(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&tge.existsSync(e)&&(u[i]?u[i]=e+Ug.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,oge.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",h=>{c(h)}),f.on("message",h=>{h.c==="r"&&(f.send({c:"e"}),h.s?a(h.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(uY,"resolve");Zf.resolve=uY;function nge(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};rge()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,oge.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?rge()?Ug.join(a,"node_modules"):Ug.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(nge,"resolveGlobalNodePath");Zf.resolveGlobalNodePath=nge;function JFt(t){let e="yarn",r={encoding:"utf8"};rge()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,oge.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return Ug.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(JFt,"resolveGlobalYarnPath");Zf.resolveGlobalYarnPath=JFt;var ige;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!tge.existsSync(__filename.toUpperCase())||!tge.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?Ug.normalize(o).indexOf(Ug.normalize(i))===0:Ug.normalize(o).toLowerCase().indexOf(Ug.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(ige||(Zf.FileSystem=ige={}));function XFt(t,e,r,n){return r?(Ug.isAbsolute(r)||(r=Ug.join(t,r)),uY(e,r,r,n).then(i=>ige.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>uY(e,nge(n),t,n))):uY(e,nge(n),t,n)}s(XFt,"resolveModulePath");Zf.resolveModulePath=XFt});var sge=q(($4n,Mqe)=>{"use strict";d();Mqe.exports=pi()});var Fqe=q(dY=>{"use strict";d();Object.defineProperty(dY,"__esModule",{value:!0});dY.InlineCompletionFeature=void 0;var ZFt=pi(),eOt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(ZFt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");dY.InlineCompletionFeature=eOt});var Uqe=q(Ad=>{"use strict";d();var tOt=Ad&&Ad.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qqe=Ad&&Ad.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&tOt(e,t,r)};Object.defineProperty(Ad,"__esModule",{value:!0});Ad.ProposedFeatures=Ad.NotebookDocuments=Ad.TextDocuments=Ad.SemanticTokensBuilder=void 0;var rOt=Hme();Object.defineProperty(Ad,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return rOt.SemanticTokensBuilder},"get")});var nOt=Fqe();Qqe(pi(),Ad);var iOt=Gme();Object.defineProperty(Ad,"TextDocuments",{enumerable:!0,get:s(function(){return iOt.TextDocuments},"get")});var oOt=zme();Object.defineProperty(Ad,"NotebookDocuments",{enumerable:!0,get:s(function(){return oOt.NotebookDocuments},"get")});Qqe(ege(),Ad);var Oqe;(function(t){t.all={__brand:"features",languages:nOt.InlineCompletionFeature}})(Oqe||(Ad.ProposedFeatures=Oqe={}))});var zc=q(Uh=>{"use strict";d();var sOt=Uh&&Uh.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$qe=Uh&&Uh.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&sOt(e,t,r)};Object.defineProperty(Uh,"__esModule",{value:!0});Uh.createConnection=Uh.Files=void 0;var qqe=require("node:util"),age=Fz(),aOt=ege(),oF=Lqe(),v2=sge();$qe(sge(),Uh);$qe(Uqe(),Uh);var Hqe;(function(t){t.uriToFilePath=oF.uriToFilePath,t.resolveGlobalNodePath=oF.resolveGlobalNodePath,t.resolveGlobalYarnPath=oF.resolveGlobalYarnPath,t.resolve=oF.resolve,t.resolveModulePath=oF.resolveModulePath})(Hqe||(Uh.Files=Hqe={}));var Wqe;function fY(){if(Wqe!==void 0)try{Wqe.end()}catch{}}s(fY,"endProtocolConnection");var k3=!1,jqe;function cOt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(jqe=setInterval(()=>{try{process.kill(n,0)}catch{fY(),process.exit(k3?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(cOt,"setupExitTimer");cOt();var lOt={initialize:s(t=>{let e=t.processId;age.number(e)&&jqe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(k3?0:1)}},3e3)},"initialize"),get shutdownReceived(){return k3},set shutdownReceived(t){k3=t},exit:s(t=>{fY(),process.exit(t)},"exit")};function uOt(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),v2.ConnectionStrategy.is(t)||v2.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),dOt(o,a,c,i)}s(uOt,"createConnection");Uh.createConnection=uOt;function dOt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let h=f[p];if(h==="--node-ipc"){t=new v2.IPCMessageReader(process),e=new v2.IPCMessageWriter(process);break}else if(h==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(h==="--socket"){l=parseInt(f[p+1]);break}else if(h==="--pipe"){u=f[p+1];break}else{var o=h.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,v2.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,v2.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(age.func(t.read)&&age.func(t.on)){let l=t;l.on("end",()=>{fY(),process.exit(k3?0:1)}),l.on("close",()=>{fY(),process.exit(k3?0:1)})}let c=s(l=>{let u=(0,v2.createProtocolConnection)(t,e,l,r);return i&&fOt(l),u},"connectionFactory");return(0,aOt.createConnection)(c,lOt,n)}s(dOt,"_createConnection");function fOt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,qqe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,qqe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(fOt,"patchConsole")});var qg=q((rPn,Gqe)=>{"use strict";d();Gqe.exports=zc()});var N$e=q((l8n,B$e)=>{"use strict";d();B$e.exports=P$e;function P$e(t,e,r){t instanceof RegExp&&(t=k$e(t,r)),e instanceof RegExp&&(e=k$e(e,r));var n=D$e(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(P$e,"balanced");function k$e(t,e){var r=e.match(t);return r?r[0]:null}s(k$e,"maybeMatch");P$e.range=D$e;function D$e(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(D$e,"range")});var H$e=q((f8n,q$e)=>{d();var L$e=N$e();q$e.exports=n7t;var M$e="\0SLASH"+Math.random()+"\0",F$e="\0OPEN"+Math.random()+"\0",lAe="\0CLOSE"+Math.random()+"\0",O$e="\0COMMA"+Math.random()+"\0",Q$e="\0PERIOD"+Math.random()+"\0";function cAe(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(cAe,"numeric");function t7t(t){return t.split("\\\\").join(M$e).split("\\{").join(F$e).split("\\}").join(lAe).split("\\,").join(O$e).split("\\.").join(Q$e)}s(t7t,"escapeBraces");function r7t(t){return t.split(M$e).join("\\").split(F$e).join("{").split(lAe).join("}").split(O$e).join(",").split(Q$e).join(".")}s(r7t,"unescapeBraces");function U$e(t){if(!t)return[""];var e=[],r=L$e("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=U$e(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(U$e,"parseCommaParts");function n7t(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),gF(t7t(t),!0).map(r7t)):[]}s(n7t,"expandTop");function i7t(t){return"{"+t+"}"}s(i7t,"embrace");function o7t(t){return/^-?0\d/.test(t)}s(o7t,"isPadded");function s7t(t,e){return t<=e}s(s7t,"lte");function a7t(t,e){return t>=e}s(a7t,"gte");function gF(t,e){var r=[],n=L$e("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?gF(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+lAe+n.post,gF(t)):[t];var h;if(f)h=n.body.split(/\.\./);else if(h=U$e(n.body),h.length===1&&(h=gF(h[0],!1).map(i7t),h.length===1))return o.map(function(V){return n.pre+h[0]+V});var m;if(f){var g=cAe(h[0]),A=cAe(h[1]),y=Math.max(h[0].length,h[1].length),E=h.length==3?Math.abs(cAe(h[2])):1,b=s7t,_=A<g;_&&(E*=-1,b=a7t);var S=h.some(o7t);m=[];for(var P=g;b(P,A);P+=E){var B;if(u)B=String.fromCharCode(P),B==="\\"&&(B="");else if(B=String(P),S){var F=y-B.length;if(F>0){var Y=new Array(F+1).join("0");P<0?B="-"+Y+B.slice(1):B=Y+B}}m.push(B)}}else{m=[];for(var ee=0;ee<h.length;ee++)m.push.apply(m,gF(h[ee],!1))}for(var ee=0;ee<m.length;ee++)for(var a=0;a<o.length;a++){var c=i+m[ee]+o[a];(!e||f||c)&&r.push(c)}}return r}s(gF,"expand")});var xa=q((Pei,uze)=>{d();uze.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Ho=q((Bei,dze)=>{"use strict";d();var Oa=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},qye=class extends Oa{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Hye=class extends Oa{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},Wye=class extends Oa{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},$ye=class extends Oa{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},jye=class extends Oa{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Gye=class extends Oa{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Vye=class extends Oa{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},qJ=class extends Oa{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},zye=class extends qJ{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Yye=class extends Oa{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Kye=class extends Oa{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Jye=class extends Oa{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Xye=class extends Oa{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Zye=class extends Oa{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},eCe=class extends Oa{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},tCe=class extends Oa{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},rCe=class extends Oa{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},nCe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},iCe=class extends Oa{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},oCe=class extends Oa{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},sCe=class extends Oa{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},aCe=class extends Oa{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};dze.exports={AbortError:qJ,HTTPParserError:nCe,UndiciError:Oa,HeadersTimeoutError:Hye,HeadersOverflowError:Wye,BodyTimeoutError:$ye,RequestContentLengthMismatchError:Kye,ConnectTimeoutError:qye,ResponseStatusCodeError:jye,InvalidArgumentError:Gye,InvalidReturnValueError:Vye,RequestAbortedError:zye,ClientDestroyedError:Xye,ClientClosedError:Zye,InformationalError:Yye,SocketError:eCe,NotSupportedError:tCe,ResponseContentLengthMismatchError:Jye,BalancedPoolMissingUpstreamError:rCe,ResponseExceededMaxSizeError:iCe,RequestRetryError:oCe,ResponseError:sCe,SecureProxyConnectionError:aCe}});var WJ=q((Mei,fze)=>{"use strict";d();var HJ={},cCe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<cCe.length;++t){let e=cCe[t],r=e.toLowerCase();HJ[e]=HJ[r]=r}Object.setPrototypeOf(HJ,null);fze.exports={wellknownHeaderNames:cCe,headerNameLowerCasedRecord:HJ}});var gze=q((Oei,mze)=>{"use strict";d();var{wellknownHeaderNames:pze,headerNameLowerCasedRecord:kHt}=WJ(),lCe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},$J=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new lCe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},hze=new $J;for(let t=0;t<pze.length;++t){let e=kHt[pze[t]];hze.insert(e,e)}mze.exports={TernarySearchTree:$J,tree:hze}});var Bi=q((qei,Dze)=>{"use strict";d();var YF=require("node:assert"),{kDestroyed:yze,kBodyUsed:ED,kListeners:uCe,kBody:Aze}=xa(),{IncomingMessage:PHt}=require("node:http"),VJ=require("node:stream"),DHt=require("node:net"),{Blob:BHt}=require("node:buffer"),NHt=require("node:util"),{stringify:LHt}=require("node:querystring"),{EventEmitter:MHt}=require("node:events"),{InvalidArgumentError:Yl}=Ho(),{headerNameLowerCasedRecord:FHt}=WJ(),{tree:Cze}=gze(),[OHt,QHt]=process.versions.node.split(".").map(t=>Number(t)),GJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[Aze]=e,this[ED]=!1}async*[Symbol.asyncIterator](){YF(!this[ED],"disturbed"),this[ED]=!0,yield*this[Aze]}};function UHt(t){return zJ(t)?(Ize(t)===0&&t.on("data",function(){YF(!1)}),typeof t.readableDidRead!="boolean"&&(t[ED]=!1,MHt.prototype.on.call(t,"data",function(){this[ED]=!0})),t):t&&typeof t.pipeTo=="function"?new GJ(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&bze(t)?new GJ(t):t}s(UHt,"wrapRequestBody");function qHt(){}s(qHt,"nop");function zJ(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(zJ,"isStream");function vze(t){if(t===null)return!1;if(t instanceof BHt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(vze,"isBlobLike");function HHt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=LHt(e);return r&&(t+="?"+r),t}s(HHt,"buildURL");function Eze(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(Eze,"isValidPort");function jJ(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(jJ,"isHttpOrHttpsPrefixed");function xze(t){if(typeof t=="string"){if(t=new URL(t),!jJ(t.origin||t.protocol))throw new Yl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Yl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&Eze(t.port)===!1)throw new Yl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Yl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Yl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Yl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Yl("Invalid URL origin: the origin must be a string or null/undefined.");if(!jJ(t.origin||t.protocol))throw new Yl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!jJ(t.origin||t.protocol))throw new Yl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(xze,"parseURL");function WHt(t){if(t=xze(t),t.pathname!=="/"||t.search||t.hash)throw new Yl("invalid url");return t}s(WHt,"parseOrigin");function $Ht(t){if(t[0]==="["){let r=t.indexOf("]");return YF(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s($Ht,"getHostname");function jHt(t){if(!t)return null;YF(typeof t=="string");let e=$Ht(t);return DHt.isIP(e)?"":e}s(jHt,"getServerName");function GHt(t){return JSON.parse(JSON.stringify(t))}s(GHt,"deepClone");function VHt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(VHt,"isAsyncIterable");function bze(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(bze,"isIterable");function Ize(t){if(t==null)return 0;if(zJ(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(vze(t))return t.size!=null?t.size:null;if(_ze(t))return t.byteLength}return null}s(Ize,"bodyLength");function Tze(t){return t&&!!(t.destroyed||t[yze]||VJ.isDestroyed?.(t))}s(Tze,"isDestroyed");function zHt(t,e){t==null||!zJ(t)||Tze(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===PHt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[yze]=!0))}s(zHt,"destroy");var YHt=/timeout=(\d+)/;function KHt(t){let e=t.toString().match(YHt);return e?parseInt(e[1],10)*1e3:null}s(KHt,"parseKeepAliveTimeout");function wze(t){return typeof t=="string"?FHt[t]??t.toLowerCase():Cze.lookup(t)??t.toString("latin1").toLowerCase()}s(wze,"headerNameToString");function JHt(t){return Cze.lookup(t)??t.toString("latin1").toLowerCase()}s(JHt,"bufferToLowerCasedHeaderName");function XHt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=wze(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(XHt,"parseHeaders");function ZHt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(ZHt,"parseRawHeaders");function _ze(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(_ze,"isBuffer");function eWt(t,e,r){if(!t||typeof t!="object")throw new Yl("handler must be an object");if(typeof t.onConnect!="function")throw new Yl("invalid onConnect method");if(typeof t.onError!="function")throw new Yl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Yl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Yl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Yl("invalid onHeaders method");if(typeof t.onData!="function")throw new Yl("invalid onData method");if(typeof t.onComplete!="function")throw new Yl("invalid onComplete method")}}s(eWt,"validateHandler");function tWt(t){return!!(t&&(VJ.isDisturbed(t)||t[ED]))}s(tWt,"isDisturbed");function rWt(t){return!!(t&&VJ.isErrored(t))}s(rWt,"isErrored");function nWt(t){return!!(t&&VJ.isReadable(t))}s(nWt,"isReadable");function iWt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(iWt,"getSocketInfo");function oWt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(oWt,"ReadableStreamFrom");function sWt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(sWt,"isFormDataLike");function aWt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(aWt,"addAbortListener");var cWt=typeof String.prototype.toWellFormed=="function",lWt=typeof String.prototype.isWellFormed=="function";function Sze(t){return cWt?`${t}`.toWellFormed():NHt.toUSVString(t)}s(Sze,"toUSVString");function uWt(t){return lWt?`${t}`.isWellFormed():Sze(t)===`${t}`}s(uWt,"isUSVString");function Rze(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(Rze,"isTokenCharCode");function dWt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!Rze(t.charCodeAt(e)))return!1;return!0}s(dWt,"isValidHTTPToken");var fWt=/[^\t\x20-\x7e\x80-\xff]/;function pWt(t){return!fWt.test(t)}s(pWt,"isValidHeaderValue");function hWt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(hWt,"parseRangeHeader");function mWt(t,e,r){return(t[uCe]??=[]).push([e,r]),t.on(e,r),t}s(mWt,"addListener");function gWt(t){for(let[e,r]of t[uCe]??[])t.removeListener(e,r);t[uCe]=null}s(gWt,"removeAllListeners");function AWt(t,e,r){try{e.onError(r),YF(e.aborted)}catch(n){t.emit("error",n)}}s(AWt,"errorRequest");var kze=Object.create(null);kze.enumerable=!0;var dCe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},Pze={...dCe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(dCe,null);Object.setPrototypeOf(Pze,null);Dze.exports={kEnumerableProperty:kze,nop:qHt,isDisturbed:tWt,isErrored:rWt,isReadable:nWt,toUSVString:Sze,isUSVString:uWt,isBlobLike:vze,parseOrigin:WHt,parseURL:xze,getServerName:jHt,isStream:zJ,isIterable:bze,isAsyncIterable:VHt,isDestroyed:Tze,headerNameToString:wze,bufferToLowerCasedHeaderName:JHt,addListener:mWt,removeAllListeners:gWt,errorRequest:AWt,parseRawHeaders:ZHt,parseHeaders:XHt,parseKeepAliveTimeout:KHt,destroy:zHt,bodyLength:Ize,deepClone:GHt,ReadableStreamFrom:oWt,isBuffer:_ze,validateHandler:eWt,getSocketInfo:iWt,isFormDataLike:sWt,buildURL:HHt,addAbortListener:aWt,isValidHTTPToken:dWt,isValidHeaderValue:pWt,isTokenCharCode:Rze,parseRangeHeader:hWt,normalizedMethodRecordsBase:dCe,normalizedMethodRecords:Pze,isValidPort:Eze,isHttpOrHttpsPrefixed:jJ,nodeMajor:OHt,nodeMinor:QHt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:UHt}});var xD=q(($ei,Nze)=>{"use strict";d();var Vo=require("node:diagnostics_channel"),pCe=require("node:util"),YJ=pCe.debuglog("undici"),fCe=pCe.debuglog("fetch"),eR=pCe.debuglog("websocket"),Bze=!1,yWt={beforeConnect:Vo.channel("undici:client:beforeConnect"),connected:Vo.channel("undici:client:connected"),connectError:Vo.channel("undici:client:connectError"),sendHeaders:Vo.channel("undici:client:sendHeaders"),create:Vo.channel("undici:request:create"),bodySent:Vo.channel("undici:request:bodySent"),headers:Vo.channel("undici:request:headers"),trailers:Vo.channel("undici:request:trailers"),error:Vo.channel("undici:request:error"),open:Vo.channel("undici:websocket:open"),close:Vo.channel("undici:websocket:close"),socketError:Vo.channel("undici:websocket:socket_error"),ping:Vo.channel("undici:websocket:ping"),pong:Vo.channel("undici:websocket:pong")};if(YJ.enabled||fCe.enabled){let t=fCe.enabled?fCe:YJ;Vo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Vo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Vo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Vo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Vo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Vo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Vo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),Bze=!0}if(eR.enabled){if(!Bze){let t=YJ.enabled?YJ:eR;Vo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Vo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Vo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Vo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Vo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;eR("connection opened %s%s",e,r?`:${r}`:"")}),Vo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;eR("closed connection to %s - %s %s",e.url,r,n)}),Vo.channel("undici:websocket:socket_error").subscribe(t=>{eR("connection errored - %s",t.message)}),Vo.channel("undici:websocket:ping").subscribe(t=>{eR("ping received")}),Vo.channel("undici:websocket:pong").subscribe(t=>{eR("pong received")})}Nze.exports={channels:yWt}});var Qze=q((Gei,Oze)=>{"use strict";d();var{InvalidArgumentError:Qa,NotSupportedError:CWt}=Ho(),Kv=require("node:assert"),{isValidHTTPToken:Fze,isValidHeaderValue:Lze,isStream:vWt,destroy:EWt,isBuffer:xWt,isFormDataLike:bWt,isIterable:IWt,isBlobLike:TWt,buildURL:wWt,validateHandler:_Wt,getServerName:SWt,normalizedMethodRecords:RWt}=Bi(),{channels:fC}=xD(),{headerNameLowerCasedRecord:Mze}=WJ(),kWt=/[^\u0021-\u00ff]/,nm=Symbol("handler"),hCe=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:h,throwOnError:m,expectContinue:g,servername:A},y){if(typeof r!="string")throw new Qa("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Qa("path must be an absolute URL or start with a slash");if(kWt.test(r))throw new Qa("invalid request path");if(typeof n!="string")throw new Qa("method must be a string");if(RWt[n]===void 0&&!Fze(n))throw new Qa("invalid request method");if(u&&typeof u!="string")throw new Qa("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Qa("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Qa("invalid bodyTimeout");if(h!=null&&typeof h!="boolean")throw new Qa("invalid reset");if(g!=null&&typeof g!="boolean")throw new Qa("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=m===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(vWt(i)){this.body=i;let E=this.body._readableState;(!E||!E.autoDestroy)&&(this.endHandler=s(function(){EWt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(xWt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(bWt(i)||IWt(i)||TWt(i))this.body=i;else throw new Qa("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?wWt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=h??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Qa("headers array must be even");for(let E=0;E<o.length;E+=2)KJ(this,o[E],o[E+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let E of o){if(!Array.isArray(E)||E.length!==2)throw new Qa("headers must be in key-value pair format");KJ(this,E[0],E[1])}else{let E=Object.keys(o);for(let b=0;b<E.length;++b)KJ(this,E[b],o[E[b]])}else if(o!=null)throw new Qa("headers must be an object or an array");_Wt(y,n,u),this.servername=A||SWt(this.host),this[nm]=y,fC.create.hasSubscribers&&fC.create.publish({request:this})}onBodySent(e){if(this[nm].onBodySent)try{return this[nm].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(fC.bodySent.hasSubscribers&&fC.bodySent.publish({request:this}),this[nm].onRequestSent)try{return this[nm].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Kv(!this.aborted),Kv(!this.completed),this.error)e(this.error);else return this.abort=e,this[nm].onConnect(e)}onResponseStarted(){return this[nm].onResponseStarted?.()}onHeaders(e,r,n,i){Kv(!this.aborted),Kv(!this.completed),fC.headers.hasSubscribers&&fC.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[nm].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){Kv(!this.aborted),Kv(!this.completed);try{return this[nm].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Kv(!this.aborted),Kv(!this.completed),this[nm].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Kv(!this.aborted),this.completed=!0,fC.trailers.hasSubscribers&&fC.trailers.publish({request:this,trailers:e});try{return this[nm].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),fC.error.hasSubscribers&&fC.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[nm].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return KJ(this,e,r),this}};function KJ(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Qa(`invalid ${e} header`);if(r===void 0)return;let n=Mze[e];if(n===void 0&&(n=e.toLowerCase(),Mze[n]===void 0&&!Fze(n)))throw new Qa("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!Lze(r[o]))throw new Qa(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new Qa(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!Lze(r))throw new Qa(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new Qa("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new Qa("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Qa(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Qa("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new CWt("expect header not supported");t.headers.push(e,r)}}}s(KJ,"processHeader");Oze.exports=hCe});var KF=q((Yei,Uze)=>{"use strict";d();var PWt=require("node:events"),JJ=class extends PWt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new mCe(this,n)}},mCe=class extends JJ{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};Uze.exports=JJ});var wD=q((Xei,qze)=>{"use strict";d();var DWt=KF(),{ClientDestroyedError:gCe,ClientClosedError:BWt,InvalidArgumentError:bD}=Ho(),{kDestroy:NWt,kClose:LWt,kClosed:JF,kDestroyed:ID,kDispatch:ACe,kInterceptors:tR}=xa(),Jv=Symbol("onDestroyed"),TD=Symbol("onClosed"),XJ=Symbol("Intercepted Dispatch"),yCe=class extends DWt{static{s(this,"DispatcherBase")}constructor(){super(),this[ID]=!1,this[Jv]=null,this[JF]=!1,this[TD]=[]}get destroyed(){return this[ID]}get closed(){return this[JF]}get interceptors(){return this[tR]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[tR][r]!="function")throw new bD("interceptor must be an function")}this[tR]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new bD("invalid callback");if(this[ID]){queueMicrotask(()=>e(new gCe,null));return}if(this[JF]){this[TD]?this[TD].push(e):queueMicrotask(()=>e(null,null));return}this[JF]=!0,this[TD].push(e);let r=s(()=>{let n=this[TD];this[TD]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[LWt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new bD("invalid callback");if(this[ID]){this[Jv]?this[Jv].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new gCe),this[ID]=!0,this[Jv]=this[Jv]||[],this[Jv].push(r);let n=s(()=>{let i=this[Jv];this[Jv]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[NWt](e).then(()=>{queueMicrotask(n)})}[XJ](e,r){if(!this[tR]||this[tR].length===0)return this[XJ]=this[ACe],this[ACe](e,r);let n=this[ACe].bind(this);for(let i=this[tR].length-1;i>=0;i--)n=this[tR][i](n);return this[XJ]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new bD("handler must be an object");try{if(!e||typeof e!="object")throw new bD("opts must be an object.");if(this[ID]||this[Jv])throw new gCe;if(this[JF])throw new BWt;return this[XJ](e,r)}catch(n){if(typeof r.onError!="function")throw new bD("invalid onError method");return r.onError(n),!1}}};qze.exports=yCe});var TCe=q((tti,jze)=>{"use strict";d();var _D=0,CCe=1e3,vCe=(CCe>>1)-1,Xv,ECe=Symbol("kFastTimer"),Zv=[],xCe=-2,bCe=-1,Wze=0,Hze=1;function ICe(){_D+=vCe;let t=0,e=Zv.length;for(;t<e;){let r=Zv[t];r._state===Wze?(r._idleStart=_D-vCe,r._state=Hze):r._state===Hze&&_D>=r._idleStart+r._idleTimeout&&(r._state=bCe,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===bCe?(r._state=xCe,--e!==0&&(Zv[t]=Zv[e])):++t}Zv.length=e,Zv.length!==0&&$ze()}s(ICe,"onTick");function $ze(){Xv?Xv.refresh():(clearTimeout(Xv),Xv=setTimeout(ICe,vCe),Xv.unref&&Xv.unref())}s($ze,"refreshTimeout");var ZJ=class{static{s(this,"FastTimer")}[ECe]=!0;_state=xCe;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===xCe&&Zv.push(this),(!Xv||Zv.length===1)&&$ze(),this._state=Wze}clear(){this._state=bCe,this._idleStart=-1}};jze.exports={setTimeout(t,e,r){return e<=CCe?setTimeout(t,e,r):new ZJ(t,e,r)},clearTimeout(t){t[ECe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new ZJ(t,e,r)},clearFastTimeout(t){t.clear()},now(){return _D},tick(t=0){_D+=t-CCe+1,ICe(),ICe()},reset(){_D=0,Zv.length=0,clearTimeout(Xv),Xv=null},kFastTimer:ECe}});var XF=q((sti,Kze)=>{"use strict";d();var MWt=require("node:net"),Gze=require("node:assert"),Yze=Bi(),{InvalidArgumentError:FWt,ConnectTimeoutError:OWt}=Ho(),eX=TCe();function Vze(){}s(Vze,"noop");var wCe,_Ce;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?_Ce=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:_Ce=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function QWt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new FWt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new _Ce(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:h,servername:m,localAddress:g,httpSocket:A},y){let E;if(p==="https:"){wCe||(wCe=require("node:tls")),m=m||a.servername||Yze.getServerName(f)||null;let _=m||u;Gze(_);let S=i||c.get(_)||null;h=h||443,E=wCe.connect({highWaterMark:16384,...a,servername:m,session:S,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:A,port:h,host:u}),E.on("session",function(P){c.set(_,P)})}else Gze(!A,"httpSocket can only be sent on TLS update"),h=h||80,E=MWt.connect({highWaterMark:64*1024,...a,localAddress:g,port:h,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;E.setKeepAlive(!0,_)}let b=UWt(new WeakRef(E),{timeout:n,hostname:u,port:h});return E.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),y){let _=y;y=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(b),y){let S=y;y=null,S(_)}}),E},"connect")}s(QWt,"buildConnector");var UWt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Vze;let r=null,n=null,i=eX.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>zze(t.deref(),e))})},e.timeout);return()=>{eX.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return Vze;let r=null,n=eX.setFastTimeout(()=>{r=setImmediate(()=>{zze(t.deref(),e)})},e.timeout);return()=>{eX.clearFastTimeout(n),clearImmediate(r)}};function zze(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,Yze.destroy(t,new OWt(r))}s(zze,"onConnectTimeout");Kze.exports=QWt});var Jze=q(tX=>{"use strict";d();Object.defineProperty(tX,"__esModule",{value:!0});tX.enumToMap=void 0;function qWt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(qWt,"enumToMap");tX.enumToMap=qWt});var Xze=q(Vt=>{"use strict";d();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SPECIAL_HEADERS=Vt.HEADER_STATE=Vt.MINOR=Vt.MAJOR=Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS=Vt.TOKEN=Vt.STRICT_TOKEN=Vt.HEX=Vt.URL_CHAR=Vt.STRICT_URL_CHAR=Vt.USERINFO_CHARS=Vt.MARK=Vt.ALPHANUM=Vt.NUM=Vt.HEX_MAP=Vt.NUM_MAP=Vt.ALPHA=Vt.FINISH=Vt.H_METHOD_MAP=Vt.METHOD_MAP=Vt.METHODS_RTSP=Vt.METHODS_ICE=Vt.METHODS_HTTP=Vt.METHODS=Vt.LENIENT_FLAGS=Vt.FLAGS=Vt.TYPE=Vt.ERROR=void 0;var HWt=Jze(),WWt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(WWt=Vt.ERROR||(Vt.ERROR={}));var $Wt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})($Wt=Vt.TYPE||(Vt.TYPE={}));var jWt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(jWt=Vt.FLAGS||(Vt.FLAGS={}));var GWt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(GWt=Vt.LENIENT_FLAGS||(Vt.LENIENT_FLAGS={}));var vn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(vn=Vt.METHODS||(Vt.METHODS={}));Vt.METHODS_HTTP=[vn.DELETE,vn.GET,vn.HEAD,vn.POST,vn.PUT,vn.CONNECT,vn.OPTIONS,vn.TRACE,vn.COPY,vn.LOCK,vn.MKCOL,vn.MOVE,vn.PROPFIND,vn.PROPPATCH,vn.SEARCH,vn.UNLOCK,vn.BIND,vn.REBIND,vn.UNBIND,vn.ACL,vn.REPORT,vn.MKACTIVITY,vn.CHECKOUT,vn.MERGE,vn["M-SEARCH"],vn.NOTIFY,vn.SUBSCRIBE,vn.UNSUBSCRIBE,vn.PATCH,vn.PURGE,vn.MKCALENDAR,vn.LINK,vn.UNLINK,vn.PRI,vn.SOURCE];Vt.METHODS_ICE=[vn.SOURCE];Vt.METHODS_RTSP=[vn.OPTIONS,vn.DESCRIBE,vn.ANNOUNCE,vn.SETUP,vn.PLAY,vn.PAUSE,vn.TEARDOWN,vn.GET_PARAMETER,vn.SET_PARAMETER,vn.REDIRECT,vn.RECORD,vn.FLUSH,vn.GET,vn.POST];Vt.METHOD_MAP=HWt.enumToMap(vn);Vt.H_METHOD_MAP={};Object.keys(Vt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Vt.H_METHOD_MAP[t]=Vt.METHOD_MAP[t])});var VWt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(VWt=Vt.FINISH||(Vt.FINISH={}));Vt.ALPHA=[];for(let t=65;t<=90;t++)Vt.ALPHA.push(String.fromCharCode(t)),Vt.ALPHA.push(String.fromCharCode(t+32));Vt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Vt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Vt.NUM=["0","1","2","3","4","5","6","7","8","9"];Vt.ALPHANUM=Vt.ALPHA.concat(Vt.NUM);Vt.MARK=["-","_",".","!","~","*","'","(",")"];Vt.USERINFO_CHARS=Vt.ALPHANUM.concat(Vt.MARK).concat(["%",";",":","&","=","+","$",","]);Vt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Vt.ALPHANUM);Vt.URL_CHAR=Vt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Vt.URL_CHAR.push(t);Vt.HEX=Vt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Vt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Vt.ALPHANUM);Vt.TOKEN=Vt.STRICT_TOKEN.concat([" "]);Vt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Vt.HEADER_CHARS.push(t);Vt.CONNECTION_TOKEN_CHARS=Vt.HEADER_CHARS.filter(t=>t!==44);Vt.MAJOR=Vt.NUM_MAP;Vt.MINOR=Vt.MAJOR;var SD;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(SD=Vt.HEADER_STATE||(Vt.HEADER_STATE={}));Vt.SPECIAL_HEADERS={connection:SD.CONNECTION,"content-length":SD.CONTENT_LENGTH,"proxy-connection":SD.CONNECTION,"transfer-encoding":SD.TRANSFER_ENCODING,upgrade:SD.UPGRADE}});var SCe=q((hti,Zze)=>{"use strict";d();var{Buffer:zWt}=require("node:buffer");Zze.exports=zWt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var tYe=q((gti,eYe)=>{"use strict";d();var{Buffer:YWt}=require("node:buffer");eYe.exports=YWt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var ZF=q((yti,lYe)=>{"use strict";d();var rYe=["GET","HEAD","POST"],KWt=new Set(rYe),JWt=[101,204,205,304],nYe=[301,302,303,307,308],XWt=new Set(nYe),iYe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],ZWt=new Set(iYe),oYe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],e$t=new Set(oYe),t$t=["follow","manual","error"],sYe=["GET","HEAD","OPTIONS","TRACE"],r$t=new Set(sYe),n$t=["navigate","same-origin","no-cors","cors"],i$t=["omit","same-origin","include"],o$t=["default","no-store","reload","no-cache","force-cache","only-if-cached"],s$t=["content-encoding","content-language","content-location","content-type","content-length"],a$t=["half"],aYe=["CONNECT","TRACE","TRACK"],c$t=new Set(aYe),cYe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],l$t=new Set(cYe);lYe.exports={subresource:cYe,forbiddenMethods:aYe,requestBodyHeader:s$t,referrerPolicy:oYe,requestRedirect:t$t,requestMode:n$t,requestCredentials:i$t,requestCache:o$t,redirectStatus:nYe,corsSafeListedMethods:rYe,nullBodyStatus:JWt,safeMethods:sYe,badPorts:iYe,requestDuplex:a$t,subresourceSet:l$t,badPortsSet:ZWt,redirectStatusSet:XWt,corsSafeListedMethodsSet:KWt,safeMethodsSet:r$t,forbiddenMethodsSet:c$t,referrerPolicySet:e$t}});var kCe=q((vti,uYe)=>{"use strict";d();var RCe=Symbol.for("undici.globalOrigin.1");function u$t(){return globalThis[RCe]}s(u$t,"getGlobalOrigin");function d$t(t){if(t===void 0){Object.defineProperty(globalThis,RCe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,RCe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(d$t,"setGlobalOrigin");uYe.exports={getGlobalOrigin:u$t,setGlobalOrigin:d$t}});var o0=q((bti,AYe)=>{"use strict";d();var nX=require("node:assert"),f$t=new TextEncoder,eO=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,p$t=/[\u000A\u000D\u0009\u0020]/,h$t=/[\u0009\u000A\u000C\u000D\u0020]/g,m$t=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function g$t(t){nX(t.protocol==="data:");let e=pYe(t,!0);e=e.slice(5);let r={position:0},n=RD(",",e,r),i=n.length;if(n=x$t(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=hYe(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=gYe(a);if(a=y$t(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=PCe(n);return c==="failure"&&(c=PCe("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(g$t,"dataURLProcessor");function pYe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(pYe,"URLSerializer");function iX(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(iX,"collectASequenceOfCodePoints");function RD(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(RD,"collectASequenceOfCodePointsFast");function hYe(t){let e=f$t.encode(t);return A$t(e)}s(hYe,"stringPercentDecode");function dYe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(dYe,"isHexCharByte");function fYe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(fYe,"hexByteToNumber");function A$t(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(dYe(t[i+1])&&dYe(t[i+2]))?r[n++]=37:(r[n++]=fYe(t[i+1])<<4|fYe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(A$t,"percentDecode");function PCe(t){t=rX(t,!0,!0);let e={position:0},r=RD("/",t,e);if(r.length===0||!eO.test(r)||e.position>t.length)return"failure";e.position++;let n=RD(";",t,e);if(n=rX(n,!1,!0),n.length===0||!eO.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,iX(u=>p$t.test(u),t,e);let c=iX(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=mYe(t,e,!0),RD(";",t,e);else if(l=RD(";",t,e),l=rX(l,!1,!0),l.length===0)continue;c.length!==0&&eO.test(c)&&(l.length===0||m$t.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(PCe,"parseMIMEType");function y$t(t){t=t.replace(h$t,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(y$t,"forgivingBase64");function mYe(t,e,r){let n=e.position,i="";for(nX(t[e.position]==='"'),e.position++;i+=iX(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{nX(o==='"');break}}return r?i:t.slice(n,e.position)}s(mYe,"collectAnHTTPQuotedString");function C$t(t){nX(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",eO.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(C$t,"serializeAMimeType");function v$t(t){return t===13||t===10||t===9||t===32}s(v$t,"isHTTPWhiteSpace");function rX(t,e=!0,r=!0){return DCe(t,e,r,v$t)}s(rX,"removeHTTPWhitespace");function E$t(t){return t===13||t===10||t===9||t===12||t===32}s(E$t,"isASCIIWhitespace");function x$t(t,e=!0,r=!0){return DCe(t,e,r,E$t)}s(x$t,"removeASCIIWhitespace");function DCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(DCe,"removeChars");function gYe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(gYe,"isomorphicDecode");function b$t(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(b$t,"minimizeSupportedMimeType");AYe.exports={dataURLProcessor:g$t,URLSerializer:pYe,collectASequenceOfCodePoints:iX,collectASequenceOfCodePointsFast:RD,stringPercentDecode:hYe,parseMIMEType:PCe,collectAnHTTPQuotedString:mYe,serializeAMimeType:C$t,removeChars:DCe,removeHTTPWhitespace:rX,minimizeSupportedMimeType:b$t,HTTP_TOKEN_CODEPOINTS:eO,isomorphicDecode:gYe}});var Lu=q((wti,yYe)=>{"use strict";d();var{types:pC,inspect:I$t}=require("node:util"),{markAsUncloneable:T$t}=require("node:worker_threads"),{toUSVString:w$t}=Bi(),qt={};qt.converters={};qt.util={};qt.errors={};qt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};qt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return qt.errors.exception({header:t.prefix,message:r})};qt.errors.invalidArgument=function(t){return qt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};qt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};qt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw qt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};qt.illegalConstructor=function(){throw qt.errors.exception({header:"TypeError",message:"Illegal constructor"})};qt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};qt.util.markAsUncloneable=T$t||(()=>{});qt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw qt.errors.exception({header:"Integer conversion",message:`Could not convert ${qt.util.Stringify(t)} to an integer.`});if(a=qt.util.IntegerPart(a),a<o||a>i)throw qt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=qt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};qt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};qt.util.Stringify=function(t){switch(qt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return I$t(t);case"String":return`"${t}"`;default:return`${t}`}};qt.sequenceConverter=function(t){return(e,r,n,i)=>{if(qt.util.Type(e)!=="Object")throw qt.errors.exception({header:r,message:`${n} (${qt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw qt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};qt.recordConverter=function(t,e){return(r,n,i)=>{if(qt.util.Type(r)!=="Object")throw qt.errors.exception({header:n,message:`${i} ("${qt.util.Type(r)}") is not an Object.`});let o={};if(!pC.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};qt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw qt.errors.exception({header:r,message:`Expected ${n} ("${qt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};qt.dictionaryConverter=function(t){return(e,r,n)=>{let i=qt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw qt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw qt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],h=Object.hasOwn(a,"defaultValue");if(h&&p!==null&&(p??=l()),u||h||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw qt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};qt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};qt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw qt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};qt.converters.ByteString=function(t,e,r){let n=qt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};qt.converters.USVString=w$t;qt.converters.boolean=function(t){return!!t};qt.converters.any=function(t){return t};qt.converters["long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"signed",void 0,e,r)};qt.converters["unsigned long long"]=function(t,e,r){return qt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};qt.converters["unsigned long"]=function(t,e,r){return qt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};qt.converters["unsigned short"]=function(t,e,r,n){return qt.util.ConvertToInt(t,16,"unsigned",n,e,r)};qt.converters.ArrayBuffer=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!pC.isAnyArrayBuffer(t))throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&pC.isSharedArrayBuffer(t))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.TypedArray=function(t,e,r,n,i){if(qt.util.Type(t)!=="Object"||!pC.isTypedArray(t)||t.constructor.name!==e.name)throw qt.errors.conversionFailed({prefix:r,argument:`${n} ("${qt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&pC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.DataView=function(t,e,r,n){if(qt.util.Type(t)!=="Object"||!pC.isDataView(t))throw qt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&pC.isSharedArrayBuffer(t.buffer))throw qt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw qt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};qt.converters.BufferSource=function(t,e,r,n){if(pC.isAnyArrayBuffer(t))return qt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(pC.isTypedArray(t))return qt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(pC.isDataView(t))return qt.converters.DataView(t,e,r,{...n,allowShared:!1});throw qt.errors.conversionFailed({prefix:e,argument:`${r} ("${qt.util.Stringify(t)}")`,types:["BufferSource"]})};qt.converters["sequence<ByteString>"]=qt.sequenceConverter(qt.converters.ByteString);qt.converters["sequence<sequence<ByteString>>"]=qt.sequenceConverter(qt.converters["sequence<ByteString>"]);qt.converters["record<ByteString, ByteString>"]=qt.recordConverter(qt.converters.ByteString,qt.converters.ByteString);yYe.exports={webidl:qt}});var yp=q((Sti,DYe)=>{"use strict";d();var{Transform:_$t}=require("node:stream"),CYe=require("node:zlib"),{redirectStatusSet:S$t,referrerPolicySet:R$t,badPortsSet:k$t}=ZF(),{getGlobalOrigin:vYe}=kCe(),{collectASequenceOfCodePoints:rR,collectAnHTTPQuotedString:P$t,removeChars:D$t,parseMIMEType:B$t}=o0(),{performance:N$t}=require("node:perf_hooks"),{isBlobLike:L$t,ReadableStreamFrom:M$t,isValidHTTPToken:EYe,normalizedMethodRecordsBase:F$t}=Bi(),nR=require("node:assert"),{isUint8Array:O$t}=require("node:util/types"),{webidl:tO}=Lu(),xYe=[],sX;try{sX=require("node:crypto");let t=["sha256","sha384","sha512"];xYe=sX.getHashes().filter(e=>t.includes(e))}catch{}function bYe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(bYe,"responseURL");function Q$t(t,e){if(!S$t.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&TYe(r)&&(IYe(r)||(r=U$t(r)),r=new URL(r,bYe(t))),r&&!r.hash&&(r.hash=e),r}s(Q$t,"responseLocationURL");function IYe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(IYe,"isValidEncodedURL");function U$t(t){return Buffer.from(t,"binary").toString("utf8")}s(U$t,"normalizeBinaryStringToUtf8");function nO(t){return t.urlList[t.urlList.length-1]}s(nO,"requestCurrentURL");function q$t(t){let e=nO(t);return kYe(e)&&k$t.has(e.port)?"blocked":"allowed"}s(q$t,"requestBadPort");function H$t(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(H$t,"isErrorLike");function W$t(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(W$t,"isValidReasonPhrase");var $$t=EYe;function TYe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(TYe,"isValidHeaderValue");function j$t(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(R$t.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(j$t,"setRequestReferrerPolicyOnRedirect");function G$t(){return"allowed"}s(G$t,"crossOriginResourcePolicyCheck");function V$t(){return"success"}s(V$t,"corsCheck");function z$t(){return"success"}s(z$t,"TAOCheck");function Y$t(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(Y$t,"appendFetchMetadata");function K$t(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&NCe(t.origin)&&!NCe(nO(t))&&(e=null);break;case"same-origin":aX(t,nO(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(K$t,"appendRequestOriginHeader");function kD(t,e){return t}s(kD,"coarsenTime");function J$t(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:kD(t.domainLookupStartTime,r),domainLookupEndTime:kD(t.domainLookupEndTime,r),connectionStartTime:kD(t.connectionStartTime,r),connectionEndTime:kD(t.connectionEndTime,r),secureConnectionStartTime:kD(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(J$t,"clampAndCoarsenConnectionTimingInfo");function X$t(t){return kD(N$t.now(),t)}s(X$t,"coarsenedSharedCurrentTime");function Z$t(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(Z$t,"createOpaqueTimingInfo");function wYe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(wYe,"makePolicyContainer");function ejt(t){return{referrerPolicy:t.referrerPolicy}}s(ejt,"clonePolicyContainer");function tjt(t){let e=t.referrerPolicy;nR(e);let r=null;if(t.referrer==="client"){let c=vYe();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=BCe(r),i=BCe(r,!0);n.toString().length>4096&&(n=i);let o=aX(t,n),a=rO(n)&&!rO(t.url);switch(e){case"origin":return i??BCe(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=nO(t);return aX(n,c)?n:rO(n)&&!rO(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(tjt,"determineRequestsReferrer");function BCe(t,e){return nR(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(BCe,"stripURLForReferrer");function rO(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(rO,"isURLPotentiallyTrustworthy");function rjt(t,e){if(sX===void 0)return!0;let r=_Ye(e);if(r==="no metadata"||r.length===0)return!0;let n=ijt(r),i=ojt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=sX.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),sjt(l,c))return!0}return!1}s(rjt,"bytesMatch");var njt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function _Ye(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=njt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();xYe.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(_Ye,"parseMetadata");function ijt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(ijt,"getStrongestMetadata");function ojt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(ojt,"filterMetadataListByAlgorithm");function sjt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(sjt,"compareBase64Mixed");function ajt(t){}s(ajt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function aX(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(aX,"sameOrigin");function cjt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(cjt,"createDeferredPromise");function ljt(t){return t.controller.state==="aborted"}s(ljt,"isAborted");function ujt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(ujt,"isCancelled");function djt(t){return F$t[t.toLowerCase()]??t}s(djt,"normalizeMethod");function fjt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return nR(typeof e=="string"),e}s(fjt,"serializeJavascriptValueToJSONString");var pjt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function SYe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,pjt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(SYe,"createIterator");function hjt(t,e,r,n=0,i=1){let o=SYe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return tO.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return tO.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return tO.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(tO.brandCheck(this,e),tO.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(hjt,"iteratorMixin");async function mjt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await RYe(o))}catch(a){i(a)}}s(mjt,"fullyReadBody");function gjt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(gjt,"isReadableStreamLike");function Ajt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(Ajt,"readableStreamClose");var yjt=/[^\x00-\xFF]/;function oX(t){return nR(!yjt.test(t)),t}s(oX,"isomorphicEncode");async function RYe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!O$t(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(RYe,"readAllBytes");function Cjt(t){nR("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(Cjt,"urlIsLocal");function NCe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(NCe,"urlHasHttpsScheme");function kYe(t){nR("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(kYe,"urlIsHttpHttpsScheme");function vjt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&rR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&rR(l=>l==="	"||l===" ",r,n);let i=rR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&rR(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&rR(l=>l==="	"||l===" ",r,n);let a=rR(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(vjt,"simpleRangeHeaderValue");function Ejt(t,e,r){let n="bytes ";return n+=oX(`${t}`),n+="-",n+=oX(`${e}`),n+="/",n+=oX(`${r}`),n}s(Ejt,"buildContentRange");var LCe=class extends _$t{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?CYe.createInflate(this.#e):CYe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function xjt(t){return new LCe(t)}s(xjt,"createInflate");function bjt(t){let e=null,r=null,n=null,i=PYe("content-type",t);if(i===null)return"failure";for(let o of i){let a=B$t(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(bjt,"extractMimeType");function Ijt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=rR(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=P$t(e,r),r.position<e.length)continue}else nR(e.charCodeAt(r.position)===44),r.position++;i=D$t(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(Ijt,"gettingDecodingSplitting");function PYe(t,e){let r=e.get(t,!0);return r===null?null:Ijt(r)}s(PYe,"getDecodeSplit");var Tjt=new TextDecoder;function wjt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),Tjt.decode(t))}s(wjt,"utf8DecodeBytes");var MCe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return vYe()}get origin(){return this.baseUrl?.origin}policyContainer=wYe()},FCe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new MCe},_jt=new FCe;DYe.exports={isAborted:ljt,isCancelled:ujt,isValidEncodedURL:IYe,createDeferredPromise:cjt,ReadableStreamFrom:M$t,tryUpgradeRequestToAPotentiallyTrustworthyURL:ajt,clampAndCoarsenConnectionTimingInfo:J$t,coarsenedSharedCurrentTime:X$t,determineRequestsReferrer:tjt,makePolicyContainer:wYe,clonePolicyContainer:ejt,appendFetchMetadata:Y$t,appendRequestOriginHeader:K$t,TAOCheck:z$t,corsCheck:V$t,crossOriginResourcePolicyCheck:G$t,createOpaqueTimingInfo:Z$t,setRequestReferrerPolicyOnRedirect:j$t,isValidHTTPToken:EYe,requestBadPort:q$t,requestCurrentURL:nO,responseURL:bYe,responseLocationURL:Q$t,isBlobLike:L$t,isURLPotentiallyTrustworthy:rO,isValidReasonPhrase:W$t,sameOrigin:aX,normalizeMethod:djt,serializeJavascriptValueToJSONString:fjt,iteratorMixin:hjt,createIterator:SYe,isValidHeaderName:$$t,isValidHeaderValue:TYe,isErrorLike:H$t,fullyReadBody:mjt,bytesMatch:rjt,isReadableStreamLike:gjt,readableStreamClose:Ajt,isomorphicEncode:oX,urlIsLocal:Cjt,urlHasHttpsScheme:NCe,urlIsHttpHttpsScheme:kYe,readAllBytes:RYe,simpleRangeHeaderValue:vjt,buildContentRange:Ejt,parseMetadata:_Ye,createInflate:xjt,extractMimeType:bjt,getDecodeSplit:PYe,utf8DecodeBytes:wjt,environmentSettingsObject:_jt}});var cT=q((Pti,BYe)=>{"use strict";d();BYe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var QCe=q((Bti,NYe)=>{"use strict";d();var{Blob:Sjt,File:Rjt}=require("node:buffer"),{kState:eE}=cT(),{webidl:hC}=Lu(),OCe=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[eE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return hC.brandCheck(this,t),this[eE].blobLike.stream(...e)}arrayBuffer(...e){return hC.brandCheck(this,t),this[eE].blobLike.arrayBuffer(...e)}slice(...e){return hC.brandCheck(this,t),this[eE].blobLike.slice(...e)}text(...e){return hC.brandCheck(this,t),this[eE].blobLike.text(...e)}get size(){return hC.brandCheck(this,t),this[eE].blobLike.size}get type(){return hC.brandCheck(this,t),this[eE].blobLike.type}get name(){return hC.brandCheck(this,t),this[eE].name}get lastModified(){return hC.brandCheck(this,t),this[eE].lastModified}get[Symbol.toStringTag](){return"File"}};hC.converters.Blob=hC.interfaceConverter(Sjt);function kjt(t){return t instanceof Rjt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(kjt,"isFileLike");NYe.exports={FileLike:OCe,isFileLike:kjt}});var oO=q((Mti,QYe)=>{"use strict";d();var{isBlobLike:cX,iteratorMixin:Pjt}=yp(),{kState:af}=cT(),{kEnumerableProperty:PD}=Bi(),{FileLike:LYe,isFileLike:Djt}=QCe(),{webidl:Bs}=Lu(),{File:OYe}=require("node:buffer"),MYe=require("node:util"),FYe=globalThis.File??OYe,iO=class t{static{s(this,"FormData")}constructor(e){if(Bs.util.markAsUncloneable(this),e!==void 0)throw Bs.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[af]=[]}append(e,r,n=void 0){Bs.brandCheck(this,t);let i="FormData.append";if(Bs.argumentLengthCheck(arguments,2,i),arguments.length===3&&!cX(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Bs.converters.USVString(e,i,"name"),r=cX(r)?Bs.converters.Blob(r,i,"value",{strict:!1}):Bs.converters.USVString(r,i,"value"),n=arguments.length===3?Bs.converters.USVString(n,i,"filename"):void 0;let o=UCe(e,r,n);this[af].push(o)}delete(e){Bs.brandCheck(this,t);let r="FormData.delete";Bs.argumentLengthCheck(arguments,1,r),e=Bs.converters.USVString(e,r,"name"),this[af]=this[af].filter(n=>n.name!==e)}get(e){Bs.brandCheck(this,t);let r="FormData.get";Bs.argumentLengthCheck(arguments,1,r),e=Bs.converters.USVString(e,r,"name");let n=this[af].findIndex(i=>i.name===e);return n===-1?null:this[af][n].value}getAll(e){Bs.brandCheck(this,t);let r="FormData.getAll";return Bs.argumentLengthCheck(arguments,1,r),e=Bs.converters.USVString(e,r,"name"),this[af].filter(n=>n.name===e).map(n=>n.value)}has(e){Bs.brandCheck(this,t);let r="FormData.has";return Bs.argumentLengthCheck(arguments,1,r),e=Bs.converters.USVString(e,r,"name"),this[af].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Bs.brandCheck(this,t);let i="FormData.set";if(Bs.argumentLengthCheck(arguments,2,i),arguments.length===3&&!cX(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Bs.converters.USVString(e,i,"name"),r=cX(r)?Bs.converters.Blob(r,i,"name",{strict:!1}):Bs.converters.USVString(r,i,"name"),n=arguments.length===3?Bs.converters.USVString(n,i,"name"):void 0;let o=UCe(e,r,n),a=this[af].findIndex(c=>c.name===e);a!==-1?this[af]=[...this[af].slice(0,a),o,...this[af].slice(a+1).filter(c=>c.name!==e)]:this[af].push(o)}[MYe.inspect.custom](e,r){let n=this[af].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=MYe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};Pjt("FormData",iO,af,"name","value");Object.defineProperties(iO.prototype,{append:PD,delete:PD,get:PD,getAll:PD,has:PD,set:PD,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function UCe(t,e,r){if(typeof e!="string"){if(Djt(e)||(e=e instanceof Blob?new FYe([e],"blob",{type:e.type}):new LYe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof OYe?new FYe([e],r,n):new LYe(e,r,n)}}return{name:t,value:e}}s(UCe,"makeEntry");QYe.exports={FormData:iO,makeEntry:UCe}});var jYe=q((Qti,$Ye)=>{"use strict";d();var{isUSVString:UYe,bufferToLowerCasedHeaderName:Bjt}=Bi(),{utf8DecodeBytes:Njt}=yp(),{HTTP_TOKEN_CODEPOINTS:Ljt,isomorphicDecode:qYe}=o0(),{isFileLike:Mjt}=QCe(),{makeEntry:Fjt}=oO(),lX=require("node:assert"),{File:Ojt}=require("node:buffer"),Qjt=globalThis.File??Ojt,Ujt=Buffer.from('form-data; name="'),HYe=Buffer.from("; filename"),qjt=Buffer.from("--"),Hjt=Buffer.from(`--\r
`);function Wjt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(Wjt,"isAsciiString");function $jt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s($jt,"validateBoundary");function jjt(t,e){lX(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&uX(t,qjt,o)||o.position===t.length-4&&uX(t,Hjt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=Gjt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let h;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";h=t.subarray(o.position,g-4),o.position+=h.length,p==="base64"&&(h=Buffer.from(h.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let m;u!==null?(f??="text/plain",Wjt(f)||(f=""),m=new Qjt([h],u,{type:f})):m=Njt(Buffer.from(h)),lX(UYe(l)),lX(typeof m=="string"&&UYe(m)||Mjt(m)),i.push(Fjt(l,m,u))}}s(jjt,"multipartFormDataParser");function Gjt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=DD(c=>c!==10&&c!==13&&c!==58,t,e);if(a=qCe(a,!0,!0,c=>c===9||c===32),!Ljt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,DD(c=>c===32||c===9,t,e),Bjt(a)){case"content-disposition":{if(r=n=null,!uX(t,Ujt,e)||(e.position+=17,r=WYe(t,e),r===null))return"failure";if(uX(t,HYe,e)){let c=e.position+HYe.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=WYe(t,e),n===null))return"failure"}break}case"content-type":{let c=DD(l=>l!==10&&l!==13,t,e);c=qCe(c,!1,!0,l=>l===9||l===32),i=qYe(c);break}case"content-transfer-encoding":{let c=DD(l=>l!==10&&l!==13,t,e);c=qCe(c,!1,!0,l=>l===9||l===32),o=qYe(c);break}default:DD(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(Gjt,"parseMultipartFormDataHeaders");function WYe(t,e){lX(t[e.position-1]===34);let r=DD(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(WYe,"parseMultipartFormDataName");function DD(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(DD,"collectASequenceOfBytes");function qCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(qCe,"removeChars");function uX(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(uX,"bufferStartsWith");$Ye.exports={multipartFormDataParser:jjt,validateBoundary:$jt}});var LD=q((Hti,ZYe)=>{"use strict";d();var sO=Bi(),{ReadableStreamFrom:Vjt,isBlobLike:GYe,isReadableStreamLike:zjt,readableStreamClose:Yjt,createDeferredPromise:Kjt,fullyReadBody:Jjt,extractMimeType:Xjt,utf8DecodeBytes:YYe}=yp(),{FormData:VYe}=oO(),{kState:ND}=cT(),{webidl:Zjt}=Lu(),{Blob:eGt}=require("node:buffer"),HCe=require("node:assert"),{isErrored:KYe,isDisturbed:tGt}=require("node:stream"),{isArrayBuffer:rGt}=require("node:util/types"),{serializeAMimeType:nGt}=o0(),{multipartFormDataParser:iGt}=jYe(),WCe;try{let t=require("node:crypto");WCe=s(e=>t.randomInt(0,e),"random")}catch{WCe=s(t=>Math.floor(Math.random(t)),"random")}var dX=new TextEncoder;function oGt(){}s(oGt,"noop");var $Ce=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,jCe;$Ce&&(jCe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!tGt(e)&&!KYe(e)&&e.cancel("Response object has been garbage collected").catch(oGt)}));function JYe(t,e=!1){let r=null;t instanceof ReadableStream?r=t:GYe(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?dX.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>Yjt(l))},start(){},type:"bytes"}),HCe(zjt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(rGt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(sO.isFormDataLike(t)){let l=`----formdata-undici-0${`${WCe(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(y=>y.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),h=[],m=new Uint8Array([13,10]);o=0;let g=!1;for(let[y,E]of t)if(typeof E=="string"){let b=dX.encode(u+`; name="${f(p(y))}"\r
\r
${p(E)}\r
`);h.push(b),o+=b.byteLength}else{let b=dX.encode(`${u}; name="${f(p(y))}"`+(E.name?`; filename="${f(E.name)}"`:"")+`\r
Content-Type: ${E.type||"application/octet-stream"}\r
\r
`);h.push(b,E,m),typeof E.size=="number"?o+=b.byteLength+E.size+m.byteLength:g=!0}let A=dX.encode(`--${l}--\r
`);h.push(A),o+=A.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let y of h)y.stream?yield*y.stream():yield y},"action"),a=`multipart/form-data; boundary=${l}`}else if(GYe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(sO.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:Vjt(t)}if((typeof i=="string"||sO.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!KYe(r)){let h=new Uint8Array(f);h.byteLength&&u.enqueue(h)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(JYe,"extractBody");function sGt(t,e=!1){return t instanceof ReadableStream&&(HCe(!sO.isDisturbed(t),"The body has already been consumed."),HCe(!t.locked,"The stream is locked.")),JYe(t,e)}s(sGt,"safelyExtractBody");function aGt(t,e){let[r,n]=e.stream.tee();return $Ce&&jCe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(aGt,"cloneBody");function cGt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(cGt,"throwIfAborted");function lGt(t){return{blob(){return BD(this,r=>{let n=zYe(this);return n===null?n="":n&&(n=nGt(n)),new eGt([r],{type:n})},t)},arrayBuffer(){return BD(this,r=>new Uint8Array(r).buffer,t)},text(){return BD(this,YYe,t)},json(){return BD(this,dGt,t)},formData(){return BD(this,r=>{let n=zYe(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=iGt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new VYe;return o[ND]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new VYe;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return BD(this,r=>new Uint8Array(r),t)}}}s(lGt,"bodyMixinMethods");function uGt(t){Object.assign(t.prototype,lGt(t))}s(uGt,"mixinBody");async function BD(t,e,r){if(Zjt.brandCheck(t,r),XYe(t))throw new TypeError("Body is unusable: Body has already been read");cGt(t[ND]);let n=Kjt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[ND].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await Jjt(t[ND].body,o,i),n.promise)}s(BD,"consumeBody");function XYe(t){let e=t[ND].body;return e!=null&&(e.stream.locked||sO.isDisturbed(e.stream))}s(XYe,"bodyUnusable");function dGt(t){return JSON.parse(YYe(t))}s(dGt,"parseJSONFromBytes");function zYe(t){let e=t[ND].headersList,r=Xjt(e);return r==="failure"?null:r}s(zYe,"bodyMimeType");ZYe.exports={extractBody:JYe,safelyExtractBody:sGt,cloneBody:aGt,mixinBody:uGt,streamRegistry:jCe,hasFinalizationRegistry:$Ce,bodyUnusable:XYe}});var uKe=q((jti,lKe)=>{"use strict";d();var Rn=require("node:assert"),oi=Bi(),{channels:eKe}=xD(),GCe=TCe(),{RequestContentLengthMismatchError:iR,ResponseContentLengthMismatchError:fGt,RequestAbortedError:sKe,HeadersTimeoutError:pGt,HeadersOverflowError:hGt,SocketError:AX,InformationalError:MD,BodyTimeoutError:mGt,HTTPParserError:gGt,ResponseExceededMaxSizeError:AGt}=Ho(),{kUrl:aKe,kReset:s0,kClient:KCe,kParser:Ka,kBlocking:lO,kRunning:Cd,kPending:yGt,kSize:tKe,kWriting:uT,kQueue:Xg,kNoRef:aO,kKeepAliveDefaultTimeout:CGt,kHostHeader:vGt,kPendingIdx:EGt,kRunningIdx:im,kError:om,kPipelining:mX,kSocket:FD,kKeepAliveTimeoutValue:yX,kMaxHeadersSize:VCe,kKeepAliveMaxTimeout:xGt,kKeepAliveTimeoutThreshold:bGt,kHeadersTimeout:IGt,kBodyTimeout:TGt,kStrictContentLength:JCe,kMaxRequests:rKe,kCounter:wGt,kMaxResponseSize:_Gt,kOnError:SGt,kResume:lT,kHTTPContext:cKe}=xa(),mC=Xze(),RGt=Buffer.alloc(0),fX=Buffer[Symbol.species],pX=oi.addListener,kGt=oi.removeAllListeners,zCe;async function PGt(){let t=process.env.JEST_WORKER_ID?SCe():void 0,e;try{e=await WebAssembly.compile(tYe())}catch{e=await WebAssembly.compile(t||SCe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Rn(Cl.ptr===r);let o=n-AC+gC.byteOffset;return Cl.onStatus(new fX(gC.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Rn(Cl.ptr===r),Cl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Rn(Cl.ptr===r);let o=n-AC+gC.byteOffset;return Cl.onHeaderField(new fX(gC.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Rn(Cl.ptr===r);let o=n-AC+gC.byteOffset;return Cl.onHeaderValue(new fX(gC.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Rn(Cl.ptr===r),Cl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Rn(Cl.ptr===r);let o=n-AC+gC.byteOffset;return Cl.onBody(new fX(gC.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Rn(Cl.ptr===r),Cl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(PGt,"lazyllhttp");var YCe=null,XCe=PGt();XCe.catch();var Cl=null,gC=null,hX=0,AC=null,DGt=0,cO=1,OD=2|cO,gX=4|cO,ZCe=8|DGt,e1e=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Rn(Number.isFinite(e[VCe])&&e[VCe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(mC.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[VCe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[_Gt]}setTimeout(e,r){e!==this.timeoutValue||r&cO^this.timeoutType&cO?(this.timeout&&(GCe.clearTimeout(this.timeout),this.timeout=null),e&&(r&cO?this.timeout=GCe.setFastTimeout(nKe,e,new WeakRef(this)):(this.timeout=setTimeout(nKe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Rn(this.ptr!=null),Rn(Cl==null),this.llhttp.llhttp_resume(this.ptr),Rn(this.timeoutType===gX),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||RGt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Rn(this.ptr!=null),Rn(Cl==null),Rn(!this.paused);let{socket:r,llhttp:n}=this;e.length>hX&&(AC&&n.free(AC),hX=Math.ceil(e.length/4096)*4096,AC=n.malloc(hX)),new Uint8Array(n.memory.buffer,AC,hX).set(e);try{let i;try{gC=e,Cl=this,i=n.llhttp_execute(this.ptr,AC,e.length)}catch(a){throw a}finally{Cl=null,gC=null}let o=n.llhttp_get_error_pos(this.ptr)-AC;if(i===mC.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===mC.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==mC.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new gGt(c,mC.ERROR[i],e.slice(o))}}catch(i){oi.destroy(r,i)}}destroy(){Rn(this.ptr!=null),Rn(Cl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&GCe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[Xg][r[im]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=oi.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&oi.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&oi.destroy(this.socket,new hGt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Rn(r),Rn(n[FD]===i),Rn(!i.destroyed),Rn(!this.paused),Rn((o.length&1)===0);let c=n[Xg][n[im]];Rn(c),Rn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[Ka].destroy(),i[Ka]=null,i[KCe]=null,i[om]=null,kGt(i),n[FD]=null,n[cKe]=null,n[Xg][n[im]++]=null,n.emit("disconnect",n[aKe],[n],new MD("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){oi.destroy(i,l)}n[lT]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[Xg][i[im]];if(!l)return-1;if(Rn(!this.upgrade),Rn(this.statusCode<200),e===100)return oi.destroy(o,new AX("bad response",oi.getSocketInfo(o))),-1;if(r&&!l.upgrade)return oi.destroy(o,new AX("bad upgrade",oi.getSocketInfo(o))),-1;if(Rn(this.timeoutType===OD),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[s0]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[TGt];this.setTimeout(f,gX)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Rn(i[Cd]===1),this.upgrade=!0,2;if(r)return Rn(i[Cd]===1),this.upgrade=!0,2;if(Rn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[mX]){let f=this.keepAlive?oi.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[bGt],i[xGt]);p<=0?o[s0]=!0:i[yX]=p}else i[yX]=i[CGt]}else o[s0]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[lO]&&(o[lO]=!1,i[lT]()),u?mC.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[Xg][r[im]];if(Rn(a),Rn(this.timeoutType===gX),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Rn(i>=200),o>-1&&this.bytesRead+e.length>o)return oi.destroy(n,new AGt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return mC.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Rn(n>=100),Rn((this.headers.length&1)===0);let u=e[Xg][e[im]];if(Rn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return oi.destroy(r,new fGt),-1;if(u.onComplete(o),e[Xg][e[im]++]=null,r[uT])return Rn(e[Cd]===0),oi.destroy(r,new MD("reset")),mC.ERROR.PAUSED;if(l){if(r[s0]&&e[Cd]===0)return oi.destroy(r,new MD("reset")),mC.ERROR.PAUSED;e[mX]==null||e[mX]===1?setImmediate(()=>e[lT]()):e[lT]()}else return oi.destroy(r,new MD("reset")),mC.ERROR.PAUSED}}};function nKe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===OD?(!e[uT]||e.writableNeedDrain||n[Cd]>1)&&(Rn(!i,"cannot be paused while waiting for headers"),oi.destroy(e,new pGt)):r===gX?i||oi.destroy(e,new mGt):r===ZCe&&(Rn(n[Cd]===0&&n[yX]),oi.destroy(e,new MD("socket idle timeout")))}s(nKe,"onParserTimeout");async function BGt(t,e){t[FD]=e,YCe||(YCe=await XCe,XCe=null),e[aO]=!1,e[uT]=!1,e[s0]=!1,e[lO]=!1,e[Ka]=new e1e(t,e,YCe),pX(e,"error",function(n){Rn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[Ka];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[om]=n,this[KCe][SGt](n)}),pX(e,"readable",function(){let n=this[Ka];n&&n.readMore()}),pX(e,"end",function(){let n=this[Ka];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}oi.destroy(this,new AX("other side closed",oi.getSocketInfo(this)))}),pX(e,"close",function(){let n=this[KCe],i=this[Ka];i&&(!this[om]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[Ka].destroy(),this[Ka]=null);let o=this[om]||new AX("closed",oi.getSocketInfo(this));if(n[FD]=null,n[cKe]=null,n.destroyed){Rn(n[yGt]===0);let a=n[Xg].splice(n[im]);for(let c=0;c<a.length;c++){let l=a[c];oi.errorRequest(n,l,o)}}else if(n[Cd]>0&&o.code!=="UND_ERR_INFO"){let a=n[Xg][n[im]];n[Xg][n[im]++]=null,oi.errorRequest(n,a,o)}n[EGt]=n[im],Rn(n[Cd]===0),n.emit("disconnect",n[aKe],[n],o),n[lT]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return MGt(t,...n)},resume(){NGt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[uT]||e[s0]||e[lO]||n&&(t[Cd]>0&&!n.idempotent||t[Cd]>0&&(n.upgrade||n.method==="CONNECT")||t[Cd]>0&&oi.bodyLength(n.body)!==0&&(oi.isStream(n.body)||oi.isAsyncIterable(n.body)||oi.isFormDataLike(n.body))))}}}s(BGt,"connectH1");function NGt(t){let e=t[FD];if(e&&!e.destroyed){if(t[tKe]===0?!e[aO]&&e.unref&&(e.unref(),e[aO]=!0):e[aO]&&e.ref&&(e.ref(),e[aO]=!1),t[tKe]===0)e[Ka].timeoutType!==ZCe&&e[Ka].setTimeout(t[yX],ZCe);else if(t[Cd]>0&&e[Ka].statusCode<200&&e[Ka].timeoutType!==OD){let r=t[Xg][t[im]],n=r.headersTimeout!=null?r.headersTimeout:t[IGt];e[Ka].setTimeout(n,OD)}}}s(NGt,"resumeH1");function LGt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(LGt,"shouldSendContentLength");function MGt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(oi.isFormDataLike(l)){zCe||(zCe=LD().extractBody);let[y,E]=zCe(l);e.contentType==null&&u.push("content-type",E),l=y.stream,f=y.length}else oi.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let h=oi.bodyLength(l);if(f=h??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),LGt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[JCe])return oi.errorRequest(t,e,new iR),!1;process.emitWarning(new iR)}let m=t[FD],g=s(y=>{e.aborted||e.completed||(oi.errorRequest(t,e,y||new sKe),oi.destroy(l),oi.destroy(m,new MD("aborted")))},"abort");try{e.onConnect(g)}catch(y){oi.errorRequest(t,e,y)}if(e.aborted)return!1;r==="HEAD"&&(m[s0]=!0),(o||r==="CONNECT")&&(m[s0]=!0),c!=null&&(m[s0]=c),t[rKe]&&m[wGt]++>=t[rKe]&&(m[s0]=!0),a&&(m[lO]=!0);let A=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?A+=`host: ${i}\r
`:A+=t[vGt],o?A+=`connection: upgrade\r
upgrade: ${o}\r
`:t[mX]&&!m[s0]?A+=`connection: keep-alive\r
`:A+=`connection: close\r
`,Array.isArray(u))for(let y=0;y<u.length;y+=2){let E=u[y+0],b=u[y+1];if(Array.isArray(b))for(let _=0;_<b.length;_++)A+=`${E}: ${b[_]}\r
`;else A+=`${E}: ${b}\r
`}return eKe.sendHeaders.hasSubscribers&&eKe.sendHeaders.publish({request:e,headers:A,socket:m}),!l||h===0?iKe(g,null,t,e,m,f,A,p):oi.isBuffer(l)?iKe(g,l,t,e,m,f,A,p):oi.isBlobLike(l)?typeof l.stream=="function"?oKe(g,l.stream(),t,e,m,f,A,p):OGt(g,l,t,e,m,f,A,p):oi.isStream(l)?FGt(g,l,t,e,m,f,A,p):oi.isIterable(l)?oKe(g,l,t,e,m,f,A,p):Rn(!1),!0}s(MGt,"writeH1");function FGt(t,e,r,n,i,o,a,c){Rn(o!==0||r[Cd]===0,"stream body cannot be pipelined");let l=!1,u=new CX({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(A){oi.destroy(this,A)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),h=s(function(){if(queueMicrotask(()=>{e.removeListener("error",m)}),!l){let g=new sKe;queueMicrotask(()=>m(g))}},"onClose"),m=s(function(g){if(!l){if(l=!0,Rn(i.destroyed||i[uT]&&r[Cd]<=1),i.off("drain",p).off("error",m),e.removeListener("data",f).removeListener("end",m).removeListener("close",h),!g)try{u.end()}catch(A){g=A}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?oi.destroy(e,g):oi.destroy(e)}},"onFinished");e.on("data",f).on("end",m).on("error",m).on("close",h),e.resume&&e.resume(),i.on("drain",p).on("error",m),e.errorEmitted??e.errored?setImmediate(()=>m(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>m(null)),(e.closeEmitted??e.closed)&&setImmediate(h)}s(FGt,"writeStream");function iKe(t,e,r,n,i,o,a,c){try{e?oi.isBuffer(e)&&(Rn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[s0]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Rn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[lT]()}catch(l){t(l)}}s(iKe,"writeBuffer");async function OGt(t,e,r,n,i,o,a,c){Rn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new iR;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[s0]=!0),r[lT]()}catch(l){t(l)}}s(OGt,"writeBlob");async function oKe(t,e,r,n,i,o,a,c){Rn(o!==0||r[Cd]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let h=l;l=null,h()}}s(u,"onDrain");let f=s(()=>new Promise((h,m)=>{Rn(l===null),i[om]?m(i[om]):l=h}),"waitForDrain");i.on("close",u).on("drain",u);let p=new CX({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let h of e){if(i[om])throw i[om];p.write(h)||await f()}p.end()}catch(h){p.destroy(h)}finally{i.off("close",u).off("drain",u)}}s(oKe,"writeIterable");var CX=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[uT]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[om])throw r[om];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[JCe])throw new iR;process.emitWarning(new iR)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[s0]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[Ka].timeout&&r[Ka].timeoutType===OD&&r[Ka].timeout.refresh&&r[Ka].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[uT]=!1,e[om])throw e[om];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[JCe])throw new iR;process.emitWarning(new iR)}e[Ka].timeout&&e[Ka].timeoutType===OD&&e[Ka].timeout.refresh&&e[Ka].timeout.refresh(),n[lT]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[uT]=!1,e&&(Rn(n[Cd]<=1,"pipeline should only contain this request"),i(e))}};lKe.exports=BGt});var yKe=q((zti,AKe)=>{"use strict";d();var sm=require("node:assert"),{pipeline:QGt}=require("node:stream"),ro=Bi(),{RequestContentLengthMismatchError:t1e,RequestAbortedError:dKe,SocketError:uO,InformationalError:r1e}=Ho(),{kUrl:vX,kReset:xX,kClient:QD,kRunning:bX,kPending:UGt,kQueue:dT,kPendingIdx:n1e,kRunningIdx:Zg,kError:tA,kSocket:Kl,kStrictContentLength:qGt,kOnError:i1e,kMaxConcurrentStreams:gKe,kHTTP2Session:eA,kResume:fT,kSize:HGt,kHTTPContext:WGt}=xa(),tE=Symbol("open streams"),fKe,pKe=!1,EX;try{EX=require("node:http2")}catch{EX={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:$Gt,HTTP2_HEADER_METHOD:jGt,HTTP2_HEADER_PATH:GGt,HTTP2_HEADER_SCHEME:VGt,HTTP2_HEADER_CONTENT_LENGTH:zGt,HTTP2_HEADER_EXPECT:YGt,HTTP2_HEADER_STATUS:KGt}}=EX;function JGt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(JGt,"parseH2Headers");async function XGt(t,e){t[Kl]=e,pKe||(pKe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=EX.connect(t[vX],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[gKe]});r[tE]=0,r[QD]=t,r[Kl]=e,ro.addListener(r,"error",eVt),ro.addListener(r,"frameError",tVt),ro.addListener(r,"end",rVt),ro.addListener(r,"goaway",nVt),ro.addListener(r,"close",function(){let{[QD]:i}=this,{[Kl]:o}=i,a=this[Kl][tA]||this[tA]||new uO("closed",ro.getSocketInfo(o));if(i[eA]=null,i.destroyed){sm(i[UGt]===0);let c=i[dT].splice(i[Zg]);for(let l=0;l<c.length;l++){let u=c[l];ro.errorRequest(i,u,a)}}}),r.unref(),t[eA]=r,e[eA]=r,ro.addListener(e,"error",function(i){sm(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[tA]=i,this[QD][i1e](i)}),ro.addListener(e,"end",function(){ro.destroy(this,new uO("other side closed",ro.getSocketInfo(this)))}),ro.addListener(e,"close",function(){let i=this[tA]||new uO("closed",ro.getSocketInfo(this));t[Kl]=null,this[eA]!=null&&this[eA].destroy(i),t[n1e]=t[Zg],sm(t[bX]===0),t.emit("disconnect",t[vX],[t],i),t[fT]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return oVt(t,...i)},resume(){ZGt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(XGt,"connectH2");function ZGt(t){let e=t[Kl];e?.destroyed===!1&&(t[HGt]===0&&t[gKe]===0?(e.unref(),t[eA].unref()):(e.ref(),t[eA].ref()))}s(ZGt,"resumeH2");function eVt(t){sm(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Kl][tA]=t,this[QD][i1e](t)}s(eVt,"onHttp2SessionError");function tVt(t,e,r){if(r===0){let n=new r1e(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Kl][tA]=n,this[QD][i1e](n)}}s(tVt,"onHttp2FrameError");function rVt(){let t=new uO("other side closed",ro.getSocketInfo(this[Kl]));this.destroy(t),ro.destroy(this[Kl],t)}s(rVt,"onHttp2SessionEnd");function nVt(t){let e=this[tA]||new uO(`HTTP/2: "GOAWAY" frame received with code ${t}`,ro.getSocketInfo(this)),r=this[QD];if(r[Kl]=null,r[WGt]=null,this[eA]!=null&&(this[eA].destroy(e),this[eA]=null),ro.destroy(this[Kl],e),r[Zg]<r[dT].length){let n=r[dT][r[Zg]];r[dT][r[Zg]++]=null,ro.errorRequest(r,n,e),r[n1e]=r[Zg]}sm(r[bX]===0),r.emit("disconnect",r[vX],[r],e),r[fT]()}s(nVt,"onHTTP2GoAway");function iVt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(iVt,"shouldSendContentLength");function oVt(t,e){let r=t[eA],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return ro.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let S=0;S<u.length;S+=2){let P=u[S+0],B=u[S+1];if(Array.isArray(B))for(let F=0;F<B.length;F++)p[P]?p[P]+=`,${B[F]}`:p[P]=B[F];else p[P]=B}let h,{hostname:m,port:g}=t[vX];p[$Gt]=o||`${m}${g?`:${g}`:""}`,p[jGt]=n;let A=s(S=>{e.aborted||e.completed||(S=S||new dKe,ro.errorRequest(t,e,S),h!=null&&ro.destroy(h,S),ro.destroy(f,S),t[dT][t[Zg]++]=null,t[fT]())},"abort");try{e.onConnect(A)}catch(S){ro.errorRequest(t,e,S)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),h=r.request(p,{endStream:!1,signal:l}),h.id&&!h.pending?(e.onUpgrade(null,null,h),++r[tE],t[dT][t[Zg]++]=null):h.once("ready",()=>{e.onUpgrade(null,null,h),++r[tE],t[dT][t[Zg]++]=null}),h.once("close",()=>{r[tE]-=1,r[tE]===0&&r.unref()}),!0;p[GGt]=i,p[VGt]="https";let y=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let E=ro.bodyLength(f);if(ro.isFormDataLike(f)){fKe??=LD().extractBody;let[S,P]=fKe(f);p["content-type"]=P,f=S.stream,E=S.length}if(E==null&&(E=e.contentLength),(E===0||!y)&&(E=null),iVt(n)&&E>0&&e.contentLength!=null&&e.contentLength!==E){if(t[qGt])return ro.errorRequest(t,e,new t1e),!1;process.emitWarning(new t1e)}E!=null&&(sm(f,"no body must not have content length"),p[zGt]=`${E}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[YGt]="100-continue",h=r.request(p,{endStream:b,signal:l}),h.once("continue",_)):(h=r.request(p,{endStream:b,signal:l}),_()),++r[tE],h.once("response",S=>{let{[KGt]:P,...B}=S;if(e.onResponseStarted(),e.aborted){let F=new dKe;ro.errorRequest(t,e,F),ro.destroy(h,F);return}e.onHeaders(Number(P),JGt(B),h.resume.bind(h),"")===!1&&h.pause(),h.on("data",F=>{e.onData(F)===!1&&h.pause()})}),h.once("end",()=>{(h.state?.state==null||h.state.state<6)&&e.onComplete([]),r[tE]===0&&r.unref(),A(new r1e("HTTP/2: stream half-closed (remote)")),t[dT][t[Zg]++]=null,t[n1e]=t[Zg],t[fT]()}),h.once("close",()=>{r[tE]-=1,r[tE]===0&&r.unref()}),h.once("error",function(S){A(S)}),h.once("frameError",(S,P)=>{A(new r1e(`HTTP/2: "frameError" received - type ${S}, code ${P}`))}),!0;function _(){!f||E===0?hKe(A,h,null,t,e,t[Kl],E,y):ro.isBuffer(f)?hKe(A,h,f,t,e,t[Kl],E,y):ro.isBlobLike(f)?typeof f.stream=="function"?mKe(A,h,f.stream(),t,e,t[Kl],E,y):aVt(A,h,f,t,e,t[Kl],E,y):ro.isStream(f)?sVt(A,t[Kl],y,h,f,t,e,E):ro.isIterable(f)?mKe(A,h,f,t,e,t[Kl],E,y):sm(!1)}s(_,"writeBodyH2")}s(oVt,"writeH2");function hKe(t,e,r,n,i,o,a,c){try{r!=null&&ro.isBuffer(r)&&(sm(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[xX]=!0),i.onRequestSent(),n[fT]()}catch(l){t(l)}}s(hKe,"writeBuffer");function sVt(t,e,r,n,i,o,a,c){sm(c!==0||o[bX]===0,"stream body cannot be pipelined");let l=QGt(i,n,f=>{f?(ro.destroy(l,f),t(f)):(ro.removeAllListeners(l),a.onRequestSent(),r||(e[xX]=!0),o[fT]())});ro.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(sVt,"writeStream");async function aVt(t,e,r,n,i,o,a,c){sm(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new t1e;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[xX]=!0),n[fT]()}catch(l){t(l)}}s(aVt,"writeBlob");async function mKe(t,e,r,n,i,o,a,c){sm(a!==0||n[bX]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,h)=>{sm(l===null),o[tA]?h(o[tA]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[tA])throw o[tA];let h=e.write(p);i.onBodySent(p),h||await f()}e.end(),i.onRequestSent(),c||(o[xX]=!0),n[fT]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(mKe,"writeIterable");AKe.exports=XGt});var TX=q((Jti,EKe)=>{"use strict";d();var yC=Bi(),{kBodyUsed:dO}=xa(),s1e=require("node:assert"),{InvalidArgumentError:cVt}=Ho(),lVt=require("node:events"),uVt=[300,301,302,303,307,308],CKe=Symbol("body"),IX=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[CKe]=e,this[dO]=!1}async*[Symbol.asyncIterator](){s1e(!this[dO],"disturbed"),this[dO]=!0,yield*this[CKe]}},o1e=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new cVt("maxRedirections must be a positive number");yC.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,yC.isStream(this.opts.body)?(yC.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){s1e(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[dO]=!1,lVt.prototype.on.call(this.opts.body,"data",function(){this[dO]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new IX(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&yC.isIterable(this.opts.body)&&(this.opts.body=new IX(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||yC.isDisturbed(this.opts.body)?null:dVt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=yC.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=fVt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function dVt(t,e){if(uVt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&yC.headerNameToString(e[r])==="location")return e[r+1]}s(dVt,"parseLocation");function vKe(t,e,r){if(t.length===4)return yC.headerNameToString(t)==="host";if(e&&yC.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=yC.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(vKe,"shouldRemoveHeader");function fVt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)vKe(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))vKe(i,e,r)||n.push(i,t[i]);else s1e(t==null,"headers must be an object or an array");return n}s(fVt,"cleanRequestHeaders");EKe.exports=o1e});var wX=q((eri,xKe)=>{"use strict";d();var pVt=TX();function hVt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new pVt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(hVt,"createRedirectInterceptor");xKe.exports=hVt});var yO=q((nri,DKe)=>{"use strict";d();var rE=require("node:assert"),SKe=require("node:net"),mVt=require("node:http"),oR=Bi(),{channels:UD}=xD(),gVt=Qze(),AVt=wD(),{InvalidArgumentError:Ic,InformationalError:yVt,ClientDestroyedError:CVt}=Ho(),vVt=XF(),{kUrl:CC,kServerName:pT,kClient:EVt,kBusy:a1e,kConnect:xVt,kResuming:sR,kRunning:gO,kPending:AO,kSize:mO,kQueue:rA,kConnected:bVt,kConnecting:qD,kNeedDrain:mT,kKeepAliveDefaultTimeout:bKe,kHostHeader:IVt,kPendingIdx:nA,kRunningIdx:nE,kError:TVt,kPipelining:_X,kKeepAliveTimeoutValue:wVt,kMaxHeadersSize:_Vt,kKeepAliveMaxTimeout:SVt,kKeepAliveTimeoutThreshold:RVt,kHeadersTimeout:kVt,kBodyTimeout:PVt,kStrictContentLength:DVt,kConnector:fO,kMaxRedirections:BVt,kMaxRequests:c1e,kCounter:NVt,kClose:LVt,kDestroy:MVt,kDispatch:FVt,kInterceptors:IKe,kLocalAddress:pO,kMaxResponseSize:OVt,kOnError:QVt,kHTTPContext:Tc,kMaxConcurrentStreams:UVt,kResume:hO}=xa(),qVt=uKe(),HVt=yKe(),TKe=!1,hT=Symbol("kClosedResolve"),wKe=s(()=>{},"noop");function RKe(t){return t[_X]??t[Tc]?.defaultPipelining??1}s(RKe,"getPipelining");var l1e=class extends AVt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:h,keepAliveMaxTimeout:m,keepAliveTimeoutThreshold:g,socketPath:A,pipelining:y,tls:E,strictContentLength:b,maxCachedSessions:_,maxRedirections:S,connect:P,maxRequestsPerClient:B,localAddress:F,maxResponseSize:Y,autoSelectFamily:ee,autoSelectFamilyAttemptTimeout:V,maxConcurrentStreams:H,allowH2:U}={}){if(super(),f!==void 0)throw new Ic("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Ic("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Ic("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Ic("unsupported idleTimeout, use keepAliveTimeout instead");if(h!==void 0)throw new Ic("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Ic("invalid maxHeaderSize");if(A!=null&&typeof A!="string")throw new Ic("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new Ic("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Ic("invalid keepAliveTimeout");if(m!=null&&(!Number.isFinite(m)||m<=0))throw new Ic("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Ic("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Ic("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new Ic("bodyTimeout must be a positive integer or zero");if(P!=null&&typeof P!="function"&&typeof P!="object")throw new Ic("connect must be a function or an object");if(S!=null&&(!Number.isInteger(S)||S<0))throw new Ic("maxRedirections must be a positive number");if(B!=null&&(!Number.isInteger(B)||B<0))throw new Ic("maxRequestsPerClient must be a positive number");if(F!=null&&(typeof F!="string"||SKe.isIP(F)===0))throw new Ic("localAddress must be valid string IP address");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new Ic("maxResponseSize must be a positive number");if(V!=null&&(!Number.isInteger(V)||V<-1))throw new Ic("autoSelectFamilyAttemptTimeout must be a positive number");if(U!=null&&typeof U!="boolean")throw new Ic("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Ic("maxConcurrentStreams must be a positive integer, greater than 0");typeof P!="function"&&(P=vVt({...E,maxCachedSessions:_,allowH2:U,socketPath:A,timeout:c,...ee?{autoSelectFamily:ee,autoSelectFamilyAttemptTimeout:V}:void 0,...P})),r?.Client&&Array.isArray(r.Client)?(this[IKe]=r.Client,TKe||(TKe=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[IKe]=[WVt({maxRedirections:S})],this[CC]=oR.parseOrigin(e),this[fO]=P,this[_X]=y??1,this[_Vt]=n||mVt.maxHeaderSize,this[bKe]=p??4e3,this[SVt]=m??6e5,this[RVt]=g??2e3,this[wVt]=this[bKe],this[pT]=null,this[pO]=F??null,this[sR]=0,this[mT]=0,this[IVt]=`host: ${this[CC].hostname}${this[CC].port?`:${this[CC].port}`:""}\r
`,this[PVt]=l??3e5,this[kVt]=i??3e5,this[DVt]=b??!0,this[BVt]=S,this[c1e]=B,this[hT]=null,this[OVt]=Y>-1?Y:-1,this[UVt]=H??100,this[Tc]=null,this[rA]=[],this[nE]=0,this[nA]=0,this[hO]=X=>u1e(this,X),this[QVt]=X=>kKe(this,X)}get pipelining(){return this[_X]}set pipelining(e){this[_X]=e,this[hO](!0)}get[AO](){return this[rA].length-this[nA]}get[gO](){return this[nA]-this[nE]}get[mO](){return this[rA].length-this[nE]}get[bVt](){return!!this[Tc]&&!this[qD]&&!this[Tc].destroyed}get[a1e](){return!!(this[Tc]?.busy(null)||this[mO]>=(RKe(this)||1)||this[AO]>0)}[xVt](e){PKe(this),this.once("connect",e)}[FVt](e,r){let n=e.origin||this[CC].origin,i=new gVt(n,e,r);return this[rA].push(i),this[sR]||(oR.bodyLength(i.body)==null&&oR.isIterable(i.body)?(this[sR]=1,queueMicrotask(()=>u1e(this))):this[hO](!0)),this[sR]&&this[mT]!==2&&this[a1e]&&(this[mT]=2),this[mT]<2}async[LVt](){return new Promise(e=>{this[mO]?this[hT]=e:e(null)})}async[MVt](e){return new Promise(r=>{let n=this[rA].splice(this[nA]);for(let o=0;o<n.length;o++){let a=n[o];oR.errorRequest(this,a,e)}let i=s(()=>{this[hT]&&(this[hT](),this[hT]=null),r(null)},"callback");this[Tc]?(this[Tc].destroy(e,i),this[Tc]=null):queueMicrotask(i),this[hO]()})}},WVt=wX();function kKe(t,e){if(t[gO]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){rE(t[nA]===t[nE]);let r=t[rA].splice(t[nE]);for(let n=0;n<r.length;n++){let i=r[n];oR.errorRequest(t,i,e)}rE(t[mO]===0)}}s(kKe,"onError");async function PKe(t){rE(!t[qD]),rE(!t[Tc]);let{host:e,hostname:r,protocol:n,port:i}=t[CC];if(r[0]==="["){let o=r.indexOf("]");rE(o!==-1);let a=r.substring(1,o);rE(SKe.isIP(a)),r=a}t[qD]=!0,UD.beforeConnect.hasSubscribers&&UD.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Tc]?.version,servername:t[pT],localAddress:t[pO]},connector:t[fO]});try{let o=await new Promise((a,c)=>{t[fO]({host:e,hostname:r,protocol:n,port:i,servername:t[pT],localAddress:t[pO]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){oR.destroy(o.on("error",wKe),new CVt);return}rE(o);try{t[Tc]=o.alpnProtocol==="h2"?await HVt(t,o):await qVt(t,o)}catch(a){throw o.destroy().on("error",wKe),a}t[qD]=!1,o[NVt]=0,o[c1e]=t[c1e],o[EVt]=t,o[TVt]=null,UD.connected.hasSubscribers&&UD.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Tc]?.version,servername:t[pT],localAddress:t[pO]},connector:t[fO],socket:o}),t.emit("connect",t[CC],[t])}catch(o){if(t.destroyed)return;if(t[qD]=!1,UD.connectError.hasSubscribers&&UD.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[Tc]?.version,servername:t[pT],localAddress:t[pO]},connector:t[fO],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(rE(t[gO]===0);t[AO]>0&&t[rA][t[nA]].servername===t[pT];){let a=t[rA][t[nA]++];oR.errorRequest(t,a,o)}else kKe(t,o);t.emit("connectionError",t[CC],[t],o)}t[hO]()}s(PKe,"connect");function _Ke(t){t[mT]=0,t.emit("drain",t[CC],[t])}s(_Ke,"emitDrain");function u1e(t,e){t[sR]!==2&&(t[sR]=2,$Vt(t,e),t[sR]=0,t[nE]>256&&(t[rA].splice(0,t[nE]),t[nA]-=t[nE],t[nE]=0))}s(u1e,"resume");function $Vt(t,e){for(;;){if(t.destroyed){rE(t[AO]===0);return}if(t[hT]&&!t[mO]){t[hT](),t[hT]=null;return}if(t[Tc]&&t[Tc].resume(),t[a1e])t[mT]=2;else if(t[mT]===2){e?(t[mT]=1,queueMicrotask(()=>_Ke(t))):_Ke(t);continue}if(t[AO]===0||t[gO]>=(RKe(t)||1))return;let r=t[rA][t[nA]];if(t[CC].protocol==="https:"&&t[pT]!==r.servername){if(t[gO]>0)return;t[pT]=r.servername,t[Tc]?.destroy(new yVt("servername changed"),()=>{t[Tc]=null,u1e(t)})}if(t[qD])return;if(!t[Tc]){PKe(t);return}if(t[Tc].destroyed||t[Tc].busy(r))return;!r.aborted&&t[Tc].write(r)?t[nA]++:t[rA].splice(t[nA],1)}}s($Vt,"_resume");DKe.exports=l1e});var d1e=q((ari,BKe)=>{"use strict";d();var SX=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};BKe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new SX}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new SX),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var LKe=q((uri,NKe)=>{d();var{kFree:jVt,kConnected:GVt,kPending:VVt,kQueued:zVt,kRunning:YVt,kSize:KVt}=xa(),aR=Symbol("pool"),f1e=class{static{s(this,"PoolStats")}constructor(e){this[aR]=e}get connected(){return this[aR][GVt]}get free(){return this[aR][jVt]}get pending(){return this[aR][VVt]}get queued(){return this[aR][zVt]}get running(){return this[aR][YVt]}get size(){return this[aR][KVt]}};NKe.exports=f1e});var y1e=q((pri,jKe)=>{"use strict";d();var JVt=wD(),XVt=d1e(),{kConnected:p1e,kSize:MKe,kRunning:FKe,kPending:OKe,kQueued:CO,kBusy:ZVt,kFree:ezt,kUrl:tzt,kClose:rzt,kDestroy:nzt,kDispatch:izt}=xa(),ozt=LKe(),a0=Symbol("clients"),cf=Symbol("needDrain"),vO=Symbol("queue"),h1e=Symbol("closed resolve"),m1e=Symbol("onDrain"),QKe=Symbol("onConnect"),UKe=Symbol("onDisconnect"),qKe=Symbol("onConnectionError"),g1e=Symbol("get dispatcher"),WKe=Symbol("add client"),$Ke=Symbol("remove client"),HKe=Symbol("stats"),A1e=class extends JVt{static{s(this,"PoolBase")}constructor(){super(),this[vO]=new XVt,this[a0]=[],this[CO]=0;let e=this;this[m1e]=s(function(n,i){let o=e[vO],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[CO]--,a=!this.dispatch(c.opts,c.handler)}this[cf]=a,!this[cf]&&e[cf]&&(e[cf]=!1,e.emit("drain",n,[e,...i])),e[h1e]&&o.isEmpty()&&Promise.all(e[a0].map(c=>c.close())).then(e[h1e])},"onDrain"),this[QKe]=(r,n)=>{e.emit("connect",r,[e,...n])},this[UKe]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[qKe]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[HKe]=new ozt(this)}get[ZVt](){return this[cf]}get[p1e](){return this[a0].filter(e=>e[p1e]).length}get[ezt](){return this[a0].filter(e=>e[p1e]&&!e[cf]).length}get[OKe](){let e=this[CO];for(let{[OKe]:r}of this[a0])e+=r;return e}get[FKe](){let e=0;for(let{[FKe]:r}of this[a0])e+=r;return e}get[MKe](){let e=this[CO];for(let{[MKe]:r}of this[a0])e+=r;return e}get stats(){return this[HKe]}async[rzt](){this[vO].isEmpty()?await Promise.all(this[a0].map(e=>e.close())):await new Promise(e=>{this[h1e]=e})}async[nzt](e){for(;;){let r=this[vO].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[a0].map(r=>r.destroy(e)))}[izt](e,r){let n=this[g1e]();return n?n.dispatch(e,r)||(n[cf]=!0,this[cf]=!this[g1e]()):(this[cf]=!0,this[vO].push({opts:e,handler:r}),this[CO]++),!this[cf]}[WKe](e){return e.on("drain",this[m1e]).on("connect",this[QKe]).on("disconnect",this[UKe]).on("connectionError",this[qKe]),this[a0].push(e),this[cf]&&queueMicrotask(()=>{this[cf]&&this[m1e](e[tzt],[this,e])}),this}[$Ke](e){e.close(()=>{let r=this[a0].indexOf(e);r!==-1&&this[a0].splice(r,1)}),this[cf]=this[a0].some(r=>!r[cf]&&r.closed!==!0&&r.destroyed!==!0)}};jKe.exports={PoolBase:A1e,kClients:a0,kNeedDrain:cf,kAddClient:WKe,kRemoveClient:$Ke,kGetDispatcher:g1e}});var HD=q((gri,YKe)=>{"use strict";d();var{PoolBase:szt,kClients:RX,kNeedDrain:azt,kAddClient:czt,kGetDispatcher:lzt}=y1e(),uzt=yO(),{InvalidArgumentError:C1e}=Ho(),GKe=Bi(),{kUrl:VKe,kInterceptors:dzt}=xa(),fzt=XF(),v1e=Symbol("options"),E1e=Symbol("connections"),zKe=Symbol("factory");function pzt(t,e){return new uzt(t,e)}s(pzt,"defaultFactory");var x1e=class extends szt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=pzt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...h}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new C1e("invalid connections");if(typeof n!="function")throw new C1e("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new C1e("connect must be a function or an object");typeof i!="function"&&(i=fzt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[dzt]=h.interceptors?.Pool&&Array.isArray(h.interceptors.Pool)?h.interceptors.Pool:[],this[E1e]=r||null,this[VKe]=GKe.parseOrigin(e),this[v1e]={...GKe.deepClone(h),connect:i,allowH2:p},this[v1e].interceptors=h.interceptors?{...h.interceptors}:void 0,this[zKe]=n,this.on("connectionError",(m,g,A)=>{for(let y of g){let E=this[RX].indexOf(y);E!==-1&&this[RX].splice(E,1)}})}[lzt](){for(let e of this[RX])if(!e[azt])return e;if(!this[E1e]||this[RX].length<this[E1e]){let e=this[zKe](this[VKe],this[v1e]);return this[czt](e),e}}};YKe.exports=x1e});var eJe=q((Cri,ZKe)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:hzt,InvalidArgumentError:mzt}=Ho(),{PoolBase:gzt,kClients:vd,kNeedDrain:EO,kAddClient:Azt,kRemoveClient:yzt,kGetDispatcher:Czt}=y1e(),vzt=HD(),{kUrl:b1e,kInterceptors:Ezt}=xa(),{parseOrigin:KKe}=Bi(),JKe=Symbol("factory"),kX=Symbol("options"),XKe=Symbol("kGreatestCommonDivisor"),cR=Symbol("kCurrentWeight"),lR=Symbol("kIndex"),am=Symbol("kWeight"),PX=Symbol("kMaxWeightPerServer"),DX=Symbol("kErrorPenalty");function xzt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(xzt,"getGreatestCommonDivisor");function bzt(t,e){return new vzt(t,e)}s(bzt,"defaultFactory");var I1e=class extends gzt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=bzt,...n}={}){if(super(),this[kX]=n,this[lR]=-1,this[cR]=0,this[PX]=this[kX].maxWeightPerServer||100,this[DX]=this[kX].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new mzt("factory must be a function.");this[Ezt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[JKe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=KKe(e).origin;if(this[vd].find(i=>i[b1e].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[JKe](r,Object.assign({},this[kX]));this[Azt](n),n.on("connect",()=>{n[am]=Math.min(this[PX],n[am]+this[DX])}),n.on("connectionError",()=>{n[am]=Math.max(1,n[am]-this[DX]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[am]=Math.max(1,n[am]-this[DX]),this._updateBalancedPoolStats())});for(let i of this[vd])i[am]=this[PX];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[vd].length;r++)e=xzt(this[vd][r][am],e);this[XKe]=e}removeUpstream(e){let r=KKe(e).origin,n=this[vd].find(i=>i[b1e].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[yzt](n),this}get upstreams(){return this[vd].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[b1e].origin)}[Czt](){if(this[vd].length===0)throw new hzt;if(!this[vd].find(o=>!o[EO]&&o.closed!==!0&&o.destroyed!==!0)||this[vd].map(o=>o[EO]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[vd].findIndex(o=>!o[EO]);for(;n++<this[vd].length;){this[lR]=(this[lR]+1)%this[vd].length;let o=this[vd][this[lR]];if(o[am]>this[vd][i][am]&&!o[EO]&&(i=this[lR]),this[lR]===0&&(this[cR]=this[cR]-this[XKe],this[cR]<=0&&(this[cR]=this[PX])),o[am]>=this[cR]&&!o[EO])return o}return this[cR]=this[vd][i][am],this[lR]=i,this[vd][i]}};ZKe.exports=I1e});var WD=q((xri,aJe)=>{"use strict";d();var{InvalidArgumentError:BX}=Ho(),{kClients:gT,kRunning:tJe,kClose:Izt,kDestroy:Tzt,kDispatch:wzt,kInterceptors:_zt}=xa(),Szt=wD(),Rzt=HD(),kzt=yO(),Pzt=Bi(),Dzt=wX(),rJe=Symbol("onConnect"),nJe=Symbol("onDisconnect"),iJe=Symbol("onConnectionError"),Bzt=Symbol("maxRedirections"),oJe=Symbol("onDrain"),sJe=Symbol("factory"),T1e=Symbol("options");function Nzt(t,e){return e&&e.connections===1?new kzt(t,e):new Rzt(t,e)}s(Nzt,"defaultFactory");var w1e=class extends Szt{static{s(this,"Agent")}constructor({factory:e=Nzt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new BX("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new BX("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new BX("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[_zt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Dzt({maxRedirections:r})],this[T1e]={...Pzt.deepClone(i),connect:n},this[T1e].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Bzt]=r,this[sJe]=e,this[gT]=new Map,this[oJe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[rJe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[nJe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[iJe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[tJe](){let e=0;for(let r of this[gT].values())e+=r[tJe];return e}[wzt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new BX("opts.origin must be a non-empty string or URL.");let i=this[gT].get(n);return i||(i=this[sJe](e.origin,this[T1e]).on("drain",this[oJe]).on("connect",this[rJe]).on("disconnect",this[nJe]).on("connectionError",this[iJe]),this[gT].set(n,i)),i.dispatch(e,r)}async[Izt](){let e=[];for(let r of this[gT].values())e.push(r.close());this[gT].clear(),await Promise.all(e)}async[Tzt](e){let r=[];for(let n of this[gT].values())r.push(n.destroy(e));this[gT].clear(),await Promise.all(r)}};aJe.exports=w1e});var R1e=q((Tri,dJe)=>{"use strict";d();var{kProxy:Lzt,kClose:Mzt,kDestroy:Fzt,kInterceptors:Ozt}=xa(),{URL:xO}=require("node:url"),Qzt=WD(),Uzt=HD(),qzt=wD(),{InvalidArgumentError:MX,RequestAbortedError:Hzt,SecureProxyConnectionError:Wzt}=Ho(),cJe=XF(),NX=Symbol("proxy agent"),LX=Symbol("proxy client"),bO=Symbol("proxy headers"),_1e=Symbol("request tls settings"),lJe=Symbol("proxy tls settings"),uJe=Symbol("connect endpoint function");function $zt(t){return t==="https:"?443:80}s($zt,"defaultProtocolPort");function jzt(t,e){return new Uzt(t,e)}s(jzt,"defaultFactory");var Gzt=s(()=>{},"noop"),S1e=class extends qzt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof xO)&&!e.uri)throw new MX("Proxy uri is mandatory");let{clientFactory:r=jzt}=e;if(typeof r!="function")throw new MX("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[Lzt]={uri:i,protocol:c},this[Ozt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[_1e]=e.requestTls,this[lJe]=e.proxyTls,this[bO]=e.headers||{},e.auth&&e.token)throw new MX("opts.auth cannot be used in combination with opts.token");e.auth?this[bO]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[bO]["proxy-authorization"]=e.token:l&&u&&(this[bO]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=cJe({...e.proxyTls});this[uJe]=cJe({...e.requestTls}),this[LX]=r(n,{connect:p}),this[NX]=new Qzt({...e,connect:s(async(h,m)=>{let g=h.host;h.port||(g+=`:${$zt(h.protocol)}`);try{let{socket:A,statusCode:y}=await this[LX].connect({origin:o,port:a,path:g,signal:h.signal,headers:{...this[bO],host:h.host},servername:this[lJe]?.servername||f});if(y!==200&&(A.on("error",Gzt).destroy(),m(new Hzt(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),h.protocol!=="https:"){m(null,A);return}let E;this[_1e]?E=this[_1e].servername:E=h.servername,this[uJe]({...h,servername:E,httpSocket:A},m)}catch(A){A.code==="ERR_TLS_CERT_ALTNAME_INVALID"?m(new Wzt(A)):m(A)}},"connect")})}dispatch(e,r){let n=Vzt(e.headers);if(zzt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new xO(e.origin);n.host=i}return this[NX].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new xO(e):e instanceof xO?e:new xO(e.uri)}async[Mzt](){await this[NX].close(),await this[LX].close()}async[Fzt](){await this[NX].destroy(),await this[LX].destroy()}};function Vzt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(Vzt,"buildHeaders");function zzt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new MX("Proxy-Authorization should be sent in ProxyAgent constructor")}s(zzt,"throwIfProxyAuthIsSent");dJe.exports=S1e});var AJe=q((Sri,gJe)=>{"use strict";d();var Yzt=wD(),{kClose:Kzt,kDestroy:Jzt,kClosed:fJe,kDestroyed:pJe,kDispatch:Xzt,kNoProxyAgent:IO,kHttpProxyAgent:AT,kHttpsProxyAgent:uR}=xa(),hJe=R1e(),Zzt=WD(),eYt={"http:":80,"https:":443},mJe=!1,k1e=class extends Yzt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,mJe||(mJe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[IO]=new Zzt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[AT]=new hJe({...o,uri:a}):this[AT]=this[IO];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[uR]=new hJe({...o,uri:c}):this[uR]=this[AT],this.#o()}[Xzt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[Kzt](){await this[IO].close(),this[AT][fJe]||await this[AT].close(),this[uR][fJe]||await this[uR].close()}async[Jzt](e){await this[IO].destroy(e),this[AT][pJe]||await this[AT].destroy(e),this[uR][pJe]||await this[uR].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||eYt[r]||0,this.#r(n,i)?r==="https:"?this[uR]:this[AT]:this[IO]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};gJe.exports=k1e});var FX=q((Pri,EJe)=>{"use strict";d();var $D=require("node:assert"),{kRetryHandlerDefaultRetry:yJe}=xa(),{RequestRetryError:TO}=Ho(),{isDisturbed:CJe,parseHeaders:tYt,parseRangeHeader:vJe,wrapRequestBody:rYt}=Bi();function nYt(t){let e=Date.now();return new Date(t).getTime()-e}s(nYt,"calculateRetryAfterHeader");var P1e=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:h,statusCodes:m}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:rYt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[yJe],retryAfter:h??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:m??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[yJe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:h,timeoutFactor:m,statusCodes:g,errorCodes:A,methods:y}=u,{counter:E}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!A.includes(a)){i(e);return}if(Array.isArray(y)&&!y.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(E>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?nYt(b):b*1e3);let _=b>0?Math.min(b,h):Math.min(p*m**(E-1),h);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=tYt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new TO("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new TO("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=vJe(o["content-range"]);if(!c)return this.abort(new TO("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new TO("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return $D(this.start===l,"content-range mismatch"),$D(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=vJe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;$D(l!=null&&Number.isFinite(l),"content-range mismatch"),$D(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return $D(Number.isFinite(this.start)),$D(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new TO("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||CJe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||CJe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};EJe.exports=P1e});var bJe=q((Nri,xJe)=>{"use strict";d();var iYt=KF(),oYt=FX(),D1e=class extends iYt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new oYt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};xJe.exports=D1e});var O1e=q((Fri,DJe)=>{"use strict";d();var SJe=require("node:assert"),{Readable:sYt}=require("node:stream"),{RequestAbortedError:RJe,NotSupportedError:aYt,InvalidArgumentError:cYt,AbortError:B1e}=Ho(),kJe=Bi(),{ReadableStreamFrom:lYt}=Bi(),Cp=Symbol("kConsume"),wO=Symbol("kReading"),yT=Symbol("kBody"),IJe=Symbol("kAbort"),PJe=Symbol("kContentType"),TJe=Symbol("kContentLength"),uYt=s(()=>{},"noop"),N1e=class extends sYt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[IJe]=r,this[Cp]=null,this[yT]=null,this[PJe]=n,this[TJe]=i,this[wO]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new RJe),e&&this[IJe](),super.destroy(e)}_destroy(e,r){this[wO]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[wO]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[wO]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Cp]&&e!==null?(M1e(this[Cp],e),this[wO]?super.push(e):!0):super.push(e)}async text(){return _O(this,"text")}async json(){return _O(this,"json")}async blob(){return _O(this,"blob")}async bytes(){return _O(this,"bytes")}async arrayBuffer(){return _O(this,"arrayBuffer")}async formData(){throw new aYt}get bodyUsed(){return kJe.isDisturbed(this)}get body(){return this[yT]||(this[yT]=lYt(this),this[Cp]&&(this[yT].getReader(),SJe(this[yT].locked))),this[yT]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new cYt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[TJe]>r&&this.destroy(new B1e);let a=s(()=>{this.destroy(n.reason??new B1e)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new B1e):i(null)}).on("error",uYt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function dYt(t){return t[yT]&&t[yT].locked===!0||t[Cp]}s(dYt,"isLocked");function fYt(t){return kJe.isDisturbed(t)||dYt(t)}s(fYt,"isUnusable");async function _O(t,e){return SJe(!t[Cp]),new Promise((r,n)=>{if(fYt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Cp]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){F1e(this[Cp],i)}).on("close",function(){this[Cp].body!==null&&F1e(this[Cp],new RJe)}),pYt(t[Cp])})})}s(_O,"consume");function pYt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)M1e(t,e.buffer[i])}else for(let r of e.buffer)M1e(t,r);for(e.endEmitted?_Je(this[Cp]):t.stream.on("end",function(){_Je(this[Cp])}),t.stream.resume();t.stream.read()!=null;);}s(pYt,"consumeStart");function L1e(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(L1e,"chunksDecode");function wJe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(wJe,"chunksConcat");function _Je(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(L1e(r,o)):e==="json"?n(JSON.parse(L1e(r,o))):e==="arrayBuffer"?n(wJe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[PJe]})):e==="bytes"&&n(wJe(r,o)),F1e(t)}catch(a){i.destroy(a)}}s(_Je,"consumeEnd");function M1e(t,e){t.length+=e.length,t.body.push(e)}s(M1e,"consumePush");function F1e(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(F1e,"consumeFinish");DJe.exports={Readable:N1e,chunksDecode:L1e}});var Q1e=q((Uri,FJe)=>{d();var hYt=require("node:assert"),{ResponseStatusCodeError:BJe}=Ho(),{chunksDecode:NJe}=O1e(),mYt=128*1024;async function gYt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){hYt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>mYt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new BJe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{LJe(r)?f=JSON.parse(NJe(a,c)):MJe(r)&&(f=NJe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new BJe(l,n,o,f)))}s(gYt,"getResolveErrorBodyCallback");var LJe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),MJe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");FJe.exports={getResolveErrorBodyCallback:gYt,isContentTypeApplicationJson:LJe,isContentTypeText:MJe}});var UJe=q((Wri,U1e)=>{"use strict";d();var AYt=require("node:assert"),{Readable:yYt}=O1e(),{InvalidArgumentError:jD,RequestAbortedError:OJe}=Ho(),vp=Bi(),{getResolveErrorBodyCallback:CYt}=Q1e(),{AsyncResource:vYt}=require("node:async_hooks"),OX=class extends vYt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new jD("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new jD("invalid callback");if(f&&(typeof f!="number"||f<0))throw new jD("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new jD("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new jD("invalid method");if(c&&typeof c!="function")throw new jD("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw vp.isStream(a)&&vp.destroy(a.on("error",vp.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,vp.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new OJe:this.removeAbortListener=vp.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new OJe,this.res?vp.destroy(this.res.on("error",vp.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}AYt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?vp.parseRawHeaders(r):vp.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let h=u==="raw"?vp.parseHeaders(r):p,m=h["content-type"],g=h["content-length"],A=new yYt({resume:n,abort:c,contentType:m,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&A.on("close",this.removeAbortListener),this.callback=null,this.res=A,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(CYt,null,{callback:o,body:A,contentType:m,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:A,context:l}))}onData(e){return this.res.push(e)}onComplete(e){vp.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{vp.destroy(r,e)})),i&&(this.body=null,vp.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function QJe(t,e){if(e===void 0)return new Promise((r,n)=>{QJe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new OX(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(QJe,"request");U1e.exports=QJe;U1e.exports.RequestHandler=OX});var SO=q((Gri,WJe)=>{d();var{addAbortListener:EYt}=Bi(),{RequestAbortedError:xYt}=Ho(),GD=Symbol("kListener"),vC=Symbol("kSignal");function qJe(t){t.abort?t.abort(t[vC]?.reason):t.reason=t[vC]?.reason??new xYt,HJe(t)}s(qJe,"abort");function bYt(t,e){if(t.reason=null,t[vC]=null,t[GD]=null,!!e){if(e.aborted){qJe(t);return}t[vC]=e,t[GD]=()=>{qJe(t)},EYt(t[vC],t[GD])}}s(bYt,"addSignal");function HJe(t){t[vC]&&("removeEventListener"in t[vC]?t[vC].removeEventListener("abort",t[GD]):t[vC].removeListener("abort",t[GD]),t[vC]=null,t[GD]=null)}s(HJe,"removeSignal");WJe.exports={addSignal:bYt,removeSignal:HJe}});var VJe=q((Yri,GJe)=>{"use strict";d();var IYt=require("node:assert"),{finished:TYt,PassThrough:wYt}=require("node:stream"),{InvalidArgumentError:VD,InvalidReturnValueError:_Yt}=Ho(),iA=Bi(),{getResolveErrorBodyCallback:SYt}=Q1e(),{AsyncResource:RYt}=require("node:async_hooks"),{addSignal:kYt,removeSignal:$Je}=SO(),q1e=class extends RYt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new VD("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new VD("invalid callback");if(typeof r!="function")throw new VD("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new VD("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new VD("invalid method");if(l&&typeof l!="function")throw new VD("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw iA.isStream(c)&&iA.destroy(c.on("error",iA.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,iA.isStream(c)&&c.on("error",p=>{this.onError(p)}),kYt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}IYt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?iA.parseRawHeaders(r):iA.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?iA.parseHeaders(r):f)["content-type"];p=new wYt,this.callback=null,this.runInAsyncScope(SYt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new _Yt("expected Writable");TYt(p,{readable:!1},m=>{let{callback:g,res:A,opaque:y,trailers:E,abort:b}=this;this.res=null,(m||!A.readable)&&iA.destroy(A,m),this.callback=null,this.runInAsyncScope(g,null,m||null,{opaque:y,trailers:E}),m&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;$Je(this),r&&(this.trailers=iA.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;$Je(this),this.factory=null,r?(this.res=null,iA.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,iA.destroy(o,e))}};function jJe(t,e,r){if(r===void 0)return new Promise((n,i)=>{jJe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new q1e(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(jJe,"stream");GJe.exports=jJe});var JJe=q((Xri,KJe)=>{"use strict";d();var{Readable:YJe,Duplex:PYt,PassThrough:DYt}=require("node:stream"),{InvalidArgumentError:RO,InvalidReturnValueError:BYt,RequestAbortedError:H1e}=Ho(),cm=Bi(),{AsyncResource:NYt}=require("node:async_hooks"),{addSignal:LYt,removeSignal:MYt}=SO(),zJe=require("node:assert"),zD=Symbol("resume"),W1e=class extends YJe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[zD]=null}_read(){let{[zD]:e}=this;e&&(this[zD]=null,e())}_destroy(e,r){this._read(),r(e)}},$1e=class extends YJe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[zD]=e}_read(){this[zD]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new H1e),r(e)}},j1e=class extends NYt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new RO("invalid opts");if(typeof r!="function")throw new RO("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new RO("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new RO("invalid method");if(a&&typeof a!="function")throw new RO("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new W1e().on("error",cm.nop),this.ret=new PYt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[zD]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:h,ret:m,abort:g}=this;!l&&!m._readableState.endEmitted&&(l=new H1e),g&&l&&g(),cm.destroy(f,l),cm.destroy(p,l),cm.destroy(h,l),MYt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,LYt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}zJe(!i,"pipeline cannot be retried"),zJe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?cm.parseRawHeaders(r):cm.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new $1e(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?cm.parseRawHeaders(r):cm.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",cm.nop),l}if(!c||typeof c.on!="function")throw new BYt("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;cm.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||cm.destroy(l,new H1e)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,cm.destroy(r,e)}};function FYt(t,e){try{let r=new j1e(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new DYt().destroy(r)}}s(FYt,"pipeline");KJe.exports=FYt});var nXe=q((tni,rXe)=>{"use strict";d();var{InvalidArgumentError:G1e,SocketError:OYt}=Ho(),{AsyncResource:QYt}=require("node:async_hooks"),XJe=Bi(),{addSignal:UYt,removeSignal:ZJe}=SO(),eXe=require("node:assert"),V1e=class extends QYt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new G1e("invalid opts");if(typeof r!="function")throw new G1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new G1e("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,UYt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}eXe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new OYt("bad upgrade",null)}onUpgrade(e,r,n){eXe(e===101);let{callback:i,opaque:o,context:a}=this;ZJe(this),this.callback=null;let c=this.responseHeaders==="raw"?XJe.parseRawHeaders(r):XJe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;ZJe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function tXe(t,e){if(e===void 0)return new Promise((r,n)=>{tXe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new V1e(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(tXe,"upgrade");rXe.exports=tXe});var cXe=q((ini,aXe)=>{"use strict";d();var qYt=require("node:assert"),{AsyncResource:HYt}=require("node:async_hooks"),{InvalidArgumentError:z1e,SocketError:WYt}=Ho(),iXe=Bi(),{addSignal:$Yt,removeSignal:oXe}=SO(),Y1e=class extends HYt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new z1e("invalid opts");if(typeof r!="function")throw new z1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new z1e("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,$Yt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}qYt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new WYt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;oXe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?iXe.parseRawHeaders(r):iXe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;oXe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function sXe(t,e){if(e===void 0)return new Promise((r,n)=>{sXe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Y1e(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(sXe,"connect");aXe.exports=sXe});var lXe=q((ani,YD)=>{"use strict";d();YD.exports.request=UJe();YD.exports.stream=VJe();YD.exports.pipeline=JJe();YD.exports.upgrade=nXe();YD.exports.connect=cXe()});var J1e=q((lni,uXe)=>{"use strict";d();var{UndiciError:jYt}=Ho(),K1e=class t extends jYt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};uXe.exports={MockNotMatchedError:K1e}});var KD=q((fni,dXe)=>{"use strict";d();dXe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var kO=q((hni,xXe)=>{"use strict";d();var{MockNotMatchedError:dR}=J1e(),{kDispatches:QX,kMockAgent:GYt,kOriginalDispatch:VYt,kOrigin:zYt,kGetNetConnect:YYt}=KD(),{buildURL:KYt}=Bi(),{STATUS_CODES:JYt}=require("node:http"),{types:{isPromise:XYt}}=require("node:util");function iE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(iE,"matchValue");function pXe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(pXe,"lowerCaseEntries");function hXe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):pXe(t)[e.toLocaleLowerCase()]}s(hXe,"getHeaderByName");function eve(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(eve,"buildHeadersFromArray");function mXe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=eve(e)),t.headers(e?pXe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=hXe(e,r);if(!iE(n,i))return!1}return!0}s(mXe,"matchHeaders");function fXe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(fXe,"safeUrl");function ZYt(t,{path:e,method:r,body:n,headers:i}){let o=iE(t.path,e),a=iE(t.method,r),c=typeof t.body<"u"?iE(t.body,n):!0,l=mXe(t,i);return o&&a&&c&&l}s(ZYt,"matchKey");function gXe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(gXe,"getResponseData");function AXe(t,e){let r=e.query?KYt(e.path,e.query):e.path,n=typeof r=="string"?fXe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>iE(fXe(o),n));if(i.length===0)throw new dR(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>iE(o,e.method)),i.length===0)throw new dR(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?iE(o,e.body):!0),i.length===0)throw new dR(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>mXe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new dR(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(AXe,"getMockDispatch");function eKt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(eKt,"addMockDispatch");function X1e(t,e){let r=t.findIndex(n=>n.consumed?ZYt(n,e):!1);r!==-1&&t.splice(r,1)}s(X1e,"deleteMockDispatch");function yXe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(yXe,"buildKey");function Z1e(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Z1e,"generateKeyValues");function CXe(t){return JYt[t]||"unknown"}s(CXe,"getStatusText");async function tKt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(tKt,"getResponse");function vXe(t,e){let r=yXe(t),n=AXe(this[QX],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:h}=n;if(n.consumed=!f&&p>=h,n.pending=p<h,l!==null)return X1e(this[QX],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{m(this[QX])},u):m(this[QX]);function m(A,y=o){let E=Array.isArray(t.headers)?eve(t.headers):t.headers,b=typeof y=="function"?y({...t,headers:E}):y;if(XYt(b)){b.then(B=>m(A,B));return}let _=gXe(b),S=Z1e(a),P=Z1e(c);e.onConnect?.(B=>e.onError(B),null),e.onHeaders?.(i,S,g,CXe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(P),X1e(A,r)}s(m,"handleReply");function g(){}return s(g,"resume"),!0}s(vXe,"mockDispatch");function rKt(){let t=this[GYt],e=this[zYt],r=this[VYt];return s(function(i,o){if(t.isMockActive)try{vXe.call(this,i,o)}catch(a){if(a instanceof dR){let c=t[YYt]();if(c===!1)throw new dR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(EXe(c,e))r.call(this,i,o);else throw new dR(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(rKt,"buildMockDispatch");function EXe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>iE(n,r.host)))}s(EXe,"checkNetConnect");function nKt(t){if(t){let{agent:e,...r}=t;return r}}s(nKt,"buildMockOptions");xXe.exports={getResponseData:gXe,getMockDispatch:AXe,addMockDispatch:eKt,deleteMockDispatch:X1e,buildKey:yXe,generateKeyValues:Z1e,matchValue:iE,getResponse:tKt,getStatusText:CXe,mockDispatch:vXe,buildMockDispatch:rKt,checkNetConnect:EXe,buildMockOptions:nKt,getHeaderByName:hXe,buildHeadersFromArray:eve}});var ave=q((Ani,sve)=>{"use strict";d();var{getResponseData:iKt,buildKey:oKt,addMockDispatch:tve}=kO(),{kDispatches:UX,kDispatchKey:qX,kDefaultHeaders:rve,kDefaultTrailers:nve,kContentLength:ive,kMockDispatch:HX}=KD(),{InvalidArgumentError:EC}=Ho(),{buildURL:sKt}=Bi(),JD=class{static{s(this,"MockScope")}constructor(e){this[HX]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new EC("waitInMs must be a valid integer > 0");return this[HX].delay=e,this}persist(){return this[HX].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new EC("repeatTimes must be a valid integer > 0");return this[HX].times=e,this}},ove=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new EC("opts must be an object");if(typeof e.path>"u")throw new EC("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=sKt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[qX]=oKt(e),this[UX]=r,this[rve]={},this[nve]={},this[ive]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=iKt(r),o=this[ive]?{"content-length":i.length}:{},a={...this[rve],...o,...n.headers},c={...this[nve],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new EC("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new EC("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new EC("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=tve(this[UX],this[qX],o);return new JD(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=tve(this[UX],this[qX],n);return new JD(i)}replyWithError(e){if(typeof e>"u")throw new EC("error must be defined");let r=tve(this[UX],this[qX],{error:e});return new JD(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new EC("headers must be defined");return this[rve]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new EC("trailers must be defined");return this[nve]=e,this}replyContentLength(){return this[ive]=!0,this}};sve.exports.MockInterceptor=ove;sve.exports.MockScope=JD});var uve=q((vni,RXe)=>{"use strict";d();var{promisify:aKt}=require("node:util"),cKt=yO(),{buildMockDispatch:lKt}=kO(),{kDispatches:bXe,kMockAgent:IXe,kClose:TXe,kOriginalClose:wXe,kOrigin:_Xe,kOriginalDispatch:uKt,kConnected:cve}=KD(),{MockInterceptor:dKt}=ave(),SXe=xa(),{InvalidArgumentError:fKt}=Ho(),lve=class extends cKt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new fKt("Argument opts.agent must implement Agent");this[IXe]=r.agent,this[_Xe]=e,this[bXe]=[],this[cve]=1,this[uKt]=this.dispatch,this[wXe]=this.close.bind(this),this.dispatch=lKt.call(this),this.close=this[TXe]}get[SXe.kConnected](){return this[cve]}intercept(e){return new dKt(e,this[bXe])}async[TXe](){await aKt(this[wXe])(),this[cve]=0,this[IXe][SXe.kClients].delete(this[_Xe])}};RXe.exports=lve});var pve=q((bni,MXe)=>{"use strict";d();var{promisify:pKt}=require("node:util"),hKt=HD(),{buildMockDispatch:mKt}=kO(),{kDispatches:kXe,kMockAgent:PXe,kClose:DXe,kOriginalClose:BXe,kOrigin:NXe,kOriginalDispatch:gKt,kConnected:dve}=KD(),{MockInterceptor:AKt}=ave(),LXe=xa(),{InvalidArgumentError:yKt}=Ho(),fve=class extends hKt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new yKt("Argument opts.agent must implement Agent");this[PXe]=r.agent,this[NXe]=e,this[kXe]=[],this[dve]=1,this[gKt]=this.dispatch,this[BXe]=this.close.bind(this),this.dispatch=mKt.call(this),this.close=this[DXe]}get[LXe.kConnected](){return this[dve]}intercept(e){return new AKt(e,this[kXe])}async[DXe](){await pKt(this[BXe])(),this[dve]=0,this[PXe][LXe.kClients].delete(this[NXe])}};MXe.exports=fve});var OXe=q((_ni,FXe)=>{"use strict";d();var CKt={pronoun:"it",is:"is",was:"was",this:"this"},vKt={pronoun:"they",is:"are",was:"were",this:"these"};FXe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?CKt:vKt,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var UXe=q((Pni,QXe)=>{"use strict";d();var{Transform:EKt}=require("node:stream"),{Console:xKt}=require("node:console"),bKt=process.versions.icu?"\u2705":"Y ",IKt=process.versions.icu?"\u274C":"N ";QXe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new EKt({transform(r,n,i){i(null,r)}}),this.logger=new xKt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?bKt:IKt,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var $Xe=q((Nni,WXe)=>{"use strict";d();var{kClients:fR}=xa(),TKt=WD(),{kAgent:hve,kMockAgentSet:WX,kMockAgentGet:qXe,kDispatches:mve,kIsMockActive:$X,kNetConnect:pR,kGetNetConnect:wKt,kOptions:jX,kFactory:GX}=KD(),_Kt=uve(),SKt=pve(),{matchValue:RKt,buildMockOptions:kKt}=kO(),{InvalidArgumentError:HXe,UndiciError:PKt}=Ho(),DKt=KF(),BKt=OXe(),NKt=UXe(),gve=class extends DKt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[pR]=!0,this[$X]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new HXe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new TKt(e);this[hve]=r,this[fR]=r[fR],this[jX]=kKt(e)}get(e){let r=this[qXe](e);return r||(r=this[GX](e),this[WX](e,r)),r}dispatch(e,r){return this.get(e.origin),this[hve].dispatch(e,r)}async close(){await this[hve].close(),this[fR].clear()}deactivate(){this[$X]=!1}activate(){this[$X]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[pR])?this[pR].push(e):this[pR]=[e];else if(typeof e>"u")this[pR]=!0;else throw new HXe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[pR]=!1}get isMockActive(){return this[$X]}[WX](e,r){this[fR].set(e,r)}[GX](e){let r=Object.assign({agent:this},this[jX]);return this[jX]&&this[jX].connections===1?new _Kt(e,r):new SKt(e,r)}[qXe](e){let r=this[fR].get(e);if(r)return r;if(typeof e!="string"){let n=this[GX]("http://localhost:9999");return this[WX](e,n),n}for(let[n,i]of Array.from(this[fR]))if(i&&typeof n!="string"&&RKt(n,e)){let o=this[GX](e);return this[WX](e,o),o[mve]=i[mve],o}}[wKt](){return this[pR]}pendingInterceptors(){let e=this[fR];return Array.from(e.entries()).flatMap(([r,n])=>n[mve].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new NKt}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new BKt("interceptor","interceptors").pluralize(r.length);throw new PKt(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};WXe.exports=gve});var VX=q((Fni,zXe)=>{"use strict";d();var jXe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:LKt}=Ho(),MKt=WD();VXe()===void 0&&GXe(new MKt);function GXe(t){if(!t||typeof t.dispatch!="function")throw new LKt("Argument agent must implement Agent");Object.defineProperty(globalThis,jXe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(GXe,"setGlobalDispatcher");function VXe(){return globalThis[jXe]}s(VXe,"getGlobalDispatcher");zXe.exports={setGlobalDispatcher:GXe,getGlobalDispatcher:VXe}});var zX=q((qni,YXe)=>{"use strict";d();YXe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var JXe=q(($ni,KXe)=>{"use strict";d();var FKt=TX();KXe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new FKt(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var ZXe=q((Vni,XXe)=>{"use strict";d();var OKt=FX();XXe.exports=t=>e=>s(function(n,i){return e(n,new OKt({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var tZe=q((Kni,eZe)=>{"use strict";d();var QKt=Bi(),{InvalidArgumentError:UKt,RequestAbortedError:qKt}=Ho(),HKt=zX(),Ave=class extends HKt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new UKt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=QKt.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new qKt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function WKt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new Ave({maxSize:o},i);return e(n,a)},"Intercept")}s(WKt,"createDumpInterceptor");eZe.exports=WKt});var iZe=q((Zni,nZe)=>{"use strict";d();var{isIP:$Kt}=require("node:net"),{lookup:jKt}=require("node:dns"),GKt=zX(),{InvalidArgumentError:XD,InformationalError:VKt}=Ho(),rZe=Math.pow(2,31)-1,yve=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new VKt("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){jKt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===rZe?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===rZe?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new Cve(this,e,r)}},Cve=class extends GKt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};nZe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new XD("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new XD("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new XD("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new XD("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new XD("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new XD("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new yve(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return $Kt(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let h=null;h={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(h,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var hR=q((rii,dZe)=>{"use strict";d();var{kConstruct:zKt}=xa(),{kEnumerableProperty:ZD}=Bi(),{iteratorMixin:YKt,isValidHeaderName:PO,isValidHeaderValue:sZe}=yp(),{webidl:Io}=Lu(),vve=require("node:assert"),YX=require("node:util"),Kc=Symbol("headers map"),Ep=Symbol("headers map sorted");function oZe(t){return t===10||t===13||t===9||t===32}s(oZe,"isHTTPWhiteSpaceCharCode");function aZe(t){let e=0,r=t.length;for(;r>e&&oZe(t.charCodeAt(r-1));)--r;for(;r>e&&oZe(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(aZe,"headerValueNormalize");function cZe(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Io.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});Eve(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)Eve(t,r[n],e[r[n]])}else throw Io.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(cZe,"fill");function Eve(t,e,r){if(r=aZe(r),PO(e)){if(!sZe(r))throw Io.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Io.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(uZe(t)==="immutable")throw new TypeError("immutable");return xve(t).append(e,r,!1)}s(Eve,"appendHeader");function lZe(t,e){return t[0]<e[0]?-1:1}s(lZe,"compareHeaderName");var KX=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Kc]=new Map(e[Kc]),this[Ep]=e[Ep],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Kc]=new Map(e),this[Ep]=null)}contains(e,r){return this[Kc].has(r?e:e.toLowerCase())}clear(){this[Kc].clear(),this[Ep]=null,this.cookies=null}append(e,r,n){this[Ep]=null;let i=n?e:e.toLowerCase(),o=this[Kc].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Kc].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[Kc].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[Ep]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Kc].set(i,{name:e,value:r})}delete(e,r){this[Ep]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Kc].delete(e)}get(e,r){return this[Kc].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[Kc])yield[e,r]}get entries(){let e={};if(this[Kc].size!==0)for(let{name:r,value:n}of this[Kc].values())e[r]=n;return e}rawValues(){return this[Kc].values()}get entriesList(){let e=[];if(this[Kc].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Kc])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[Kc].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[Kc][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],vve(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],vve(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[Kc])r[n++]=[i,o],vve(o!==null);return r.sort(lZe)}}},oA=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Io.util.markAsUncloneable(this),e!==zKt&&(this.#t=new KX,this.#e="none",e!==void 0&&(e=Io.converters.HeadersInit(e,"Headers contructor","init"),cZe(this,e)))}append(e,r){Io.brandCheck(this,t),Io.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Io.converters.ByteString(e,n,"name"),r=Io.converters.ByteString(r,n,"value"),Eve(this,e,r)}delete(e){if(Io.brandCheck(this,t),Io.argumentLengthCheck(arguments,1,"Headers.delete"),e=Io.converters.ByteString(e,"Headers.delete","name"),!PO(e))throw Io.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Io.brandCheck(this,t),Io.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Io.converters.ByteString(e,r,"name"),!PO(e))throw Io.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Io.brandCheck(this,t),Io.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Io.converters.ByteString(e,r,"name"),!PO(e))throw Io.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Io.brandCheck(this,t),Io.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Io.converters.ByteString(e,n,"name"),r=Io.converters.ByteString(r,n,"value"),r=aZe(r),PO(e)){if(!sZe(r))throw Io.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Io.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Io.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[Ep](){if(this.#t[Ep])return this.#t[Ep];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[Ep]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[Ep]=e}[YX.inspect.custom](e,r){return r.depth??=e,`Headers ${YX.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:uZe,setHeadersGuard:KKt,getHeadersList:xve,setHeadersList:JKt}=oA;Reflect.deleteProperty(oA,"getHeadersGuard");Reflect.deleteProperty(oA,"setHeadersGuard");Reflect.deleteProperty(oA,"getHeadersList");Reflect.deleteProperty(oA,"setHeadersList");YKt("Headers",oA,Ep,0,1);Object.defineProperties(oA.prototype,{append:ZD,delete:ZD,get:ZD,has:ZD,set:ZD,getSetCookie:ZD,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[YX.inspect.custom]:{enumerable:!1}});Io.converters.HeadersInit=function(t,e,r){if(Io.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!YX.types.isProxy(t)&&n===oA.prototype.entries)try{return xve(t).entriesList}catch{}return typeof n=="function"?Io.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Io.converters["record<ByteString, ByteString>"](t,e,r)}throw Io.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};dZe.exports={fill:cZe,compareHeaderName:lZe,Headers:oA,HeadersList:KX,getHeadersGuard:uZe,setHeadersGuard:KKt,setHeadersList:JKt,getHeadersList:xve}});var BO=q((oii,EZe)=>{"use strict";d();var{Headers:AZe,HeadersList:fZe,fill:XKt,getHeadersGuard:ZKt,setHeadersGuard:yZe,setHeadersList:CZe}=hR(),{extractBody:pZe,cloneBody:eJt,mixinBody:tJt,hasFinalizationRegistry:rJt,streamRegistry:nJt,bodyUnusable:iJt}=LD(),bve=Bi(),hZe=require("node:util"),{kEnumerableProperty:xp}=bve,{isValidReasonPhrase:oJt,isCancelled:sJt,isAborted:aJt,isBlobLike:cJt,serializeJavascriptValueToJSONString:lJt,isErrorLike:uJt,isomorphicEncode:dJt,environmentSettingsObject:fJt}=yp(),{redirectStatusSet:pJt,nullBodyStatus:hJt}=ZF(),{kState:Ja,kHeaders:oE}=cT(),{webidl:yi}=Lu(),{FormData:mJt}=oO(),{URLSerializer:mZe}=o0(),{kConstruct:XX}=xa(),Ive=require("node:assert"),{types:gJt}=require("node:util"),AJt=new TextEncoder("utf-8"),mR=class t{static{s(this,"Response")}static error(){return DO(ZX(),"immutable")}static json(e,r={}){yi.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=yi.converters.ResponseInit(r));let n=AJt.encode(lJt(e)),i=pZe(n),o=DO(eB({}),"response");return gZe(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){yi.argumentLengthCheck(arguments,1,"Response.redirect"),e=yi.converters.USVString(e),r=yi.converters["unsigned short"](r);let n;try{n=new URL(e,fJt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!pJt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=DO(eB({}),"immutable");i[Ja].status=r;let o=dJt(mZe(n));return i[Ja].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(yi.util.markAsUncloneable(this),e===XX)return;e!==null&&(e=yi.converters.BodyInit(e)),r=yi.converters.ResponseInit(r),this[Ja]=eB({}),this[oE]=new AZe(XX),yZe(this[oE],"response"),CZe(this[oE],this[Ja].headersList);let n=null;if(e!=null){let[i,o]=pZe(e);n={body:i,type:o}}gZe(this,r,n)}get type(){return yi.brandCheck(this,t),this[Ja].type}get url(){yi.brandCheck(this,t);let e=this[Ja].urlList,r=e[e.length-1]??null;return r===null?"":mZe(r,!0)}get redirected(){return yi.brandCheck(this,t),this[Ja].urlList.length>1}get status(){return yi.brandCheck(this,t),this[Ja].status}get ok(){return yi.brandCheck(this,t),this[Ja].status>=200&&this[Ja].status<=299}get statusText(){return yi.brandCheck(this,t),this[Ja].statusText}get headers(){return yi.brandCheck(this,t),this[oE]}get body(){return yi.brandCheck(this,t),this[Ja].body?this[Ja].body.stream:null}get bodyUsed(){return yi.brandCheck(this,t),!!this[Ja].body&&bve.isDisturbed(this[Ja].body.stream)}clone(){if(yi.brandCheck(this,t),iJt(this))throw yi.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=Tve(this[Ja]);return DO(e,ZKt(this[oE]))}[hZe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${hZe.formatWithOptions(r,n)}`}};tJt(mR);Object.defineProperties(mR.prototype,{type:xp,url:xp,status:xp,ok:xp,redirected:xp,statusText:xp,headers:xp,clone:xp,body:xp,bodyUsed:xp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(mR,{json:xp,redirect:xp,error:xp});function Tve(t){if(t.internalResponse)return vZe(Tve(t.internalResponse),t.type);let e=eB({...t,body:null});return t.body!=null&&(e.body=eJt(e,t.body)),e}s(Tve,"cloneResponse");function eB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new fZe(t?.headersList):new fZe,urlList:t?.urlList?[...t.urlList]:[]}}s(eB,"makeResponse");function ZX(t){let e=uJt(t);return eB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(ZX,"makeNetworkError");function yJt(t){return t.type==="error"&&t.status===0}s(yJt,"isNetworkError");function JX(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return Ive(!(n in e)),r[n]=i,!0}})}s(JX,"makeFilteredResponse");function vZe(t,e){if(e==="basic")return JX(t,{type:"basic",headersList:t.headersList});if(e==="cors")return JX(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return JX(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return JX(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});Ive(!1)}s(vZe,"filterResponse");function CJt(t,e=null){return Ive(sJt(t)),aJt(t)?ZX(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):ZX(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(CJt,"makeAppropriateNetworkError");function gZe(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!oJt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[Ja].status=e.status),"statusText"in e&&e.statusText!=null&&(t[Ja].statusText=e.statusText),"headers"in e&&e.headers!=null&&XKt(t[oE],e.headers),r){if(hJt.includes(t.status))throw yi.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[Ja].body=r.body,r.type!=null&&!t[Ja].headersList.contains("content-type",!0)&&t[Ja].headersList.append("content-type",r.type,!0)}}s(gZe,"initializeResponse");function DO(t,e){let r=new mR(XX);return r[Ja]=t,r[oE]=new AZe(XX),CZe(r[oE],t.headersList),yZe(r[oE],e),rJt&&t.body?.stream&&nJt.register(r,new WeakRef(t.body.stream)),r}s(DO,"fromInnerResponse");yi.converters.ReadableStream=yi.interfaceConverter(ReadableStream);yi.converters.FormData=yi.interfaceConverter(mJt);yi.converters.URLSearchParams=yi.interfaceConverter(URLSearchParams);yi.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?yi.converters.USVString(t,e,r):cJt(t)?yi.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||gJt.isArrayBuffer(t)?yi.converters.BufferSource(t,e,r):bve.isFormDataLike(t)?yi.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?yi.converters.URLSearchParams(t,e,r):yi.converters.DOMString(t,e,r)};yi.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?yi.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:yi.converters.XMLHttpRequestBodyInit(t,e,r)};yi.converters.ResponseInit=yi.dictionaryConverter([{key:"status",converter:yi.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:yi.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:yi.converters.HeadersInit}]);EZe.exports={isNetworkError:yJt,makeNetworkError:ZX,makeResponse:eB,makeAppropriateNetworkError:CJt,filterResponse:vZe,Response:mR,cloneResponse:Tve,fromInnerResponse:DO}});var TZe=q((cii,IZe)=>{"use strict";d();var{kConnected:xZe,kSize:bZe}=xa(),wve=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[xZe]===0&&this.value[bZe]===0?void 0:this.value}},_ve=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[xZe]===0&&e[bZe]===0&&this.finalizer(r)})}unregister(e){}};IZe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:wve,FinalizationRegistry:_ve}):{WeakRef,FinalizationRegistry}}});var tB=q((dii,UZe)=>{"use strict";d();var{extractBody:vJt,mixinBody:EJt,cloneBody:xJt,bodyUnusable:wZe}=LD(),{Headers:LZe,fill:bJt,HeadersList:nZ,setHeadersGuard:Rve,getHeadersGuard:IJt,setHeadersList:MZe,getHeadersList:_Ze}=hR(),{FinalizationRegistry:TJt}=TZe()(),tZ=Bi(),SZe=require("node:util"),{isValidHTTPToken:wJt,sameOrigin:RZe,environmentSettingsObject:eZ}=yp(),{forbiddenMethodsSet:_Jt,corsSafeListedMethodsSet:SJt,referrerPolicy:RJt,requestRedirect:kJt,requestMode:PJt,requestCredentials:DJt,requestCache:BJt,requestDuplex:NJt}=ZF(),{kEnumerableProperty:Jc,normalizedMethodRecordsBase:LJt,normalizedMethodRecords:MJt}=tZ,{kHeaders:bp,kSignal:rZ,kState:ta,kDispatcher:Sve}=cT(),{webidl:kn}=Lu(),{URLSerializer:FJt}=o0(),{kConstruct:iZ}=xa(),OJt=require("node:assert"),{getMaxListeners:kZe,setMaxListeners:PZe,getEventListeners:QJt,defaultMaxListeners:DZe}=require("node:events"),UJt=Symbol("abortController"),FZe=new TJt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),oZ=new WeakMap;function BZe(t){return e;function e(){let r=t.deref();if(r!==void 0){FZe.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=oZ.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}oZ.delete(r.signal)}}}}s(BZe,"buildAbort");var NZe=!1,CT=class t{static{s(this,"Request")}constructor(e,r={}){if(kn.util.markAsUncloneable(this),e===iZ)return;let n="Request constructor";kn.argumentLengthCheck(arguments,1,n),e=kn.converters.RequestInfo(e,n,"input"),r=kn.converters.RequestInit(r,n,"init");let i=null,o=null,a=eZ.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[Sve]=r.dispatcher;let E;try{E=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(E.username||E.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=sZ({urlList:[E]}),o="cors"}else this[Sve]=r.dispatcher||e[Sve],OJt(e instanceof t),i=e[ta],c=e[rZ];let l=eZ.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&RZe(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=sZ({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:eZ.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let E=r.referrer;if(E==="")i.referrer="no-referrer";else{let b;try{b=new URL(E,a)}catch(_){throw new TypeError(`Referrer "${E}" is not a valid URL.`,{cause:_})}b.protocol==="about:"&&b.hostname==="client"||l&&!RZe(b,eZ.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw kn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let E=r.method,b=MJt[E];if(b!==void 0)i.method=b;else{if(!wJt(E))throw new TypeError(`'${E}' is not a valid HTTP method.`);let _=E.toUpperCase();if(_Jt.has(_))throw new TypeError(`'${E}' HTTP method is unsupported.`);E=LJt[_]??E,i.method=E}!NZe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),NZe=!0)}r.signal!==void 0&&(c=r.signal),this[ta]=i;let h=new AbortController;if(this[rZ]=h.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)h.abort(c.reason);else{this[UJt]=h;let E=new WeakRef(h),b=BZe(E);try{(typeof kZe=="function"&&kZe(c)===DZe||QJt(c,"abort").length>=DZe)&&PZe(1500,c)}catch{}tZ.addAbortListener(c,b),FZe.register(h,{signal:c,abort:b},b)}}if(this[bp]=new LZe(iZ),MZe(this[bp],i.headersList),Rve(this[bp],"request"),p==="no-cors"){if(!SJt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);Rve(this[bp],"request-no-cors")}if(f){let E=_Ze(this[bp]),b=r.headers!==void 0?r.headers:new nZ(E);if(E.clear(),b instanceof nZ){for(let{name:_,value:S}of b.rawValues())E.append(_,S,!1);E.cookies=b.cookies}else bJt(this[bp],b)}let m=e instanceof t?e[ta].body:null;if((r.body!=null||m!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[E,b]=vJt(r.body,i.keepalive);g=E,b&&!_Ze(this[bp]).contains("content-type",!0)&&this[bp].append("content-type",b)}let A=g??m;if(A!=null&&A.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let y=A;if(g==null&&m!=null){if(wZe(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let E=new TransformStream;m.stream.pipeThrough(E),y={source:m.source,length:m.length,stream:E.readable}}this[ta].body=y}get method(){return kn.brandCheck(this,t),this[ta].method}get url(){return kn.brandCheck(this,t),FJt(this[ta].url)}get headers(){return kn.brandCheck(this,t),this[bp]}get destination(){return kn.brandCheck(this,t),this[ta].destination}get referrer(){return kn.brandCheck(this,t),this[ta].referrer==="no-referrer"?"":this[ta].referrer==="client"?"about:client":this[ta].referrer.toString()}get referrerPolicy(){return kn.brandCheck(this,t),this[ta].referrerPolicy}get mode(){return kn.brandCheck(this,t),this[ta].mode}get credentials(){return this[ta].credentials}get cache(){return kn.brandCheck(this,t),this[ta].cache}get redirect(){return kn.brandCheck(this,t),this[ta].redirect}get integrity(){return kn.brandCheck(this,t),this[ta].integrity}get keepalive(){return kn.brandCheck(this,t),this[ta].keepalive}get isReloadNavigation(){return kn.brandCheck(this,t),this[ta].reloadNavigation}get isHistoryNavigation(){return kn.brandCheck(this,t),this[ta].historyNavigation}get signal(){return kn.brandCheck(this,t),this[rZ]}get body(){return kn.brandCheck(this,t),this[ta].body?this[ta].body.stream:null}get bodyUsed(){return kn.brandCheck(this,t),!!this[ta].body&&tZ.isDisturbed(this[ta].body.stream)}get duplex(){return kn.brandCheck(this,t),"half"}clone(){if(kn.brandCheck(this,t),wZe(this))throw new TypeError("unusable");let e=OZe(this[ta]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=oZ.get(this.signal);n===void 0&&(n=new Set,oZ.set(this.signal,n));let i=new WeakRef(r);n.add(i),tZ.addAbortListener(r.signal,BZe(i))}return QZe(e,r.signal,IJt(this[bp]))}[SZe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${SZe.formatWithOptions(r,n)}`}};EJt(CT);function sZ(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new nZ(t.headersList):new nZ}}s(sZ,"makeRequest");function OZe(t){let e=sZ({...t,body:null});return t.body!=null&&(e.body=xJt(e,t.body)),e}s(OZe,"cloneRequest");function QZe(t,e,r){let n=new CT(iZ);return n[ta]=t,n[rZ]=e,n[bp]=new LZe(iZ),MZe(n[bp],t.headersList),Rve(n[bp],r),n}s(QZe,"fromInnerRequest");Object.defineProperties(CT.prototype,{method:Jc,url:Jc,headers:Jc,redirect:Jc,clone:Jc,signal:Jc,duplex:Jc,destination:Jc,body:Jc,bodyUsed:Jc,isHistoryNavigation:Jc,isReloadNavigation:Jc,keepalive:Jc,integrity:Jc,cache:Jc,credentials:Jc,attribute:Jc,referrerPolicy:Jc,referrer:Jc,mode:Jc,[Symbol.toStringTag]:{value:"Request",configurable:!0}});kn.converters.Request=kn.interfaceConverter(CT);kn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?kn.converters.USVString(t,e,r):t instanceof CT?kn.converters.Request(t,e,r):kn.converters.USVString(t,e,r)};kn.converters.AbortSignal=kn.interfaceConverter(AbortSignal);kn.converters.RequestInit=kn.dictionaryConverter([{key:"method",converter:kn.converters.ByteString},{key:"headers",converter:kn.converters.HeadersInit},{key:"body",converter:kn.nullableConverter(kn.converters.BodyInit)},{key:"referrer",converter:kn.converters.USVString},{key:"referrerPolicy",converter:kn.converters.DOMString,allowedValues:RJt},{key:"mode",converter:kn.converters.DOMString,allowedValues:PJt},{key:"credentials",converter:kn.converters.DOMString,allowedValues:DJt},{key:"cache",converter:kn.converters.DOMString,allowedValues:BJt},{key:"redirect",converter:kn.converters.DOMString,allowedValues:kJt},{key:"integrity",converter:kn.converters.DOMString},{key:"keepalive",converter:kn.converters.boolean},{key:"signal",converter:kn.nullableConverter(t=>kn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:kn.converters.any},{key:"duplex",converter:kn.converters.DOMString,allowedValues:NJt},{key:"dispatcher",converter:kn.converters.any}]);UZe.exports={Request:CT,makeRequest:sZ,fromInnerRequest:QZe,cloneRequest:OZe}});var LO=q((hii,tet)=>{"use strict";d();var{makeNetworkError:ns,makeAppropriateNetworkError:aZ,filterResponse:kve,makeResponse:cZ,fromInnerResponse:qJt}=BO(),{HeadersList:qZe}=hR(),{Request:HJt,cloneRequest:WJt}=tB(),vT=require("node:zlib"),{bytesMatch:$Jt,makePolicyContainer:jJt,clonePolicyContainer:GJt,requestBadPort:VJt,TAOCheck:zJt,appendRequestOriginHeader:YJt,responseLocationURL:KJt,requestCurrentURL:xC,setRequestReferrerPolicyOnRedirect:JJt,tryUpgradeRequestToAPotentiallyTrustworthyURL:XJt,createOpaqueTimingInfo:Lve,appendFetchMetadata:ZJt,corsCheck:eXt,crossOriginResourcePolicyCheck:tXt,determineRequestsReferrer:rXt,coarsenedSharedCurrentTime:NO,createDeferredPromise:nXt,isBlobLike:iXt,sameOrigin:Nve,isCancelled:gR,isAborted:HZe,isErrorLike:oXt,fullyReadBody:sXt,readableStreamClose:aXt,isomorphicEncode:lZ,urlIsLocal:cXt,urlIsHttpHttpsScheme:Mve,urlHasHttpsScheme:lXt,clampAndCoarsenConnectionTimingInfo:uXt,simpleRangeHeaderValue:dXt,buildContentRange:fXt,createInflate:pXt,extractMimeType:hXt}=yp(),{kState:GZe,kDispatcher:mXt}=cT(),AR=require("node:assert"),{safelyExtractBody:Fve,extractBody:WZe}=LD(),{redirectStatusSet:VZe,nullBodyStatus:zZe,safeMethodsSet:gXt,requestBodyHeader:AXt,subresourceSet:yXt}=ZF(),CXt=require("node:events"),{Readable:vXt,pipeline:EXt,finished:xXt}=require("node:stream"),{addAbortListener:bXt,isErrored:IXt,isReadable:uZ,bufferToLowerCasedHeaderName:$Ze}=Bi(),{dataURLProcessor:TXt,serializeAMimeType:wXt,minimizeSupportedMimeType:_Xt}=o0(),{getGlobalDispatcher:SXt}=VX(),{webidl:RXt}=Lu(),{STATUS_CODES:kXt}=require("node:http"),PXt=["GET","HEAD"],DXt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",Pve,dZ=class extends CXt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function BXt(t){YZe(t,"fetch")}s(BXt,"handleFetchDone");function NXt(t,e=void 0){RXt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=nXt(),n;try{n=new HJt(t,e)}catch(f){return r.reject(f),r.promise}let i=n[GZe];if(n.signal.aborted)return Dve(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return bXt(n.signal,()=>{c=!0,AR(l!=null),l.abort(n.signal.reason);let f=a?.deref();Dve(r,i,f,n.signal.reason)}),l=JZe({request:i,processResponseEndOfBody:BXt,processResponse:s(f=>{if(!c){if(f.aborted){Dve(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(qJt(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[mXt]}),r.promise}s(NXt,"fetch");function YZe(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;Mve(r)&&n!==null&&(t.timingAllowPassed||(n=Lve({startTime:n.startTime}),i=""),n.endTime=NO(),t.timingInfo=n,KZe(n,r.href,e,globalThis,i))}s(YZe,"finalizeAndReportTiming");var KZe=performance.markResourceTiming;function Dve(t,e,r,n){if(t&&t.reject(n),e.body!=null&&uZ(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[GZe];i.body!=null&&uZ(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(Dve,"abortFetch");function JZe({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=SXt()}){AR(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=NO(u),p=Lve({startTime:f}),h={controller:new dZ(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return AR(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=GJt(t.client.policyContainer):t.policyContainer=jJt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,yXt.has(t.destination),XZe(h).catch(m=>{h.controller.terminate(m)}),h.controller}s(JZe,"fetching");async function XZe(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!cXt(xC(r))&&(n=ns("local URLs only")),XJt(r),VJt(r)==="blocked"&&(n=ns("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=rXt(r)),n===null&&(n=await(async()=>{let o=xC(r);return Nve(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await jZe(t)):r.mode==="same-origin"?ns('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?ns('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await jZe(t)):Mve(xC(r))?(r.responseTainting="cors",await ZZe(t)):ns("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=kve(n,"basic"):r.responseTainting==="cors"?n=kve(n,"cors"):r.responseTainting==="opaque"?n=kve(n,"opaque"):AR(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=ns()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||zZe.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>Bve(t,ns(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!$Jt(c,r.integrity)){o("integrity mismatch");return}n.body=Fve(c)[0],Bve(t,n)},"processBody");await sXt(n.body,a,o)}else Bve(t,n)}s(XZe,"mainFetch");function jZe(t){if(gR(t)&&t.request.redirectCount===0)return Promise.resolve(aZ(t));let{request:e}=t,{protocol:r}=xC(e);switch(r){case"about:":return Promise.resolve(ns("about scheme is not supported"));case"blob:":{Pve||(Pve=require("node:buffer").resolveObjectURL);let n=xC(e);if(n.search.length!==0)return Promise.resolve(ns("NetworkError when attempting to fetch resource."));let i=Pve(n.toString());if(e.method!=="GET"||!iXt(i))return Promise.resolve(ns("invalid method"));let o=cZ(),a=i.size,c=lZ(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=dXt(u,!0);if(f==="failure")return Promise.resolve(ns("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:h}=f;if(p===null)p=a-h,h=p+h-1;else{if(p>=a)return Promise.resolve(ns("Range start is greater than the blob's size."));(h===null||h>=a)&&(h=a-1)}let m=i.slice(p,h,l),g=WZe(m);o.body=g[0];let A=lZ(`${m.size}`),y=fXt(p,h,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",A,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",y,!0)}else{let u=WZe(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=xC(e),i=TXt(n);if(i==="failure")return Promise.resolve(ns("failed to fetch the data URL"));let o=wXt(i.mimeType);return Promise.resolve(cZ({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:Fve(i.body)[0]}))}case"file:":return Promise.resolve(ns("not implemented... yet..."));case"http:":case"https:":return ZZe(t).catch(n=>ns(n));default:return Promise.resolve(ns("unknown scheme"))}}s(jZe,"schemeFetch");function LXt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(LXt,"finalizeResponse");function Bve(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=Lve(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=hXt(e.headersList);f!=="failure"&&(l.contentType=_Xt(f))}t.request.initiatorType!=null&&KZe(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():xXt(i.body.stream,()=>{n()})}s(Bve,"fetchFinale");async function ZZe(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await eet(t),e.responseTainting==="cors"&&eXt(e,r)==="failure")return ns("cors failure");zJt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&tXt(e.origin,e.client,e.destination,n)==="blocked"?ns("blocked"):(VZe.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=ns("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await MXt(t,r):AR(!1)),r.timingInfo=i,r)}s(ZZe,"httpFetch");function MXt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=KJt(n,xC(r).hash),i==null)return e}catch(a){return Promise.resolve(ns(a))}if(!Mve(i))return Promise.resolve(ns("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(ns("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!Nve(r,i))return Promise.resolve(ns('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(ns('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(ns());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!PXt.includes(r.method)){r.method="GET",r.body=null;for(let a of AXt)r.headersList.delete(a)}Nve(xC(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(AR(r.body.source!=null),r.body=Fve(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=NO(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),JJt(r,n),XZe(t,!0)}s(MXt,"httpRedirectFetch");async function eet(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=WJt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=lZ(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",lZ(o.referrer.href),!0),YJt(o),ZJt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",DXt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(lXt(xC(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return ns("only if cached");let h=await FXt(i,u,r);!gXt.has(o.method)&&h.status>=200&&h.status<=399,l&&h.status,a==null&&(a=h)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?ns():gR(t)?aZ(t):ns("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(gR(t))return aZ(t);t.controller.connection.destroy(),a=await eet(t,e,!0)}return a}s(eet,"httpNetworkOrCacheFetch");async function FXt(t,e=!1,r=!1){AR(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,A=!0){this.destroyed||(this.destroyed=!0,A&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(E){gR(t)||(yield E,t.processRequestBodyChunkLength?.(E.byteLength))},"processBodyChunk"),A=s(()=>{gR(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),y=s(E=>{gR(t)||(E.name==="AbortError"?t.controller.abort():t.controller.terminate(E))},"processBodyError");l=async function*(){try{for await(let E of n.body.stream)yield*g(E);A()}catch(E){y(E)}}()}try{let{body:g,status:A,statusText:y,headersList:E,socket:b}=await m({body:l});if(b)i=cZ({status:A,statusText:y,headersList:E,socket:b});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=cZ({status:A,statusText:y,headersList:E})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),aZ(t,g)):ns(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{gR(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=h,t.controller.on("terminated",h),t.controller.resume=async()=>{for(;;){let g,A;try{let{done:E,value:b}=await t.controller.next();if(HZe(t))break;g=E?void 0:b}catch(E){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=E,A=!0)}if(g===void 0){aXt(t.controller.controller),LXt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,A){t.controller.terminate(g);return}let y=new Uint8Array(g);if(y.byteLength&&t.controller.controller.enqueue(y),IXt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function h(g){HZe(t)?(i.aborted=!0,uZ(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):uZ(p)&&t.controller.controller.error(new TypeError("terminated",{cause:oXt(g)?g:void 0})),t.controller.connection.destroy()}return s(h,"onAborted"),i;function m({body:g}){let A=xC(n),y=t.controller.dispatcher;return new Promise((E,b)=>y.dispatch({path:A.pathname+A.search,origin:A.origin,method:n.method,body:y.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:S}=t.controller;o.finalConnectionTimingInfo=uXt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),S.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=S.abort=_),o.finalNetworkRequestStartTime=NO(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=NO(t.crossOriginIsolatedCapability)},onHeaders(_,S,P,B){if(_<200)return;let F=[],Y="",ee=new qZe;for(let K=0;K<S.length;K+=2)ee.append($Ze(S[K]),S[K+1].toString("latin1"),!0);let V=ee.get("content-encoding",!0);V&&(F=V.toLowerCase().split(",").map(K=>K.trim())),Y=ee.get("location",!0),this.body=new vXt({read:P});let H=[],U=Y&&n.redirect==="follow"&&VZe.has(_);if(F.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!zZe.includes(_)&&!U)for(let K=F.length-1;K>=0;--K){let j=F[K];if(j==="x-gzip"||j==="gzip")H.push(vT.createGunzip({flush:vT.constants.Z_SYNC_FLUSH,finishFlush:vT.constants.Z_SYNC_FLUSH}));else if(j==="deflate")H.push(pXt({flush:vT.constants.Z_SYNC_FLUSH,finishFlush:vT.constants.Z_SYNC_FLUSH}));else if(j==="br")H.push(vT.createBrotliDecompress({flush:vT.constants.BROTLI_OPERATION_FLUSH,finishFlush:vT.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let X=this.onError.bind(this);return E({status:_,statusText:B,headersList:ee,body:H.length?EXt(this.body,...H,K=>{K&&this.onError(K)}).on("error",X):this.body.on("error",X)}),!0},onData(_){if(t.controller.dump)return;let S=_;return o.encodedBodySize+=S.byteLength,this.body.push(S)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),b(_)},onUpgrade(_,S,P){if(_!==101)return;let B=new qZe;for(let F=0;F<S.length;F+=2)B.append($Ze(S[F]),S[F+1].toString("latin1"),!0);return E({status:_,statusText:kXt[_],headersList:B,socket:P}),!0}}))}s(m,"dispatch")}s(FXt,"httpNetworkFetch");tet.exports={fetch:NXt,Fetch:dZ,fetching:JZe,finalizeAndReportTiming:YZe}});var Ove=q((Aii,ret)=>{"use strict";d();ret.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var iet=q((Cii,net)=>{"use strict";d();var{webidl:Ip}=Lu(),fZ=Symbol("ProgressEvent state"),Qve=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=Ip.converters.DOMString(e,"ProgressEvent constructor","type"),r=Ip.converters.ProgressEventInit(r??{}),super(e,r),this[fZ]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return Ip.brandCheck(this,t),this[fZ].lengthComputable}get loaded(){return Ip.brandCheck(this,t),this[fZ].loaded}get total(){return Ip.brandCheck(this,t),this[fZ].total}};Ip.converters.ProgressEventInit=Ip.dictionaryConverter([{key:"lengthComputable",converter:Ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:Ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:Ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:Ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);net.exports={ProgressEvent:Qve}});var set=q((xii,oet)=>{"use strict";d();function OXt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(OXt,"getEncoding");oet.exports={getEncoding:OXt}});var met=q((Tii,het)=>{"use strict";d();var{kState:rB,kError:Uve,kResult:aet,kAborted:MO,kLastProgressEventFired:qve}=Ove(),{ProgressEvent:QXt}=iet(),{getEncoding:cet}=set(),{serializeAMimeType:UXt,parseMIMEType:uet}=o0(),{types:qXt}=require("node:util"),{StringDecoder:det}=require("string_decoder"),{btoa:fet}=require("node:buffer"),HXt={enumerable:!0,writable:!1,configurable:!1};function WXt(t,e,r,n){if(t[rB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[rB]="loading",t[aet]=null,t[Uve]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[MO];)try{let{done:u,value:f}=await c;if(l&&!t[MO]&&queueMicrotask(()=>{ET("loadstart",t)}),l=!1,!u&&qXt.isUint8Array(f))a.push(f),(t[qve]===void 0||Date.now()-t[qve]>=50)&&!t[MO]&&(t[qve]=Date.now(),queueMicrotask(()=>{ET("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[rB]="done";try{let p=$Xt(a,r,e.type,n);if(t[MO])return;t[aet]=p,ET("load",t)}catch(p){t[Uve]=p,ET("error",t)}t[rB]!=="loading"&&ET("loadend",t)});break}}catch(u){if(t[MO])return;queueMicrotask(()=>{t[rB]="done",t[Uve]=u,ET("error",t),t[rB]!=="loading"&&ET("loadend",t)});break}})()}s(WXt,"readOperation");function ET(t,e){let r=new QXt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(ET,"fireAProgressEvent");function $Xt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=uet(r||"application/octet-stream");o!=="failure"&&(i+=UXt(o)),i+=";base64,";let a=new det("latin1");for(let c of t)i+=fet(a.write(c));return i+=fet(a.end()),i}case"Text":{let i="failure";if(n&&(i=cet(n)),i==="failure"&&r){let o=uet(r);o!=="failure"&&(i=cet(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),jXt(t,i)}case"ArrayBuffer":return pet(t).buffer;case"BinaryString":{let i="",o=new det("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s($Xt,"packageData");function jXt(t,e){let r=pet(t),n=GXt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(jXt,"decode");function GXt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(GXt,"BOMSniffing");function pet(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(pet,"combineByteSequences");het.exports={staticPropertyDescriptors:HXt,readOperation:WXt,fireAProgressEvent:ET}});var Cet=q((Sii,yet)=>{"use strict";d();var{staticPropertyDescriptors:nB,readOperation:pZ,fireAProgressEvent:get}=met(),{kState:yR,kError:Aet,kResult:hZ,kEvents:Wo,kAborted:VXt}=Ove(),{webidl:ds}=Lu(),{kEnumerableProperty:c0}=Bi(),sA=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[yR]="empty",this[hZ]=null,this[Aet]=null,this[Wo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){ds.brandCheck(this,t),ds.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=ds.converters.Blob(e,{strict:!1}),pZ(this,e,"ArrayBuffer")}readAsBinaryString(e){ds.brandCheck(this,t),ds.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=ds.converters.Blob(e,{strict:!1}),pZ(this,e,"BinaryString")}readAsText(e,r=void 0){ds.brandCheck(this,t),ds.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=ds.converters.Blob(e,{strict:!1}),r!==void 0&&(r=ds.converters.DOMString(r,"FileReader.readAsText","encoding")),pZ(this,e,"Text",r)}readAsDataURL(e){ds.brandCheck(this,t),ds.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=ds.converters.Blob(e,{strict:!1}),pZ(this,e,"DataURL")}abort(){if(this[yR]==="empty"||this[yR]==="done"){this[hZ]=null;return}this[yR]==="loading"&&(this[yR]="done",this[hZ]=null),this[VXt]=!0,get("abort",this),this[yR]!=="loading"&&get("loadend",this)}get readyState(){switch(ds.brandCheck(this,t),this[yR]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return ds.brandCheck(this,t),this[hZ]}get error(){return ds.brandCheck(this,t),this[Aet]}get onloadend(){return ds.brandCheck(this,t),this[Wo].loadend}set onloadend(e){ds.brandCheck(this,t),this[Wo].loadend&&this.removeEventListener("loadend",this[Wo].loadend),typeof e=="function"?(this[Wo].loadend=e,this.addEventListener("loadend",e)):this[Wo].loadend=null}get onerror(){return ds.brandCheck(this,t),this[Wo].error}set onerror(e){ds.brandCheck(this,t),this[Wo].error&&this.removeEventListener("error",this[Wo].error),typeof e=="function"?(this[Wo].error=e,this.addEventListener("error",e)):this[Wo].error=null}get onloadstart(){return ds.brandCheck(this,t),this[Wo].loadstart}set onloadstart(e){ds.brandCheck(this,t),this[Wo].loadstart&&this.removeEventListener("loadstart",this[Wo].loadstart),typeof e=="function"?(this[Wo].loadstart=e,this.addEventListener("loadstart",e)):this[Wo].loadstart=null}get onprogress(){return ds.brandCheck(this,t),this[Wo].progress}set onprogress(e){ds.brandCheck(this,t),this[Wo].progress&&this.removeEventListener("progress",this[Wo].progress),typeof e=="function"?(this[Wo].progress=e,this.addEventListener("progress",e)):this[Wo].progress=null}get onload(){return ds.brandCheck(this,t),this[Wo].load}set onload(e){ds.brandCheck(this,t),this[Wo].load&&this.removeEventListener("load",this[Wo].load),typeof e=="function"?(this[Wo].load=e,this.addEventListener("load",e)):this[Wo].load=null}get onabort(){return ds.brandCheck(this,t),this[Wo].abort}set onabort(e){ds.brandCheck(this,t),this[Wo].abort&&this.removeEventListener("abort",this[Wo].abort),typeof e=="function"?(this[Wo].abort=e,this.addEventListener("abort",e)):this[Wo].abort=null}};sA.EMPTY=sA.prototype.EMPTY=0;sA.LOADING=sA.prototype.LOADING=1;sA.DONE=sA.prototype.DONE=2;Object.defineProperties(sA.prototype,{EMPTY:nB,LOADING:nB,DONE:nB,readAsArrayBuffer:c0,readAsBinaryString:c0,readAsText:c0,readAsDataURL:c0,abort:c0,readyState:c0,result:c0,error:c0,onloadstart:c0,onprogress:c0,onload:c0,onabort:c0,onerror:c0,onloadend:c0,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(sA,{EMPTY:nB,LOADING:nB,DONE:nB});yet.exports={FileReader:sA}});var mZ=q((Pii,vet)=>{"use strict";d();vet.exports={kConstruct:xa().kConstruct}});var bet=q((Bii,xet)=>{"use strict";d();var zXt=require("node:assert"),{URLSerializer:Eet}=o0(),{isValidHeaderName:YXt}=yp();function KXt(t,e,r=!1){let n=Eet(t,r),i=Eet(e,r);return n===i}s(KXt,"urlEquals");function JXt(t){zXt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),YXt(r)&&e.push(r);return e}s(JXt,"getFieldValues");xet.exports={urlEquals:KXt,getFieldValues:JXt}});var wet=q((Mii,Tet)=>{"use strict";d();var{kConstruct:XXt}=mZ(),{urlEquals:ZXt,getFieldValues:Hve}=bet(),{kEnumerableProperty:CR,isDisturbed:eZt}=Bi(),{webidl:un}=Lu(),{Response:tZt,cloneResponse:rZt,fromInnerResponse:nZt}=BO(),{Request:sE,fromInnerRequest:iZt}=tB(),{kState:aA}=cT(),{fetching:oZt}=LO(),{urlIsHttpHttpsScheme:gZ,createDeferredPromise:iB,readAllBytes:sZt}=yp(),Wve=require("node:assert"),AZ=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==XXt&&un.illegalConstructor(),un.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){un.brandCheck(this,t);let n="Cache.match";un.argumentLengthCheck(arguments,1,n),e=un.converters.RequestInfo(e,n,"request"),r=un.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){un.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=un.converters.RequestInfo(e,n,"request")),r=un.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){un.brandCheck(this,t);let r="Cache.add";un.argumentLengthCheck(arguments,1,r),e=un.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){un.brandCheck(this,t);let r="Cache.addAll";un.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let h of e){if(h===void 0)throw un.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(h=un.converters.RequestInfo(h),typeof h=="string")continue;let m=h[aA];if(!gZ(m.url)||m.method!=="GET")throw un.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let h of e){let m=new sE(h)[aA];if(!gZ(m.url))throw un.errors.exception({header:r,message:"Expected http/s scheme."});m.initiator="fetch",m.destination="subresource",i.push(m);let g=iB();o.push(oZt({request:m,processResponse(A){if(A.type==="error"||A.status===206||A.status<200||A.status>299)g.reject(un.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(A.headersList.contains("vary")){let y=Hve(A.headersList.get("vary"));for(let E of y)if(E==="*"){g.reject(un.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(A){if(A.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(A)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let h of c){let m={type:"put",request:i[u],response:h};l.push(m),u++}let f=iB(),p=null;try{this.#t(l)}catch(h){p=h}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){un.brandCheck(this,t);let n="Cache.put";un.argumentLengthCheck(arguments,2,n),e=un.converters.RequestInfo(e,n,"request"),r=un.converters.Response(r,n,"response");let i=null;if(e instanceof sE?i=e[aA]:i=new sE(e)[aA],!gZ(i.url)||i.method!=="GET")throw un.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[aA];if(o.status===206)throw un.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let m=Hve(o.headersList.get("vary"));for(let g of m)if(g==="*")throw un.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(eZt(o.body.stream)||o.body.stream.locked))throw un.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=rZt(o),c=iB();if(o.body!=null){let g=o.body.stream.getReader();sZt(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=iB(),h=null;try{this.#t(l)}catch(m){h=m}return queueMicrotask(()=>{h===null?p.resolve():p.reject(h)}),p.promise}async delete(e,r={}){un.brandCheck(this,t);let n="Cache.delete";un.argumentLengthCheck(arguments,1,n),e=un.converters.RequestInfo(e,n,"request"),r=un.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof sE){if(i=e[aA],i.method!=="GET"&&!r.ignoreMethod)return!1}else Wve(typeof e=="string"),i=new sE(e)[aA];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=iB(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){un.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=un.converters.RequestInfo(e,n,"request")),r=un.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof sE){if(i=e[aA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new sE(e)[aA]);let o=iB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=iZt(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw un.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw un.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);Wve(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw un.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!gZ(l.url))throw un.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw un.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw un.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);Wve(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!ZXt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=Hve(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof sE){if(i=e[aA],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new sE(e)[aA]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=nZt(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(AZ.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:CR,matchAll:CR,add:CR,addAll:CR,put:CR,delete:CR,keys:CR});var Iet=[{key:"ignoreSearch",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:un.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];un.converters.CacheQueryOptions=un.dictionaryConverter(Iet);un.converters.MultiCacheQueryOptions=un.dictionaryConverter([...Iet,{key:"cacheName",converter:un.converters.DOMString}]);un.converters.Response=un.interfaceConverter(tZt);un.converters["sequence<RequestInfo>"]=un.sequenceConverter(un.converters.RequestInfo);Tet.exports={Cache:AZ}});var Ret=q((Qii,_et)=>{"use strict";d();var{kConstruct:FO}=mZ(),{Cache:yZ}=wet(),{webidl:Ed}=Lu(),{kEnumerableProperty:OO}=Bi(),CZ=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==FO&&Ed.illegalConstructor(),Ed.util.markAsUncloneable(this)}async match(e,r={}){if(Ed.brandCheck(this,t),Ed.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Ed.converters.RequestInfo(e),r=Ed.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new yZ(FO,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new yZ(FO,n).match(e,r);if(o!==void 0)return o}}async has(e){Ed.brandCheck(this,t);let r="CacheStorage.has";return Ed.argumentLengthCheck(arguments,1,r),e=Ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){Ed.brandCheck(this,t);let r="CacheStorage.open";if(Ed.argumentLengthCheck(arguments,1,r),e=Ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new yZ(FO,i)}let n=[];return this.#e.set(e,n),new yZ(FO,n)}async delete(e){Ed.brandCheck(this,t);let r="CacheStorage.delete";return Ed.argumentLengthCheck(arguments,1,r),e=Ed.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return Ed.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(CZ.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:OO,has:OO,open:OO,delete:OO,keys:OO});_et.exports={CacheStorage:CZ}});var Pet=q((Hii,ket)=>{"use strict";d();ket.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var $ve=q(($ii,Met)=>{"use strict";d();function aZt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(aZt,"isCTLExcludingHtab");function Det(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(Det,"validateCookieName");function Bet(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(Bet,"validateCookieValue");function Net(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(Net,"validateCookiePath");function cZt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(cZt,"validateCookieDomain");var lZt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],uZt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vZ=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function Let(t){return typeof t=="number"&&(t=new Date(t)),`${lZt[t.getUTCDay()]}, ${vZ[t.getUTCDate()]} ${uZt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${vZ[t.getUTCHours()]}:${vZ[t.getUTCMinutes()]}:${vZ[t.getUTCSeconds()]} GMT`}s(Let,"toIMFDate");function dZt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(dZt,"validateCookieMaxAge");function fZt(t){if(t.name.length===0)return null;Det(t.name),Bet(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(dZt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(cZt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(Net(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${Let(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(fZt,"stringify");Met.exports={isCTLExcludingHtab:aZt,validateCookieName:Det,validateCookiePath:Net,validateCookieValue:Bet,toIMFDate:Let,stringify:fZt}});var Oet=q((Vii,Fet)=>{"use strict";d();var{maxNameValuePairSize:pZt,maxAttributeValueSize:hZt}=Pet(),{isCTLExcludingHtab:mZt}=$ve(),{collectASequenceOfCodePointsFast:EZ}=o0(),gZt=require("node:assert");function AZt(t){if(mZt(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=EZ(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=EZ("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>pZt?null:{name:n,value:i,...oB(r)}}s(AZt,"parseSetCookie");function oB(t,e={}){if(t.length===0)return e;gZt(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=EZ(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=EZ("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>hZt)return oB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return oB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return oB(t,e)}s(oB,"parseUnparsedAttributes");Fet.exports={parseSetCookie:AZt,parseUnparsedAttributes:oB}});var qet=q((Kii,Uet)=>{"use strict";d();var{parseSetCookie:yZt}=Oet(),{stringify:CZt}=$ve(),{webidl:no}=Lu(),{Headers:xZ}=hR();function vZt(t){no.argumentLengthCheck(arguments,1,"getCookies"),no.brandCheck(t,xZ,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(vZt,"getCookies");function EZt(t,e,r){no.brandCheck(t,xZ,{strict:!1});let n="deleteCookie";no.argumentLengthCheck(arguments,2,n),e=no.converters.DOMString(e,n,"name"),r=no.converters.DeleteCookieAttributes(r),Qet(t,{name:e,value:"",expires:new Date(0),...r})}s(EZt,"deleteCookie");function xZt(t){no.argumentLengthCheck(arguments,1,"getSetCookies"),no.brandCheck(t,xZ,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>yZt(r)):[]}s(xZt,"getSetCookies");function Qet(t,e){no.argumentLengthCheck(arguments,2,"setCookie"),no.brandCheck(t,xZ,{strict:!1}),e=no.converters.Cookie(e);let r=CZt(e);r&&t.append("Set-Cookie",r)}s(Qet,"setCookie");no.converters.DeleteCookieAttributes=no.dictionaryConverter([{converter:no.nullableConverter(no.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);no.converters.Cookie=no.dictionaryConverter([{converter:no.converters.DOMString,key:"name"},{converter:no.converters.DOMString,key:"value"},{converter:no.nullableConverter(t=>typeof t=="number"?no.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:no.nullableConverter(no.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:no.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:no.sequenceConverter(no.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);Uet.exports={getCookies:vZt,deleteCookie:EZt,getSetCookies:xZt,setCookie:Qet}});var aB=q((Zii,Wet)=>{"use strict";d();var{webidl:on}=Lu(),{kEnumerableProperty:l0}=Bi(),{kConstruct:Het}=xa(),{MessagePort:bZt}=require("node:worker_threads"),sB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===Het){super(arguments[1],arguments[2]),on.util.markAsUncloneable(this);return}let n="MessageEvent constructor";on.argumentLengthCheck(arguments,1,n),e=on.converters.DOMString(e,n,"type"),r=on.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,on.util.markAsUncloneable(this)}get data(){return on.brandCheck(this,t),this.#e.data}get origin(){return on.brandCheck(this,t),this.#e.origin}get lastEventId(){return on.brandCheck(this,t),this.#e.lastEventId}get source(){return on.brandCheck(this,t),this.#e.source}get ports(){return on.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return on.brandCheck(this,t),on.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(Het,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:IZt}=sB;delete sB.createFastMessageEvent;var bZ=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";on.argumentLengthCheck(arguments,1,n),e=on.converters.DOMString(e,n,"type"),r=on.converters.CloseEventInit(r),super(e,r),this.#e=r,on.util.markAsUncloneable(this)}get wasClean(){return on.brandCheck(this,t),this.#e.wasClean}get code(){return on.brandCheck(this,t),this.#e.code}get reason(){return on.brandCheck(this,t),this.#e.reason}},IZ=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";on.argumentLengthCheck(arguments,1,n),super(e,r),on.util.markAsUncloneable(this),e=on.converters.DOMString(e,n,"type"),r=on.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return on.brandCheck(this,t),this.#e.message}get filename(){return on.brandCheck(this,t),this.#e.filename}get lineno(){return on.brandCheck(this,t),this.#e.lineno}get colno(){return on.brandCheck(this,t),this.#e.colno}get error(){return on.brandCheck(this,t),this.#e.error}};Object.defineProperties(sB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:l0,origin:l0,lastEventId:l0,source:l0,ports:l0,initMessageEvent:l0});Object.defineProperties(bZ.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:l0,code:l0,wasClean:l0});Object.defineProperties(IZ.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:l0,filename:l0,lineno:l0,colno:l0,error:l0});on.converters.MessagePort=on.interfaceConverter(bZt);on.converters["sequence<MessagePort>"]=on.sequenceConverter(on.converters.MessagePort);var jve=[{key:"bubbles",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];on.converters.MessageEventInit=on.dictionaryConverter([...jve,{key:"data",converter:on.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:on.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:on.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:on.nullableConverter(on.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:on.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);on.converters.CloseEventInit=on.dictionaryConverter([...jve,{key:"wasClean",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:on.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:on.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);on.converters.ErrorEventInit=on.dictionaryConverter([...jve,{key:"message",converter:on.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:on.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:on.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:on.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:on.converters.any}]);Wet.exports={MessageEvent:sB,CloseEvent:bZ,ErrorEvent:IZ,createFastMessageEvent:IZt}});var vR=q((roi,$et)=>{"use strict";d();var TZt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",wZt={enumerable:!0,writable:!1,configurable:!1},_Zt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},SZt={NOT_SENT:0,PROCESSING:1,SENT:2},RZt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},kZt=2**16-1,PZt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},DZt=Buffer.allocUnsafe(0),BZt={string:1,typedArray:2,arrayBuffer:3,blob:4};$et.exports={uid:TZt,sentCloseFrameState:SZt,staticPropertyDescriptors:wZt,states:_Zt,opcodes:RZt,maxUnsigned16Bit:kZt,parserStates:PZt,emptyBuffer:DZt,sendHints:BZt}});var QO=q((ioi,jet)=>{"use strict";d();jet.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var HO=q((soi,ett)=>{"use strict";d();var{kReadyState:UO,kController:NZt,kResponse:LZt,kBinaryType:MZt,kWebSocketURL:FZt}=QO(),{states:qO,opcodes:xT}=vR(),{ErrorEvent:OZt,createFastMessageEvent:QZt}=aB(),{isUtf8:UZt}=require("node:buffer"),{collectASequenceOfCodePointsFast:qZt,removeHTTPWhitespace:Get}=o0();function HZt(t){return t[UO]===qO.CONNECTING}s(HZt,"isConnecting");function WZt(t){return t[UO]===qO.OPEN}s(WZt,"isEstablished");function $Zt(t){return t[UO]===qO.CLOSING}s($Zt,"isClosing");function jZt(t){return t[UO]===qO.CLOSED}s(jZt,"isClosed");function Gve(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(Gve,"fireEvent");function GZt(t,e,r){if(t[UO]!==qO.OPEN)return;let n;if(e===xT.TEXT)try{n=Zet(r)}catch{zet(t,"Received invalid UTF-8 in text frame.");return}else e===xT.BINARY&&(t[MZt]==="blob"?n=new Blob([r]):n=VZt(r));Gve("message",t,QZt,{origin:t[FZt].origin,data:n})}s(GZt,"websocketMessageReceived");function VZt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(VZt,"toArrayBuffer");function zZt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(zZt,"isValidSubprotocol");function YZt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(YZt,"isValidStatusCode");function zet(t,e){let{[NZt]:r,[LZt]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&Gve("error",t,(i,o)=>new OZt(i,o),{error:new Error(e),message:e})}s(zet,"failWebsocketConnection");function Yet(t){return t===xT.CLOSE||t===xT.PING||t===xT.PONG}s(Yet,"isControlFrame");function Ket(t){return t===xT.CONTINUATION}s(Ket,"isContinuationFrame");function Jet(t){return t===xT.TEXT||t===xT.BINARY}s(Jet,"isTextBinaryFrame");function KZt(t){return Jet(t)||Ket(t)||Yet(t)}s(KZt,"isValidOpcode");function JZt(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=qZt(";",t,e),[i,o=""]=n.split("=");r.set(Get(i,!0,!1),Get(o,!1,!0)),e.position++}return r}s(JZt,"parseExtensions");function XZt(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(XZt,"isValidClientWindowBits");var Xet=typeof process.versions.icu=="string",Vet=Xet?new TextDecoder("utf-8",{fatal:!0}):void 0,Zet=Xet?Vet.decode.bind(Vet):function(t){if(UZt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};ett.exports={isConnecting:HZt,isEstablished:WZt,isClosing:$Zt,isClosed:jZt,fireEvent:Gve,isValidSubprotocol:zZt,isValidStatusCode:YZt,failWebsocketConnection:zet,websocketMessageReceived:GZt,utf8Decode:Zet,isControlFrame:Yet,isContinuationFrame:Ket,isTextBinaryFrame:Jet,isValidOpcode:KZt,parseExtensions:JZt,isValidClientWindowBits:XZt}});var wZ=q((loi,ttt)=>{"use strict";d();var{maxUnsigned16Bit:ZZt}=vR(),TZ=16386,Vve,WO=null,cB=TZ;try{Vve=require("node:crypto")}catch{Vve={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function eer(){return cB===TZ&&(cB=0,Vve.randomFillSync(WO??=Buffer.allocUnsafe(TZ),0,TZ)),[WO[cB++],WO[cB++],WO[cB++],WO[cB++]]}s(eer,"generateMask");var zve=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=eer(),i=r?.byteLength??0,o=i,a=6;i>ZZt?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};ttt.exports={WebsocketFrameSend:zve}});var Kve=q((foi,ctt)=>{"use strict";d();var{uid:ter,states:$O,sentCloseFrameState:_Z,emptyBuffer:rer,opcodes:ner}=vR(),{kReadyState:jO,kSentClose:SZ,kByteParser:ntt,kReceivedClose:rtt,kResponse:itt}=QO(),{fireEvent:ier,failWebsocketConnection:bT,isClosing:oer,isClosed:ser,isEstablished:aer,parseExtensions:cer}=HO(),{channels:lB}=xD(),{CloseEvent:ler}=aB(),{makeRequest:uer}=tB(),{fetching:der}=LO(),{Headers:fer,getHeadersList:per}=hR(),{getDecodeSplit:her}=yp(),{WebsocketFrameSend:mer}=wZ(),Yve;try{Yve=require("node:crypto")}catch{}function ger(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=uer({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=per(new fer(o.headers));c.headersList=p}let l=Yve.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),der({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){bT(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){bT(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){bT(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){bT(n,'Server did not set Connection header to "upgrade".');return}let h=p.headersList.get("Sec-WebSocket-Accept"),m=Yve.createHash("sha1").update(l+ter).digest("base64");if(h!==m){bT(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),A;if(g!==null&&(A=cer(g),!A.has("permessage-deflate"))){bT(n,"Sec-WebSocket-Extensions header does not match.");return}let y=p.headersList.get("Sec-WebSocket-Protocol");if(y!==null&&!her("sec-websocket-protocol",c.headersList).includes(y)){bT(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",ott),p.socket.on("close",stt),p.socket.on("error",att),lB.open.hasSubscribers&&lB.open.publish({address:p.socket.address(),protocol:y,extensions:g}),i(p,A)}})}s(ger,"establishWebSocketConnection");function Aer(t,e,r,n){if(!(oer(t)||ser(t)))if(!aer(t))bT(t,"Connection was closed before it was established."),t[jO]=$O.CLOSING;else if(t[SZ]===_Z.NOT_SENT){t[SZ]=_Z.PROCESSING;let i=new mer;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=rer,t[itt].socket.write(i.createFrame(ner.CLOSE)),t[SZ]=_Z.SENT,t[jO]=$O.CLOSING}else t[jO]=$O.CLOSING}s(Aer,"closeWebSocketConnection");function ott(t){this.ws[ntt].write(t)||this.pause()}s(ott,"onSocketData");function stt(){let{ws:t}=this,{[itt]:e}=t;e.socket.off("data",ott),e.socket.off("close",stt),e.socket.off("error",att);let r=t[SZ]===_Z.SENT&&t[rtt],n=1005,i="",o=t[ntt].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[rtt]||(n=1006),t[jO]=$O.CLOSED,ier("close",t,(a,c)=>new ler(a,c),{wasClean:r,code:n,reason:i}),lB.close.hasSubscribers&&lB.close.publish({websocket:t,code:n,reason:i})}s(stt,"onSocketClose");function att(t){let{ws:e}=this;e[jO]=$O.CLOSING,lB.socketError.hasSubscribers&&lB.socketError.publish(t),this.destroy()}s(att,"onSocketError");ctt.exports={establishWebSocketConnection:ger,closeWebSocketConnection:Aer}});var utt=q((moi,ltt)=>{"use strict";d();var{createInflateRaw:yer,Z_DEFAULT_WINDOWBITS:Cer}=require("node:zlib"),{isValidClientWindowBits:ver}=HO(),Eer=Buffer.from([0,0,255,255]),RZ=Symbol("kBuffer"),kZ=Symbol("kLength"),Jve=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=Cer;if(this.#t.serverMaxWindowBits){if(!ver(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=yer({windowBits:i}),this.#e[RZ]=[],this.#e[kZ]=0,this.#e.on("data",o=>{this.#e[RZ].push(o),this.#e[kZ]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(Eer),this.#e.flush(()=>{let i=Buffer.concat(this.#e[RZ],this.#e[kZ]);this.#e[RZ].length=0,this.#e[kZ]=0,n(null,i)})}};ltt.exports={PerMessageDeflate:Jve}});var Ett=q((yoi,vtt)=>{"use strict";d();var{Writable:xer}=require("node:stream"),ber=require("node:assert"),{parserStates:u0,opcodes:uB,states:Ier,emptyBuffer:dtt,sentCloseFrameState:ftt}=vR(),{kReadyState:Ter,kSentClose:ptt,kResponse:htt,kReceivedClose:mtt}=QO(),{channels:PZ}=xD(),{isValidStatusCode:wer,isValidOpcode:_er,failWebsocketConnection:lm,websocketMessageReceived:gtt,utf8Decode:Ser,isControlFrame:Att,isTextBinaryFrame:Xve,isContinuationFrame:Rer}=HO(),{WebsocketFrameSend:ytt}=wZ(),{closeWebSocketConnection:Ctt}=Kve(),{PerMessageDeflate:ker}=utt(),Zve=class extends xer{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=u0.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new ker(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===u0.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==uB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!_er(i))return lm(this.ws,"Invalid opcode received"),e();if(o)return lm(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){lm(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){lm(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Xve(i)){lm(this.ws,"Invalid frame type was fragmented.");return}if(Xve(i)&&this.#o.length>0){lm(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){lm(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&Att(i)){lm(this.ws,"Control frame either too large or fragmented");return}if(Rer(i)&&this.#o.length===0&&!this.#r.compressed){lm(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=u0.READ_DATA):c===126?this.#n=u0.PAYLOADLENGTH_16:c===127&&(this.#n=u0.PAYLOADLENGTH_64),Xve(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===u0.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=u0.READ_DATA}else if(this.#n===u0.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){lm(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=u0.READ_DATA}else if(this.#n===u0.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(Att(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=u0.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){Ctt(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=u0.INFO,this.#i=!0,this.run(e);return}gtt(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=u0.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);gtt(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=u0.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return dtt;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){ber(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!wer(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=Ser(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===uB.CLOSE){if(n===1)return lm(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return Ctt(this.ws,i,o,o.length),lm(this.ws,o),!1}if(this.ws[ptt]!==ftt.SENT){let i=dtt;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new ytt(i);this.ws[htt].socket.write(o.createFrame(uB.CLOSE),a=>{a||(this.ws[ptt]=ftt.SENT)})}return this.ws[Ter]=Ier.CLOSING,this.ws[mtt]=!0,!1}else if(r===uB.PING){if(!this.ws[mtt]){let i=new ytt(e);this.ws[htt].socket.write(i.createFrame(uB.PONG)),PZ.ping.hasSubscribers&&PZ.ping.publish({payload:e})}}else r===uB.PONG&&PZ.pong.hasSubscribers&&PZ.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};vtt.exports={ByteParser:Zve}});var wtt=q((Eoi,Ttt)=>{"use strict";d();var{WebsocketFrameSend:Per}=wZ(),{opcodes:xtt,sendHints:dB}=vR(),Der=d1e(),btt=Buffer[Symbol.species],eEe=class{static{s(this,"SendQueue")}#e=new Der;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==dB.blob){let o=Itt(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=Itt(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function Itt(t,e){return new Per(Ber(t,e)).createFrame(e===dB.string?xtt.TEXT:xtt.BINARY)}s(Itt,"createFrame");function Ber(t,e){switch(e){case dB.string:return Buffer.from(t);case dB.arrayBuffer:case dB.blob:return new btt(t);case dB.typedArray:return new btt(t.buffer,t.byteOffset,t.byteLength)}}s(Ber,"toBuffer");Ttt.exports={SendQueue:eEe}});var Ltt=q((Ioi,Ntt)=>{"use strict";d();var{webidl:Kn}=Lu(),{URLSerializer:Ner}=o0(),{environmentSettingsObject:_tt}=yp(),{staticPropertyDescriptors:IT,states:GO,sentCloseFrameState:Ler,sendHints:DZ}=vR(),{kWebSocketURL:Stt,kReadyState:tEe,kController:Mer,kBinaryType:BZ,kResponse:Rtt,kSentClose:Fer,kByteParser:Oer}=QO(),{isConnecting:Qer,isEstablished:Uer,isClosing:qer,isValidSubprotocol:Her,fireEvent:ktt}=HO(),{establishWebSocketConnection:Wer,closeWebSocketConnection:Ptt}=Kve(),{ByteParser:$er}=Ett(),{kEnumerableProperty:um,isBlobLike:Dtt}=Bi(),{getGlobalDispatcher:jer}=VX(),{types:Btt}=require("node:util"),{ErrorEvent:Ger,CloseEvent:Ver}=aB(),{SendQueue:zer}=wtt(),Tp=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Kn.util.markAsUncloneable(this);let n="WebSocket constructor";Kn.argumentLengthCheck(arguments,1,n);let i=Kn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Kn.converters.USVString(e,n,"url"),r=i.protocols;let o=_tt.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>Her(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[Stt]=new URL(a.href);let c=_tt.settingsObject;this[Mer]=Wer(a,r,c,this,(l,u)=>this.#o(l,u),i),this[tEe]=t.CONNECTING,this[Fer]=Ler.NOT_SENT,this[BZ]="blob"}close(e=void 0,r=void 0){Kn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Kn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Kn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");Ptt(this,e,r,i)}send(e){Kn.brandCheck(this,t);let r="WebSocket.send";if(Kn.argumentLengthCheck(arguments,1,r),e=Kn.converters.WebSocketSendData(e,r,"data"),Qer(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Uer(this)||qer(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},DZ.string)}else Btt.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},DZ.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},DZ.typedArray)):Dtt(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},DZ.blob))}get readyState(){return Kn.brandCheck(this,t),this[tEe]}get bufferedAmount(){return Kn.brandCheck(this,t),this.#t}get url(){return Kn.brandCheck(this,t),Ner(this[Stt])}get extensions(){return Kn.brandCheck(this,t),this.#n}get protocol(){return Kn.brandCheck(this,t),this.#i}get onopen(){return Kn.brandCheck(this,t),this.#e.open}set onopen(e){Kn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Kn.brandCheck(this,t),this.#e.error}set onerror(e){Kn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Kn.brandCheck(this,t),this.#e.close}set onclose(e){Kn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Kn.brandCheck(this,t),this.#e.message}set onmessage(e){Kn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Kn.brandCheck(this,t),this[BZ]}set binaryType(e){Kn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[BZ]="blob":this[BZ]=e}#o(e,r){this[Rtt]=e;let n=new $er(this,r);n.on("drain",Yer),n.on("error",Ker.bind(this)),e.socket.ws=this,this[Oer]=n,this.#r=new zer(e.socket),this[tEe]=GO.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),ktt("open",this)}};Tp.CONNECTING=Tp.prototype.CONNECTING=GO.CONNECTING;Tp.OPEN=Tp.prototype.OPEN=GO.OPEN;Tp.CLOSING=Tp.prototype.CLOSING=GO.CLOSING;Tp.CLOSED=Tp.prototype.CLOSED=GO.CLOSED;Object.defineProperties(Tp.prototype,{CONNECTING:IT,OPEN:IT,CLOSING:IT,CLOSED:IT,url:um,readyState:um,bufferedAmount:um,onopen:um,onerror:um,onclose:um,close:um,onmessage:um,binaryType:um,send:um,extensions:um,protocol:um,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Tp,{CONNECTING:IT,OPEN:IT,CLOSING:IT,CLOSED:IT});Kn.converters["sequence<DOMString>"]=Kn.sequenceConverter(Kn.converters.DOMString);Kn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Kn.util.Type(t)==="Object"&&Symbol.iterator in t?Kn.converters["sequence<DOMString>"](t):Kn.converters.DOMString(t,e,r)};Kn.converters.WebSocketInit=Kn.dictionaryConverter([{key:"protocols",converter:Kn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Kn.converters.any,defaultValue:s(()=>jer(),"defaultValue")},{key:"headers",converter:Kn.nullableConverter(Kn.converters.HeadersInit)}]);Kn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Kn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Kn.converters.WebSocketInit(t):{protocols:Kn.converters["DOMString or sequence<DOMString>"](t)}};Kn.converters.WebSocketSendData=function(t){if(Kn.util.Type(t)==="Object"){if(Dtt(t))return Kn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||Btt.isArrayBuffer(t))return Kn.converters.BufferSource(t)}return Kn.converters.USVString(t)};function Yer(){this.ws[Rtt].socket.resume()}s(Yer,"onParserDrain");function Ker(t){let e,r;t instanceof Ver?(e=t.reason,r=t.code):e=t.message,ktt("error",this,()=>new Ger("error",{error:t,message:e})),Ptt(this,r)}s(Ker,"onParserError");Ntt.exports={WebSocket:Tp}});var rEe=q((_oi,Mtt)=>{"use strict";d();function Jer(t){return t.indexOf("\0")===-1}s(Jer,"isValidLastEventId");function Xer(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(Xer,"isASCIINumber");function Zer(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(Zer,"delay");Mtt.exports={isValidLastEventId:Jer,isASCIINumber:Xer,delay:Zer}});var Utt=q((koi,Qtt)=>{"use strict";d();var{Transform:etr}=require("node:stream"),{isASCIINumber:Ftt,isValidLastEventId:Ott}=rEe(),aE=[239,187,191],nEe=10,NZ=13,ttr=58,rtr=32,iEe=class extends etr{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===aE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===aE[0]&&this.buffer[1]===aE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===aE[0]&&this.buffer[1]===aE[1]&&this.buffer[2]===aE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===aE[0]&&this.buffer[1]===aE[1]&&this.buffer[2]===aE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===nEe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===nEe||this.buffer[this.pos]===NZ){this.buffer[this.pos]===NZ&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===nEe||this.buffer[this.pos]===NZ){this.buffer[this.pos]===NZ&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(ttr);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===rtr&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":Ftt(o)&&(r[i]=o);break;case"id":Ott(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&Ftt(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&Ott(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};Qtt.exports={EventSourceStream:iEe}});var ztt=q((Boi,Vtt)=>{"use strict";d();var{pipeline:ntr}=require("node:stream"),{fetching:itr}=LO(),{makeRequest:otr}=tB(),{webidl:cE}=Lu(),{EventSourceStream:str}=Utt(),{parseMIMEType:atr}=o0(),{createFastMessageEvent:ctr}=aB(),{isNetworkError:qtt}=BO(),{delay:ltr}=rEe(),{kEnumerableProperty:ER}=Bi(),{environmentSettingsObject:Htt}=yp(),Wtt=!1,$tt=3e3,VO=0,jtt=1,zO=2,utr="anonymous",dtr="use-credentials",fB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=VO;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),cE.util.markAsUncloneable(this);let n="EventSource constructor";cE.argumentLengthCheck(arguments,1,n),Wtt||(Wtt=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=cE.converters.USVString(e,n,"url"),r=cE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:$tt};let i=Htt,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=utr;r.withCredentials&&(a=dtr,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=Htt.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=otr(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===zO)return;this.#n=VO;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{qtt(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(qtt(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?atr(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=jtt,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new str({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(ctr(l.type,l.options))},"push")});ntr(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=itr(e)}async#l(){this.#n!==zO&&(this.#n=VO,this.dispatchEvent(new Event("error")),await ltr(this.#a.reconnectionTime),this.#n===VO&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){cE.brandCheck(this,t),this.#n!==zO&&(this.#n=zO,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},Gtt={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:VO,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:jtt,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:zO,writable:!1}};Object.defineProperties(fB,Gtt);Object.defineProperties(fB.prototype,Gtt);Object.defineProperties(fB.prototype,{close:ER,onerror:ER,onmessage:ER,onopen:ER,readyState:ER,url:ER,withCredentials:ER});cE.converters.EventSourceInitDict=cE.dictionaryConverter([{key:"withCredentials",converter:cE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:cE.converters.any}]);Vtt.exports={EventSource:fB,defaultReconnectionTime:$tt}});var Xtt=q((Moi,Qn)=>{"use strict";d();var ftr=yO(),Ytt=KF(),ptr=HD(),htr=eJe(),mtr=WD(),gtr=R1e(),Atr=AJe(),ytr=bJe(),Ktt=Ho(),MZ=Bi(),{InvalidArgumentError:LZ}=Ktt,pB=lXe(),Ctr=XF(),vtr=uve(),Etr=$Xe(),xtr=pve(),btr=J1e(),Itr=FX(),{getGlobalDispatcher:Jtt,setGlobalDispatcher:Ttr}=VX(),wtr=zX(),_tr=TX(),Str=wX();Object.assign(Ytt.prototype,pB);Qn.exports.Dispatcher=Ytt;Qn.exports.Client=ftr;Qn.exports.Pool=ptr;Qn.exports.BalancedPool=htr;Qn.exports.Agent=mtr;Qn.exports.ProxyAgent=gtr;Qn.exports.EnvHttpProxyAgent=Atr;Qn.exports.RetryAgent=ytr;Qn.exports.RetryHandler=Itr;Qn.exports.DecoratorHandler=wtr;Qn.exports.RedirectHandler=_tr;Qn.exports.createRedirectInterceptor=Str;Qn.exports.interceptors={redirect:JXe(),retry:ZXe(),dump:tZe(),dns:iZe()};Qn.exports.buildConnector=Ctr;Qn.exports.errors=Ktt;Qn.exports.util={parseHeaders:MZ.parseHeaders,headerNameToString:MZ.headerNameToString};function YO(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new LZ("invalid url");if(r!=null&&typeof r!="object")throw new LZ("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new LZ("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(MZ.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=MZ.parseURL(e);let{agent:i,dispatcher:o=Jtt()}=r;if(i)throw new LZ("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(YO,"makeDispatcher");Qn.exports.setGlobalDispatcher=Ttr;Qn.exports.getGlobalDispatcher=Jtt;var Rtr=LO().fetch;Qn.exports.fetch=s(async function(e,r=void 0){try{return await Rtr(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Qn.exports.Headers=hR().Headers;Qn.exports.Response=BO().Response;Qn.exports.Request=tB().Request;Qn.exports.FormData=oO().FormData;Qn.exports.File=globalThis.File??require("node:buffer").File;Qn.exports.FileReader=Cet().FileReader;var{setGlobalOrigin:ktr,getGlobalOrigin:Ptr}=kCe();Qn.exports.setGlobalOrigin=ktr;Qn.exports.getGlobalOrigin=Ptr;var{CacheStorage:Dtr}=Ret(),{kConstruct:Btr}=mZ();Qn.exports.caches=new Dtr(Btr);var{deleteCookie:Ntr,getCookies:Ltr,getSetCookies:Mtr,setCookie:Ftr}=qet();Qn.exports.deleteCookie=Ntr;Qn.exports.getCookies=Ltr;Qn.exports.getSetCookies=Mtr;Qn.exports.setCookie=Ftr;var{parseMIMEType:Otr,serializeAMimeType:Qtr}=o0();Qn.exports.parseMIMEType=Otr;Qn.exports.serializeAMimeType=Qtr;var{CloseEvent:Utr,ErrorEvent:qtr,MessageEvent:Htr}=aB();Qn.exports.WebSocket=Ltt().WebSocket;Qn.exports.CloseEvent=Utr;Qn.exports.ErrorEvent=qtr;Qn.exports.MessageEvent=Htr;Qn.exports.request=YO(pB.request);Qn.exports.stream=YO(pB.stream);Qn.exports.pipeline=YO(pB.pipeline);Qn.exports.connect=YO(pB.connect);Qn.exports.upgrade=YO(pB.upgrade);Qn.exports.MockClient=vtr;Qn.exports.MockPool=xtr;Qn.exports.MockAgent=Etr;Qn.exports.mockErrors=btr;var{EventSource:Wtr}=ztt();Qn.exports.EventSource=Wtr});var Ii=q((Qoi,Ztt)=>{d();Ztt.exports={options:{usePureJavaScript:!1}}});var rrt=q((qoi,trt)=>{d();var oEe={};trt.exports=oEe;var ert={};oEe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=$tr(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};oEe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=ert[e];if(!r){r=ert[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function $tr(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s($tr,"_encodeWithByteBuffer")});var No=q(($oi,srt)=>{d();var nrt=Ii(),irt=rrt(),Ne=srt.exports=nrt.util=nrt.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Ne.nextTick=process.nextTick,typeof setImmediate=="function"?Ne.setImmediate=setImmediate:Ne.setImmediate=Ne.nextTick;return}if(typeof setImmediate=="function"){Ne.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Ne.nextTick=function(c){return setImmediate(c)};return}if(Ne.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Ne.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Ne.setImmediate;Ne.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Ne.nextTick=Ne.setImmediate})();Ne.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Ne.globalScope=function(){return Ne.isNodejs?global:typeof self>"u"?window:self}();Ne.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Ne.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Ne.isArrayBufferView=function(t){return t&&Ne.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function KO(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(KO,"_checkBitsParam");Ne.ByteBuffer=sEe;function sEe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Ne.isArrayBuffer(t)||Ne.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof sEe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(sEe,"ByteStringBuffer");Ne.ByteStringBuffer=sEe;var jtr=4096;Ne.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>jtr&&(this.data.substr(0,1),this._constructedStringLength=0)};Ne.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Ne.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Ne.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Ne.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Ne.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Ne.encodeUtf8(t))};Ne.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Ne.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Ne.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Ne.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Ne.ByteStringBuffer.prototype.putInt=function(t,e){KO(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Ne.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Ne.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Ne.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Ne.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Ne.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Ne.ByteStringBuffer.prototype.getInt=function(t){KO(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Ne.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Ne.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Ne.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Ne.ByteStringBuffer.prototype.copy=function(){var t=Ne.createBuffer(this.data);return t.read=this.read,t};Ne.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Ne.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Ne.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Ne.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.ByteStringBuffer.prototype.toString=function(){return Ne.decodeUtf8(this.bytes())};function Gtr(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Ne.isArrayBuffer(t),n=Ne.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(Gtr,"DataBuffer");Ne.DataBuffer=Gtr;Ne.DataBuffer.prototype.length=function(){return this.write-this.read};Ne.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Ne.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Ne.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Ne.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Ne.DataBuffer.prototype.putBytes=function(t,e){if(Ne.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Ne.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Ne.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Ne.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Ne.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Ne.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Ne.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Ne.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Ne.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Ne.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Ne.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Ne.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Ne.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Ne.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Ne.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Ne.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Ne.DataBuffer.prototype.putInt=function(t,e){KO(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Ne.DataBuffer.prototype.putSignedInt=function(t,e){return KO(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Ne.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Ne.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Ne.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Ne.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Ne.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Ne.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Ne.DataBuffer.prototype.getInt=function(t){KO(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Ne.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Ne.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Ne.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Ne.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Ne.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Ne.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Ne.DataBuffer.prototype.copy=function(){return new Ne.DataBuffer(this)};Ne.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Ne.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Ne.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Ne.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Ne.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Ne.binary.raw.encode(e);if(t==="hex")return Ne.binary.hex.encode(e);if(t==="base64")return Ne.binary.base64.encode(e);if(t==="utf8")return Ne.text.utf8.decode(e);if(t==="utf16")return Ne.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Ne.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Ne.encodeUtf8(t)),new Ne.ByteBuffer(t)};Ne.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Ne.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Ne.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Ne.bytesToHex=function(t){return Ne.createBuffer(t).toHex()};Ne.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var TT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",wT=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],ort="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ne.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=TT.charAt(i>>2),r+=TT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=TT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":TT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=wT[t.charCodeAt(a++)-43],n=wT[t.charCodeAt(a++)-43],i=wT[t.charCodeAt(a++)-43],o=wT[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Ne.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Ne.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Ne.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:irt.encode,decode:irt.decode}};Ne.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Ne.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.binary.hex.encode=Ne.bytesToHex;Ne.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Ne.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=TT.charAt(i>>2),r+=TT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=TT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":TT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Ne.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=wT[t.charCodeAt(l++)-43],o=wT[t.charCodeAt(l++)-43],a=wT[t.charCodeAt(l++)-43],c=wT[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Ne.binary.base58.encode=function(t,e){return Ne.binary.baseN.encode(t,ort,e)};Ne.binary.base58.decode=function(t,e){return Ne.binary.baseN.decode(t,ort,e)};Ne.text={utf8:{},utf16:{}};Ne.text.utf8.encode=function(t,e,r){t=Ne.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Ne.text.utf8.decode=function(t){return Ne.decodeUtf8(String.fromCharCode.apply(null,t))};Ne.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Ne.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Ne.deflate=function(t,e,r){if(e=Ne.decode64(t.deflate(Ne.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Ne.inflate=function(t,e,r){var n=t.inflate(Ne.encode64(e)).rval;return n===null?null:Ne.decode64(n)};var aEe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Ne.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),cEe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Ne.decode64(r))),r},"_getStorageObject"),Vtr=s(function(t,e,r,n){var i=cEe(t,e);i===null&&(i={}),i[r]=n,aEe(t,e,i)},"_setItem"),ztr=s(function(t,e,r){var n=cEe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),Ytr=s(function(t,e,r){var n=cEe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),aEe(t,e,n)}},"_removeItem"),Ktr=s(function(t,e){aEe(t,e,null)},"_clearItems"),FZ=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Ne.setItem=function(t,e,r,n,i){FZ(Vtr,arguments,i)};Ne.getItem=function(t,e,r,n){return FZ(ztr,arguments,n)};Ne.removeItem=function(t,e,r,n){FZ(Ytr,arguments,n)};Ne.clearItems=function(t,e,r){FZ(Ktr,arguments,r)};Ne.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Ne.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Ne.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Ne.formatSize=function(t){return t>=1073741824?t=Ne.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Ne.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Ne.formatNumber(t/1024,0)+" KiB":t=Ne.formatNumber(t,0)+" bytes",t};Ne.bytesFromIP=function(t){return t.indexOf(".")!==-1?Ne.bytesFromIPv4(t):t.indexOf(":")!==-1?Ne.bytesFromIPv6(t):null};Ne.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Ne.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Ne.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Ne.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Ne.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Ne.bytesToIP=function(t){return t.length===4?Ne.bytesToIPv4(t):t.length===16?Ne.bytesToIPv6(t):null};Ne.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Ne.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Ne.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Ne.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Ne&&!t.update)return e(null,Ne.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Ne.cores=navigator.hardwareConcurrency,e(null,Ne.cores);if(typeof Worker>"u")return Ne.cores=1,e(null,Ne.cores);if(typeof Blob>"u")return Ne.cores=2,e(null,Ne.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Ne.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Ne.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(h){if(u.push(h.data),u.length===a){for(var m=0;m<a;++m)l[m].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],h=0;h<a;++h)if(u!==h){var m=c[h];(f.st>m.st&&f.st<m.et||m.st>f.st&&m.st<f.et)&&p.push(h)}return l.reduce(function(g,A){return Math.max(g,A.length)},0)}s(o,"reduce")}});var OZ=q((Voi,art)=>{d();var Jl=Ii();No();art.exports=Jl.cipher=Jl.cipher||{};Jl.cipher.algorithms=Jl.cipher.algorithms||{};Jl.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Jl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Jl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Jl.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Jl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Jl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Jl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Jl.cipher.algorithms[t]=e};Jl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Jl.cipher.algorithms?Jl.cipher.algorithms[t]:null};var lEe=Jl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};lEe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Jl.util.createBuffer(),this.output=t.output||Jl.util.createBuffer(),this.mode.start(e)};lEe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};lEe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var dEe=q((Yoi,crt)=>{d();var Xl=Ii();No();Xl.cipher=Xl.cipher||{};var qi=crt.exports=Xl.cipher.modes=Xl.cipher.modes||{};qi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};qi.ecb.prototype.start=function(t){};qi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};qi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};qi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};qi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};qi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};qi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=QZ(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};qi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};qi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};qi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};qi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};qi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Xl.util.createBuffer(),this._partialBytes=0};qi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=QZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};qi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};qi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};qi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Xl.util.createBuffer(),this._partialBytes=0};qi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=QZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};qi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};qi.ofb.prototype.decrypt=qi.ofb.prototype.encrypt;qi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Xl.util.createBuffer(),this._partialBytes=0};qi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=QZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};qi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}UZ(this._inBlock)};qi.ctr.prototype.decrypt=qi.ctr.prototype.encrypt;qi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Xl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};qi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Xl.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Xl.util.createBuffer(t.additionalData):r=Xl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Xl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(uEe(n*8)))}this._inBlock=this._j0.slice(0),UZ(this._inBlock),this._partialBytes=0,r=Xl.util.createBuffer(r),this._aDataLength=uEe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};qi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),UZ(this._inBlock)};qi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),UZ(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};qi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Xl.util.createBuffer();var n=this._aDataLength.concat(uEe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};qi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};qi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};qi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};qi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};qi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};qi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function QZ(t,e){if(typeof t=="string"&&(t=Xl.util.createBuffer(t)),Xl.util.isArray(t)&&t.length>4){var r=t;t=Xl.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Xl.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(QZ,"transformIV");function UZ(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(UZ,"inc32");function uEe(t){return[t/4294967296|0,t&4294967295]}s(uEe,"from64To32")});var _T=q((Xoi,frt)=>{d();var Ns=Ii();OZ();dEe();No();frt.exports=Ns.aes=Ns.aes||{};Ns.aes.startEncrypting=function(t,e,r,n){var i=qZ({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ns.aes.createEncryptionCipher=function(t,e){return qZ({key:t,output:null,decrypt:!1,mode:e})};Ns.aes.startDecrypting=function(t,e,r,n){var i=qZ({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ns.aes.createDecryptionCipher=function(t,e){return qZ({key:t,output:null,decrypt:!0,mode:e})};Ns.aes.Algorithm=function(t,e){hEe||urt();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return pEe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return pEe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};Ns.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ns.util.createBuffer(e);else if(Ns.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ns.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ns.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ns.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=drt(e,t.decrypt&&!a),this._init=!0}};Ns.aes._expandKey=function(t,e){return hEe||urt(),drt(t,e)};Ns.aes._updateBlock=pEe;mB("AES-ECB",Ns.cipher.modes.ecb);mB("AES-CBC",Ns.cipher.modes.cbc);mB("AES-CFB",Ns.cipher.modes.cfb);mB("AES-OFB",Ns.cipher.modes.ofb);mB("AES-CTR",Ns.cipher.modes.ctr);mB("AES-GCM",Ns.cipher.modes.gcm);function mB(t,e){var r=s(function(){return new Ns.aes.Algorithm(t,e)},"factory");Ns.cipher.registerAlgorithm(t,r)}s(mB,"registerAlgorithm");var hEe=!1,hB=4,lf,fEe,lrt,xR,cA;function urt(){hEe=!0,lrt=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;lf=new Array(256),fEe=new Array(256),xR=new Array(4),cA=new Array(4);for(var e=0;e<4;++e)xR[e]=new Array(256),cA[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,lf[r]=c,fEe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)xR[p][r]=u,cA[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(urt,"initialize");function drt(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=hB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=lf[n>>>16&255]<<24^lf[n>>>8&255]<<16^lf[n&255]<<8^lf[n>>>24]^lrt[i]<<24,i++):o>6&&l%o===4&&(n=lf[n>>>24]<<24^lf[n>>>16&255]<<16^lf[n>>>8&255]<<8^lf[n&255]),r[l]=r[l-o]^n;if(e){var u,f=cA[0],p=cA[1],h=cA[2],m=cA[3],g=r.slice(0);c=r.length;for(var l=0,A=c-hB;l<c;l+=hB,A-=hB)if(l===0||l===c-hB)g[l]=r[A],g[l+1]=r[A+3],g[l+2]=r[A+2],g[l+3]=r[A+1];else for(var y=0;y<hB;++y)u=r[A+y],g[l+(3&-y)]=f[lf[u>>>24]]^p[lf[u>>>16&255]]^h[lf[u>>>8&255]]^m[lf[u&255]];r=g}return r}s(drt,"_expandKey");function pEe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=cA[0],a=cA[1],c=cA[2],l=cA[3],u=fEe):(o=xR[0],a=xR[1],c=xR[2],l=xR[3],u=lf);var f,p,h,m,g,A,y;f=e[0]^t[0],p=e[n?3:1]^t[1],h=e[2]^t[2],m=e[n?1:3]^t[3];for(var E=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[h>>>8&255]^l[m&255]^t[++E],A=o[p>>>24]^a[h>>>16&255]^c[m>>>8&255]^l[f&255]^t[++E],y=o[h>>>24]^a[m>>>16&255]^c[f>>>8&255]^l[p&255]^t[++E],m=o[m>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[h&255]^t[++E],f=g,p=A,h=y;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[h>>>8&255]<<8^u[m&255]^t[++E],r[n?3:1]=u[p>>>24]<<24^u[h>>>16&255]<<16^u[m>>>8&255]<<8^u[f&255]^t[++E],r[2]=u[h>>>24]<<24^u[m>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++E],r[n?1:3]=u[m>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[h&255]^t[++E]}s(pEe,"_updateBlock");function qZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ns.cipher.createDecipher(r,t.key):n=Ns.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ns.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(qZ,"_createCipher")});var ST=q((tsi,prt)=>{d();var JO=Ii();JO.pki=JO.pki||{};var mEe=prt.exports=JO.pki.oids=JO.oids=JO.oids||{};function Nt(t,e){mEe[t]=e,mEe[e]=t}s(Nt,"_IN");function zo(t,e){mEe[t]=e}s(zo,"_I_");Nt("1.2.840.113549.1.1.1","rsaEncryption");Nt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Nt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Nt("1.2.840.113549.1.1.7","RSAES-OAEP");Nt("1.2.840.113549.1.1.8","mgf1");Nt("1.2.840.113549.1.1.9","pSpecified");Nt("1.2.840.113549.1.1.10","RSASSA-PSS");Nt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Nt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Nt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Nt("1.3.101.112","EdDSA25519");Nt("1.2.840.10040.4.3","dsa-with-sha1");Nt("1.3.14.3.2.7","desCBC");Nt("1.3.14.3.2.26","sha1");Nt("1.3.14.3.2.29","sha1WithRSASignature");Nt("2.16.840.1.101.3.4.2.1","sha256");Nt("2.16.840.1.101.3.4.2.2","sha384");Nt("2.16.840.1.101.3.4.2.3","sha512");Nt("2.16.840.1.101.3.4.2.4","sha224");Nt("2.16.840.1.101.3.4.2.5","sha512-224");Nt("2.16.840.1.101.3.4.2.6","sha512-256");Nt("1.2.840.113549.2.2","md2");Nt("1.2.840.113549.2.5","md5");Nt("1.2.840.113549.1.7.1","data");Nt("1.2.840.113549.1.7.2","signedData");Nt("1.2.840.113549.1.7.3","envelopedData");Nt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Nt("1.2.840.113549.1.7.5","digestedData");Nt("1.2.840.113549.1.7.6","encryptedData");Nt("1.2.840.113549.1.9.1","emailAddress");Nt("1.2.840.113549.1.9.2","unstructuredName");Nt("1.2.840.113549.1.9.3","contentType");Nt("1.2.840.113549.1.9.4","messageDigest");Nt("1.2.840.113549.1.9.5","signingTime");Nt("1.2.840.113549.1.9.6","counterSignature");Nt("1.2.840.113549.1.9.7","challengePassword");Nt("1.2.840.113549.1.9.8","unstructuredAddress");Nt("1.2.840.113549.1.9.14","extensionRequest");Nt("1.2.840.113549.1.9.20","friendlyName");Nt("1.2.840.113549.1.9.21","localKeyId");Nt("1.2.840.113549.1.9.22.1","x509Certificate");Nt("1.2.840.113549.1.12.10.1.1","keyBag");Nt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Nt("1.2.840.113549.1.12.10.1.3","certBag");Nt("1.2.840.113549.1.12.10.1.4","crlBag");Nt("1.2.840.113549.1.12.10.1.5","secretBag");Nt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Nt("1.2.840.113549.1.5.13","pkcs5PBES2");Nt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Nt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Nt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Nt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Nt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Nt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Nt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Nt("1.2.840.113549.2.7","hmacWithSHA1");Nt("1.2.840.113549.2.8","hmacWithSHA224");Nt("1.2.840.113549.2.9","hmacWithSHA256");Nt("1.2.840.113549.2.10","hmacWithSHA384");Nt("1.2.840.113549.2.11","hmacWithSHA512");Nt("1.2.840.113549.3.7","des-EDE3-CBC");Nt("2.16.840.1.101.3.4.1.2","aes128-CBC");Nt("2.16.840.1.101.3.4.1.22","aes192-CBC");Nt("2.16.840.1.101.3.4.1.42","aes256-CBC");Nt("2.5.4.3","commonName");Nt("2.5.4.4","surname");Nt("2.5.4.5","serialNumber");Nt("2.5.4.6","countryName");Nt("2.5.4.7","localityName");Nt("2.5.4.8","stateOrProvinceName");Nt("2.5.4.9","streetAddress");Nt("2.5.4.10","organizationName");Nt("2.5.4.11","organizationalUnitName");Nt("2.5.4.12","title");Nt("2.5.4.13","description");Nt("2.5.4.15","businessCategory");Nt("2.5.4.17","postalCode");Nt("2.5.4.42","givenName");Nt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Nt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Nt("2.16.840.1.113730.1.1","nsCertType");Nt("2.16.840.1.113730.1.13","nsComment");zo("2.5.29.1","authorityKeyIdentifier");zo("2.5.29.2","keyAttributes");zo("2.5.29.3","certificatePolicies");zo("2.5.29.4","keyUsageRestriction");zo("2.5.29.5","policyMapping");zo("2.5.29.6","subtreesConstraint");zo("2.5.29.7","subjectAltName");zo("2.5.29.8","issuerAltName");zo("2.5.29.9","subjectDirectoryAttributes");zo("2.5.29.10","basicConstraints");zo("2.5.29.11","nameConstraints");zo("2.5.29.12","policyConstraints");zo("2.5.29.13","basicConstraints");Nt("2.5.29.14","subjectKeyIdentifier");Nt("2.5.29.15","keyUsage");zo("2.5.29.16","privateKeyUsagePeriod");Nt("2.5.29.17","subjectAltName");Nt("2.5.29.18","issuerAltName");Nt("2.5.29.19","basicConstraints");zo("2.5.29.20","cRLNumber");zo("2.5.29.21","cRLReason");zo("2.5.29.22","expirationDate");zo("2.5.29.23","instructionCode");zo("2.5.29.24","invalidityDate");zo("2.5.29.25","cRLDistributionPoints");zo("2.5.29.26","issuingDistributionPoint");zo("2.5.29.27","deltaCRLIndicator");zo("2.5.29.28","issuingDistributionPoint");zo("2.5.29.29","certificateIssuer");zo("2.5.29.30","nameConstraints");Nt("2.5.29.31","cRLDistributionPoints");Nt("2.5.29.32","certificatePolicies");zo("2.5.29.33","policyMappings");zo("2.5.29.34","policyConstraints");Nt("2.5.29.35","authorityKeyIdentifier");zo("2.5.29.36","policyConstraints");Nt("2.5.29.37","extKeyUsage");zo("2.5.29.46","freshestCRL");zo("2.5.29.54","inhibitAnyPolicy");Nt("1.3.6.1.4.1.11129.2.4.2","timestampList");Nt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Nt("1.3.6.1.5.5.7.3.1","serverAuth");Nt("1.3.6.1.5.5.7.3.2","clientAuth");Nt("1.3.6.1.5.5.7.3.3","codeSigning");Nt("1.3.6.1.5.5.7.3.4","emailProtection");Nt("1.3.6.1.5.5.7.3.8","timeStamping")});var lA=q((isi,mrt)=>{d();var ra=Ii();No();ST();var fr=mrt.exports=ra.asn1=ra.asn1||{};fr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};fr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};fr.create=function(t,e,r,n,i){if(ra.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||ra.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=fr.copy(c)),c};fr.copy=function(t,e){var r;if(ra.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(fr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:fr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};fr.equals=function(t,e,r){if(ra.util.isArray(t)){if(!ra.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!fr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&fr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};fr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function XO(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(XO,"_checkBufferLength");var Jtr=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;XO(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");fr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=ra.util.createBuffer(t));var r=t.length(),n=HZ(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function HZ(t,e,r,n){var i;XO(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=Jtr(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,h=(o&32)===32;if(h)if(f=[],l===void 0)for(;;){if(XO(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(HZ(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(HZ(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===fr.Class.UNIVERSAL&&c===fr.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===fr.Class.UNIVERSAL&&c===fr.Type.BITSTRING&&l>1){var m=t.read,g=e,A=0;if(c===fr.Type.BITSTRING&&(XO(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var y={strict:!0,decodeBitStrings:!0},E=HZ(t,e,r+1,y),b=i-t.length();e-=b,c==fr.Type.BITSTRING&&b++;var _=E.tagClass;b===l&&(_===fr.Class.UNIVERSAL||_===fr.Class.CONTEXT_SPECIFIC)&&(f=[E])}catch{}f===void 0&&(t.read=m,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===fr.Type.BMPSTRING)for(f="";l>0;l-=2)XO(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var S=p===void 0?null:{bitStringContents:p};return fr.create(a,c,h,f,S)}s(HZ,"_fromDer");fr.toDer=function(t){var e=ra.util.createBuffer(),r=t.tagClass|t.type,n=ra.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=fr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(fr.toDer(t.value[o]))}else if(t.type===fr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===fr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};fr.oidToDer=function(t){var e=t.split("."),r=ra.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};fr.derToOid=function(t){var e;typeof t=="string"&&(t=ra.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};fr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),h=f*60+p;h*=6e4,l==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};fr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,h=t.charAt(p);if(h==="+"||h==="-"){var m=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=m*60+g,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};fr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};fr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};fr.integerToDer=function(t){var e=ra.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};fr.derToInteger=function(t){typeof t=="string"&&(t=ra.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};fr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&ra.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=fr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var hrt=/[^\\u0000-\\u00ff]/;fr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case fr.Class.UNIVERSAL:n+="Universal:";break;case fr.Class.APPLICATION:n+="Application:";break;case fr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case fr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===fr.Class.UNIVERSAL)switch(n+=t.type,t.type){case fr.Type.NONE:n+=" (None)";break;case fr.Type.BOOLEAN:n+=" (Boolean)";break;case fr.Type.INTEGER:n+=" (Integer)";break;case fr.Type.BITSTRING:n+=" (Bit string)";break;case fr.Type.OCTETSTRING:n+=" (Octet string)";break;case fr.Type.NULL:n+=" (Null)";break;case fr.Type.OID:n+=" (Object Identifier)";break;case fr.Type.ODESC:n+=" (Object Descriptor)";break;case fr.Type.EXTERNAL:n+=" (External or Instance of)";break;case fr.Type.REAL:n+=" (Real)";break;case fr.Type.ENUMERATED:n+=" (Enumerated)";break;case fr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case fr.Type.UTF8:n+=" (UTF8)";break;case fr.Type.ROID:n+=" (Relative Object Identifier)";break;case fr.Type.SEQUENCE:n+=" (Sequence)";break;case fr.Type.SET:n+=" (Set)";break;case fr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case fr.Type.IA5String:n+=" (IA5String (ASCII))";break;case fr.Type.UTCTIME:n+=" (UTC time)";break;case fr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case fr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=fr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===fr.Type.OID){var l=fr.derToOid(t.value);n+=l,ra.pki&&ra.pki.oids&&l in ra.pki.oids&&(n+=" ("+ra.pki.oids[l]+") ")}if(t.type===fr.Type.INTEGER)try{n+=fr.derToInteger(t.value)}catch{n+="0x"+ra.util.bytesToHex(t.value)}else if(t.type===fr.Type.BITSTRING){if(t.value.length>1?n+="0x"+ra.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===fr.Type.OCTETSTRING)hrt.test(t.value)||(n+="("+t.value+") "),n+="0x"+ra.util.bytesToHex(t.value);else if(t.type===fr.Type.UTF8)try{n+=ra.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+ra.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===fr.Type.PRINTABLESTRING||t.type===fr.Type.IA5String?n+=t.value:hrt.test(t.value)?n+="0x"+ra.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var bC=q((asi,grt)=>{d();var WZ=Ii();grt.exports=WZ.md=WZ.md||{};WZ.md.algorithms=WZ.md.algorithms||{}});var gB=q((lsi,Art)=>{d();var lE=Ii();bC();No();var Xtr=Art.exports=lE.hmac=lE.hmac||{};Xtr.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in lE.md.algorithms)e=lE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=lE.util.createBuffer(a);else if(lE.util.isArray(a)){var c=a;a=lE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=lE.util.createBuffer(),n=lE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var jZ=q((dsi,Ert)=>{d();var IC=Ii();bC();No();var Crt=Ert.exports=IC.md5=IC.md5||{};IC.md.md5=IC.md.algorithms.md5=Crt;Crt.create=function(){vrt||Ztr();var t=null,e=IC.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=IC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=IC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),yrt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=IC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(gEe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};yrt(f,r,i);var p=IC.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var gEe=null,$Z=null,ZO=null,AB=null,vrt=!1;function Ztr(){gEe="\x80",gEe+=IC.util.fillString("\0",64),$Z=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],ZO=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],AB=new Array(64);for(var t=0;t<64;++t)AB[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);vrt=!0}s(Ztr,"_init");function yrt(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+AB[f]+e[f],u=ZO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+AB[f]+e[$Z[f]],u=ZO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+AB[f]+e[$Z[f]],u=ZO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+AB[f]+e[$Z[f]],u=ZO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(yrt,"_update")});var bR=q((hsi,brt)=>{d();var VZ=Ii();No();var xrt=brt.exports=VZ.pem=VZ.pem||{};xrt.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=GZ(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=GZ(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=GZ(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=GZ(t.headers[i]);return t.procType&&(r+=`\r
`),r+=VZ.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};xrt.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:VZ.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var h=l[p];if(!/\s/.test(h[0]))break;f+=h,u=p}if(o=f.match(n),o){for(var m={name:o[1],values:[]},g=o[2].split(","),A=0;A<g.length;++A)m.values.push(trr(g[A]));if(c.procType)if(!c.contentDomain&&m.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&m.name==="DEK-Info"){if(m.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(m);else{if(m.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(m.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function GZ(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(GZ,"foldHeader");function trr(t){return t.replace(/^\s+/,"")}s(trr,"ltrim")});var e7=q((Asi,Trt)=>{d();var ba=Ii();OZ();dEe();No();Trt.exports=ba.des=ba.des||{};ba.des.startEncrypting=function(t,e,r,n){var i=zZ({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ba.des.createEncryptionCipher=function(t,e){return zZ({key:t,output:null,decrypt:!1,mode:e})};ba.des.startDecrypting=function(t,e,r,n){var i=zZ({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ba.des.createDecryptionCipher=function(t,e){return zZ({key:t,output:null,decrypt:!0,mode:e})};ba.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return Irt(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return Irt(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};ba.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ba.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=urr(e),this._init=!0}};TC("DES-ECB",ba.cipher.modes.ecb);TC("DES-CBC",ba.cipher.modes.cbc);TC("DES-CFB",ba.cipher.modes.cfb);TC("DES-OFB",ba.cipher.modes.ofb);TC("DES-CTR",ba.cipher.modes.ctr);TC("3DES-ECB",ba.cipher.modes.ecb);TC("3DES-CBC",ba.cipher.modes.cbc);TC("3DES-CFB",ba.cipher.modes.cfb);TC("3DES-OFB",ba.cipher.modes.ofb);TC("3DES-CTR",ba.cipher.modes.ctr);function TC(t,e){var r=s(function(){return new ba.des.Algorithm(t,e)},"factory");ba.cipher.registerAlgorithm(t,r)}s(TC,"registerAlgorithm");var rrr=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],nrr=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],irr=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],orr=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],srr=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],arr=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],crr=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],lrr=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function urr(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],m=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,y=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,_,S=0;S<A;S++){var P=t.getInt32(),B=t.getInt32();_=(P>>>4^B)&252645135,B^=_,P^=_<<4,_=(B>>>-16^P)&65535,P^=_,B^=_<<-16,_=(P>>>2^B)&858993459,B^=_,P^=_<<2,_=(B>>>-16^P)&65535,P^=_,B^=_<<-16,_=(P>>>1^B)&1431655765,B^=_,P^=_<<1,_=(B>>>8^P)&16711935,P^=_,B^=_<<8,_=(P>>>1^B)&1431655765,B^=_,P^=_<<1,_=P<<8|B>>>20&240,P=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=_;for(var F=0;F<E.length;++F){E[F]?(P=P<<2|P>>>26,B=B<<2|B>>>26):(P=P<<1|P>>>27,B=B<<1|B>>>27),P&=-15,B&=-15;var Y=e[P>>>28]|r[P>>>24&15]|n[P>>>20&15]|i[P>>>16&15]|o[P>>>12&15]|a[P>>>8&15]|c[P>>>4&15],ee=l[B>>>28]|u[B>>>24&15]|f[B>>>20&15]|p[B>>>16&15]|h[B>>>12&15]|m[B>>>8&15]|g[B>>>4&15];_=(ee>>>16^Y)&65535,y[b++]=Y^_,y[b++]=ee^_<<16}}return y}s(urr,"_createKeys");function Irt(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],h=o[u];h!=f;h+=p){var m=l^t[h],g=(l>>>4|l<<28)^t[h+1];a=c,c=l,l=a^(nrr[m>>>24&63]|orr[m>>>16&63]|arr[m>>>8&63]|lrr[m&63]|rrr[g>>>24&63]|irr[g>>>16&63]|srr[g>>>8&63]|crr[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(Irt,"_updateBlock");function zZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ba.cipher.createDecipher(r,t.key):n=ba.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof ba.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(zZ,"_createCipher")});var YZ=q((vsi,wrt)=>{d();var uf=Ii();gB();bC();No();var drr=uf.pkcs5=uf.pkcs5||{},uE;uf.util.isNodejs&&!uf.options.usePureJavaScript&&(uE=require("crypto"));wrt.exports=uf.pbkdf2=drr.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),uf.util.isNodejs&&!uf.options.usePureJavaScript&&uE.pbkdf2&&(i===null||typeof i!="object")&&(uE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?uE.pbkdf2Sync.length===4?uE.pbkdf2(t,e,r,n,function(_,S){if(_)return o(_);o(null,S.toString("binary"))}):uE.pbkdf2(t,e,r,n,i,function(_,S){if(_)return o(_);o(null,S.toString("binary"))}):uE.pbkdf2Sync.length===4?uE.pbkdf2Sync(t,e,r,n).toString("binary"):uE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in uf.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=uf.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=uf.hmac.create();f.start(i,t);var p="",h,m,g;if(!o){for(var A=1;A<=l;++A){f.start(null,null),f.update(e),f.update(uf.util.int32ToBytes(A)),h=g=f.digest().getBytes();for(var y=2;y<=r;++y)f.start(null,null),f.update(g),m=f.digest().getBytes(),h=uf.util.xorBytes(h,m,a),g=m;p+=A<l?h:h.substr(0,u)}return p}var A=1,y;function E(){if(A>l)return o(null,p);f.start(null,null),f.update(e),f.update(uf.util.int32ToBytes(A)),h=g=f.digest().getBytes(),y=2,b()}s(E,"outer");function b(){if(y<=r)return f.start(null,null),f.update(g),m=f.digest().getBytes(),h=uf.util.xorBytes(h,m,a),g=m,++y,uf.util.setImmediate(b);p+=A<l?h:h.substr(0,u),++A,E()}s(b,"inner"),E()}});var yEe=q((bsi,Prt)=>{d();var wC=Ii();bC();No();var Srt=Prt.exports=wC.sha256=wC.sha256||{};wC.md.sha256=wC.md.algorithms.sha256=Srt;Srt.create=function(){Rrt||frr();var t=null,e=wC.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=wC.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=wC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),_rt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=wC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(AEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};_rt(p,r,i);var h=wC.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},n};var AEe=null,Rrt=!1,krt=null;function frr(){AEe="\x80",AEe+=wC.util.fillString("\0",64),krt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Rrt=!0}s(frr,"_init");function _rt(t,e,r){for(var n,i,o,a,c,l,u,f,p,h,m,g,A,y,E,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,h=t.h2,m=t.h3,g=t.h4,A=t.h5,y=t.h6,E=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=y^g&(A^y),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|h&(f^p),n=E+a+c+krt[u]+e[u],i=o+l,E=y,y=A,A=g,g=m+n>>>0,m=h,h=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+h|0,t.h3=t.h3+m|0,t.h4=t.h4+g|0,t.h5=t.h5+A|0,t.h6=t.h6+y|0,t.h7=t.h7+E|0,b-=64}}s(_rt,"_update")});var CEe=q((wsi,Drt)=>{d();var _C=Ii();No();var KZ=null;_C.util.isNodejs&&!_C.options.usePureJavaScript&&!process.versions["node-webkit"]&&(KZ=require("crypto"));var prr=Drt.exports=_C.prng=_C.prng||{};prr.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,h=e.plugin.increment,m=e.plugin.formatKey,g=e.plugin.formatSeed,A=_C.util.createBuffer();e.key=null,y();function y(E){if(E)return f(E);if(A.length()>=u)return f(null,A.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return _C.util.nextTick(function(){o(y)});var b=p(e.key,e.seed);e.generated+=b.length,A.putBytes(b),e.key=m(p(e.key,h(e.seed))),e.seed=g(p(e.key,e.seed)),_C.util.setImmediate(y)}s(y,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,h=e.plugin.formatKey,m=e.plugin.formatSeed;e.key=null;for(var g=_C.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var A=f(e.key,e.seed);e.generated+=A.length,g.putBytes(A),e.key=h(f(e.key,p(e.seed))),e.seed=m(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,h){if(p)return u(p);e.collect(h),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}s(c,"_seed");function l(u){var f=null,p=_C.util.globalScope,h=p.crypto||p.msCrypto;h&&h.getRandomValues&&(f=s(function(P){return h.getRandomValues(P)},"getRandomValues"));var m=_C.util.createBuffer();if(f)for(;m.length()<u;){var g=Math.max(1,Math.min(u-m.length(),65536)/4),A=new Uint32Array(Math.floor(g));try{f(A);for(var y=0;y<A.length;++y)m.putInt32(A[y])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(m.length()<u)for(var E,b,_,S=Math.floor(Math.random()*65536);m.length()<u;){b=16807*(S&65535),E=16807*(S>>16),b+=(E&32767)<<16,b+=E>>15,b=(b&2147483647)+(b>>31),S=b&4294967295;for(var y=0;y<3;++y)_=S>>>(y<<3),_^=Math.floor(Math.random()*256),m.putByte(_&255)}return m.getBytes(u)}return s(l,"defaultSeedFile"),KZ?(e.seedFile=function(u,f){KZ.randomBytes(u,function(p,h){if(p)return f(p);f(null,h.toString())})},e.seedFileSync=function(u){return KZ.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",h=0;h<f;h+=8)p+=String.fromCharCode(u>>h&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,h){function m(g){var A=g.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",m),h(A.forge.prng.err,A.forge.prng.bytes))}s(m,"listener"),self.addEventListener("message",m),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var h=p.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(m,g){u.postMessage({forge:{prng:{err:m,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var dm=q((Rsi,vEe)=>{d();var Zl=Ii();_T();yEe();CEe();No();(function(){if(Zl.random&&Zl.random.getBytes){vEe.exports=Zl.random;return}(function(t){var e={},r=new Array(4),n=Zl.util.createBuffer();e.formatKey=function(p){var h=Zl.util.createBuffer(p);return p=new Array(4),p[0]=h.getInt32(),p[1]=h.getInt32(),p[2]=h.getInt32(),p[3]=h.getInt32(),Zl.aes._expandKey(p,!1)},e.formatSeed=function(p){var h=Zl.util.createBuffer(p);return p=new Array(4),p[0]=h.getInt32(),p[1]=h.getInt32(),p[2]=h.getInt32(),p[3]=h.getInt32(),p},e.cipher=function(p,h){return Zl.aes._updateBlock(p,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Zl.md.sha256;function i(){var p=Zl.prng.create(e);return p.getBytes=function(h,m){return p.generate(h,m)},p.getBytesSync=function(h){return p.generate(h)},p}s(i,"spawnPrng");var o=i(),a=null,c=Zl.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),Zl.options.usePureJavaScript||!Zl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Zl.random)Zl.random=o;else for(var f in o)Zl.random[f]=o[f];Zl.random.createInstance=i,vEe.exports=Zl.random})(typeof jQuery<"u"?jQuery:null)})()});var xEe=q((Dsi,Lrt)=>{d();var d0=Ii();No();var EEe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Brt=[1,2,3,5],hrr=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),mrr=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Lrt.exports=d0.rc2=d0.rc2||{};d0.rc2.expandKey=function(t,e){typeof t=="string"&&(t=d0.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(EEe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,EEe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,EEe[r.at(c+1)^r.at(c+o)]);return r};var Nrt=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=d0.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=hrr(g[u],Brt[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=mrr(g[u],Brt[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var h=s(function(g){var A=[];for(u=0;u<4;u++){var y=i.getInt16Le();a!==null&&(r?y^=a.getInt16Le():a.putInt16Le(y)),A.push(y&65535)}f=r?0:63;for(var E=0;E<g.length;E++)for(var b=0;b<g[E][0];b++)g[E][1](A);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(A[u]):A[u]^=a.getInt16Le()),o.putInt16Le(A[u])},"runPlan"),m=null;return m={start:s(function(g,A){g&&typeof g=="string"&&(g=d0.util.createBuffer(g)),n=!1,i=d0.util.createBuffer(),o=A||new d0.util.createBuffer,a=g,m.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)h([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var A=!0;if(r)if(g)A=g(8,i,!r);else{var y=i.length()===8?8:8-i.length();i.fillWithByte(y,y)}if(A&&(n=!0,m.update()),!r&&(A=i.length()===0,A))if(g)A=g(8,o,!r);else{var E=o.length(),b=o.at(E-1);b>E?A=!1:o.truncate(b)}return A},"finish")},m},"createCipher");d0.rc2.startEncrypting=function(t,e,r){var n=d0.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};d0.rc2.createEncryptionCipher=function(t,e){return Nrt(t,e,!0)};d0.rc2.startDecrypting=function(t,e,r){var n=d0.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};d0.rc2.createDecryptionCipher=function(t,e){return Nrt(t,e,!1)}});var r7=q((Lsi,Wrt)=>{d();var bEe=Ii();Wrt.exports=bEe.jsbn=bEe.jsbn||{};var dE,grr=0xdeadbeefcafe,Mrt=(grr&16777215)==15715070;function Rt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Rt,"BigInteger");bEe.jsbn.BigInteger=Rt;function Lo(){return new Rt(null)}s(Lo,"nbi");function Arr(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(Arr,"am1");function yrr(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(yrr,"am2");function Frt(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s(Frt,"am3");typeof navigator>"u"?(Rt.prototype.am=Frt,dE=28):Mrt&&navigator.appName=="Microsoft Internet Explorer"?(Rt.prototype.am=yrr,dE=30):Mrt&&navigator.appName!="Netscape"?(Rt.prototype.am=Arr,dE=26):(Rt.prototype.am=Frt,dE=28);Rt.prototype.DB=dE;Rt.prototype.DM=(1<<dE)-1;Rt.prototype.DV=1<<dE;var IEe=52;Rt.prototype.FV=Math.pow(2,IEe);Rt.prototype.F1=IEe-dE;Rt.prototype.F2=2*dE-IEe;var Crr="0123456789abcdefghijklmnopqrstuvwxyz",JZ=new Array,yB,fm;yB=48;for(fm=0;fm<=9;++fm)JZ[yB++]=fm;yB=97;for(fm=10;fm<36;++fm)JZ[yB++]=fm;yB=65;for(fm=10;fm<36;++fm)JZ[yB++]=fm;function Ort(t){return Crr.charAt(t)}s(Ort,"int2char");function Qrt(t,e){var r=JZ[t.charCodeAt(e)];return r??-1}s(Qrt,"intAt");function vrr(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(vrr,"bnpCopyTo");function Err(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(Err,"bnpFromInt");function RT(t){var e=Lo();return e.fromInt(t),e}s(RT,"nbv");function xrr(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Qrt(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Rt.ZERO.subTo(this,this)}s(xrr,"bnpFromString");function brr(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(brr,"bnpClamp");function Irr(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=Ort(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=Ort(n));return i?o:"0"}s(Irr,"bnToString");function Trr(){var t=Lo();return Rt.ZERO.subTo(this,t),t}s(Trr,"bnNegate");function wrr(){return this.s<0?this.negate():this}s(wrr,"bnAbs");function _rr(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(_rr,"bnCompareTo");function XZ(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(XZ,"nbits");function Srr(){return this.t<=0?0:this.DB*(this.t-1)+XZ(this.data[this.t-1]^this.s&this.DM)}s(Srr,"bnBitLength");function Rrr(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(Rrr,"bnpDLShiftTo");function krr(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(krr,"bnpDRShiftTo");function Prr(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(Prr,"bnpLShiftTo");function Drr(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(Drr,"bnpRShiftTo");function Brr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(Brr,"bnpSubTo");function Nrr(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Rt.ZERO.subTo(e,e)}s(Nrr,"bnpMultiplyTo");function Lrr(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(Lrr,"bnpSquareTo");function Mrr(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Lo());var o=Lo(),a=this.s,c=t.s,l=this.DB-XZ(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),h=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,A=r.t,y=A-u,E=e??Lo();for(o.dlShiftTo(y,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),Rt.ONE.dlShiftTo(u,E),E.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--y>=0;){var b=r.data[--A]==f?this.DM:Math.floor(r.data[A]*h+(r.data[A-1]+g)*m);if((r.data[A]+=o.am(0,b,r,y,0,u))<b)for(o.dlShiftTo(y,E),r.subTo(E,r);r.data[A]<--b;)r.subTo(E,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&Rt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&Rt.ZERO.subTo(r,r)}}}s(Mrr,"bnpDivRemTo");function Frr(t){var e=Lo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Rt.ZERO)>0&&t.subTo(e,e),e}s(Frr,"bnMod");function IR(t){this.m=t}s(IR,"Classic");function Orr(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(Orr,"cConvert");function Qrr(t){return t}s(Qrr,"cRevert");function Urr(t){t.divRemTo(this.m,null,t)}s(Urr,"cReduce");function qrr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(qrr,"cMulTo");function Hrr(t,e){t.squareTo(e),this.reduce(e)}s(Hrr,"cSqrTo");IR.prototype.convert=Orr;IR.prototype.revert=Qrr;IR.prototype.reduce=Urr;IR.prototype.mulTo=qrr;IR.prototype.sqrTo=Hrr;function Wrr(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(Wrr,"bnpInvDigit");function TR(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(TR,"Montgomery");function $rr(t){var e=Lo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Rt.ZERO)>0&&this.m.subTo(e,e),e}s($rr,"montConvert");function jrr(t){var e=Lo();return t.copyTo(e),this.reduce(e),e}s(jrr,"montRevert");function Grr(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(Grr,"montReduce");function Vrr(t,e){t.squareTo(e),this.reduce(e)}s(Vrr,"montSqrTo");function zrr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(zrr,"montMulTo");TR.prototype.convert=$rr;TR.prototype.revert=jrr;TR.prototype.reduce=Grr;TR.prototype.mulTo=zrr;TR.prototype.sqrTo=Vrr;function Yrr(){return(this.t>0?this.data[0]&1:this.s)==0}s(Yrr,"bnpIsEven");function Krr(t,e){if(t>4294967295||t<1)return Rt.ONE;var r=Lo(),n=Lo(),i=e.convert(this),o=XZ(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(Krr,"bnpExp");function Jrr(t,e){var r;return t<256||e.isEven()?r=new IR(e):r=new TR(e),this.exp(t,r)}s(Jrr,"bnModPowInt");Rt.prototype.copyTo=vrr;Rt.prototype.fromInt=Err;Rt.prototype.fromString=xrr;Rt.prototype.clamp=brr;Rt.prototype.dlShiftTo=Rrr;Rt.prototype.drShiftTo=krr;Rt.prototype.lShiftTo=Prr;Rt.prototype.rShiftTo=Drr;Rt.prototype.subTo=Brr;Rt.prototype.multiplyTo=Nrr;Rt.prototype.squareTo=Lrr;Rt.prototype.divRemTo=Mrr;Rt.prototype.invDigit=Wrr;Rt.prototype.isEven=Yrr;Rt.prototype.exp=Krr;Rt.prototype.toString=Irr;Rt.prototype.negate=Trr;Rt.prototype.abs=wrr;Rt.prototype.compareTo=_rr;Rt.prototype.bitLength=Srr;Rt.prototype.mod=Frr;Rt.prototype.modPowInt=Jrr;Rt.ZERO=RT(0);Rt.ONE=RT(1);function Xrr(){var t=Lo();return this.copyTo(t),t}s(Xrr,"bnClone");function Zrr(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(Zrr,"bnIntValue");function enr(){return this.t==0?this.s:this.data[0]<<24>>24}s(enr,"bnByteValue");function tnr(){return this.t==0?this.s:this.data[0]<<16>>16}s(tnr,"bnShortValue");function rnr(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(rnr,"bnpChunkSize");function nnr(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(nnr,"bnSigNum");function inr(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=RT(r),i=Lo(),o=Lo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(inr,"bnpToRadix");function onr(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Qrt(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Rt.ZERO.subTo(this,this)}s(onr,"bnpFromRadix");function snr(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Rt.ONE.shiftLeft(t-1),TEe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Rt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(snr,"bnpFromNumber");function anr(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(anr,"bnToByteArray");function cnr(t){return this.compareTo(t)==0}s(cnr,"bnEquals");function lnr(t){return this.compareTo(t)<0?this:t}s(lnr,"bnMin");function unr(t){return this.compareTo(t)>0?this:t}s(unr,"bnMax");function dnr(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(dnr,"bnpBitwiseTo");function fnr(t,e){return t&e}s(fnr,"op_and");function pnr(t){var e=Lo();return this.bitwiseTo(t,fnr,e),e}s(pnr,"bnAnd");function TEe(t,e){return t|e}s(TEe,"op_or");function hnr(t){var e=Lo();return this.bitwiseTo(t,TEe,e),e}s(hnr,"bnOr");function Urt(t,e){return t^e}s(Urt,"op_xor");function mnr(t){var e=Lo();return this.bitwiseTo(t,Urt,e),e}s(mnr,"bnXor");function qrt(t,e){return t&~e}s(qrt,"op_andnot");function gnr(t){var e=Lo();return this.bitwiseTo(t,qrt,e),e}s(gnr,"bnAndNot");function Anr(){for(var t=Lo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(Anr,"bnNot");function ynr(t){var e=Lo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(ynr,"bnShiftLeft");function Cnr(t){var e=Lo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(Cnr,"bnShiftRight");function vnr(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(vnr,"lbit");function Enr(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+vnr(this.data[t]);return this.s<0?this.t*this.DB:-1}s(Enr,"bnGetLowestSetBit");function xnr(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(xnr,"cbit");function bnr(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=xnr(this.data[r]^e);return t}s(bnr,"bnBitCount");function Inr(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(Inr,"bnTestBit");function Tnr(t,e){var r=Rt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(Tnr,"bnpChangeBit");function wnr(t){return this.changeBit(t,TEe)}s(wnr,"bnSetBit");function _nr(t){return this.changeBit(t,qrt)}s(_nr,"bnClearBit");function Snr(t){return this.changeBit(t,Urt)}s(Snr,"bnFlipBit");function Rnr(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(Rnr,"bnpAddTo");function knr(t){var e=Lo();return this.addTo(t,e),e}s(knr,"bnAdd");function Pnr(t){var e=Lo();return this.subTo(t,e),e}s(Pnr,"bnSubtract");function Dnr(t){var e=Lo();return this.multiplyTo(t,e),e}s(Dnr,"bnMultiply");function Bnr(t){var e=Lo();return this.divRemTo(t,e,null),e}s(Bnr,"bnDivide");function Nnr(t){var e=Lo();return this.divRemTo(t,null,e),e}s(Nnr,"bnRemainder");function Lnr(t){var e=Lo(),r=Lo();return this.divRemTo(t,e,r),new Array(e,r)}s(Lnr,"bnDivideAndRemainder");function Mnr(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(Mnr,"bnpDMultiply");function Fnr(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(Fnr,"bnpDAddOffset");function t7(){}s(t7,"NullExp");function Hrt(t){return t}s(Hrt,"nNop");function Onr(t,e,r){t.multiplyTo(e,r)}s(Onr,"nMulTo");function Qnr(t,e){t.squareTo(e)}s(Qnr,"nSqrTo");t7.prototype.convert=Hrt;t7.prototype.revert=Hrt;t7.prototype.mulTo=Onr;t7.prototype.sqrTo=Qnr;function Unr(t){return this.exp(t,new t7)}s(Unr,"bnPow");function qnr(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(qnr,"bnpMultiplyLowerTo");function Hnr(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(Hnr,"bnpMultiplyUpperTo");function CB(t){this.r2=Lo(),this.q3=Lo(),Rt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(CB,"Barrett");function Wnr(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Lo();return t.copyTo(e),this.reduce(e),e}s(Wnr,"barrettConvert");function $nr(t){return t}s($nr,"barrettRevert");function jnr(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(jnr,"barrettReduce");function Gnr(t,e){t.squareTo(e),this.reduce(e)}s(Gnr,"barrettSqrTo");function Vnr(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(Vnr,"barrettMulTo");CB.prototype.convert=Wnr;CB.prototype.revert=$nr;CB.prototype.reduce=jnr;CB.prototype.mulTo=Vnr;CB.prototype.sqrTo=Gnr;function znr(t,e){var r=t.bitLength(),n,i=RT(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new IR(e):e.isEven()?o=new CB(e):o=new TR(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=Lo();for(o.sqrTo(a[1],f);c<=u;)a[c]=Lo(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,h,m=!0,g=Lo(),A;for(r=XZ(t.data[p])-1;p>=0;){for(r>=l?h=t.data[p]>>r-l&u:(h=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(h|=t.data[p-1]>>this.DB+r-l)),c=n;(h&1)==0;)h>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),m)a[h].copyTo(i),m=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(A=i,i=g,g=A),o.mulTo(g,a[h],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),A=i,i=g,g=A,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(znr,"bnModPow");function Ynr(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(Ynr,"bnGCD");function Knr(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(Knr,"bnpModInt");function Jnr(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Rt.ZERO;for(var r=t.clone(),n=this.clone(),i=RT(1),o=RT(0),a=RT(0),c=RT(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(Rt.ONE)!=0)return Rt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(Jnr,"bnModInverse");var uA=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Xnr=(1<<26)/uA[uA.length-1];function Znr(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=uA[uA.length-1]){for(e=0;e<uA.length;++e)if(r.data[0]==uA[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<uA.length;){for(var n=uA[e],i=e+1;i<uA.length&&n<Xnr;)n*=uA[i++];for(n=r.modInt(n);e<i;)if(n%uA[e++]==0)return!1}return r.millerRabin(t)}s(Znr,"bnIsProbablePrime");function eir(t){var e=this.subtract(Rt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=tir(),o,a=0;a<t;++a){do o=new Rt(this.bitLength(),i);while(o.compareTo(Rt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(Rt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(Rt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(eir,"bnpMillerRabin");function tir(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(tir,"bnGetPrng");Rt.prototype.chunkSize=rnr;Rt.prototype.toRadix=inr;Rt.prototype.fromRadix=onr;Rt.prototype.fromNumber=snr;Rt.prototype.bitwiseTo=dnr;Rt.prototype.changeBit=Tnr;Rt.prototype.addTo=Rnr;Rt.prototype.dMultiply=Mnr;Rt.prototype.dAddOffset=Fnr;Rt.prototype.multiplyLowerTo=qnr;Rt.prototype.multiplyUpperTo=Hnr;Rt.prototype.modInt=Knr;Rt.prototype.millerRabin=eir;Rt.prototype.clone=Xrr;Rt.prototype.intValue=Zrr;Rt.prototype.byteValue=enr;Rt.prototype.shortValue=tnr;Rt.prototype.signum=nnr;Rt.prototype.toByteArray=anr;Rt.prototype.equals=cnr;Rt.prototype.min=lnr;Rt.prototype.max=unr;Rt.prototype.and=pnr;Rt.prototype.or=hnr;Rt.prototype.xor=mnr;Rt.prototype.andNot=gnr;Rt.prototype.not=Anr;Rt.prototype.shiftLeft=ynr;Rt.prototype.shiftRight=Cnr;Rt.prototype.getLowestSetBit=Enr;Rt.prototype.bitCount=bnr;Rt.prototype.testBit=Inr;Rt.prototype.setBit=wnr;Rt.prototype.clearBit=_nr;Rt.prototype.flipBit=Snr;Rt.prototype.add=knr;Rt.prototype.subtract=Pnr;Rt.prototype.multiply=Dnr;Rt.prototype.divide=Bnr;Rt.prototype.remainder=Nnr;Rt.prototype.divideAndRemainder=Lnr;Rt.prototype.modPow=znr;Rt.prototype.modInverse=Jnr;Rt.prototype.pow=Unr;Rt.prototype.gcd=Ynr;Rt.prototype.isProbablePrime=Znr});var vB=q((Osi,Vrt)=>{d();var SC=Ii();bC();No();var jrt=Vrt.exports=SC.sha1=SC.sha1||{};SC.md.sha1=SC.md.algorithms.sha1=jrt;jrt.create=function(){Grt||rir();var t=null,e=SC.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=SC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=SC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),$rt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=SC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(wEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};$rt(p,r,i);var h=SC.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},n};var wEe=null,Grt=!1;function rir(){wEe="\x80",wEe+=SC.util.fillString("\0",64),Grt=!0}s(rir,"_init");function $rt(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s($rt,"_update")});var _Ee=q((qsi,Yrt)=>{d();var RC=Ii();No();dm();vB();var zrt=Yrt.exports=RC.pkcs1=RC.pkcs1||{};zrt.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=RC.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",h=l-e.length,m=0;m<h;m++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=RC.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var A=ZZ(i,c-o.digestLength-1,a),y=RC.util.xorBytes(g,A,g.length),E=ZZ(y,o.digestLength,a),b=RC.util.xorBytes(i,E,i.length);return"\0"+b+y};zrt.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var y=new Error("RSAES-OAEP encoded message length is invalid.");throw y.length=e.length,y.expectedLength=a,y}if(i===void 0?i=RC.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=ZZ(f,i.digestLength,o),h=RC.util.xorBytes(u,p,u.length),m=ZZ(h,a-i.digestLength-1,o),g=RC.util.xorBytes(f,m,f.length),A=g.substring(0,i.digestLength),y=l!=="\0",E=0;E<i.digestLength;++E)y|=c.charAt(E)!==A.charAt(E);for(var b=1,_=i.digestLength,S=i.digestLength;S<g.length;S++){var P=g.charCodeAt(S),B=P&1^1,F=b?65534:0;y|=P&F,b=b&B,_+=b}if(y||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function ZZ(t,e,r){r||(r=RC.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(ZZ,"rsa_mgf1")});var REe=q(($si,SEe)=>{d();var kT=Ii();No();r7();dm();(function(){if(kT.prime){SEe.exports=kT.prime;return}var t=SEe.exports=kT.prime=kT.prime||{},e=kT.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,h){return p|h},"op_or");t.generateProbablePrime=function(p,h,m){typeof h=="function"&&(m=h,h={}),h=h||{};var g=h.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var A=h.prng||kT.random,y={nextBytes:s(function(E){for(var b=A.getBytesSync(E.length),_=0;_<E.length;++_)E[_]=b.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,y,g.options,m);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,h,m,g){return"workers"in m?l(p,h,m,g):a(p,h,m,g)}s(o,"primeincFindPrime");function a(p,h,m,g){var A=u(p,h),y=0,E=f(A.bitLength());"millerRabinTests"in m&&(E=m.millerRabinTests);var b=10;"maxBlockTime"in m&&(b=m.maxBlockTime),c(A,p,h,y,E,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,h,m,g,A,y,E){var b=+new Date;do{if(p.bitLength()>h&&(p=u(h,m)),p.isProbablePrime(A))return E(null,p);p.dAddOffset(r[g++%8],0)}while(y<0||+new Date-b<y);kT.util.setImmediate(function(){c(p,h,m,g,A,y,E)})}s(c,"_primeinc");function l(p,h,m,g){if(typeof Worker>"u")return a(p,h,m,g);var A=u(p,h),y=m.workers,E=m.workLoad||100,b=E*30/8,_=m.workerScript||"forge/prime.worker.js";if(y===-1)return kT.util.estimateCores(function(P,B){P&&(B=2),y=B-1,S()});S();function S(){y=Math.max(1,y);for(var P=[],B=0;B<y;++B)P[B]=new Worker(_);for(var F=y,B=0;B<y;++B)P[B].addEventListener("message",ee);var Y=!1;function ee(V){if(!Y){--F;var H=V.data;if(H.found){for(var U=0;U<P.length;++U)P[U].terminate();return Y=!0,g(null,new e(H.prime,16))}A.bitLength()>p&&(A=u(p,h));var X=A.toString(16);V.target.postMessage({hex:X,workLoad:E}),A.dAddOffset(b,0)}}s(ee,"workerMessage")}s(S,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,h){var m=new e(p,h),g=p-1;return m.testBit(g)||m.bitwiseTo(e.ONE.shiftLeft(g),i,m),m.dAddOffset(31-m.mod(n).byteValue(),0),m}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var n7=q((Vsi,rnt)=>{d();var dn=Ii();lA();r7();ST();_Ee();REe();dm();No();typeof To>"u"&&(To=dn.jsbn.BigInteger);var To,kEe=dn.util.isNodejs?require("crypto"):null,ze=dn.asn1,pm=dn.util;dn.pki=dn.pki||{};rnt.exports=dn.pki.rsa=dn.rsa=dn.rsa||{};var fi=dn.pki,nir=[6,4,2,4,2,4,6,2],iir={name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},oir={name:"RSAPrivateKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},sir={name:"RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:ze.Class.UNIVERSAL,type:ze.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},air=dn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},cir={name:"DigestInfo",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:ze.Class.UNIVERSAL,type:ze.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:ze.Class.UNIVERSAL,type:ze.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:ze.Class.UNIVERSAL,type:ze.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},lir=s(function(t){var e;if(t.algorithm in fi.oids)e=fi.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=ze.oidToDer(e).getBytes(),i=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]),o=ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[]);o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,n)),o.value.push(ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,""));var a=ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),ze.toDer(i).getBytes()},"emsaPkcs1v15encode"),ent=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(To.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(To.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new To(dn.util.bytesToHex(dn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(To.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");fi.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=tnt(t,e,r)):(i=dn.util.createBuffer(),i.putBytes(t));for(var a=new To(i.toHex(),16),c=ent(a,e,n),l=c.toString(16),u=dn.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(dn.util.hexToBytes(l)),u.getBytes()};fi.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new To(dn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=ent(a,e,r),l=c.toString(16),u=dn.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(dn.util.hexToBytes(l)),n!==!1?eee(u.getBytes(),e,r):u.getBytes()};fi.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||dn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new To(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};fi.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new To(null);r.fromInt(30);for(var n=0,i=s(function(p,h){return p|h},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new To(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(To.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(dir(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(nir[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(To.ONE).gcd(t.e).compareTo(To.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(To.ONE),t.q1=t.q.subtract(To.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(To.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:fi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:fi.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};fi.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!dn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Krt("generateKeyPair"))return kEe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:fi.privateKeyFromPem(u),publicKey:fi.publicKeyFromPem(l)})});if(Jrt("generateKey")&&Jrt("exportKey"))return pm.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Zrt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return pm.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=fi.privateKeyFromAsn1(ze.fromDer(dn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:fi.setRsaPublicKey(l.n,l.e)})}});if(Xrt("generateKey")&&Xrt("exportKey")){var i=pm.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Zrt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=pm.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,h=fi.privateKeyFromAsn1(ze.fromDer(dn.util.createBuffer(p)));n(null,{privateKey:h,publicKey:fi.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(Krt("generateKeyPairSync")){var o=kEe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:fi.privateKeyFromPem(o.privateKey),publicKey:fi.publicKeyFromPem(o.publicKey)}}}var a=fi.rsa.createKeyPairGenerationState(t,e,r);if(!n)return fi.rsa.stepKeyPairGenerationState(a,0),a.keys;uir(a,r,n)};fi.setRsaPublicKey=fi.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return tnt(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return dn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return fi.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=eee(u,r,!0);var f=ze.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},h=[];if(!ze.validate(f,cir,p,h)){var m=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw m.errors=h,m}var g=ze.derToOid(p.algorithmIdentifier);if(!(g===dn.oids.md2||g===dn.oids.md5||g===dn.oids.sha1||g===dn.oids.sha224||g===dn.oids.sha256||g===dn.oids.sha384||g===dn.oids.sha512||g===dn.oids["sha512-224"]||g===dn.oids["sha512-256"])){var m=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw m.oid=g,m}if((g===dn.oids.md2||g===dn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=eee(u,r,!0),l===u},"verify")});var c=fi.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};fi.setRsaPrivateKey=fi.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=fi.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:eee};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(m,g){return dn.pkcs1.decode_rsa_oaep(g,m,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(m){return m},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:lir},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var h=f.encode(u,l.n.bitLength());return fi.rsa.encrypt(h,l,p)},l};fi.wrapRsaPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(fi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.OCTETSTRING,!1,ze.toDer(t).getBytes())])};fi.privateKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,iir,e,r)&&(t=ze.fromDer(dn.util.createBuffer(e.privateKey))),e={},r=[],!ze.validate(t,oir,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=dn.util.createBuffer(e.privateKeyModulus).toHex(),o=dn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=dn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=dn.util.createBuffer(e.privateKeyPrime1).toHex(),l=dn.util.createBuffer(e.privateKeyPrime2).toHex(),u=dn.util.createBuffer(e.privateKeyExponent1).toHex(),f=dn.util.createBuffer(e.privateKeyExponent2).toHex(),p=dn.util.createBuffer(e.privateKeyCoefficient).toHex(),fi.setRsaPrivateKey(new To(i,16),new To(o,16),new To(a,16),new To(c,16),new To(l,16),new To(u,16),new To(f,16),new To(p,16))};fi.privateKeyToAsn1=fi.privateKeyToRSAPrivateKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,ze.integerToDer(0).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.e)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.d)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.p)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.q)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.dP)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.dQ)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.qInv))])};fi.publicKeyFromAsn1=function(t){var e={},r=[];if(ze.validate(t,air,e,r)){var n=ze.derToOid(e.publicKeyOid);if(n!==fi.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!ze.validate(t,sir,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=dn.util.createBuffer(e.publicKeyModulus).toHex(),a=dn.util.createBuffer(e.publicKeyExponent).toHex();return fi.setRsaPublicKey(new To(o,16),new To(a,16))};fi.publicKeyToAsn1=fi.publicKeyToSubjectPublicKeyInfo=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.OID,!1,ze.oidToDer(fi.oids.rsaEncryption).getBytes()),ze.create(ze.Class.UNIVERSAL,ze.Type.NULL,!1,"")]),ze.create(ze.Class.UNIVERSAL,ze.Type.BITSTRING,!1,[fi.publicKeyToRSAPublicKey(t)])])};fi.publicKeyToRSAPublicKey=function(t){return ze.create(ze.Class.UNIVERSAL,ze.Type.SEQUENCE,!0,[ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.n)),ze.create(ze.Class.UNIVERSAL,ze.Type.INTEGER,!1,kC(t.e))])};function tnt(t,e,r){var n=dn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=dn.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(tnt,"_encodePkcs1_v1_5");function eee(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=dn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(eee,"_decodePkcs1_v1_5");function uir(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){dn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(To.ONE).gcd(t.e).compareTo(To.ONE)!==0){t.p=null,i();return}if(t.q.subtract(To.ONE).gcd(t.e).compareTo(To.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(To.ONE),t.q1=t.q.subtract(To.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(To.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:fi.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:fi.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(uir,"_generateKeyPair");function kC(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=dn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(kC,"_bnToBytes");function dir(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(dir,"_getMillerRabinTests");function Krt(t){return dn.util.isNodejs&&typeof kEe[t]=="function"}s(Krt,"_detectNodeCrypto");function Jrt(t){return typeof pm.globalScope<"u"&&typeof pm.globalScope.crypto=="object"&&typeof pm.globalScope.crypto.subtle=="object"&&typeof pm.globalScope.crypto.subtle[t]=="function"}s(Jrt,"_detectSubtleCrypto");function Xrt(t){return typeof pm.globalScope<"u"&&typeof pm.globalScope.msCrypto=="object"&&typeof pm.globalScope.msCrypto.subtle=="object"&&typeof pm.globalScope.msCrypto.subtle[t]=="function"}s(Xrt,"_detectSubtleMsCrypto");function Zrt(t){for(var e=dn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(Zrt,"_intToUint8Array")});var PEe=q((Ksi,ant)=>{d();var Er=Ii();_T();lA();e7();bC();ST();YZ();bR();dm();xEe();n7();No();typeof nnt>"u"&&(nnt=Er.jsbn.BigInteger);var nnt,ht=Er.asn1,Ci=Er.pki=Er.pki||{};ant.exports=Ci.pbe=Er.pbe=Er.pbe||{};var wR=Ci.oids,fir={name:"EncryptedPrivateKeyInfo",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},pir={name:"PBES2Algorithms",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ht.Class.UNIVERSAL,type:ht.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ht.Class.UNIVERSAL,type:ht.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},hir={name:"pkcs-12PbeParams",tagClass:ht.Class.UNIVERSAL,type:ht.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ht.Class.UNIVERSAL,type:ht.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ht.Class.UNIVERSAL,type:ht.Type.INTEGER,constructed:!1,capture:"iterations"}]};Ci.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Er.random.getBytesSync(r.saltSize),i=r.count,o=ht.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=wR["aes128-CBC"],p=Er.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=wR["aes192-CBC"],p=Er.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=wR["aes256-CBC"],p=Er.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=wR.desCBC,p=Er.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),g=snt(m),A=Er.pkcs5.pbkdf2(e,n,i,a,g),y=Er.random.getBytesSync(u),E=p(A);E.start(y),E.update(ht.toDer(t)),E.finish(),l=E.output.getBytes();var b=mir(n,o,a,m);c=ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OID,!1,ht.oidToDer(wR.pkcs5PBES2).getBytes()),ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OID,!1,ht.oidToDer(wR.pkcs5PBKDF2).getBytes()),b]),ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OID,!1,ht.oidToDer(f).getBytes()),ht.create(ht.Class.UNIVERSAL,ht.Type.OCTETSTRING,!1,y)])])])}else if(r.algorithm==="3des"){a=24;var _=new Er.util.ByteBuffer(n),A=Ci.pbe.generatePkcs12Key(e,_,1,i,a),y=Ci.pbe.generatePkcs12Key(e,_,2,i,a),E=Er.des.createEncryptionCipher(A);E.start(y),E.update(ht.toDer(t)),E.finish(),l=E.output.getBytes(),c=ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OID,!1,ht.oidToDer(wR["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OCTETSTRING,!1,n),ht.create(ht.Class.UNIVERSAL,ht.Type.INTEGER,!1,o.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var S=ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[c,ht.create(ht.Class.UNIVERSAL,ht.Type.OCTETSTRING,!1,l)]);return S};Ci.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ht.validate(t,fir,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=ht.derToOid(n.encryptionOid),c=Ci.pbe.getCipher(a,n.encryptionParams,e),l=Er.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=ht.fromDer(c.output)),r};Ci.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ht.toDer(t).getBytes()};return Er.pem.encode(r,{maxline:e})};Ci.encryptedPrivateKeyFromPem=function(t){var e=Er.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ht.fromDer(e.body)};Ci.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Ci.wrapRsaPrivateKey(Ci.privateKeyToAsn1(t));return n=Ci.encryptPrivateKeyInfo(n,e,r),Ci.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=Er.random.getBytesSync(16),c=Er.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=Er.random.getBytesSync(8),c=Er.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=Er.random.getBytesSync(8),c=Er.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=Er.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(ht.toDer(Ci.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Er.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return Er.pem.encode(p)};Ci.decryptRsaPrivateKey=function(t,e){var r=null,n=Er.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=Er.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=Er.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=Er.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=Er.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=Er.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return Er.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return Er.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return Er.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=Er.util.hexToBytes(n.dekInfo.parameters),l=Er.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(Er.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Ci.decryptPrivateKeyInfo(ht.fromDer(r),e):r=ht.fromDer(r),r!==null&&(r=Ci.privateKeyFromAsn1(r)),r};Ci.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in Er.md))throw new Error('"sha1" hash algorithm unavailable.');o=Er.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new Er.util.ByteBuffer,p=new Er.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var h=p.length(),m=e.length(),g=new Er.util.ByteBuffer;g.fillWithByte(r,u);var A=u*Math.ceil(m/u),y=new Er.util.ByteBuffer;for(c=0;c<A;c++)y.putByte(e.at(c%m));var E=u*Math.ceil(h/u),b=new Er.util.ByteBuffer;for(c=0;c<E;c++)b.putByte(p.at(c%h));var _=y;_.putBuffer(b);for(var S=Math.ceil(i/l),P=1;P<=S;P++){var B=new Er.util.ByteBuffer;B.putBytes(g.bytes()),B.putBytes(_.bytes());for(var F=0;F<n;F++)o.start(),o.update(B.getBytes()),B=o.digest();var Y=new Er.util.ByteBuffer;for(c=0;c<u;c++)Y.putByte(B.at(c%l));var ee=Math.ceil(m/u)+Math.ceil(h/u),V=new Er.util.ByteBuffer;for(a=0;a<ee;a++){var H=new Er.util.ByteBuffer(_.getBytes(u)),U=511;for(c=Y.length()-1;c>=0;c--)U=U>>8,U+=Y.at(c)+H.at(c),H.setAt(c,U&255);V.putBuffer(H)}_=V,f.putBuffer(B)}return f.truncate(f.length()-i),f};Ci.pbe.getCipher=function(t,e,r){switch(t){case Ci.oids.pkcs5PBES2:return Ci.pbe.getCipherForPBES2(t,e,r);case Ci.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Ci.oids["pbewithSHAAnd40BitRC2-CBC"]:return Ci.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Ci.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ht.validate(e,pir,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=ht.derToOid(n.kdfOid),t!==Ci.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=ht.derToOid(n.encOid),t!==Ci.oids["aes128-CBC"]&&t!==Ci.oids["aes192-CBC"]&&t!==Ci.oids["aes256-CBC"]&&t!==Ci.oids["des-EDE3-CBC"]&&t!==Ci.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=Er.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(Ci.oids[t]){case"aes128-CBC":l=16,u=Er.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=Er.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=Er.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=Er.des.createDecryptionCipher;break;case"desCBC":l=8,u=Er.des.createDecryptionCipher;break}var f=ont(n.prfOid),p=Er.pkcs5.pbkdf2(r,a,c,l,f),h=n.encIv,m=u(p);return m.start(h),m};Ci.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ht.validate(e,hir,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=Er.util.createBuffer(n.salt),c=Er.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case Ci.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=Er.des.startDecrypting;break;case Ci.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(A,y){var E=Er.rc2.createDecryptionCipher(A,40);return E.start(y,null),E},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=ont(n.prfOid),h=Ci.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var m=Ci.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(h,m)};Ci.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in Er.md))throw new Error('"md5" hash algorithm unavailable.');n=Er.md.md5.create()}e===null&&(e="");for(var i=[int(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(int(n,i[a-1]+t+e));return i.join("").substr(0,r)};function int(t,e){return t.start().update(e).digest().getBytes()}s(int,"hash");function ont(t){var e;if(!t)e="hmacWithSHA1";else if(e=Ci.oids[ht.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return snt(e)}s(ont,"prfOidToMessageDigest");function snt(t){var e=Er.md;switch(t){case"hmacWithSHA224":e=Er.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(snt,"prfAlgorithmToMessageDigest");function mir(t,e,r,n){var i=ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OCTETSTRING,!1,t),ht.create(ht.Class.UNIVERSAL,ht.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ht.create(ht.Class.UNIVERSAL,ht.Type.INTEGER,!1,Er.util.hexToBytes(r.toString(16))),ht.create(ht.Class.UNIVERSAL,ht.Type.SEQUENCE,!0,[ht.create(ht.Class.UNIVERSAL,ht.Type.OID,!1,ht.oidToDer(Ci.oids[n]).getBytes()),ht.create(ht.Class.UNIVERSAL,ht.Type.NULL,!1,"")])),i}s(mir,"createPbkdf2Params")});var DEe=q((Zsi,unt)=>{d();var EB=Ii();lA();No();var hr=EB.asn1,xB=unt.exports=EB.pkcs7asn1=EB.pkcs7asn1||{};EB.pkcs7=EB.pkcs7||{};EB.pkcs7.asn1=xB;var cnt={name:"ContentInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};xB.contentInfoValidator=cnt;var lnt={name:"EncryptedContentInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};xB.envelopedDataValidator={name:"EnvelopedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(lnt)};xB.encryptedDataValidator={name:"EncryptedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"}].concat(lnt)};var gir={name:"SignerInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:hr.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};xB.signedDataValidator={name:"SignedData",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},cnt,{name:"SignedData.Certificates",tagClass:hr.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:hr.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SET,capture:"signerInfos",optional:!0,value:[gir]}]};xB.recipientInfoValidator={name:"RecipientInfo",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:hr.Class.UNIVERSAL,type:hr.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:hr.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:hr.Class.UNIVERSAL,type:hr.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var BEe=q((tai,dnt)=>{d();var _R=Ii();No();_R.mgf=_R.mgf||{};var Air=dnt.exports=_R.mgf.mgf1=_R.mgf1=_R.mgf1||{};Air.create=function(t){var e={generate:s(function(r,n){for(var i=new _R.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new _R.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var pnt=q((iai,fnt)=>{d();var tee=Ii();BEe();fnt.exports=tee.mgf=tee.mgf||{};tee.mgf.mgf1=tee.mgf1});var ree=q((sai,hnt)=>{d();var SR=Ii();dm();No();var yir=hnt.exports=SR.pss=SR.pss||{};yir.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=SR.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||SR.random,c={};return c.encode=function(l,u){var f,p=u-1,h=Math.ceil(p/8),m=l.digest().getBytes();if(h<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var A=new SR.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(m),A.putBytes(g),e.start(),e.update(A.getBytes());var y=e.digest().getBytes(),E=new SR.util.ByteBuffer;E.fillWithByte(0,h-o-n-2),E.putByte(1),E.putBytes(g);var b=E.getBytes(),_=h-n-1,S=r.generate(y,_),P="";for(f=0;f<_;f++)P+=String.fromCharCode(b.charCodeAt(f)^S.charCodeAt(f));var B=65280>>8*h-p&255;return P=String.fromCharCode(P.charCodeAt(0)&~B)+P.substr(1),P+y+"\xBC"},c.verify=function(l,u,f){var p,h=f-1,m=Math.ceil(h/8);if(u=u.substr(-m),m<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=m-n-1,A=u.substr(0,g),y=u.substr(g,n),E=65280>>8*m-h&255;if((A.charCodeAt(0)&E)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(y,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(A.charCodeAt(p)^b.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~E)+_.substr(1);var S=m-n-o-2;for(p=0;p<S;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(S)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=_.substr(-o),B=new SR.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(l),B.putBytes(P),e.start(),e.update(B.getBytes());var F=e.digest().getBytes();return y===F},c}});var oee=q((cai,Cnt)=>{d();var fn=Ii();_T();lA();e7();bC();pnt();ST();bR();ree();n7();No();var re=fn.asn1,Jt=Cnt.exports=fn.pki=fn.pki||{},wo=Jt.oids,Xa={};Xa.CN=wo.commonName;Xa.commonName="CN";Xa.C=wo.countryName;Xa.countryName="C";Xa.L=wo.localityName;Xa.localityName="L";Xa.ST=wo.stateOrProvinceName;Xa.stateOrProvinceName="ST";Xa.O=wo.organizationName;Xa.organizationName="O";Xa.OU=wo.organizationalUnitName;Xa.organizationalUnitName="OU";Xa.E=wo.emailAddress;Xa.emailAddress="E";var gnt=fn.pki.rsa.publicKeyValidator,Cir={name:"Certificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:re.Class.UNIVERSAL,type:re.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:re.Class.UNIVERSAL,type:re.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},gnt,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},vir={name:"rsapss",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:re.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:re.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:re.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:re.Class.UNIVERSAL,type:re.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Eir={name:"CertificationRequestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},gnt,{name:"CertificationRequestInfo.attributes",tagClass:re.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:re.Class.UNIVERSAL,type:re.Type.SET,constructed:!0}]}]}]},xir={name:"CertificationRequest",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Eir,{name:"CertificationRequest.signatureAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=re.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in wo&&(o.name=wo[o.type],o.name in Xa&&(o.shortName=Xa[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=re.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in wo&&(c.name=wo[c.type],c.name in Xa&&(c.shortName=Xa[c.name])),c.type===wo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(Jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function PT(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(PT,"_getAttribute");var nee=s(function(t,e,r){var n={};if(t!==wo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:wo.sha1},mgf:{algorithmOid:wo.mgf1,hash:{algorithmOid:wo.sha1}},saltLength:20});var i={},o=[];if(!re.validate(e,vir,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=re.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=re.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=re.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),iee=s(function(t){switch(wo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return fn.md.sha1.create();case"md5WithRSAEncryption":return fn.md.md5.create();case"sha256WithRSAEncryption":return fn.md.sha256.create();case"sha384WithRSAEncryption":return fn.md.sha384.create();case"sha512WithRSAEncryption":return fn.md.sha512.create();case"RSASSA-PSS":return fn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Ant=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case wo.sha1WithRSAEncryption:case wo.sha1WithRSASignature:break;case wo["RSASSA-PSS"]:var n,i;if(n=wo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||fn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=wo[e.signatureParameters.mgf.algorithmOid],i===void 0||fn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=fn.mgf[i].create(fn.md[n].create()),n=wo[e.signatureParameters.hash.algorithmOid],n===void 0||fn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=fn.pss.create(fn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Jt.certificateFromPem=function(t,e,r){var n=fn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificateFromAsn1(o,e)};Jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:re.toDer(Jt.certificateToAsn1(t)).getBytes()};return fn.pem.encode(r,{maxline:e})};Jt.publicKeyFromPem=function(t){var e=fn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=re.fromDer(e.body);return Jt.publicKeyFromAsn1(n)};Jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:re.toDer(Jt.publicKeyToAsn1(t)).getBytes()};return fn.pem.encode(r,{maxline:e})};Jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes()};return fn.pem.encode(r,{maxline:e})};Jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||fn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=re.toDer(Jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=re.toDer(Jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Jt.certificationRequestFromPem=function(t,e,r){var n=fn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=re.fromDer(n.body,r);return Jt.certificationRequestFromAsn1(o,e)};Jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:re.toDer(Jt.certificationRequestToAsn1(t)).getBytes()};return fn.pem.encode(r,{maxline:e})};Jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return PT(t.issuer,e)},t.issuer.addField=function(e){hm([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return PT(t.subject,e)},t.subject.addField=function(e){hm([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){hm(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){hm(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)ynt(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||fn.md.sha1.create();var n=wo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Jt.getTBSCertificate(t);var o=re.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=iee({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||Jt.getTBSCertificate(e),l=re.toDer(c);a.update(l.getBytes())}return a!==null&&(r=Ant({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=wo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return fn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,Cir,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=fn.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=fn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=nee(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=fn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=nee(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(re.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(re.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=iee({signatureOid:a.signatureOid,type:"certificate"});var u=re.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=fn.md.sha1.create(),p=re.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return PT(a.issuer,g)},a.issuer.addField=function(g){hm([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var h=fn.md.sha1.create(),m=re.toDer(r.certSubject);return h.update(m.getBytes()),a.subject.getField=function(g){return PT(a.subject,g)},a.subject.addField=function(g){hm([g]),a.subject.attributes.push(g)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=h.digest().toHex(),r.certExtensions?a.extensions=Jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Jt.certificateExtensionFromAsn1(n.value[i]));return e};Jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=re.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===re.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in wo){if(e.name=wo[e.id],e.name==="keyUsage"){var r=re.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=re.fromDer(e.value);r.value.length>0&&r.value[0].type===re.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===re.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=re.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=re.fromDer(e.value),a=0;a<r.value.length;++a){var c=re.derToOid(r.value[a].value);c in wo?e[wo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=re.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=re.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=fn.util.bytesToIP(l.value);break;case 8:f.oid=re.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=re.fromDer(e.value);e.subjectKeyIdentifier=fn.util.bytesToHex(r.value)}}return e};Jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!re.validate(t,xir,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=re.derToOid(r.publicKeyOid);if(o!==Jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=fn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=nee(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=fn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=nee(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=iee({signatureOid:a.signatureOid,type:"certification request"});var c=re.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=fn.md.sha1.create();return a.subject.getField=function(u){return PT(a.subject,u)},a.subject.addField=function(u){hm([u]),a.subject.attributes.push(u)},a.subject.attributes=Jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=Jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return PT(a,u)},a.addAttribute=function(u){hm([u]),a.attributes.push(u)},a.attributes=Jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return PT(t.subject,e)},t.subject.addField=function(e){hm([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return PT(t,e)},t.addAttribute=function(e){hm([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){hm(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){hm(e),t.attributes=e},t.sign=function(e,r){t.md=r||fn.md.sha1.create();var n=wo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Jt.getCertificationRequestInfo(t);var o=re.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=iee({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t),i=re.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Ant({certificate:t,md:r,signature:t.signature})),e},t};function bB(t){for(var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=re.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===re.Type.UTF8&&(a=fn.util.encodeUtf8(a))),n=re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(r.type).getBytes()),re.create(re.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(bB,"_dnToAsn1");function hm(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Jt.oids?e.name=Jt.oids[e.type]:e.shortName&&e.shortName in Xa&&(e.name=Jt.oids[Xa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Jt.oids)e.type=Jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Xa&&(e.shortName=Xa[e.name]),e.type===wo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=re.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Jt.certificateExtensionToAsn1(ynt(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(hm,"_fillMissingFields");function ynt(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Jt.oids&&(t.name=Jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Jt.oids)t.id=Jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in wo?c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(wo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=fn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));t.value.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=re.create(re.Class.UNIVERSAL,re.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var h=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!1,h))}if(t.authorityCertIssuer){var m=[re.create(re.Class.CONTEXT_SPECIFIC,4,!0,[bB(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var g=fn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);for(var c=t.value.value,A=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),y=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=fn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=re.oidToDer(re.oidToDer(u.oid)):a=re.oidToDer(a));y.value.push(re.create(re.Class.CONTEXT_SPECIFIC,u.type,!1,a))}A.value.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[y])),c.push(A)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(ynt,"_fillMissingExtensionFields");function NEe(t,e){switch(t){case wo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(e.mgf.hash.algorithmOid).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(e.saltLength).getBytes())])),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,r);default:return re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")}}s(NEe,"_signatureParametersToAsn1");function bir(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=re.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===re.Type.UTF8&&(o=fn.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(i.type).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SET,!0,[re.create(re.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(bir,"_CRIAttributesToAsn1");var Iir=new Date("1950-01-01T00:00:00Z"),Tir=new Date("2050-01-01T00:00:00Z");function mnt(t){return t>=Iir&&t<Tir?re.create(re.Class.UNIVERSAL,re.Type.UTCTIME,!1,re.dateToUtcTime(t)):re.create(re.Class.UNIVERSAL,re.Type.GENERALIZEDTIME,!1,re.dateToGeneralizedTime(t))}s(mnt,"_dateToAsn1");Jt.getTBSCertificate=function(t){var e=mnt(t.validity.notBefore),r=mnt(t.validity.notAfter),n=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.CONTEXT_SPECIFIC,0,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes())]),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,fn.util.hexToBytes(t.serialNumber)),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.siginfo.algorithmOid).getBytes()),NEe(t.siginfo.algorithmOid,t.siginfo.parameters)]),bB(t.issuer),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,r]),bB(t.subject),Jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,1,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(re.create(re.Class.CONTEXT_SPECIFIC,2,!0,[re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Jt.certificateExtensionsToAsn1(t.extensions)),n};Jt.getCertificationRequestInfo=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(t.version).getBytes()),bB(t.subject),Jt.publicKeyToAsn1(t.publicKey),bir(t)]);return e};Jt.distinguishedNameToAsn1=function(t){return bB(t)};Jt.certificateToAsn1=function(t){var e=t.tbsCertificate||Jt.getTBSCertificate(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),NEe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.certificateExtensionsToAsn1=function(t){var e=re.create(re.Class.CONTEXT_SPECIFIC,3,!0,[]),r=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Jt.certificateExtensionToAsn1(t[n]));return e};Jt.certificateExtensionToAsn1=function(t){var e=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.id).getBytes())),t.critical&&e.value.push(re.create(re.Class.UNIVERSAL,re.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=re.toDer(r).getBytes()),e.value.push(re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r)),e};Jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Jt.getCertificationRequestInfo(t);return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[e,re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(t.signatureOid).getBytes()),NEe(t.signatureOid,t.signatureParameters)]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,"\0"+t.signature)])};Jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=fn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];fn.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=fn.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;fn.util.isArray(c)||(c=[c]);for(var l=re.toDer(Jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=re.toDer(Jt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!fn.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=fn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!fn.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=re.toDer(Jt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=re.toDer(Jt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=fn.md.sha1.create();a.attributes=Jt.RDNAttributesAsArray(bB(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;fn.util.isArray(p)||(p=[p]);for(var h=!1;!h&&p.length>0;){u=p.shift();try{h=u.verify(l)}catch{}}h||(a={message:"Certificate signature is invalid.",error:Jt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:Jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Jt.certificateError.bad_certificate}),a===null)for(var m={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var A=l.extensions[g];A.critical&&!(A.name in m)&&(a={message:"Certificate has an unsupported critical extension.",error:Jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var y=l.getExtension("basicConstraints"),E=l.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||y===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Jt.certificateError.bad_certificate}),a===null&&y!==null&&!y.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Jt.certificateError.bad_certificate}),a===null&&E!==null&&"pathLenConstraint"in y){var b=c-1;b>y.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Jt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,S=r.verify?r.verify(_,c,n):_;if(S===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Jt.certificateError.bad_certificate}),(S||S===0)&&(typeof S=="object"&&!fn.util.isArray(S)?(S.message&&(a.message=S.message),S.error&&(a.error=S.error)):typeof S=="string"&&(a.error=S)),a;o=!1,++c}while(e.length>0);return!0}});var MEe=q((dai,Ent)=>{d();var Ls=Ii();lA();gB();ST();DEe();PEe();dm();n7();vB();No();oee();var _e=Ls.asn1,Hi=Ls.pki,o7=Ent.exports=Ls.pkcs12=Ls.pkcs12||{},vnt={name:"ContentInfo",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:_e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},wir={name:"PFX",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,capture:"version"},vnt,{name:"PFX.macData",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:_e.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:_e.Class.UNIVERSAL,type:_e.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},_ir={name:"SafeBag",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:_e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Sir={name:"Attribute",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SET,constructed:!0,capture:"values"}]},Rir={name:"CertBag",tagClass:_e.Class.UNIVERSAL,type:_e.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:_e.Class.UNIVERSAL,type:_e.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:_e.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:_e.Class.UNIVERSAL,type:_e.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function i7(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(i7,"_getBagsByAttribute");o7.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!_e.validate(t,wir,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(y){var E={},b;return"localKeyId"in y?b=y.localKeyId:"localKeyIdHex"in y&&(b=Ls.util.hexToBytes(y.localKeyIdHex)),b===void 0&&!("friendlyName"in y)&&"bagType"in y&&(E[y.bagType]=i7(a.safeContents,null,null,y.bagType)),b!==void 0&&(E.localKeyId=i7(a.safeContents,"localKeyId",b,y.bagType)),"friendlyName"in y&&(E.friendlyName=i7(a.safeContents,"friendlyName",y.friendlyName,y.bagType)),E},"getBags"),getBagsByFriendlyName:s(function(y,E){return i7(a.safeContents,"friendlyName",y,E)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(y,E){return i7(a.safeContents,"localKeyId",y,E)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(_e.derToOid(n.contentType)!==Hi.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=_e.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==_e.Class.UNIVERSAL||c.type!==_e.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=LEe(c),n.mac){var l=null,u=0,f=_e.derToOid(n.macAlgorithm);switch(f){case Hi.oids.sha1:l=Ls.md.sha1.create(),u=20;break;case Hi.oids.sha256:l=Ls.md.sha256.create(),u=32;break;case Hi.oids.sha384:l=Ls.md.sha384.create(),u=48;break;case Hi.oids.sha512:l=Ls.md.sha512.create(),u=64;break;case Hi.oids.md5:l=Ls.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new Ls.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(Ls.util.bytesToHex(n.macIterations),16):1,m=o7.generateKey(r,p,3,h,u,l),g=Ls.hmac.create();g.start(l,m),g.update(c.value);var A=g.getMac();if(A.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return kir(a,c.value,e,r),a};function LEe(t){if(t.composed||t.constructed){for(var e=Ls.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(LEe,"_decodePkcs7Data");function kir(t,e,r,n){if(e=_e.fromDer(e,r),e.tagClass!==_e.Class.UNIVERSAL||e.type!==_e.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!_e.validate(o,vnt,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(_e.derToOid(a.contentType)){case Hi.oids.data:if(p.tagClass!==_e.Class.UNIVERSAL||p.type!==_e.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=LEe(p).value;break;case Hi.oids.encryptedData:f=Pir(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=_e.derToOid(a.contentType),l}u.safeBags=Dir(f,r,n),t.safeContents.push(u)}}s(kir,"_decodeAuthenticatedSafe");function Pir(t,e){var r={},n=[];if(!_e.validate(t,Ls.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=_e.derToOid(r.contentType);if(o!==Hi.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=_e.derToOid(r.encAlgorithm);var a=Hi.pbe.getCipher(o,r.encParameter,e),c=LEe(r.encryptedContentAsn1),l=Ls.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(Pir,"_decryptSafeContents");function Dir(t,e,r){if(!e&&t.length===0)return[];if(t=_e.fromDer(t,e),t.tagClass!==_e.Class.UNIVERSAL||t.type!==_e.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!_e.validate(o,_ir,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:_e.derToOid(a.bagId),attributes:Bir(a.bagAttributes)};n.push(u);var f,p,h=a.bagValue.value[0];switch(u.type){case Hi.oids.pkcs8ShroudedKeyBag:if(h=Hi.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Hi.oids.keyBag:try{u.key=Hi.privateKeyFromAsn1(h)}catch{u.key=null,u.asn1=h}continue;case Hi.oids.certBag:f=Rir,p=s(function(){if(_e.derToOid(a.certId)!==Hi.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=_e.derToOid(a.certId),g}var A=_e.fromDer(a.cert,e);try{u.cert=Hi.certificateFromAsn1(A,!0)}catch{u.cert=null,u.asn1=A}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!_e.validate(h,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(Dir,"_decodeSafeContents");function Bir(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!_e.validate(t[r],Sir,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=_e.derToOid(n.oid);if(Hi.oids[a]!==void 0){e[Hi.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Hi.oids[a]].push(n.values[c].value)}}return e}s(Bir,"_decodeBagAttributes");o7.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=Ls.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=Ls.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Hi.certificateFromPem(a));var c=Ls.md.sha1.create();c.update(_e.toDer(Hi.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=Ls.random.getBytes(20);var l=[];i!==null&&l.push(_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.localKeyId).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.SET,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.friendlyName).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.SET,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=_e.create(_e.Class.UNIVERSAL,_e.Type.SET,!0,l));var u=[],f=[];e!==null&&(Ls.util.isArray(e)?f=e:f=[e]);for(var p=[],h=0;h<f.length;++h){e=f[h],typeof e=="string"&&(e=Hi.certificateFromPem(e));var m=h===0?o:void 0,g=Hi.certificateToAsn1(e),A=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.certBag).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.x509Certificate).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,_e.toDer(g).getBytes())])])]),m]);p.push(A)}if(p.length>0){var y=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,p),E=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.data).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,_e.toDer(y).getBytes())])]);u.push(E)}var b=null;if(t!==null){var _=Hi.wrapRsaPrivateKey(Hi.privateKeyToAsn1(t));r===null?b=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.keyBag).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):b=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.pkcs8ShroudedKeyBag).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[Hi.encryptPrivateKeyInfo(_,r,n)]),o]);var S=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[b]),P=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.data).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,_e.toDer(S).getBytes())])]);u.push(P)}var B=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,u),F;if(n.useMac){var c=Ls.md.sha1.create(),Y=new Ls.util.ByteBuffer(Ls.random.getBytes(n.saltSize)),ee=n.count,t=o7.generateKey(r,Y,3,ee,20),V=Ls.hmac.create();V.start(c,t),V.update(_e.toDer(B).getBytes());var H=V.getMac();F=_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.sha1).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.NULL,!1,"")]),_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,H.getBytes())]),_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,Y.getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.INTEGER,!1,_e.integerToDer(ee).getBytes())])}return _e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.INTEGER,!1,_e.integerToDer(3).getBytes()),_e.create(_e.Class.UNIVERSAL,_e.Type.SEQUENCE,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OID,!1,_e.oidToDer(Hi.oids.data).getBytes()),_e.create(_e.Class.CONTEXT_SPECIFIC,0,!0,[_e.create(_e.Class.UNIVERSAL,_e.Type.OCTETSTRING,!1,_e.toDer(B).getBytes())])]),F])};o7.generateKey=Ls.pbe.generatePkcs12Key});var OEe=q((hai,xnt)=>{d();var DT=Ii();lA();ST();PEe();bR();YZ();MEe();ree();n7();No();oee();var FEe=DT.asn1,IB=xnt.exports=DT.pki=DT.pki||{};IB.pemToDer=function(t){var e=DT.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return DT.util.createBuffer(e.body)};IB.privateKeyFromPem=function(t){var e=DT.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=FEe.fromDer(e.body);return IB.privateKeyFromAsn1(n)};IB.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:FEe.toDer(IB.privateKeyToAsn1(t)).getBytes()};return DT.pem.encode(r,{maxline:e})};IB.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:FEe.toDer(t).getBytes()};return DT.pem.encode(r,{maxline:e})}});var $Ee=q((gai,knt)=>{d();var kt=Ii();lA();gB();jZ();bR();OEe();dm();vB();No();var lee=s(function(t,e,r,n){var i=kt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=kt.util.createBuffer(),f=kt.hmac.create();r=e+r;var p=Math.ceil(n/16),h=Math.ceil(n/20);f.start("MD5",c);var m=kt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),m.putBuffer(f.digest());f.start("SHA1",l);var A=kt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<h;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),A.putBuffer(f.digest());return i.putBytes(kt.util.xorBytes(m.getBytes(),A.getBytes(),n)),i},"prf_TLS1"),Nir=s(function(t,e,r){var n=kt.hmac.create();n.start("SHA1",t);var i=kt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Lir=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Mir=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=kt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),wp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return kt.util.createBuffer(t.getBytes(r))},"readVector"),mm=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),oe={};oe.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};oe.SupportedVersions=[oe.Versions.TLS_1_1,oe.Versions.TLS_1_0];oe.Version=oe.SupportedVersions[0];oe.MaxFragment=15360;oe.ConnectionEnd={server:0,client:1};oe.PRFAlgorithm={tls_prf_sha256:0};oe.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};oe.CipherType={stream:0,block:1,aead:2};oe.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};oe.CompressionMethod={none:0,deflate:1};oe.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};oe.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};oe.Alert={};oe.Alert.Level={warning:1,fatal:2};oe.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};oe.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};oe.CipherSuites={};oe.getCipherSuite=function(t){var e=null;for(var r in oe.CipherSuites){var n=oe.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};oe.handleUnexpected=function(t,e){var r=!t.open&&t.entity===oe.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})};oe.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(oe.queue(t,oe.createAlert(t,{level:oe.Alert.Level.warning,description:oe.Alert.Description.no_renegotiation})),oe.flush(t)),t.process()};oe.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===oe.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:kt.util.createBuffer(o.getBytes(32)),session_id:wp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=wp(o,2),n.compression_methods=wp(o,1)),a=r-(a-o.length()),a>0){for(var c=wp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:wp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=wp(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(wp(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=oe.getCipherSuite(n.cipher_suite);else for(var h=kt.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(t.session.cipherSuite=oe.getCipherSuite(h.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure},cipherSuite:kt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=oe.CompressionMethod.none}return n};oe.createSecurityParameters=function(t,e){var r=t.entity===oe.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:oe.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:oe.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};oe.handleServerHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=Tnt,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Oir,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.session.id=i,t.process()}};oe.handleClientHello=function(t,e,r){var n=oe.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=kt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<oe.SupportedVersions.length&&(a=oe.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=HEe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?jir:qEe,t.session.resuming=!1,oe.createSecurityParameters(t,n)),t.open=!0,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHello(t)})),t.session.resuming?(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.pending=oe.createConnectionState(t),t.state.current.write=t.state.pending.write,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))):(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)})),t.fail||(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerKeyExchange(t)})),t.verifyClient!==!1&&oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificateRequest(t)})),oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createServerHelloDone(t)})))),oe.flush(t),t.process()}};oe.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:wp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=wp(i.certificate_list,3),a=kt.asn1.fromDer(o),o=kt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var l=t.entity===oe.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?bnt:qEe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],oe.verifyCertificateChain(t,c)&&(t.expect=l?bnt:qEe)),t.process()};oe.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});t.expect=Qir,t.process()};oe.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:wp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=kt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=kt.random.getBytes(48)}t.expect=HEe,t.session.clientCertificate!==null&&(t.expect=Gir),t.process()};oe.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:wp(n,1),certificate_authorities:wp(n,2)};t.session.certificateRequest=i,t.expect=Uir,t.process()};oe.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:wp(n,2).getBytes()},a=kt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.handshake_failure}})}t.expect=HEe,t.process()};oe.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!kt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createCertificate(t)}),oe.queue(t,e)),e=oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createClientKeyExchange(t)}),oe.queue(t,e),t.expect=Wir;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createCertificateVerify(c,l)})),oe.queue(c,oe.createRecord(c,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),c.state.pending=oe.createConnectionState(c),c.state.current.write=c.state.pending.write,oe.queue(c,oe.createRecord(c,{type:oe.ContentType.handshake,data:oe.createFinished(c)})),c.expect=Tnt,oe.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);oe.getClientSignature(t,a)};oe.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.illegal_parameter}});var r=t.entity===oe.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=oe.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?qir:Vir,t.process()};oe.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=kt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===oe.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=lee;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(oe.queue(t,oe.createRecord(t,{type:oe.ContentType.change_cipher_spec,data:oe.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,oe.queue(t,oe.createRecord(t,{type:oe.ContentType.handshake,data:oe.createFinished(t)}))),t.expect=a?Hir:zir,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,oe.flush(t),t.isConnected=!0,t.connected(t),t.process()};oe.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case oe.Alert.Description.close_notify:i="Connection closed.";break;case oe.Alert.Description.unexpected_message:i="Unexpected message.";break;case oe.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case oe.Alert.Description.decryption_failed:i="Decryption failed.";break;case oe.Alert.Description.record_overflow:i="Record overflow.";break;case oe.Alert.Description.decompression_failure:i="Decompression failed.";break;case oe.Alert.Description.handshake_failure:i="Handshake failure.";break;case oe.Alert.Description.bad_certificate:i="Bad certificate.";break;case oe.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case oe.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case oe.Alert.Description.certificate_expired:i="Certificate expired.";break;case oe.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case oe.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case oe.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case oe.Alert.Description.access_denied:i="Access denied.";break;case oe.Alert.Description.decode_error:i="Decode error.";break;case oe.Alert.Description.decrypt_error:i="Decrypt error.";break;case oe.Alert.Description.export_restriction:i="Export restriction.";break;case oe.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case oe.Alert.Description.insufficient_security:i="Insufficient security.";break;case oe.Alert.Description.internal_error:i="Internal error.";break;case oe.Alert.Description.user_canceled:i="User canceled.";break;case oe.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===oe.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===oe.ConnectionEnd.client?"server":"client",alert:n}),t.process()};oe.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=kt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in cee[t.entity][t.expect]?(t.entity===oe.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:kt.md.md5.create(),sha1:kt.md.sha1.create()}),n!==oe.HandshakeType.hello_request&&n!==oe.HandshakeType.certificate_verify&&n!==oe.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),cee[t.entity][t.expect][n](t,e,i)):oe.handleUnexpected(t,e)};oe.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};oe.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===oe.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();oe.queue(t,oe.createRecord(t,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_response,o)})),oe.flush(t)}else if(n===oe.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,kt.util.createBuffer(o))}t.process()};var Fir=0,Oir=1,bnt=2,Qir=3,Uir=4,Tnt=5,qir=6,Hir=7,Wir=8,$ir=0,jir=1,qEe=2,Gir=3,HEe=4,Vir=5,zir=6,ne=oe.handleUnexpected,wnt=oe.handleChangeCipherSpec,Mu=oe.handleAlert,df=oe.handleHandshake,_nt=oe.handleApplicationData,Fu=oe.handleHeartbeat,WEe=[];WEe[oe.ConnectionEnd.client]=[[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[wnt,Mu,ne,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,_nt,Fu],[ne,Mu,df,ne,Fu]];WEe[oe.ConnectionEnd.server]=[[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,ne,Fu],[wnt,Mu,ne,ne,Fu],[ne,Mu,df,ne,Fu],[ne,Mu,df,_nt,Fu],[ne,Mu,df,ne,Fu]];var BT=oe.handleHelloRequest,Yir=oe.handleServerHello,Snt=oe.handleCertificate,Int=oe.handleServerKeyExchange,QEe=oe.handleCertificateRequest,see=oe.handleServerHelloDone,Rnt=oe.handleFinished,cee=[];cee[oe.ConnectionEnd.client]=[[ne,ne,Yir,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Snt,Int,QEe,see,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Int,QEe,see,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,QEe,see,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,see,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Rnt],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[BT,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];var Kir=oe.handleClientHello,Jir=oe.handleClientKeyExchange,Xir=oe.handleCertificateVerify;cee[oe.ConnectionEnd.server]=[[ne,Kir,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Snt,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Jir,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Xir,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,Rnt],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];oe.generateKeys=function(t,e){var r=lee,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===oe.Versions.TLS_1_0.major&&t.version.minor===oe.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};oe.createConnectionState=function(t){var e=t.entity===oe.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=oe.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case oe.CompressionMethod.none:break;case oe.CompressionMethod.deflate:n.read.compressFunction=Mir,n.write.compressFunction=Lir;break;default:throw new Error("Unsupported compression algorithm.")}}return n};oe.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=kt.util.createBuffer();return r.putInt32(e),r.putBytes(kt.random.getBytes(28)),r};oe.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};oe.createAlert=function(t,e){var r=kt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),oe.createRecord(t,{type:oe.ContentType.alert,data:r})};oe.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=kt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=kt.util.createBuffer();o.putByte(oe.CompressionMethod.none);var a=o.length(),c=kt.util.createBuffer();if(t.virtualHost){var l=kt.util.createBuffer();l.putByte(0),l.putByte(0);var u=kt.util.createBuffer();u.putByte(0),mm(u,2,kt.util.createBuffer(t.virtualHost));var f=kt.util.createBuffer();mm(f,2,u),mm(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var h=t.session.id,m=h.length+1+2+4+28+2+i+1+a+p,g=kt.util.createBuffer();return g.putByte(oe.HandshakeType.client_hello),g.putInt24(m),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),mm(g,1,kt.util.createBuffer(h)),mm(g,2,e),mm(g,1,o),p>0&&mm(g,2,c),g};oe.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),mm(n,1,kt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};oe.createCertificate=function(t){var e=t.entity===oe.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=kt.util.createBuffer();if(r!==null)try{kt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=kt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=kt.util.createBuffer(c.body);o===null&&(o=kt.asn1.fromDer(u.bytes(),!1));var f=kt.util.createBuffer();mm(f,3,u),i.putBuffer(f)}r=kt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(m){return t.error(t,{message:"Could not send certificate list.",cause:m,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate}})}var p=3+i.length(),h=kt.util.createBuffer();return h.putByte(oe.HandshakeType.certificate),h.putInt24(p),mm(h,3,i),h};oe.createClientKeyExchange=function(t){var e=kt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(kt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=kt.util.createBuffer();return o.putByte(oe.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};oe.createServerKeyExchange=function(t){var e=0,r=kt.util.createBuffer();return e>0&&(r.putByte(oe.HandshakeType.server_key_exchange),r.putInt24(e)),r};oe.getClientSignature=function(t,e){var r=kt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=kt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};oe.createCertificateVerify=function(t,e){var r=e.length+2,n=kt.util.createBuffer();return n.putByte(oe.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};oe.createCertificateRequest=function(t){var e=kt.util.createBuffer();e.putByte(1);var r=kt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=kt.pki.distinguishedNameToAsn1(i.subject),a=kt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=kt.util.createBuffer();return l.putByte(oe.HandshakeType.certificate_request),l.putInt24(c),mm(l,1,e),mm(l,2,r),l};oe.createServerHelloDone=function(t){var e=kt.util.createBuffer();return e.putByte(oe.HandshakeType.server_hello_done),e.putInt24(0),e};oe.createChangeCipherSpec=function(){var t=kt.util.createBuffer();return t.putByte(1),t};oe.createFinished=function(t){var e=kt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===oe.ConnectionEnd.client,n=t.session.sp,i=12,o=lee,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=kt.util.createBuffer();return c.putByte(oe.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};oe.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=kt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(kt.random.getBytes(o)),n};oe.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===oe.ContentType.handshake||e.type===oe.ContentType.alert||e.type===oe.ContentType.change_cipher_spec))){if(e.type===oe.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=oe.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>oe.MaxFragment;)n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i.slice(0,oe.MaxFragment))})),i=i.slice(oe.MaxFragment);i.length>0&&n.push(oe.createRecord(t,{type:e.type,data:kt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};oe.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var UEe=s(function(t){switch(t){case!0:return!0;case kt.pki.certificateError.bad_certificate:return oe.Alert.Description.bad_certificate;case kt.pki.certificateError.unsupported_certificate:return oe.Alert.Description.unsupported_certificate;case kt.pki.certificateError.certificate_revoked:return oe.Alert.Description.certificate_revoked;case kt.pki.certificateError.certificate_expired:return oe.Alert.Description.certificate_expired;case kt.pki.certificateError.certificate_unknown:return oe.Alert.Description.certificate_unknown;case kt.pki.certificateError.unknown_ca:return oe.Alert.Description.unknown_ca;default:return oe.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Zir=s(function(t){switch(t){case!0:return!0;case oe.Alert.Description.bad_certificate:return kt.pki.certificateError.bad_certificate;case oe.Alert.Description.unsupported_certificate:return kt.pki.certificateError.unsupported_certificate;case oe.Alert.Description.certificate_revoked:return kt.pki.certificateError.certificate_revoked;case oe.Alert.Description.certificate_expired:return kt.pki.certificateError.certificate_expired;case oe.Alert.Description.certificate_unknown:return kt.pki.certificateError.certificate_unknown;case oe.Alert.Description.unknown_ca:return kt.pki.certificateError.unknown_ca;default:return kt.pki.certificateError.bad_certificate}},"_alertDescToCertError");oe.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=UEe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!kt.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:oe.Alert.Level.fatal,description:oe.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=Zir(u))}return u},kt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||kt.util.isArray(i))&&(i={send:!0,alert:{level:oe.Alert.Level.fatal,description:UEe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:oe.Alert.Level.fatal,description:UEe(i.error)}),t.error(t,i)}return!t.fail};oe.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=kt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=kt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};oe.createConnection=function(t){var e=null;t.caStore?kt.util.isArray(t.caStore)?e=kt.pki.createCaStore(t.caStore):e=t.caStore:e=kt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in oe.CipherSuites)r.push(oe.CipherSuites[n])}var i=t.server?oe.ConnectionEnd.server:oe.ConnectionEnd.client,o=t.sessionCache?oe.createSessionCache(t.sessionCache):null,a={version:{major:oe.Version.major,minor:oe.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,h,m){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:kt.util.createBuffer(),tlsData:kt.util.createBuffer(),data:kt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===oe.ConnectionEnd.client?"client":"server"),p.send&&(oe.queue(f,oe.createAlert(f,p.alert)),oe.flush(f));var h=p.fatal!==!1;h&&(f.fail=!0),t.error(f,p),h&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:oe.Version.major,minor:oe.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===oe.ConnectionEnd.client?Fir:$ir,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=oe.createConnectionState(a)},a.reset();var c=s(function(f,p){var h=p.type-oe.ContentType.change_cipher_spec,m=WEe[f.entity][f.expect];h in m?m[h](f,p):oe.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,h=f.input,m=h.length();if(m<5)p=5-m;else{f.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:kt.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,h=f.input,m=h.length();if(m<f.record.length)p=f.record.length-m;else{f.record.fragment.putBytes(h.getBytes(f.record.length)),h.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:oe.Alert.Level.fatal,description:oe.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==oe.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:kt.md.md5.create(),sha1:kt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=oe.createRandom().getBytes(),a.open=!0,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.handshake,data:oe.createClientHello(a)})),oe.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return oe.queue(a,oe.createRecord(a,{type:oe.ContentType.application_data,data:kt.util.createBuffer(f)})),oe.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof kt.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,oe.queue(a,oe.createRecord(a,{type:oe.ContentType.heartbeat,data:oe.createHeartbeat(oe.HeartbeatMessageType.heartbeat_request,f,p)})),oe.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,oe.queue(a,oe.createAlert(a,{level:oe.Alert.Level.warning,description:oe.Alert.Description.close_notify})),oe.flush(a)),a.closed(a)),a.reset(f)},a};knt.exports=kt.tls=kt.tls||{};for(aee in oe)typeof oe[aee]!="function"&&(kt.tls[aee]=oe[aee]);var aee;kt.tls.prf_tls1=lee;kt.tls.hmac_sha1=Nir;kt.tls.createSessionCache=oe.createSessionCache;kt.tls.createConnection=oe.createConnection});var Bnt=q((Cai,Dnt)=>{d();var NT=Ii();_T();$Ee();var gm=Dnt.exports=NT.tls;gm.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=gm.BulkCipherAlgorithm.aes,t.cipher_type=gm.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=gm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Pnt};gm.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=gm.BulkCipherAlgorithm.aes,t.cipher_type=gm.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=gm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Pnt};function Pnt(t,e,r){var n=e.entity===NT.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:NT.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:NT.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=nor,t.write.cipherFunction=eor,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=gm.hmac_sha1}s(Pnt,"initConnectionState");function eor(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===gm.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=NT.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=gm.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(tor)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(eor,"encrypt_aes_cbc_sha1");function tor(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(tor,"encrypt_aes_cbc_sha1_padding");function ror(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(ror,"decrypt_aes_cbc_sha1_padding");function nor(t,e){var r=!1,n;t.version.minor===gm.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(ror);var o=e.macLength,a=NT.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=NT.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=ior(e.macKey,a,l)&&r,r}s(nor,"decrypt_aes_cbc_sha1");function ior(t,e,r){var n=NT.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(ior,"compareMacs")});var VEe=q((xai,Fnt)=>{d();var na=Ii();bC();No();var s7=Fnt.exports=na.sha512=na.sha512||{};na.md.sha512=na.md.algorithms.sha512=s7;var Lnt=na.sha384=na.sha512.sha384=na.sha512.sha384||{};Lnt.create=function(){return s7.create("SHA-384")};na.md.sha384=na.md.algorithms.sha384=Lnt;na.sha512.sha256=na.sha512.sha256||{create:s(function(){return s7.create("SHA-512/256")},"create")};na.md["sha512/256"]=na.md.algorithms["sha512/256"]=na.sha512.sha256;na.sha512.sha224=na.sha512.sha224||{create:s(function(){return s7.create("SHA-512/224")},"create")};na.md["sha512/224"]=na.md.algorithms["sha512/224"]=na.sha512.sha224;s7.create=function(t){if(Mnt||oor(),typeof t>"u"&&(t="SHA-512"),!(t in RR))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=RR[t],r=null,n=na.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=na.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=na.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),Nnt(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=na.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes(jEe.substr(0,c.blockLength-f));for(var p,h,m=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,h=p/4294967296>>>0,m+=h,l.putInt32(m>>>0),m=p>>>0;l.putInt32(m);for(var A=new Array(r.length),g=0;g<r.length;++g)A[g]=r[g].slice(0);Nnt(A,i,l);var y=na.util.createBuffer(),E;t==="SHA-512"?E=A.length:t==="SHA-384"?E=A.length-2:E=A.length-4;for(var g=0;g<E;++g)y.putInt32(A[g][0]),(g!==E-1||t!=="SHA-512/224")&&y.putInt32(A[g][1]);return y},c};var jEe=null,Mnt=!1,GEe=null,RR=null;function oor(){jEe="\x80",jEe+=na.util.fillString("\0",128),GEe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],RR={},RR["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],RR["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],RR["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],RR["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Mnt=!0}s(oor,"_init");function Nnt(t,e,r){for(var n,i,o,a,c,l,u,f,p,h,m,g,A,y,E,b,_,S,P,B,F,Y,ee,V,H,U,X,K,j,W,J,ie,ae,te,pe,Ae=r.length();Ae>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ie=e[j-2],W=ie[0],J=ie[1],n=((W>>>19|J<<13)^(J>>>29|W<<3)^W>>>6)>>>0,i=((W<<13|J>>>19)^(J<<3|W>>>29)^(W<<26|J>>>6))>>>0,te=e[j-15],W=te[0],J=te[1],o=((W>>>1|J<<31)^(W>>>8|J<<24)^W>>>7)>>>0,a=((W<<31|J>>>1)^(W<<24|J>>>8)^(W<<25|J>>>7))>>>0,ae=e[j-7],pe=e[j-16],J=i+ae[1]+a+pe[1],e[j][0]=n+ae[0]+o+pe[0]+(J/4294967296>>>0)>>>0,e[j][1]=J>>>0;for(A=t[0][0],y=t[0][1],E=t[1][0],b=t[1][1],_=t[2][0],S=t[2][1],P=t[3][0],B=t[3][1],F=t[4][0],Y=t[4][1],ee=t[5][0],V=t[5][1],H=t[6][0],U=t[6][1],X=t[7][0],K=t[7][1],j=0;j<80;++j)u=((F>>>14|Y<<18)^(F>>>18|Y<<14)^(Y>>>9|F<<23))>>>0,f=((F<<18|Y>>>14)^(F<<14|Y>>>18)^(Y<<23|F>>>9))>>>0,p=(H^F&(ee^H))>>>0,h=(U^Y&(V^U))>>>0,c=((A>>>28|y<<4)^(y>>>2|A<<30)^(y>>>7|A<<25))>>>0,l=((A<<4|y>>>28)^(y<<30|A>>>2)^(y<<25|A>>>7))>>>0,m=(A&E|_&(A^E))>>>0,g=(y&b|S&(y^b))>>>0,J=K+f+h+GEe[j][1]+e[j][1],n=X+u+p+GEe[j][0]+e[j][0]+(J/4294967296>>>0)>>>0,i=J>>>0,J=l+g,o=c+m+(J/4294967296>>>0)>>>0,a=J>>>0,X=H,K=U,H=ee,U=V,ee=F,V=Y,J=B+i,F=P+n+(J/4294967296>>>0)>>>0,Y=J>>>0,P=_,B=S,_=E,S=b,E=A,b=y,J=i+a,A=n+o+(J/4294967296>>>0)>>>0,y=J>>>0;J=t[0][1]+y,t[0][0]=t[0][0]+A+(J/4294967296>>>0)>>>0,t[0][1]=J>>>0,J=t[1][1]+b,t[1][0]=t[1][0]+E+(J/4294967296>>>0)>>>0,t[1][1]=J>>>0,J=t[2][1]+S,t[2][0]=t[2][0]+_+(J/4294967296>>>0)>>>0,t[2][1]=J>>>0,J=t[3][1]+B,t[3][0]=t[3][0]+P+(J/4294967296>>>0)>>>0,t[3][1]=J>>>0,J=t[4][1]+Y,t[4][0]=t[4][0]+F+(J/4294967296>>>0)>>>0,t[4][1]=J>>>0,J=t[5][1]+V,t[5][0]=t[5][0]+ee+(J/4294967296>>>0)>>>0,t[5][1]=J>>>0,J=t[6][1]+U,t[6][0]=t[6][0]+H+(J/4294967296>>>0)>>>0,t[6][1]=J>>>0,J=t[7][1]+K,t[7][0]=t[7][0]+X+(J/4294967296>>>0)>>>0,t[7][1]=J>>>0,Ae-=128}}s(Nnt,"_update")});var Ont=q(zEe=>{d();var sor=Ii();lA();var eu=sor.asn1;zEe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:eu.Class.UNIVERSAL,type:eu.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:eu.Class.UNIVERSAL,type:eu.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:eu.Class.UNIVERSAL,type:eu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:eu.Class.UNIVERSAL,type:eu.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:eu.Class.UNIVERSAL,type:eu.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};zEe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:eu.Class.UNIVERSAL,type:eu.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:eu.Class.UNIVERSAL,type:eu.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:eu.Class.UNIVERSAL,type:eu.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:eu.Class.UNIVERSAL,type:eu.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Jnt=q((_ai,Knt)=>{d();var Ou=Ii();r7();dm();VEe();No();var $nt=Ont(),aor=$nt.publicKeyValidator,cor=$nt.privateKeyValidator;typeof Qnt>"u"&&(Qnt=Ou.jsbn.BigInteger);var Qnt,JEe=Ou.util.ByteBuffer,f0=typeof Buffer>"u"?Uint8Array:Buffer;Ou.pki=Ou.pki||{};Knt.exports=Ou.pki.ed25519=Ou.ed25519=Ou.ed25519||{};var Wi=Ou.ed25519;Wi.constants={};Wi.constants.PUBLIC_KEY_BYTE_LENGTH=32;Wi.constants.PRIVATE_KEY_BYTE_LENGTH=64;Wi.constants.SEED_BYTE_LENGTH=32;Wi.constants.SIGN_BYTE_LENGTH=64;Wi.constants.HASH_BYTE_LENGTH=64;Wi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Ou.random.getBytesSync(Wi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Wi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Wi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=fE({message:e,encoding:"binary"});for(var r=new f0(Wi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new f0(Wi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return por(r,n),{publicKey:r,privateKey:n}};Wi.privateKeyFromAsn1=function(t){var e={},r=[],n=Ou.asn1.validate(t,cor,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Ou.asn1.derToOid(e.privateKeyOid),a=Ou.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=fE({message:Ou.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};Wi.publicKeyFromAsn1=function(t){var e={},r=[],n=Ou.asn1.validate(t,aor,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Ou.asn1.derToOid(e.publicKeyOid),a=Ou.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==Wi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return fE({message:c,encoding:"binary"})};Wi.publicKeyFromPrivateKey=function(t){t=t||{};var e=fE({message:t.privateKey,encoding:"binary"});if(e.length!==Wi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Wi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new f0(Wi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Wi.sign=function(t){t=t||{};var e=fE(t),r=fE({message:t.privateKey,encoding:"binary"});if(r.length===Wi.constants.SEED_BYTE_LENGTH){var n=Wi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Wi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Wi.constants.SEED_BYTE_LENGTH+" or "+Wi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new f0(Wi.constants.SIGN_BYTE_LENGTH+e.length);hor(i,e,e.length,r);for(var o=new f0(Wi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Wi.verify=function(t){t=t||{};var e=fE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=fE({message:t.signature,encoding:"binary"});if(r.length!==Wi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Wi.constants.SIGN_BYTE_LENGTH);var n=fE({message:t.publicKey,encoding:"binary"});if(n.length!==Wi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Wi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new f0(Wi.constants.SIGN_BYTE_LENGTH+e.length),o=new f0(Wi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Wi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Wi.constants.SIGN_BYTE_LENGTH]=e[a];return mor(o,i,i.length,n)>=0};function fE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof f0)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new JEe(e,r)}else if(!(e instanceof JEe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new f0(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(fE,"messageToNativeBuffer");var XEe=Pn(),uee=Pn([1]),lor=Pn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),uor=Pn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Unt=Pn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),qnt=Pn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),YEe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),dor=Pn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function a7(t,e){var r=Ou.md.sha512.create(),n=new JEe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new f0(Wi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(a7,"sha512");function por(t,e){var r=[Pn(),Pn(),Pn(),Pn()],n,i=a7(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,rxe(r,i),txe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(por,"crypto_sign_keypair");function hor(t,e,r,n){var i,o,a=new Float64Array(64),c=[Pn(),Pn(),Pn(),Pn()],l=a7(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=a7(t.subarray(32),r+32);for(ZEe(f),rxe(c,f),txe(t,c),i=32;i<64;++i)t[i]=n[i];var p=a7(t,r+64);for(ZEe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return jnt(t.subarray(32),a),u}s(hor,"crypto_sign");function mor(t,e,r,n){var i,o,a=new f0(32),c=[Pn(),Pn(),Pn(),Pn()],l=[Pn(),Pn(),Pn(),Pn()];if(o=-1,r<64||gor(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=a7(t,r);if(ZEe(u),znt(c,l,u),rxe(l,e.subarray(32)),exe(c,l),txe(a,c),r-=64,Gnt(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(mor,"crypto_sign_open");function jnt(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*YEe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*YEe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*YEe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(jnt,"modL");function ZEe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;jnt(t,e)}s(ZEe,"reduce");function exe(t,e){var r=Pn(),n=Pn(),i=Pn(),o=Pn(),a=Pn(),c=Pn(),l=Pn(),u=Pn(),f=Pn();wB(r,t[1],t[0]),wB(f,e[1],e[0]),xs(r,r,f),TB(n,t[0],t[1]),TB(f,e[0],e[1]),xs(n,n,f),xs(i,t[3],e[3]),xs(i,i,uor),xs(o,t[2],e[2]),TB(o,o,o),wB(a,n,r),wB(c,o,i),TB(l,o,i),TB(u,n,r),xs(t[0],a,c),xs(t[1],u,l),xs(t[2],l,c),xs(t[3],a,u)}s(exe,"add");function Hnt(t,e,r){for(var n=0;n<4;++n)Ynt(t[n],e[n],r)}s(Hnt,"cswap");function txe(t,e){var r=Pn(),n=Pn(),i=Pn();vor(i,e[2]),xs(r,e[0],i),xs(n,e[1],i),dee(t,n),t[31]^=Vnt(r)<<7}s(txe,"pack");function dee(t,e){var r,n,i,o=Pn(),a=Pn();for(r=0;r<16;++r)a[r]=e[r];for(KEe(a),KEe(a),KEe(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Ynt(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(dee,"pack25519");function gor(t,e){var r=Pn(),n=Pn(),i=Pn(),o=Pn(),a=Pn(),c=Pn(),l=Pn();return LT(t[2],uee),Aor(t[1],e),kR(i,t[1]),xs(o,i,lor),wB(i,i,t[2]),TB(o,t[2],o),kR(a,o),kR(c,a),xs(l,c,a),xs(r,l,i),xs(r,r,o),yor(r,r),xs(r,r,i),xs(r,r,o),xs(r,r,o),xs(t[0],r,o),kR(n,t[0]),xs(n,n,o),Wnt(n,i)&&xs(t[0],t[0],dor),kR(n,t[0]),xs(n,n,o),Wnt(n,i)?-1:(Vnt(t[0])===e[31]>>7&&wB(t[0],XEe,t[0]),xs(t[3],t[0],t[1]),0)}s(gor,"unpackneg");function Aor(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(Aor,"unpack25519");function yor(t,e){var r=Pn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)kR(r,r),n!==1&&xs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(yor,"pow2523");function Wnt(t,e){var r=new f0(32),n=new f0(32);return dee(r,t),dee(n,e),Gnt(r,0,n,0)}s(Wnt,"neq25519");function Gnt(t,e,r,n){return Cor(t,e,r,n,32)}s(Gnt,"crypto_verify_32");function Cor(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(Cor,"vn");function Vnt(t){var e=new f0(32);return dee(e,t),e[0]&1}s(Vnt,"par25519");function znt(t,e,r){var n,i;for(LT(t[0],XEe),LT(t[1],uee),LT(t[2],uee),LT(t[3],XEe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Hnt(t,e,n),exe(e,t),exe(t,t),Hnt(t,e,n)}s(znt,"scalarmult");function rxe(t,e){var r=[Pn(),Pn(),Pn(),Pn()];LT(r[0],Unt),LT(r[1],qnt),LT(r[2],uee),xs(r[3],Unt,qnt),znt(t,r,e)}s(rxe,"scalarbase");function LT(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(LT,"set25519");function vor(t,e){var r=Pn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)kR(r,r),n!==2&&n!==4&&xs(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(vor,"inv25519");function KEe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(KEe,"car25519");function Ynt(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Ynt,"sel25519");function Pn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Pn,"gf");function TB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(TB,"A");function wB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(wB,"Z");function kR(t,e){xs(t,e,e)}s(kR,"S");function xs(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,h=0,m=0,g=0,A=0,y=0,E=0,b=0,_=0,S=0,P=0,B=0,F=0,Y=0,ee=0,V=0,H=0,U=0,X=0,K=0,j=0,W=0,J=0,ie=0,ae=0,te=r[0],pe=r[1],Ae=r[2],Oe=r[3],Te=r[4],Je=r[5],Fe=r[6],ct=r[7],St=r[8],vt=r[9],mt=r[10],ue=r[11],Ue=r[12],ye=r[13],We=r[14],se=r[15];n=e[0],o+=n*te,a+=n*pe,c+=n*Ae,l+=n*Oe,u+=n*Te,f+=n*Je,p+=n*Fe,h+=n*ct,m+=n*St,g+=n*vt,A+=n*mt,y+=n*ue,E+=n*Ue,b+=n*ye,_+=n*We,S+=n*se,n=e[1],a+=n*te,c+=n*pe,l+=n*Ae,u+=n*Oe,f+=n*Te,p+=n*Je,h+=n*Fe,m+=n*ct,g+=n*St,A+=n*vt,y+=n*mt,E+=n*ue,b+=n*Ue,_+=n*ye,S+=n*We,P+=n*se,n=e[2],c+=n*te,l+=n*pe,u+=n*Ae,f+=n*Oe,p+=n*Te,h+=n*Je,m+=n*Fe,g+=n*ct,A+=n*St,y+=n*vt,E+=n*mt,b+=n*ue,_+=n*Ue,S+=n*ye,P+=n*We,B+=n*se,n=e[3],l+=n*te,u+=n*pe,f+=n*Ae,p+=n*Oe,h+=n*Te,m+=n*Je,g+=n*Fe,A+=n*ct,y+=n*St,E+=n*vt,b+=n*mt,_+=n*ue,S+=n*Ue,P+=n*ye,B+=n*We,F+=n*se,n=e[4],u+=n*te,f+=n*pe,p+=n*Ae,h+=n*Oe,m+=n*Te,g+=n*Je,A+=n*Fe,y+=n*ct,E+=n*St,b+=n*vt,_+=n*mt,S+=n*ue,P+=n*Ue,B+=n*ye,F+=n*We,Y+=n*se,n=e[5],f+=n*te,p+=n*pe,h+=n*Ae,m+=n*Oe,g+=n*Te,A+=n*Je,y+=n*Fe,E+=n*ct,b+=n*St,_+=n*vt,S+=n*mt,P+=n*ue,B+=n*Ue,F+=n*ye,Y+=n*We,ee+=n*se,n=e[6],p+=n*te,h+=n*pe,m+=n*Ae,g+=n*Oe,A+=n*Te,y+=n*Je,E+=n*Fe,b+=n*ct,_+=n*St,S+=n*vt,P+=n*mt,B+=n*ue,F+=n*Ue,Y+=n*ye,ee+=n*We,V+=n*se,n=e[7],h+=n*te,m+=n*pe,g+=n*Ae,A+=n*Oe,y+=n*Te,E+=n*Je,b+=n*Fe,_+=n*ct,S+=n*St,P+=n*vt,B+=n*mt,F+=n*ue,Y+=n*Ue,ee+=n*ye,V+=n*We,H+=n*se,n=e[8],m+=n*te,g+=n*pe,A+=n*Ae,y+=n*Oe,E+=n*Te,b+=n*Je,_+=n*Fe,S+=n*ct,P+=n*St,B+=n*vt,F+=n*mt,Y+=n*ue,ee+=n*Ue,V+=n*ye,H+=n*We,U+=n*se,n=e[9],g+=n*te,A+=n*pe,y+=n*Ae,E+=n*Oe,b+=n*Te,_+=n*Je,S+=n*Fe,P+=n*ct,B+=n*St,F+=n*vt,Y+=n*mt,ee+=n*ue,V+=n*Ue,H+=n*ye,U+=n*We,X+=n*se,n=e[10],A+=n*te,y+=n*pe,E+=n*Ae,b+=n*Oe,_+=n*Te,S+=n*Je,P+=n*Fe,B+=n*ct,F+=n*St,Y+=n*vt,ee+=n*mt,V+=n*ue,H+=n*Ue,U+=n*ye,X+=n*We,K+=n*se,n=e[11],y+=n*te,E+=n*pe,b+=n*Ae,_+=n*Oe,S+=n*Te,P+=n*Je,B+=n*Fe,F+=n*ct,Y+=n*St,ee+=n*vt,V+=n*mt,H+=n*ue,U+=n*Ue,X+=n*ye,K+=n*We,j+=n*se,n=e[12],E+=n*te,b+=n*pe,_+=n*Ae,S+=n*Oe,P+=n*Te,B+=n*Je,F+=n*Fe,Y+=n*ct,ee+=n*St,V+=n*vt,H+=n*mt,U+=n*ue,X+=n*Ue,K+=n*ye,j+=n*We,W+=n*se,n=e[13],b+=n*te,_+=n*pe,S+=n*Ae,P+=n*Oe,B+=n*Te,F+=n*Je,Y+=n*Fe,ee+=n*ct,V+=n*St,H+=n*vt,U+=n*mt,X+=n*ue,K+=n*Ue,j+=n*ye,W+=n*We,J+=n*se,n=e[14],_+=n*te,S+=n*pe,P+=n*Ae,B+=n*Oe,F+=n*Te,Y+=n*Je,ee+=n*Fe,V+=n*ct,H+=n*St,U+=n*vt,X+=n*mt,K+=n*ue,j+=n*Ue,W+=n*ye,J+=n*We,ie+=n*se,n=e[15],S+=n*te,P+=n*pe,B+=n*Ae,F+=n*Oe,Y+=n*Te,ee+=n*Je,V+=n*Fe,H+=n*ct,U+=n*St,X+=n*vt,K+=n*mt,j+=n*ue,W+=n*Ue,J+=n*ye,ie+=n*We,ae+=n*se,o+=38*P,a+=38*B,c+=38*F,l+=38*Y,u+=38*ee,f+=38*V,p+=38*H,h+=38*U,m+=38*X,g+=38*K,A+=38*j,y+=38*W,E+=38*J,b+=38*ie,_+=38*ae,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=h,t[8]=m,t[9]=g,t[10]=A,t[11]=y,t[12]=E,t[13]=b,t[14]=_,t[15]=S}s(xs,"M")});var tit=q((kai,eit)=>{d();var _p=Ii();No();dm();r7();eit.exports=_p.kem=_p.kem||{};var Xnt=_p.jsbn.BigInteger;_p.kem.rsa={};_p.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||_p.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new Xnt(_p.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(Xnt.ONE)<=0);c=_p.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=_p.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};_p.kem.kdf1=function(t,e){Znt(this,t,0,e||t.digestLength)};_p.kem.kdf2=function(t,e){Znt(this,t,1,e||t.digestLength)};function Znt(t,e,r,n){t.generate=function(i,o){for(var a=new _p.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new _p.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(Znt,"_createKDF")});var oit=q((Bai,iit)=>{d();var io=Ii();No();iit.exports=io.log=io.log||{};io.log.levels=["none","error","warning","info","debug","verbose","max"];var fee={},oxe=[],l7=null;io.log.LEVEL_LOCKED=2;io.log.NO_LEVEL_CHECK=4;io.log.INTERPOLATE=8;for(PC=0;PC<io.log.levels.length;++PC)nxe=io.log.levels[PC],fee[nxe]={index:PC,name:nxe.toUpperCase()};var nxe,PC;io.log.logMessage=function(t){for(var e=fee[t.level].index,r=0;r<oxe.length;++r){var n=oxe[r];if(n.flags&io.log.NO_LEVEL_CHECK)n.f(t);else{var i=fee[n.level].index;e<=i&&n.f(n,t)}}};io.log.prepareStandard=function(t){"standard"in t||(t.standard=fee[t.level].name+" ["+t.category+"] "+t.message)};io.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=io.util.format.apply(this,e)}};io.log.prepareStandardFull=function(t){"standardFull"in t||(io.log.prepareStandard(t),t.standardFull=t.standard)};for(ixe=["error","warning","info","debug","verbose"],PC=0;PC<ixe.length;++PC)(function(e){io.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};io.log.logMessage(o)}})(ixe[PC]);var ixe,PC;io.log.makeLogger=function(t){var e={flags:0,f:t};return io.log.setLevel(e,"none"),e};io.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&io.log.LEVEL_LOCKED))for(var n=0;n<io.log.levels.length;++n){var i=io.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};io.log.lock=function(t,e){typeof e>"u"||e?t.flags|=io.log.LEVEL_LOCKED:t.flags&=~io.log.LEVEL_LOCKED};io.log.addLogger=function(t){oxe.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(rit={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u7=s(function(t,e){io.log.prepareStandard(e);var r=rit[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),_B=io.log.makeLogger(u7)):(u7=s(function(e,r){io.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),_B=io.log.makeLogger(u7)),io.log.setLevel(_B,"debug"),io.log.addLogger(_B),l7=_B):console={log:s(function(){},"log")};var _B,rit,u7;l7!==null&&typeof window<"u"&&window.location&&(c7=new URL(window.location.href).searchParams,c7.has("console.level")&&io.log.setLevel(l7,c7.get("console.level").slice(-1)[0]),c7.has("console.lock")&&(nit=c7.get("console.lock").slice(-1)[0],nit=="true"&&io.log.lock(l7)));var c7,nit;io.log.consoleLogger=l7});var ait=q((Mai,sit)=>{d();sit.exports=bC();jZ();vB();yEe();VEe()});var uit=q((Oai,lit)=>{d();var or=Ii();_T();lA();e7();ST();bR();DEe();dm();No();oee();var De=or.asn1,ff=lit.exports=or.pkcs7=or.pkcs7||{};ff.messageFromPem=function(t){var e=or.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=De.fromDer(e.body);return ff.messageFromAsn1(n)};ff.messageToPem=function(t,e){var r={type:"PKCS7",body:De.toDer(t.toAsn1()).getBytes()};return or.pem.encode(r,{maxline:e})};ff.messageFromAsn1=function(t){var e={},r=[];if(!De.validate(t,ff.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=De.derToOid(e.contentType),o;switch(i){case or.pki.oids.envelopedData:o=ff.createEnvelopedData();break;case or.pki.oids.encryptedData:o=ff.createEncryptedData();break;case or.pki.oids.signedData:o=ff.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};ff.createSignedData=function(){var t=null;return t={type:or.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(axe(t,n,ff.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(or.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(or.pki.certificateToAsn1(t.certificates[i]));var o=[],a=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(De.create(De.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(De.create(De.Class.UNIVERSAL,De.Type.SET,!0,t.signerInfos)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=or.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=or.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||or.pki.oids.sha1;switch(l){case or.pki.oids.sha1:case or.pki.oids.sha256:case or.pki.oids.sha384:case or.pki.oids.sha512:case or.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,h=0;h<u.length;++h){var m=u[h];if(!f&&m.type===or.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&m.type===or.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:or.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(or.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof or.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=or.util.encodeUtf8(t.content)),n.detached?t.detachedContent=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=or.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=or.md[or.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=or.md[or.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(a).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=De.derToOid(t.contentInfo.value[0].value),a=De.toDer(i);a.getByte(),De.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==or.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[]),h=0;h<f.authenticatedAttributes.length;++h){var m=f.authenticatedAttributes[h];m.type===or.pki.oids.messageDigest?m.value=n[f.digestAlgorithm].digest():m.type===or.pki.oids.signingTime&&(m.value||(m.value=l)),p.value.push(sxe(m)),f.authenticatedAttributesAsn1.value.push(sxe(m))}a=De.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=wor(t.signers)}s(r,"addSignerInfos")};ff.createEncryptedData=function(){var t=null;return t={type:or.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:or.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){axe(t,e,ff.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),cit(t)},"decrypt")},t};ff.createEnvelopedData=function(){var t=null;return t={type:or.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:or.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=axe(t,e,ff.asn1.envelopedDataValidator);t.recipients=bor(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,Ior(t.recipients)),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,_or(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case or.pki.oids.rsaEncryption:case or.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=or.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}cit(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:or.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case or.pki.oids["aes128-CBC"]:n=16,i=16,o=or.aes.createEncryptionCipher;break;case or.pki.oids["aes192-CBC"]:n=24,i=16,o=or.aes.createEncryptionCipher;break;case or.pki.oids["aes256-CBC"]:n=32,i=16,o=or.aes.createEncryptionCipher;break;case or.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=or.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=or.util.createBuffer(or.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=or.util.createBuffer(or.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case or.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Eor(t){var e={},r=[];if(!De.validate(t,ff.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:or.pki.RDNAttributesAsArray(e.issuer),serialNumber:or.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:De.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Eor,"_recipientFromAsn1");function xor(t){return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[or.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,or.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.encryptedContent.algorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")]),De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(xor,"_recipientToAsn1");function bor(t){for(var e=[],r=0;r<t.length;++r)e.push(Eor(t[r]));return e}s(bor,"_recipientsFromAsn1");function Ior(t){for(var e=[],r=0;r<t.length;++r)e.push(xor(t[r]));return e}s(Ior,"_recipientsToAsn1");function Tor(t){var e=De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,De.integerToDer(t.version).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[or.pki.distinguishedNameToAsn1({attributes:t.issuer}),De.create(De.Class.UNIVERSAL,De.Type.INTEGER,!1,or.util.hexToBytes(t.serialNumber))]),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.digestAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.signatureAlgorithm).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.NULL,!1,"")])),e.value.push(De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=De.create(De.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(sxe(i))}e.value.push(r)}return e}s(Tor,"_signerToAsn1");function wor(t){for(var e=[],r=0;r<t.length;++r)e.push(Tor(t[r]));return e}s(wor,"_signersToAsn1");function sxe(t){var e;if(t.type===or.pki.oids.contentType)e=De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.value).getBytes());else if(t.type===or.pki.oids.messageDigest)e=De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===or.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=De.utcTimeToDate(i):i=De.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=De.create(De.Class.UNIVERSAL,De.Type.UTCTIME,!1,De.dateToUtcTime(i)):e=De.create(De.Class.UNIVERSAL,De.Type.GENERALIZEDTIME,!1,De.dateToGeneralizedTime(i))}return De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.type).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SET,!0,[e])])}s(sxe,"_attributeToAsn1");function _or(t){return[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(or.pki.oids.data).getBytes()),De.create(De.Class.UNIVERSAL,De.Type.SEQUENCE,!0,[De.create(De.Class.UNIVERSAL,De.Type.OID,!1,De.oidToDer(t.algorithm).getBytes()),t.parameter?De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),De.create(De.Class.CONTEXT_SPECIFIC,0,!0,[De.create(De.Class.UNIVERSAL,De.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(_or,"_encryptedContentToAsn1");function axe(t,e,r){var n={},i=[];if(!De.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=De.derToOid(n.contentType);if(a!==or.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(or.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:De.derToOid(n.encAlgorithm),parameter:or.util.createBuffer(n.encParameter.value),content:or.util.createBuffer(c)}}if(n.content){var c="";if(or.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==De.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=or.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(axe,"_fromAsn1");function cit(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case or.pki.oids["aes128-CBC"]:case or.pki.oids["aes192-CBC"]:case or.pki.oids["aes256-CBC"]:e=or.aes.createDecryptionCipher(t.encryptedContent.key);break;case or.pki.oids.desCBC:case or.pki.oids["des-EDE3-CBC"]:e=or.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(cit,"_decryptContent")});var fit=q((qai,dit)=>{d();var Xc=Ii();_T();gB();jZ();vB();No();var hee=dit.exports=Xc.ssh=Xc.ssh||{};hee.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=Xc.util.createBuffer();SB(a,n),DC(a,t.e),DC(a,t.n);var c=Xc.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=Xc.util.createBuffer();DC(u,t.d),DC(u,t.p),DC(u,t.q),DC(u,t.qInv);var f;if(!e)f=Xc.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var h=pee(u.bytes());h.truncate(h.length()-p+u.length()),u.putBuffer(h);var m=Xc.util.createBuffer();m.putBuffer(pee("\0\0\0\0",e)),m.putBuffer(pee("\0\0\0",e));var g=Xc.aes.createEncryptionCipher(m.truncate(8),"CBC");g.start(Xc.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var A=g.output;A.truncate(16),f=Xc.util.encode64(A.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var y=pee("putty-private-key-file-mac-key",e),E=Xc.util.createBuffer();SB(E,n),SB(E,i),SB(E,r),E.putInt32(a.length()),E.putBuffer(a),E.putInt32(u.length()),E.putBuffer(u);var b=Xc.hmac.create();return b.start("sha1",y),b.update(E.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};hee.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Xc.util.createBuffer();return SB(n,r),DC(n,t.e),DC(n,t.n),r+" "+Xc.util.encode64(n.bytes())+" "+e};hee.privateKeyToOpenSSH=function(t,e){return e?Xc.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Xc.pki.privateKeyToPem(t)};hee.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Xc.md.md5.create(),n="ssh-rsa",i=Xc.util.createBuffer();SB(i,n),DC(i,t.e),DC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function DC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Xc.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(DC,"_addBigIntegerToBuffer");function SB(t,e){t.putInt32(e.length),t.putString(e)}s(SB,"_addStringToBuffer");function pee(){for(var t=Xc.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(pee,"_sha1")});var hit=q(($ai,pit)=>{d();pit.exports=Ii();_T();Bnt();lA();OZ();e7();Jnt();gB();tit();oit();ait();BEe();YZ();bR();_Ee();MEe();uit();OEe();REe();CEe();ree();dm();xEe();fit();$Ee();No()});var Ait=q(PR=>{"use strict";d();Object.defineProperty(PR,"__esModule",{value:!0});PR.convert=PR.Format=void 0;var d7=hit(),MT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(MT=PR.Format||(PR.Format={}));function mit(t){var e=d7.pki.pemToDer(t),r=d7.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(mit,"myASN");function Sor(t){var e=mit(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(Sor,"txtFormat");function git(t,e){switch(e){case MT.der:return d7.pki.pemToDer(t);case MT.pem:return t;case MT.txt:return Sor(t);case MT.asn1:return mit(t);case MT.fingerprint:var r=d7.md.sha1.create(),n=git(t,MT.der);return r.update(n.getBytes()),r.digest().toHex();case MT.x509:return d7.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(git,"convert");PR.convert=git});var bit=q(p0=>{"use strict";d();var FT=p0&&p0.__assign||function(){return FT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},FT.apply(this,arguments)},mee=p0&&p0.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(p0,"__esModule",{value:!0});p0.convert=p0.Format=p0.addToGlobalAgent=p0.get=void 0;var cxe=require("https"),Ror=require("tls"),yit=require("child_process"),Cit=Xtt(),pE=Ait();Object.defineProperty(p0,"Format",{enumerable:!0,get:s(function(){return pE.Format},"get")});Object.defineProperty(p0,"convert",{enumerable:!0,get:s(function(){return pE.convert},"get")});var vit=process.platform==="darwin",Eit=cxe.globalAgent,Aee={keychain:"all",unique:!0,excludeBundled:!0,format:pE.Format.pem};function xit(t){if(t===void 0&&(t=Aee),!vit)return[];t=FT(FT({},Aee),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,yit.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=mee(mee([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,yit.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=mee(mee([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,pE.convert)(u,pE.Format.fingerprint)}),l=t.excludeBundled?Ror.rootCertificates.map(function(u){return(0,pE.convert)(u,pE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,pE.convert)(u,t.format)})}s(xit,"get");p0.get=xit;var gee=Eit.options.ca,kor=s(function(t){if(t===void 0&&(t=Aee),!!vit){var e;Array.isArray(gee)?e=Array.from(gee):e=typeof gee<"u"?[gee]:[],xit(FT(FT(FT({},Aee),t),{format:pE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),Eit.options.ca=e,cxe.Agent=function(r){return function(n){var i=typeof n<"u"?FT({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(cxe.Agent),(0,Cit.setGlobalDispatcher)(new Cit.Agent({connect:{ca:e}}))}},"addToGlobalAgent");p0.addToGlobalAgent=kor});var Iit=q((Xai,lxe)=>{d();function Por(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(Por,"all");process.platform!=="win32"?lxe.exports.all=()=>[]:lxe.exports.all=Por});var Dit=q((oci,Pit)=>{"use strict";d();function kit(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(kit,"validateParameter");function Bor(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(Bor,"hasOwnProperty");function Nor(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];Bor(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),kit(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(Nor,"defineOperation");Pit.exports={defineOperation:Nor,validateParameter:kit}});var yxe=q((cci,Lit)=>{"use strict";d();var PB=Pme()("kerberos"),kB=PB.KerberosClient,Bit=PB.KerberosServer,OT=Dit().defineOperation,Lor=1,Mor=2,For=4,Oor=8,Qor=16,Uor=32,qor=64,Hor=128,Wor=256,Nit=0,$or=9,jor=6;kB.prototype.step=OT(kB.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);kB.prototype.wrap=OT(kB.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);kB.prototype.unwrap=OT(kB.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Bit.prototype.step=OT(Bit.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var Gor=OT(PB.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),Vor=OT(PB.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),zor=OT(PB.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:Nit}},{name:"callback",type:"function",required:!1}]),Yor=OT(PB.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Lit.exports={initializeClient:zor,initializeServer:Yor,principalDetails:Vor,checkPassword:Gor,GSS_C_DELEG_FLAG:Lor,GSS_C_MUTUAL_FLAG:Mor,GSS_C_REPLAY_FLAG:For,GSS_C_SEQUENCE_FLAG:Oor,GSS_C_CONF_FLAG:Qor,GSS_C_INTEG_FLAG:Uor,GSS_C_ANON_FLAG:qor,GSS_C_PROT_READY_FLAG:Hor,GSS_C_TRANS_FLAG:Wor,GSS_C_NO_OID:Nit,GSS_MECH_OID_KRB5:$or,GSS_MECH_OID_SPNEGO:jor}});var Mit=q((uci,Kor)=>{Kor.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Oit=q((dci,Fit)=>{"use strict";d();var Jor=require("dns"),Xor=yxe(),Cxe=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=Zor(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();Jor.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Xor.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function Zor(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=esr(t),r(null,i)})}}s(Zor,"firstTransition");function esr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=tsr(t),r(null,i||"")})}}s(esr,"secondTransition");function tsr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=rsr(t),r(null,a)})})}}s(tsr,"thirdTransition");function rsr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(rsr,"fourthTransition");Fit.exports={MongoAuthProcess:Cxe}});var Uit=q((hci,f7)=>{"use strict";d();var Qit=yxe();f7.exports=Qit;f7.exports.Kerberos=Qit;f7.exports.version=Mit().version;f7.exports.processes={MongoAuthProcess:Oit().MongoAuthProcess}});var Sot=q(Vxe=>{"use strict";d();Object.defineProperty(Vxe,"__esModule",{value:!0});Vxe.assertNever=uar;function uar(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(uar,"assertNever")});var S7=q(bE=>{"use strict";d();Object.defineProperty(bE,"__esModule",{value:!0});bE.ChatCompletionContentPartOpaque=bE.ChatCompletionContentPartKind=bE.ChatRole=void 0;var dar=Sot(),nte;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(nte||(bE.ChatRole=nte={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,dar.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(nte||(bE.ChatRole=nte={}));var Rot;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Rot||(bE.ChatCompletionContentPartKind=Rot={}));var kot;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(kot||(bE.ChatCompletionContentPartOpaque=kot={}))});var zxe=q(jC=>{"use strict";d();Object.defineProperty(jC,"__esModule",{value:!0});jC.BaseTokensPerName=jC.BaseTokensPerMessage=jC.BaseTokensPerCompletion=jC.ChatRole=void 0;var Pot;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Pot||(jC.ChatRole=Pot={}));jC.BaseTokensPerCompletion=3;jC.BaseTokensPerMessage=3;jC.BaseTokensPerName=1});var Bot=q(ote=>{"use strict";d();Object.defineProperty(ote,"__esModule",{value:!0});ote.toOpenAiChatMessage=Dot;ote.toOpenAIChatMessages=har;var IE=S7(),ite=zxe(),far=VT();function Yxe(t){return t.filter(e=>e.type===IE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Yxe,"onlyStringContent");function par(t){let e=t.map(r=>{if(r.type===IE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===IE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===IE.ChatCompletionContentPartKind.Opaque&&IE.ChatCompletionContentPartOpaque.usableIn(r,far.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(par,"stringAndImageContent");function Dot(t){switch(t.role){case IE.ChatRole.System:return{role:ite.ChatRole.System,content:Yxe(t.content),name:t.name};case IE.ChatRole.User:return{role:ite.ChatRole.User,content:par(t.content),name:t.name};case IE.ChatRole.Assistant:return{role:ite.ChatRole.Assistant,content:Yxe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case IE.ChatRole.Tool:return{role:ite.ChatRole.Tool,content:Yxe(t.content),tool_call_id:t.toolCallId};default:return}}s(Dot,"toOpenAiChatMessage");function har(t){return t.map(Dot).filter(e=>!!e)}s(har,"toOpenAIChatMessages")});var Lot=q(cte=>{"use strict";d();Object.defineProperty(cte,"__esModule",{value:!0});cte.toVsCodeChatMessage=Not;cte.toVsCodeChatMessages=mar;var ate=S7();function ste(t){return t.filter(e=>e.type===ate.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(ste,"onlyStringContent");var zT;function Not(t){switch(zT??=require("vscode"),t.role){case ate.ChatRole.Assistant:let e=zT.LanguageModelChatMessage.Assistant(ste(t.content),t.name);return t.toolCalls&&(e.content=[new zT.LanguageModelTextPart(ste(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new zT.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case ate.ChatRole.User:return zT.LanguageModelChatMessage.User(ste(t.content),t.name);case ate.ChatRole.Tool:{let r=zT.LanguageModelChatMessage.User("");return r.content=[new zT.LanguageModelToolResultPart(t.toolCallId,[new zT.LanguageModelTextPart(ste(t.content))])],r}default:return}}s(Not,"toVsCodeChatMessage");function mar(t){return t.map(Not).filter(e=>!!e)}s(mar,"toVsCodeChatMessages")});var VT=q(pA=>{"use strict";d();Object.defineProperty(pA,"__esModule",{value:!0});pA.OutputMode=pA.Raw=pA.OpenAI=void 0;pA.toMode=Kxe;pA.toVSCode=gar;pA.toOpenAI=Aar;var Mot=Bot(),Fot=Lot();pA.OpenAI=zxe();pA.Raw=S7();var MR;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(MR||(pA.OutputMode=MR={}));function Kxe(t,e){switch(t){case MR.Raw:return e;case MR.VSCode:return e instanceof Array?(0,Fot.toVsCodeChatMessages)(e):(0,Fot.toVsCodeChatMessage)(e);case MR.OpenAI:return e instanceof Array?(0,Mot.toOpenAIChatMessages)(e):(0,Mot.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Kxe,"toMode");function gar(t){return Kxe(MR.VSCode,t)}s(gar,"toVSCode");function Aar(t){return Kxe(MR.OpenAI,t)}s(Aar,"toOpenAI")});var Jxe=q(R7=>{"use strict";d();Object.defineProperty(R7,"__esModule",{value:!0});R7.jsonRetainedProps=void 0;R7.forEachNode=Oot;R7.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Oot(t,e){if(e(t),t.type===1)for(let r of t.children)Oot(r,e)}s(Oot,"forEachNode")});var Qot=q(Xxe=>{"use strict";d();Object.defineProperty(Xxe,"__esModule",{value:!0});Xxe.once=yar;function yar(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(yar,"once")});var rbe=q(Id=>{"use strict";d();Object.defineProperty(Id,"__esModule",{value:!0});Id.BudgetExceededError=Id.MaterializedChatMessageImage=Id.MaterializedChatMessageBreakpoint=Id.MaterializedChatMessageOpaque=Id.MaterializedChatMessage=Id.MaterializedChatMessageTextChunk=Id.GenericMaterializedContainer=void 0;var WB=Qot(),Dp=VT(),TE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=KT(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return zot(e,this.children,r)}allMetadata(){return Vot(this)}findById(e){return tbe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)Car(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof mA&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof mA||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return ebe(this,e),e}};Id.GenericMaterializedContainer=TE;var k7=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,WB.once)(async e=>await e.tokenLength({type:Dp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Id.MaterializedChatMessageTextChunk=k7;var mA=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=zot(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return ebe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return tbe(e,this)}_tokenCount=(0,WB.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,Dp.toMode)(e.mode,r))});_upperBound=(0,WB.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,WB.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===Dp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===Dp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,Dp.toMode)(e.mode,r))});_text=(0,WB.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of jot(this)){if(r instanceof FR||r instanceof YT){e.push(r);continue}if(r instanceof hA){e.at(-1)instanceof hA?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:Dp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof FR)return{type:Dp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Yot(r.src),detail:r.detail}};if(r instanceof YT)return r.value;if(r instanceof hA)return r.part;throw new Error("Unexpected element type")});if(this.role===Dp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===Dp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===Dp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===Dp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Id.MaterializedChatMessage=mA;var YT=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&Dp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Id.MaterializedChatMessageOpaque=YT;var hA=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Id.MaterializedChatMessageBreakpoint=hA;var FR=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,WB.once)(async e=>e.tokenLength({type:Dp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Yot(this.src),detail:this.detail}}));isEmpty=!1};Id.MaterializedChatMessageImage=FR;function KT(t){return t instanceof TE||t instanceof mA}s(KT,"isContainerType");function $ot(t){return t instanceof k7||t instanceof FR||t instanceof YT||t instanceof hA}s($ot,"isContentType");function Car(t){if(!KT(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(Car,"assertContainerOrChatMessage");function*jot(t,e=!1){for(let r of t.children)r instanceof k7?(yield{content:r,isTextSibling:e},e=!0):r instanceof FR||r instanceof YT||r instanceof hA?yield{content:r,isTextSibling:!1}:r instanceof YT?yield{content:r,isTextSibling:!0}:(r&&(yield*jot(r,e)),e=!1)}s(jot,"contentChunks");function Ear(t,e){let r;function n(i,o){if($ot(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");P7(r.node,e)}s(Ear,"removeLowestPriorityLegacy");var Uot=new WeakMap;function Got(t){let e=Uot.get(t);if(e!==void 0)return e;let r=!1;return t instanceof hA?r=!0:t instanceof mA?r=t.children.some(n=>n instanceof hA):t instanceof TE&&(r=t.children.some(Got)),Uot.set(t,r),r}s(Got,"hasCachePoint");function xar(t){if(t instanceof mA)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof mA)return!1;return!0}s(xar,"shouldLookForCachePointInNode");function ebe(t,e){let r;if(t instanceof TE&&t.has(1)){Ear(t,e);return}let n=xar(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&Got(l)&&(r=void 0,l instanceof hA))){if(l instanceof TE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=qot(r.value);let u=qot(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new lte(t);$ot(r.value)||r.value instanceof TE&&r.value.has(2)||KT(r.value)&&!r.value.children.length?P7(r.value,e):ebe(r.value,e)}s(ebe,"removeLowestPriorityChild");var lte=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof mA?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Id.BudgetExceededError=lte;function qot(t){if(!KT(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(qot,"getLowestPriorityAmongChildren");function*Vot(t){yield*t.metadata;for(let e of t.children)KT(e)?yield*Vot(e):yield*e.metadata}s(Vot,"allMetadata");function zot(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(KT(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(zot,"replaceNode");function*Hot(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,KT(r)&&e.push(...r.children)}}s(Hot,"forEachNode");function bar(t){let e=t;for(;e.parent;)e=e.parent;return e}s(bar,"getRoot");function Wot(t){return t instanceof TE&&t.keepWithId!==void 0}s(Wot,"isKeepWith");var Zxe=new Set;function Iar(t,e){let r=new Set;for(let n of Hot(t))Wot(n)&&!Zxe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Zxe.add(n);try{let n=bar(t);for(let i of Hot(n))Wot(i)&&r.has(i.keepWithId)?P7(i,e):i instanceof mA&&i.toolCalls&&(i.toolCalls=Tar(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&P7(i,e))}finally{for(let n of r)Zxe.delete(n)}}s(Iar,"removeOtherKeepWiths");function tbe(t,e){if(e.id===t)return e;for(let r of e.children)if(KT(r)){let n=tbe(t,r);if(n)return n}}s(tbe,"findNodeById");function P7(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),Iar(t,e),r.isEmpty?P7(r,e):r.onChunksChange())}s(P7,"removeNode");function Yot(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(Yot,"getEncodedBase64");function Tar(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(Tar,"filterIfDifferent")});var Jot=q(()=>{"use strict";d();function war(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(war,"_vscpp");function Kot(){throw new Error("This should not be invoked!")}s(Kot,"_vscppf");Kot.isFragment=!0;globalThis.vscpp=war;globalThis.vscppf=Kot});var ibe=q(ute=>{"use strict";d();Object.defineProperty(ute,"__esModule",{value:!0});ute.PromptElement=void 0;Jot();var nbe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};ute.PromptElement=nbe});var hbe=q(oo=>{"use strict";d();Object.defineProperty(oo,"__esModule",{value:!0});oo.LogicalWrapper=oo.IfEmpty=oo.AbstractKeepWith=oo.TokenLimit=oo.Expandable=oo.Chunk=oo.LegacyPrioritization=oo.ToolResult=oo.PrioritizedList=oo.Image=oo.TextChunk=oo.ToolMessage=oo.AssistantMessage=oo.UserMessage=oo.SystemMessage=oo.BaseChatMessage=void 0;oo.isChatMessagePromptElement=_ar;oo.useKeepWith=Par;var B7=gA(),xm=ibe();function _ar(t){return t instanceof dte||t instanceof fte||t instanceof pte}s(_ar,"isChatMessagePromptElement");var OR=class extends xm.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};oo.BaseChatMessage=OR;var dte=class extends OR{static{s(this,"SystemMessage")}constructor(e){e.role=B7.Raw.ChatRole.System,super(e)}};oo.SystemMessage=dte;var fte=class extends OR{static{s(this,"UserMessage")}constructor(e){e.role=B7.Raw.ChatRole.User,super(e)}};oo.UserMessage=fte;var pte=class extends OR{static{s(this,"AssistantMessage")}constructor(e){e.role=B7.Raw.ChatRole.Assistant,super(e)}};oo.AssistantMessage=pte;var Sar=/\s+/g,obe=class extends OR{static{s(this,"ToolMessage")}constructor(e){e.role=B7.Raw.ChatRole.Tool,super(e)}};oo.ToolMessage=obe;var hte=class extends xm.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?Sar:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await Rar(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};oo.TextChunk=hte;async function Rar(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:B7.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(Rar,"getTextContentBelowBudget");var sbe=class extends xm.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};oo.Image=sbe;var abe=class extends xm.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(hte,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};oo.PrioritizedList=abe;var cbe=class extends xm.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};oo.ToolResult=cbe;var lbe=class extends xm.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};oo.LegacyPrioritization=lbe;var ube=class extends xm.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};oo.Chunk=ube;var dbe=class extends xm.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};oo.Expandable=dbe;var fbe=class extends xm.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};oo.TokenLimit=fbe;var mte=class extends xm.PromptElement{static{s(this,"AbstractKeepWith")}};oo.AbstractKeepWith=mte;var kar=0;function Par(){let t=kar++;return class extends mte{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(Par,"useKeepWith");var pbe=class extends xm.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(D7,null,this.props.alt),vscpp(D7,{flexGrow:1},this.props.children))}};oo.IfEmpty=pbe;var D7=class extends xm.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};oo.LogicalWrapper=D7});var Zot=q(N7=>{"use strict";d();Object.defineProperty(N7,"__esModule",{value:!0});N7.localize=Dar;N7.localize2=Bar;N7.getConfiguredDefaultLocale=Nar;function Xot(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(Xot,"_format");function Dar(t,e,...r){return Xot(e,r)}s(Dar,"localize");function Bar(t,e,...r){let n=Xot(e,r);return{original:n,value:n}}s(Bar,"localize2");function Nar(t){}s(Nar,"getConfiguredDefaultLocale")});var ybe=q(jt=>{"use strict";d();Object.defineProperty(jt,"__esModule",{value:!0});jt.isAndroid=jt.isEdge=jt.isSafari=jt.isFirefox=jt.isChrome=jt.OS=jt.setTimeout0=jt.setTimeout0IsFaster=jt.translationsConfigFile=jt.platformLocale=jt.locale=jt.Language=jt.language=jt.userAgent=jt.platform=jt.isCI=jt.isMobile=jt.isIOS=jt.webWorkerOrigin=jt.isWebWorker=jt.isWeb=jt.isElectron=jt.isNative=jt.isLinuxSnap=jt.isLinux=jt.isMacintosh=jt.isWindows=jt.LANGUAGE_DEFAULT=void 0;jt.PlatformToString=Mar;jt.isLittleEndian=Far;jt.isBigSurOrNewer=Oar;var est=Zot();jt.LANGUAGE_DEFAULT="en";var F7=!1,O7=!1,M7=!1,ist=!1,ost=!1,gbe=!1,sst=!1,Abe=!1,ast=!1,cst=!1,L7,gte=jt.LANGUAGE_DEFAULT,mbe=jt.LANGUAGE_DEFAULT,lst,wE,_E=globalThis,Bp;typeof _E.vscode<"u"&&typeof _E.vscode.process<"u"?Bp=_E.vscode.process:typeof process<"u"&&(Bp=process);var ust=typeof Bp?.versions?.electron=="string",Lar=ust&&Bp?.type==="renderer";if(typeof Bp=="object"){F7=Bp.platform==="win32",O7=Bp.platform==="darwin",M7=Bp.platform==="linux",ist=M7&&!!Bp.env.SNAP&&!!Bp.env.SNAP_REVISION,sst=ust,ast=!!Bp.env.CI||!!Bp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,L7=jt.LANGUAGE_DEFAULT,gte=jt.LANGUAGE_DEFAULT;let t=Bp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];L7=e.locale,mbe=e.osLocale,gte=r||jt.LANGUAGE_DEFAULT,lst=e._translationsConfigFile}catch{}ost=!0}else typeof navigator=="object"&&!Lar?(wE=navigator.userAgent,F7=wE.indexOf("Windows")>=0,O7=wE.indexOf("Macintosh")>=0,Abe=(wE.indexOf("Macintosh")>=0||wE.indexOf("iPad")>=0||wE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,M7=wE.indexOf("Linux")>=0,cst=wE?.indexOf("Mobi")>=0,gbe=!0,L7=est.getConfiguredDefaultLocale(est.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||jt.LANGUAGE_DEFAULT,gte=L7,mbe=navigator.language):console.error("Unable to resolve platform.");function Mar(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Mar,"PlatformToString");var Ate=0;O7?Ate=1:F7?Ate=3:M7&&(Ate=2);jt.isWindows=F7;jt.isMacintosh=O7;jt.isLinux=M7;jt.isLinuxSnap=ist;jt.isNative=ost;jt.isElectron=sst;jt.isWeb=gbe;jt.isWebWorker=gbe&&typeof _E.importScripts=="function";jt.webWorkerOrigin=jt.isWebWorker?_E.origin:void 0;jt.isIOS=Abe;jt.isMobile=cst;jt.isCI=ast;jt.platform=Ate;jt.userAgent=wE;jt.language=gte;var tst;(function(t){function e(){return jt.language}s(e,"value"),t.value=e;function r(){return jt.language.length===2?jt.language==="en":jt.language.length>=3?jt.language[0]==="e"&&jt.language[1]==="n"&&jt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return jt.language==="en"}s(n,"isDefault"),t.isDefault=n})(tst||(jt.Language=tst={}));jt.locale=L7;jt.platformLocale=mbe;jt.translationsConfigFile=lst;jt.setTimeout0IsFaster=typeof _E.postMessage=="function"&&!_E.importScripts;jt.setTimeout0=(()=>{if(jt.setTimeout0IsFaster){let t=[];_E.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),_E.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();jt.OS=O7||Abe?2:F7?1:3;var rst=!0,nst=!1;function Far(){if(!nst){nst=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,rst=new Uint16Array(t.buffer)[0]===513}return rst}s(Far,"isLittleEndian");jt.isChrome=!!(jt.userAgent&&jt.userAgent.indexOf("Chrome")>=0);jt.isFirefox=!!(jt.userAgent&&jt.userAgent.indexOf("Firefox")>=0);jt.isSafari=!!(!jt.isChrome&&jt.userAgent&&jt.userAgent.indexOf("Safari")>=0);jt.isEdge=!!(jt.userAgent&&jt.userAgent.indexOf("Edg/")>=0);jt.isAndroid=!!(jt.userAgent&&jt.userAgent.indexOf("Android")>=0);function Oar(t){return parseFloat(t)>=20}s(Oar,"isBigSurOrNewer")});var fst=q(GC=>{"use strict";d();Object.defineProperty(GC,"__esModule",{value:!0});GC.arch=GC.platform=GC.env=GC.cwd=void 0;var dst=ybe(),QR,Cbe=globalThis.vscode;if(typeof Cbe<"u"&&typeof Cbe.process<"u"){let t=Cbe.process;QR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?QR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:QR={get platform(){return dst.isWindows?"win32":dst.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};GC.cwd=QR.cwd;GC.env=QR.env;GC.platform=QR.platform;GC.arch=QR.arch});var hst=q(yr=>{"use strict";d();Object.defineProperty(yr,"__esModule",{value:!0});yr.delimiter=yr.sep=yr.toNamespacedPath=yr.parse=yr.format=yr.extname=yr.basename=yr.dirname=yr.relative=yr.resolve=yr.join=yr.isAbsolute=yr.normalize=yr.posix=yr.win32=void 0;var $B=fst(),Qar=65,Uar=97,qar=90,Har=122,ZT=46,ru=47,A0=92,JT=58,War=63,yte=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function $ar(t,e){if(t===null||typeof t!="object")throw new yte(e,"Object",t)}s($ar,"validateObject");function tc(t,e){if(typeof t!="string")throw new yte(e,"string",t)}s(tc,"validateString");var y0=$B.platform==="win32";function Ei(t){return t===ru||t===A0}s(Ei,"isPathSeparator");function vbe(t){return t===ru}s(vbe,"isPosixPathSeparator");function XT(t){return t>=Qar&&t<=qar||t>=Uar&&t<=Har}s(XT,"isWindowsDeviceRoot");function Cte(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=ru}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==ZT||i.charCodeAt(i.length-2)!==ZT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===ZT&&c!==-1?++c:c=-1}return i}s(Cte,"normalizeString");function pst(t,e){$ar(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(pst,"_format");yr.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],tc(o,"path"),o.length===0)continue}else e.length===0?o=$B.cwd():(o=$B.env[`=${e}`]||$B.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===A0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ei(f)&&(c=1,u=!0);else if(Ei(f))if(u=!0,Ei(o.charCodeAt(1))){let p=2,h=p;for(;p<a&&!Ei(o.charCodeAt(p));)p++;if(p<a&&p!==h){let m=o.slice(h,p);for(h=p;p<a&&Ei(o.charCodeAt(p));)p++;if(p<a&&p!==h){for(h=p;p<a&&!Ei(o.charCodeAt(p));)p++;(p===a||p!==h)&&(l=`\\\\${m}\\${o.slice(h,p)}`,c=p)}}}else c=1;else XT(f)&&o.charCodeAt(1)===JT&&(l=o.slice(0,2),c=2,a>2&&Ei(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Cte(r,!n,"\\",Ei),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){tc(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return vbe(o)?"\\":t;if(Ei(o))if(i=!0,Ei(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ei(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else XT(o)&&t.charCodeAt(1)===JT&&(n=t.slice(0,2),r=2,e>2&&Ei(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Cte(t.slice(r),!i,"\\",Ei):"";return a.length===0&&!i&&(a="."),a.length>0&&Ei(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){tc(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ei(r)||e>2&&XT(r)&&t.charCodeAt(1)===JT&&Ei(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];tc(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ei(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ei(r.charCodeAt(1))&&(++i,o>2&&(Ei(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ei(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return yr.win32.normalize(e)},relative(t,e){if(tc(t,"from"),tc(e,"to"),t===e)return"";let r=yr.win32.resolve(t),n=yr.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===A0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===A0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===A0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===A0;)l--;let u=l-c,f=a<u?a:u,p=-1,h=0;for(;h<f;h++){let g=t.charCodeAt(i+h);if(g!==e.charCodeAt(c+h))break;g===A0&&(p=h)}if(h!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+h)===A0)return n.slice(c+h+1);if(h===2)return n.slice(c+h)}a>f&&(t.charCodeAt(i+h)===A0?p=h:h===2&&(p=3)),p===-1&&(p=0)}let m="";for(h=i+p+1;h<=o;++h)(h===o||t.charCodeAt(h)===A0)&&(m+=m.length===0?"..":"\\..");return c+=p,m.length>0?`${m}${n.slice(c,l)}`:(n.charCodeAt(c)===A0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=yr.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===A0){if(e.charCodeAt(1)===A0){let r=e.charCodeAt(2);if(r!==War&&r!==ZT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(XT(e.charCodeAt(0))&&e.charCodeAt(1)===JT&&e.charCodeAt(2)===A0)return`\\\\?\\${e}`;return t},dirname(t){tc(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ei(i)?t:".";if(Ei(i)){if(r=n=1,Ei(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ei(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ei(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else XT(i)&&t.charCodeAt(1)===JT&&(r=e>2&&Ei(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ei(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&tc(e,"ext"),tc(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&XT(t.charCodeAt(0))&&t.charCodeAt(1)===JT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ei(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ei(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){tc(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===JT&&XT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ei(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===ZT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:pst.bind(null,"\\"),parse(t){tc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ei(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ei(i)){if(n=1,Ei(t.charCodeAt(1))){let p=2,h=p;for(;p<r&&!Ei(t.charCodeAt(p));)p++;if(p<r&&p!==h){for(h=p;p<r&&Ei(t.charCodeAt(p));)p++;if(p<r&&p!==h){for(h=p;p<r&&!Ei(t.charCodeAt(p));)p++;p===r?n=p:p!==h&&(n=p+1)}}}}else if(XT(i)&&t.charCodeAt(1)===JT){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ei(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ei(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===ZT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var jar=(()=>{if(y0){let t=/\\/g;return()=>{let e=$B.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>$B.cwd()})();yr.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:jar();tc(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===ru)}return e=Cte(e,!r,"/",vbe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(tc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ru,r=t.charCodeAt(t.length-1)===ru;return t=Cte(t,!e,"/",vbe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return tc(t,"path"),t.length>0&&t.charCodeAt(0)===ru},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];tc(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":yr.posix.normalize(e)},relative(t,e){if(tc(t,"from"),tc(e,"to"),t===e||(t=yr.posix.resolve(t),e=yr.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===ru&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===ru)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===ru?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===ru)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(tc(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ru,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===ru){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&tc(e,"ext"),tc(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===ru){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===ru){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){tc(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===ru){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===ZT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:pst.bind(null,"/"),parse(t){tc(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===ru,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===ru){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===ZT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};yr.posix.win32=yr.win32.win32=yr.win32;yr.posix.posix=yr.win32.posix=yr.posix;yr.normalize=y0?yr.win32.normalize:yr.posix.normalize;yr.isAbsolute=y0?yr.win32.isAbsolute:yr.posix.isAbsolute;yr.join=y0?yr.win32.join:yr.posix.join;yr.resolve=y0?yr.win32.resolve:yr.posix.resolve;yr.relative=y0?yr.win32.relative:yr.posix.relative;yr.dirname=y0?yr.win32.dirname:yr.posix.dirname;yr.basename=y0?yr.win32.basename:yr.posix.basename;yr.extname=y0?yr.win32.extname:yr.posix.extname;yr.format=y0?yr.win32.format:yr.posix.format;yr.parse=y0?yr.win32.parse:yr.posix.parse;yr.toNamespacedPath=y0?yr.win32.toNamespacedPath:yr.posix.toNamespacedPath;yr.sep=y0?yr.win32.sep:yr.posix.sep;yr.delimiter=y0?yr.win32.delimiter:yr.posix.delimiter});var Est=q(jB=>{"use strict";d();Object.defineProperty(jB,"__esModule",{value:!0});jB.URI=void 0;jB.isUriComponents=Zar;jB.uriToFsPath=bte;var mst=hst(),Ete=ybe(),Gar=/^\w[\w\d+.-]*$/,Var=/^\//,zar=/^\/\//;function Yar(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Gar.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Var.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(zar.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Yar,"_validateUri");function Kar(t,e){return!t&&!e?"file":t}s(Kar,"_schemeFix");function Jar(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==AA&&(e=AA+e):e=AA;break}return e}s(Jar,"_referenceResolution");var bs="",AA="/",Xar=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,xte=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||bs,this.authority=e.authority||bs,this.path=e.path||bs,this.query=e.query||bs,this.fragment=e.fragment||bs):(this.scheme=Kar(e,a),this.authority=r||bs,this.path=Jar(this.scheme,n||bs),this.query=i||bs,this.fragment=o||bs,Yar(this,a))}get fsPath(){return bte(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=bs),n===void 0?n=this.authority:n===null&&(n=bs),i===void 0?i=this.path:i===null&&(i=bs),o===void 0?o=this.query:o===null&&(o=bs),a===void 0?a=this.fragment:a===null&&(a=bs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new ew(r,n,i,o,a)}static parse(e,r=!1){let n=Xar.exec(e);return n?new ew(n[2]||bs,vte(n[4]||bs),vte(n[5]||bs),vte(n[7]||bs),vte(n[9]||bs),r):new ew(bs,bs,bs,bs,bs)}static file(e){let r=bs;if(Ete.isWindows&&(e=e.replace(/\\/g,AA)),e[0]===AA&&e[1]===AA){let n=e.indexOf(AA,2);n===-1?(r=e.substring(2),e=AA):(r=e.substring(2,n),e=e.substring(n)||AA)}return new ew("file",r,e,bs,bs)}static from(e,r){return new ew(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ete.isWindows&&e.scheme==="file"?n=t.file(mst.win32.join(bte(e,!0),...r)).path:n=mst.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return Ebe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new ew(e);return r._formatted=e.external??null,r._fsPath=e._sep===yst?e.fsPath??null:null,r}}else return e}};jB.URI=xte;function Zar(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Zar,"isUriComponents");var yst=Ete.isWindows?1:void 0,ew=class extends xte{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=bte(this,!1)),this._fsPath}toString(e=!1){return e?Ebe(this,!0):(this._formatted||(this._formatted=Ebe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=yst),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Cst={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function gst(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Cst[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(gst,"encodeURIComponentFast");function ecr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Cst[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(ecr,"encodeURIComponentMinimal");function bte(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Ete.isWindows&&(r=r.replace(/\//g,"\\")),r}s(bte,"uriToFsPath");function Ebe(t,e){let r=e?ecr:gst,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=AA,n+=AA),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:gst(l,!1,!1)),n}s(Ebe,"_asFormatted");function vst(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+vst(t.substr(3)):t}}s(vst,"decodeURIComponentGraceful");var Ast=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function vte(t){return t.match(Ast)?t.replace(Ast,e=>vst(e)):t}s(vte,"percentDecode")});var Ibe=q(tw=>{"use strict";d();Object.defineProperty(tw,"__esModule",{value:!0});tw.PromptReference=tw.ChatResponseReferencePartStatusKind=tw.PromptMetadata=void 0;var Q7=Est(),xbe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};tw.PromptMetadata=xbe;var xst;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(xst||(tw.ChatResponseReferencePartStatusKind=xst={}));var bbe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?Q7.URI.from(n):{uri:Q7.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?Q7.URI.from(e.iconPath):"light"in e.iconPath?{light:Q7.URI.from(e.iconPath.light),dark:Q7.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};tw.PromptReference=bbe});var Bbe=q(VB=>{"use strict";d();Object.defineProperty(VB,"__esModule",{value:!0});VB.PromptRenderer=VB.MetadataMap=void 0;var tcr=Jxe(),U7=rbe(),GB=VT(),Sc=hbe(),Dbe=Ibe(),bst;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(bst||(VB.MetadataMap=bst={}));var wbe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new Tte(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=_st(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof Sc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let h=u.props.flexGrow??1/0,m=o.get(h);m||(m=[],o.set(h,m)),m.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let h=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=h}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:y}of u)p+=y.props.flexBasis??1;let h=0,m=u.map(y=>{if(y.tokenLimit===void 0)return!1;let E=y.element.props.flexBasis??1,b=E/p;return Math.floor(e.remainingTokenBudget*b)<y.tokenLimit?!1:(p-=E,h+=y.tokenLimit,!0)}),g=u.map((y,E)=>{let b=(y.element.props.flexBasis??1)/p;return{tokenBudget:m[E]?y.tokenLimit:Math.floor((e.remainingTokenBudget-h)*b),endpoint:e.endpoint,countTokens:s((_,S)=>this._tokenizer.tokenLength(typeof _=="string"?{type:GB.Raw.ChatCompletionContentPartKind.Text,text:_}:_,S),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((y,E)=>({id:y.element.node.id,tokenBudget:g[E].tokenBudget}))}),await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let _=await Tst(y,()=>E.prepare?.(g[b],n,i));y.node.setState(_)}));let A=await Promise.all(u.map(async({element:y,promptElementInstance:E},b)=>{let _=g[b];return await Tst(y,()=>E.render(y.node.getState(),_,n,i))}));for(let[y,{element:E,promptElementInstance:b}]of u.entries()){let _=g[y],S=A[y];if(!S)continue;let P=await this._processPromptRenderPiece(new UR(_.tokenBudget,this._endpoint),E,b,S,n,i);b instanceof Sc.Expandable&&this._growables.push({initialConsume:P,elem:E.node}),e.consume(P)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=wst(i),l=new UR(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await rcr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new UR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,GB.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new UR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(h=>this._getFinalElementTree(h,void 0).then(m=>({...m,budget:h})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(h=>{if(!(h instanceof VC))return;let m=h.reference,g="variableName"in m.anchor;if(g&&!u.has(m.anchor.variableName))return u.add(m.anchor.variableName),m;if(!g)return m}).filter(wte),p=i.map(h=>{if(!(h instanceof VC)||l.includes(h))return;let m=h.reference,g="variableName"in m.anchor;if(g&&!u.has(m.anchor.variableName))return u.add(m.anchor.variableName),m;if(!g)return m}).filter(wte);return{metadata:{get:s(h=>l.find(m=>m instanceof h),"get"),getAll:s(h=>l.filter(m=>m instanceof h),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let h=await u.baseMessageTokenCount(this._tokenizer);do for(let m of u.removeLowestPriorityChild()){a++;let g=m.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-h>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Sc.Expandable))throw new Error("unreachable: expected growable");let c=new Tte(null,0,o.elem.id),l=new UR(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((h,m)=>this._tokenizer.tokenLength(typeof h=="string"?{type:GB.Raw.ChatCompletionContentPartKind.Text,text:h}:h,m),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Sc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Ite(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new VC(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new VC(l));else this._handleIntrinsic(e,c.name,c.props,Ite(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};VB.PromptRenderer=wbe;async function rcr(t,e,r,n){let i=0;if((0,Sc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,GB.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:GB.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(rcr,"computeTokensConsumedByLiterals");function wst(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new Rbe(String(t))):ncr(t)?Ite(t.children,e):icr(t)?Ite(t,e):typeof t.ctor=="string"?e.push(new _be(t.ctor,t.props,t.children)):e.push(new Sbe(t.ctor,t.props,t.children)),e)}s(wst,"flattenAndReduce");function Ite(t,e=[]){for(let r of t)wst(r,e);return e}s(Ite,"flattenAndReduceArr");var _be=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},Sbe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},Rbe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},UR=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},Tte=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new VC(Dbe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return q7.fromJSON(i,a,o);default:}}).filter(wte),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Sc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Sc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Sc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Sc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Sc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Sc.Chunk&&(this._objFlags|=2),this._obj instanceof Sc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new q7(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new q7(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(wte),props:{},references:this._metadata.filter(r=>r instanceof VC).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=Tbe(this._obj.props,tcr.jsonRetainedProps)),this._obj instanceof Sc.BaseChatMessage)e.ctor=1,Object.assign(e.props,Tbe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Sc.Image)return{...e,ctor:3,props:{...e.props,...Tbe(this._obj.props,["src","detail"])}};this._obj instanceof Sc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Sc.Image)return new U7.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Sc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new U7.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Sc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Sc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new U7.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Sc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Sc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new kbe({type:GB.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},kbe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new U7.MaterializedChatMessageBreakpoint(e,this.part)}},q7=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new VC(Dbe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new U7.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof VC).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function ncr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(ncr,"isFragmentCtor");function wte(t){return t!==void 0}s(wte,"isDefined");var Pbe=class extends Dbe.PromptMetadata{static{s(this,"InternalMetadata")}},VC=class extends Pbe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function icr(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(icr,"isIterable");function Tbe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(Tbe,"pickProps");function _st(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(_st,"atPath");var Ist=new WeakSet;async function Tst(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Ist.has(r)&&r.constructor.name!=="CancellationError"&&(Ist.add(r),r.message+=` (at tsx element ${_st(t.path)})`),r}}s(Tst,"annotateError")});var Sst=q(_te=>{"use strict";d();Object.defineProperty(_te,"__esModule",{value:!0});_te.VSCodeTokenizer=void 0;var Nbe=VT(),Lbe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=Nbe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==Nbe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===Nbe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};_te.VSCodeTokenizer=Lbe});var Rst=q(zB=>{"use strict";d();Object.defineProperty(zB,"__esModule",{value:!0});zB.tracerCss=zB.tracerSrc=void 0;zB.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';zB.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Nst=q(Rte=>{"use strict";d();Object.defineProperty(Rte,"__esModule",{value:!0});Rte.HTMLTracer=void 0;var kst=Rst(),qR=rbe(),ocr=VT(),Mbe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return Fbe.create({epochs:this.epochs,traceData:Dst(this.traceData)})}serveRouter(e){return new Ste({baseAddress:e,epochs:this.epochs,traceData:Dst(this.traceData)})}};Rte.HTMLTracer=Mbe;var Ste=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${kst.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Pst(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${kst.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Pst(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},Fbe=class t extends Ste{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Pst(t,e){return{container:await Bst(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Pst,"serializeRenderData");async function Bst(t,e,r){let n={metadata:e.metadata.map(acr),priority:e.priority};if(e instanceof qR.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof qR.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof qR.MaterializedChatMessageOpaque||e instanceof qR.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Bst(t,o,r||e instanceof qR.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof qR.GenericMaterializedContainer)return{...i,type:0};if(e instanceof qR.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:ocr.Raw.ChatRole.display(e.role),text:o}}}scr(e)}s(Bst,"serializeMaterialized");function scr(t){throw new Error("unreachable")}s(scr,"assertNever");function acr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(acr,"serializeMetadata");var Dst=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Mst=q(Lst=>{"use strict";d();Object.defineProperty(Lst,"__esModule",{value:!0})});var Ost=q(Fst=>{"use strict";d();Object.defineProperty(Fst,"__esModule",{value:!0})});var Ust=q(Qst=>{"use strict";d();Object.defineProperty(Qst,"__esModule",{value:!0})});var gA=q(oa=>{"use strict";d();var ccr=oa&&oa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HR=oa&&oa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ccr(e,t,r)};Object.defineProperty(oa,"__esModule",{value:!0});oa.contentType=oa.PromptRenderer=oa.MetadataMap=oa.PromptElement=oa.JSONTree=void 0;oa.renderPrompt=dcr;oa.renderElementJSON=fcr;var Obe=VT(),qst=Bbe(),lcr=Sst();HR(Nst(),oa);oa.JSONTree=Jxe();HR(VT(),oa);HR(hbe(),oa);HR(Ibe(),oa);HR(Mst(),oa);HR(Ost(),oa);HR(Ust(),oa);var ucr=ibe();Object.defineProperty(oa,"PromptElement",{enumerable:!0,get:s(function(){return ucr.PromptElement},"get")});var Hst=Bbe();Object.defineProperty(oa,"MetadataMap",{enumerable:!0,get:s(function(){return Hst.MetadataMap},"get")});Object.defineProperty(oa,"PromptRenderer",{enumerable:!0,get:s(function(){return Hst.PromptRenderer},"get")});async function dcr(t,e,r,n,i,o,a=Obe.OutputMode.VSCode){let c="countTokens"in n?new lcr.VSCodeTokenizer((p,h)=>n.countTokens(p,h),a):n,l=new qst.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(dcr,"renderPrompt");oa.contentType="application/vnd.codechat.prompt+json.1";function fcr(t,e,r,n){return new qst.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:Obe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===Obe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(fcr,"renderElementJSON")});var Op=q(mQ=>{"use strict";d();Object.defineProperty(mQ,"__esModule",{value:!0});mQ.dedent=void 0;function Wct(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,h;return(h=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(h,m){return m===0?h:""+f+h}).join(`
`)),a+=p+n[l+1]}),a}s(Wct,"dedent");mQ.dedent=Wct;mQ.default=Wct});var Jct=q(sTe=>{"use strict";d();Object.defineProperty(sTe,"__esModule",{value:!0});sTe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var nlt=q(cTe=>{"use strict";d();Object.defineProperty(cTe,"__esModule",{value:!0});var Xct=require("worker_threads"),sur=require("v8"),aur=require("os"),Zct=Jct(),Xre="ready",elt="spawning",cur="busy",Zre="off",tlt=aur.cpus().length,rlt=process.version.replace("v","").split("."),lur=parseInt(rlt[0]),uur=parseInt(rlt[1]),aTe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=tlt,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new Xct.Worker(Zct.workerFile,{eval:!0});e.status=elt,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=Xre,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=Zre,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===Zre).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===Xre){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=cur;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let h in o.ctx){if(!o.ctx.hasOwnProperty(h))continue;let m;switch(typeof o.ctx[h]){case"string":m=`'${o.ctx[h]}'`;break;case"object":m=JSON.stringify(o.ctx[h]);break;default:m=o.ctx[h]}l+=`let ${h} = ${m}
`}let u=sur.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",h=>{if(this.free(n),typeof h.error>"u"||h.error===null)return a(h.data);let m=new Error(h.error.message);m.stack=h.error.stack,c(m)}),n.once("error",h=>{e.status=Zre,c(h),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=Xre,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:tlt,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new Xct.Worker(Zct.workerFile,{eval:!0});this.workers.push({status:elt,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=Xre,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=Zre,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(lur>=12&&uur>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};cTe.default=new aTe});var ene=q(n5=>{"use strict";d();var dur=n5&&n5.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n5,"__esModule",{value:!0});var gQ=dur(nlt()),fur=`job needs a function.
Try with:
> job(() => {...}, config)`,pur=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function hur(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(fur));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(pur));gQ.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(hur,"job");n5.job=hur;n5.stop=gQ.default.teardown.bind(gQ.default);n5.start=gQ.default.setup.bind(gQ.default)});var vlt=q(i5=>{"use strict";d();var o1=i5&&i5.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},yTe=i5&&i5.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},QE,gw;Object.defineProperty(i5,"__esModule",{value:!0});var CTe=class{static{s(this,"AwaitLock")}constructor(){QE.set(this,!1),gw.set(this,new Set)}get acquired(){return o1(this,QE,"f")}acquireAsync({timeout:e}={}){if(!o1(this,QE,"f"))return yTe(this,QE,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{o1(this,gw,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),o1(this,gw,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{o1(this,gw,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return o1(this,QE,"f")?!1:(yTe(this,QE,!0,"f"),!0)}release(){if(!o1(this,QE,"f"))throw new Error("Cannot release an unacquired lock");if(o1(this,gw,"f").size>0){let[e]=o1(this,gw,"f");o1(this,gw,"f").delete(e),e()}else yTe(this,QE,!1,"f")}};i5.default=CTe;QE=new WeakMap,gw=new WeakMap});var t_e=q((ueo,Dft)=>{d();var HQ=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Hmr=typeof AbortController=="function",Die=Hmr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new Rft}abort(){this.signal.dispatchEvent("abort")}},Wmr=typeof AbortSignal=="function",$mr=typeof Die.AbortSignal=="function",Rft=Wmr?AbortSignal:$mr?Die.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},Zwe=new Set,Kwe=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;Bie(r)&&e_e(r,`${t} option`,`options.${e}`,HN)},"deprecatedOption"),Jwe=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(Bie(r)){let{prototype:n}=HN,{get:i}=Object.getOwnPropertyDescriptor(n,t);e_e(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),jmr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(Bie(r)){let{prototype:n}=HN,{get:i}=Object.getOwnPropertyDescriptor(n,t);e_e(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),kft=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Bie=s(t=>!Zwe.has(t),"shouldWarn"),e_e=s((t,e,r,n)=>{Zwe.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;kft(i,"DeprecationWarning",t,n)},"warn"),p5=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Pft=s(t=>p5(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?qN:null:null,"getUintArray"),qN=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Xwe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=Pft(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},HN=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:h,maxSize:m=0,sizeCalculation:g,fetchMethod:A,fetchContext:y,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:b}=e,{length:_,maxAge:S,stale:P}=e instanceof t?{}:e;if(r!==0&&!p5(r))throw new TypeError("max option must be a nonnegative integer");let B=r?Pft(r):Array;if(!B)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=m,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=y,!this.fetchMethod&&y!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new B(r),this.prev=new B(r),this.head=0,this.tail=0,this.free=new Xwe(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!E,this.maxSize!==0){if(!p5(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!P,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=p5(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||S||0,this.ttl){if(!p5(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let F="LRU_CACHE_UNBOUNDED";Bie(F)&&(Zwe.add(F),kft("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",F,t))}P&&Kwe("stale","allowStale"),S&&Kwe("maxAge","ttl"),_&&Kwe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new qN(this.max),this.starts=new qN(this.max),this.setItemTTL=(n,i,o=HQ.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?HQ.now():0};let e=0,r=s(()=>{let n=HQ.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new qN(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!p5(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!p5(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return Jwe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=HQ.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=HQ.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new Die,c={signal:a.signal,options:n,context:i},l=s(h=>(a.signal.aborted||this.set(e,h,c.options),h),"cb"),u=s(h=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw h},"eb"),f=s(h=>h(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:h=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let m={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let A=this.backgroundFetch(e,g,m,p);return A.__returned=A}else{let A=this.valList[g];if(this.isBackgroundFetch(A))return r&&A.__staleWhileFetching!==void 0?A.__staleWhileFetching:A.__returned=A;if(!h&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),A;let y=this.backgroundFetch(e,g,m,p);return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Jwe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Jwe("reset","clear"),this.clear}get length(){return jmr("length","size"),this.size}static get AbortController(){return Die}static get AbortSignal(){return Rft}};Dft.exports=HN});var i_e=q((peo,Bft)=>{"use strict";d();var WQ=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},r_e=class extends WQ{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},n_e=class extends WQ{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};Bft.exports={FetchBaseError:WQ,FetchError:r_e,AbortError:n_e}});var jE=q((geo,Lft)=>{"use strict";d();var{constants:{MAX_LENGTH:Gmr}}=require("buffer"),{pipeline:Nie,PassThrough:Vmr}=require("stream"),{promisify:zmr}=require("util"),{createGunzip:Ymr,createInflate:Kmr,createBrotliDecompress:Jmr,constants:{Z_SYNC_FLUSH:Nft}}=require("zlib"),Xmr=By()("helix-fetch:utils"),Zmr=zmr(Nie),egr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),tgr=s((t,e,r,n)=>{if(!egr(t,e))return r;let i=s(o=>{o&&(Xmr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Nie(r,Ymr({flush:Nft,finishFlush:Nft}),i);case"deflate":case"x-deflate":return Nie(r,Kmr(),i);case"br":return Nie(r,Jmr(),i);default:return r}},"decodeStream"),rgr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Lie=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?ngr(t,e):igr(t,e);default:return 0}},"calcSize"),ngr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Lie(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),igr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Lie(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Lie(t[i],e)}),r},"calcObjectSize"),ogr=s(t=>Lie(t,new WeakSet),"sizeof"),sgr=s(async t=>{let e=new Vmr,r=0,n=[];return e.on("data",i=>{if(r+i.length>Gmr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await Zmr(t,e),Buffer.concat(n,r)},"streamToBuffer");Lft.exports={decodeStream:tgr,isPlainObject:rgr,sizeof:ogr,streamToBuffer:sgr}});var Fie=q((Ceo,Qft)=>{"use strict";d();var{PassThrough:Mft,Readable:GE}=require("stream"),{types:{isAnyArrayBuffer:Oft}}=require("util"),{FetchError:agr,FetchBaseError:cgr}=i_e(),{streamToBuffer:lgr}=jE(),ugr=Buffer.alloc(0),Rm=Symbol("Body internals"),dgr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Fft=s(async t=>{if(t[Rm].disturbed)throw new TypeError("Already read");if(t[Rm].error)throw new TypeError(`Stream had error: ${t[Rm].error.message}`);t[Rm].disturbed=!0;let{stream:e}=t[Rm];return e===null?ugr:lgr(e)},"consume"),Mie=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=GE.from(e.toString()):e instanceof GE?r=e:Buffer.isBuffer(e)?r=GE.from(e):Oft(e)?r=GE.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=GE.from(e):r=GE.from(String(e)),this[Rm]={stream:r,disturbed:!1,error:null},e instanceof GE&&r.on("error",n=>{let i=n instanceof cgr?n:new agr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Rm].error=i})}get body(){return this[Rm].stream}get bodyUsed(){return this[Rm].disturbed}async buffer(){return Fft(this)}async arrayBuffer(){return dgr(await this.buffer())}async text(){return(await Fft(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(Mie.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var fgr=s(t=>{if(t[Rm].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Rm],r=e;if(e instanceof GE){r=new Mft;let n=new Mft;e.pipe(r),e.pipe(n),t[Rm].stream=n}return r},"cloneStream"),pgr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||Oft(t)||t instanceof GE?null:"text/plain; charset=utf-8","guessContentType");Qft.exports={Body:Mie,cloneStream:fgr,guessContentType:pgr}});var WN=q((xeo,Wft)=>{"use strict";d();var{validateHeaderName:Uft,validateHeaderValue:qft}=require("http"),{isPlainObject:hgr}=jE(),VE=Symbol("Headers internals"),$Q=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof Uft=="function")Uft(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),Hft=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof qft=="function")qft(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),Oie=class t{static{s(this,"Headers")}constructor(e={}){if(this[VE]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(hgr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[VE].map.set($Q(e),Hft(r,e))}has(e){return this[VE].map.has($Q(e))}get(e){let r=this[VE].map.get($Q(e));return r===void 0?null:r}append(e,r){let n=$Q(e),i=Hft(r,e),o=this[VE].map.get(n);this[VE].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[VE].map.delete($Q(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[VE].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[VE].map)}};Object.defineProperties(Oie.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Wft.exports={Headers:Oie}});var o_e=q((Teo,$ft)=>{"use strict";d();var{EventEmitter:mgr}=require("events"),DA=Symbol("AbortSignal internals"),$N=class{static{s(this,"AbortSignal")}constructor(){this[DA]={eventEmitter:new mgr,onabort:null,aborted:!1}}get aborted(){return this[DA].aborted}get onabort(){return this[DA].onabort}set onabort(e){this[DA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[DA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[DA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[DA][n]=="function"&&this[n](r),this[DA].eventEmitter.emit(e,r)}fire(){this[DA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties($N.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Uie=class extends $N{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[DA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[DA].timerId)}};Object.defineProperties(Uie.prototype,{clear:{enumerable:!0}});var Qie=Symbol("AbortController internals"),qie=class{static{s(this,"AbortController")}constructor(){this[Qie]={signal:new $N}}get signal(){return this[Qie].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Qie].signal.aborted||this[Qie].signal.fire()}};Object.defineProperties(qie.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});$ft.exports={AbortController:qie,AbortSignal:$N,TimeoutSignal:Uie}});var jQ=q((Seo,Vft)=>{"use strict";d();var{randomBytes:ggr}=require("crypto"),{Readable:Agr}=require("stream"),a_e=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),ygr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),jft=s(t=>`--${t}--\r
\r
`,"getFooter"),Gft=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,a_e(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*Cgr(t,e){for(let[r,n]of t)yield Gft(e,r,n),a_e(n)?yield*n.stream():yield n,yield`\r
`;yield jft(e)}s(Cgr,"formDataIterator");var vgr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(Gft(e,n,i)),r+=a_e(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(jft(e)),r},"getFormDataLength"),s_e=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=ggr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=vgr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Agr.from(Cgr(this.fd,this.boundary))}};Vft.exports={isFormData:ygr,FormDataSerializer:s_e}});var Yft=q((Deo,zft)=>{"use strict";d();var{AbortSignal:Peo}=o_e(),{Body:Egr,cloneStream:xgr,guessContentType:bgr}=Fie(),{Headers:Igr}=WN(),{isPlainObject:Tgr}=jE(),{isFormData:wgr,FormDataSerializer:_gr}=jQ(),Sgr=20,Tw=Symbol("Request internals"),Hie=class t extends Egr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?xgr(n):null),c=new Igr(r.headers||n&&n.headers||{});if(wgr(a)&&!c.has("content-type")){let p=new _gr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(Tgr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=bgr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[Tw]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=Sgr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Tw].method}get url(){return this[Tw].parsedURL.toString()}get headers(){return this[Tw].headers}get redirect(){return this[Tw].redirect}get cache(){return this[Tw].cache}get signal(){return this[Tw].signal}clone(){return new t(this)}get init(){return this[Tw].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Hie.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});zft.exports={Request:Hie}});var c_e=q((Leo,Kft)=>{"use strict";d();var{Body:Rgr,cloneStream:kgr,guessContentType:Pgr}=Fie(),{Headers:Dgr}=WN(),{isPlainObject:Bgr}=jE(),{isFormData:Ngr,FormDataSerializer:Lgr}=jQ(),BA=Symbol("Response internals"),Wie=class t extends Rgr{static{s(this,"Response")}constructor(e=null,r={}){let n=new Dgr(r.headers),i=e;if(Ngr(i)&&!n.has("content-type")){let o=new Lgr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(Bgr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Pgr(i);o&&n.set("content-type",o)}super(i),this[BA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[BA].url||""}get status(){return this[BA].status}get statusText(){return this[BA].statusText}get ok(){return this[BA].status>=200&&this[BA].status<300}get redirected(){return this[BA].counter>0}get headers(){return this[BA].headers}get httpVersion(){return this[BA].httpVersion}get decoded(){return this[BA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(kgr(this),{...this[BA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Wie.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Kft.exports={Response:Wie}});var Xft=q((Qeo,Jft)=>{"use strict";d();var Mgr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Fgr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ogr=new Set([500,502,503,504]),Qgr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Ugr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function h5(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(h5,"toNumberOrZero");function qgr(t){return t?Ogr.has(t.status):!0}s(qgr,"isErrorResponse");function l_e(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(l_e,"parseCacheControl");function Hgr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(Hgr,"formatCacheControl");Jft.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=l_e(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=l_e(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Hgr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Fgr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Mgr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=l_e(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Qgr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return h5(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return h5(this._rescc["s-maxage"])}if(this._rescc["max-age"])return h5(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+h5(this._rescc["stale-if-error"]),n=e+h5(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+h5(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+h5(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&qgr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!Ugr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var r0t=q((Heo,t0t)=>{"use strict";d();var Wgr=Xft(),{Headers:$gr}=WN(),Zft=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),e0t=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),u_e=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Wgr(Zft(e),e0t(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(Zft(e))}responseHeaders(e){return new $gr(this.policy.responseHeaders(e0t(e)))}timeToLive(){return this.policy.timeToLive()}};t0t.exports=u_e});var o0t=q((jeo,i0t)=>{"use strict";d();var{Readable:jgr}=require("stream"),{Headers:n0t}=WN(),{Response:Ggr}=c_e(),ww=Symbol("CacheableResponse internals"),Vgr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),d_e=class t extends Ggr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new n0t(r.headers);this[ww]={headers:n,bufferedBody:e}}get headers(){return this[ww].headers}set headers(e){if(e instanceof n0t)this[ww].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return jgr.from(this[ww].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[ww].bufferedBody}async arrayBuffer(){return Vgr(this[ww].bufferedBody)}async text(){return this[ww].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[ww].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},zgr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new d_e(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");i0t.exports={cacheableResponse:zgr}});var $ie=q((zeo,s0t)=>{"use strict";d();var f_e=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};s0t.exports={RequestAbortedError:f_e}});var d0t=q((Jeo,u0t)=>{"use strict";d();var c0t=require("http"),l0t=require("https"),{Readable:Ygr}=require("stream"),zE=By()("helix-fetch:h1"),{RequestAbortedError:a0t}=$ie(),{decodeStream:Kgr}=jE(),Jgr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new l0t.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new c0t.Agent(n),r.httpAgent):void 0},"getAgent"),Xgr=s(t=>{t.h1={}},"setupContext"),Zgr=s(async({h1:t})=>{t.httpAgent&&(zE("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(zE("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),eAr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?Kgr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),tAr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?l0t:c0t,i=Jgr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{zE(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{zE(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{zE(`${o.method} ${e.href}`);let f,{signal:p}=o,h=s(()=>{p.removeEventListener("abort",h),a&&!a.inUse&&(zE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new a0t),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new a0t);return}p.addEventListener("abort",h)}f=n(e,o),f.once("response",m=>{p&&p.removeEventListener("abort",h),a&&!a.inUse&&(zE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(eAr(m,o.decode,u))}),f.once("error",m=>{p&&p.removeEventListener("abort",h),a&&!a.inUse&&(zE(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(zE(`${o.method} ${e.href} failed with: ${m.message}`),f.abort(),u(m))}),c instanceof Ygr?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");u0t.exports={request:tAr,setupContext:Xgr,resetContext:Zgr}});var m0t=q((eto,h0t)=>{"use strict";d();var{connect:rAr,constants:nAr}=require("http2"),{Readable:iAr}=require("stream"),aa=By()("helix-fetch:h2"),{RequestAbortedError:f0t}=$ie(),{decodeStream:oAr}=jE(),{NGHTTP2_CANCEL:GQ}=nAr,sAr=5*60*1e3,aAr=5e3,cAr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),lAr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),aa(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),p0t=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?oAr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),uAr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=aAr}}}=t,u=i[":path"],f=`${e}${u}`;aa(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(GQ)},"rejectPush")),n.on("push",(p,h)=>{aa(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${h}`),n.setTimeout(l,()=>{aa(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(GQ)}),c&&c(f,i,p0t(p,n,r))}),n.on("aborted",()=>{aa(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{aa(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,h,m)=>{aa(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${h}, id: ${m}`)})},"handlePush"),dAr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=sAr,pushPromiseHandler:p,pushHandler:h}=l,m={...r},{method:g,headers:A,socket:y,body:E,decode:b}=m;return y&&delete m.socket,A.host&&(A[":authority"]=A.host,delete A.host),new Promise((_,S)=>{let P=u[n];if(!P||P.closed||P.destroyed){let V=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),H={...l,rejectUnauthorized:V};y&&!y.inUse&&(H.createConnection=()=>(aa(`reusing socket #${y.id} (${y.servername})`),y.inUse=!0,y)),P=rAr(n,{...H,settings:{enablePush:!!(p||h)}}),P.setMaxListeners(1e3),P.setTimeout(f,()=>{aa(`closing session ${n} after ${f} ms of inactivity`),P.close()}),P.once("connect",()=>{aa(`session ${n} established`),aa(`caching session ${n}`),u[n]=P}),P.on("localSettings",X=>{aa(`session ${n} localSettings: ${JSON.stringify(X)}`)}),P.on("remoteSettings",X=>{aa(`session ${n} remoteSettings: ${JSON.stringify(X)}`)}),P.once("close",()=>{aa(`session ${n} closed`),u[n]===P&&(aa(`discarding cached session ${n}`),delete u[n])}),P.once("error",X=>{aa(`session ${n} encountered error: ${X}`),u[n]===P&&(aa(`discarding cached session ${n}`),delete u[n])}),P.on("frameError",(X,K,j)=>{aa(`session ${n} encountered frameError: type: ${X}, code: ${K}, id: ${j}`)}),P.once("goaway",(X,K,j)=>{aa(`session ${n} received GOAWAY frame: errorCode: ${X}, lastStreamID: ${K}, opaqueData: ${j?j.toString():void 0}`)}),P.on("stream",(X,K,j)=>{uAr(t,n,b,X,K,j)})}else y&&y.id!==P.socket.id&&!y.inUse&&(aa(`discarding redundant socket used for ALPN: #${y.id} ${y.servername}`),y.destroy());aa(`${g} ${e.host}${c}`);let B,{signal:F}=m,Y=s(()=>{F.removeEventListener("abort",Y),S(new f0t),B&&B.close(GQ)},"onAbortSignal");if(F){if(F.aborted){S(new f0t);return}F.addEventListener("abort",Y)}let ee=s(V=>{aa(`session ${n} encountered error during ${m.method} ${e.href}: ${V}`),S(V)},"onSessionError");P.once("error",ee),B=P.request({":method":g,":path":c,...A}),B.once("response",V=>{P.off("error",ee),F&&F.removeEventListener("abort",Y),_(p0t(V,B,m.decode,S))}),B.once("error",V=>{P.off("error",ee),F&&F.removeEventListener("abort",Y),B.rstCode!==GQ&&(aa(`${m.method} ${e.href} failed with: ${V.message}`),B.close(GQ),S(V))}),B.once("frameError",(V,H,U)=>{P.off("error",ee),aa(`encountered frameError during ${m.method} ${e.href}: type: ${V}, code: ${H}, id: ${U}`)}),B.on("push",(V,H)=>{aa(`received 'push' event: headers: ${JSON.stringify(V)}, flags: ${H}`)}),E instanceof iAr?E.pipe(B):(E&&B.write(E),B.end())})},"request");h0t.exports={request:dAr,setupContext:cAr,resetContext:lAr}});var A0t=q((nto,g0t)=>{"use strict";d();var{EventEmitter:fAr}=require("events"),pAr=s(()=>{let t={},e=new fAr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");g0t.exports=pAr});var y0t=q((sto,hAr)=>{hAr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var b0t=q((ato,x0t)=>{"use strict";d();var{Readable:mAr}=require("stream"),gAr=require("tls"),{types:{isAnyArrayBuffer:AAr}}=require("util"),yAr=t_e(),p_e=By()("helix-fetch:core"),{RequestAbortedError:jie}=$ie(),h_e=d0t(),Gie=m0t(),CAr=A0t(),{isPlainObject:vAr}=jE(),{isFormData:EAr,FormDataSerializer:xAr}=jQ(),{version:bAr}=y0t(),m_e="h2",g_e="h2c",A_e="http/1.0",m5="http/1.1",IAr=100,TAr=60*60*1e3,wAr=[m_e,m5,A_e],_Ar=`helix-fetch/${bAr}`,SAr={method:"GET",compress:!0,decode:!0},C0t=0,v0t=CAr(),E0t=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new jie;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new jie);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof jie||(p_e(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=gAr.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),C0t+=1,o.id=C0t,o.secureConnecting=!1,p_e(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),RAr=s(async(t,e)=>{let r=await v0t.acquire(t.origin);try{return r||(r=await E0t(t,e)),r}finally{v0t.release(t.origin,r)}},"connect"),kAr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=m5,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=g_e,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await RAr(e,u);return i=f.alpnProtocol,i||(i=m5),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),PAr=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),DAr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await E0t(e,u);return{protocol:f.alpnProtocol||m5,socket:f}}return{protocol:c.alpnProtocol||m5,socket:c}},"getProtocolAndSocketFromFactory"),BAr=s(async(t,e,r)=>{let n=new URL(e),i={...SAr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=PAr(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(EAr(i.body)){let u=new xAr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":vAr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):AAr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof mAr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await DAr(t.socketFactory,n,i,t.alpnProtocols):await kAr(t,n,a);switch(p_e(`${n.host} -> ${c}`),c){case m_e:try{return await Gie.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case g_e:return Gie.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case A_e:case m5:return h_e.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),NAr=s(async t=>(t.alpnCache.clear(),Promise.all([h_e.resetContext(t),Gie.resetContext(t)])),"resetContext"),LAr=s(t=>{let{options:{alpnProtocols:e=wAr,alpnCacheTTL:r=TAr,alpnCacheSize:n=IAr,userAgent:i=_Ar,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new yAr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,h_e.setupContext(t),Gie.setupContext(t)},"setupContext");x0t.exports={request:BAr,setupContext:LAr,resetContext:NAr,RequestAbortedError:jie,ALPN_HTTP2:m_e,ALPN_HTTP2C:g_e,ALPN_HTTP1_1:m5,ALPN_HTTP1_0:A_e}});var T0t=q((uto,I0t)=>{"use strict";d();var MAr=By()("helix-fetch:core"),{request:FAr,setupContext:OAr,resetContext:QAr,RequestAbortedError:UAr,ALPN_HTTP2:qAr,ALPN_HTTP2C:HAr,ALPN_HTTP1_1:WAr,ALPN_HTTP1_0:$Ar}=b0t(),y_e=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},OAr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:UAr,ALPN_HTTP2:qAr,ALPN_HTTP2C:HAr,ALPN_HTTP1_1:WAr,ALPN_HTTP1_0:$Ar}}async request(e,r){return FAr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return MAr("resetting context"),QAr(this)}};I0t.exports=new y_e().api()});var k0t=q((pto,R0t)=>{"use strict";d();var{EventEmitter:jAr}=require("events"),{Readable:VQ}=require("stream"),C_e=By()("helix-fetch"),GAr=t_e(),{Body:VAr}=Fie(),{Headers:b_e}=WN(),{Request:g5}=Yft(),{Response:E_e}=c_e(),{FetchBaseError:zAr,FetchError:zQ,AbortError:Vie}=i_e(),{AbortController:YAr,AbortSignal:KAr,TimeoutSignal:JAr}=o_e(),XAr=r0t(),{cacheableResponse:ZAr}=o0t(),{sizeof:eyr}=jE(),{isFormData:tyr}=jQ(),{context:ryr,RequestAbortedError:nyr}=T0t(),w0t=["GET","HEAD"],iyr=500,oyr=100*1024*1024,v_e="push",_0t=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof g5&&typeof r>"u"?e:new g5(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:h}}=i,m;if(c&&c.aborted){let P=new Vie("The operation was aborted.");throw i.init.body instanceof VQ&&i.init.body.destroy(P),P}try{m=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:h&&!(h instanceof VQ)&&!tyr(h)?h:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(P){throw h instanceof VQ&&h.destroy(P),P instanceof TypeError?P:P instanceof nyr?new Vie("The operation was aborted."):new zQ(P.message,"system",P)}let g=s(()=>{c.removeEventListener("abort",g);let P=new Vie("The operation was aborted.");i.init.body instanceof VQ&&i.init.body.destroy(P),m.readable.emit("error",P)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:A,statusText:y,httpVersion:E,headers:b,readable:_,decoded:S}=m;if([301,302,303,307,308].includes(A)){let{location:P}=b,B=P==null?null:new URL(P,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new zQ(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(B===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new zQ(`maximum redirect reached at: ${i.url}`,"max-redirect");let F={headers:new b_e(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(A!==303&&i.body&&i.init.body instanceof VQ)throw c&&c.removeEventListener("abort",g),new zQ("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(A===303||(A===301||A===302)&&i.method==="POST")&&(F.method="GET",F.body=void 0,F.headers.delete("content-length")),c&&c.removeEventListener("abort",g),_0t(t,new g5(B,F))}default:}}return c&&(_.once("end",()=>{c.removeEventListener("abort",g)}),_.once("error",()=>{c.removeEventListener("abort",g)})),new E_e(_,{url:i.url,status:A,statusText:y,headers:b,httpVersion:E,decoded:S,counter:i.counter})},"fetch"),S0t=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!w0t.includes(e.method))return r;let n=new XAr(e,r,{shared:!1});if(n.storable()){let i=await ZAr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),syr=s(async(t,e,r)=>{let n=new g5(e,r);if(t.options.maxCacheSize!==0&&w0t.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new b_e(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await _0t(t,n);return n.cache!=="no-store"?S0t(t,n,o):o},"cachingFetch"),ayr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),cyr=s(t=>new JAr(t),"timeoutSignal"),x_e=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:oyr,i=iyr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>eyr(c),"sizeCalculation");this.cache=new GAr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new jAr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(E=>E.startsWith(":")).forEach(E=>delete f[E]);let{statusCode:p,statusText:h,httpVersion:m,headers:g,readable:A,decoded:y}=u;this.pushHandler(c,f,new E_e(A,{url:c,status:p,statusText:h,headers:g,httpVersion:m,decoded:y}))}),this.context=ryr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:VAr,Headers:b_e,Request:g5,Response:E_e,AbortController:YAr,AbortSignal:KAr,FetchBaseError:zAr,FetchError:zQ,AbortError:Vie,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:ayr,timeoutSignal:cyr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return syr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(v_e,e)}offPush(e){return this.eventEmitter.off(v_e,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){C_e(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new g5(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(C_e(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){C_e(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await S0t(this,new g5(e,{headers:r}),n);this.eventEmitter.emit(v_e,e,i)}};R0t.exports=new x_e().api()});var D0t=q((gto,P0t)=>{"use strict";d();P0t.exports=k0t()});var mht=q((Hoe,hht)=>{d();(function(t,e){typeof Hoe=="object"&&typeof hht<"u"?e(Hoe):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(Hoe,function(t){"use strict";function e(){for(var M=arguments.length,D=Array(M),Z=0;Z<M;Z++)D[Z]=arguments[Z];if(D.length>1){D[0]=D[0].slice(0,-1);for(var ge=D.length-1,Se=1;Se<ge;++Se)D[Se]=D[Se].slice(1,-1);return D[ge]=D[ge].slice(1),D.join("")}else return D[0]}s(e,"merge");function r(M){return"(?:"+M+")"}s(r,"subexp");function n(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}s(n,"typeOf");function i(M){return M.toUpperCase()}s(i,"toUpperCase");function o(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}s(o,"toArray");function a(M,D){var Z=M;if(D)for(var ge in D)Z[ge]=D[ge];return Z}s(a,"assign");function c(M){var D="[A-Za-z]",Z="[\\x0D]",ge="[0-9]",Se="[\\x22]",lt=e(ge,"[A-Fa-f]"),wt="[\\x0A]",zt="[\\x20]",Zt=r(r("%[EFef]"+lt+"%"+lt+lt+"%"+lt+lt)+"|"+r("%[89A-Fa-f]"+lt+"%"+lt+lt)+"|"+r("%"+lt+lt)),Yt="[\\:\\/\\?\\#\\[\\]\\@]",xt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",mr=e(Yt,xt),si=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Vi=M?"[\\uE000-\\uF8FF]":"[]",En=e(D,ge,"[\\-\\.\\_\\~]",si),so=r(D+e(D,ge,"[\\+\\-\\.]")+"*"),gi=r(r(Zt+"|"+e(En,xt,"[\\:]"))+"*"),jo=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("[1-9]"+ge)+"|"+ge),ca=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),ic=r(ca+"\\."+ca+"\\."+ca+"\\."+ca),So=r(lt+"{1,4}"),Fs=r(r(So+"\\:"+So)+"|"+ic),Gu=r(r(So+"\\:")+"{6}"+Fs),oc=r("\\:\\:"+r(So+"\\:")+"{5}"+Fs),Fm=r(r(So)+"?\\:\\:"+r(So+"\\:")+"{4}"+Fs),ol=r(r(r(So+"\\:")+"{0,1}"+So)+"?\\:\\:"+r(So+"\\:")+"{3}"+Fs),Om=r(r(r(So+"\\:")+"{0,2}"+So)+"?\\:\\:"+r(So+"\\:")+"{2}"+Fs),Qm=r(r(r(So+"\\:")+"{0,3}"+So)+"?\\:\\:"+So+"\\:"+Fs),rx=r(r(r(So+"\\:")+"{0,4}"+So)+"?\\:\\:"+Fs),wa=r(r(r(So+"\\:")+"{0,5}"+So)+"?\\:\\:"+So),su=r(r(r(So+"\\:")+"{0,6}"+So)+"?\\:\\:"),au=r([Gu,oc,Fm,ol,Om,Qm,rx,wa,su].join("|")),Vu=r(r(En+"|"+Zt)+"+"),Um=r(au+"\\%25"+Vu),wl=r(au+r("\\%25|\\%(?!"+lt+"{2})")+Vu),nx=r("[vV]"+lt+"+\\."+e(En,xt,"[\\:]")+"+"),y1=r("\\["+r(wl+"|"+au+"|"+nx)+"\\]"),ix=r(r(Zt+"|"+e(En,xt))+"*"),yf=r(y1+"|"+ic+"(?!"+ix+")|"+ix),Cf=r(ge+"*"),qr=r(r(gi+"@")+"?"+yf+r("\\:"+Cf)+"?"),sc=r(Zt+"|"+e(En,xt,"[\\:\\@]")),qm=r(sc+"*"),Hm=r(sc+"+"),p8=r(r(Zt+"|"+e(En,xt,"[\\@]"))+"+"),Rc=r(r("\\/"+qm)+"*"),FA=r("\\/"+r(Hm+Rc)+"?"),C1=r(p8+Rc),Wp=r(Hm+Rc),OA="(?!"+sc+")",ox=r(Rc+"|"+FA+"|"+C1+"|"+Wp+"|"+OA),hs=r(r(sc+"|"+e("[\\/\\?]",Vi))+"*"),zu=r(r(sc+"|[\\/\\?]")+"*"),QA=r(r("\\/\\/"+qr+Rc)+"|"+FA+"|"+Wp+"|"+OA),W5=r(so+"\\:"+QA+r("\\?"+hs)+"?"+r("\\#"+zu)+"?"),h8=r(r("\\/\\/"+qr+Rc)+"|"+FA+"|"+C1+"|"+OA),zi=r(h8+r("\\?"+hs)+"?"+r("\\#"+zu)+"?"),UA=r(W5+"|"+zi),Wm=r(so+"\\:"+QA+r("\\?"+hs)+"?"),$5="^("+so+")\\:"+r(r("\\/\\/("+r("("+gi+")@")+"?("+yf+")"+r("\\:("+Cf+")")+"?)")+"?("+Rc+"|"+FA+"|"+Wp+"|"+OA+")")+r("\\?("+hs+")")+"?"+r("\\#("+zu+")")+"?$",sx="^(){0}"+r(r("\\/\\/("+r("("+gi+")@")+"?("+yf+")"+r("\\:("+Cf+")")+"?)")+"?("+Rc+"|"+FA+"|"+C1+"|"+OA+")")+r("\\?("+hs+")")+"?"+r("\\#("+zu+")")+"?$",Yu="^("+so+")\\:"+r(r("\\/\\/("+r("("+gi+")@")+"?("+yf+")"+r("\\:("+Cf+")")+"?)")+"?("+Rc+"|"+FA+"|"+Wp+"|"+OA+")")+r("\\?("+hs+")")+"?$",m8="^"+r("\\#("+zu+")")+"?$",g8="^"+r("("+gi+")@")+"?("+yf+")"+r("\\:("+Cf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",D,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",En,xt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",En,xt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",En,xt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",En,xt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",En,xt,"[\\:\\@\\/\\?]",Vi),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",En,xt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",En,xt),"g"),UNRESERVED:new RegExp(En,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",En,mr),"g"),PCT_ENCODED:new RegExp(Zt,"g"),IPV4ADDRESS:new RegExp("^("+ic+")$"),IPV6ADDRESS:new RegExp("^\\[?("+au+")"+r(r("\\%25|\\%(?!"+lt+"{2})")+"("+Vu+")")+"?\\]?$")}}s(c,"buildExps");var l=c(!1),u=c(!0),f=function(){function M(D,Z){var ge=[],Se=!0,lt=!1,wt=void 0;try{for(var zt=D[Symbol.iterator](),Zt;!(Se=(Zt=zt.next()).done)&&(ge.push(Zt.value),!(Z&&ge.length===Z));Se=!0);}catch(Yt){lt=!0,wt=Yt}finally{try{!Se&&zt.return&&zt.return()}finally{if(lt)throw wt}}return ge}return s(M,"sliceIterator"),function(D,Z){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=s(function(M){if(Array.isArray(M)){for(var D=0,Z=Array(M.length);D<M.length;D++)Z[D]=M[D];return Z}else return Array.from(M)},"toConsumableArray"),h=2147483647,m=36,g=1,A=26,y=38,E=700,b=72,_=128,S="-",P=/^xn--/,B=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ee=m-g,V=Math.floor,H=String.fromCharCode;function U(M){throw new RangeError(Y[M])}s(U,"error$1");function X(M,D){for(var Z=[],ge=M.length;ge--;)Z[ge]=D(M[ge]);return Z}s(X,"map");function K(M,D){var Z=M.split("@"),ge="";Z.length>1&&(ge=Z[0]+"@",M=Z[1]),M=M.replace(F,".");var Se=M.split("."),lt=X(Se,D).join(".");return ge+lt}s(K,"mapDomain");function j(M){for(var D=[],Z=0,ge=M.length;Z<ge;){var Se=M.charCodeAt(Z++);if(Se>=55296&&Se<=56319&&Z<ge){var lt=M.charCodeAt(Z++);(lt&64512)==56320?D.push(((Se&1023)<<10)+(lt&1023)+65536):(D.push(Se),Z--)}else D.push(Se)}return D}s(j,"ucs2decode");var W=s(function(D){return String.fromCodePoint.apply(String,p(D))},"ucs2encode"),J=s(function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:m},"basicToDigit"),ie=s(function(D,Z){return D+22+75*(D<26)-((Z!=0)<<5)},"digitToBasic"),ae=s(function(D,Z,ge){var Se=0;for(D=ge?V(D/E):D>>1,D+=V(D/Z);D>ee*A>>1;Se+=m)D=V(D/ee);return V(Se+(ee+1)*D/(D+y))},"adapt"),te=s(function(D){var Z=[],ge=D.length,Se=0,lt=_,wt=b,zt=D.lastIndexOf(S);zt<0&&(zt=0);for(var Zt=0;Zt<zt;++Zt)D.charCodeAt(Zt)>=128&&U("not-basic"),Z.push(D.charCodeAt(Zt));for(var Yt=zt>0?zt+1:0;Yt<ge;){for(var xt=Se,mr=1,si=m;;si+=m){Yt>=ge&&U("invalid-input");var Vi=J(D.charCodeAt(Yt++));(Vi>=m||Vi>V((h-Se)/mr))&&U("overflow"),Se+=Vi*mr;var En=si<=wt?g:si>=wt+A?A:si-wt;if(Vi<En)break;var so=m-En;mr>V(h/so)&&U("overflow"),mr*=so}var gi=Z.length+1;wt=ae(Se-xt,gi,xt==0),V(Se/gi)>h-lt&&U("overflow"),lt+=V(Se/gi),Se%=gi,Z.splice(Se++,0,lt)}return String.fromCodePoint.apply(String,Z)},"decode"),pe=s(function(D){var Z=[];D=j(D);var ge=D.length,Se=_,lt=0,wt=b,zt=!0,Zt=!1,Yt=void 0;try{for(var xt=D[Symbol.iterator](),mr;!(zt=(mr=xt.next()).done);zt=!0){var si=mr.value;si<128&&Z.push(H(si))}}catch(wl){Zt=!0,Yt=wl}finally{try{!zt&&xt.return&&xt.return()}finally{if(Zt)throw Yt}}var Vi=Z.length,En=Vi;for(Vi&&Z.push(S);En<ge;){var so=h,gi=!0,jo=!1,ca=void 0;try{for(var ic=D[Symbol.iterator](),So;!(gi=(So=ic.next()).done);gi=!0){var Fs=So.value;Fs>=Se&&Fs<so&&(so=Fs)}}catch(wl){jo=!0,ca=wl}finally{try{!gi&&ic.return&&ic.return()}finally{if(jo)throw ca}}var Gu=En+1;so-Se>V((h-lt)/Gu)&&U("overflow"),lt+=(so-Se)*Gu,Se=so;var oc=!0,Fm=!1,ol=void 0;try{for(var Om=D[Symbol.iterator](),Qm;!(oc=(Qm=Om.next()).done);oc=!0){var rx=Qm.value;if(rx<Se&&++lt>h&&U("overflow"),rx==Se){for(var wa=lt,su=m;;su+=m){var au=su<=wt?g:su>=wt+A?A:su-wt;if(wa<au)break;var Vu=wa-au,Um=m-au;Z.push(H(ie(au+Vu%Um,0))),wa=V(Vu/Um)}Z.push(H(ie(wa,0))),wt=ae(lt,Gu,En==Vi),lt=0,++En}}}catch(wl){Fm=!0,ol=wl}finally{try{!oc&&Om.return&&Om.return()}finally{if(Fm)throw ol}}++lt,++Se}return Z.join("")},"encode"),Ae=s(function(D){return K(D,function(Z){return P.test(Z)?te(Z.slice(4).toLowerCase()):Z})},"toUnicode"),Oe=s(function(D){return K(D,function(Z){return B.test(Z)?"xn--"+pe(Z):Z})},"toASCII"),Te={version:"2.1.0",ucs2:{decode:j,encode:W},decode:te,encode:pe,toASCII:Oe,toUnicode:Ae},Je={};function Fe(M){var D=M.charCodeAt(0),Z=void 0;return D<16?Z="%0"+D.toString(16).toUpperCase():D<128?Z="%"+D.toString(16).toUpperCase():D<2048?Z="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():Z="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),Z}s(Fe,"pctEncChar");function ct(M){for(var D="",Z=0,ge=M.length;Z<ge;){var Se=parseInt(M.substr(Z+1,2),16);if(Se<128)D+=String.fromCharCode(Se),Z+=3;else if(Se>=194&&Se<224){if(ge-Z>=6){var lt=parseInt(M.substr(Z+4,2),16);D+=String.fromCharCode((Se&31)<<6|lt&63)}else D+=M.substr(Z,6);Z+=6}else if(Se>=224){if(ge-Z>=9){var wt=parseInt(M.substr(Z+4,2),16),zt=parseInt(M.substr(Z+7,2),16);D+=String.fromCharCode((Se&15)<<12|(wt&63)<<6|zt&63)}else D+=M.substr(Z,9);Z+=9}else D+=M.substr(Z,3),Z+=3}return D}s(ct,"pctDecChars");function St(M,D){function Z(ge){var Se=ct(ge);return Se.match(D.UNRESERVED)?Se:ge}return s(Z,"decodeUnreserved"),M.scheme&&(M.scheme=String(M.scheme).replace(D.PCT_ENCODED,Z).toLowerCase().replace(D.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(D.PCT_ENCODED,Z).replace(D.NOT_USERINFO,Fe).replace(D.PCT_ENCODED,i)),M.host!==void 0&&(M.host=String(M.host).replace(D.PCT_ENCODED,Z).toLowerCase().replace(D.NOT_HOST,Fe).replace(D.PCT_ENCODED,i)),M.path!==void 0&&(M.path=String(M.path).replace(D.PCT_ENCODED,Z).replace(M.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,Fe).replace(D.PCT_ENCODED,i)),M.query!==void 0&&(M.query=String(M.query).replace(D.PCT_ENCODED,Z).replace(D.NOT_QUERY,Fe).replace(D.PCT_ENCODED,i)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(D.PCT_ENCODED,Z).replace(D.NOT_FRAGMENT,Fe).replace(D.PCT_ENCODED,i)),M}s(St,"_normalizeComponentEncoding");function vt(M){return M.replace(/^0*(.*)/,"$1")||"0"}s(vt,"_stripLeadingZeros");function mt(M,D){var Z=M.match(D.IPV4ADDRESS)||[],ge=f(Z,2),Se=ge[1];return Se?Se.split(".").map(vt).join("."):M}s(mt,"_normalizeIPv4");function ue(M,D){var Z=M.match(D.IPV6ADDRESS)||[],ge=f(Z,3),Se=ge[1],lt=ge[2];if(Se){for(var wt=Se.toLowerCase().split("::").reverse(),zt=f(wt,2),Zt=zt[0],Yt=zt[1],xt=Yt?Yt.split(":").map(vt):[],mr=Zt.split(":").map(vt),si=D.IPV4ADDRESS.test(mr[mr.length-1]),Vi=si?7:8,En=mr.length-Vi,so=Array(Vi),gi=0;gi<Vi;++gi)so[gi]=xt[gi]||mr[En+gi]||"";si&&(so[Vi-1]=mt(so[Vi-1],D));var jo=so.reduce(function(Gu,oc,Fm){if(!oc||oc==="0"){var ol=Gu[Gu.length-1];ol&&ol.index+ol.length===Fm?ol.length++:Gu.push({index:Fm,length:1})}return Gu},[]),ca=jo.sort(function(Gu,oc){return oc.length-Gu.length})[0],ic=void 0;if(ca&&ca.length>1){var So=so.slice(0,ca.index),Fs=so.slice(ca.index+ca.length);ic=So.join(":")+"::"+Fs.join(":")}else ic=so.join(":");return lt&&(ic+="%"+lt),ic}else return M}s(ue,"_normalizeIPv6");var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ye="".match(/(){0}/)[1]===void 0;function We(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z={},ge=D.iri!==!1?u:l;D.reference==="suffix"&&(M=(D.scheme?D.scheme+":":"")+"//"+M);var Se=M.match(Ue);if(Se){ye?(Z.scheme=Se[1],Z.userinfo=Se[3],Z.host=Se[4],Z.port=parseInt(Se[5],10),Z.path=Se[6]||"",Z.query=Se[7],Z.fragment=Se[8],isNaN(Z.port)&&(Z.port=Se[5])):(Z.scheme=Se[1]||void 0,Z.userinfo=M.indexOf("@")!==-1?Se[3]:void 0,Z.host=M.indexOf("//")!==-1?Se[4]:void 0,Z.port=parseInt(Se[5],10),Z.path=Se[6]||"",Z.query=M.indexOf("?")!==-1?Se[7]:void 0,Z.fragment=M.indexOf("#")!==-1?Se[8]:void 0,isNaN(Z.port)&&(Z.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),Z.host&&(Z.host=ue(mt(Z.host,ge),ge)),Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&!Z.path&&Z.query===void 0?Z.reference="same-document":Z.scheme===void 0?Z.reference="relative":Z.fragment===void 0?Z.reference="absolute":Z.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==Z.reference&&(Z.error=Z.error||"URI is not a "+D.reference+" reference.");var lt=Je[(D.scheme||Z.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!lt||!lt.unicodeSupport)){if(Z.host&&(D.domainHost||lt&&lt.domainHost))try{Z.host=Te.toASCII(Z.host.replace(ge.PCT_ENCODED,ct).toLowerCase())}catch(wt){Z.error=Z.error||"Host's domain name can not be converted to ASCII via punycode: "+wt}St(Z,l)}else St(Z,ge);lt&&lt.parse&&lt.parse(Z,D)}else Z.error=Z.error||"URI can not be parsed.";return Z}s(We,"parse");function se(M,D){var Z=D.iri!==!1?u:l,ge=[];return M.userinfo!==void 0&&(ge.push(M.userinfo),ge.push("@")),M.host!==void 0&&ge.push(ue(mt(String(M.host),Z),Z).replace(Z.IPV6ADDRESS,function(Se,lt,wt){return"["+lt+(wt?"%25"+wt:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(ge.push(":"),ge.push(String(M.port))),ge.length?ge.join(""):void 0}s(se,"_recomposeAuthority");var le=/^\.\.?\//,qe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,xe=/^\/?(?:.|\n)*?(?=\/|$)/;function je(M){for(var D=[];M.length;)if(M.match(le))M=M.replace(le,"");else if(M.match(qe))M=M.replace(qe,"/");else if(M.match(Be))M=M.replace(Be,"/"),D.pop();else if(M==="."||M==="..")M="";else{var Z=M.match(xe);if(Z){var ge=Z[0];M=M.slice(ge.length),D.push(ge)}else throw new Error("Unexpected dot segment condition")}return D.join("")}s(je,"removeDotSegments");function et(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=D.iri?u:l,ge=[],Se=Je[(D.scheme||M.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(M,D),M.host&&!Z.IPV6ADDRESS.test(M.host)){if(D.domainHost||Se&&Se.domainHost)try{M.host=D.iri?Te.toUnicode(M.host):Te.toASCII(M.host.replace(Z.PCT_ENCODED,ct).toLowerCase())}catch(zt){M.error=M.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+zt}}St(M,Z),D.reference!=="suffix"&&M.scheme&&(ge.push(M.scheme),ge.push(":"));var lt=se(M,D);if(lt!==void 0&&(D.reference!=="suffix"&&ge.push("//"),ge.push(lt),M.path&&M.path.charAt(0)!=="/"&&ge.push("/")),M.path!==void 0){var wt=M.path;!D.absolutePath&&(!Se||!Se.absolutePath)&&(wt=je(wt)),lt===void 0&&(wt=wt.replace(/^\/\//,"/%2F")),ge.push(wt)}return M.query!==void 0&&(ge.push("?"),ge.push(M.query)),M.fragment!==void 0&&(ge.push("#"),ge.push(M.fragment)),ge.join("")}s(et,"serialize");function pt(M,D){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ge=arguments[3],Se={};return ge||(M=We(et(M,Z),Z),D=We(et(D,Z),Z)),Z=Z||{},!Z.tolerant&&D.scheme?(Se.scheme=D.scheme,Se.userinfo=D.userinfo,Se.host=D.host,Se.port=D.port,Se.path=je(D.path||""),Se.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(Se.userinfo=D.userinfo,Se.host=D.host,Se.port=D.port,Se.path=je(D.path||""),Se.query=D.query):(D.path?(D.path.charAt(0)==="/"?Se.path=je(D.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?Se.path="/"+D.path:M.path?Se.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+D.path:Se.path=D.path,Se.path=je(Se.path)),Se.query=D.query):(Se.path=M.path,D.query!==void 0?Se.query=D.query:Se.query=M.query),Se.userinfo=M.userinfo,Se.host=M.host,Se.port=M.port),Se.scheme=M.scheme),Se.fragment=D.fragment,Se}s(pt,"resolveComponents");function Lt(M,D,Z){var ge=a({scheme:"null"},Z);return et(pt(We(M,ge),We(D,ge),ge,!0),ge)}s(Lt,"resolve");function Kt(M,D){return typeof M=="string"?M=et(We(M,D),D):n(M)==="object"&&(M=We(et(M,D),D)),M}s(Kt,"normalize");function Ft(M,D,Z){return typeof M=="string"?M=et(We(M,Z),Z):n(M)==="object"&&(M=et(M,Z)),typeof D=="string"?D=et(We(D,Z),Z):n(D)==="object"&&(D=et(D,Z)),M===D}s(Ft,"equal");function Qr(M,D){return M&&M.toString().replace(!D||!D.iri?l.ESCAPE:u.ESCAPE,Fe)}s(Qr,"escapeComponent");function Sr(M,D){return M&&M.toString().replace(!D||!D.iri?l.PCT_ENCODED:u.PCT_ENCODED,ct)}s(Sr,"unescapeComponent");var rn={scheme:"http",domainHost:!0,parse:s(function(D,Z){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},"parse"),serialize:s(function(D,Z){var ge=String(D.scheme).toLowerCase()==="https";return(D.port===(ge?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D},"serialize")},ve={scheme:"https",domainHost:rn.domainHost,parse:rn.parse,serialize:rn.serialize};function Ge(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}s(Ge,"isSecure");var ft={scheme:"ws",domainHost:!0,parse:s(function(D,Z){var ge=D;return ge.secure=Ge(ge),ge.resourceName=(ge.path||"/")+(ge.query?"?"+ge.query:""),ge.path=void 0,ge.query=void 0,ge},"parse"),serialize:s(function(D,Z){if((D.port===(Ge(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var ge=D.resourceName.split("?"),Se=f(ge,2),lt=Se[0],wt=Se[1];D.path=lt&&lt!=="/"?lt:void 0,D.query=wt,D.resourceName=void 0}return D.fragment=void 0,D},"serialize")},It={scheme:"wss",domainHost:ft.domainHost,parse:ft.parse,serialize:ft.serialize},rr={},Xt=!0,xr="[A-Za-z0-9\\-\\.\\_\\~"+(Xt?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",ar="[0-9A-Fa-f]",er=r(r("%[EFef]"+ar+"%"+ar+ar+"%"+ar+ar)+"|"+r("%[89A-Fa-f]"+ar+"%"+ar+ar)+"|"+r("%"+ar+ar)),sr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",tr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",kr=e(tr,'[\\"\\\\]'),Ur="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Jr=new RegExp(xr,"g"),hn=new RegExp(er,"g"),Zn=new RegExp(e("[^]",sr,"[\\.]",'[\\"]',kr),"g"),bn=new RegExp(e("[^]",xr,Ur),"g"),Jn=bn;function Xr(M){var D=ct(M);return D.match(Jr)?D:M}s(Xr,"decodeUnreserved");var Gn={scheme:"mailto",parse:s(function(D,Z){var ge=D,Se=ge.to=ge.path?ge.path.split(","):[];if(ge.path=void 0,ge.query){for(var lt=!1,wt={},zt=ge.query.split("&"),Zt=0,Yt=zt.length;Zt<Yt;++Zt){var xt=zt[Zt].split("=");switch(xt[0]){case"to":for(var mr=xt[1].split(","),si=0,Vi=mr.length;si<Vi;++si)Se.push(mr[si]);break;case"subject":ge.subject=Sr(xt[1],Z);break;case"body":ge.body=Sr(xt[1],Z);break;default:lt=!0,wt[Sr(xt[0],Z)]=Sr(xt[1],Z);break}}lt&&(ge.headers=wt)}ge.query=void 0;for(var En=0,so=Se.length;En<so;++En){var gi=Se[En].split("@");if(gi[0]=Sr(gi[0]),Z.unicodeSupport)gi[1]=Sr(gi[1],Z).toLowerCase();else try{gi[1]=Te.toASCII(Sr(gi[1],Z).toLowerCase())}catch(jo){ge.error=ge.error||"Email address's domain name can not be converted to ASCII via punycode: "+jo}Se[En]=gi.join("@")}return ge},"parse$$1"),serialize:s(function(D,Z){var ge=D,Se=o(D.to);if(Se){for(var lt=0,wt=Se.length;lt<wt;++lt){var zt=String(Se[lt]),Zt=zt.lastIndexOf("@"),Yt=zt.slice(0,Zt).replace(hn,Xr).replace(hn,i).replace(Zn,Fe),xt=zt.slice(Zt+1);try{xt=Z.iri?Te.toUnicode(xt):Te.toASCII(Sr(xt,Z).toLowerCase())}catch(En){ge.error=ge.error||"Email address's domain name can not be converted to "+(Z.iri?"Unicode":"ASCII")+" via punycode: "+En}Se[lt]=Yt+"@"+xt}ge.path=Se.join(",")}var mr=D.headers=D.headers||{};D.subject&&(mr.subject=D.subject),D.body&&(mr.body=D.body);var si=[];for(var Vi in mr)mr[Vi]!==rr[Vi]&&si.push(Vi.replace(hn,Xr).replace(hn,i).replace(bn,Fe)+"="+mr[Vi].replace(hn,Xr).replace(hn,i).replace(Jn,Fe));return si.length&&(ge.query=si.join("&")),ge},"serialize$$1")},Pe=/^([^\:]+)\:(.*)/,z={scheme:"urn",parse:s(function(D,Z){var ge=D.path&&D.path.match(Pe),Se=D;if(ge){var lt=Z.scheme||Se.scheme||"urn",wt=ge[1].toLowerCase(),zt=ge[2],Zt=lt+":"+(Z.nid||wt),Yt=Je[Zt];Se.nid=wt,Se.nss=zt,Se.path=void 0,Yt&&(Se=Yt.parse(Se,Z))}else Se.error=Se.error||"URN can not be parsed.";return Se},"parse$$1"),serialize:s(function(D,Z){var ge=Z.scheme||D.scheme||"urn",Se=D.nid,lt=ge+":"+(Z.nid||Se),wt=Je[lt];wt&&(D=wt.serialize(D,Z));var zt=D,Zt=D.nss;return zt.path=(Se||Z.nid)+":"+Zt,zt},"serialize$$1")},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:s(function(D,Z){var ge=D;return ge.uuid=ge.nss,ge.nss=void 0,!Z.tolerant&&(!ge.uuid||!ge.uuid.match(Ce))&&(ge.error=ge.error||"UUID is not valid."),ge},"parse"),serialize:s(function(D,Z){var ge=D;return ge.nss=(D.uuid||"").toLowerCase(),ge},"serialize")};Je[rn.scheme]=rn,Je[ve.scheme]=ve,Je[ft.scheme]=ft,Je[It.scheme]=It,Je[Gn.scheme]=Gn,Je[z.scheme]=z,Je[Ie.scheme]=Ie,t.SCHEMES=Je,t.pctEncChar=Fe,t.pctDecChars=ct,t.parse=We,t.removeDotSegments=je,t.serialize=et,t.resolveComponents=pt,t.resolve=Lt,t.normalize=Kt,t.equal=Ft,t.escapeComponent=Qr,t.unescapeComponent=Sr,Object.defineProperty(t,"__esModule",{value:!0})})});var Woe=q((ypo,ght)=>{"use strict";d();ght.exports=s(function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r},"equal")});var yht=q((Epo,Aht)=>{"use strict";d();Aht.exports=s(function(e){for(var r=0,n=e.length,i=0,o;i<n;)r++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return r},"ucs2length")});var M5=q((Ipo,Eht)=>{"use strict";d();Eht.exports={copy:uvr,checkDataType:uSe,checkDataTypes:dvr,coerceToTypes:fvr,toHash:fSe,getProperty:pSe,escapeQuotes:hSe,equal:Woe(),ucs2length:yht(),varOccurences:mvr,varReplace:gvr,schemaHasRules:Avr,schemaHasRulesExcept:yvr,schemaUnknownRules:Cvr,toQuotedString:dSe,getPathExpr:vvr,getPath:Evr,getData:Ivr,unescapeFragment:Tvr,unescapeJsonPointer:gSe,escapeFragment:wvr,escapeJsonPointer:mSe};function uvr(t,e){e=e||{};for(var r in t)e[r]=t[r];return e}s(uvr,"copy");function uSe(t,e,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",a=n?"!":"",c=n?"":"!";switch(t){case"null":return e+i+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+o+"typeof "+e+i+'"object"'+o+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+c+"("+e+" % 1)"+o+e+i+e+(r?o+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+t+'"'+(r?o+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+t+'"'}}s(uSe,"checkDataType");function dvr(t,e,r){switch(t.length){case 1:return uSe(t[0],e,r,!0);default:var n="",i=fSe(t);i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)n+=(n?" && ":"")+uSe(o,e,r,!0);return n}}s(dvr,"checkDataTypes");var Cht=fSe(["string","number","integer","boolean","null"]);function fvr(t,e){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=e[n];(Cht[i]||t==="array"&&i==="array")&&(r[r.length]=i)}if(r.length)return r}else{if(Cht[e])return[e];if(t==="array"&&e==="array")return["array"]}}s(fvr,"coerceToTypes");function fSe(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return e}s(fSe,"toHash");var pvr=/^[a-z$_][a-z$_0-9]*$/i,hvr=/'|\\/g;function pSe(t){return typeof t=="number"?"["+t+"]":pvr.test(t)?"."+t:"['"+hSe(t)+"']"}s(pSe,"getProperty");function hSe(t){return t.replace(hvr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}s(hSe,"escapeQuotes");function mvr(t,e){e+="[^0-9]";var r=t.match(new RegExp(e,"g"));return r?r.length:0}s(mvr,"varOccurences");function gvr(t,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),r+"$1")}s(gvr,"varReplace");function Avr(t,e){if(typeof t=="boolean")return!t;for(var r in t)if(e[r])return!0}s(Avr,"schemaHasRules");function yvr(t,e,r){if(typeof t=="boolean")return!t&&r!="not";for(var n in t)if(n!=r&&e[n])return!0}s(yvr,"schemaHasRulesExcept");function Cvr(t,e){if(typeof t!="boolean"){for(var r in t)if(!e[r])return r}}s(Cvr,"schemaUnknownRules");function dSe(t){return"'"+hSe(t)+"'"}s(dSe,"toQuotedString");function vvr(t,e,r,n){var i=r?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return vht(t,i)}s(vvr,"getPathExpr");function Evr(t,e,r){var n=dSe(r?"/"+mSe(e):pSe(e));return vht(t,n)}s(Evr,"getPath");var xvr=/^\/(?:[^~]|~0|~1)*$/,bvr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ivr(t,e,r){var n,i,o,a;if(t==="")return"rootData";if(t[0]=="/"){if(!xvr.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,o="rootData"}else{if(a=t.match(bvr),!a)throw new Error("Invalid JSON-pointer: "+t);if(n=+a[1],i=a[2],i=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return r[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!i)return o}for(var c=o,l=i.split("/"),u=0;u<l.length;u++){var f=l[u];f&&(o+=pSe(gSe(f)),c+=" && "+o)}return c}s(Ivr,"getData");function vht(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}s(vht,"joinPaths");function Tvr(t){return gSe(decodeURIComponent(t))}s(Tvr,"unescapeFragment");function wvr(t){return encodeURIComponent(mSe(t))}s(wvr,"escapeFragment");function mSe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(mSe,"escapeJsonPointer");function gSe(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}s(gSe,"unescapeJsonPointer")});var ASe=q((_po,xht)=>{"use strict";d();var _vr=M5();xht.exports=Svr;function Svr(t){_vr.copy(t,this)}s(Svr,"SchemaObject")});var Iht=q((kpo,bht)=>{"use strict";d();var Dw=bht.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};$oe(e,n,i,t,"",t)};Dw.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Dw.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Dw.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Dw.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function $oe(t,e,r,n,i,o,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,o,a,c,l,u);for(var f in n){var p=n[f];if(Array.isArray(p)){if(f in Dw.arrayKeywords)for(var h=0;h<p.length;h++)$oe(t,e,r,p[h],i+"/"+f+"/"+h,o,i,f,n,h)}else if(f in Dw.propsKeywords){if(p&&typeof p=="object")for(var m in p)$oe(t,e,r,p[m],i+"/"+f+"/"+Rvr(m),o,i,f,n,m)}else(f in Dw.keywords||t.allKeys&&!(f in Dw.skipKeywords))&&$oe(t,e,r,p,i+"/"+f,o,i,f,n)}r(n,i,o,a,c,l,u)}}s($oe,"_traverse");function Rvr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(Rvr,"escapeJsonPtr")});var Koe=q((Bpo,Sht)=>{"use strict";d();var uU=mht(),Tht=Woe(),zoe=M5(),joe=ASe(),kvr=Iht();Sht.exports=Nw;Nw.normalizeId=Bw;Nw.fullPath=Goe;Nw.url=Voe;Nw.ids=Lvr;Nw.inlineRef=ySe;Nw.schema=Yoe;function Nw(t,e,r){var n=this._refs[r];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return Nw.call(this,t,e,n);if(n=n||this._schemas[r],n instanceof joe)return ySe(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i=Yoe.call(this,e,r),o,a,c;return i&&(o=i.schema,e=i.root,c=i.baseId),o instanceof joe?a=o.validate||t.call(this,o.schema,e,void 0,c):o!==void 0&&(a=ySe(o,this._opts.inlineRefs)?o:t.call(this,o,e,void 0,c)),a}s(Nw,"resolve");function Yoe(t,e){var r=uU.parse(e),n=_ht(r),i=Goe(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==i){var o=Bw(n),a=this._refs[o];if(typeof a=="string")return Pvr.call(this,t,a,r);if(a instanceof joe)a.validate||this._compile(a),t=a;else if(a=this._schemas[o],a instanceof joe){if(a.validate||this._compile(a),o==Bw(e))return{schema:a,root:t,baseId:i};t=a}else return;if(!t.schema)return;i=Goe(this._getId(t.schema))}return wht.call(this,r,i,t.schema,t)}s(Yoe,"resolveSchema");function Pvr(t,e,r){var n=Yoe.call(this,t,e);if(n){var i=n.schema,o=n.baseId;t=n.root;var a=this._getId(i);return a&&(o=Voe(o,a)),wht.call(this,r,o,i,t)}}s(Pvr,"resolveRecursive");var Dvr=zoe.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function wht(t,e,r,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=zoe.unescapeFragment(a),r=r[a],r===void 0)break;var c;if(!Dvr[a]&&(c=this._getId(r),c&&(e=Voe(e,c)),r.$ref)){var l=Voe(e,r.$ref),u=Yoe.call(this,n,l);u&&(r=u.schema,n=u.root,e=u.baseId)}}}if(r!==void 0&&r!==n.schema)return{schema:r,root:n,baseId:e}}}s(wht,"getJsonPointer");var Bvr=zoe.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function ySe(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return CSe(t);if(e)return vSe(t)<=e}s(ySe,"inlineRef");function CSe(t){var e;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(e=t[r],typeof e=="object"&&!CSe(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!CSe(e)))return!1;return!0}s(CSe,"checkNoRef");function vSe(t){var e=0,r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r=t[n],typeof r=="object"&&(e+=vSe(r)),e==1/0)return 1/0}else for(var i in t){if(i=="$ref")return 1/0;if(Bvr[i])e++;else if(r=t[i],typeof r=="object"&&(e+=vSe(r)+1),e==1/0)return 1/0}return e}s(vSe,"countKeys");function Goe(t,e){e!==!1&&(t=Bw(t));var r=uU.parse(t);return _ht(r)}s(Goe,"getFullPath");function _ht(t){return uU.serialize(t).split("#")[0]+"#"}s(_ht,"_getFullPath");var Nvr=/#\/?$/;function Bw(t){return t?t.replace(Nvr,""):""}s(Bw,"normalizeId");function Voe(t,e){return e=Bw(e),uU.resolve(t,e)}s(Voe,"resolveUrl");function Lvr(t){var e=Bw(this._getId(t)),r={"":e},n={"":Goe(e,!1)},i={},o=this;return kvr(t,{allKeys:!0},function(a,c,l,u,f,p,h){if(c!==""){var m=o._getId(a),g=r[u],A=n[u]+"/"+f;if(h!==void 0&&(A+="/"+(typeof h=="number"?h:zoe.escapeFragment(h))),typeof m=="string"){m=g=Bw(g?uU.resolve(g,m):m);var y=o._refs[m];if(typeof y=="string"&&(y=o._refs[y]),y&&y.schema){if(!Tht(a,y.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=Bw(A))if(m[0]=="#"){if(i[m]&&!Tht(a,i[m]))throw new Error('id "'+m+'" resolves to more than one schema');i[m]=a}else o._refs[m]=A}r[c]=g,n[c]=A}}),i}s(Lvr,"resolveIds")});var Joe=q((Mpo,kht)=>{"use strict";d();var ESe=Koe();kht.exports={Validation:Rht(Mvr),MissingRef:Rht(xSe)};function Mvr(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}s(Mvr,"ValidationError");xSe.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function xSe(t,e,r){this.message=r||xSe.message(t,e),this.missingRef=ESe.url(t,e),this.missingSchema=ESe.normalizeId(ESe.fullPath(this.missingRef))}s(xSe,"MissingRefError");function Rht(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}s(Rht,"errorSubclass")});var bSe=q((Qpo,Pht)=>{"use strict";d();Pht.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(o){return function(a){return function(c,l){var u={key:c,value:a[c]},f={key:l,value:a[l]};return o(u,f)}}}(e.cmp),i=[];return s(function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var c,l;if(Array.isArray(a)){for(l="[",c=0;c<a.length;c++)c&&(l+=","),l+=o(a[c])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,f=Object.keys(a).sort(n&&n(a));for(l="",c=0;c<f.length;c++){var p=f[c],h=o(a[p]);h&&(l&&(l+=","),l+=JSON.stringify(p)+":"+h)}return i.splice(u,1),"{"+l+"}"}},"stringify")(t)}});var ISe=q((Hpo,Dht)=>{"use strict";d();Dht.exports=s(function(e,r,n){var i="",o=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var u="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var r="false schema",f=e.level,p=e.dataLevel,h=e.schema[r],m=e.schemaPath+e.util.getProperty(r),g=e.errSchemaPath+"/"+r,P=!e.opts.allErrors,Y,A="data"+(p||""),S="valid"+f;if(e.schema===!1){e.isTop?P=!0:i+=" var "+S+" = false; ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+S+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var b=e.isTop,f=e.level=0,p=e.dataLevel=0,A="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,p=e.dataLevel,A="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+f+" = errors;"}var S="valid"+f,P=!e.opts.allErrors,B="",F="",Y,ee=e.schema.type,V=Array.isArray(ee);if(ee&&e.opts.nullable&&e.schema.nullable===!0&&(V?ee.indexOf("null")==-1&&(ee=ee.concat("null")):ee!="null"&&(ee=[ee,"null"],V=!0)),V&&ee.length==1&&(ee=ee[0],V=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),ee){if(e.opts.coerceTypes)var H=e.util.coerceToTypes(e.opts.coerceTypes,ee);var U=e.RULES.types[ee];if(H||V||U===!0||U&&!xe(U)){var m=e.schemaPath+".type",g=e.errSchemaPath+"/type",m=e.schemaPath+".type",g=e.errSchemaPath+"/type",X=V?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[X](ee,A,e.opts.strictNumbers,!0)+") { ",H){var K="dataType"+f,j="coerced"+f;i+=" var "+K+" = typeof "+A+"; var "+j+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+K+" == 'object' && Array.isArray("+A+") && "+A+".length == 1) { "+A+" = "+A+"[0]; "+K+" = typeof "+A+"; if ("+e.util.checkDataType(e.schema.type,A,e.opts.strictNumbers)+") "+j+" = "+A+"; } "),i+=" if ("+j+" !== undefined) ; ";var W=H;if(W)for(var J,ie=-1,ae=W.length-1;ie<ae;)J=W[ie+=1],J=="string"?i+=" else if ("+K+" == 'number' || "+K+" == 'boolean') "+j+" = '' + "+A+"; else if ("+A+" === null) "+j+" = ''; ":J=="number"||J=="integer"?(i+=" else if ("+K+" == 'boolean' || "+A+" === null || ("+K+" == 'string' && "+A+" && "+A+" == +"+A+" ",J=="integer"&&(i+=" && !("+A+" % 1)"),i+=")) "+j+" = +"+A+"; "):J=="boolean"?i+=" else if ("+A+" === 'false' || "+A+" === 0 || "+A+" === null) "+j+" = false; else if ("+A+" === 'true' || "+A+" === 1) "+j+" = true; ":J=="null"?i+=" else if ("+A+" === '' || "+A+" === 0 || "+A+" === false) "+j+" = null; ":e.opts.coerceTypes=="array"&&J=="array"&&(i+=" else if ("+K+" == 'string' || "+K+" == 'number' || "+K+" == 'boolean' || "+A+" == null) "+j+" = ["+A+"]; ");i+=" else {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+j+" !== undefined) {  ";var te=p?"data"+(p-1||""):"parentData",pe=p?e.dataPathArr[p]:"parentDataProperty";i+=" "+A+" = "+j+"; ",p||(i+="if ("+te+" !== undefined)"),i+=" "+te+"["+pe+"] = "+j+"; } "}else{var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!a)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",P&&(i+=" } if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",F+="}");else{var Ae=e.RULES;if(Ae){for(var U,Oe=-1,Te=Ae.length-1;Oe<Te;)if(U=Ae[Oe+=1],xe(U)){if(U.type&&(i+=" if ("+e.util.checkDataType(U.type,A,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(U.type=="object"&&e.schema.properties){var h=e.schema.properties,Je=Object.keys(h),Fe=Je;if(Fe)for(var ct,St=-1,vt=Fe.length-1;St<vt;){ct=Fe[St+=1];var mt=h[ct];if(mt.default!==void 0){var ue=A+e.util.getProperty(ct);if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(mt.default)+" ":i+=" "+JSON.stringify(mt.default)+" ",i+="; "}}}else if(U.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var mt,ie=-1,ye=Ue.length-1;ie<ye;)if(mt=Ue[ie+=1],mt.default!==void 0){var ue=A+"["+ie+"]";if(e.compositeRule){if(e.opts.strictDefaults){var _="default is ignored for: "+ue;if(e.opts.strictDefaults==="log")e.logger.warn(_);else throw new Error(_)}}else i+=" if ("+ue+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+ue+" === null || "+ue+" === '' "),i+=" ) "+ue+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(mt.default)+" ":i+=" "+JSON.stringify(mt.default)+" ",i+="; "}}}}var We=U.rules;if(We){for(var se,le=-1,qe=We.length-1;le<qe;)if(se=We[le+=1],je(se)){var Be=se.code(e,se.keyword,U.type);Be&&(i+=" "+Be+" ",P&&(B+="}"))}}if(P&&(i+=" "+B+" ",B=""),U.type&&(i+=" } ",ee&&ee===U.type&&!H)){i+=" else { ";var m=e.schemaPath+".type",g=e.errSchemaPath+"/type",y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(Y||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(g)+" , params: { type: '",V?i+=""+ee.join(","):i+=""+ee,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",V?i+=""+ee.join(","):i+=""+ee,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+A+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}P&&(i+=" if (errors === ",b?i+="0":i+="errs_"+f,i+=") { ",F+="}")}}}P&&(i+=" "+F+" "),b?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+S+" = errors === errs_"+f+";";function xe(pt){for(var Lt=pt.rules,Kt=0;Kt<Lt.length;Kt++)if(je(Lt[Kt]))return!0}s(xe,"$shouldUseGroup");function je(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&et(pt)}s(je,"$shouldUseRule");function et(pt){for(var Lt=pt.implements,Kt=0;Kt<Lt.length;Kt++)if(e.schema[Lt[Kt]]!==void 0)return!0}return s(et,"$ruleImplementsSomeKeyword"),i},"generate_validate")});var Fht=q((jpo,Mht)=>{"use strict";d();var Xoe=Koe(),ese=M5(),Nht=Joe(),Fvr=bSe(),Bht=ISe(),Ovr=ese.ucs2length,Qvr=Woe(),Uvr=Nht.Validation;Mht.exports=TSe;function TSe(t,e,r,n){var i=this,o=this._opts,a=[void 0],c={},l=[],u={},f=[],p={},h=[];e=e||{schema:t,refVal:a,refs:c};var m=qvr.call(this,t,e,n),g=this._compilations[m.index];if(m.compiling)return g.callValidate=_;var A=this._formats,y=this.RULES;try{var E=S(t,e,r,n);g.validate=E;var b=g.callValidate;return b&&(b.schema=E.schema,b.errors=null,b.refs=E.refs,b.refVal=E.refVal,b.root=E.root,b.$async=E.$async,o.sourceCode&&(b.source=E.source)),E}finally{Hvr.call(this,t,e,n)}function _(){var X=g.validate,K=X.apply(this,arguments);return _.errors=X.errors,K}s(_,"callValidate");function S(X,K,j,W){var J=!K||K&&K.schema==X;if(K.schema!=e.schema)return TSe.call(i,X,K,j,W);var ie=X.$async===!0,ae=Bht({isTop:!0,schema:X,isRoot:J,baseId:W,root:K,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Nht.MissingRef,RULES:y,validate:Bht,util:ese,resolve:Xoe,resolveRef:P,usePattern:V,useDefault:H,useCustomRule:U,opts:o,formats:A,logger:i.logger,self:i});ae=Zoe(a,jvr)+Zoe(l,Wvr)+Zoe(f,$vr)+Zoe(h,Gvr)+ae,o.processCode&&(ae=o.processCode(ae,X));var te;try{var pe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ae);te=pe(i,y,A,e,a,f,h,Qvr,Ovr,Uvr),a[0]=te}catch(Ae){throw i.logger.error("Error compiling schema, function code:",ae),Ae}return te.schema=X,te.errors=null,te.refs=c,te.refVal=a,te.root=J?te:K,ie&&(te.$async=!0),o.sourceCode===!0&&(te.source={code:ae,patterns:l,defaults:f}),te}s(S,"localCompile");function P(X,K,j){K=Xoe.url(X,K);var W=c[K],J,ie;if(W!==void 0)return J=a[W],ie="refVal["+W+"]",ee(J,ie);if(!j&&e.refs){var ae=e.refs[K];if(ae!==void 0)return J=e.refVal[ae],ie=B(K,J),ee(J,ie)}ie=B(K);var te=Xoe.call(i,S,e,K);if(te===void 0){var pe=r&&r[K];pe&&(te=Xoe.inlineRef(pe,o.inlineRefs)?pe:TSe.call(i,pe,e,r,X))}if(te===void 0)F(K);else return Y(K,te),ee(te,ie)}s(P,"resolveRef");function B(X,K){var j=a.length;return a[j]=K,c[X]=j,"refVal"+j}s(B,"addLocalRef");function F(X){delete c[X]}s(F,"removeLocalRef");function Y(X,K){var j=c[X];a[j]=K}s(Y,"replaceLocalRef");function ee(X,K){return typeof X=="object"||typeof X=="boolean"?{code:K,schema:X,inline:!0}:{code:K,$async:X&&!!X.$async}}s(ee,"resolvedRef");function V(X){var K=u[X];return K===void 0&&(K=u[X]=l.length,l[K]=X),"pattern"+K}s(V,"usePattern");function H(X){switch(typeof X){case"boolean":case"number":return""+X;case"string":return ese.toQuotedString(X);case"object":if(X===null)return"null";var K=Fvr(X),j=p[K];return j===void 0&&(j=p[K]=f.length,f[j]=X),"default"+j}}s(H,"useDefault");function U(X,K,j,W){if(i._opts.validateSchema!==!1){var J=X.definition.dependencies;if(J&&!J.every(function(Fe){return Object.prototype.hasOwnProperty.call(j,Fe)}))throw new Error("parent schema must have all required keywords: "+J.join(","));var ie=X.definition.validateSchema;if(ie){var ae=ie(K);if(!ae){var te="keyword schema is invalid: "+i.errorsText(ie.errors);if(i._opts.validateSchema=="log")i.logger.error(te);else throw new Error(te)}}}var pe=X.definition.compile,Ae=X.definition.inline,Oe=X.definition.macro,Te;if(pe)Te=pe.call(i,K,j,W);else if(Oe)Te=Oe.call(i,K,j,W),o.validateSchema!==!1&&i.validateSchema(Te,!0);else if(Ae)Te=Ae.call(i,W,X.keyword,K,j);else if(Te=X.definition.validate,!Te)return;if(Te===void 0)throw new Error('custom keyword "'+X.keyword+'"failed to compile');var Je=h.length;return h[Je]=Te,{code:"customRule"+Je,validate:Te}}s(U,"useCustomRule")}s(TSe,"compile");function qvr(t,e,r){var n=Lht.call(this,t,e,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:r},{index:n,compiling:!1})}s(qvr,"checkCompiling");function Hvr(t,e,r){var n=Lht.call(this,t,e,r);n>=0&&this._compilations.splice(n,1)}s(Hvr,"endCompiling");function Lht(t,e,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==t&&i.root==e&&i.baseId==r)return n}return-1}s(Lht,"compIndex");function Wvr(t,e){return"var pattern"+t+" = new RegExp("+ese.toQuotedString(e[t])+");"}s(Wvr,"patternCode");function $vr(t){return"var default"+t+" = defaults["+t+"];"}s($vr,"defaultCode");function jvr(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}s(jvr,"refValCode");function Gvr(t){return"var customRule"+t+" = customRules["+t+"];"}s(Gvr,"customRuleCode");function Zoe(t,e){if(!t.length)return"";for(var r="",n=0;n<t.length;n++)r+=e(n,t);return r}s(Zoe,"vars")});var Qht=q((zpo,Oht)=>{"use strict";d();var tse=Oht.exports=s(function(){this._cache={}},"Cache");tse.prototype.put=s(function(e,r){this._cache[e]=r},"Cache_put");tse.prototype.get=s(function(e){return this._cache[e]},"Cache_get");tse.prototype.del=s(function(e){delete this._cache[e]},"Cache_del");tse.prototype.clear=s(function(){this._cache={}},"Cache_clear")});var Jht=q((Jpo,Kht)=>{"use strict";d();var Vvr=M5(),zvr=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Yvr=[0,31,28,31,30,31,30,31,31,30,31,30,31],Kvr=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Uht=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Jvr=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Xvr=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,qht=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Hht=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Wht=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,$ht=/^(?:\/(?:[^~/]|~0|~1)*)*$/,jht=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ght=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Kht.exports=rse;function rse(t){return t=t=="full"?"full":"fast",Vvr.copy(rse[t])}s(rse,"formats");rse.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":qht,url:Hht,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Uht,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Yht,uuid:Wht,"json-pointer":$ht,"json-pointer-uri-fragment":jht,"relative-json-pointer":Ght};rse.full={date:Vht,time:zht,"date-time":tEr,uri:nEr,"uri-reference":Xvr,"uri-template":qht,url:Hht,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Uht,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Yht,uuid:Wht,"json-pointer":$ht,"json-pointer-uri-fragment":jht,"relative-json-pointer":Ght};function Zvr(t){return t%4===0&&(t%100!==0||t%400===0)}s(Zvr,"isLeapYear");function Vht(t){var e=t.match(zvr);if(!e)return!1;var r=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&Zvr(r)?29:Yvr[n])}s(Vht,"date");function zht(t,e){var r=t.match(Kvr);if(!r)return!1;var n=r[1],i=r[2],o=r[3],a=r[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!e||a)}s(zht,"time");var eEr=/t|\s/i;function tEr(t){var e=t.split(eEr);return e.length==2&&Vht(e[0])&&zht(e[1],!0)}s(tEr,"date_time");var rEr=/\/|:/;function nEr(t){return rEr.test(t)&&Jvr.test(t)}s(nEr,"uri");var iEr=/[^\\]\\Z/;function Yht(t){if(iEr.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}s(Yht,"regex")});var Zht=q((eho,Xht)=>{"use strict";d();Xht.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,f="data"+(a||""),p="valid"+o,h,m;if(c=="#"||c=="#/")e.isRoot?(h=e.async,m="validate"):(h=e.root.schema.$async===!0,m="root.refVal[0]");else{var g=e.resolveRef(e.baseId,c,e.isRoot);if(g===void 0){var A=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(A);var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(A),u&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,A)}else if(g.inline){var b=e.util.copy(e);b.level++;var _="valid"+b.level;b.schema=g.schema,b.schemaPath="",b.errSchemaPath=c;var S=e.validate(b).replace(/validate\.schema/g,g.code);i+=" "+S+" ",u&&(i+=" if ("+_+") { ")}else h=g.$async===!0||e.async&&g.$async!==!1,m=g.code}if(m){var y=y||[];y.push(i),i="",e.opts.passContext?i+=" "+m+".call(this, ":i+=" "+m+"( ",i+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var P=a?"data"+(a-1||""):"parentData",B=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+P+" , "+B+", rootData)  ";var F=i;if(i=y.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+F+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+F+") { if (vErrors === null) vErrors = "+m+".errors; else vErrors = vErrors.concat("+m+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i},"generate_ref")});var tmt=q((nho,emt)=>{"use strict";d();emt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,l=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var p="valid"+u.level,h=u.baseId,m=!0,g=o;if(g)for(var A,y=-1,E=g.length-1;y<E;)A=g[y+=1],(e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all))&&(m=!1,u.schema=A,u.schemaPath=a+"["+y+"]",u.errSchemaPath=c+"/"+y,i+="  "+e.validate(u)+" ",u.baseId=h,l&&(i+=" if ("+p+") { ",f+="}"));return l&&(m?i+=" if (true) { ":i+=" "+f.slice(0,-1)+" "),i},"generate_allOf")});var nmt=q((sho,rmt)=>{"use strict";d();rmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=c.every(function(Y){return e.opts.strictKeywords?typeof Y=="object"&&Object.keys(Y).length>0||Y===!1:e.util.schemaHasRules(Y,e.RULES.all)});if(E){var b=g.baseId;i+=" var "+m+" = errors; var "+h+" = false;  ";var _=e.compositeRule;e.compositeRule=g.compositeRule=!0;var S=c;if(S)for(var P,B=-1,F=S.length-1;B<F;)P=S[B+=1],g.schema=P,g.schemaPath=l+"["+B+"]",g.errSchemaPath=u+"/"+B,i+="  "+e.validate(g)+" ",g.baseId=b,i+=" "+h+" = "+h+" || "+y+"; if (!"+h+") { ",A+="}";e.compositeRule=g.compositeRule=_,i+=" "+A+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else f&&(i+=" if (true) { ");return i},"generate_anyOf")});var omt=q((lho,imt)=>{"use strict";d();imt.exports=s(function(e,r,n){var i=" ",o=e.schema[r],a=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),i},"generate_comment")});var amt=q((fho,smt)=>{"use strict";d();smt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m=e.opts.$data&&c&&c.$data,g;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,m||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+h+" = equal("+p+", schema"+o+"); if (!"+h+") {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_const")});var lmt=q((mho,cmt)=>{"use strict";d();cmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,_="data"+b,S=e.baseId,P=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(i+="var "+m+" = errors;var "+h+";",P){var B=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+y+" = false; for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var F=p+"["+E+"]";g.dataPathArr[b]=E;var Y=e.validate(g);g.baseId=S,e.util.varOccurences(Y,_)<2?i+=" "+e.util.varReplace(Y,_,F)+" ":i+=" var "+_+" = "+F+"; "+Y+" ",i+=" if ("+y+") break; }  ",e.compositeRule=g.compositeRule=B,i+=" "+A+" if (!"+y+") {"}else i+=" if ("+p+".length == 0) {";var ee=ee||[];ee.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var V=i;return i=ee.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",P&&(i+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},"generate_contains")});var dmt=q((yho,umt)=>{"use strict";d();umt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="errs__"+o,m=e.util.copy(e),g="";m.level++;var A="valid"+m.level,y={},E={},b=e.opts.ownProperties;for(B in c)if(B!="__proto__"){var _=c[B],S=Array.isArray(_)?E:y;S[B]=_}i+="var "+h+" = errors;";var P=e.errorPath;i+="var missing"+o+";";for(var B in E)if(S=E[B],S.length){if(i+=" if ( "+p+e.util.getProperty(B)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(B)+"') "),f){i+=" && ( ";var F=S;if(F)for(var Y,ee=-1,V=F.length-1;ee<V;){Y=F[ee+=1],ee&&(i+=" || ");var H=e.util.getProperty(Y),U=p+H;i+=" ( ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?Y:H)+") ) "}i+=")) {  ";var X="missing"+o,K="' + "+X+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(P,X,!0):P+" + "+X);var j=j||[];j.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(B)+"', missingProperty: '"+K+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",S.length==1?i+="property "+e.util.escapeQuotes(S[0]):i+="properties "+e.util.escapeQuotes(S.join(", ")),i+=" when property "+e.util.escapeQuotes(B)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var W=i;i=j.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+W+"]); ":i+=" validate.errors = ["+W+"]; return false; ":i+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var J=S;if(J)for(var Y,ie=-1,ae=J.length-1;ie<ae;){Y=J[ie+=1];var H=e.util.getProperty(Y),K=e.util.escapeQuotes(Y),U=p+H;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(P,Y,e.opts.jsonPointers)),i+=" if ( "+U+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(Y)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(B)+"', missingProperty: '"+K+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",S.length==1?i+="property "+e.util.escapeQuotes(S[0]):i+="properties "+e.util.escapeQuotes(S.join(", ")),i+=" when property "+e.util.escapeQuotes(B)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",f&&(g+="}",i+=" else { ")}e.errorPath=P;var te=m.baseId;for(var B in y){var _=y[B];(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(i+=" "+A+" = true; if ( "+p+e.util.getProperty(B)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(B)+"') "),i+=") { ",m.schema=_,m.schemaPath=l+e.util.getProperty(B),m.errSchemaPath=u+"/"+e.util.escapeFragment(B),i+="  "+e.validate(m)+" ",m.baseId=te,i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}"))}return f&&(i+="   "+g+" if ("+h+" == errors) {"),i},"generate_dependencies")});var pmt=q((Eho,fmt)=>{"use strict";d();fmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m=e.opts.$data&&c&&c.$data,g;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="i"+o,y="schema"+o;m||(i+=" var "+y+" = validate.schema"+l+";"),i+="var "+h+";",m&&(i+=" if (schema"+o+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+o+")) "+h+" = false; else {"),i+=""+h+" = false;for (var "+A+"=0; "+A+"<"+y+".length; "+A+"++) if (equal("+p+", "+y+"["+A+"])) { "+h+" = true; break; }",m&&(i+="  }  "),i+=" if (!"+h+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;return i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",f&&(i+=" else { "),i},"generate_enum")});var mmt=q((Iho,hmt)=>{"use strict";d();hmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return f&&(i+=" if (true) { "),i;var h=e.opts.$data&&c&&c.$data,m;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c;var g=e.opts.unknownFormats,A=Array.isArray(g);if(h){var y="format"+o,E="isObject"+o,b="formatType"+o;i+=" var "+y+" = formats["+m+"]; var "+E+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+b+" = "+E+" && "+y+".type || 'string'; if ("+E+") { ",e.async&&(i+=" var async"+o+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),i+=" (",g!="ignore"&&(i+=" ("+m+" && !"+y+" ",A&&(i+=" && self._opts.unknownFormats.indexOf("+m+") == -1 "),i+=") || "),i+=" ("+y+" && "+b+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+y+"("+p+") : "+y+"("+p+")) ":i+=" "+y+"("+p+") ",i+=" : "+y+".test("+p+"))))) {"}else{var y=e.formats[c];if(!y){if(g=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(i+=" if (true) { "),i;if(A&&g.indexOf(c)>=0)return f&&(i+=" if (true) { "),i;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var E=typeof y=="object"&&!(y instanceof RegExp)&&y.validate,b=E&&y.type||"string";if(E){var _=y.async===!0;y=y.validate}if(b!=n)return f&&(i+=" if (true) { "),i;if(_){if(!e.async)throw new Error("async format in sync schema");var S="formats"+e.util.getProperty(c)+".validate";i+=" if (!(await "+S+"("+p+"))) { "}else{i+=" if (! ";var S="formats"+e.util.getProperty(c);E&&(S+=".validate"),typeof y=="function"?i+=" "+S+"("+p+") ":i+=" "+S+".test("+p+") ",i+=") { "}}var P=P||[];P.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",h?i+=""+m:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,h?i+="' + "+m+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var B=i;return i=P.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+B+"]); ":i+=" validate.errors = ["+B+"]; return false; ":i+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate_format")});var Amt=q((_ho,gmt)=>{"use strict";d();gmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m="errs__"+o,g=e.util.copy(e);g.level++;var A="valid"+g.level,y=e.schema.then,E=e.schema.else,b=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),_=E!==void 0&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)),S=g.baseId;if(b||_){var P;g.createErrors=!1,g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+=" var "+m+" = errors; var "+h+" = true;  ";var B=e.compositeRule;e.compositeRule=g.compositeRule=!0,i+="  "+e.validate(g)+" ",g.baseId=S,g.createErrors=!0,i+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }  ",e.compositeRule=g.compositeRule=B,b?(i+=" if ("+A+") {  ",g.schema=e.schema.then,g.schemaPath=e.schemaPath+".then",g.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(g)+" ",g.baseId=S,i+=" "+h+" = "+A+"; ",b&&_?(P="ifClause"+o,i+=" var "+P+" = 'then'; "):P="'then'",i+=" } ",_&&(i+=" else { ")):i+=" if (!"+A+") { ",_&&(g.schema=e.schema.else,g.schemaPath=e.schemaPath+".else",g.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(g)+" ",g.baseId=S,i+=" "+h+" = "+A+"; ",b&&_?(P="ifClause"+o,i+=" var "+P+" = 'else'; "):P="'else'",i+=" } "),i+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+P+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+P+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_if")});var Cmt=q((kho,ymt)=>{"use strict";d();ymt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E="i"+o,b=g.dataLevel=e.dataLevel+1,_="data"+b,S=e.baseId;if(i+="var "+m+" = errors;var "+h+";",Array.isArray(c)){var P=e.schema.additionalItems;if(P===!1){i+=" "+h+" = "+p+".length <= "+c.length+"; ";var B=u;u=e.errSchemaPath+"/additionalItems",i+="  if (!"+h+") {   ";var F=F||[];F.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var Y=i;i=F.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Y+"]); ":i+=" validate.errors = ["+Y+"]; return false; ":i+=" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u=B,f&&(A+="}",i+=" else { ")}var ee=c;if(ee){for(var V,H=-1,U=ee.length-1;H<U;)if(V=ee[H+=1],e.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:e.util.schemaHasRules(V,e.RULES.all)){i+=" "+y+" = true; if ("+p+".length > "+H+") { ";var X=p+"["+H+"]";g.schema=V,g.schemaPath=l+"["+H+"]",g.errSchemaPath=u+"/"+H,g.errorPath=e.util.getPathExpr(e.errorPath,H,e.opts.jsonPointers,!0),g.dataPathArr[b]=H;var K=e.validate(g);g.baseId=S,e.util.varOccurences(K,_)<2?i+=" "+e.util.varReplace(K,_,X)+" ":i+=" var "+_+" = "+X+"; "+K+" ",i+=" }  ",f&&(i+=" if ("+y+") { ",A+="}")}}if(typeof P=="object"&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))){g.schema=P,g.schemaPath=e.schemaPath+".additionalItems",g.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+p+".length > "+c.length+") {  for (var "+E+" = "+c.length+"; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var X=p+"["+E+"]";g.dataPathArr[b]=E;var K=e.validate(g);g.baseId=S,e.util.varOccurences(K,_)<2?i+=" "+e.util.varReplace(K,_,X)+" ":i+=" var "+_+" = "+X+"; "+K+" ",f&&(i+=" if (!"+y+") break; "),i+=" } }  ",f&&(i+=" if ("+y+") { ",A+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=l,g.errSchemaPath=u,i+="  for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { ",g.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);var X=p+"["+E+"]";g.dataPathArr[b]=E;var K=e.validate(g);g.baseId=S,e.util.varOccurences(K,_)<2?i+=" "+e.util.varReplace(K,_,X)+" ":i+=" var "+_+" = "+X+"; "+K+" ",f&&(i+=" if (!"+y+") break; "),i+=" }"}return f&&(i+=" "+A+" if ("+m+" == errors) {"),i},"generate_items")});var wSe=q((Bho,vmt)=>{"use strict";d();vmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,S,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c;var g=r=="maximum",A=g?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[A],E=e.opts.$data&&y&&y.$data,b=g?"<":">",_=g?">":"<",S=void 0;if(!(h||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(E||y===void 0||typeof y=="number"||typeof y=="boolean"))throw new Error(A+" must be number or boolean");if(E){var P=e.util.getData(y.$data,a,e.dataPathArr),B="exclusive"+o,F="exclType"+o,Y="exclIsNumber"+o,ee="op"+o,V="' + "+ee+" + '";i+=" var schemaExcl"+o+" = "+P+"; ",P="schemaExcl"+o,i+=" var "+B+"; var "+F+" = typeof "+P+"; if ("+F+" != 'boolean' && "+F+" != 'undefined' && "+F+" != 'number') { ";var S=A,H=H||[];H.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+A+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;i=H.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),i+=" "+F+" == 'number' ? ( ("+B+" = "+m+" === undefined || "+P+" "+b+"= "+m+") ? "+p+" "+_+"= "+P+" : "+p+" "+_+" "+m+" ) : ( ("+B+" = "+P+" === true) ? "+p+" "+_+"= "+m+" : "+p+" "+_+" "+m+" ) || "+p+" !== "+p+") { var op"+o+" = "+B+" ? '"+b+"' : '"+b+"='; ",c===void 0&&(S=A,u=e.errSchemaPath+"/"+A,m=P,h=E)}else{var Y=typeof y=="number",V=b;if(Y&&h){var ee="'"+V+"'";i+=" if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),i+=" ( "+m+" === undefined || "+y+" "+b+"= "+m+" ? "+p+" "+_+"= "+y+" : "+p+" "+_+" "+m+" ) || "+p+" !== "+p+") { "}else{Y&&c===void 0?(B=!0,S=A,u=e.errSchemaPath+"/"+A,m=y,_+="="):(Y&&(m=Math[g?"min":"max"](y,c)),y===(Y?m:!0)?(B=!0,S=A,u=e.errSchemaPath+"/"+A,_+="="):(B=!1,V+="="));var ee="'"+V+"'";i+=" if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),i+=" "+p+" "+_+" "+m+" || "+p+" !== "+p+") { "}}S=S||r;var H=H||[];H.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+ee+", limit: "+m+", exclusive: "+B+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+V+" ",h?i+="' + "+m:i+=""+m+"'"),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var U=i;return i=H.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { "),i},"generate__limit")});var _Se=q((Mho,Emt)=>{"use strict";d();Emt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c,!(h||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxItems"?">":"<";i+="if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),i+=" "+p+".length "+g+" "+m+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxItems"?i+="more":i+="fewer",i+=" than ",h?i+="' + "+m+" + '":i+=""+c,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitItems")});var SSe=q((Qho,xmt)=>{"use strict";d();xmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c,!(h||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxLength"?">":"<";i+="if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),e.opts.unicode===!1?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+g+" "+m+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",r=="maxLength"?i+="longer":i+="shorter",i+=" than ",h?i+="' + "+m+" + '":i+=""+c,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitLength")});var RSe=q((Hho,bmt)=>{"use strict";d();bmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,A,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c,!(h||typeof c=="number"))throw new Error(r+" must be number");var g=r=="maxProperties"?">":"<";i+="if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'number') || "),i+=" Object.keys("+p+").length "+g+" "+m+") { ";var A=r,y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+m+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",r=="maxProperties"?i+="more":i+="fewer",i+=" than ",h?i+="' + "+m+" + '":i+=""+c,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate__limitProperties")});var Tmt=q((jho,Imt)=>{"use strict";d();Imt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;if(h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c,!(h||typeof c=="number"))throw new Error(r+" must be number");i+="var division"+o+";if (",h&&(i+=" "+m+" !== undefined && ( typeof "+m+" != 'number' || "),i+=" (division"+o+" = "+p+" / "+m+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+m+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",h?i+="' + "+m:i+=""+m+"'"),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var A=i;return i=g.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_multipleOf")});var _mt=q((zho,wmt)=>{"use strict";d();wmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="errs__"+o,m=e.util.copy(e);m.level++;var g="valid"+m.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){m.schema=c,m.schemaPath=l,m.errSchemaPath=u,i+=" var "+h+" = errors;  ";var A=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.createErrors=!1;var y;m.opts.allErrors&&(y=m.opts.allErrors,m.opts.allErrors=!1),i+=" "+e.validate(m)+" ",m.createErrors=!0,y&&(m.opts.allErrors=y),e.compositeRule=m.compositeRule=A,i+=" if ("+g+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var b=i;i=E.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(i+=" if (false) { ");return i},"generate_not")});var Rmt=q((Jho,Smt)=>{"use strict";d();Smt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m="errs__"+o,g=e.util.copy(e),A="";g.level++;var y="valid"+g.level,E=g.baseId,b="prevValid"+o,_="passingSchemas"+o;i+="var "+m+" = errors , "+b+" = false , "+h+" = false , "+_+" = null; ";var S=e.compositeRule;e.compositeRule=g.compositeRule=!0;var P=c;if(P)for(var B,F=-1,Y=P.length-1;F<Y;)B=P[F+=1],(e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all))?(g.schema=B,g.schemaPath=l+"["+F+"]",g.errSchemaPath=u+"/"+F,i+="  "+e.validate(g)+" ",g.baseId=E):i+=" var "+y+" = true; ",F&&(i+=" if ("+y+" && "+b+") { "+h+" = false; "+_+" = ["+_+", "+F+"]; } else { ",A+="}"),i+=" if ("+y+") { "+h+" = "+b+" = true; "+_+" = "+F+"; }";return e.compositeRule=g.compositeRule=S,i+=""+A+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+_+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},"generate_oneOf")});var Pmt=q((emo,kmt)=>{"use strict";d();kmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h=e.opts.$data&&c&&c.$data,m;h?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",m="schema"+o):m=c;var g=h?"(new RegExp("+m+"))":e.usePattern(c);i+="if ( ",h&&(i+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),i+=" !"+g+".test("+p+") ) {   ";var A=A||[];A.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",h?i+=""+m:i+=""+e.util.toQuotedString(c),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,h?i+="' + "+m+" + '":i+=""+e.util.escapeQuotes(c),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+e.util.toQuotedString(c),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;return i=A.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",f&&(i+=" else { "),i},"generate_pattern")});var Bmt=q((nmo,Dmt)=>{"use strict";d();Dmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="errs__"+o,m=e.util.copy(e),g="";m.level++;var A="valid"+m.level,y="key"+o,E="idx"+o,b=m.dataLevel=e.dataLevel+1,_="data"+b,S="dataProperties"+o,P=Object.keys(c||{}).filter(ie),B=e.schema.patternProperties||{},F=Object.keys(B).filter(ie),Y=e.schema.additionalProperties,ee=P.length||F.length,V=Y===!1,H=typeof Y=="object"&&Object.keys(Y).length,U=e.opts.removeAdditional,X=V||H||U,K=e.opts.ownProperties,j=e.baseId,W=e.schema.required;if(W&&!(e.opts.$data&&W.$data)&&W.length<e.opts.loopRequired)var J=e.util.toHash(W);function ie(Sr){return Sr!=="__proto__"}if(s(ie,"notProto"),i+="var "+h+" = errors;var "+A+" = true;",K&&(i+=" var "+S+" = undefined;"),X){if(K?i+=" "+S+" = "+S+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+S+".length; "+E+"++) { var "+y+" = "+S+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",ee){if(i+=" var isAdditional"+o+" = !(false ",P.length)if(P.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+y+") ";else{var ae=P;if(ae)for(var te,pe=-1,Ae=ae.length-1;pe<Ae;)te=ae[pe+=1],i+=" || "+y+" == "+e.util.toQuotedString(te)+" "}if(F.length){var Oe=F;if(Oe)for(var Te,Je=-1,Fe=Oe.length-1;Je<Fe;)Te=Oe[Je+=1],i+=" || "+e.usePattern(Te)+".test("+y+") "}i+=" ); if (isAdditional"+o+") { "}if(U=="all")i+=" delete "+p+"["+y+"]; ";else{var ct=e.errorPath,St="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),V)if(U)i+=" delete "+p+"["+y+"]; ";else{i+=" "+A+" = false; ";var vt=u;u=e.errSchemaPath+"/additionalProperties";var mt=mt||[];mt.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+St+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=mt.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=vt,f&&(i+=" break; ")}else if(H)if(U=="failing"){i+=" var "+h+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=m.compositeRule=!0,m.schema=Y,m.schemaPath=e.schemaPath+".additionalProperties",m.errSchemaPath=e.errSchemaPath+"/additionalProperties",m.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";m.dataPathArr[b]=y;var We=e.validate(m);m.baseId=j,e.util.varOccurences(We,_)<2?i+=" "+e.util.varReplace(We,_,ye)+" ":i+=" var "+_+" = "+ye+"; "+We+" ",i+=" if (!"+A+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+y+"]; }  ",e.compositeRule=m.compositeRule=Ue}else{m.schema=Y,m.schemaPath=e.schemaPath+".additionalProperties",m.errSchemaPath=e.errSchemaPath+"/additionalProperties",m.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";m.dataPathArr[b]=y;var We=e.validate(m);m.baseId=j,e.util.varOccurences(We,_)<2?i+=" "+e.util.varReplace(We,_,ye)+" ":i+=" var "+_+" = "+ye+"; "+We+" ",f&&(i+=" if (!"+A+") break; ")}e.errorPath=ct}ee&&(i+=" } "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(P.length){var le=P;if(le)for(var te,qe=-1,Be=le.length-1;qe<Be;){te=le[qe+=1];var xe=c[te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){var je=e.util.getProperty(te),ye=p+je,et=se&&xe.default!==void 0;m.schema=xe,m.schemaPath=l+je,m.errSchemaPath=u+"/"+e.util.escapeFragment(te),m.errorPath=e.util.getPath(e.errorPath,te,e.opts.jsonPointers),m.dataPathArr[b]=e.util.toQuotedString(te);var We=e.validate(m);if(m.baseId=j,e.util.varOccurences(We,_)<2){We=e.util.varReplace(We,_,ye);var pt=ye}else{var pt=_;i+=" var "+_+" = "+ye+"; "}if(et)i+=" "+We+" ";else{if(J&&J[te]){i+=" if ( "+pt+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = false; ";var ct=e.errorPath,vt=u,Lt=e.util.escapeQuotes(te);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ct,te,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var mt=mt||[];mt.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Lt+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Lt+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var ue=i;i=mt.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+ue+"]); ":i+=" validate.errors = ["+ue+"]; return false; ":i+=" var err = "+ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=vt,e.errorPath=ct,i+=" } else { "}else f?(i+=" if ( "+pt+" === undefined ",K&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=") { "+A+" = true; } else { "):(i+=" if ("+pt+" !== undefined ",K&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+We+" } "}}f&&(i+=" if ("+A+") { ",g+="}")}}if(F.length){var Kt=F;if(Kt)for(var Te,Ft=-1,Qr=Kt.length-1;Ft<Qr;){Te=Kt[Ft+=1];var xe=B[Te];if(e.opts.strictKeywords?typeof xe=="object"&&Object.keys(xe).length>0||xe===!1:e.util.schemaHasRules(xe,e.RULES.all)){m.schema=xe,m.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Te),m.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Te),K?i+=" "+S+" = "+S+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+S+".length; "+E+"++) { var "+y+" = "+S+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" if ("+e.usePattern(Te)+".test("+y+")) { ",m.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var ye=p+"["+y+"]";m.dataPathArr[b]=y;var We=e.validate(m);m.baseId=j,e.util.varOccurences(We,_)<2?i+=" "+e.util.varReplace(We,_,ye)+" ":i+=" var "+_+" = "+ye+"; "+We+" ",f&&(i+=" if (!"+A+") break; "),i+=" } ",f&&(i+=" else "+A+" = true; "),i+=" }  ",f&&(i+=" if ("+A+") { ",g+="}")}}}return f&&(i+=" "+g+" if ("+h+" == errors) {"),i},"generate_properties")});var Lmt=q((smo,Nmt)=>{"use strict";d();Nmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="errs__"+o,m=e.util.copy(e),g="";m.level++;var A="valid"+m.level;if(i+="var "+h+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){m.schema=c,m.schemaPath=l,m.errSchemaPath=u;var y="key"+o,E="idx"+o,b="i"+o,_="' + "+y+" + '",S=m.dataLevel=e.dataLevel+1,P="data"+S,B="dataProperties"+o,F=e.opts.ownProperties,Y=e.baseId;F&&(i+=" var "+B+" = undefined; "),F?i+=" "+B+" = "+B+" || Object.keys("+p+"); for (var "+E+"=0; "+E+"<"+B+".length; "+E+"++) { var "+y+" = "+B+"["+E+"]; ":i+=" for (var "+y+" in "+p+") { ",i+=" var startErrs"+o+" = errors; ";var ee=y,V=e.compositeRule;e.compositeRule=m.compositeRule=!0;var H=e.validate(m);m.baseId=Y,e.util.varOccurences(H,P)<2?i+=" "+e.util.varReplace(H,P,ee)+" ":i+=" var "+P+" = "+ee+"; "+H+" ",e.compositeRule=m.compositeRule=V,i+=" if (!"+A+") { for (var "+b+"=startErrs"+o+"; "+b+"<errors; "+b+"++) { vErrors["+b+"].propertyName = "+y+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+_+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),f&&(i+=" break; "),i+=" } }"}return f&&(i+=" "+g+" if ("+h+" == errors) {"),i},"generate_propertyNames")});var Fmt=q((lmo,Mmt)=>{"use strict";d();Mmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m=e.opts.$data&&c&&c.$data,g;m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c;var A="schema"+o;if(!m)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],E=c;if(E)for(var b,_=-1,S=E.length-1;_<S;){b=E[_+=1];var P=e.schema.properties[b];P&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))||(y[y.length]=b)}}else var y=c;if(m||y.length){var B=e.errorPath,F=m||y.length>=e.opts.loopRequired,Y=e.opts.ownProperties;if(f)if(i+=" var missing"+o+"; ",F){m||(i+=" var "+A+" = validate.schema"+l+"; ");var ee="i"+o,V="schema"+o+"["+ee+"]",H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(B,V,e.opts.jsonPointers)),i+=" var "+h+" = true; ",m&&(i+=" if (schema"+o+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+o+")) "+h+" = false; else {"),i+=" for (var "+ee+" = 0; "+ee+" < "+A+".length; "+ee+"++) { "+h+" = "+p+"["+A+"["+ee+"]] !== undefined ",Y&&(i+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+A+"["+ee+"]) "),i+="; if (!"+h+") break; } ",m&&(i+="  }  "),i+="  if (!"+h+") {   ";var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var X=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var K=y;if(K)for(var j,ee=-1,W=K.length-1;ee<W;){j=K[ee+=1],ee&&(i+=" || ");var J=e.util.getProperty(j),ie=p+J;i+=" ( ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:J)+") ) "}i+=") {  ";var V="missing"+o,H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(B,V,!0):B+" + "+V);var U=U||[];U.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var X=i;i=U.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(F){m||(i+=" var "+A+" = validate.schema"+l+"; ");var ee="i"+o,V="schema"+o+"["+ee+"]",H="' + "+V+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(B,V,e.opts.jsonPointers)),m&&(i+=" if ("+A+" && !Array.isArray("+A+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+A+" !== undefined) { "),i+=" for (var "+ee+" = 0; "+ee+" < "+A+".length; "+ee+"++) { if ("+p+"["+A+"["+ee+"]] === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+A+"["+ee+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",m&&(i+="  }  ")}else{var ae=y;if(ae)for(var j,te=-1,pe=ae.length-1;te<pe;){j=ae[te+=1];var J=e.util.getProperty(j),H=e.util.escapeQuotes(j),ie=p+J;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,j,e.opts.jsonPointers)),i+=" if ( "+ie+" === undefined ",Y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+H+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+H+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=B}else f&&(i+=" if (true) {");return i},"generate_required")});var Qmt=q((fmo,Omt)=>{"use strict";d();Omt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p="data"+(a||""),h="valid"+o,m=e.opts.$data&&c&&c.$data,g;if(m?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",g="schema"+o):g=c,(c||m)&&e.opts.uniqueItems!==!1){m&&(i+=" var "+h+"; if ("+g+" === false || "+g+" === undefined) "+h+" = true; else if (typeof "+g+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+p+".length , "+h+" = true , j; if (i > 1) { ";var A=e.schema.items&&e.schema.items.type,y=Array.isArray(A);if(!A||A=="object"||A=="array"||y&&(A.indexOf("object")>=0||A.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var E="checkDataType"+(y?"s":"");i+=" if ("+e.util[E](A,"item",e.opts.strictNumbers,!0)+") continue; ",y&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",m&&(i+="  }  "),i+=" if (!"+h+") {   ";var b=b||[];b.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",m?i+="validate.schema"+l:i+=""+c,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var _=i;i=b.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",f&&(i+=" else { ")}else f&&(i+=" if (true) { ");return i},"generate_uniqueItems")});var qmt=q((mmo,Umt)=>{"use strict";d();Umt.exports={$ref:Zht(),allOf:tmt(),anyOf:nmt(),$comment:omt(),const:amt(),contains:lmt(),dependencies:dmt(),enum:pmt(),format:mmt(),if:Amt(),items:Cmt(),maximum:wSe(),minimum:wSe(),maxItems:_Se(),minItems:_Se(),maxLength:SSe(),minLength:SSe(),maxProperties:RSe(),minProperties:RSe(),multipleOf:Tmt(),not:_mt(),oneOf:Rmt(),pattern:Pmt(),properties:Bmt(),propertyNames:Lmt(),required:Fmt(),uniqueItems:Qmt(),validate:ISe()}});var $mt=q((Amo,Wmt)=>{"use strict";d();var Hmt=qmt(),kSe=M5().toHash;Wmt.exports=s(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=kSe(r),e.types=kSe(i),e.forEach(function(o){o.rules=o.rules.map(function(a){var c;if(typeof a=="object"){var l=Object.keys(a)[0];c=a[l],a=l,c.forEach(function(f){r.push(f),e.all[f]=!0})}r.push(a);var u=e.all[a]={keyword:a,code:Hmt[a],implements:c};return u}),e.all.$comment={keyword:"$comment",code:Hmt.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=kSe(r.concat(n)),e.custom={},e},"rules")});var Vmt=q((vmo,Gmt)=>{"use strict";d();var jmt=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Gmt.exports=function(t,e){for(var r=0;r<e.length;r++){t=JSON.parse(JSON.stringify(t));var n=e[r].split("/"),i=t,o;for(o=1;o<n.length;o++)i=i[n[o]];for(o=0;o<jmt.length;o++){var a=jmt[o],c=i[a];c&&(i[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}});var Kmt=q((xmo,Ymt)=>{"use strict";d();var oEr=Joe().MissingRef;Ymt.exports=zmt;function zmt(t,e,r){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var i=o(t).then(function(){var c=n._addSchema(t,void 0,e);return c.validate||a(c)});return r&&i.then(function(c){r(null,c)},r),i;function o(c){var l=c.$schema;return l&&!n.getSchema(l)?zmt.call(n,{$ref:l},!0):Promise.resolve()}s(o,"loadMetaSchemaOf");function a(c){try{return n._compile(c)}catch(u){if(u instanceof oEr)return l(u);throw u}function l(u){var f=u.missingSchema;if(m(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var p=n._loadingSchemas[f];return p||(p=n._loadingSchemas[f]=n._opts.loadSchema(f),p.then(h,h)),p.then(function(g){if(!m(f))return o(g).then(function(){m(f)||n.addSchema(g,f,void 0,e)})}).then(function(){return a(c)});function h(){delete n._loadingSchemas[f]}s(h,"removePromise");function m(g){return n._refs[g]||n._schemas[g]}s(m,"added")}s(l,"loadMissingSchema")}s(a,"_compileAsync")}s(zmt,"compileAsync")});var Xmt=q((Tmo,Jmt)=>{"use strict";d();Jmt.exports=s(function(e,r,n){var i=" ",o=e.level,a=e.dataLevel,c=e.schema[r],l=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,p,h="data"+(a||""),m="valid"+o,g="errs__"+o,A=e.opts.$data&&c&&c.$data,y;A?(i+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",y="schema"+o):y=c;var E=this,b="definition"+o,_=E.definition,S="",P,B,F,Y,ee;if(A&&_.$data){ee="keywordValidate"+o;var V=_.validateSchema;i+=" var "+b+" = RULES.custom['"+r+"'].definition; var "+ee+" = "+b+".validate;"}else{if(Y=e.useCustomRule(E,c,e.schema,e),!Y)return;y="validate.schema"+l,ee=Y.code,P=_.compile,B=_.inline,F=_.macro}var H=ee+".errors",U="i"+o,X="ruleErr"+o,K=_.async;if(K&&!e.async)throw new Error("async keyword in sync schema");if(B||F||(i+=""+H+" = null;"),i+="var "+g+" = errors;var "+m+";",A&&_.$data&&(S+="}",i+=" if ("+y+" === undefined) { "+m+" = true; } else { ",V&&(S+="}",i+=" "+m+" = "+b+".validateSchema("+y+"); if ("+m+") { ")),B)_.statements?i+=" "+Y.validate+" ":i+=" "+m+" = "+Y.validate+"; ";else if(F){var j=e.util.copy(e),S="";j.level++;var W="valid"+j.level;j.schema=Y.validate,j.schemaPath="";var J=e.compositeRule;e.compositeRule=j.compositeRule=!0;var ie=e.validate(j).replace(/validate\.schema/g,ee);e.compositeRule=j.compositeRule=J,i+=" "+ie}else{var ae=ae||[];ae.push(i),i="",i+="  "+ee+".call( ",e.opts.passContext?i+="this":i+="self",P||_.schema===!1?i+=" , "+h+" ":i+=" , "+y+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var te=a?"data"+(a-1||""):"parentData",pe=a?e.dataPathArr[a]:"parentDataProperty";i+=" , "+te+" , "+pe+" , rootData )  ";var Ae=i;i=ae.pop(),_.errors===!1?(i+=" "+m+" = ",K&&(i+="await "),i+=""+Ae+"; "):K?(H="customErrors"+o,i+=" var "+H+" = null; try { "+m+" = await "+Ae+"; } catch (e) { "+m+" = false; if (e instanceof ValidationError) "+H+" = e.errors; else throw e; } "):i+=" "+H+" = null; "+m+" = "+Ae+"; "}if(_.modifying&&(i+=" if ("+te+") "+h+" = "+te+"["+pe+"];"),i+=""+S,_.valid)f&&(i+=" if (true) { ");else{i+=" if ( ",_.valid===void 0?(i+=" !",F?i+=""+W:i+=""+m):i+=" "+!_.valid+" ",i+=") { ",p=E.keyword;var ae=ae||[];ae.push(i),i="";var ae=ae||[];ae.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var Oe=i;i=ae.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+Oe+"]); ":i+=" validate.errors = ["+Oe+"]; return false; ":i+=" var err = "+Oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Te=i;i=ae.pop(),B?_.errors?_.errors!="full"&&(i+="  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+X+".schemaPath === undefined) { "+X+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+h+"; "),i+=" } "):_.errors===!1?i+=" "+Te+" ":(i+=" if ("+g+" == errors) { "+Te+" } else {  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+X+".schemaPath === undefined) { "+X+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+h+"; "),i+=" } } "):F?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+E.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+E.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):_.errors===!1?i+=" "+Te+" ":(i+=" if (Array.isArray("+H+")) { if (vErrors === null) vErrors = "+H+"; else vErrors = vErrors.concat("+H+"); errors = vErrors.length;  for (var "+U+"="+g+"; "+U+"<errors; "+U+"++) { var "+X+" = vErrors["+U+"]; if ("+X+".dataPath === undefined) "+X+".dataPath = (dataPath || '') + "+e.errorPath+";  "+X+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+X+".schema = "+y+"; "+X+".data = "+h+"; "),i+=" } } else { "+Te+" } "),i+=" } ",f&&(i+=" else { ")}return i},"generate_custom")});var PSe=q((Smo,sEr)=>{sEr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var tgt=q((Rmo,egt)=>{"use strict";d();var Zmt=PSe();egt.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Zmt.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Zmt.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var ngt=q((Pmo,rgt)=>{"use strict";d();var aEr=/^[a-z_$][a-z0-9_$-]*$/i,cEr=Xmt(),lEr=tgt();rgt.exports={add:uEr,get:dEr,remove:fEr,validate:DSe};function uEr(t,e){var r=this.RULES;if(r.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!aEr.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)a(t,n[i],e);else a(t,n,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}r.keywords[t]=r.all[t]=!0;function a(c,l,u){for(var f,p=0;p<r.length;p++){var h=r[p];if(h.type==l){f=h;break}}f||(f={type:l,rules:[]},r.push(f));var m={keyword:c,definition:u,custom:!0,code:cEr,implements:u.implements};f.rules.push(m),r.custom[c]=m}return s(a,"_addRule"),this}s(uEr,"addKeyword");function dEr(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}s(dEr,"getKeyword");function fEr(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var r=0;r<e.length;r++)for(var n=e[r].rules,i=0;i<n.length;i++)if(n[i].keyword==t){n.splice(i,1);break}return this}s(fEr,"removeKeyword");function DSe(t,e){DSe.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(lEr,!0);if(r(t))return!0;if(DSe.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}s(DSe,"validateKeyword")});var igt=q((Nmo,pEr)=>{pEr.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var hgt=q((Lmo,pgt)=>{"use strict";d();var sgt=Fht(),F5=Koe(),hEr=Qht(),agt=ASe(),mEr=bSe(),gEr=Jht(),AEr=$mt(),cgt=Vmt(),lgt=M5();pgt.exports=nc;nc.prototype.validate=CEr;nc.prototype.compile=vEr;nc.prototype.addSchema=EEr;nc.prototype.addMetaSchema=xEr;nc.prototype.validateSchema=bEr;nc.prototype.getSchema=TEr;nc.prototype.removeSchema=_Er;nc.prototype.addFormat=LEr;nc.prototype.errorsText=NEr;nc.prototype._addSchema=SEr;nc.prototype._compile=REr;nc.prototype.compileAsync=Kmt();var ose=ngt();nc.prototype.addKeyword=ose.add;nc.prototype.getKeyword=ose.get;nc.prototype.removeKeyword=ose.remove;nc.prototype.validateKeyword=ose.validate;var ugt=Joe();nc.ValidationError=ugt.Validation;nc.MissingRefError=ugt.MissingRef;nc.$dataMetaSchema=cgt;var ise="http://json-schema.org/draft-07/schema",ogt=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],yEr=["/properties"];function nc(t){if(!(this instanceof nc))return new nc(t);t=this._opts=lgt.copy(t)||{},qEr(this),this._schemas={},this._refs={},this._fragments={},this._formats=gEr(t.format),this._cache=t.cache||new hEr,this._loadingSchemas={},this._compilations=[],this.RULES=AEr(),this._getId=kEr(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=mEr),this._metaOpts=UEr(this),t.formats&&OEr(this),t.keywords&&QEr(this),MEr(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),FEr(this)}s(nc,"Ajv");function CEr(t,e){var r;if(typeof t=="string"){if(r=this.getSchema(t),!r)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);r=n.validate||this._compile(n)}var i=r(e);return r.$async!==!0&&(this.errors=r.errors),i}s(CEr,"validate");function vEr(t,e){var r=this._addSchema(t,void 0,e);return r.validate||this._compile(r)}s(vEr,"compile");function EEr(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.addSchema(t[i],void 0,r,n);return this}var o=this._getId(t);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=F5.normalizeId(e||o),fgt(this,e),this._schemas[e]=this._addSchema(t,r,n,!0),this}s(EEr,"addSchema");function xEr(t,e,r){return this.addSchema(t,e,r,!0),this}s(xEr,"addMetaSchema");function bEr(t,e){var r=t.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||IEr(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,t);if(!n&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return n}s(bEr,"validateSchema");function IEr(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(ise)?ise:void 0,t._opts.defaultMeta}s(IEr,"defaultMeta");function TEr(t){var e=dgt(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return wEr(this,t)}}s(TEr,"getSchema");function wEr(t,e){var r=F5.schema.call(t,{schema:{}},e);if(r){var n=r.schema,i=r.root,o=r.baseId,a=sgt.call(t,n,i,void 0,o);return t._fragments[e]=new agt({ref:e,fragment:!0,schema:n,root:i,baseId:o,validate:a}),a}}s(wEr,"_getSchemaFragment");function dgt(t,e){return e=F5.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}s(dgt,"_getSchemaObj");function _Er(t){if(t instanceof RegExp)return nse(this,this._schemas,t),nse(this,this._refs,t),this;switch(typeof t){case"undefined":return nse(this,this._schemas),nse(this,this._refs),this._cache.clear(),this;case"string":var e=dgt(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var r=this._opts.serialize,n=r?r(t):t;this._cache.del(n);var i=this._getId(t);i&&(i=F5.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}s(_Er,"removeSchema");function nse(t,e,r){for(var n in e){var i=e[n];!i.meta&&(!r||r.test(n))&&(t._cache.del(i.cacheKey),delete e[n])}}s(nse,"_removeAllSchemas");function SEr(t,e,r,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(t):t,a=this._cache.get(o);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var c=F5.normalizeId(this._getId(t));c&&n&&fgt(this,c);var l=this._opts.validateSchema!==!1&&!e,u;l&&!(u=c&&c==F5.normalizeId(t.$schema))&&this.validateSchema(t,!0);var f=F5.ids.call(this,t),p=new agt({id:c,schema:t,localRefs:f,cacheKey:o,meta:r});return c[0]!="#"&&n&&(this._refs[c]=p),this._cache.put(o,p),l&&u&&this.validateSchema(t,!0),p}s(SEr,"_addSchema");function REr(t,e){if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e||i,t.schema.$async===!0&&(i.$async=!0),i;t.compiling=!0;var r;t.meta&&(r=this._opts,this._opts=this._metaOpts);var n;try{n=sgt.call(this,t.schema,e,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=r)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function i(){var o=t.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}s(i,"callValidate")}s(REr,"_compile");function kEr(t){switch(t.schemaId){case"auto":return BEr;case"id":return PEr;default:return DEr}}s(kEr,"chooseGetId");function PEr(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}s(PEr,"_getId");function DEr(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}s(DEr,"_get$Id");function BEr(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}s(BEr,"_get$IdOrId");function NEr(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<t.length;o++){var a=t[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)}s(NEr,"errorsText");function LEr(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}s(LEr,"addFormat");function MEr(t){var e;if(t._opts.$data&&(e=igt(),t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var r=PSe();t._opts.$data&&(r=cgt(r,yEr)),t.addMetaSchema(r,ise,!0),t._refs["http://json-schema.org/schema"]=ise}}s(MEr,"addDefaultMetaSchema");function FEr(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var r in e)t.addSchema(e[r],r)}s(FEr,"addInitialSchemas");function OEr(t){for(var e in t._opts.formats){var r=t._opts.formats[e];t.addFormat(e,r)}}s(OEr,"addInitialFormats");function QEr(t){for(var e in t._opts.keywords){var r=t._opts.keywords[e];t.addKeyword(e,r)}}s(QEr,"addInitialKeywords");function fgt(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}s(fgt,"checkUnique");function UEr(t){for(var e=lgt.copy(t._opts),r=0;r<ogt.length;r++)delete e[ogt[r]];return e}s(UEr,"getMetaSchemaOptions");function qEr(t){var e=t._opts.logger;if(e===!1)t.logger={log:BSe,warn:BSe,error:BSe};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}s(qEr,"setLogger");function BSe(){}s(BSe,"noop")});var Ngt=q((Ggo,Bgt)=>{d();Bgt.exports=Dgt;Dgt.sync=pxr;var kgt=require("fs");function fxr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(fxr,"checkPathExt");function Pgt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:fxr(e,r)}s(Pgt,"checkStat");function Dgt(t,e,r){kgt.stat(t,function(n,i){r(n,n?!1:Pgt(i,t,e))})}s(Dgt,"isexe");function pxr(t,e){return Pgt(kgt.statSync(t),t,e)}s(pxr,"sync")});var Qgt=q((Ygo,Ogt)=>{d();Ogt.exports=Mgt;Mgt.sync=hxr;var Lgt=require("fs");function Mgt(t,e,r){Lgt.stat(t,function(n,i){r(n,n?!1:Fgt(i,e))})}s(Mgt,"isexe");function hxr(t,e){return Fgt(Lgt.statSync(t),e)}s(hxr,"sync");function Fgt(t,e){return t.isFile()&&mxr(t,e)}s(Fgt,"checkStat");function mxr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(mxr,"checkMode")});var qgt=q((Zgo,Ugt)=>{d();var Xgo=require("fs"),hse;process.platform==="win32"||global.TESTING_WINDOWS?hse=Ngt():hse=Qgt();Ugt.exports=XSe;XSe.sync=gxr;function XSe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){XSe(t,e||{},function(o,a){o?i(o):n(a)})})}hse(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(XSe,"isexe");function gxr(t,e){try{return hse.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(gxr,"sync")});var zgt=q((rAo,Vgt)=>{d();var u8=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Hgt=require("path"),Axr=u8?";":":",Wgt=qgt(),$gt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),jgt=s((t,e)=>{let r=e.colon||Axr,n=t.match(/\//)||u8&&t.match(/\\/)?[""]:[...u8?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=u8?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=u8?i.split(r):[""];return u8&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),Ggt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=jgt(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p($gt(t));let h=n[u],m=/^".*"$/.test(h)?h.slice(1,-1):h,g=Hgt.join(m,t),A=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(A,u,0))}),"step"),l=s((u,f,p)=>new Promise((h,m)=>{if(p===i.length)return h(c(f+1));let g=i[p];Wgt(u+g,{pathExt:o},(A,y)=>{if(!A&&y)if(e.all)a.push(u+g);else return h(u+g);return h(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),yxr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=jgt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=Hgt.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let h=f+n[p];try{if(Wgt.sync(h,{pathExt:i}))if(e.all)o.push(h);else return h}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw $gt(t)},"whichSync");Vgt.exports=Ggt;Ggt.sync=yxr});var Kgt=q((oAo,ZSe)=>{"use strict";d();var Ygt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");ZSe.exports=Ygt;ZSe.exports.default=Ygt});var eAt=q((cAo,Zgt)=>{"use strict";d();var Jgt=require("path"),Cxr=zgt(),vxr=Kgt();function Xgt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=Cxr.sync(t.command,{path:r[vxr({env:r})],pathExt:e?Jgt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=Jgt.resolve(i?t.options.cwd:"",a)),a}s(Xgt,"resolveCommandAttempt");function Exr(t){return Xgt(t)||Xgt(t,!0)}s(Exr,"resolveCommand");Zgt.exports=Exr});var tAt=q((dAo,t2e)=>{"use strict";d();var e2e=/([()\][%!^"`<>&|;, *?])/g;function xxr(t){return t=t.replace(e2e,"^$1"),t}s(xxr,"escapeCommand");function bxr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(e2e,"^$1"),e&&(t=t.replace(e2e,"^$1")),t}s(bxr,"escapeArgument");t2e.exports.command=xxr;t2e.exports.argument=bxr});var nAt=q((hAo,rAt)=>{"use strict";d();rAt.exports=/^#!(.*)/});var oAt=q((gAo,iAt)=>{"use strict";d();var Ixr=nAt();iAt.exports=(t="")=>{let e=t.match(Ixr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var aAt=q((yAo,sAt)=>{"use strict";d();var r2e=require("fs"),Txr=oAt();function wxr(t){let r=Buffer.alloc(150),n;try{n=r2e.openSync(t,"r"),r2e.readSync(n,r,0,150,0),r2e.closeSync(n)}catch{}return Txr(r.toString())}s(wxr,"readShebang");sAt.exports=wxr});var dAt=q((EAo,uAt)=>{"use strict";d();var _xr=require("path"),cAt=eAt(),lAt=tAt(),Sxr=aAt(),Rxr=process.platform==="win32",kxr=/\.(?:com|exe)$/i,Pxr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Dxr(t){t.file=cAt(t);let e=t.file&&Sxr(t.file);return e?(t.args.unshift(t.file),t.command=e,cAt(t)):t.file}s(Dxr,"detectShebang");function Bxr(t){if(!Rxr)return t;let e=Dxr(t),r=!kxr.test(e);if(t.options.forceShell||r){let n=Pxr.test(e);t.command=_xr.normalize(t.command),t.command=lAt.command(t.command),t.args=t.args.map(o=>lAt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(Bxr,"parseNonShell");function Nxr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:Bxr(n)}s(Nxr,"parse");uAt.exports=Nxr});var hAt=q((IAo,pAt)=>{"use strict";d();var n2e=process.platform==="win32";function i2e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(i2e,"notFoundError");function Lxr(t,e){if(!n2e)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=fAt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(Lxr,"hookChildProcess");function fAt(t,e){return n2e&&t===1&&!e.file?i2e(e.original,"spawn"):null}s(fAt,"verifyENOENT");function Mxr(t,e){return n2e&&t===1&&!e.file?i2e(e.original,"spawnSync"):null}s(Mxr,"verifyENOENTSync");pAt.exports={hookChildProcess:Lxr,verifyENOENT:fAt,verifyENOENTSync:Mxr,notFoundError:i2e}});var AAt=q((_Ao,d8)=>{"use strict";d();var mAt=require("child_process"),o2e=dAt(),s2e=hAt();function gAt(t,e,r){let n=o2e(t,e,r),i=mAt.spawn(n.command,n.args,n.options);return s2e.hookChildProcess(i,n),i}s(gAt,"spawn");function Fxr(t,e,r){let n=o2e(t,e,r),i=mAt.spawnSync(n.command,n.args,n.options);return i.error=i.error||s2e.verifyENOENTSync(i.status,n),i}s(Fxr,"spawnSync");d8.exports=gAt;d8.exports.spawn=gAt;d8.exports.sync=Fxr;d8.exports._parse=o2e;d8.exports._enoent=s2e});var Xxr={};fa(Xxr,{getTokenizer:()=>vo,getTokenizerAsync:()=>yQe,main:()=>LAt});module.exports=oCt(Xxr);d();d();zRe().install();d();d();var U9="github.copilot",YRe="github-enterprise";d();d();d();d();d();d();var qs=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var oh=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return mH(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var sh="X-Copilot-RelatedPluginVersion-",q9=(W=>(W.Market="X-MSEdge-Market",W.CorpNet="X-FD-Corpnet",W.Build="X-VSCode-Build",W.ApplicationVersion="X-VSCode-AppVersion",W.TargetPopulation="X-VSCode-TargetPopulation",W.ClientId="X-MSEdge-ClientId",W.ExtensionName="X-VSCode-ExtensionName",W.ExtensionVersion="X-VSCode-ExtensionVersion",W.ExtensionRelease="X-VSCode-ExtensionRelease",W.Language="X-VSCode-Language",W.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",W.CopilotEngine="X-Copilot-Engine",W.CopilotOverrideEngine="X-Copilot-OverrideEngine",W.CopilotRepository="X-Copilot-Repository",W.CopilotFileType="X-Copilot-FileType",W.CopilotUserKind="X-Copilot-UserKind",W.CopilotDogfood="X-Copilot-Dogfood",W.CopilotCustomModel="X-Copilot-CustomModel",W.CopilotOrgs="X-Copilot-Orgs",W.CopilotCustomModelNames="X-Copilot-CustomModelNames",W.CopilotTrackingId="X-Copilot-CopilotTrackingId",W.CopilotClientVersion="X-Copilot-ClientVersion",W.CopilotRelatedPluginVersionCppTools=sh+"msvscodecpptools",W.CopilotRelatedPluginVersionCMakeTools=sh+"msvscodecmaketools",W.CopilotRelatedPluginVersionMakefileTools=sh+"msvscodemakefiletools",W.CopilotRelatedPluginVersionCSharpDevKit=sh+"msdotnettoolscsdevkit",W.CopilotRelatedPluginVersionPython=sh+"mspythonpython",W.CopilotRelatedPluginVersionPylance=sh+"mspythonvscodepylance",W.CopilotRelatedPluginVersionJavaPack=sh+"vscjavavscodejavapack",W.CopilotRelatedPluginVersionTypescript=sh+"vscodetypescriptlanguagefeatures",W.CopilotRelatedPluginVersionTypescriptNext=sh+"msvscodevscodetypescriptnext",W.CopilotRelatedPluginVersionCSharp=sh+"msdotnettoolscsharp",W))(q9||{});var $Ct={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},B_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=$Ct[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();var zn=class{static{s(this,"Fetcher")}getImplementation(){return this}},H9=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function td(t){return!t||typeof t!="object"?!1:t instanceof H9||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(td,"isAbortError");var d4=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},py=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},jCt=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function W9(t,e=!0){return t instanceof Error?e&&"cause"in t&&W9(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof d4||t instanceof py||t?.message?.startsWith("net::")||jCt.has(t.code??""):!1}s(W9,"isNetworkError");var Eb=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new d4(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new d4(`Response body truncated: actualLength=${o}`,"Truncated"):new d4(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function N_(t,e,r,n,i,o,a,c,l){let u={...c,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Ts).sessionId,"VScode-MachineId":t.get(Ts).machineId,...F0(t),"X-GitHub-Api-Version":hy};n&&(u["OpenAI-Intent"]=n);let f={method:"POST",headers:u,json:o,timeout:l},p=t.get(zn);if(a){let m=new AbortController;a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",Fr.createAndMarkAsIssued({headerRequestId:i})),m.abort()}),f.signal=m.signal}return p.fetch(e,f).catch(m=>{if(GCt(m))return Bt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,f));throw m})}s(N_,"postRequest");function GCt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(GCt,"isInterruptedNetworkError");d();d();var hu=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ha(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var eW=Me(Ib()),tW=Me(require("os"));var VCt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function zCt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(VCt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(zCt,"buildExceptionDetail");function Nce(t,e){let r=t.get(ln),n=r.getEditorInfo(),i=t.get(hu),o={"#editor":n.devName??n.name,"#editor_version":my({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":my(r.getEditorPluginInfo()),"#session_id":t.get(Ts).sessionId,"#machine_id":t.get(Ts).machineId,"#architecture":tW.arch(),"#os_platform":tW.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(Nce,"buildContext");function ike(t,e){let r=t.get(ho),n=t.get(ln).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Nce(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=zCt(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let h=[...p.stacktrace].reverse();for(let m of h)if(m.filename?.startsWith("/github-copilot/"))return o;for(let m of h)if(m.in_app){u.push(`${m.filename?.replace(/^\.\//,"")}:${m.lineno}:${m.colno}`);break}u.push(`${h[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,eW.SHA256)(eW.enc.Utf16.parse(u.join(`
`))).toString()),o}s(ike,"buildPayload");d();var j9=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var ske=Me(Ib());var Or=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},L_=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},f4=class extends Or{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}dispose(){this.clear()}};var gy=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Or}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var ah=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:cke(r,n),verboseLogging:KCt(r,n),testMode:e,simulation:YCt(n)})}};function cg(t){return t.get(ah).flags.testMode}s(cg,"isRunningInTest");function p4(t){return cg(t)}s(p4,"shouldFailForDebugPurposes");function G9(t){return t.get(ah).flags.debug}s(G9,"isDebugEnabled");function ake(t){return t.get(ah).flags.verboseLogging}s(ake,"isVerboseLoggingEnabled");function cke(t,e){return t.includes("--debug")||Lce(e,"DEBUG")}s(cke,"determineDebugFlag");function YCt(t){return Lce(t,"SIMULATION")}s(YCt,"determineSimulationFlag");function nW(t){return t.get(ah).flags.simulation}s(nW,"isRunningInSimulation");function KCt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||Lce(e,"VERBOSE")||cke(t,e)}s(KCt,"determineVerboseLoggingEnabled");function Lce(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(Lce,"determineEnvFlagEnabled");d();var fc=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var dke=require("os"),fke=Me(require("path"));function V9(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(V9,"redactPaths");var JCt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),XCt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function Fce(t){if(JCt.has(t))return t;for(let e of XCt)if(e.test(t))return t;return V9(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(Fce,"redactMessage");function iW(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(iW,"escapeForRegExp");var ZCt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+iW((0,dke.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function Mce(t){return t.replace(ZCt,"~")}s(Mce,"redactHomeDir");var pke="[\\\\/]?([^:)]*)(?=:\\d)",lke=new RegExp(iW(fke.sep),"g"),uke=new RegExp(iW(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+pke,"gi");function Oce(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(uke.test(c))i.stack+=`
${V9(c.replace(uke,(l,u)=>"./"+u.replace(lke,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${V9(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(iW(f.replace(/[\\/]$/,""))+pke,"gi");if(p.test(c)){i.stack+=`
${V9(c.replace(p,(h,m)=>u+m.replace(lke,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${Mce(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=Mce(o));return t.cause instanceof Error&&(i.cause=Oce(t.cause,e,r,n)),i}s(Oce,"cloneError");function hke(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(hke,"errorMessageWithoutPath");function mke(t,e){return Oce(t,s(function(n){return Mce(hke(n))},"prepareMessage"),!0,e)}s(mke,"prepareErrorForRestrictedTelemetry");function gke(t,e,r=!1){return Oce(t,s(function(i){if(r)return Fce(hke(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=V9(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(gke,"redactError");d();d();var rd={};fa(rd,{HasPropertyKey:()=>oW,IsArray:()=>pc,IsAsyncIterator:()=>Qce,IsBigInt:()=>z9,IsBoolean:()=>j1,IsDate:()=>M_,IsFunction:()=>Uce,IsIterator:()=>qce,IsNull:()=>Hce,IsNumber:()=>O0,IsObject:()=>Jo,IsRegExp:()=>Y9,IsString:()=>gs,IsSymbol:()=>Wce,IsUint8Array:()=>G1,IsUndefined:()=>hc});d();function oW(t,e){return e in t}s(oW,"HasPropertyKey");function Qce(t){return Jo(t)&&!pc(t)&&!G1(t)&&Symbol.asyncIterator in t}s(Qce,"IsAsyncIterator");function pc(t){return Array.isArray(t)}s(pc,"IsArray");function z9(t){return typeof t=="bigint"}s(z9,"IsBigInt");function j1(t){return typeof t=="boolean"}s(j1,"IsBoolean");function M_(t){return t instanceof globalThis.Date}s(M_,"IsDate");function Uce(t){return typeof t=="function"}s(Uce,"IsFunction");function qce(t){return Jo(t)&&!pc(t)&&!G1(t)&&Symbol.iterator in t}s(qce,"IsIterator");function Hce(t){return t===null}s(Hce,"IsNull");function O0(t){return typeof t=="number"}s(O0,"IsNumber");function Jo(t){return typeof t=="object"&&t!==null}s(Jo,"IsObject");function Y9(t){return t instanceof globalThis.RegExp}s(Y9,"IsRegExp");function gs(t){return typeof t=="string"}s(gs,"IsString");function Wce(t){return typeof t=="symbol"}s(Wce,"IsSymbol");function G1(t){return t instanceof globalThis.Uint8Array}s(G1,"IsUint8Array");function hc(t){return t===void 0}s(hc,"IsUndefined");function e1t(t){return t.map(e=>sW(e))}s(e1t,"ArrayType");function t1t(t){return new Date(t.getTime())}s(t1t,"DateType");function r1t(t){return new Uint8Array(t)}s(r1t,"Uint8ArrayType");function n1t(t){return new RegExp(t.source,t.flags)}s(n1t,"RegExpType");function i1t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=sW(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=sW(t[r]);return e}s(i1t,"ObjectType");function sW(t){return pc(t)?e1t(t):M_(t)?t1t(t):G1(t)?r1t(t):Y9(t)?n1t(t):Jo(t)?i1t(t):t}s(sW,"Visit");function Hs(t){return sW(t)}s(Hs,"Clone");function h4(t,e){return e===void 0?Hs(t):Hs({...e,...t})}s(h4,"CloneType");d();d();d();function aW(t){return bi(t)&&globalThis.Symbol.asyncIterator in t}s(aW,"IsAsyncIterator");function cW(t){return bi(t)&&globalThis.Symbol.iterator in t}s(cW,"IsIterator");function $ce(t){return bi(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s($ce,"IsStandardObject");function lW(t){return t instanceof globalThis.Promise}s(lW,"IsPromise");function Od(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Od,"IsDate");function Ake(t){return t instanceof globalThis.Map}s(Ake,"IsMap");function yke(t){return t instanceof globalThis.Set}s(yke,"IsSet");function ch(t){return globalThis.ArrayBuffer.isView(t)}s(ch,"IsTypedArray");function m4(t){return t instanceof globalThis.Uint8Array}s(m4,"IsUint8Array");function Tn(t,e){return e in t}s(Tn,"HasPropertyKey");function bi(t){return t!==null&&typeof t=="object"}s(bi,"IsObject");function wn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(wn,"IsArray");function Ws(t){return t===void 0}s(Ws,"IsUndefined");function V1(t){return t===null}s(V1,"IsNull");function Ay(t){return typeof t=="boolean"}s(Ay,"IsBoolean");function Zr(t){return typeof t=="number"}s(Zr,"IsNumber");function uW(t){return globalThis.Number.isInteger(t)}s(uW,"IsInteger");function mu(t){return typeof t=="bigint"}s(mu,"IsBigInt");function ao(t){return typeof t=="string"}s(ao,"IsString");function Tb(t){return typeof t=="function"}s(Tb,"IsFunction");function z1(t){return typeof t=="symbol"}s(z1,"IsSymbol");function Q0(t){return mu(t)||Ay(t)||V1(t)||Zr(t)||ao(t)||z1(t)||Ws(t)}s(Q0,"IsValueType");var ws;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=bi(a);return t.AllowArrayObject?c:c&&!wn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Zr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ws(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(ws||(ws={}));d();function o1t(t){return globalThis.Object.freeze(t).map(e=>K9(e))}s(o1t,"ImmutableArray");function s1t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=K9(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=K9(t[r]);return globalThis.Object.freeze(e)}s(s1t,"ImmutableObject");function K9(t){return pc(t)?o1t(t):M_(t)?t:G1(t)?t:Y9(t)?t:Jo(t)?s1t(t):t}s(K9,"Immutable");function st(t,e){let r=e!==void 0?{...e,...t}:t;switch(ws.InstanceMode){case"freeze":return K9(r);case"clone":return Hs(r);default:return r}}s(st,"CreateType");d();var _n=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var ma=Symbol.for("TypeBox.Transform"),lg=Symbol.for("TypeBox.Readonly"),gu=Symbol.for("TypeBox.Optional"),lh=Symbol.for("TypeBox.Hint"),it=Symbol.for("TypeBox.Kind");function g4(t){return Jo(t)&&t[lg]==="Readonly"}s(g4,"IsReadonly");function Rf(t){return Jo(t)&&t[gu]==="Optional"}s(Rf,"IsOptional");function jce(t){return Ji(t,"Any")}s(jce,"IsAny");function Gce(t){return Ji(t,"Argument")}s(Gce,"IsArgument");function ug(t){return Ji(t,"Array")}s(ug,"IsArray");function F_(t){return Ji(t,"AsyncIterator")}s(F_,"IsAsyncIterator");function O_(t){return Ji(t,"BigInt")}s(O_,"IsBigInt");function Y1(t){return Ji(t,"Boolean")}s(Y1,"IsBoolean");function dg(t){return Ji(t,"Computed")}s(dg,"IsComputed");function fg(t){return Ji(t,"Constructor")}s(fg,"IsConstructor");function a1t(t){return Ji(t,"Date")}s(a1t,"IsDate");function pg(t){return Ji(t,"Function")}s(pg,"IsFunction");function hg(t){return Ji(t,"Integer")}s(hg,"IsInteger");function Pa(t){return Ji(t,"Intersect")}s(Pa,"IsIntersect");function Q_(t){return Ji(t,"Iterator")}s(Q_,"IsIterator");function Ji(t,e){return Jo(t)&&it in t&&t[it]===e}s(Ji,"IsKindOf");function dW(t){return j1(t)||O0(t)||gs(t)}s(dW,"IsLiteralValue");function U0(t){return Ji(t,"Literal")}s(U0,"IsLiteral");function q0(t){return Ji(t,"MappedKey")}s(q0,"IsMappedKey");function $s(t){return Ji(t,"MappedResult")}s($s,"IsMappedResult");function wb(t){return Ji(t,"Never")}s(wb,"IsNever");function c1t(t){return Ji(t,"Not")}s(c1t,"IsNot");function J9(t){return Ji(t,"Null")}s(J9,"IsNull");function mg(t){return Ji(t,"Number")}s(mg,"IsNumber");function mc(t){return Ji(t,"Object")}s(mc,"IsObject");function U_(t){return Ji(t,"Promise")}s(U_,"IsPromise");function q_(t){return Ji(t,"Record")}s(q_,"IsRecord");function Ha(t){return Ji(t,"Ref")}s(Ha,"IsRef");function Vce(t){return Ji(t,"RegExp")}s(Vce,"IsRegExp");function K1(t){return Ji(t,"String")}s(K1,"IsString");function X9(t){return Ji(t,"Symbol")}s(X9,"IsSymbol");function H0(t){return Ji(t,"TemplateLiteral")}s(H0,"IsTemplateLiteral");function l1t(t){return Ji(t,"This")}s(l1t,"IsThis");function Po(t){return Jo(t)&&ma in t}s(Po,"IsTransform");function W0(t){return Ji(t,"Tuple")}s(W0,"IsTuple");function J1(t){return Ji(t,"Undefined")}s(J1,"IsUndefined");function co(t){return Ji(t,"Union")}s(co,"IsUnion");function u1t(t){return Ji(t,"Uint8Array")}s(u1t,"IsUint8Array");function d1t(t){return Ji(t,"Unknown")}s(d1t,"IsUnknown");function f1t(t){return Ji(t,"Unsafe")}s(f1t,"IsUnsafe");function p1t(t){return Ji(t,"Void")}s(p1t,"IsVoid");function _b(t){return Jo(t)&&it in t&&gs(t[it])}s(_b,"IsKind");function ga(t){return jce(t)||Gce(t)||ug(t)||Y1(t)||O_(t)||F_(t)||dg(t)||fg(t)||a1t(t)||pg(t)||hg(t)||Pa(t)||Q_(t)||U0(t)||q0(t)||$s(t)||wb(t)||c1t(t)||J9(t)||mg(t)||mc(t)||U_(t)||q_(t)||Ha(t)||Vce(t)||K1(t)||X9(t)||H0(t)||l1t(t)||W0(t)||J1(t)||co(t)||u1t(t)||d1t(t)||f1t(t)||p1t(t)||_b(t)}s(ga,"IsSchema");var Le={};fa(Le,{IsAny:()=>xke,IsArgument:()=>bke,IsArray:()=>Ike,IsAsyncIterator:()=>Tke,IsBigInt:()=>wke,IsBoolean:()=>_ke,IsComputed:()=>Ske,IsConstructor:()=>Rke,IsDate:()=>kke,IsFunction:()=>Pke,IsImport:()=>C1t,IsInteger:()=>Dke,IsIntersect:()=>Bke,IsIterator:()=>Nke,IsKind:()=>s4e,IsKindOf:()=>Di,IsLiteral:()=>e6,IsLiteralBoolean:()=>v1t,IsLiteralNumber:()=>Mke,IsLiteralString:()=>Lke,IsLiteralValue:()=>Fke,IsMappedKey:()=>Oke,IsMappedResult:()=>Qke,IsNever:()=>Uke,IsNot:()=>qke,IsNull:()=>Hke,IsNumber:()=>Wke,IsObject:()=>$ke,IsOptional:()=>y1t,IsPromise:()=>jke,IsProperties:()=>fW,IsReadonly:()=>A1t,IsRecord:()=>Gke,IsRecursive:()=>E1t,IsRef:()=>Vke,IsRegExp:()=>zke,IsSchema:()=>js,IsString:()=>Yke,IsSymbol:()=>Kke,IsTemplateLiteral:()=>Jke,IsThis:()=>Xke,IsTransform:()=>Zke,IsTuple:()=>e4e,IsUint8Array:()=>r4e,IsUndefined:()=>t4e,IsUnion:()=>Jce,IsUnionLiteral:()=>x1t,IsUnknown:()=>n4e,IsUnsafe:()=>i4e,IsVoid:()=>o4e,TypeGuardUnknownTypeError:()=>zce});d();var zce=class extends _n{static{s(this,"TypeGuardUnknownTypeError")}},h1t=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Cke(t){try{return new RegExp(t),!0}catch{return!1}}s(Cke,"IsPattern");function Yce(t){if(!gs(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(Yce,"IsControlCharacterFree");function vke(t){return Kce(t)||js(t)}s(vke,"IsAdditionalProperties");function Z9(t){return hc(t)||z9(t)}s(Z9,"IsOptionalBigInt");function As(t){return hc(t)||O0(t)}s(As,"IsOptionalNumber");function Kce(t){return hc(t)||j1(t)}s(Kce,"IsOptionalBoolean");function Xo(t){return hc(t)||gs(t)}s(Xo,"IsOptionalString");function m1t(t){return hc(t)||gs(t)&&Yce(t)&&Cke(t)}s(m1t,"IsOptionalPattern");function g1t(t){return hc(t)||gs(t)&&Yce(t)}s(g1t,"IsOptionalFormat");function Eke(t){return hc(t)||js(t)}s(Eke,"IsOptionalSchema");function A1t(t){return Jo(t)&&t[lg]==="Readonly"}s(A1t,"IsReadonly");function y1t(t){return Jo(t)&&t[gu]==="Optional"}s(y1t,"IsOptional");function xke(t){return Di(t,"Any")&&Xo(t.$id)}s(xke,"IsAny");function bke(t){return Di(t,"Argument")&&O0(t.index)}s(bke,"IsArgument");function Ike(t){return Di(t,"Array")&&t.type==="array"&&Xo(t.$id)&&js(t.items)&&As(t.minItems)&&As(t.maxItems)&&Kce(t.uniqueItems)&&Eke(t.contains)&&As(t.minContains)&&As(t.maxContains)}s(Ike,"IsArray");function Tke(t){return Di(t,"AsyncIterator")&&t.type==="AsyncIterator"&&Xo(t.$id)&&js(t.items)}s(Tke,"IsAsyncIterator");function wke(t){return Di(t,"BigInt")&&t.type==="bigint"&&Xo(t.$id)&&Z9(t.exclusiveMaximum)&&Z9(t.exclusiveMinimum)&&Z9(t.maximum)&&Z9(t.minimum)&&Z9(t.multipleOf)}s(wke,"IsBigInt");function _ke(t){return Di(t,"Boolean")&&t.type==="boolean"&&Xo(t.$id)}s(_ke,"IsBoolean");function Ske(t){return Di(t,"Computed")&&gs(t.target)&&pc(t.parameters)&&t.parameters.every(e=>js(e))}s(Ske,"IsComputed");function Rke(t){return Di(t,"Constructor")&&t.type==="Constructor"&&Xo(t.$id)&&pc(t.parameters)&&t.parameters.every(e=>js(e))&&js(t.returns)}s(Rke,"IsConstructor");function kke(t){return Di(t,"Date")&&t.type==="Date"&&Xo(t.$id)&&As(t.exclusiveMaximumTimestamp)&&As(t.exclusiveMinimumTimestamp)&&As(t.maximumTimestamp)&&As(t.minimumTimestamp)&&As(t.multipleOfTimestamp)}s(kke,"IsDate");function Pke(t){return Di(t,"Function")&&t.type==="Function"&&Xo(t.$id)&&pc(t.parameters)&&t.parameters.every(e=>js(e))&&js(t.returns)}s(Pke,"IsFunction");function C1t(t){return Di(t,"Import")&&oW(t,"$defs")&&Jo(t.$defs)&&fW(t.$defs)&&oW(t,"$ref")&&gs(t.$ref)&&t.$ref in t.$defs}s(C1t,"IsImport");function Dke(t){return Di(t,"Integer")&&t.type==="integer"&&Xo(t.$id)&&As(t.exclusiveMaximum)&&As(t.exclusiveMinimum)&&As(t.maximum)&&As(t.minimum)&&As(t.multipleOf)}s(Dke,"IsInteger");function fW(t){return Jo(t)&&Object.entries(t).every(([e,r])=>Yce(e)&&js(r))}s(fW,"IsProperties");function Bke(t){return Di(t,"Intersect")&&!(gs(t.type)&&t.type!=="object")&&pc(t.allOf)&&t.allOf.every(e=>js(e)&&!Zke(e))&&Xo(t.type)&&(Kce(t.unevaluatedProperties)||Eke(t.unevaluatedProperties))&&Xo(t.$id)}s(Bke,"IsIntersect");function Nke(t){return Di(t,"Iterator")&&t.type==="Iterator"&&Xo(t.$id)&&js(t.items)}s(Nke,"IsIterator");function Di(t,e){return Jo(t)&&it in t&&t[it]===e}s(Di,"IsKindOf");function Lke(t){return e6(t)&&gs(t.const)}s(Lke,"IsLiteralString");function Mke(t){return e6(t)&&O0(t.const)}s(Mke,"IsLiteralNumber");function v1t(t){return e6(t)&&j1(t.const)}s(v1t,"IsLiteralBoolean");function e6(t){return Di(t,"Literal")&&Xo(t.$id)&&Fke(t.const)}s(e6,"IsLiteral");function Fke(t){return j1(t)||O0(t)||gs(t)}s(Fke,"IsLiteralValue");function Oke(t){return Di(t,"MappedKey")&&pc(t.keys)&&t.keys.every(e=>O0(e)||gs(e))}s(Oke,"IsMappedKey");function Qke(t){return Di(t,"MappedResult")&&fW(t.properties)}s(Qke,"IsMappedResult");function Uke(t){return Di(t,"Never")&&Jo(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(Uke,"IsNever");function qke(t){return Di(t,"Not")&&js(t.not)}s(qke,"IsNot");function Hke(t){return Di(t,"Null")&&t.type==="null"&&Xo(t.$id)}s(Hke,"IsNull");function Wke(t){return Di(t,"Number")&&t.type==="number"&&Xo(t.$id)&&As(t.exclusiveMaximum)&&As(t.exclusiveMinimum)&&As(t.maximum)&&As(t.minimum)&&As(t.multipleOf)}s(Wke,"IsNumber");function $ke(t){return Di(t,"Object")&&t.type==="object"&&Xo(t.$id)&&fW(t.properties)&&vke(t.additionalProperties)&&As(t.minProperties)&&As(t.maxProperties)}s($ke,"IsObject");function jke(t){return Di(t,"Promise")&&t.type==="Promise"&&Xo(t.$id)&&js(t.item)}s(jke,"IsPromise");function Gke(t){return Di(t,"Record")&&t.type==="object"&&Xo(t.$id)&&vke(t.additionalProperties)&&Jo(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&Cke(r[0])&&Jo(e.patternProperties)&&js(e.patternProperties[r[0]])})(t)}s(Gke,"IsRecord");function E1t(t){return Jo(t)&&lh in t&&t[lh]==="Recursive"}s(E1t,"IsRecursive");function Vke(t){return Di(t,"Ref")&&Xo(t.$id)&&gs(t.$ref)}s(Vke,"IsRef");function zke(t){return Di(t,"RegExp")&&Xo(t.$id)&&gs(t.source)&&gs(t.flags)&&As(t.maxLength)&&As(t.minLength)}s(zke,"IsRegExp");function Yke(t){return Di(t,"String")&&t.type==="string"&&Xo(t.$id)&&As(t.minLength)&&As(t.maxLength)&&m1t(t.pattern)&&g1t(t.format)}s(Yke,"IsString");function Kke(t){return Di(t,"Symbol")&&t.type==="symbol"&&Xo(t.$id)}s(Kke,"IsSymbol");function Jke(t){return Di(t,"TemplateLiteral")&&t.type==="string"&&gs(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Jke,"IsTemplateLiteral");function Xke(t){return Di(t,"This")&&Xo(t.$id)&&gs(t.$ref)}s(Xke,"IsThis");function Zke(t){return Jo(t)&&ma in t}s(Zke,"IsTransform");function e4e(t){return Di(t,"Tuple")&&t.type==="array"&&Xo(t.$id)&&O0(t.minItems)&&O0(t.maxItems)&&t.minItems===t.maxItems&&(hc(t.items)&&hc(t.additionalItems)&&t.minItems===0||pc(t.items)&&t.items.every(e=>js(e)))}s(e4e,"IsTuple");function t4e(t){return Di(t,"Undefined")&&t.type==="undefined"&&Xo(t.$id)}s(t4e,"IsUndefined");function x1t(t){return Jce(t)&&t.anyOf.every(e=>Lke(e)||Mke(e))}s(x1t,"IsUnionLiteral");function Jce(t){return Di(t,"Union")&&Xo(t.$id)&&Jo(t)&&pc(t.anyOf)&&t.anyOf.every(e=>js(e))}s(Jce,"IsUnion");function r4e(t){return Di(t,"Uint8Array")&&t.type==="Uint8Array"&&Xo(t.$id)&&As(t.minByteLength)&&As(t.maxByteLength)}s(r4e,"IsUint8Array");function n4e(t){return Di(t,"Unknown")&&Xo(t.$id)}s(n4e,"IsUnknown");function i4e(t){return Di(t,"Unsafe")}s(i4e,"IsUnsafe");function o4e(t){return Di(t,"Void")&&t.type==="void"&&Xo(t.$id)}s(o4e,"IsVoid");function s4e(t){return Jo(t)&&it in t&&gs(t[it])&&!h1t.includes(t[it])}s(s4e,"IsKind");function js(t){return Jo(t)&&(xke(t)||bke(t)||Ike(t)||_ke(t)||wke(t)||Tke(t)||Ske(t)||Rke(t)||kke(t)||Pke(t)||Dke(t)||Bke(t)||Nke(t)||e6(t)||Oke(t)||Qke(t)||Uke(t)||qke(t)||Hke(t)||Wke(t)||$ke(t)||jke(t)||Gke(t)||Vke(t)||zke(t)||Yke(t)||Kke(t)||Jke(t)||Xke(t)||e4e(t)||t4e(t)||Jce(t)||r4e(t)||n4e(t)||i4e(t)||o4e(t)||s4e(t))}s(js,"IsSchema");d();var Xce="(true|false)",t6="(0|[1-9][0-9]*)",Zce="(.*)",b1t="(?!.*)",Bwr=`^${Xce}$`,yy=`^${t6}$`,Cy=`^${Zce}$`,a4e=`^${b1t}$`;d();var gg={};fa(gg,{Clear:()=>T1t,Delete:()=>w1t,Entries:()=>I1t,Get:()=>R1t,Has:()=>_1t,Set:()=>S1t});d();var A4=new Map;function I1t(){return new Map(A4)}s(I1t,"Entries");function T1t(){return A4.clear()}s(T1t,"Clear");function w1t(t){return A4.delete(t)}s(w1t,"Delete");function _1t(t){return A4.has(t)}s(_1t,"Has");function S1t(t,e){A4.set(t,e)}s(S1t,"Set");function R1t(t){return A4.get(t)}s(R1t,"Get");var Qd={};fa(Qd,{Clear:()=>P1t,Delete:()=>D1t,Entries:()=>k1t,Get:()=>L1t,Has:()=>B1t,Set:()=>N1t});d();var y4=new Map;function k1t(){return new Map(y4)}s(k1t,"Entries");function P1t(){return y4.clear()}s(P1t,"Clear");function D1t(t){return y4.delete(t)}s(D1t,"Delete");function B1t(t){return y4.has(t)}s(B1t,"Has");function N1t(t,e){y4.set(t,e)}s(N1t,"Set");function L1t(t){return y4.get(t)}s(L1t,"Get");d();function c4e(t,e){return t.includes(e)}s(c4e,"SetIncludes");function l4e(t){return[...new Set(t)]}s(l4e,"SetDistinct");function M1t(t,e){return t.filter(r=>e.includes(r))}s(M1t,"SetIntersect");function F1t(t,e){return t.reduce((r,n)=>M1t(r,n),e)}s(F1t,"SetIntersectManyResolve");function u4e(t){return t.length===1?t[0]:t.length>1?F1t(t.slice(1),t[0]):[]}s(u4e,"SetIntersectMany");function d4e(t){let e=[];for(let r of t)e.push(...r);return e}s(d4e,"SetUnionMany");d();function Sb(t){return st({[it]:"Any"},t)}s(Sb,"Any");d();function C4(t,e){return st({[it]:"Array",type:"array",items:t},e)}s(C4,"Array");d();function f4e(t){return st({[it]:"Argument",index:t})}s(f4e,"Argument");d();function v4(t,e){return st({[it]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(v4,"AsyncIterator");d();d();function _s(t,e,r){return st({[it]:"Computed",target:t,parameters:e},r)}s(_s,"Computed");d();d();function O1t(t,e){let{[e]:r,...n}=t;return n}s(O1t,"DiscardKey");function Da(t,e){return e.reduce((r,n)=>O1t(r,n),t)}s(Da,"Discard");d();function Ai(t){return st({[it]:"Never",not:{}},t)}s(Ai,"Never");d();d();function mo(t){return st({[it]:"MappedResult",properties:t})}s(mo,"MappedResult");d();d();function E4(t,e,r){return st({[it]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(E4,"Constructor");d();function vy(t,e,r){return st({[it]:"Function",type:"Function",parameters:t,returns:e},r)}s(vy,"Function");d();d();d();d();function r6(t,e){return st({[it]:"Union",anyOf:t},e)}s(r6,"UnionCreate");function Q1t(t){return t.some(e=>Rf(e))}s(Q1t,"IsUnionOptional");function p4e(t){return t.map(e=>Rf(e)?U1t(e):e)}s(p4e,"RemoveOptionalFromRest");function U1t(t){return Da(t,[gu])}s(U1t,"RemoveOptionalFromType");function q1t(t,e){return Q1t(t)?nd(r6(p4e(t),e)):r6(p4e(t),e)}s(q1t,"ResolveUnion");function Ey(t,e){return t.length===1?st(t[0],e):t.length===0?Ai(e):q1t(t,e)}s(Ey,"UnionEvaluated");d();function Do(t,e){return t.length===0?Ai(e):t.length===1?st(t[0],e):r6(t,e)}s(Do,"Union");d();d();d();var pW=class extends _n{static{s(this,"TemplateLiteralParserError")}};function H1t(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(H1t,"Unescape");function ele(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(ele,"IsNonEscaped");function Z1(t,e){return ele(t,e,"(")}s(Z1,"IsOpenParen");function n6(t,e){return ele(t,e,")")}s(n6,"IsCloseParen");function h4e(t,e){return ele(t,e,"|")}s(h4e,"IsSeparator");function W1t(t){if(!(Z1(t,0)&&n6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(Z1(t,r)&&(e+=1),n6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(W1t,"IsGroup");function $1t(t){return t.slice(1,t.length-1)}s($1t,"InGroup");function j1t(t){let e=0;for(let r=0;r<t.length;r++)if(Z1(t,r)&&(e+=1),n6(t,r)&&(e-=1),h4e(t,r)&&e===0)return!0;return!1}s(j1t,"IsPrecedenceOr");function G1t(t){for(let e=0;e<t.length;e++)if(Z1(t,e))return!0;return!1}s(G1t,"IsPrecedenceAnd");function V1t(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(Z1(t,o)&&(e+=1),n6(t,o)&&(e-=1),h4e(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(x4(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(x4(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(V1t,"Or");function z1t(t){function e(i,o){if(!Z1(i,o))throw new pW("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(Z1(i,c)&&(a+=1),n6(i,c)&&(a-=1),a===0)return[o,c];throw new pW("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(Z1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(Z1(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(x4(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(x4(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(z1t,"And");function x4(t){return W1t(t)?x4($1t(t)):j1t(t)?V1t(t):G1t(t)?z1t(t):{type:"const",const:H1t(t)}}s(x4,"TemplateLiteralParse");function b4(t){return x4(t.slice(1,t.length-1))}s(b4,"TemplateLiteralParseExact");var tle=class extends _n{static{s(this,"TemplateLiteralFiniteError")}};function Y1t(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(Y1t,"IsNumberExpression");function K1t(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(K1t,"IsBooleanExpression");function J1t(t){return t.type==="const"&&t.const===".*"}s(J1t,"IsStringExpression");function H_(t){return Y1t(t)||J1t(t)?!1:K1t(t)?!0:t.type==="and"?t.expr.every(e=>H_(e)):t.type==="or"?t.expr.every(e=>H_(e)):t.type==="const"?!0:(()=>{throw new tle("Unknown expression type")})()}s(H_,"IsTemplateLiteralExpressionFinite");function hW(t){let e=b4(t.pattern);return H_(e)}s(hW,"IsTemplateLiteralFinite");d();var rle=class extends _n{static{s(this,"TemplateLiteralGenerateError")}};function*m4e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of m4e(t.slice(1)))yield`${e}${r}`}s(m4e,"GenerateReduce");function*X1t(t){return yield*m4e(t.expr.map(e=>[...i6(e)]))}s(X1t,"GenerateAnd");function*Z1t(t){for(let e of t.expr)yield*i6(e)}s(Z1t,"GenerateOr");function*evt(t){return yield t.const}s(evt,"GenerateConst");function*i6(t){return t.type==="and"?yield*X1t(t):t.type==="or"?yield*Z1t(t):t.type==="const"?yield*evt(t):(()=>{throw new rle("Unknown expression")})()}s(i6,"TemplateLiteralExpressionGenerate");function I4(t){let e=b4(t.pattern);return H_(e)?[...i6(e)]:[]}s(I4,"TemplateLiteralGenerate");d();d();function Xi(t,e){return st({[it]:"Literal",const:t,type:typeof t},e)}s(Xi,"Literal");d();function mW(t){return st({[it]:"Boolean",type:"boolean"},t)}s(mW,"Boolean");d();function T4(t){return st({[it]:"BigInt",type:"bigint"},t)}s(T4,"BigInt");d();function uh(t){return st({[it]:"Number",type:"number"},t)}s(uh,"Number");d();function Ud(t){return st({[it]:"String",type:"string"},t)}s(Ud,"String");function*tvt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield mW():e==="number"?yield uh():e==="bigint"?yield T4():e==="string"?yield Ud():yield(()=>{let r=e.split("|").map(n=>Xi(n.trim()));return r.length===0?Ai():r.length===1?r[0]:Ey(r)})()}s(tvt,"FromUnion");function*rvt(t){if(t[1]!=="{"){let e=Xi("$"),r=nle(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=tvt(t.slice(2,e)),n=nle(t.slice(e+1));return yield*[...r,...n]}yield Xi(t)}s(rvt,"FromTerminal");function*nle(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=Xi(t.slice(0,e)),n=rvt(t.slice(e));return yield*[r,...n]}yield Xi(t)}s(nle,"FromSyntax");function g4e(t){return[...nle(t)]}s(g4e,"TemplateLiteralSyntax");d();var ile=class extends _n{static{s(this,"TemplateLiteralPatternError")}};function nvt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(nvt,"Escape");function A4e(t,e){return H0(t)?t.pattern.slice(1,t.pattern.length-1):co(t)?`(${t.anyOf.map(r=>A4e(r,e)).join("|")})`:mg(t)?`${e}${t6}`:hg(t)?`${e}${t6}`:O_(t)?`${e}${t6}`:K1(t)?`${e}${Zce}`:U0(t)?`${e}${nvt(t.const.toString())}`:Y1(t)?`${e}${Xce}`:(()=>{throw new ile(`Unexpected Kind '${t[it]}'`)})()}s(A4e,"Visit");function ole(t){return`^${t.map(e=>A4e(e,"")).join("")}$`}s(ole,"TemplateLiteralPattern");d();function W_(t){let r=I4(t).map(n=>Xi(n));return Ey(r)}s(W_,"TemplateLiteralToUnion");d();function gW(t,e){let r=gs(t)?ole(g4e(t)):ole(t);return st({[it]:"TemplateLiteral",type:"string",pattern:r},e)}s(gW,"TemplateLiteral");function ivt(t){return I4(t).map(r=>r.toString())}s(ivt,"FromTemplateLiteral");function ovt(t){let e=[];for(let r of t)e.push(...kf(r));return e}s(ovt,"FromUnion");function svt(t){return[t.toString()]}s(svt,"FromLiteral");function kf(t){return[...new Set(H0(t)?ivt(t):co(t)?ovt(t.anyOf):U0(t)?svt(t.const):mg(t)?["[number]"]:hg(t)?["[number]"]:[])]}s(kf,"IndexPropertyKeys");d();function avt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=Rb(t,kf(e[i]),r);return n}s(avt,"FromProperties");function cvt(t,e,r){return avt(t,e.properties,r)}s(cvt,"FromMappedResult");function y4e(t,e,r){let n=cvt(t,e,r);return mo(n)}s(y4e,"IndexFromMappedResult");function v4e(t,e){return t.map(r=>E4e(r,e))}s(v4e,"FromRest");function lvt(t){return t.filter(e=>!wb(e))}s(lvt,"FromIntersectRest");function uvt(t,e){return AW(lvt(v4e(t,e)))}s(uvt,"FromIntersect");function dvt(t){return t.some(e=>wb(e))?[]:t}s(dvt,"FromUnionRest");function fvt(t,e){return Ey(dvt(v4e(t,e)))}s(fvt,"FromUnion");function pvt(t,e){return e in t?t[e]:e==="[number]"?Ey(t):Ai()}s(pvt,"FromTuple");function hvt(t,e){return e==="[number]"?t:Ai()}s(hvt,"FromArray");function mvt(t,e){return e in t?t[e]:Ai()}s(mvt,"FromProperty");function E4e(t,e){return Pa(t)?uvt(t.allOf,e):co(t)?fvt(t.anyOf,e):W0(t)?pvt(t.items??[],e):ug(t)?hvt(t.items,e):mc(t)?mvt(t.properties,e):Ai()}s(E4e,"IndexFromPropertyKey");function o6(t,e){return e.map(r=>E4e(t,r))}s(o6,"IndexFromPropertyKeys");function C4e(t,e){return Ey(o6(t,e))}s(C4e,"FromSchema");function Rb(t,e,r){if(Ha(t)||Ha(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!ga(t)||!ga(e))throw new _n(n);return _s("Index",[t,e])}return $s(e)?y4e(t,e,r):q0(e)?x4e(t,e,r):st(ga(e)?C4e(t,kf(e)):C4e(t,e),r)}s(Rb,"Index");function gvt(t,e,r){return{[e]:Rb(t,[e],Hs(r))}}s(gvt,"MappedIndexPropertyKey");function Avt(t,e,r){return e.reduce((n,i)=>({...n,...gvt(t,i,r)}),{})}s(Avt,"MappedIndexPropertyKeys");function yvt(t,e,r){return Avt(t,e.keys,r)}s(yvt,"MappedIndexProperties");function x4e(t,e,r){let n=yvt(t,e,r);return mo(n)}s(x4e,"IndexFromMappedKey");d();function w4(t,e){return st({[it]:"Iterator",type:"Iterator",items:t},e)}s(w4,"Iterator");d();function Cvt(t){let e=[];for(let r in t)Rf(t[r])||e.push(r);return e}s(Cvt,"RequiredKeys");function vvt(t,e){let r=Cvt(t),n=r.length>0?{[it]:"Object",type:"object",properties:t,required:r}:{[it]:"Object",type:"object",properties:t};return st(n,e)}s(vvt,"_Object");var Bo=vvt;d();function yW(t,e){return st({[it]:"Promise",type:"Promise",item:t},e)}s(yW,"Promise");d();d();function Evt(t){return st(Da(t,[lg]))}s(Evt,"RemoveReadonly");function xvt(t){return st({...t,[lg]:"Readonly"})}s(xvt,"AddReadonly");function bvt(t,e){return e===!1?Evt(t):xvt(t)}s(bvt,"ReadonlyWithFlag");function Pf(t,e){let r=e??!0;return $s(t)?b4e(t,r):bvt(t,r)}s(Pf,"Readonly");function Ivt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Pf(t[n],e);return r}s(Ivt,"FromProperties");function Tvt(t,e){return Ivt(t.properties,e)}s(Tvt,"FromMappedResult");function b4e(t,e){let r=Tvt(t,e);return mo(r)}s(b4e,"ReadonlyFromMappedResult");d();function dh(t,e){return st(t.length>0?{[it]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[it]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(dh,"Tuple");function I4e(t,e){return t in e?fh(t,e[t]):mo(e)}s(I4e,"FromMappedResult");function wvt(t){return{[t]:Xi(t)}}s(wvt,"MappedKeyToKnownMappedResultProperties");function _vt(t){let e={};for(let r of t)e[r]=Xi(r);return e}s(_vt,"MappedKeyToUnknownMappedResultProperties");function Svt(t,e){return c4e(e,t)?wvt(t):_vt(e)}s(Svt,"MappedKeyToMappedResultProperties");function Rvt(t,e){let r=Svt(t,e);return I4e(t,r)}s(Rvt,"FromMappedKey");function s6(t,e){return e.map(r=>fh(t,r))}s(s6,"FromRest");function kvt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=fh(t,e[n]);return r}s(kvt,"FromProperties");function fh(t,e){let r={...e};return Rf(e)?nd(fh(t,Da(e,[gu]))):g4(e)?Pf(fh(t,Da(e,[lg]))):$s(e)?I4e(t,e.properties):q0(e)?Rvt(t,e.keys):fg(e)?E4(s6(t,e.parameters),fh(t,e.returns),r):pg(e)?vy(s6(t,e.parameters),fh(t,e.returns),r):F_(e)?v4(fh(t,e.items),r):Q_(e)?w4(fh(t,e.items),r):Pa(e)?id(s6(t,e.allOf),r):co(e)?Do(s6(t,e.anyOf),r):W0(e)?dh(s6(t,e.items??[]),r):mc(e)?Bo(kvt(t,e.properties),r):ug(e)?C4(fh(t,e.items),r):U_(e)?yW(fh(t,e.item),r):e}s(fh,"FromSchemaType");function Pvt(t,e){let r={};for(let n of t)r[n]=fh(n,e);return r}s(Pvt,"MappedFunctionReturnType");function T4e(t,e,r){let n=ga(t)?kf(t):t,i=e({[it]:"MappedKey",keys:n}),o=Pvt(n,i);return Bo(o,r)}s(T4e,"Mapped");d();function Dvt(t){return st(Da(t,[gu]))}s(Dvt,"RemoveOptional");function Bvt(t){return st({...t,[gu]:"Optional"})}s(Bvt,"AddOptional");function Nvt(t,e){return e===!1?Dvt(t):Bvt(t)}s(Nvt,"OptionalWithFlag");function nd(t,e){let r=e??!0;return $s(t)?w4e(t,r):Nvt(t,r)}s(nd,"Optional");function Lvt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=nd(t[n],e);return r}s(Lvt,"FromProperties");function Mvt(t,e){return Lvt(t.properties,e)}s(Mvt,"FromMappedResult");function w4e(t,e){let r=Mvt(t,e);return mo(r)}s(w4e,"OptionalFromMappedResult");d();function a6(t,e={}){let r=t.every(i=>mc(i)),n=ga(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return st(e.unevaluatedProperties===!1||ga(e.unevaluatedProperties)||r?{...n,[it]:"Intersect",type:"object",allOf:t}:{...n,[it]:"Intersect",allOf:t},e)}s(a6,"IntersectCreate");function Fvt(t){return t.every(e=>Rf(e))}s(Fvt,"IsIntersectOptional");function Ovt(t){return Da(t,[gu])}s(Ovt,"RemoveOptionalFromType");function _4e(t){return t.map(e=>Rf(e)?Ovt(e):e)}s(_4e,"RemoveOptionalFromRest");function Qvt(t,e){return Fvt(t)?nd(a6(_4e(t),e)):a6(_4e(t),e)}s(Qvt,"ResolveIntersect");function AW(t,e={}){if(t.length===1)return st(t[0],e);if(t.length===0)return Ai(e);if(t.some(r=>Po(r)))throw new Error("Cannot intersect transform types");return Qvt(t,e)}s(AW,"IntersectEvaluated");d();function id(t,e){if(t.length===1)return st(t[0],e);if(t.length===0)return Ai(e);if(t.some(r=>Po(r)))throw new Error("Cannot intersect transform types");return a6(t,e)}s(id,"Intersect");d();function ph(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new _n("Ref: $ref must be a string");return st({[it]:"Ref",$ref:e},r)}s(ph,"Ref");function Uvt(t,e){return _s("Awaited",[_s(t,e)])}s(Uvt,"FromComputed");function qvt(t){return _s("Awaited",[ph(t)])}s(qvt,"FromRef");function Hvt(t){return id(S4e(t))}s(Hvt,"FromIntersect");function Wvt(t){return Do(S4e(t))}s(Wvt,"FromUnion");function $vt(t){return _4(t)}s($vt,"FromPromise");function S4e(t){return t.map(e=>_4(e))}s(S4e,"FromRest");function _4(t,e){return st(dg(t)?Uvt(t.target,t.parameters):Pa(t)?Hvt(t.allOf):co(t)?Wvt(t.anyOf):U_(t)?$vt(t.item):Ha(t)?qvt(t.$ref):t,e)}s(_4,"Awaited");d();d();d();d();function R4e(t){let e=[];for(let r of t)e.push(Df(r));return e}s(R4e,"FromRest");function jvt(t){let e=R4e(t);return d4e(e)}s(jvt,"FromIntersect");function Gvt(t){let e=R4e(t);return u4e(e)}s(Gvt,"FromUnion");function Vvt(t){return t.map((e,r)=>r.toString())}s(Vvt,"FromTuple");function zvt(t){return["[number]"]}s(zvt,"FromArray");function Yvt(t){return globalThis.Object.getOwnPropertyNames(t)}s(Yvt,"FromProperties");function Kvt(t){return sle?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(Kvt,"FromPatternProperties");function Df(t){return Pa(t)?jvt(t.allOf):co(t)?Gvt(t.anyOf):W0(t)?Vvt(t.items??[]):ug(t)?zvt(t.items):mc(t)?Yvt(t.properties):q_(t)?Kvt(t.patternProperties):[]}s(Df,"KeyOfPropertyKeys");var sle=!1;function ev(t){sle=!0;let e=Df(t);return sle=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(ev,"KeyOfPattern");function Jvt(t,e){return _s("KeyOf",[_s(t,e)])}s(Jvt,"FromComputed");function Xvt(t){return _s("KeyOf",[ph(t)])}s(Xvt,"FromRef");function Zvt(t,e){let r=Df(t),n=eEt(r),i=Ey(n);return st(i,e)}s(Zvt,"KeyOfFromType");function eEt(t){return t.map(e=>e==="[number]"?uh():Xi(e))}s(eEt,"KeyOfPropertyKeysToRest");function S4(t,e){return dg(t)?Jvt(t.target,t.parameters):Ha(t)?Xvt(t.$ref):$s(t)?k4e(t,e):Zvt(t,e)}s(S4,"KeyOf");function tEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=S4(t[n],Hs(e));return r}s(tEt,"FromProperties");function rEt(t,e){return tEt(t.properties,e)}s(rEt,"FromMappedResult");function k4e(t,e){let r=rEt(t,e);return mo(r)}s(k4e,"KeyOfFromMappedResult");d();function CW(t){let e=Df(t),r=o6(t,e);return e.map((n,i)=>[e[i],r[i]])}s(CW,"KeyOfPropertyEntries");function nEt(t){let e=[];for(let r of t)e.push(...Df(r));return l4e(e)}s(nEt,"CompositeKeys");function iEt(t){return t.filter(e=>!wb(e))}s(iEt,"FilterNever");function oEt(t,e){let r=[];for(let n of t)r.push(...o6(n,[e]));return iEt(r)}s(oEt,"CompositeProperty");function sEt(t,e){let r={};for(let n of e)r[n]=AW(oEt(t,n));return r}s(sEt,"CompositeProperties");function P4e(t,e){let r=nEt(t),n=sEt(t,r);return Bo(n,e)}s(P4e,"Composite");d();d();function vW(t){return st({[it]:"Date",type:"Date"},t)}s(vW,"Date");d();function EW(t){return st({[it]:"Null",type:"null"},t)}s(EW,"Null");d();function xW(t){return st({[it]:"Symbol",type:"symbol"},t)}s(xW,"Symbol");d();function bW(t){return st({[it]:"Undefined",type:"undefined"},t)}s(bW,"Undefined");d();function IW(t){return st({[it]:"Uint8Array",type:"Uint8Array"},t)}s(IW,"Uint8Array");d();function Ag(t){return st({[it]:"Unknown"},t)}s(Ag,"Unknown");function aEt(t){return t.map(e=>ale(e,!1))}s(aEt,"FromArray");function cEt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Pf(ale(t[r],!1));return e}s(cEt,"FromProperties");function TW(t,e){return e===!0?t:Pf(t)}s(TW,"ConditionalReadonly");function ale(t,e){return Qce(t)?TW(Sb(),e):qce(t)?TW(Sb(),e):pc(t)?Pf(dh(aEt(t))):G1(t)?IW():M_(t)?vW():Jo(t)?TW(Bo(cEt(t)),e):Uce(t)?TW(vy([],Ag()),e):hc(t)?bW():Hce(t)?EW():Wce(t)?xW():z9(t)?T4():O0(t)?Xi(t):j1(t)?Xi(t):gs(t)?Xi(t):Bo({})}s(ale,"FromValue");function D4e(t,e){return st(ale(t,!0),e)}s(D4e,"Const");d();function B4e(t,e){return fg(t)?dh(t.parameters,e):Ai(e)}s(B4e,"ConstructorParameters");d();function N4e(t,e){if(hc(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>Xi(o));return Do(i,{...e,[lh]:"Enum"})}s(N4e,"Enum");d();d();d();var lle=class extends _n{static{s(this,"ExtendsResolverError")}},at;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(at||(at={}));function hh(t){return t===at.False?t:at.True}s(hh,"IntoBooleanResult");function R4(t){throw new lle(t)}s(R4,"Throw");function Lc(t){return Le.IsNever(t)||Le.IsIntersect(t)||Le.IsUnion(t)||Le.IsUnknown(t)||Le.IsAny(t)}s(Lc,"IsStructuralRight");function Mc(t,e){return Le.IsNever(e)?q4e(t,e):Le.IsIntersect(e)?wW(t,e):Le.IsUnion(e)?ple(t,e):Le.IsUnknown(e)?j4e(t,e):Le.IsAny(e)?fle(t,e):R4("StructuralRight")}s(Mc,"StructuralRight");function fle(t,e){return at.True}s(fle,"FromAnyRight");function lEt(t,e){return Le.IsIntersect(e)?wW(t,e):Le.IsUnion(e)&&e.anyOf.some(r=>Le.IsAny(r)||Le.IsUnknown(r))?at.True:Le.IsUnion(e)?at.Union:Le.IsUnknown(e)||Le.IsAny(e)?at.True:at.Union}s(lEt,"FromAny");function uEt(t,e){return Le.IsUnknown(t)?at.False:Le.IsAny(t)?at.Union:Le.IsNever(t)?at.True:at.False}s(uEt,"FromArrayRight");function dEt(t,e){return Le.IsObject(e)&&_W(e)?at.True:Lc(e)?Mc(t,e):Le.IsArray(e)?hh(Zo(t.items,e.items)):at.False}s(dEt,"FromArray");function fEt(t,e){return Lc(e)?Mc(t,e):Le.IsAsyncIterator(e)?hh(Zo(t.items,e.items)):at.False}s(fEt,"FromAsyncIterator");function pEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsBigInt(e)?at.True:at.False}s(pEt,"FromBigInt");function Q4e(t,e){return Le.IsLiteralBoolean(t)||Le.IsBoolean(t)?at.True:at.False}s(Q4e,"FromBooleanRight");function hEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsBoolean(e)?at.True:at.False}s(hEt,"FromBoolean");function mEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsConstructor(e)?t.parameters.length>e.parameters.length?at.False:t.parameters.every((r,n)=>hh(Zo(e.parameters[n],r))===at.True)?hh(Zo(t.returns,e.returns)):at.False:at.False}s(mEt,"FromConstructor");function gEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsDate(e)?at.True:at.False}s(gEt,"FromDate");function AEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsFunction(e)?t.parameters.length>e.parameters.length?at.False:t.parameters.every((r,n)=>hh(Zo(e.parameters[n],r))===at.True)?hh(Zo(t.returns,e.returns)):at.False:at.False}s(AEt,"FromFunction");function U4e(t,e){return Le.IsLiteral(t)&&rd.IsNumber(t.const)||Le.IsNumber(t)||Le.IsInteger(t)?at.True:at.False}s(U4e,"FromIntegerRight");function yEt(t,e){return Le.IsInteger(e)||Le.IsNumber(e)?at.True:Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):at.False}s(yEt,"FromInteger");function wW(t,e){return e.allOf.every(r=>Zo(t,r)===at.True)?at.True:at.False}s(wW,"FromIntersectRight");function CEt(t,e){return t.allOf.some(r=>Zo(r,e)===at.True)?at.True:at.False}s(CEt,"FromIntersect");function vEt(t,e){return Lc(e)?Mc(t,e):Le.IsIterator(e)?hh(Zo(t.items,e.items)):at.False}s(vEt,"FromIterator");function EEt(t,e){return Le.IsLiteral(e)&&e.const===t.const?at.True:Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsString(e)?$4e(t,e):Le.IsNumber(e)?H4e(t,e):Le.IsInteger(e)?U4e(t,e):Le.IsBoolean(e)?Q4e(t,e):at.False}s(EEt,"FromLiteral");function q4e(t,e){return at.False}s(q4e,"FromNeverRight");function xEt(t,e){return at.True}s(xEt,"FromNever");function L4e(t){let[e,r]=[t,0];for(;Le.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Ag()}s(L4e,"UnwrapTNot");function bEt(t,e){return Le.IsNot(t)?Zo(L4e(t),e):Le.IsNot(e)?Zo(t,L4e(e)):R4("Invalid fallthrough for Not")}s(bEt,"FromNot");function IEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsNull(e)?at.True:at.False}s(IEt,"FromNull");function H4e(t,e){return Le.IsLiteralNumber(t)||Le.IsNumber(t)||Le.IsInteger(t)?at.True:at.False}s(H4e,"FromNumberRight");function TEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsInteger(e)||Le.IsNumber(e)?at.True:at.False}s(TEt,"FromNumber");function Bf(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(Bf,"IsObjectPropertyCount");function M4e(t){return _W(t)}s(M4e,"IsObjectStringLike");function F4e(t){return Bf(t,0)||Bf(t,1)&&"description"in t.properties&&Le.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Le.IsString(t.properties.description.anyOf[0])&&Le.IsUndefined(t.properties.description.anyOf[1])||Le.IsString(t.properties.description.anyOf[1])&&Le.IsUndefined(t.properties.description.anyOf[0]))}s(F4e,"IsObjectSymbolLike");function cle(t){return Bf(t,0)}s(cle,"IsObjectNumberLike");function O4e(t){return Bf(t,0)}s(O4e,"IsObjectBooleanLike");function wEt(t){return Bf(t,0)}s(wEt,"IsObjectBigIntLike");function _Et(t){return Bf(t,0)}s(_Et,"IsObjectDateLike");function SEt(t){return _W(t)}s(SEt,"IsObjectUint8ArrayLike");function REt(t){let e=uh();return Bf(t,0)||Bf(t,1)&&"length"in t.properties&&hh(Zo(t.properties.length,e))===at.True}s(REt,"IsObjectFunctionLike");function kEt(t){return Bf(t,0)}s(kEt,"IsObjectConstructorLike");function _W(t){let e=uh();return Bf(t,0)||Bf(t,1)&&"length"in t.properties&&hh(Zo(t.properties.length,e))===at.True}s(_W,"IsObjectArrayLike");function PEt(t){let e=vy([Sb()],Sb());return Bf(t,0)||Bf(t,1)&&"then"in t.properties&&hh(Zo(t.properties.then,e))===at.True}s(PEt,"IsObjectPromiseLike");function W4e(t,e){return Zo(t,e)===at.False||Le.IsOptional(t)&&!Le.IsOptional(e)?at.False:at.True}s(W4e,"Property");function od(t,e){return Le.IsUnknown(t)?at.False:Le.IsAny(t)?at.Union:Le.IsNever(t)||Le.IsLiteralString(t)&&M4e(e)||Le.IsLiteralNumber(t)&&cle(e)||Le.IsLiteralBoolean(t)&&O4e(e)||Le.IsSymbol(t)&&F4e(e)||Le.IsBigInt(t)&&wEt(e)||Le.IsString(t)&&M4e(e)||Le.IsSymbol(t)&&F4e(e)||Le.IsNumber(t)&&cle(e)||Le.IsInteger(t)&&cle(e)||Le.IsBoolean(t)&&O4e(e)||Le.IsUint8Array(t)&&SEt(e)||Le.IsDate(t)&&_Et(e)||Le.IsConstructor(t)&&kEt(e)||Le.IsFunction(t)&&REt(e)?at.True:Le.IsRecord(t)&&Le.IsString(ule(t))?e[lh]==="Record"?at.True:at.False:Le.IsRecord(t)&&Le.IsNumber(ule(t))?Bf(e,0)?at.True:at.False:at.False}s(od,"FromObjectRight");function DEt(t,e){return Lc(e)?Mc(t,e):Le.IsRecord(e)?mh(t,e):Le.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Le.IsOptional(e.properties[r]))return at.False;if(Le.IsOptional(e.properties[r]))return at.True;if(W4e(t.properties[r],e.properties[r])===at.False)return at.False}return at.True})():at.False}s(DEt,"FromObject");function BEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)&&PEt(e)?at.True:Le.IsPromise(e)?hh(Zo(t.item,e.item)):at.False}s(BEt,"FromPromise");function ule(t){return yy in t.patternProperties?uh():Cy in t.patternProperties?Ud():R4("Unknown record key pattern")}s(ule,"RecordKey");function dle(t){return yy in t.patternProperties?t.patternProperties[yy]:Cy in t.patternProperties?t.patternProperties[Cy]:R4("Unable to get record value schema")}s(dle,"RecordValue");function mh(t,e){let[r,n]=[ule(e),dle(e)];return Le.IsLiteralString(t)&&Le.IsNumber(r)&&hh(Zo(t,n))===at.True?at.True:Le.IsUint8Array(t)&&Le.IsNumber(r)||Le.IsString(t)&&Le.IsNumber(r)||Le.IsArray(t)&&Le.IsNumber(r)?Zo(t,n):Le.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(W4e(n,t.properties[i])===at.False)return at.False;return at.True})():at.False}s(mh,"FromRecordRight");function NEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?Zo(dle(t),dle(e)):at.False}s(NEt,"FromRecord");function LEt(t,e){let r=Le.IsRegExp(t)?Ud():t,n=Le.IsRegExp(e)?Ud():e;return Zo(r,n)}s(LEt,"FromRegExp");function $4e(t,e){return Le.IsLiteral(t)&&rd.IsString(t.const)||Le.IsString(t)?at.True:at.False}s($4e,"FromStringRight");function MEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsString(e)?at.True:at.False}s(MEt,"FromString");function FEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsSymbol(e)?at.True:at.False}s(FEt,"FromSymbol");function OEt(t,e){return Le.IsTemplateLiteral(t)?Zo(W_(t),e):Le.IsTemplateLiteral(e)?Zo(t,W_(e)):R4("Invalid fallthrough for TemplateLiteral")}s(OEt,"FromTemplateLiteral");function QEt(t,e){return Le.IsArray(e)&&t.items!==void 0&&t.items.every(r=>Zo(r,e.items)===at.True)}s(QEt,"IsArrayOfTuple");function UEt(t,e){return Le.IsNever(t)?at.True:Le.IsUnknown(t)?at.False:Le.IsAny(t)?at.Union:at.False}s(UEt,"FromTupleRight");function qEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)&&_W(e)||Le.IsArray(e)&&QEt(t,e)?at.True:Le.IsTuple(e)?rd.IsUndefined(t.items)&&!rd.IsUndefined(e.items)||!rd.IsUndefined(t.items)&&rd.IsUndefined(e.items)?at.False:rd.IsUndefined(t.items)&&!rd.IsUndefined(e.items)||t.items.every((r,n)=>Zo(r,e.items[n])===at.True)?at.True:at.False:at.False}s(qEt,"FromTuple");function HEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsUint8Array(e)?at.True:at.False}s(HEt,"FromUint8Array");function WEt(t,e){return Lc(e)?Mc(t,e):Le.IsObject(e)?od(t,e):Le.IsRecord(e)?mh(t,e):Le.IsVoid(e)?GEt(t,e):Le.IsUndefined(e)?at.True:at.False}s(WEt,"FromUndefined");function ple(t,e){return e.anyOf.some(r=>Zo(t,r)===at.True)?at.True:at.False}s(ple,"FromUnionRight");function $Et(t,e){return t.anyOf.every(r=>Zo(r,e)===at.True)?at.True:at.False}s($Et,"FromUnion");function j4e(t,e){return at.True}s(j4e,"FromUnknownRight");function jEt(t,e){return Le.IsNever(e)?q4e(t,e):Le.IsIntersect(e)?wW(t,e):Le.IsUnion(e)?ple(t,e):Le.IsAny(e)?fle(t,e):Le.IsString(e)?$4e(t,e):Le.IsNumber(e)?H4e(t,e):Le.IsInteger(e)?U4e(t,e):Le.IsBoolean(e)?Q4e(t,e):Le.IsArray(e)?uEt(t,e):Le.IsTuple(e)?UEt(t,e):Le.IsObject(e)?od(t,e):Le.IsUnknown(e)?at.True:at.False}s(jEt,"FromUnknown");function GEt(t,e){return Le.IsUndefined(t)||Le.IsUndefined(t)?at.True:at.False}s(GEt,"FromVoidRight");function VEt(t,e){return Le.IsIntersect(e)?wW(t,e):Le.IsUnion(e)?ple(t,e):Le.IsUnknown(e)?j4e(t,e):Le.IsAny(e)?fle(t,e):Le.IsObject(e)?od(t,e):Le.IsVoid(e)?at.True:at.False}s(VEt,"FromVoid");function Zo(t,e){return Le.IsTemplateLiteral(t)||Le.IsTemplateLiteral(e)?OEt(t,e):Le.IsRegExp(t)||Le.IsRegExp(e)?LEt(t,e):Le.IsNot(t)||Le.IsNot(e)?bEt(t,e):Le.IsAny(t)?lEt(t,e):Le.IsArray(t)?dEt(t,e):Le.IsBigInt(t)?pEt(t,e):Le.IsBoolean(t)?hEt(t,e):Le.IsAsyncIterator(t)?fEt(t,e):Le.IsConstructor(t)?mEt(t,e):Le.IsDate(t)?gEt(t,e):Le.IsFunction(t)?AEt(t,e):Le.IsInteger(t)?yEt(t,e):Le.IsIntersect(t)?CEt(t,e):Le.IsIterator(t)?vEt(t,e):Le.IsLiteral(t)?EEt(t,e):Le.IsNever(t)?xEt(t,e):Le.IsNull(t)?IEt(t,e):Le.IsNumber(t)?TEt(t,e):Le.IsObject(t)?DEt(t,e):Le.IsRecord(t)?NEt(t,e):Le.IsString(t)?MEt(t,e):Le.IsSymbol(t)?FEt(t,e):Le.IsTuple(t)?qEt(t,e):Le.IsPromise(t)?BEt(t,e):Le.IsUint8Array(t)?HEt(t,e):Le.IsUndefined(t)?WEt(t,e):Le.IsUnion(t)?$Et(t,e):Le.IsUnknown(t)?jEt(t,e):Le.IsVoid(t)?VEt(t,e):R4(`Unknown left type operand '${t[it]}'`)}s(Zo,"Visit");function kb(t,e){return Zo(t,e)}s(kb,"ExtendsCheck");d();d();d();function zEt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=k4(t[a],e,r,n,Hs(i));return o}s(zEt,"FromProperties");function YEt(t,e,r,n,i){return zEt(t.properties,e,r,n,i)}s(YEt,"FromMappedResult");function G4e(t,e,r,n,i){let o=YEt(t,e,r,n,i);return mo(o)}s(G4e,"ExtendsFromMappedResult");function KEt(t,e,r,n){let i=kb(t,e);return i===at.Union?Do([r,n]):i===at.True?r:n}s(KEt,"ExtendsResolve");function k4(t,e,r,n,i){return $s(t)?G4e(t,e,r,n,i):q0(t)?st(V4e(t,e,r,n,i)):st(KEt(t,e,r,n),i)}s(k4,"Extends");function JEt(t,e,r,n,i){return{[t]:k4(Xi(t),e,r,n,Hs(i))}}s(JEt,"FromPropertyKey");function XEt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...JEt(a,e,r,n,i)}),{})}s(XEt,"FromPropertyKeys");function ZEt(t,e,r,n,i){return XEt(t.keys,e,r,n,i)}s(ZEt,"FromMappedKey");function V4e(t,e,r,n,i){let o=ZEt(t,e,r,n,i);return mo(o)}s(V4e,"ExtendsFromMappedKey");d();function ext(t){return t.allOf.every(e=>tv(e))}s(ext,"Intersect");function txt(t){return t.anyOf.some(e=>tv(e))}s(txt,"Union");function rxt(t){return!tv(t.not)}s(rxt,"Not");function tv(t){return t[it]==="Intersect"?ext(t):t[it]==="Union"?txt(t):t[it]==="Not"?rxt(t):t[it]==="Undefined"}s(tv,"ExtendsUndefinedCheck");d();function z4e(t,e){return P4(W_(t),e)}s(z4e,"ExcludeFromTemplateLiteral");function nxt(t,e){let r=t.filter(n=>kb(n,e)===at.False);return r.length===1?r[0]:Do(r)}s(nxt,"ExcludeRest");function P4(t,e,r={}){return H0(t)?st(z4e(t,e),r):$s(t)?st(Y4e(t,e),r):st(co(t)?nxt(t.anyOf,e):kb(t,e)!==at.False?Ai():t,r)}s(P4,"Exclude");function ixt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=P4(t[n],e);return r}s(ixt,"FromProperties");function oxt(t,e){return ixt(t.properties,e)}s(oxt,"FromMappedResult");function Y4e(t,e){let r=oxt(t,e);return mo(r)}s(Y4e,"ExcludeFromMappedResult");d();d();d();function K4e(t,e){return D4(W_(t),e)}s(K4e,"ExtractFromTemplateLiteral");function sxt(t,e){let r=t.filter(n=>kb(n,e)!==at.False);return r.length===1?r[0]:Do(r)}s(sxt,"ExtractRest");function D4(t,e,r){return H0(t)?st(K4e(t,e),r):$s(t)?st(J4e(t,e),r):st(co(t)?sxt(t.anyOf,e):kb(t,e)!==at.False?t:Ai(),r)}s(D4,"Extract");function axt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=D4(t[n],e);return r}s(axt,"FromProperties");function cxt(t,e){return axt(t.properties,e)}s(cxt,"FromMappedResult");function J4e(t,e){let r=cxt(t,e);return mo(r)}s(J4e,"ExtractFromMappedResult");d();function X4e(t,e){return fg(t)?st(t.returns,e):Ai(e)}s(X4e,"InstanceType");d();d();function SW(t){return Pf(nd(t))}s(SW,"ReadonlyOptional");d();function $_(t,e,r){return st({[it]:"Record",type:"object",patternProperties:{[t]:e}},r)}s($_,"RecordCreateFromPattern");function hle(t,e,r){let n={};for(let i of t)n[i]=e;return Bo(n,{...r,[lh]:"Record"})}s(hle,"RecordCreateFromKeys");function lxt(t,e,r){return hW(t)?hle(kf(t),e,r):$_(t.pattern,e,r)}s(lxt,"FromTemplateLiteralKey");function uxt(t,e,r){return hle(kf(Do(t)),e,r)}s(uxt,"FromUnionKey");function dxt(t,e,r){return hle([t.toString()],e,r)}s(dxt,"FromLiteralKey");function fxt(t,e,r){return $_(t.source,e,r)}s(fxt,"FromRegExpKey");function pxt(t,e,r){let n=hc(t.pattern)?Cy:t.pattern;return $_(n,e,r)}s(pxt,"FromStringKey");function hxt(t,e,r){return $_(Cy,e,r)}s(hxt,"FromAnyKey");function mxt(t,e,r){return $_(a4e,e,r)}s(mxt,"FromNeverKey");function gxt(t,e,r){return Bo({true:e,false:e},r)}s(gxt,"FromBooleanKey");function Axt(t,e,r){return $_(yy,e,r)}s(Axt,"FromIntegerKey");function yxt(t,e,r){return $_(yy,e,r)}s(yxt,"FromNumberKey");function RW(t,e,r={}){return co(t)?uxt(t.anyOf,e,r):H0(t)?lxt(t,e,r):U0(t)?dxt(t.const,e,r):Y1(t)?gxt(t,e,r):hg(t)?Axt(t,e,r):mg(t)?yxt(t,e,r):Vce(t)?fxt(t,e,r):K1(t)?pxt(t,e,r):jce(t)?hxt(t,e,r):wb(t)?mxt(t,e,r):Ai(r)}s(RW,"Record");function kW(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(kW,"RecordPattern");function Z4e(t){let e=kW(t);return e===Cy?Ud():e===yy?uh():Ud({pattern:e})}s(Z4e,"RecordKey");function PW(t){return t.patternProperties[kW(t)]}s(PW,"RecordValue");function Cxt(t,e){return e.parameters=c6(t,e.parameters),e.returns=yg(t,e.returns),e}s(Cxt,"FromConstructor");function vxt(t,e){return e.parameters=c6(t,e.parameters),e.returns=yg(t,e.returns),e}s(vxt,"FromFunction");function Ext(t,e){return e.allOf=c6(t,e.allOf),e}s(Ext,"FromIntersect");function xxt(t,e){return e.anyOf=c6(t,e.anyOf),e}s(xxt,"FromUnion");function bxt(t,e){return hc(e.items)||(e.items=c6(t,e.items)),e}s(bxt,"FromTuple");function Ixt(t,e){return e.items=yg(t,e.items),e}s(Ixt,"FromArray");function Txt(t,e){return e.items=yg(t,e.items),e}s(Txt,"FromAsyncIterator");function wxt(t,e){return e.items=yg(t,e.items),e}s(wxt,"FromIterator");function _xt(t,e){return e.item=yg(t,e.item),e}s(_xt,"FromPromise");function Sxt(t,e){let r=Dxt(t,e.properties);return{...e,...Bo(r)}}s(Sxt,"FromObject");function Rxt(t,e){let r=yg(t,Z4e(e)),n=yg(t,PW(e)),i=RW(r,n);return{...e,...i}}s(Rxt,"FromRecord");function kxt(t,e){return e.index in t?t[e.index]:Ag()}s(kxt,"FromArgument");function Pxt(t,e){let r=g4(e),n=Rf(e),i=yg(t,e);return r&&n?SW(i):r&&!n?Pf(i):!r&&n?nd(i):i}s(Pxt,"FromProperty");function Dxt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:Pxt(t,e[n])}),{})}s(Dxt,"FromProperties");function c6(t,e){return e.map(r=>yg(t,r))}s(c6,"FromTypes");function yg(t,e){return fg(e)?Cxt(t,e):pg(e)?vxt(t,e):Pa(e)?Ext(t,e):co(e)?xxt(t,e):W0(e)?bxt(t,e):ug(e)?Ixt(t,e):F_(e)?Txt(t,e):Q_(e)?wxt(t,e):U_(e)?_xt(t,e):mc(e)?Sxt(t,e):q_(e)?Rxt(t,e):Gce(e)?kxt(t,e):e}s(yg,"FromType");function ePe(t,e){return yg(e,h4(t))}s(ePe,"Instantiate");d();function tPe(t){return st({[it]:"Integer",type:"integer"},t)}s(tPe,"Integer");d();d();d();function Bxt(t,e,r){return{[t]:Cg(Xi(t),e,Hs(r))}}s(Bxt,"MappedIntrinsicPropertyKey");function Nxt(t,e,r){return t.reduce((i,o)=>({...i,...Bxt(o,e,r)}),{})}s(Nxt,"MappedIntrinsicPropertyKeys");function Lxt(t,e,r){return Nxt(t.keys,e,r)}s(Lxt,"MappedIntrinsicProperties");function rPe(t,e,r){let n=Lxt(t,e,r);return mo(n)}s(rPe,"IntrinsicFromMappedKey");function Mxt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(Mxt,"ApplyUncapitalize");function Fxt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(Fxt,"ApplyCapitalize");function Oxt(t){return t.toUpperCase()}s(Oxt,"ApplyUppercase");function Qxt(t){return t.toLowerCase()}s(Qxt,"ApplyLowercase");function Uxt(t,e,r){let n=b4(t.pattern);if(!H_(n))return{...t,pattern:nPe(t.pattern,e)};let a=[...i6(n)].map(u=>Xi(u)),c=iPe(a,e),l=Do(c);return gW([l],r)}s(Uxt,"FromTemplateLiteral");function nPe(t,e){return typeof t=="string"?e==="Uncapitalize"?Mxt(t):e==="Capitalize"?Fxt(t):e==="Uppercase"?Oxt(t):e==="Lowercase"?Qxt(t):t:t.toString()}s(nPe,"FromLiteralValue");function iPe(t,e){return t.map(r=>Cg(r,e))}s(iPe,"FromRest");function Cg(t,e,r={}){return q0(t)?rPe(t,e,r):H0(t)?Uxt(t,e,r):co(t)?Do(iPe(t.anyOf,e),r):U0(t)?Xi(nPe(t.const,e),r):st(t,r)}s(Cg,"Intrinsic");function oPe(t,e={}){return Cg(t,"Capitalize",e)}s(oPe,"Capitalize");d();function sPe(t,e={}){return Cg(t,"Lowercase",e)}s(sPe,"Lowercase");d();function aPe(t,e={}){return Cg(t,"Uncapitalize",e)}s(aPe,"Uncapitalize");d();function cPe(t,e={}){return Cg(t,"Uppercase",e)}s(cPe,"Uppercase");d();d();d();d();d();function qxt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Pb(t[i],e,Hs(r));return n}s(qxt,"FromProperties");function Hxt(t,e,r){return qxt(t.properties,e,r)}s(Hxt,"FromMappedResult");function lPe(t,e,r){let n=Hxt(t,e,r);return mo(n)}s(lPe,"OmitFromMappedResult");function Wxt(t,e){return t.map(r=>mle(r,e))}s(Wxt,"FromIntersect");function $xt(t,e){return t.map(r=>mle(r,e))}s($xt,"FromUnion");function jxt(t,e){let{[e]:r,...n}=t;return n}s(jxt,"FromProperty");function Gxt(t,e){return e.reduce((r,n)=>jxt(r,n),t)}s(Gxt,"FromProperties");function Vxt(t,e){let r=Da(t,[ma,"$id","required","properties"]),n=Gxt(t.properties,e);return Bo(n,r)}s(Vxt,"FromObject");function zxt(t){let e=t.reduce((r,n)=>dW(n)?[...r,Xi(n)]:r,[]);return Do(e)}s(zxt,"UnionFromPropertyKeys");function mle(t,e){return Pa(t)?id(Wxt(t.allOf,e)):co(t)?Do($xt(t.anyOf,e)):mc(t)?Vxt(t,e):Bo({})}s(mle,"OmitResolve");function Pb(t,e,r){let n=pc(e)?zxt(e):e,i=ga(e)?kf(e):e,o=Ha(t),a=Ha(e);return $s(t)?lPe(t,i,r):q0(e)?uPe(t,e,r):o&&a?_s("Omit",[t,n],r):!o&&a?_s("Omit",[t,n],r):o&&!a?_s("Omit",[t,n],r):st({...mle(t,i),...r})}s(Pb,"Omit");function Yxt(t,e,r){return{[e]:Pb(t,[e],Hs(r))}}s(Yxt,"FromPropertyKey");function Kxt(t,e,r){return e.reduce((n,i)=>({...n,...Yxt(t,i,r)}),{})}s(Kxt,"FromPropertyKeys");function Jxt(t,e,r){return Kxt(t,e.keys,r)}s(Jxt,"FromMappedKey");function uPe(t,e,r){let n=Jxt(t,e,r);return mo(n)}s(uPe,"OmitFromMappedKey");d();d();d();function Xxt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Db(t[i],e,Hs(r));return n}s(Xxt,"FromProperties");function Zxt(t,e,r){return Xxt(t.properties,e,r)}s(Zxt,"FromMappedResult");function dPe(t,e,r){let n=Zxt(t,e,r);return mo(n)}s(dPe,"PickFromMappedResult");function ebt(t,e){return t.map(r=>gle(r,e))}s(ebt,"FromIntersect");function tbt(t,e){return t.map(r=>gle(r,e))}s(tbt,"FromUnion");function rbt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(rbt,"FromProperties");function nbt(t,e){let r=Da(t,[ma,"$id","required","properties"]),n=rbt(t.properties,e);return Bo(n,r)}s(nbt,"FromObject");function ibt(t){let e=t.reduce((r,n)=>dW(n)?[...r,Xi(n)]:r,[]);return Do(e)}s(ibt,"UnionFromPropertyKeys");function gle(t,e){return Pa(t)?id(ebt(t.allOf,e)):co(t)?Do(tbt(t.anyOf,e)):mc(t)?nbt(t,e):Bo({})}s(gle,"PickResolve");function Db(t,e,r){let n=pc(e)?ibt(e):e,i=ga(e)?kf(e):e,o=Ha(t),a=Ha(e);return $s(t)?dPe(t,i,r):q0(e)?fPe(t,e,r):o&&a?_s("Pick",[t,n],r):!o&&a?_s("Pick",[t,n],r):o&&!a?_s("Pick",[t,n],r):st({...gle(t,i),...r})}s(Db,"Pick");function obt(t,e,r){return{[e]:Db(t,[e],Hs(r))}}s(obt,"FromPropertyKey");function sbt(t,e,r){return e.reduce((n,i)=>({...n,...obt(t,i,r)}),{})}s(sbt,"FromPropertyKeys");function abt(t,e,r){return sbt(t,e.keys,r)}s(abt,"FromMappedKey");function fPe(t,e,r){let n=abt(t,e,r);return mo(n)}s(fPe,"PickFromMappedKey");d();d();function cbt(t,e){return _s("Partial",[_s(t,e)])}s(cbt,"FromComputed");function lbt(t){return _s("Partial",[ph(t)])}s(lbt,"FromRef");function ubt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=nd(t[r]);return e}s(ubt,"FromProperties");function dbt(t){let e=Da(t,[ma,"$id","required","properties"]),r=ubt(t.properties);return Bo(r,e)}s(dbt,"FromObject");function pPe(t){return t.map(e=>hPe(e))}s(pPe,"FromRest");function hPe(t){return dg(t)?cbt(t.target,t.parameters):Ha(t)?lbt(t.$ref):Pa(t)?id(pPe(t.allOf)):co(t)?Do(pPe(t.anyOf)):mc(t)?dbt(t):O_(t)||Y1(t)||hg(t)||U0(t)||J9(t)||mg(t)||K1(t)||X9(t)||J1(t)?t:Bo({})}s(hPe,"PartialResolve");function B4(t,e){return $s(t)?mPe(t,e):st({...hPe(t),...e})}s(B4,"Partial");function fbt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=B4(t[n],Hs(e));return r}s(fbt,"FromProperties");function pbt(t,e){return fbt(t.properties,e)}s(pbt,"FromMappedResult");function mPe(t,e){let r=pbt(t,e);return mo(r)}s(mPe,"PartialFromMappedResult");d();d();function hbt(t,e){return _s("Required",[_s(t,e)])}s(hbt,"FromComputed");function mbt(t){return _s("Required",[ph(t)])}s(mbt,"FromRef");function gbt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Da(t[r],[gu]);return e}s(gbt,"FromProperties");function Abt(t){let e=Da(t,[ma,"$id","required","properties"]),r=gbt(t.properties);return Bo(r,e)}s(Abt,"FromObject");function gPe(t){return t.map(e=>APe(e))}s(gPe,"FromRest");function APe(t){return dg(t)?hbt(t.target,t.parameters):Ha(t)?mbt(t.$ref):Pa(t)?id(gPe(t.allOf)):co(t)?Do(gPe(t.anyOf)):mc(t)?Abt(t):O_(t)||Y1(t)||hg(t)||U0(t)||J9(t)||mg(t)||K1(t)||X9(t)||J1(t)?t:Bo({})}s(APe,"RequiredResolve");function N4(t,e){return $s(t)?yPe(t,e):st({...APe(t),...e})}s(N4,"Required");function ybt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=N4(t[n],e);return r}s(ybt,"FromProperties");function Cbt(t,e){return ybt(t.properties,e)}s(Cbt,"FromMappedResult");function yPe(t,e){let r=Cbt(t,e);return mo(r)}s(yPe,"RequiredFromMappedResult");function vbt(t,e){return e.map(r=>Ha(r)?Ale(t,r.$ref):$0(t,r))}s(vbt,"DereferenceParameters");function Ale(t,e){return e in t?Ha(t[e])?Ale(t,t[e].$ref):$0(t,t[e]):Ai()}s(Ale,"Dereference");function Ebt(t){return _4(t[0])}s(Ebt,"FromAwaited");function xbt(t){return Rb(t[0],t[1])}s(xbt,"FromIndex");function bbt(t){return S4(t[0])}s(bbt,"FromKeyOf");function Ibt(t){return B4(t[0])}s(Ibt,"FromPartial");function Tbt(t){return Pb(t[0],t[1])}s(Tbt,"FromOmit");function wbt(t){return Db(t[0],t[1])}s(wbt,"FromPick");function _bt(t){return N4(t[0])}s(_bt,"FromRequired");function Sbt(t,e,r){let n=vbt(t,r);return e==="Awaited"?Ebt(n):e==="Index"?xbt(n):e==="KeyOf"?bbt(n):e==="Partial"?Ibt(n):e==="Omit"?Tbt(n):e==="Pick"?wbt(n):e==="Required"?_bt(n):Ai()}s(Sbt,"FromComputed");function Rbt(t,e){return C4($0(t,e))}s(Rbt,"FromArray");function kbt(t,e){return v4($0(t,e))}s(kbt,"FromAsyncIterator");function Pbt(t,e,r){return E4(l6(t,e),$0(t,r))}s(Pbt,"FromConstructor");function Dbt(t,e,r){return vy(l6(t,e),$0(t,r))}s(Dbt,"FromFunction");function Bbt(t,e){return id(l6(t,e))}s(Bbt,"FromIntersect");function Nbt(t,e){return w4($0(t,e))}s(Nbt,"FromIterator");function Lbt(t,e){return Bo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:$0(t,e[n])}),{}))}s(Lbt,"FromObject");function Mbt(t,e){let[r,n]=[$0(t,PW(e)),kW(e)],i=h4(e);return i.patternProperties[n]=r,i}s(Mbt,"FromRecord");function Fbt(t,e){return Ha(e)?{...Ale(t,e.$ref),[ma]:e[ma]}:e}s(Fbt,"FromTransform");function Obt(t,e){return dh(l6(t,e))}s(Obt,"FromTuple");function Qbt(t,e){return Do(l6(t,e))}s(Qbt,"FromUnion");function l6(t,e){return e.map(r=>$0(t,r))}s(l6,"FromTypes");function $0(t,e){return Rf(e)?st($0(t,Da(e,[gu])),e):g4(e)?st($0(t,Da(e,[lg])),e):Po(e)?st(Fbt(t,e),e):ug(e)?st(Rbt(t,e.items),e):F_(e)?st(kbt(t,e.items),e):dg(e)?st(Sbt(t,e.target,e.parameters)):fg(e)?st(Pbt(t,e.parameters,e.returns),e):pg(e)?st(Dbt(t,e.parameters,e.returns),e):Pa(e)?st(Bbt(t,e.allOf),e):Q_(e)?st(Nbt(t,e.items),e):mc(e)?st(Lbt(t,e.properties),e):q_(e)?st(Mbt(t,e)):W0(e)?st(Obt(t,e.items||[]),e):co(e)?st(Qbt(t,e.anyOf),e):e}s($0,"FromType");function Ubt(t,e){return e in t?$0(t,t[e]):Ai()}s(Ubt,"ComputeType");function CPe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:Ubt(t,r)}),{})}s(CPe,"ComputeModuleProperties");var yle=class{static{s(this,"TModule")}constructor(e){let r=CPe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:st(this.$defs[e],r)};return st({[it]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function vPe(t){return new yle(t)}s(vPe,"Module");d();function EPe(t,e){return st({[it]:"Not",not:t},e)}s(EPe,"Not");d();function xPe(t,e){return pg(t)?dh(t.parameters,e):Ai()}s(xPe,"Parameters");d();var qbt=0;function bPe(t,e={}){hc(e.$id)&&(e.$id=`T${qbt++}`);let r=h4(t({[it]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,st({[lh]:"Recursive",...r},e)}s(bPe,"Recursive");d();function IPe(t,e){let r=gs(t)?new globalThis.RegExp(t):t;return st({[it]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(IPe,"RegExp");d();function Hbt(t){return Pa(t)?t.allOf:co(t)?t.anyOf:W0(t)?t.items??[]:[]}s(Hbt,"RestResolve");function TPe(t){return Hbt(t)}s(TPe,"Rest");d();function wPe(t,e){return pg(t)?st(t.returns,e):Ai(e)}s(wPe,"ReturnType");d();var Cle=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new vle(this.schema,e)}},vle=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[ma].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[ma].Decode(a)),"Decode")};return{...r,[ma]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[ma]:n}}Encode(e){return Po(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function _Pe(t){return new Cle(t)}s(_Pe,"Transform");d();function SPe(t={}){return st({[it]:t[it]??"Unsafe"},t)}s(SPe,"Unsafe");d();function RPe(t){return st({[it]:"Void",type:"void"},t)}s(RPe,"Void");d();var Ele={};fa(Ele,{Any:()=>Sb,Argument:()=>f4e,Array:()=>C4,AsyncIterator:()=>v4,Awaited:()=>_4,BigInt:()=>T4,Boolean:()=>mW,Capitalize:()=>oPe,Composite:()=>P4e,Const:()=>D4e,Constructor:()=>E4,ConstructorParameters:()=>B4e,Date:()=>vW,Enum:()=>N4e,Exclude:()=>P4,Extends:()=>k4,Extract:()=>D4,Function:()=>vy,Index:()=>Rb,InstanceType:()=>X4e,Instantiate:()=>ePe,Integer:()=>tPe,Intersect:()=>id,Iterator:()=>w4,KeyOf:()=>S4,Literal:()=>Xi,Lowercase:()=>sPe,Mapped:()=>T4e,Module:()=>vPe,Never:()=>Ai,Not:()=>EPe,Null:()=>EW,Number:()=>uh,Object:()=>Bo,Omit:()=>Pb,Optional:()=>nd,Parameters:()=>xPe,Partial:()=>B4,Pick:()=>Db,Promise:()=>yW,Readonly:()=>Pf,ReadonlyOptional:()=>SW,Record:()=>RW,Recursive:()=>bPe,Ref:()=>ph,RegExp:()=>IPe,Required:()=>N4,Rest:()=>TPe,ReturnType:()=>wPe,String:()=>Ud,Symbol:()=>xW,TemplateLiteral:()=>gW,Transform:()=>_Pe,Tuple:()=>dh,Uint8Array:()=>IW,Uncapitalize:()=>aPe,Undefined:()=>bW,Union:()=>Do,Unknown:()=>Ag,Unsafe:()=>SPe,Uppercase:()=>cPe,Void:()=>RPe});d();var I=Ele;d();d();function Wbt(t){switch(t.errorType){case rt.ArrayContains:return"Expected array to contain at least one matching value";case rt.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case rt.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case rt.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case rt.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case rt.ArrayUniqueItems:return"Expected array elements to be unique";case rt.Array:return"Expected array";case rt.AsyncIterator:return"Expected AsyncIterator";case rt.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case rt.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case rt.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case rt.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case rt.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case rt.BigInt:return"Expected bigint";case rt.Boolean:return"Expected boolean";case rt.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case rt.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case rt.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case rt.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case rt.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case rt.Date:return"Expected Date";case rt.Function:return"Expected function";case rt.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case rt.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case rt.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case rt.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case rt.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case rt.Integer:return"Expected integer";case rt.IntersectUnevaluatedProperties:return"Unexpected property";case rt.Intersect:return"Expected all values to match";case rt.Iterator:return"Expected Iterator";case rt.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case rt.Never:return"Never";case rt.Not:return"Value should not match";case rt.Null:return"Expected null";case rt.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case rt.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case rt.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case rt.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case rt.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case rt.Number:return"Expected number";case rt.Object:return"Expected object";case rt.ObjectAdditionalProperties:return"Unexpected property";case rt.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case rt.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case rt.ObjectRequiredProperty:return"Expected required property";case rt.Promise:return"Expected Promise";case rt.RegExp:return"Expected string to match regular expression";case rt.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case rt.StringFormat:return`Expected string to match '${t.schema.format}' format`;case rt.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case rt.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case rt.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case rt.String:return"Expected string";case rt.Symbol:return"Expected symbol";case rt.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case rt.Tuple:return"Expected tuple";case rt.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case rt.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case rt.Uint8Array:return"Expected Uint8Array";case rt.Undefined:return"Expected undefined";case rt.Union:return"Expected union value";case rt.Void:return"Expected void";case rt.Kind:return`Expected kind '${t.schema[it]}'`;default:return"Unknown error type"}}s(Wbt,"DefaultErrorFunction");var $bt=Wbt;function kPe(){return $bt}s(kPe,"GetErrorFunction");d();var xle=class extends _n{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function jbt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new xle(t);return go(r,e)}s(jbt,"Resolve");function Bl(t,e){return!ao(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Bl,"Pushref");function go(t,e){return t[it]==="This"||t[it]==="Ref"?jbt(t,e):t}s(go,"Deref");d();var ble=class extends _n{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},j0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(j0||(j0={}));var L4=BigInt("14695981039346656037"),[Gbt,Vbt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],zbt=Array.from({length:256}).map((t,e)=>BigInt(e)),PPe=new Float64Array(1),DPe=new DataView(PPe.buffer),BPe=new Uint8Array(PPe.buffer);function*Ybt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(Ybt,"NumberToBytes");function Kbt(t){sd(j0.Array);for(let e of t)M4(e)}s(Kbt,"ArrayType");function Jbt(t){sd(j0.Boolean),sd(t?1:0)}s(Jbt,"BooleanType");function Xbt(t){sd(j0.BigInt),DPe.setBigInt64(0,t);for(let e of BPe)sd(e)}s(Xbt,"BigIntType");function Zbt(t){sd(j0.Date),M4(t.getTime())}s(Zbt,"DateType");function eIt(t){sd(j0.Null)}s(eIt,"NullType");function tIt(t){sd(j0.Number),DPe.setFloat64(0,t);for(let e of BPe)sd(e)}s(tIt,"NumberType");function rIt(t){sd(j0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())M4(e),M4(t[e])}s(rIt,"ObjectType");function nIt(t){sd(j0.String);for(let e=0;e<t.length;e++)for(let r of Ybt(t.charCodeAt(e)))sd(r)}s(nIt,"StringType");function iIt(t){sd(j0.Symbol),M4(t.description)}s(iIt,"SymbolType");function oIt(t){sd(j0.Uint8Array);for(let e=0;e<t.length;e++)sd(t[e])}s(oIt,"Uint8ArrayType");function sIt(t){return sd(j0.Undefined)}s(sIt,"UndefinedType");function M4(t){if(wn(t))return Kbt(t);if(Ay(t))return Jbt(t);if(mu(t))return Xbt(t);if(Od(t))return Zbt(t);if(V1(t))return eIt(t);if(Zr(t))return tIt(t);if(bi(t))return rIt(t);if(ao(t))return nIt(t);if(z1(t))return iIt(t);if(m4(t))return oIt(t);if(Ws(t))return sIt(t);throw new ble(t)}s(M4,"Visit");function sd(t){L4=L4^zbt[t],L4=L4*Gbt%Vbt}s(sd,"FNV1A64");function Bb(t){return L4=BigInt("14695981039346656037"),M4(t),L4}s(Bb,"Hash");d();var Ile=class extends _n{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function aIt(t){return t[it]==="Any"||t[it]==="Unknown"}s(aIt,"IsAnyOrUnknown");function Oi(t){return t!==void 0}s(Oi,"IsDefined");function cIt(t,e,r){return!0}s(cIt,"FromAny");function lIt(t,e,r){return!0}s(lIt,"FromArgument");function uIt(t,e,r){if(!wn(r)||Oi(t.minItems)&&!(r.length>=t.minItems)||Oi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Nl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=Bb(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Oi(t.contains)||Zr(t.minContains)||Zr(t.maxContains)))return!0;let n=Oi(t.contains)?t.contains:Ai(),i=r.reduce((o,a)=>Nl(n,e,a)?o+1:o,0);return!(i===0||Zr(t.minContains)&&i<t.minContains||Zr(t.maxContains)&&i>t.maxContains)}s(uIt,"FromArray");function dIt(t,e,r){return aW(r)}s(dIt,"FromAsyncIterator");function fIt(t,e,r){return!(!mu(r)||Oi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Oi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Oi(t.maximum)&&!(r<=t.maximum)||Oi(t.minimum)&&!(r>=t.minimum)||Oi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(fIt,"FromBigInt");function pIt(t,e,r){return Ay(r)}s(pIt,"FromBoolean");function hIt(t,e,r){return Nl(t.returns,e,r.prototype)}s(hIt,"FromConstructor");function mIt(t,e,r){return!(!Od(r)||Oi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Oi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Oi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Oi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Oi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(mIt,"FromDate");function gIt(t,e,r){return Tb(r)}s(gIt,"FromFunction");function AIt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Nl(i,[...e,...n],r)}s(AIt,"FromImport");function yIt(t,e,r){return!(!uW(r)||Oi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Oi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Oi(t.maximum)&&!(r<=t.maximum)||Oi(t.minimum)&&!(r>=t.minimum)||Oi(t.multipleOf)&&r%t.multipleOf!==0)}s(yIt,"FromInteger");function CIt(t,e,r){let n=t.allOf.every(i=>Nl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(ev(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(ga(t.unevaluatedProperties)){let i=new RegExp(ev(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Nl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(CIt,"FromIntersect");function vIt(t,e,r){return cW(r)}s(vIt,"FromIterator");function EIt(t,e,r){return r===t.const}s(EIt,"FromLiteral");function xIt(t,e,r){return!1}s(xIt,"FromNever");function bIt(t,e,r){return!Nl(t.not,e,r)}s(bIt,"FromNot");function IIt(t,e,r){return V1(r)}s(IIt,"FromNull");function TIt(t,e,r){return!(!ws.IsNumberLike(r)||Oi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Oi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Oi(t.minimum)&&!(r>=t.minimum)||Oi(t.maximum)&&!(r<=t.maximum)||Oi(t.multipleOf)&&r%t.multipleOf!==0)}s(TIt,"FromNumber");function wIt(t,e,r){if(!ws.IsObjectLike(r)||Oi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Oi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Nl(o,e,r[i])||(tv(o)||aIt(o))&&!(i in r))return!1}else if(ws.IsExactOptionalProperty(r,i)&&!Nl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Nl(t.additionalProperties,e,r[o])):!0}s(wIt,"FromObject");function _It(t,e,r){return lW(r)}s(_It,"FromPromise");function SIt(t,e,r){if(!ws.IsRecordLike(r)||Oi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Oi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?Nl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:Nl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(SIt,"FromRecord");function RIt(t,e,r){return Nl(go(t,e),e,r)}s(RIt,"FromRef");function kIt(t,e,r){let n=new RegExp(t.source,t.flags);return Oi(t.minLength)&&!(r.length>=t.minLength)||Oi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(kIt,"FromRegExp");function PIt(t,e,r){return!ao(r)||Oi(t.minLength)&&!(r.length>=t.minLength)||Oi(t.maxLength)&&!(r.length<=t.maxLength)||Oi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Oi(t.format)?gg.Has(t.format)?gg.Get(t.format)(r):!1:!0}s(PIt,"FromString");function DIt(t,e,r){return z1(r)}s(DIt,"FromSymbol");function BIt(t,e,r){return ao(r)&&new RegExp(t.pattern).test(r)}s(BIt,"FromTemplateLiteral");function NIt(t,e,r){return Nl(go(t,e),e,r)}s(NIt,"FromThis");function LIt(t,e,r){if(!wn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Nl(t.items[n],e,r[n]))return!1;return!0}s(LIt,"FromTuple");function MIt(t,e,r){return Ws(r)}s(MIt,"FromUndefined");function FIt(t,e,r){return t.anyOf.some(n=>Nl(n,e,r))}s(FIt,"FromUnion");function OIt(t,e,r){return!(!m4(r)||Oi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Oi(t.minByteLength)&&!(r.length>=t.minByteLength))}s(OIt,"FromUint8Array");function QIt(t,e,r){return!0}s(QIt,"FromUnknown");function UIt(t,e,r){return ws.IsVoidLike(r)}s(UIt,"FromVoid");function qIt(t,e,r){return Qd.Has(t[it])?Qd.Get(t[it])(t,r):!1}s(qIt,"FromKind");function Nl(t,e,r){let n=Oi(t.$id)?Bl(t,e):e,i=t;switch(i[it]){case"Any":return cIt(i,n,r);case"Argument":return lIt(i,n,r);case"Array":return uIt(i,n,r);case"AsyncIterator":return dIt(i,n,r);case"BigInt":return fIt(i,n,r);case"Boolean":return pIt(i,n,r);case"Constructor":return hIt(i,n,r);case"Date":return mIt(i,n,r);case"Function":return gIt(i,n,r);case"Import":return AIt(i,n,r);case"Integer":return yIt(i,n,r);case"Intersect":return CIt(i,n,r);case"Iterator":return vIt(i,n,r);case"Literal":return EIt(i,n,r);case"Never":return xIt(i,n,r);case"Not":return bIt(i,n,r);case"Null":return IIt(i,n,r);case"Number":return TIt(i,n,r);case"Object":return wIt(i,n,r);case"Promise":return _It(i,n,r);case"Record":return SIt(i,n,r);case"Ref":return RIt(i,n,r);case"RegExp":return kIt(i,n,r);case"String":return PIt(i,n,r);case"Symbol":return DIt(i,n,r);case"TemplateLiteral":return BIt(i,n,r);case"This":return NIt(i,n,r);case"Tuple":return LIt(i,n,r);case"Undefined":return MIt(i,n,r);case"Union":return FIt(i,n,r);case"Uint8Array":return OIt(i,n,r);case"Unknown":return QIt(i,n,r);case"Void":return UIt(i,n,r);default:if(!Qd.Has(i[it]))throw new Ile(i);return qIt(i,n,r)}}s(Nl,"Visit");function wi(...t){return t.length===3?Nl(t[0],t[1],t[2]):Nl(t[0],[],t[1])}s(wi,"Check");var rt;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(rt||(rt={}));var Tle=class extends _n{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function rv(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(rv,"EscapeKey");function Qi(t){return t!==void 0}s(Qi,"IsDefined");var Nb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function lr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:kPe()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(lr,"Create");function*HIt(t,e,r,n){}s(HIt,"FromAny");function*WIt(t,e,r,n){}s(WIt,"FromArgument");function*$It(t,e,r,n){if(!wn(n))return yield lr(rt.Array,t,r,n);Qi(t.minItems)&&!(n.length>=t.minItems)&&(yield lr(rt.ArrayMinItems,t,r,n)),Qi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield lr(rt.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Ll(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=Bb(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield lr(rt.ArrayUniqueItems,t,r,n)),!(Qi(t.contains)||Qi(t.minContains)||Qi(t.maxContains)))return;let i=Qi(t.contains)?t.contains:Ai(),o=n.reduce((a,c,l)=>Ll(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield lr(rt.ArrayContains,t,r,n)),Zr(t.minContains)&&o<t.minContains&&(yield lr(rt.ArrayMinContains,t,r,n)),Zr(t.maxContains)&&o>t.maxContains&&(yield lr(rt.ArrayMaxContains,t,r,n))}s($It,"FromArray");function*jIt(t,e,r,n){aW(n)||(yield lr(rt.AsyncIterator,t,r,n))}s(jIt,"FromAsyncIterator");function*GIt(t,e,r,n){if(!mu(n))return yield lr(rt.BigInt,t,r,n);Qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield lr(rt.BigIntExclusiveMaximum,t,r,n)),Qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield lr(rt.BigIntExclusiveMinimum,t,r,n)),Qi(t.maximum)&&!(n<=t.maximum)&&(yield lr(rt.BigIntMaximum,t,r,n)),Qi(t.minimum)&&!(n>=t.minimum)&&(yield lr(rt.BigIntMinimum,t,r,n)),Qi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield lr(rt.BigIntMultipleOf,t,r,n))}s(GIt,"FromBigInt");function*VIt(t,e,r,n){Ay(n)||(yield lr(rt.Boolean,t,r,n))}s(VIt,"FromBoolean");function*zIt(t,e,r,n){yield*Ll(t.returns,e,r,n.prototype)}s(zIt,"FromConstructor");function*YIt(t,e,r,n){if(!Od(n))return yield lr(rt.Date,t,r,n);Qi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield lr(rt.DateExclusiveMaximumTimestamp,t,r,n)),Qi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield lr(rt.DateExclusiveMinimumTimestamp,t,r,n)),Qi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield lr(rt.DateMaximumTimestamp,t,r,n)),Qi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield lr(rt.DateMinimumTimestamp,t,r,n)),Qi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield lr(rt.DateMultipleOfTimestamp,t,r,n))}s(YIt,"FromDate");function*KIt(t,e,r,n){Tb(n)||(yield lr(rt.Function,t,r,n))}s(KIt,"FromFunction");function*JIt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Ll(o,[...e,...i],r,n)}s(JIt,"FromImport");function*XIt(t,e,r,n){if(!uW(n))return yield lr(rt.Integer,t,r,n);Qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield lr(rt.IntegerExclusiveMaximum,t,r,n)),Qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield lr(rt.IntegerExclusiveMinimum,t,r,n)),Qi(t.maximum)&&!(n<=t.maximum)&&(yield lr(rt.IntegerMaximum,t,r,n)),Qi(t.minimum)&&!(n>=t.minimum)&&(yield lr(rt.IntegerMinimum,t,r,n)),Qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield lr(rt.IntegerMultipleOf,t,r,n))}s(XIt,"FromInteger");function*ZIt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Ll(o,e,r,n))i=!0,yield a;if(i)return yield lr(rt.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(ev(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield lr(rt.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(ev(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Ll(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(ZIt,"FromIntersect");function*eTt(t,e,r,n){cW(n)||(yield lr(rt.Iterator,t,r,n))}s(eTt,"FromIterator");function*tTt(t,e,r,n){n!==t.const&&(yield lr(rt.Literal,t,r,n))}s(tTt,"FromLiteral");function*rTt(t,e,r,n){yield lr(rt.Never,t,r,n)}s(rTt,"FromNever");function*nTt(t,e,r,n){Ll(t.not,e,r,n).next().done===!0&&(yield lr(rt.Not,t,r,n))}s(nTt,"FromNot");function*iTt(t,e,r,n){V1(n)||(yield lr(rt.Null,t,r,n))}s(iTt,"FromNull");function*oTt(t,e,r,n){if(!ws.IsNumberLike(n))return yield lr(rt.Number,t,r,n);Qi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield lr(rt.NumberExclusiveMaximum,t,r,n)),Qi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield lr(rt.NumberExclusiveMinimum,t,r,n)),Qi(t.maximum)&&!(n<=t.maximum)&&(yield lr(rt.NumberMaximum,t,r,n)),Qi(t.minimum)&&!(n>=t.minimum)&&(yield lr(rt.NumberMinimum,t,r,n)),Qi(t.multipleOf)&&n%t.multipleOf!==0&&(yield lr(rt.NumberMultipleOf,t,r,n))}s(oTt,"FromNumber");function*sTt(t,e,r,n){if(!ws.IsObjectLike(n))return yield lr(rt.Object,t,r,n);Qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield lr(rt.ObjectMinProperties,t,r,n)),Qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield lr(rt.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield lr(rt.ObjectRequiredProperty,t.properties[c],`${r}/${rv(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield lr(rt.ObjectAdditionalProperties,t,`${r}/${rv(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Ll(t.additionalProperties,e,`${r}/${rv(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Ll(l,e,`${r}/${rv(c)}`,n[c]),tv(t)&&!(c in n)&&(yield lr(rt.ObjectRequiredProperty,l,`${r}/${rv(c)}`,void 0))):ws.IsExactOptionalProperty(n,c)&&(yield*Ll(l,e,`${r}/${rv(c)}`,n[c]))}}s(sTt,"FromObject");function*aTt(t,e,r,n){lW(n)||(yield lr(rt.Promise,t,r,n))}s(aTt,"FromPromise");function*cTt(t,e,r,n){if(!ws.IsRecordLike(n))return yield lr(rt.Object,t,r,n);Qi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield lr(rt.ObjectMinProperties,t,r,n)),Qi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield lr(rt.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Ll(o,e,`${r}/${rv(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Ll(t.additionalProperties,e,`${r}/${rv(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield lr(rt.ObjectAdditionalProperties,t,`${r}/${rv(c)}`,l)}}s(cTt,"FromRecord");function*lTt(t,e,r,n){yield*Ll(go(t,e),e,r,n)}s(lTt,"FromRef");function*uTt(t,e,r,n){if(!ao(n))return yield lr(rt.String,t,r,n);if(Qi(t.minLength)&&!(n.length>=t.minLength)&&(yield lr(rt.StringMinLength,t,r,n)),Qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield lr(rt.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield lr(rt.RegExp,t,r,n)}s(uTt,"FromRegExp");function*dTt(t,e,r,n){if(!ao(n))return yield lr(rt.String,t,r,n);Qi(t.minLength)&&!(n.length>=t.minLength)&&(yield lr(rt.StringMinLength,t,r,n)),Qi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield lr(rt.StringMaxLength,t,r,n)),ao(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield lr(rt.StringPattern,t,r,n))),ao(t.format)&&(gg.Has(t.format)?gg.Get(t.format)(n)||(yield lr(rt.StringFormat,t,r,n)):yield lr(rt.StringFormatUnknown,t,r,n))}s(dTt,"FromString");function*fTt(t,e,r,n){z1(n)||(yield lr(rt.Symbol,t,r,n))}s(fTt,"FromSymbol");function*pTt(t,e,r,n){if(!ao(n))return yield lr(rt.String,t,r,n);new RegExp(t.pattern).test(n)||(yield lr(rt.StringPattern,t,r,n))}s(pTt,"FromTemplateLiteral");function*hTt(t,e,r,n){yield*Ll(go(t,e),e,r,n)}s(hTt,"FromThis");function*mTt(t,e,r,n){if(!wn(n))return yield lr(rt.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield lr(rt.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield lr(rt.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Ll(t.items[i],e,`${r}/${i}`,n[i])}s(mTt,"FromTuple");function*gTt(t,e,r,n){Ws(n)||(yield lr(rt.Undefined,t,r,n))}s(gTt,"FromUndefined");function*ATt(t,e,r,n){if(wi(t,e,n))return;let i=t.anyOf.map(o=>new Nb(Ll(o,e,r,n)));yield lr(rt.Union,t,r,n,i)}s(ATt,"FromUnion");function*yTt(t,e,r,n){if(!m4(n))return yield lr(rt.Uint8Array,t,r,n);Qi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield lr(rt.Uint8ArrayMaxByteLength,t,r,n)),Qi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield lr(rt.Uint8ArrayMinByteLength,t,r,n))}s(yTt,"FromUint8Array");function*CTt(t,e,r,n){}s(CTt,"FromUnknown");function*vTt(t,e,r,n){ws.IsVoidLike(n)||(yield lr(rt.Void,t,r,n))}s(vTt,"FromVoid");function*ETt(t,e,r,n){Qd.Get(t[it])(t,n)||(yield lr(rt.Kind,t,r,n))}s(ETt,"FromKind");function*Ll(t,e,r,n){let i=Qi(t.$id)?[...e,t]:e,o=t;switch(o[it]){case"Any":return yield*HIt(o,i,r,n);case"Argument":return yield*WIt(o,i,r,n);case"Array":return yield*$It(o,i,r,n);case"AsyncIterator":return yield*jIt(o,i,r,n);case"BigInt":return yield*GIt(o,i,r,n);case"Boolean":return yield*VIt(o,i,r,n);case"Constructor":return yield*zIt(o,i,r,n);case"Date":return yield*YIt(o,i,r,n);case"Function":return yield*KIt(o,i,r,n);case"Import":return yield*JIt(o,i,r,n);case"Integer":return yield*XIt(o,i,r,n);case"Intersect":return yield*ZIt(o,i,r,n);case"Iterator":return yield*eTt(o,i,r,n);case"Literal":return yield*tTt(o,i,r,n);case"Never":return yield*rTt(o,i,r,n);case"Not":return yield*nTt(o,i,r,n);case"Null":return yield*iTt(o,i,r,n);case"Number":return yield*oTt(o,i,r,n);case"Object":return yield*sTt(o,i,r,n);case"Promise":return yield*aTt(o,i,r,n);case"Record":return yield*cTt(o,i,r,n);case"Ref":return yield*lTt(o,i,r,n);case"RegExp":return yield*uTt(o,i,r,n);case"String":return yield*dTt(o,i,r,n);case"Symbol":return yield*fTt(o,i,r,n);case"TemplateLiteral":return yield*pTt(o,i,r,n);case"This":return yield*hTt(o,i,r,n);case"Tuple":return yield*mTt(o,i,r,n);case"Undefined":return yield*gTt(o,i,r,n);case"Union":return yield*ATt(o,i,r,n);case"Uint8Array":return yield*yTt(o,i,r,n);case"Unknown":return yield*CTt(o,i,r,n);case"Void":return yield*vTt(o,i,r,n);default:if(!Qd.Has(o[it]))throw new Tle(t);return yield*ETt(o,i,r,n)}}s(Ll,"Visit");function xy(...t){let e=t.length===3?Ll(t[0],t[1],"",t[2]):Ll(t[0],[],"",t[1]);return new Nb(e)}s(xy,"Errors");d();d();var F4=class extends _n{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},wle=class extends _n{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Aa(t,e,r){try{return Po(t)?t[ma].Decode(r):r}catch(n){throw new wle(t,e,r,n)}}s(Aa,"Default");function xTt(t,e,r,n){return wn(n)?Aa(t,r,n.map((i,o)=>vg(t.items,e,`${r}/${o}`,i))):Aa(t,r,n)}s(xTt,"FromArray");function bTt(t,e,r,n){if(!bi(n)||Q0(n))return Aa(t,r,n);let i=CW(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=vg(p,e,`${r}/${f}`,a[f]));if(!Po(t.unevaluatedProperties))return Aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Aa(l,`${r}/${f}`,u[f]));return Aa(t,r,u)}s(bTt,"FromIntersect");function ITt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=vg(o,[...e,...i],r,n);return Aa(t,r,a)}s(ITt,"FromImport");function TTt(t,e,r,n){return Aa(t,r,vg(t.not,e,r,n))}s(TTt,"FromNot");function wTt(t,e,r,n){if(!bi(n))return Aa(t,r,n);let i=Df(t),o={...n};for(let u of i)Tn(o,u)&&(Ws(o[u])&&(!J1(t.properties[u])||ws.IsExactOptionalProperty(o,u))||(o[u]=vg(t.properties[u],e,`${r}/${u}`,o[u])));if(!ga(t.additionalProperties))return Aa(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=Aa(c,`${r}/${u}`,l[u]));return Aa(t,r,l)}s(wTt,"FromObject");function _Tt(t,e,r,n){if(!bi(n))return Aa(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=vg(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!ga(t.additionalProperties))return Aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=Aa(l,`${r}/${f}`,u[f]));return Aa(t,r,u)}s(_Tt,"FromRecord");function STt(t,e,r,n){let i=go(t,e);return Aa(t,r,vg(i,e,r,n))}s(STt,"FromRef");function RTt(t,e,r,n){let i=go(t,e);return Aa(t,r,vg(i,e,r,n))}s(RTt,"FromThis");function kTt(t,e,r,n){return wn(n)&&wn(t.items)?Aa(t,r,t.items.map((i,o)=>vg(i,e,`${r}/${o}`,n[o]))):Aa(t,r,n)}s(kTt,"FromTuple");function PTt(t,e,r,n){for(let i of t.anyOf){if(!wi(i,e,n))continue;let o=vg(i,e,r,n);return Aa(t,r,o)}return Aa(t,r,n)}s(PTt,"FromUnion");function vg(t,e,r,n){let i=Bl(t,e),o=t;switch(t[it]){case"Array":return xTt(o,i,r,n);case"Import":return ITt(o,i,r,n);case"Intersect":return bTt(o,i,r,n);case"Not":return TTt(o,i,r,n);case"Object":return wTt(o,i,r,n);case"Record":return _Tt(o,i,r,n);case"Ref":return STt(o,i,r,n);case"Symbol":return Aa(o,r,n);case"This":return RTt(o,i,r,n);case"Tuple":return kTt(o,i,r,n);case"Union":return PTt(o,i,r,n);default:return Aa(o,r,n)}}s(vg,"Visit");function O4(t,e,r){return vg(t,e,"",r)}s(O4,"TransformDecode");d();var Q4=class extends _n{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},_le=class extends _n{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function Au(t,e,r){try{return Po(t)?t[ma].Encode(r):r}catch(n){throw new _le(t,e,r,n)}}s(Au,"Default");function DTt(t,e,r,n){let i=Au(t,r,n);return wn(i)?i.map((o,a)=>Eg(t.items,e,`${r}/${a}`,o)):i}s(DTt,"FromArray");function BTt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Au(t,r,n);return Eg(o,[...e,...i],r,a)}s(BTt,"FromImport");function NTt(t,e,r,n){let i=Au(t,r,n);if(!bi(n)||Q0(n))return i;let o=CW(t),a=o.map(p=>p[0]),c={...i};for(let[p,h]of o)p in c&&(c[p]=Eg(h,e,`${r}/${p}`,c[p]));if(!Po(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=Au(u,`${r}/${p}`,f[p]));return f}s(NTt,"FromIntersect");function LTt(t,e,r,n){return Au(t.not,r,Au(t,r,n))}s(LTt,"FromNot");function MTt(t,e,r,n){let i=Au(t,r,n);if(!bi(i))return i;let o=Df(t),a={...i};for(let f of o)Tn(a,f)&&(Ws(a[f])&&(!J1(t.properties[f])||ws.IsExactOptionalProperty(a,f))||(a[f]=Eg(t.properties[f],e,`${r}/${f}`,a[f])));if(!ga(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Au(l,`${r}/${f}`,u[f]));return u}s(MTt,"FromObject");function FTt(t,e,r,n){let i=Au(t,r,n);if(!bi(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=Eg(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!ga(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=Au(u,`${r}/${p}`,f[p]));return f}s(FTt,"FromRecord");function OTt(t,e,r,n){let i=go(t,e),o=Eg(i,e,r,n);return Au(t,r,o)}s(OTt,"FromRef");function QTt(t,e,r,n){let i=go(t,e),o=Eg(i,e,r,n);return Au(t,r,o)}s(QTt,"FromThis");function UTt(t,e,r,n){let i=Au(t,r,n);return wn(t.items)?t.items.map((o,a)=>Eg(o,e,`${r}/${a}`,i[a])):[]}s(UTt,"FromTuple");function qTt(t,e,r,n){for(let i of t.anyOf){if(!wi(i,e,n))continue;let o=Eg(i,e,r,n);return Au(t,r,o)}for(let i of t.anyOf){let o=Eg(i,e,r,n);if(wi(t,e,o))return Au(t,r,o)}return Au(t,r,n)}s(qTt,"FromUnion");function Eg(t,e,r,n){let i=Bl(t,e),o=t;switch(t[it]){case"Array":return DTt(o,i,r,n);case"Import":return BTt(o,i,r,n);case"Intersect":return NTt(o,i,r,n);case"Not":return LTt(o,i,r,n);case"Object":return MTt(o,i,r,n);case"Record":return FTt(o,i,r,n);case"Ref":return OTt(o,i,r,n);case"This":return QTt(o,i,r,n);case"Tuple":return UTt(o,i,r,n);case"Union":return qTt(o,i,r,n);default:return Au(o,r,n)}}s(Eg,"Visit");function U4(t,e,r){return Eg(t,e,"",r)}s(U4,"TransformEncode");d();function HTt(t,e){return Po(t)||ul(t.items,e)}s(HTt,"FromArray");function WTt(t,e){return Po(t)||ul(t.items,e)}s(WTt,"FromAsyncIterator");function $Tt(t,e){return Po(t)||ul(t.returns,e)||t.parameters.some(r=>ul(r,e))}s($Tt,"FromConstructor");function jTt(t,e){return Po(t)||ul(t.returns,e)||t.parameters.some(r=>ul(r,e))}s(jTt,"FromFunction");function GTt(t,e){return Po(t)||Po(t.unevaluatedProperties)||t.allOf.some(r=>ul(r,e))}s(GTt,"FromIntersect");function VTt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Po(t)||ul(n,[...r,...e])}s(VTt,"FromImport");function zTt(t,e){return Po(t)||ul(t.items,e)}s(zTt,"FromIterator");function YTt(t,e){return Po(t)||ul(t.not,e)}s(YTt,"FromNot");function KTt(t,e){return Po(t)||Object.values(t.properties).some(r=>ul(r,e))||ga(t.additionalProperties)&&ul(t.additionalProperties,e)}s(KTt,"FromObject");function JTt(t,e){return Po(t)||ul(t.item,e)}s(JTt,"FromPromise");function XTt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Po(t)||ul(n,e)||ga(t.additionalProperties)&&Po(t.additionalProperties)}s(XTt,"FromRecord");function ZTt(t,e){return Po(t)?!0:ul(go(t,e),e)}s(ZTt,"FromRef");function ewt(t,e){return Po(t)?!0:ul(go(t,e),e)}s(ewt,"FromThis");function twt(t,e){return Po(t)||!Ws(t.items)&&t.items.some(r=>ul(r,e))}s(twt,"FromTuple");function rwt(t,e){return Po(t)||t.anyOf.some(r=>ul(r,e))}s(rwt,"FromUnion");function ul(t,e){let r=Bl(t,e),n=t;if(t.$id&&Sle.has(t.$id))return!1;switch(t.$id&&Sle.add(t.$id),t[it]){case"Array":return HTt(n,r);case"AsyncIterator":return WTt(n,r);case"Constructor":return $Tt(n,r);case"Function":return jTt(n,r);case"Import":return VTt(n,r);case"Intersect":return GTt(n,r);case"Iterator":return zTt(n,r);case"Not":return YTt(n,r);case"Object":return KTt(n,r);case"Promise":return JTt(n,r);case"Record":return XTt(n,r);case"Ref":return ZTt(n,r);case"This":return ewt(n,r);case"Tuple":return twt(n,r);case"Union":return rwt(n,r);default:return Po(t)}}s(ul,"Visit");var Sle=new Set;function nv(t,e){return Sle.clear(),ul(t,e)}s(nv,"HasTransform");var Rle=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=nv(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return xy(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new F4(this.schema,e,this.Errors(e).First());return this.hasTransform?O4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?U4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new Q4(this.schema,e,this.Errors(e).First());return r}},iv;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(iv||(iv={}));var DW;(function(t){function e(o){return o.length===0?!1:iv.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(iv.IsAlpha(c)||iv.IsNumeric(c)||iv.DollarSign(c)||iv.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(DW||(DW={}));var kle;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);iv.IsNumeric(o)||iv.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(kle||(kle={}));var Ple;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(Ple||(Ple={}));var Dle=class extends _n{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},BW=class extends _n{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},j_;(function(t){function e(a,c,l){return ws.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${DW.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return ws.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return ws.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return ws.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return ws.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(j_||(j_={}));var Gs;(function(t){function e(ue){return ue[it]==="Any"||ue[it]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ue,Ue,ye){yield"true"}s(r,"FromAny");function*n(ue,Ue,ye){yield"true"}s(n,"FromArgument");function*i(ue,Ue,ye){yield`Array.isArray(${ye})`;let[We,se]=[Fe("value","any"),Fe("acc","number")];Zr(ue.maxItems)&&(yield`${ye}.length <= ${ue.maxItems}`),Zr(ue.minItems)&&(yield`${ye}.length >= ${ue.minItems}`);let le=Ae(ue.items,Ue,"value");if(yield`${ye}.every((${We}) => ${le})`,js(ue.contains)||Zr(ue.minContains)||Zr(ue.maxContains)){let qe=js(ue.contains)?ue.contains:Ai(),Be=Ae(qe,Ue,"value"),xe=Zr(ue.minContains)?[`(count >= ${ue.minContains})`]:[],je=Zr(ue.maxContains)?[`(count <= ${ue.maxContains})`]:[],et=`const count = value.reduce((${se}, ${We}) => ${Be} ? acc + 1 : acc, 0)`,pt=["(count > 0)",...xe,...je].join(" && ");yield`((${We}) => { ${et}; return ${pt}})(${ye})`}ue.uniqueItems===!0&&(yield`((${We}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ue,Ue,ye){yield`(typeof ${ye} === 'bigint')`,mu(ue.exclusiveMaximum)&&(yield`${ye} < BigInt(${ue.exclusiveMaximum})`),mu(ue.exclusiveMinimum)&&(yield`${ye} > BigInt(${ue.exclusiveMinimum})`),mu(ue.maximum)&&(yield`${ye} <= BigInt(${ue.maximum})`),mu(ue.minimum)&&(yield`${ye} >= BigInt(${ue.minimum})`),mu(ue.multipleOf)&&(yield`(${ye} % BigInt(${ue.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(ue,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(ue,Ue,ye){yield*te(ue.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(ue,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Zr(ue.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ue.exclusiveMaximumTimestamp}`),Zr(ue.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ue.exclusiveMinimumTimestamp}`),Zr(ue.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ue.maximumTimestamp}`),Zr(ue.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ue.minimumTimestamp}`),Zr(ue.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ue.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(ue,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(ue,Ue,ye){let We=globalThis.Object.getOwnPropertyNames(ue.$defs).reduce((se,le)=>[...se,ue.$defs[le]],[]);yield*te(ph(ue.$ref),[...Ue,...We],ye)}s(p,"FromImport");function*h(ue,Ue,ye){yield`Number.isInteger(${ye})`,Zr(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),Zr(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),Zr(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),Zr(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),Zr(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(h,"FromInteger");function*m(ue,Ue,ye){let We=ue.allOf.map(se=>Ae(se,Ue,ye)).join(" && ");if(ue.unevaluatedProperties===!1){let se=Te(`${new RegExp(ev(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key))`;yield`(${We} && ${le})`}else if(js(ue.unevaluatedProperties)){let se=Te(`${new RegExp(ev(ue))};`),le=`Object.getOwnPropertyNames(${ye}).every(key => ${se}.test(key) || ${Ae(ue.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${We} && ${le})`}else yield`(${We})`}s(m,"FromIntersect");function*g(ue,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*A(ue,Ue,ye){typeof ue.const=="number"||typeof ue.const=="boolean"?yield`(${ye} === ${ue.const})`:yield`(${ye} === '${Ple.Escape(ue.const)}')`}s(A,"FromLiteral");function*y(ue,Ue,ye){yield"false"}s(y,"FromNever");function*E(ue,Ue,ye){yield`(!${Ae(ue.not,Ue,ye)})`}s(E,"FromNot");function*b(ue,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*_(ue,Ue,ye){yield j_.IsNumberLike(ye),Zr(ue.exclusiveMaximum)&&(yield`${ye} < ${ue.exclusiveMaximum}`),Zr(ue.exclusiveMinimum)&&(yield`${ye} > ${ue.exclusiveMinimum}`),Zr(ue.maximum)&&(yield`${ye} <= ${ue.maximum}`),Zr(ue.minimum)&&(yield`${ye} >= ${ue.minimum}`),Zr(ue.multipleOf)&&(yield`(${ye} % ${ue.multipleOf}) === 0`)}s(_,"FromNumber");function*S(ue,Ue,ye){yield j_.IsObjectLike(ye),Zr(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),Zr(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let We=Object.getOwnPropertyNames(ue.properties);for(let se of We){let le=DW.Encode(ye,se),qe=ue.properties[se];if(ue.required&&ue.required.includes(se))yield*te(qe,Ue,le),(tv(qe)||e(qe))&&(yield`('${se}' in ${ye})`);else{let Be=Ae(qe,Ue,le);yield j_.IsExactOptionalProperty(ye,se,Be)}}if(ue.additionalProperties===!1)if(ue.required&&ue.required.length===We.length)yield`Object.getOwnPropertyNames(${ye}).length === ${We.length}`;else{let se=`[${We.map(le=>`'${le}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${se}.includes(key))`}if(typeof ue.additionalProperties=="object"){let se=Ae(ue.additionalProperties,Ue,`${ye}[key]`),le=`[${We.map(qe=>`'${qe}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${le}.includes(key) || ${se}))`}}s(S,"FromObject");function*P(ue,Ue,ye){yield`${ye} instanceof Promise`}s(P,"FromPromise");function*B(ue,Ue,ye){yield j_.IsRecordLike(ye),Zr(ue.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ue.minProperties}`),Zr(ue.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ue.maxProperties}`);let[We,se]=Object.entries(ue.patternProperties)[0],le=Te(`${new RegExp(We)}`),qe=Ae(se,Ue,"value"),Be=js(ue.additionalProperties)?Ae(ue.additionalProperties,Ue,ye):ue.additionalProperties===!1?"false":"true",xe=`(${le}.test(key) ? ${qe} : ${Be})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(B,"FromRecord");function*F(ue,Ue,ye){let We=go(ue,Ue);if(pe.functions.has(ue.$ref))return yield`${Oe(ue.$ref)}(${ye})`;yield*te(We,Ue,ye)}s(F,"FromRef");function*Y(ue,Ue,ye){let We=Te(`${new RegExp(ue.source,ue.flags)};`);yield`(typeof ${ye} === 'string')`,Zr(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),Zr(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),yield`${We}.test(${ye})`}s(Y,"FromRegExp");function*ee(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,Zr(ue.maxLength)&&(yield`${ye}.length <= ${ue.maxLength}`),Zr(ue.minLength)&&(yield`${ye}.length >= ${ue.minLength}`),ue.pattern!==void 0&&(yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`),ue.format!==void 0&&(yield`format('${ue.format}', ${ye})`)}s(ee,"FromString");function*V(ue,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(V,"FromSymbol");function*H(ue,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${Te(`${new RegExp(ue.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*U(ue,Ue,ye){yield`${Oe(ue.$ref)}(${ye})`}s(U,"FromThis");function*X(ue,Ue,ye){if(yield`Array.isArray(${ye})`,ue.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ue.maxItems})`;for(let We=0;We<ue.items.length;We++)yield`${Ae(ue.items[We],Ue,`${ye}[${We}]`)}`}s(X,"FromTuple");function*K(ue,Ue,ye){yield`${ye} === undefined`}s(K,"FromUndefined");function*j(ue,Ue,ye){yield`(${ue.anyOf.map(se=>Ae(se,Ue,ye)).join(" || ")})`}s(j,"FromUnion");function*W(ue,Ue,ye){yield`${ye} instanceof Uint8Array`,Zr(ue.maxByteLength)&&(yield`(${ye}.length <= ${ue.maxByteLength})`),Zr(ue.minByteLength)&&(yield`(${ye}.length >= ${ue.minByteLength})`)}s(W,"FromUint8Array");function*J(ue,Ue,ye){yield"true"}s(J,"FromUnknown");function*ie(ue,Ue,ye){yield j_.IsVoidLike(ye)}s(ie,"FromVoid");function*ae(ue,Ue,ye){let We=pe.instances.size;pe.instances.set(We,ue),yield`kind('${ue[it]}', ${We}, ${ye})`}s(ae,"FromKind");function*te(ue,Ue,ye,We=!0){let se=ao(ue.$id)?[...Ue,ue]:Ue,le=ue;if(We&&ao(ue.$id)){let qe=Oe(ue.$id);if(pe.functions.has(qe))return yield`${qe}(${ye})`;{pe.functions.set(qe,"<deferred>");let Be=Je(qe,ue,Ue,"value",!1);return pe.functions.set(qe,Be),yield`${qe}(${ye})`}}switch(le[it]){case"Any":return yield*r(le,se,ye);case"Argument":return yield*n(le,se,ye);case"Array":return yield*i(le,se,ye);case"AsyncIterator":return yield*o(le,se,ye);case"BigInt":return yield*a(le,se,ye);case"Boolean":return yield*c(le,se,ye);case"Constructor":return yield*l(le,se,ye);case"Date":return yield*u(le,se,ye);case"Function":return yield*f(le,se,ye);case"Import":return yield*p(le,se,ye);case"Integer":return yield*h(le,se,ye);case"Intersect":return yield*m(le,se,ye);case"Iterator":return yield*g(le,se,ye);case"Literal":return yield*A(le,se,ye);case"Never":return yield*y(le,se,ye);case"Not":return yield*E(le,se,ye);case"Null":return yield*b(le,se,ye);case"Number":return yield*_(le,se,ye);case"Object":return yield*S(le,se,ye);case"Promise":return yield*P(le,se,ye);case"Record":return yield*B(le,se,ye);case"Ref":return yield*F(le,se,ye);case"RegExp":return yield*Y(le,se,ye);case"String":return yield*ee(le,se,ye);case"Symbol":return yield*V(le,se,ye);case"TemplateLiteral":return yield*H(le,se,ye);case"This":return yield*U(le,se,ye);case"Tuple":return yield*X(le,se,ye);case"Undefined":return yield*K(le,se,ye);case"Union":return yield*j(le,se,ye);case"Uint8Array":return yield*W(le,se,ye);case"Unknown":return yield*J(le,se,ye);case"Void":return yield*ie(le,se,ye);default:if(!Qd.Has(le[it]))throw new Dle(ue);return yield*ae(le,se,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ae(ue,Ue,ye,We=!0){return`(${[...te(ue,Ue,ye,We)].join(" && ")})`}s(Ae,"CreateExpression");function Oe(ue){return`check_${kle.Encode(ue)}`}s(Oe,"CreateFunctionName");function Te(ue){let Ue=`local_${pe.variables.size}`;return pe.variables.set(Ue,`const ${Ue} = ${ue}`),Ue}s(Te,"CreateVariable");function Je(ue,Ue,ye,We,se=!0){let[le,qe]=[`
`,et=>"".padStart(et," ")],Be=Fe("value","any"),xe=ct("boolean"),je=[...te(Ue,ye,We,se)].map(et=>`${qe(4)}${et}`).join(` &&${le}`);return`function ${ue}(${Be})${xe} {${le}${qe(2)}return (${le}${je}${le}${qe(2)})
}`}s(Je,"CreateFunction");function Fe(ue,Ue){let ye=pe.language==="typescript"?`: ${Ue}`:"";return`${ue}${ye}`}s(Fe,"CreateParameter");function ct(ue){return pe.language==="typescript"?`: ${ue}`:""}s(ct,"CreateReturns");function St(ue,Ue,ye){let We=Je("check",ue,Ue,"value"),se=Fe("value","any"),le=ct("boolean"),qe=[...pe.functions.values()],Be=[...pe.variables.values()],xe=ao(ue.$id)?`return function check(${se})${le} {
  return ${Oe(ue.$id)}(value)
}`:`return ${We}`;return[...Be,...qe,xe].join(`
`)}s(St,"Build");function vt(...ue){let Ue={language:"javascript"},[ye,We,se]=ue.length===2&&wn(ue[1])?[ue[0],ue[1],Ue]:ue.length===2&&!wn(ue[1])?[ue[0],[],ue[1]]:ue.length===3?[ue[0],ue[1],ue[2]]:ue.length===1?[ue[0],[],Ue]:[null,[],Ue];if(pe.language=se.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!js(ye))throw new BW(ye);for(let le of We)if(!js(le))throw new BW(le);return St(ye,We,se)}s(vt,"Code"),t.Code=vt;function mt(ue,Ue=[]){let ye=vt(ue,Ue,{language:"javascript"}),We=globalThis.Function("kind","format","hash",ye),se=new Map(pe.instances);function le(je,et,pt){if(!Qd.Has(je)||!se.has(et))return!1;let Lt=Qd.Get(je),Kt=se.get(et);return Lt(Kt,pt)}s(le,"typeRegistryFunction");function qe(je,et){return gg.Has(je)?gg.Get(je)(et):!1}s(qe,"formatRegistryFunction");function Be(je){return Bb(je)}s(Be,"hashFunction");let xe=We(le,qe,Be);return new Rle(ue,Ue,xe,ye)}s(mt,"Compile"),t.Compile=mt})(Gs||(Gs={}));var x$=Me(Ib());d();d();var yu=[];for(let t=0;t<256;++t)yu.push((t+256).toString(16).slice(1));function NPe(t,e=0){return(yu[t[e+0]]+yu[t[e+1]]+yu[t[e+2]]+yu[t[e+3]]+"-"+yu[t[e+4]]+yu[t[e+5]]+"-"+yu[t[e+6]]+yu[t[e+7]]+"-"+yu[t[e+8]]+yu[t[e+9]]+"-"+yu[t[e+10]]+yu[t[e+11]]+yu[t[e+12]]+yu[t[e+13]]+yu[t[e+14]]+yu[t[e+15]]).toLowerCase()}s(NPe,"unsafeStringify");d();var LPe=require("crypto");var LW=new Uint8Array(256),NW=LW.length;function Ble(){return NW>LW.length-16&&((0,LPe.randomFillSync)(LW),NW=0),LW.slice(NW,NW+=16)}s(Ble,"rng");d();d();var MPe=require("crypto"),Nle={randomUUID:MPe.randomUUID};function nwt(t,e,r){if(Nle.randomUUID&&!e&&!t)return Nle.randomUUID();t=t||{};let n=t.random??t.rng?.()??Ble();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return NPe(n)}s(nwt,"v4");var gr=nwt;var b$=Me(pi());function sP(t){return t===1}s(sP,"isRestricted");var a_t=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],C6=8192,c_t=21;var Fl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return sP(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(cP(e))return this.reporterRestricted;if(p4(e))return new j9}getFTReporter(e){if(fNe(e))return this.reporterFT;if(p4(e))return new j9}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},l_t=I.Object({},{additionalProperties:I.String()}),u_t=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),d_t=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function f_t(t){return d_t.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(f_t,"isOomError");function p_t(t){return W9(t)?"network":f_t(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(p_t,"getErrorType");var Fr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Gs.Compile(l_t)}static{this.validateTelemetryMeasurements=Gs.Compile(u_t)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Ca())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ca())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Ot).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=my(e.get(ln).getEditorInfo()),this.properties.editor_plugin_version=my(e.get(ln).getEditorPluginInfo());let r=e.get(Ts);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${J_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(ln);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=my(n.getEditorInfo());let i=e.get(zn);this.properties.fetcher=i.name;let o=e.get(vu).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=ANe(e);r["copilot.build"]=yNe(e),r["copilot.buildType"]=_y(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(sP(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>C6){let a=0,c=0;for(;o>0&&c<c_t;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+C6;o<C6&&(u=a+o),r[l]=i.slice(a,u),o-=C6,a+=C6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=g_t(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(p4(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return Ig(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),sP(r)&&Ig(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,pNe(e))}},wy=class t extends Fr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new B_({}),exp:oh.createEmptyConfig()})}};function v6(t,e,r,n){t.get(Fl).getReporter(t,e)?.sendTelemetryEvent(r,Fr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(v6,"sendTelemetryEvent");function h_t(t,e,r,n){t.get(Fl).getReporter(t,e)?.sendTelemetryErrorEvent(r,Fr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(h_t,"sendTelemetryErrorEvent");function m_t(t,e,r,n){t.get(Fl).getFTReporter(t)?.sendTelemetryEvent(r,Fr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(m_t,"sendFTTelemetryEvent");function aP(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(aP,"telemetrizePromptLength");function Ca(){return performance.now()}s(Ca,"now");function g_t(t){return Math.floor(t/1e3)}s(g_t,"nowSeconds");function cP(t){return t.get(hu).optedIn}s(cP,"shouldSendRestricted");function fNe(t){return t.get(hu).ftFlag!==""}s(fNe,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(fc).register(A_t(t,e,Ca(),r?.extendedBy(),n))}s(Bt,"telemetry");async function A_t(t,e,r,n,i=0){let o=n||Fr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!sP(i)||cP(t))&&v6(t,i,e,o),sP(i)&&a_t.includes(e)&&fNe(t)&&m_t(t,i,e,o)}s(A_t,"_telemetry");function mH(t,e){return t.get(fc).register(y_t(t,e,Ca()))}s(mH,"telemetryExpProblem");async function y_t(t,e,r){let n="expProblem",i=Fr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),v6(t,0,n,i)}s(y_t,"_telemetryExpProblem");function lde(t,e,r,n){return t.get(fc).register(C_t(t,e,r,n))}s(lde,"telemetryRaw");async function C_t(t,e,r,n){let i={...r,...pNe(t)};v6(t,0,e,{properties:i,measurements:n})}s(C_t,"_telemetryRaw");function pNe(t){let e=t.get(ln),r={unique_id:gr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:my(e.getEditorInfo())},n=t.get(hu);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(pNe,"createRequiredProperties");var cde=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,x$.SHA256)(x$.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Na(t,e,r,n,i){return t.get(fc).register(hNe(t,e,Ca(),r,{...n},i))}s(Na,"telemetryException");async function hNe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||td(a)||a instanceof qs||a instanceof b$.ConnectionError||a instanceof b$.ResponseError)return}else{if(a=new cde(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let A=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(A[0]??"")&&A.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(A[0]??"")&&A.shift(),a.stack=`${a}
${A.join(`
`)}`}}let c=t.get(ln).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=cP(t),f=gke(a,l,u),p=p_t(a),h=p==="exception",m=Fr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await m.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let A of o.exception_detail)A.value&&(u?A.value=Fce(A.value):A.value="[redacted]");if(o??=ike(t,f),o.context={...o.context,"copilot_event.unique_id":m.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(m.properties.errno=o.rollup_id),o.created_at=new Date(m.issuedTime).toISOString(),u){let A=mke(a,l),y=Fr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:A.stack||A.toString(),message:A.message,...i});o.rollup_id!=="auto"&&(y.properties.errno=o.rollup_id),await y.makeReadyForSending(t,1,"IncludeExp",r),y.properties.unique_id=m.properties.unique_id,m.properties.restricted_unique_id=y.properties.unique_id,v6(t,1,`error.${p}`,y)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;h&&!t.get(gy).isThrottled(g)&&(m.properties.failbot_payload=JSON.stringify(o)),v6(t,0,`error.${p}`,m)}s(hNe,"_telemetryException");function ud(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await hNe(t,a,Ca(),r,n)}},"wrapped");return(...o)=>t.get(fc).register(i(...o))}s(ud,"telemetryCatch");function Ig(t,e,r,n){return t.get(fc).register(v_t(t,e,Ca(),r?.extendedBy(),n))}s(Ig,"telemetryError");async function v_t(t,e,r,n,i=0){if(sP(i)&&!cP(t))return;let o=n||Fr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),h_t(t,i,e,o)}s(v_t,"_telemetryError");function mNe(t,e,r,n,i){let o=Fr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(mNe,"logEngineCompletion");function gNe(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(gNe,"logEnginePrompt");d();d();var CNe=Me(pi()),vNe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),ude;(r=>(r.method="github/didChangeAuth",r.type=new CNe.ProtocolNotificationType(r.method)))(ude||={});d();var ENe=Me(pi()),dde;(r=>(r.method="copilot/ipCodeCitation",r.type=new ENe.NotificationType(r.method)))(dde||={});d();var xNe=Me(pi()),I$;(r=>(r.method="context/update",r.type=new xNe.ProtocolRequestType(r.method)))(I$||={});d();d();var $b="Cancelled";d();var Sn=Me(pi()),E6=I.String(),Of=I.Object({uri:E6}),X_=I.Intersect([Of,I.Object({version:I.Optional(I.Integer())})]),DOr=I.Required(X_),Ol=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),gc=I.Object({start:Ol,end:Ol}),fde=I.Union([I.Integer(),I.String()]),BOr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});d();var bNe=Me(pi()),pde;(r=>(r.method="textDocument/didFocus",r.type=new bNe.ProtocolNotificationType(r.method)))(pde||={});d();var E_t=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),x_t=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),INe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),TNe=I.Object({editorInfo:I.Optional(INe),editorPluginInfo:I.Optional(INe),relatedPluginInfo:I.Optional(I.Array(x_t)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(E_t)),githubAppId:I.Optional(I.String())});d();var x6=Me(pi());var T$=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(T$||{}),b_t=I.Enum(T$),I_t=I.Object({triggerKind:b_t,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:gc,tooltipSignature:I.Optional(I.String())}))}),wNe=I.Object({textDocument:X_,position:Ol,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:I_t,data:I.Optional(I.Unknown())}),hde;(r=>(r.method="textDocument/inlineCompletion",r.type=new x6.ProtocolRequestType(r.method)))(hde||={});var _Ne=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),SNe=I.Object({item:_Ne}),mde;(r=>(r.method="textDocument/didShowCompletion",r.type=new x6.ProtocolNotificationType(r.method)))(mde||={});var RNe=I.Object({item:_Ne,acceptedLength:I.Integer({minimum:1})}),gde;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new x6.ProtocolNotificationType(r.method)))(gde||={});d();var kNe=Me(pi()),Ade;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new kNe.ProtocolRequestType(r.method)))(Ade||={});d();var PNe=Me(pi()),DNe=I.Object({textDocument:X_,position:Ol}),T_t=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),BNe=I.Object({item:T_t}),yde;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new PNe.ProtocolNotificationType(r.method)))(yde||={});d();var w$=Me(pi());var NNe=I.Object({textDocument:X_,position:Ol,partialResultToken:I.Optional(fde),workDoneToken:I.Optional(fde)}),_$;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new w$.ProtocolRequestType(n.method),n.partialResult=new w$.ProgressType))(_$||={});d();var LNe=Me(pi()),Cde;(r=>(r.method="copilot/related",r.type=new LNe.ProtocolRequestType(r.method)))(Cde||={});d();var MNe=Me(pi()),vde;(r=>(r.method="statusNotification",r.type=new MNe.ProtocolNotificationType(r.method)))(vde||={});var FNe=Me(require("events"));var Tg=class{static{s(this,"CopilotTokenNotifier")}#e=new FNe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=ud(e,n,`event.${r}`);return this.#e.on(r,i),Sn.Disposable.create(()=>this.#e.off(r,i))}};function ha(t,e){return t.get(Tg).on(t,"CopilotToken",e)}s(ha,"onCopilotToken");function b6(t,e){return t.get(Tg).emitToken(e)}s(b6,"emitCopilotToken");function S$(t){return t.get(Tg).lastToken}s(S$,"getLastCopilotToken");d();var R$=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function Ede(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(Ede,"findKnownOrg");function ONe(t){let e=t.organization_list??[];return Ede(e)??""}s(ONe,"getUserKind");d();d();var Z_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(Z_||{}),Oc=class{static{s(this,"LogTarget")}},Sy=class{static{s(this,"TelemetryLogSender")}},_t=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Oc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(Sy).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(Sy).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},An=new _t("default");d();var Qc=class{constructor(){this.recentNotifications=new Or(100)}static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){if(!this.recentNotifications.has(e??r))return this.recentNotifications.set(e??r,!0),this.showWarningMessage(r,...n)}};d();var Eu=class{static{s(this,"UrlOpener")}};var w_t=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],QNe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",UNe="https://gh.io/copilot-network-errors",qd=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&w_t.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new _t("certificates").error(e,`${QNe} Please visit ${UNe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(Qc).showWarningMessage(QNe,n).then(i=>{if(i?.title===n.title)return e.get(Eu).open(UNe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();d();function k$(){return typeof process>"u"}s(k$,"isWeb");function I6(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(I6,"isMsBenchModeEnabled");var xde=class extends py{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function yh(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...k$()?{}:F0(t),...n.headers}};let i=await t.get(zn).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new py(i);if(!i.headers.get("x-github-request-id"))throw new xde(i);return i}s(yh,"apiFetch");d();d();var WNe=require("os"),P$=require("path");d();var qNe;(()=>{"use strict";var t={975:H=>{function U(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(U,"e");function X(j,W){for(var J,ie="",ae=0,te=-1,pe=0,Ae=0;Ae<=j.length;++Ae){if(Ae<j.length)J=j.charCodeAt(Ae);else{if(J===47)break;J=47}if(J===47){if(!(te===Ae-1||pe===1))if(te!==Ae-1&&pe===2){if(ie.length<2||ae!==2||ie.charCodeAt(ie.length-1)!==46||ie.charCodeAt(ie.length-2)!==46){if(ie.length>2){var Oe=ie.lastIndexOf("/");if(Oe!==ie.length-1){Oe===-1?(ie="",ae=0):ae=(ie=ie.slice(0,Oe)).length-1-ie.lastIndexOf("/"),te=Ae,pe=0;continue}}else if(ie.length===2||ie.length===1){ie="",ae=0,te=Ae,pe=0;continue}}W&&(ie.length>0?ie+="/..":ie="..",ae=2)}else ie.length>0?ie+="/"+j.slice(te+1,Ae):ie=j.slice(te+1,Ae),ae=Ae-te-1;te=Ae,pe=0}else J===46&&pe!==-1?++pe:pe=-1}return ie}s(X,"r");var K={resolve:s(function(){for(var j,W="",J=!1,ie=arguments.length-1;ie>=-1&&!J;ie--){var ae;ie>=0?ae=arguments[ie]:(j===void 0&&(j=process.cwd()),ae=j),U(ae),ae.length!==0&&(W=ae+"/"+W,J=ae.charCodeAt(0)===47)}return W=X(W,!J),J?W.length>0?"/"+W:"/":W.length>0?W:"."},"resolve"),normalize:s(function(j){if(U(j),j.length===0)return".";var W=j.charCodeAt(0)===47,J=j.charCodeAt(j.length-1)===47;return(j=X(j,!W)).length!==0||W||(j="."),j.length>0&&J&&(j+="/"),W?"/"+j:j},"normalize"),isAbsolute:s(function(j){return U(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,W=0;W<arguments.length;++W){var J=arguments[W];U(J),J.length>0&&(j===void 0?j=J:j+="/"+J)}return j===void 0?".":K.normalize(j)},"join"),relative:s(function(j,W){if(U(j),U(W),j===W||(j=K.resolve(j))===(W=K.resolve(W)))return"";for(var J=1;J<j.length&&j.charCodeAt(J)===47;++J);for(var ie=j.length,ae=ie-J,te=1;te<W.length&&W.charCodeAt(te)===47;++te);for(var pe=W.length-te,Ae=ae<pe?ae:pe,Oe=-1,Te=0;Te<=Ae;++Te){if(Te===Ae){if(pe>Ae){if(W.charCodeAt(te+Te)===47)return W.slice(te+Te+1);if(Te===0)return W.slice(te+Te)}else ae>Ae&&(j.charCodeAt(J+Te)===47?Oe=Te:Te===0&&(Oe=0));break}var Je=j.charCodeAt(J+Te);if(Je!==W.charCodeAt(te+Te))break;Je===47&&(Oe=Te)}var Fe="";for(Te=J+Oe+1;Te<=ie;++Te)Te!==ie&&j.charCodeAt(Te)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+W.slice(te+Oe):(te+=Oe,W.charCodeAt(te)===47&&++te,W.slice(te))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(U(j),j.length===0)return".";for(var W=j.charCodeAt(0),J=W===47,ie=-1,ae=!0,te=j.length-1;te>=1;--te)if((W=j.charCodeAt(te))===47){if(!ae){ie=te;break}}else ae=!1;return ie===-1?J?"/":".":J&&ie===1?"//":j.slice(0,ie)},"dirname"),basename:s(function(j,W){if(W!==void 0&&typeof W!="string")throw new TypeError('"ext" argument must be a string');U(j);var J,ie=0,ae=-1,te=!0;if(W!==void 0&&W.length>0&&W.length<=j.length){if(W.length===j.length&&W===j)return"";var pe=W.length-1,Ae=-1;for(J=j.length-1;J>=0;--J){var Oe=j.charCodeAt(J);if(Oe===47){if(!te){ie=J+1;break}}else Ae===-1&&(te=!1,Ae=J+1),pe>=0&&(Oe===W.charCodeAt(pe)?--pe==-1&&(ae=J):(pe=-1,ae=Ae))}return ie===ae?ae=Ae:ae===-1&&(ae=j.length),j.slice(ie,ae)}for(J=j.length-1;J>=0;--J)if(j.charCodeAt(J)===47){if(!te){ie=J+1;break}}else ae===-1&&(te=!1,ae=J+1);return ae===-1?"":j.slice(ie,ae)},"basename"),extname:s(function(j){U(j);for(var W=-1,J=0,ie=-1,ae=!0,te=0,pe=j.length-1;pe>=0;--pe){var Ae=j.charCodeAt(pe);if(Ae!==47)ie===-1&&(ae=!1,ie=pe+1),Ae===46?W===-1?W=pe:te!==1&&(te=1):W!==-1&&(te=-1);else if(!ae){J=pe+1;break}}return W===-1||ie===-1||te===0||te===1&&W===ie-1&&W===J+1?"":j.slice(W,ie)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function(W,J){var ie=J.dir||J.root,ae=J.base||(J.name||"")+(J.ext||"");return ie?ie===J.root?ie+ae:ie+"/"+ae:ae}(0,j)},"format"),parse:s(function(j){U(j);var W={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return W;var J,ie=j.charCodeAt(0),ae=ie===47;ae?(W.root="/",J=1):J=0;for(var te=-1,pe=0,Ae=-1,Oe=!0,Te=j.length-1,Je=0;Te>=J;--Te)if((ie=j.charCodeAt(Te))!==47)Ae===-1&&(Oe=!1,Ae=Te+1),ie===46?te===-1?te=Te:Je!==1&&(Je=1):te!==-1&&(Je=-1);else if(!Oe){pe=Te+1;break}return te===-1||Ae===-1||Je===0||Je===1&&te===Ae-1&&te===pe+1?Ae!==-1&&(W.base=W.name=pe===0&&ae?j.slice(1,Ae):j.slice(pe,Ae)):(pe===0&&ae?(W.name=j.slice(1,te),W.base=j.slice(1,Ae)):(W.name=j.slice(pe,te),W.base=j.slice(pe,Ae)),W.ext=j.slice(te,Ae)),pe>0?W.dir=j.slice(0,pe-1):ae&&(W.dir="/"),W},"parse"),sep:"/",delimiter:":",win32:null,posix:null};K.posix=K,H.exports=K}},e={};function r(H){var U=e[H];if(U!==void 0)return U.exports;var X=e[H]={exports:{}};return t[H](X,X.exports,r),X.exports}s(r,"r"),r.d=(H,U)=>{for(var X in U)r.o(U,X)&&!r.o(H,X)&&Object.defineProperty(H,X,{enumerable:!0,get:U[X]})},r.o=(H,U)=>Object.prototype.hasOwnProperty.call(H,U),r.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>h,"URI"),Utils:s(()=>V,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(H,U){if(!H.scheme&&U)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{s(this,"l")}static isUri(U){return U instanceof h||!!U&&typeof U.authority=="string"&&typeof U.fragment=="string"&&typeof U.path=="string"&&typeof U.query=="string"&&typeof U.scheme=="string"&&typeof U.fsPath=="string"&&typeof U.with=="function"&&typeof U.toString=="function"}scheme;authority;path;query;fragment;constructor(U,X,K,j,W,J=!1){typeof U=="object"?(this.scheme=U.scheme||u,this.authority=U.authority||u,this.path=U.path||u,this.query=U.query||u,this.fragment=U.fragment||u):(this.scheme=function(ie,ae){return ie||ae?ie:"file"}(U,J),this.authority=X||u,this.path=function(ie,ae){switch(ie){case"https":case"http":case"file":ae?ae[0]!==f&&(ae=f+ae):ae=f}return ae}(this.scheme,K||u),this.query=j||u,this.fragment=W||u,l(this,J))}get fsPath(){return b(this,!1)}with(U){if(!U)return this;let{scheme:X,authority:K,path:j,query:W,fragment:J}=U;return X===void 0?X=this.scheme:X===null&&(X=u),K===void 0?K=this.authority:K===null&&(K=u),j===void 0?j=this.path:j===null&&(j=u),W===void 0?W=this.query:W===null&&(W=u),J===void 0?J=this.fragment:J===null&&(J=u),X===this.scheme&&K===this.authority&&j===this.path&&W===this.query&&J===this.fragment?this:new g(X,K,j,W,J)}static parse(U,X=!1){let K=p.exec(U);return K?new g(K[2]||u,B(K[4]||u),B(K[5]||u),B(K[7]||u),B(K[9]||u),X):new g(u,u,u,u,u)}static file(U){let X=u;if(i&&(U=U.replace(/\\/g,f)),U[0]===f&&U[1]===f){let K=U.indexOf(f,2);K===-1?(X=U.substring(2),U=f):(X=U.substring(2,K),U=U.substring(K)||f)}return new g("file",X,U,u,u)}static from(U){let X=new g(U.scheme,U.authority,U.path,U.query,U.fragment);return l(X,!0),X}toString(U=!1){return _(this,U)}toJSON(){return this}static revive(U){if(U){if(U instanceof h)return U;{let X=new g(U);return X._formatted=U.external,X._fsPath=U._sep===m?U.fsPath:null,X}}return U}}let m=i?1:void 0;class g extends h{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(U=!1){return U?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let U={$mid:1};return this._fsPath&&(U.fsPath=this._fsPath,U._sep=m),this._formatted&&(U.external=this._formatted),this.path&&(U.path=this.path),this.scheme&&(U.scheme=this.scheme),this.authority&&(U.authority=this.authority),this.query&&(U.query=this.query),this.fragment&&(U.fragment=this.fragment),U}}let A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function y(H,U,X){let K,j=-1;for(let W=0;W<H.length;W++){let J=H.charCodeAt(W);if(J>=97&&J<=122||J>=65&&J<=90||J>=48&&J<=57||J===45||J===46||J===95||J===126||U&&J===47||X&&J===91||X&&J===93||X&&J===58)j!==-1&&(K+=encodeURIComponent(H.substring(j,W)),j=-1),K!==void 0&&(K+=H.charAt(W));else{K===void 0&&(K=H.substr(0,W));let ie=A[J];ie!==void 0?(j!==-1&&(K+=encodeURIComponent(H.substring(j,W)),j=-1),K+=ie):j===-1&&(j=W)}}return j!==-1&&(K+=encodeURIComponent(H.substring(j))),K!==void 0?K:H}s(y,"m");function E(H){let U;for(let X=0;X<H.length;X++){let K=H.charCodeAt(X);K===35||K===63?(U===void 0&&(U=H.substr(0,X)),U+=A[K]):U!==void 0&&(U+=H[X])}return U!==void 0?U:H}s(E,"y");function b(H,U){let X;return X=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?U?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(X=X.replace(/\//g,"\\")),X}s(b,"v");function _(H,U){let X=U?E:y,K="",{scheme:j,authority:W,path:J,query:ie,fragment:ae}=H;if(j&&(K+=j,K+=":"),(W||j==="file")&&(K+=f,K+=f),W){let te=W.indexOf("@");if(te!==-1){let pe=W.substr(0,te);W=W.substr(te+1),te=pe.lastIndexOf(":"),te===-1?K+=X(pe,!1,!1):(K+=X(pe.substr(0,te),!1,!1),K+=":",K+=X(pe.substr(te+1),!1,!0)),K+="@"}W=W.toLowerCase(),te=W.lastIndexOf(":"),te===-1?K+=X(W,!1,!0):(K+=X(W.substr(0,te),!1,!0),K+=W.substr(te))}if(J){if(J.length>=3&&J.charCodeAt(0)===47&&J.charCodeAt(2)===58){let te=J.charCodeAt(1);te>=65&&te<=90&&(J=`/${String.fromCharCode(te+32)}:${J.substr(3)}`)}else if(J.length>=2&&J.charCodeAt(1)===58){let te=J.charCodeAt(0);te>=65&&te<=90&&(J=`${String.fromCharCode(te+32)}:${J.substr(2)}`)}K+=X(J,!0,!1)}return ie&&(K+="?",K+=X(ie,!1,!1)),ae&&(K+="#",K+=U?ae:y(ae,!1,!1)),K}s(_,"b");function S(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+S(H.substr(3)):H}}s(S,"C");let P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function B(H){return H.match(P)?H.replace(P,U=>S(U)):H}s(B,"w");var F=r(975);let Y=F.posix||F,ee="/";var V;(function(H){H.joinPath=function(U,...X){return U.with({path:Y.join(U.path,...X)})},H.resolvePath=function(U,...X){let K=U.path,j=!1;K[0]!==ee&&(K=ee+K,j=!0);let W=Y.resolve(K,...X);return j&&W[0]===ee&&!U.authority&&(W=W.substring(1)),U.with({path:W})},H.dirname=function(U){if(U.path.length===0||U.path===ee)return U;let X=Y.dirname(U.path);return X.length===1&&X.charCodeAt(0)===46&&(X=""),U.with({path:X})},H.basename=function(U){return Y.basename(U.path)},H.extname=function(U){return Y.extname(U.path)}})(V||(V={})),qNe=n})();var{URI:jb,Utils:T6}=qNe;function $Ne(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+$Ne(t.substring(3)):t}}s($Ne,"decodeURIComponentGraceful");var HNe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function bde(t){return t.match(HNe)?t.replace(HNe,e=>$Ne(e)):t}s(bde,"percentDecode");function dl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return jb.file(t).toString()}s(dl,"makeFsUri");function eS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?jb.parse(e[1]+e[2],!0):jb.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(eS,"parseUri");function D$(t){return eS(t),t}s(D$,"validateUri");function fl(t){try{return eS(t).toString()}catch{return t}}s(fl,"normalizeUri");var jNe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function $a(t){let e=eS(t);if(!jNe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,WNe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,P$.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s($a,"fsPath");function ys(t){try{return $a(t)}catch{return}}s(ys,"getFsPath");function GNe(t){let e=ys(t);if(e)return jb.file(e).toString()}s(GNe,"getFsUri");function tS(t,...e){let r,n=ys(t);return n?r=dl((0,P$.resolve)(n,...e)):r=T6.resolvePath(eS(t),...e.map(i=>VNe(i))).toString(),typeof t=="string"?r:{uri:r}}s(tS,"resolveFilePath");function qo(t,...e){let r=T6.joinPath(eS(t),...e.map(VNe)).toString();return typeof t=="string"?r:{uri:r}}s(qo,"joinPath");function VNe(t){return __t(t)?t.replaceAll("\\","/"):t}s(VNe,"pathToURIPath");function __t(t){return/^[^/\\]*\\/.test(t)}s(__t,"isWinPath");function Ui(t){return bde((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ui,"basename");function dd(t){let e=T6.dirname(eS(t)),r;return jNe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(dd,"dirname");function zNe(t){return T6.extname(eS(t))}s(zNe,"extname");var Hd=class{static{s(this,"NetworkConfiguration")}};function B$(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!Tde(t)&&r.protocol==="http:")return r.href}catch{}}s(B$,"ensurePermittedUrl");var rS={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function Ide(t,e,r){if(r&&cg(t)){for(let n of r){let i=Ao(t,n);if(i)return i}return}for(let n of e){let i=Ao(t,n);if(i)return i}}s(Ide,"urlConfigOverride");function S_t(t,e){switch(e){case"api":return Ide(t,[Qt.DebugOverrideCapiUrl,Qt.DebugOverrideCapiUrlLegacy],[Qt.DebugTestOverrideCapiUrl,Qt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return Ide(t,[Qt.DebugOverrideProxyUrl,Qt.DebugOverrideProxyUrlLegacy],[Qt.DebugTestOverrideProxyUrl,Qt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Tde(t))return Ide(t,[Qt.DebugSnippyOverrideUrl])}}s(S_t,"getEndpointOverrideUrl");function Ry(t,e,r,...n){let i=S_t(t,r)??e.endpoints[r];return qo(i,...n)}s(Ry,"getEndpointUrl");function lP(t){return S$(t)?.endpoints??rS}s(lP,"getLastKnownEndpoints");function YNe(t,e){if(e&&!B$(t,e)){t.get(Qc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(Hd).setConfiguredUrls(t,{serverUrl:e})}s(YNe,"updateServerUrl");var z0=new _t("auth"),XNe=60;function Gb(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Gb,"fillGitHubUrls");function KNe(){return Math.floor(Date.now()/1e3)}s(KNe,"nowSeconds");async function N$(t,e){let r=Fr.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let n=await R_t(t,e),i=await n.json(),o=i.user_notification;if(JNe(t,o,e),n.status===401){let f="Failed to get copilot token due to 401 status. Please sign out and try again.";return z0.info(t,f),Ig(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:f,envelope:i}}if(!n.ok||!i.token){z0.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),Ig(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let f=i.error_details;return f?.notification_id!=="not_signed_up"&&JNe(t,f,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...f}}let a=i.expires_at;i.expires_at=KNe()+i.refresh_in+XNe;let c=await wde(t,e),l;c.ok&&(l=await c.json());let u=new nS(i,l);return b6(t,u),Bt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:KNe()})),{kind:"success",copilotToken:u}}s(N$,"authFromGitHubSession");async function R_t(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await yh(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(qd).notifyUser(t,i),i}}s(R_t,"fetchCopilotToken");async function wde(t,e){let r={"X-GitHub-Api-Version":hy},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await yh(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(qd).notifyUser(t,i),i}}s(wde,"fetchCopilotUserInfo");function JNe(t,e,r){e&&t.get(Qc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(ln).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(Eu).open(c)}e.notification_id&&o&&await k_t(t,e.notification_id,r)}).catch(n=>{z0.exception(t,n,"copilotToken.notification")})}s(JNe,"notifyUser");async function k_t(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await yh(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&z0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(k_t,"sendNotificationResultToGitHub");var nS=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new R$(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??rS}needsRefresh(){return(this.envelope.expires_at-XNe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return Ede(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};d();d();var w6="apps",_de="hosts",iS=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(w6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=wg,i=await this.persistenceManager.read(w6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Ql).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(_de,e);if(r)return{...r,githubAppId:wg}}async saveAuthRecord(e){await this.persistenceManager.update(w6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===wg&&await this.persistenceManager.delete(_de,r),await this.persistenceManager.delete(w6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(w6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:wg})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(_de)}authRecordKey(e,r){let n=r.githubAppId??e.get(Ql).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();var n8e=Me(e8e()),i8e=Me(r8e()),Y0=Me(require("os"));var uP=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(zn).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{An.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new i8e.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[n8e.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=P_t(e),this.commonProperties=D_t(e),this.#e=ha(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function P_t(t){let e={},r=t.get(Ts);e["ai.session.id"]=r.sessionId;let n=t.get(hu);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${Y0.type()} ${Y0.release()}`,e["ai.device.osArchitecture"]=Y0.arch(),e["ai.device.osPlatform"]=Y0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(ho).getVersion(),e}s(P_t,"getTags");function D_t(t){let e={};e.common_os=Y0.platform(),e.common_platformversion=Y0.release(),e.common_arch=Y0.arch(),e.common_cpu=Array.from(new Set(Y0.cpus().map(n=>n.model))).join();let r=t.get(Ts);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(D_t,"getCommonProperties");var B_t="7d7048df-6dd0-4048-bb23-b716c1461f8f",N_t="3fdd7f28-937a-48c8-9a21-ba337db23bd1",L_t="f0000000-0000-0000-0000-000000000000";function o8e(t){return new URL(t).hostname==="github.com"?rS.telemetry:t.replace("://","://copilot-telemetry-service.")}s(o8e,"getEndpointForServerUrl");var Qf=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=o8e(this.serverUrl);this.shuttingDown=new Set;ha(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(Fl);i.setReporter(new uP(r,this.namespace,n,B_t)),i.setRestrictedReporter(new uP(r,this.namespace,n,N_t)),i.setFTReporter(new uP(r,this.namespace,n,L_t,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Fl).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=o8e(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var Fn=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Gr)}get authPersistence(){return this.ctx.get(iS)}getConfiguredUrls(){return this.ctx.get(Hd).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof Ch)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=M_t(this.env)??this.#e;if(r!==null){if(r){let n={...r,...Gb(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&_y(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await yh(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":hy},body:JSON.stringify({restricted_telemetry:this.ctx.get(Qf).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return z0.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function M_t(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(M_t,"getSessionFromEnv");d();var yo=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},F$=class extends yo{static{s(this,"NoOpStatusReporter")}didChange(){}};var Gr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Ch=class extends qs{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},O$=class extends Gr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new Ch({reason:"NotSignedIn"});if(!r.accessToken)throw new Ch({reason:"HTTP401"});let n=await N$(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new Ch(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(s8e(this.ctx))throw r;z0.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(yo).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(yo);if(n instanceof Ch)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Bt(this.ctx,"auth.reset_token_"+r),z0.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):z0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},dP=class extends O${static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Fn).getSession()}};d();var ky=class{static{s(this,"Clock")}now(){return new Date}};d();var _g=class{static{s(this,"ExpConfigMaker")}},_6=class extends _g{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(zn),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(h){return oh.createFallbackConfig(r,`Error fetching ExP config: ${String(h)}`)}if(!l.ok)return oh.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(h){if(h instanceof SyntaxError)return Na(r,h,"fetchExperiments"),oh.createFallbackConfig(r,"ExP responded with invalid JSON");throw h}let f=u.Configs.find(h=>h.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([h,m])=>h+(m?"":"cf"));return new oh(f.Parameters,u.AssignmentContext,p.join(";"))}},Q$=class extends _g{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(oh.createEmptyConfig())}};d();d();var U$=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},Sde=class extends U${static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},a8e=s(t=>new Sde(t),"DEFAULT_GRANULARITY"),q$=class extends U${constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var c8e="X-Copilot-ClientTimeBucket",H$=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=a8e(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new q$(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(c8e,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(c8e,o))}}};d();d();d();d();d();d();d();var W$="4.10.2",S6="04b07795-8ddb-461a-bbee-02f9e1bf7b46",l8e="common",av;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(av||(av={}));var R6=av.AzurePublicCloud,u8e="login.microsoftonline.com",d8e=["*"],f8e="cae",p8e="nocae",h8e="msal.cache";var Rde;var m8e;function F_t(t){var e,r,n,i,o,a,c;let l={cache:{},broker:{isEnabled:(r=(e=t.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!1,enableMsaPassthrough:(i=(n=t.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(o=t.brokerOptions)===null||o===void 0?void 0:o.parentWindowHandle}};if(!((a=t.tokenCachePersistenceOptions)===null||a===void 0)&&a.enabled){if(Rde===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let u=t.tokenCachePersistenceOptions.name||h8e;l.cache.cachePlugin=Rde(Object.assign({name:`${u}.${p8e}`},t.tokenCachePersistenceOptions)),l.cache.cachePluginCae=Rde(Object.assign({name:`${u}.${f8e}`},t.tokenCachePersistenceOptions))}if(!((c=t.brokerOptions)===null||c===void 0)&&c.enabled){if(m8e===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));l.broker.nativeBrokerPlugin=m8e.broker}return l}s(F_t,"generatePluginConfiguration");var g8e={generatePluginConfiguration:F_t};d();d();d();d();d();var A8e=require("node:os"),y8e=Me(require("node:util"),1),C8e=Me(require("node:process"),1);function v8e(t,...e){C8e.stderr.write(`${y8e.default.format(t,...e)}${A8e.EOL}`)}s(v8e,"log");var E8e=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,x8e,kde=[],Pde=[],$$=[];E8e&&Dde(E8e);var b8e=Object.assign(t=>I8e(t),{enable:Dde,enabled:Bde,disable:O_t,log:v8e});function Dde(t){x8e=t,kde=[],Pde=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Pde.push(new RegExp(`^${n.substr(1)}$`)):kde.push(new RegExp(`^${n}$`));for(let n of $$)n.enabled=Bde(n.namespace)}s(Dde,"enable");function Bde(t){if(t.endsWith("*"))return!0;for(let e of Pde)if(e.test(t))return!1;for(let e of kde)if(e.test(t))return!0;return!1}s(Bde,"enabled");function O_t(){let t=x8e||"";return Dde(""),t}s(O_t,"disable");function I8e(t){let e=Object.assign(r,{enabled:Bde(t),destroy:Q_t,log:b8e.log,namespace:t,extend:U_t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),$$.push(e),e}s(I8e,"createDebugger");function Q_t(){let t=$$.indexOf(this);return t>=0?($$.splice(t,1),!0):!1}s(Q_t,"destroy");function U_t(t){let e=I8e(`${this.namespace}:${t}`);return e.log=this.log,e}s(U_t,"extend");var fP=b8e;var w8e=new Set,j$=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,V$,Nde=fP("azure");Nde.log=(...t)=>{fP.log(...t)};var Lde=["verbose","info","warning","error"];j$&&(R8e(j$)?q_t(j$):console.error(`AZURE_LOG_LEVEL set to unknown log level '${j$}'; logging is not enabled. Acceptable values: ${Lde.join(", ")}.`));function q_t(t){if(t&&!R8e(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Lde.join(",")}`);V$=t;let e=[];for(let r of w8e)S8e(r)&&e.push(r.namespace);fP.enable(e.join(","))}s(q_t,"setLogLevel");function z$(){return V$}s(z$,"getLogLevel");var T8e={verbose:400,info:300,warning:200,error:100};function Vb(t){let e=Nde.extend(t);return _8e(Nde,e),{error:G$(e,"error"),warning:G$(e,"warning"),info:G$(e,"info"),verbose:G$(e,"verbose")}}s(Vb,"createClientLogger");function _8e(t,e){e.log=(...r)=>{t.log(...r)}}s(_8e,"patchLogMethod");function G$(t,e){let r=Object.assign(t.extend(e),{level:e});if(_8e(t,r),S8e(r)){let n=fP.disable();fP.enable(n+","+r.namespace)}return w8e.add(r),r}s(G$,"createLogger");function S8e(t){return!!(V$&&T8e[t.level]<=T8e[V$])}s(S8e,"shouldEnable");function R8e(t){return Lde.includes(t)}s(R8e,"isAzureLogLevel");var K0=Vb("identity");function Y$(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(Y$,"processEnvVars");function pl(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(pl,"formatSuccess");function Mo(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(Mo,"formatError");function k8e(t,e,r=K0){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(k8e,"credentialLoggerInstance");function ci(t,e=K0){let r=k8e(t,void 0,e);return Object.assign(Object.assign({},r),{parent:e,getToken:k8e("=> getToken()",r,e)})}s(ci,"credentialLogger");d();d();d();function H_t(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(H_t,"isErrorResponse");var D8e="CredentialUnavailableError",en=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=D8e}},K$="AuthenticationError",zb=class extends Error{static{s(this,"AuthenticationError")}constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(H_t(r))i=P8e(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=P8e(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=K$}},B8e="AggregateAuthenticationError",k6=class extends Error{static{s(this,"AggregateAuthenticationError")}constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=B8e}};function P8e(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(P8e,"convertOAuthErrorResponseToErrorResponse");var Sg=class extends Error{static{s(this,"AuthenticationRequiredError")}constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function W_t(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(W_t,"createConfigurationErrorMessage");function Uc(t,e,r=[],n){var i;let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=(i=e?.tenantId)!==null&&i!==void 0?i:t,t&&o!==t&&!r.includes("*")&&!r.some(a=>a.localeCompare(o)===0)){let a=W_t(o);throw n?.info(a),new en(a)}return o}s(Uc,"processMultiTenantRequest");function xu(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(Mo("",r)),r}}s(xu,"checkTenantId");function J$(t,e,r){return e?(xu(t,e),e):(r||(r=S6),r!==S6?"common":"organizations")}s(J$,"resolveTenantId");function hl(t){return!t||t.length===0?[]:t.includes("*")?d8e:t}s(hl,"resolveAdditionallyAllowedTenantIds");d();d();d();d();d();var P6="$",pP="_";d();function j_t(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(j_t,"isPrimitiveBody");function G_t(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(G_t,"handleNullableResponseAndWrappableBody");function Mde(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return G_t({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:j_t(t.parsedBody,c)})}s(Mde,"flattenResponse");var Py={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var Dy=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var N8e=require("node:os"),L8e=Me(require("node:util"),1),M8e=Me(require("node:process"),1);function F8e(t,...e){M8e.stderr.write(`${L8e.default.format(t,...e)}${N8e.EOL}`)}s(F8e,"log");var O8e=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,Q8e,Fde=[],Ode=[],X$=[];O8e&&Qde(O8e);var U8e=Object.assign(t=>q8e(t),{enable:Qde,enabled:Ude,disable:V_t,log:F8e});function Qde(t){Q8e=t,Fde=[],Ode=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Ode.push(new RegExp(`^${n.substr(1)}$`)):Fde.push(new RegExp(`^${n}$`));for(let n of X$)n.enabled=Ude(n.namespace)}s(Qde,"enable");function Ude(t){if(t.endsWith("*"))return!0;for(let e of Ode)if(e.test(t))return!1;for(let e of Fde)if(e.test(t))return!0;return!1}s(Ude,"enabled");function V_t(){let t=Q8e||"";return Qde(""),t}s(V_t,"disable");function q8e(t){let e=Object.assign(r,{enabled:Ude(t),destroy:z_t,log:U8e.log,namespace:t,extend:Y_t});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),X$.push(e),e}s(q8e,"createDebugger");function z_t(){let t=X$.indexOf(this);return t>=0?(X$.splice(t,1),!0):!1}s(z_t,"destroy");function Y_t(t){let e=q8e(`${this.namespace}:${t}`);return e.log=this.log,e}s(Y_t,"extend");var hP=U8e;var qde=["verbose","info","warning","error"],H8e={verbose:400,info:300,warning:200,error:100};function W8e(t,e){e.log=(...r)=>{t.log(...r)}}s(W8e,"patchLogMethod");function $8e(t){return qde.includes(t)}s($8e,"isTypeSpecRuntimeLogLevel");function K_t(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=hP(t.namespace);i.log=(...f)=>{hP.log(...f)};function o(f){if(f&&!$8e(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${qde.join(",")}`);n=f;let p=[];for(let h of e)a(h)&&p.push(h.namespace);hP.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&($8e(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${qde.join(", ")}.`));function a(f){return!!(n&&H8e[f.level]<=H8e[n])}s(a,"shouldEnable");function c(f,p){let h=Object.assign(f.extend(p),{level:p});if(W8e(f,h),a(h)){let m=hP.disable();hP.enable(m+","+h.namespace)}return e.add(h),h}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return W8e(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(K_t,"createLoggerContext");var j8e=K_t({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),J_t=j8e.logger;function D6(t){return j8e.createClientLogger(t)}s(D6,"createClientLogger");d();function Z$(t){return t.toLowerCase()}s(Z$,"normalizeName");function*X_t(t){for(let e of t.values())yield[e.name,e.value]}s(X_t,"headerIterator");var Hde=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(Z$(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(Z$(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(Z$(e))}delete(e){this._headersMap.delete(Z$(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return X_t(this._headersMap)}};function J0(t){return new Hde(t)}s(J0,"createHttpHeaders");d();d();d();d();var G8e=require("node:crypto");var Wde,Z_t=typeof((Wde=globalThis?.crypto)===null||Wde===void 0?void 0:Wde.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):G8e.randomUUID;function mP(){return Z_t()}s(mP,"randomUUID");var $de=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:J0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||mP(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function ej(t){return new $de(t)}s(ej,"createPipelineRequest");d();var V8e=new Set(["Deserialize","Serialize","Retry","Sign"]),jde=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!V8e.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!V8e.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let A=g.policy,y=g.options,E=A.name;if(r.has(E))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:A,dependsOn:new Set,dependants:new Set};y.afterPhase&&(b.afterPhase=f(y.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(E,b),f(y.phase).policies.add(b)}for(let g of this._policies){let{policy:A,options:y}=g,E=A.name,b=r.get(E);if(!b)throw new Error(`Missing node for policy ${E}`);if(y.afterPolicies)for(let _ of y.afterPolicies){let S=r.get(_);S&&(b.dependsOn.add(S),S.dependants.add(b))}if(y.beforePolicies)for(let _ of y.beforePolicies){let S=r.get(_);S&&(S.dependsOn.add(b),b.dependants.add(S))}}function p(g){g.hasRun=!0;for(let A of g.policies)if(!(A.afterPhase&&(!A.afterPhase.hasRun||A.afterPhase.policies.size))&&A.dependsOn.size===0){e.push(A.policy);for(let y of A.dependants)y.dependsOn.delete(A);r.delete(A.policy.name),g.policies.delete(A)}}s(p,"walkPhase");function h(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(h,"walkPhases");let m=0;for(;r.size>0;){m++;let g=e.length;if(h(),e.length<=g&&m>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function tj(){return jde.create()}s(tj,"createEmptyPipeline");d();d();d();function gP(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(gP,"isObject");function oS(t){if(gP(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(oS,"isError");d();var z8e=require("node:util"),Y8e=z8e.inspect.custom;d();var Gde="REDACTED",eSt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],tSt=["api-version"],Rg=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=eSt.concat(e),r=tSt.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||gP(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Gde);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Gde;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Gde;return r}};var rSt=new Rg,bu=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,Y8e,{value:s(()=>`RestError: ${this.message} 
 ${rSt.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};bu.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";bu.PARSE_ERROR="PARSE_ERROR";function rj(t){return t instanceof bu?!0:oS(t)&&t.name==="RestError"}s(rj,"isRestError");d();function Uf(t,e){return Buffer.from(t,e)}s(Uf,"stringToUint8Array");d();d();var AP=Me(require("node:http"),1),yP=Me(require("node:https"),1),ij=Me(require("node:zlib"),1),J8e=require("node:stream");d();var vh=D6("ts-http-runtime");var nSt={};function B6(t){return t&&typeof t.pipe=="function"}s(B6,"isReadableStream");function K8e(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(K8e,"isStreamComplete");function X8e(t){return t&&typeof t.byteLength=="number"}s(X8e,"isArrayBuffer");var nj=class extends J8e.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Vde=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new Dy("The operation was aborted. Request has already been canceled.");a=s(h=>{h.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let h=new Rg;vh.info(`request to '${h.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let h=aSt(f);h!==null&&e.headers.set("Content-Length",h)}let p;try{if(f&&e.onUploadProgress){let E=e.onUploadProgress,b=new nj(E);b.on("error",_=>{vh.error("Error in upload progress",_)}),B6(f)?f.pipe(b):b.end(f),f=b}let h=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let m=iSt(h),A={status:(r=h.statusCode)!==null&&r!==void 0?r:0,headers:m,request:e};if(e.method==="HEAD")return h.resume(),A;p=u?oSt(h,m):h;let y=e.onDownloadProgress;if(y){let E=new nj(y);E.on("error",b=>{vh.error("Error in download progress",b)}),p.pipe(E),p=E}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(A.status)?A.readableStreamBody=p:A.bodyAsText=await sSt(p),A}finally{if(e.abortSignal&&a){let h=Promise.resolve();B6(f)&&(h=K8e(f));let m=Promise.resolve();B6(p)&&(m=K8e(p)),Promise.all([h,m]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{vh.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?AP.request(l,u):yP.request(l,u);p.once("error",h=>{var m;f(new bu(h.message,{code:(m=h.code)!==null&&m!==void 0?m:bu.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let h=new Dy("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(h),f(h)}),n&&B6(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):X8e(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(vh.error("Unrecognized body type",n),f(new bu("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?AP.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new AP.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return yP.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:nSt,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(vh.info("No cached TLS Agent exist, creating a new Agent"),a=new yP.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function iSt(t){let e=J0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(iSt,"getResponseHeaders");function oSt(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=ij.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=ij.createInflate();return t.pipe(n),n}return t}s(oSt,"getDecodedResponseStream");function sSt(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new bu(`Error reading response as text: ${i.message}`,{code:bu.PARSE_ERROR}))})})}s(sSt,"streamToText");function aSt(t){return t?Buffer.isBuffer(t)?t.length:B6(t)?null:X8e(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(aSt,"getBodyLength");function Z8e(){return new Vde}s(Z8e,"createNodeHttpClient");function oj(){return Z8e()}s(oj,"createDefaultHttpClient");d();d();d();d();var zde="logPolicy";function sj(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:vh.info,n=new Rg({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:zde,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(sj,"logPolicy");d();var Yde="redirectPolicy",e9e=["GET","HEAD"];function aj(t={}){let{maxRetries:e=20}=t;return{name:Yde,async sendRequest(r,n){let i=await n(r);return t9e(n,i,e)}}}s(aj,"redirectPolicy");async function t9e(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&e9e.includes(i.method)||o===302&&e9e.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return t9e(t,u,r,n+1)}return e}s(t9e,"handleRedirect");d();d();d();function r9e(){return"User-Agent"}s(r9e,"getHeaderName");d();function n9e(){return r9e()}s(n9e,"getUserAgentHeaderName");var OWr=n9e();d();var Kde="decompressResponsePolicy";function cj(){return{name:Kde,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(cj,"decompressResponsePolicy");d();d();d();d();function N6(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(N6,"getRandomIntegerInclusive");function L6(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+N6(0,n/2)}}s(L6,"calculateRetryDelay");d();d();var cSt="The operation was aborted.";function i9e(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new Dy(r?.abortErrorMsg?r?.abortErrorMsg:cSt)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(i9e,"delay");function o9e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(o9e,"parseHeaderValueAsNumber");var Jde="Retry-After",lSt=["retry-after-ms","x-ms-retry-after-ms",Jde];function s9e(t){if(t&&[429,503].includes(t.status))try{for(let i of lSt){let o=o9e(t,i);if(o===0||o)return o*(i===Jde?1e3:1)}let e=t.headers.get(Jde);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(s9e,"getRetryAfterInMs");function a9e(t){return Number.isFinite(s9e(t))}s(a9e,"isThrottlingRetryResponse");function Xde(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=s9e(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Xde,"throttlingRetryStrategy");var uSt=1e3,dSt=1e3*64;function lj(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:uSt,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:dSt;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=pSt(c),u=l&&t.ignoreSystemErrors,f=fSt(a),p=f&&t.ignoreHttpStatusCodes;return a&&(a9e(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:L6(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(lj,"exponentialRetryStrategy");function fSt(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(fSt,"isExponentialRetryResponse");function pSt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(pSt,"isSystemError");d();var hSt=D6("ts-http-runtime retryPolicy"),mSt="retryPolicy";function Yb(t,e={maxRetries:3}){let r=e.logger||hSt;return{name:mSt,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new Dy;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let h=f.retry({retryCount:u,response:c,responseError:l});if(h.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:m,retryAfterInMs:g,redirectTo:A}=h;if(m)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,m),m;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await i9e(g,void 0,{abortSignal:n.abortSignal});continue e}if(A){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${A}`),n.url=A;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(Yb,"retryPolicy");var Zde="defaultRetryPolicy";function uj(t={}){var e;return{name:Zde,sendRequest:Yb([Xde(),lj(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(uj,"defaultRetryPolicy");d();d();var efe,tfe,rfe,nfe,c9e=typeof window<"u"&&typeof window.document<"u",l9e=typeof self=="object"&&typeof self?.importScripts=="function"&&(((efe=self.constructor)===null||efe===void 0?void 0:efe.name)==="DedicatedWorkerGlobalScope"||((tfe=self.constructor)===null||tfe===void 0?void 0:tfe.name)==="ServiceWorkerGlobalScope"||((rfe=self.constructor)===null||rfe===void 0?void 0:rfe.name)==="SharedWorkerGlobalScope"),u9e=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",d9e=typeof Bun<"u"&&typeof Bun.version<"u",Kb=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((nfe=globalThis.process.versions)===null||nfe===void 0)&&nfe.node);var f9e=typeof navigator<"u"&&navigator?.product==="ReactNative";var ife="formDataPolicy";function gSt(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(gSt,"formDataToFormDataMap");function dj(){return{name:ife,async sendRequest(t,e){if(Kb&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=gSt(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=ASt(t.formData):await ySt(t.formData,t),t.formData=void 0}return e(t)}}}s(dj,"formDataPolicy");function ASt(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(ASt,"wwwFormUrlEncode");async function ySt(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:J0({"Content-Disposition":`form-data; name="${i}"`}),body:Uf(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=J0();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(ySt,"prepareFormData");d();var q9e=Me(N9e(),1),H9e=Me(F9e(),1);var A2t="HTTPS_PROXY",y2t="HTTP_PROXY",C2t="ALL_PROXY",v2t="NO_PROXY",pfe="proxyPolicy",O9e=[],W9e=!1,E2t=new Map;function Cj(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(Cj,"getEnvironmentValue");function x2t(){if(!process)return;let t=Cj(A2t),e=Cj(C2t),r=Cj(y2t);return t||e||r}s(x2t,"loadEnvironmentProxyValue");function b2t(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(b2t,"isBypassed");function I2t(){let t=Cj(v2t);return W9e=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(I2t,"loadNoProxy");function T2t(){let t=x2t();return t?new URL(t):void 0}s(T2t,"getDefaultProxySettingsInternal");function Q9e(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(Q9e,"getUrlFromProxySettings");function U9e(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&vh.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new H9e.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new q9e.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(U9e,"setProxyAgentOnRequest");function vj(t,e){W9e||O9e.push(...I2t());let r=t?Q9e(t):T2t(),n={};return{name:pfe,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!b2t(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:O9e,e?.customNoProxyList?void 0:E2t)?U9e(i,n,r):i.proxySettings&&U9e(i,n,Q9e(i.proxySettings)),o(i)}}}s(vj,"proxyPolicy");d();var hfe="agentPolicy";function Ej(t){return{name:hfe,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(Ej,"agentPolicy");d();var mfe="tlsPolicy";function xj(t){return{name:mfe,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(xj,"tlsPolicy");d();d();function bj(t){return typeof t.stream=="function"}s(bj,"isBlob");d();d();function $9e(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s($9e,"__values");function Ly(t){return this instanceof Ly?(this.v=t,this):new Ly(t)}s(Ly,"__await");function gfe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(m){return function(g){return Promise.resolve(g).then(m,p)}}function c(m,g){n[m]&&(i[m]=function(A){return new Promise(function(y,E){o.push([m,A,y,E])>1||l(m,A)})},g&&(i[m]=g(i[m])))}function l(m,g){try{u(n[m](g))}catch(A){h(o[0][3],A)}}function u(m){m.value instanceof Ly?Promise.resolve(m.value.v).then(f,p):h(o[0][2],m)}function f(m){l("next",m)}function p(m){l("throw",m)}function h(m,g){m(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(gfe,"__asyncGenerator");function j9e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof $9e=="function"?$9e(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(j9e,"__asyncValues");var Ij=require("stream");function G9e(){return gfe(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield Ly(e.read());if(r)return yield Ly(void 0);yield yield Ly(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(G9e,"streamAsyncIterator");function w2t(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=G9e.bind(t)),t.values||(t.values=G9e.bind(t))}s(w2t,"makeAsyncIterable");function V9e(t){return t instanceof ReadableStream?(w2t(t),Ij.Readable.fromWeb(t)):t}s(V9e,"ensureNodeStream");function _2t(t){return t instanceof Uint8Array?Ij.Readable.from(Buffer.from(t)):bj(t)?V9e(t.stream()):V9e(t)}s(_2t,"toStream");async function z9e(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(_2t);return Ij.Readable.from(function(){return gfe(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,j9e(u)),l;l=yield Ly(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield Ly(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield Ly(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(z9e,"concat");function S2t(){return`----AzSDKFormBoundary${mP()}`}s(S2t,"generateBoundary");function R2t(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(R2t,"encodeHeaders");function k2t(t){return t instanceof Uint8Array?t.byteLength:bj(t)?t.size===-1?void 0:t.size:void 0}s(k2t,"getLength");function P2t(t){let e=0;for(let r of t){let n=k2t(r);if(n===void 0)return;e+=n}return e}s(P2t,"getTotalLength");async function D2t(t,e,r){let n=[Uf(`--${r}`,"utf-8"),...e.flatMap(o=>[Uf(`\r
`,"utf-8"),Uf(R2t(o.headers),"utf-8"),Uf(`\r
`,"utf-8"),o.body,Uf(`\r
--${r}`,"utf-8")]),Uf(`--\r
\r
`,"utf-8")],i=P2t(n);i&&t.headers.set("Content-Length",i),t.body=await z9e(n)}s(D2t,"buildRequestBody");var F6="multipartPolicy",B2t=70,N2t=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function L2t(t){if(t.length>B2t)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!N2t.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(L2t,"assertValidBoundary");function Tj(){return{name:F6,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?L2t(n):n=S2t(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await D2t(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(Tj,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function wj(){return tj()}s(wj,"createEmptyPipeline");d();d();d();var My=Vb("core-rest-pipeline");d();d();d();d();function Cfe(t={}){return sj(Object.assign({logger:My.info},t))}s(Cfe,"logPolicy");d();function vfe(t={}){return aj(t)}s(vfe,"redirectPolicy");d();d();d();var IP=Me(require("node:os"),1),_j=Me(require("node:process"),1);function Y9e(){return"User-Agent"}s(Y9e,"getHeaderName");async function K9e(t){if(_j&&_j.versions){let e=_j.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${IP.arch()}-${IP.type()}-${IP.release()})`)}s(K9e,"setPlatformSpecificData");d();var Sj="1.22.0";function $2t(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s($2t,"getUserAgentString");function J9e(){return Y9e()}s(J9e,"getUserAgentHeaderName");async function Rj(t){let e=new Map;e.set("core-rest-pipeline",Sj),await K9e(e);let r=$2t(e);return t?`${t} ${r}`:r}s(Rj,"getUserAgentValue");var X9e=J9e(),Z9e="userAgentPolicy";function Efe(t={}){let e=Rj(t.userAgentPrefix);return{name:Z9e,async sendRequest(r,n){return r.headers.has(X9e)||r.headers.set(X9e,await e),n(r)}}}s(Efe,"userAgentPolicy");d();d();d();d();d();d();d();d();d();var cS=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function xfe(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new cS(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(xfe,"createAbortablePromise");d();var Y2t="The delay was aborted.";function bfe(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return xfe(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??Y2t})}s(bfe,"delay");d();function TP(t){if(oS(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(TP,"getErrorMessage");d();function e6e(t,e){return L6(t,e)}s(e6e,"calculateRetryDelay");function kj(t){return oS(t)}s(kj,"isError");var Pj=Kb,wP=Kb;var t6e=Symbol("rawContent");function Ife(t){return typeof t[t6e]=="function"}s(Ife,"hasRawContent");function r6e(t){return Ife(t)?t[t6e]():t}s(r6e,"getRawContent");var Dj=F6;function Tfe(){let t=Tj();return{name:Dj,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)Ife(n.body)&&(n.body=r6e(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(Tfe,"multipartPolicy");d();function wfe(){return cj()}s(wfe,"decompressResponsePolicy");d();function _fe(t={}){return uj(t)}s(_fe,"defaultRetryPolicy");d();function Sfe(){return dj()}s(Sfe,"formDataPolicy");d();function Rfe(t,e){return vj(t,e)}s(Rfe,"proxyPolicy");d();var n6e="setClientRequestIdPolicy";function kfe(t="x-ms-client-request-id"){return{name:n6e,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(kfe,"setClientRequestIdPolicy");d();function Pfe(t){return Ej(t)}s(Pfe,"agentPolicy");d();function Dfe(t){return xj(t)}s(Dfe,"tlsPolicy");d();d();d();d();var _P={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function i6e(t={}){let e=new Bfe(t.parentContext);return t.span&&(e=e.setValue(_P.span,t.span)),t.namespace&&(e=e.setValue(_P.namespace,t.namespace)),e}s(i6e,"createTracingContext");var Bfe=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var s6e=Me(o6e(),1),Nj=s6e.state;function K2t(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(K2t,"createDefaultTracingSpan");function J2t(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:K2t(),tracingContext:i6e({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(J2t,"createDefaultInstrumenter");function O6(){return Nj.instrumenterImplementation||(Nj.instrumenterImplementation=J2t()),Nj.instrumenterImplementation}s(O6,"getInstrumenter");d();function Q6(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var h;let m=O6().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(h=f?.tracingOptions)===null||h===void 0?void 0:h.tracingContext})),g=m.tracingContext,A=m.span;g.getValue(_P.namespace)||(g=g.setValue(_P.namespace,e)),A.setAttribute("az.namespace",g.getValue(_P.namespace));let y=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:A,updatedOptions:y}}s(i,"startSpan");async function o(u,f,p,h){let{span:m,updatedOptions:g}=i(u,f,h);try{let A=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,m)));return m.setStatus({status:"success"}),A}catch(A){throw m.setStatus({status:"error",error:A}),A}finally{m.end()}}s(o,"withSpan");function a(u,f,...p){return O6().withContext(u,f,...p)}s(a,"withContext");function c(u){return O6().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return O6().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(Q6,"createTracingClient");d();var SP=bu;function U6(t){return rj(t)}s(U6,"isRestError");var a6e="tracingPolicy";function Nfe(t={}){let e=Rj(t.userAgentPrefix),r=new Rg({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=X2t();return{name:a6e,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=Z2t(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return tRt(u,p),p}catch(p){throw eRt(u,p),p}}}}s(Nfe,"tracingPolicy");function X2t(){try{return Q6({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:Sj})}catch(t){My.warning(`Error when creating the TracingClient: ${TP(t)}`);return}}s(X2t,"tryCreateTracingClient");function Z2t(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){My.warning(`Skipping creating a tracing span due to an error: ${TP(n)}`);return}}s(Z2t,"tryCreateSpan");function eRt(t,e){try{t.setStatus({status:"error",error:kj(e)?e:void 0}),U6(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){My.warning(`Skipping tracing span processing due to an error: ${TP(r)}`)}}s(eRt,"tryProcessError");function tRt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){My.warning(`Skipping tracing span processing due to an error: ${TP(r)}`)}}s(tRt,"tryProcessResponse");d();d();function Lj(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(Lj,"wrapAbortSignalLike");var rRt="wrapAbortSignalLikePolicy";function c6e(){return{name:rRt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=Lj(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(c6e,"wrapAbortSignalLikePolicy");function Lfe(t){var e;let r=wj();return wP&&(t.agent&&r.addPolicy(Pfe(t.agent)),t.tlsOptions&&r.addPolicy(Dfe(t.tlsOptions)),r.addPolicy(Rfe(t.proxyOptions)),r.addPolicy(wfe())),r.addPolicy(c6e()),r.addPolicy(Sfe(),{beforePolicies:[Dj]}),r.addPolicy(Efe(t.userAgentOptions)),r.addPolicy(kfe((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(Tfe(),{afterPhase:"Deserialize"}),r.addPolicy(_fe(t.retryOptions),{phase:"Retry"}),r.addPolicy(Nfe(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),wP&&r.addPolicy(vfe(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Cfe(t.loggingOptions),{afterPhase:"Sign"}),r}s(Lfe,"createPipelineFromOptions");d();function Mfe(){let t=oj();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?Lj(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(Mfe,"createDefaultHttpClient");d();function Xb(t){return J0(t)}s(Xb,"createHttpHeaders");d();function kg(t){return ej(t)}s(kg,"createPipelineRequest");d();d();d();d();var iRt=Vb("core-rest-pipeline retryPolicy");function Ffe(t,e={maxRetries:3}){return Yb(t,Object.assign({logger:iRt},e))}s(Ffe,"retryPolicy");d();d();var oRt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function sRt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await bfe(e),i=await n();return i}s(sRt,"beginRefresh");function Ofe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},oRt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=sRt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(h=>(r=null,n=h,i=u.tenantId,n)).catch(h=>{throw r=null,n=null,i=void 0,h})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(Ofe,"createTokenCycler");var f6e="bearerTokenAuthenticationPolicy";async function Mj(t,e){try{return[await e(t),void 0]}catch(r){if(U6(r)&&r.response)return[r.response,r];throw r}}s(Mj,"trySendRequest");async function aRt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(aRt,"defaultAuthorizeRequest");function l6e(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(l6e,"isChallengeResponse");async function u6e(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(u6e,"authorizeRequestOnCaeChallenge");function Fj(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||My,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:aRt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?Ofe(i):()=>Promise.resolve(null);return{name:f6e,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let h,m,g;if([h,m]=await Mj(f,p),l6e(h)){let A=d6e(h.headers.get("WWW-Authenticate"));if(A){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),h}g=await u6e({scopes:Array.isArray(o)?o:[o],response:h,request:f,getAccessToken:u,logger:c},y),g&&([h,m]=await Mj(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:h,getAccessToken:u,logger:c}),g&&([h,m]=await Mj(f,p)),l6e(h)&&(A=d6e(h.headers.get("WWW-Authenticate")),A))){let y;try{y=atob(A)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${A}`),h}g=await u6e({scopes:Array.isArray(o)?o:[o],response:h,request:f,getAccessToken:u,logger:c},y),g&&([h,m]=await Mj(f,p))}}if(m)throw m;return h}}}s(Fj,"bearerTokenAuthenticationPolicy");function cRt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(cRt,"parseChallenges");function d6e(t){var e;return t?(e=cRt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(d6e,"getCaeChallengeClaims");d();d();d();d();d();d();var h6e=Me(p6e(),1),Qfe=h6e.state;function Zb(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=m6e(t,n);!a.propertyFound&&r&&(a=m6e(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=Zb(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(Zb,"getOperationArgumentValueFromParameter");function m6e(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(m6e,"getPropertyFromParameterPath");var g6e=Symbol.for("@azure/core-client original request");function lRt(t){return g6e in t}s(lRt,"hasOriginalRequest");function cv(t){if(lRt(t))return cv(t[g6e]);let e=Qfe.operationRequestMap.get(t);return e||(e={},Qfe.operationRequestMap.set(t,e)),e}s(cv,"getOperationRequestInfo");var uRt=["application/json","text/json"],dRt=["application/xml","application/atom+xml"],A6e="deserializationPolicy";function Ufe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:uRt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:dRt,f=t.parseXML,p=t.serializerOptions,h={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:pP}};return{name:A6e,async sendRequest(m,g){let A=await g(m);return hRt(l,u,A,h,f)}}}s(Ufe,"deserializationPolicy");function fRt(t){let e,r=t.request,n=cv(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(fRt,"getOperationResponseMap");function pRt(t){let e=t.request,r=cv(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(pRt,"shouldDeserializeResponse");async function hRt(t,e,r,n,i){let o=await ARt(t,e,r,n,i);if(!pRt(o))return o;let a=cv(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=fRt(o),{error:u,shouldReturnResponse:f}=gRt(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===Py.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(h){throw new SP(`Error ${h} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(hRt,"deserializeResponseBody");function mRt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(mRt,"isOperationSpecEmpty");function gRt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(mRt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new SP(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let h=t.parsedBody,m;if(f){let A=h;if(e.isXML&&f.type.name===Py.Sequence){A=[];let y=f.xmlElementName;typeof h=="object"&&y&&(A=h[y])}m=e.serializer.deserialize(f,A,"error.response.parsedBody",n)}let g=h.error||m||h;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=m)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(h){u.message=`Error "${h.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(gRt,"handleErrorResponse");async function ARt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||SP.PARSE_ERROR;throw new SP(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(ARt,"parse");d();d();function y6e(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===Py.Stream&&e.add(Number(r))}return e}s(y6e,"getStreamingResponseStatusCodes");function Fy(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(Fy,"getPathStringFromParameter");var C6e="serializationPolicy";function qfe(t={}){let e=t.stringifyXML;return{name:C6e,async sendRequest(r,n){let i=cv(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(yRt(r,a,o),CRt(r,a,o,e)),n(r)}}}s(qfe,"serializationPolicy");function yRt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=Zb(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,Fy(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||Fy(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(yRt,"serializeHeaders");function CRt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:pP}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=Zb(e,r.requestBody);let h=r.requestBody.mapper,{required:m,serializedName:g,xmlName:A,xmlElementName:y,xmlNamespace:E,xmlNamespacePrefix:b,nullable:_}=h,S=h.type.name;try{if(t.body!==void 0&&t.body!==null||_&&t.body===null||m){let P=Fy(r.requestBody);t.body=r.serializer.serialize(h,t.body,P,f);let B=S===Py.Stream;if(r.isXML){let F=b?`xmlns:${b}`:"xmlns",Y=vRt(E,F,S,t.body,f);S===Py.Sequence?t.body=n(ERt(Y,y||A||g,F,E),{rootName:A||g,xmlCharKey:p}):B||(t.body=n(Y,{rootName:A||g,xmlCharKey:p}))}else{if(S===Py.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;B||(t.body=JSON.stringify(t.body))}}}catch(P){throw new Error(`Error "${P.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let h of r.formDataParameters){let m=Zb(e,h);if(m!=null){let g=h.mapper.serializedName||Fy(h);t.formData[g]=r.serializer.serialize(h.mapper,m,Fy(h),f)}}}}s(CRt,"serializeRequestBody");function vRt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o[P6]={[e]:t},o}return n}s(vRt,"getXmlValueWithNamespace");function ERt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i[P6]={[r]:n},i}s(ERt,"prepareXMLRootList");function Hfe(t={}){let e=Lfe(t??{});return t.credentialOptions&&e.addPolicy(Fj({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(qfe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(Ufe(t.deserializationOptions),{phase:"Deserialize"}),e}s(Hfe,"createClientPipeline");d();var Wfe;function v6e(){return Wfe||(Wfe=Mfe()),Wfe}s(v6e,"getCachedDefaultHttpClient");d();var xRt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function x6e(t,e,r,n){let i=bRt(e,r,n),o=!1,a=E6e(t,i);if(e.path){let u=E6e(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),IRt(u)?(a=u,o=!0):a=TRt(a,u)}let{queryParams:c,sequenceParams:l}=wRt(e,r,n);return a=SRt(a,c,l,o),a}s(x6e,"getRequestUrl");function E6e(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(E6e,"replaceAll");function bRt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=Zb(e,o,r),c=Fy(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(bRt,"calculateUrlReplacements");function IRt(t){return t.includes("://")}s(IRt,"isAbsoluteUrl");function TRt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(TRt,"appendPath");function wRt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=Zb(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,Fy(a));let l=a.collectionFormat?xRt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||Fy(a),c)}}return{queryParams:i,sequenceParams:o}}s(wRt,"calculateQueryParameters");function _Rt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(_Rt,"simpleParseQueryParams");function SRt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=_Rt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(SRt,"appendQueryParams");d();var $fe=Vb("core-client");var q6=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&$fe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||v6e(),this.pipeline=e.pipeline||RRt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=x6e(n,r,e,this),o=kg({url:i});o.method=r.httpMethod;let a=cv(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=y6e(r));try{let u=await this.sendRequest(o),f=Mde(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=Mde(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function RRt(t){let e=kRt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return Hfe(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(RRt,"createDefaultPipeline");function kRt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(kRt,"getCredentialScopes");d();d();d();function b6e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(b6e,"getIdentityTokenEndpointSuffix");d();var as=Q6({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:W$});d();var I6e="/.default",T6e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function H6(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(I6e)?e.substr(0,e.lastIndexOf(I6e)):e}s(H6,"mapScopesToResource");function w6e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(w6e,"parseExpirationTimestamp");function _6e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(_6e,"parseRefreshTimestamp");var W6="noCorrelationId";function PRt(t){let e=t?.authorityHost;return Pj&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??R6}s(PRt,"getIdentityClientAuthorityHost");var lv=class extends q6{static{s(this,"IdentityClient")}constructor(e){var r,n;let i=`azsdk-js-identity/${W$}`,o=!((r=e?.userAgentOptions)===null||r===void 0)&&r.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,a=PRt(e);if(!a.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:o},baseUri:a})),this.allowInsecureConnection=!1,this.authorityHost=a,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){K0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:w6e(n),refreshAfterTimestamp:_6e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return K0.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new zb(r.status,r.bodyAsText);throw K0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;K0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return as.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=b6e(e),p=kg({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:Xb({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),h=await this.sendTokenRequest(p);return K0.info(`IdentityClient: refreshed token for client ID: ${r}`),h}catch(f){if(f.name===K$&&f.errorResponse.error==="interaction_required")return K0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw K0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||W6,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(W6)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){var r;let n=(r=e?.body)===null||r===void 0?void 0:r.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||W6}async sendGetRequestAsync(e,r){let n=kg({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:Xb(r?.headers),abortSignal:this.generateAbortSignal(W6)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=kg({url:e,method:"POST",body:r?.body,headers:Xb(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));K0.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){K0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};var Ftn=ci("VisualStudioCodeCredential");var Otn={AzureCloud:av.AzurePublicCloud,AzureChina:av.AzureChina,AzureGermanCloud:av.AzureGermany,AzureUSGovernment:av.AzureGovernment};d();d();var op={};fa(op,{AuthError:()=>ri,AuthErrorCodes:()=>DP,AuthErrorMessage:()=>Gfe,AzureCloudInstance:()=>mv,ClientApplication:()=>vI,ClientAssertion:()=>bv,ClientAuthError:()=>aI,ClientAuthErrorCodes:()=>cs,ClientAuthErrorMessage:()=>zfe,ClientConfigurationError:()=>OP,ClientConfigurationErrorCodes:()=>FP,ClientConfigurationErrorMessage:()=>Zfe,ClientCredentialClient:()=>EI,ConfidentialClientApplication:()=>i3,CryptoProvider:()=>$y,DeviceCodeClient:()=>t3,DistributedCachePlugin:()=>fV,InteractionRequiredAuthError:()=>rp,InteractionRequiredAuthErrorCodes:()=>cG,InteractionRequiredAuthErrorMessage:()=>ope,LogLevel:()=>La,Logger:()=>ep,ManagedIdentityApplication:()=>o3,ManagedIdentitySourceNames:()=>Yn,OnBehalfOfClient:()=>n3,PromptValue:()=>tI,ProtocolMode:()=>fd,PublicClientApplication:()=>r3,ResponseMode:()=>Oy,ServerError:()=>Gd,TokenCache:()=>GP,TokenCacheContext:()=>np,UsernamePasswordClient:()=>e3,internals:()=>spe,version:()=>Ng});d();var spe={};fa(spe,{Deserializer:()=>Ev,Serializer:()=>eI});d();d();var eI=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var tt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},ti={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Hf=[tt.OPENID_SCOPE,tt.PROFILE_SCOPE,tt.OFFLINE_ACCESS_SCOPE],jfe=[...Hf,tt.EMAIL_SCOPE],Rs={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var Wf={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},lS={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},tI={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Qj={PLAIN:"plain",S256:"S256"},RP={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var Oy={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},$f={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},uS={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},ja={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Co={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var $6="appmetadata",S6e="client_info",uv="1",kP={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Wd={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},ml={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Zi={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Qy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},j6={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},G6={username:"username",password:"password"},dS={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Uj={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Cs={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var PP=300,Tu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var DP={};fa(DP,{postRequestFailed:()=>z6,unexpectedError:()=>V6});d();var V6="unexpected_error",z6="post_request_failed";var qj={[V6]:"Unexpected error in authentication.",[z6]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Gfe={unexpectedError:{code:V6,desc:qj[V6]},postRequestFailed:{code:z6,desc:qj[z6]}},ri=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||tt.EMPTY_STRING,this.errorMessage=r||tt.EMPTY_STRING,this.subError=n||tt.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Vfe(t,e){return new ri(t,e?`${qj[t]} ${e}`:qj[t])}s(Vfe,"createAuthError");var cs={};fa(cs,{authTimeNotFound:()=>dv,authorizationCodeMissingFromServerResponse:()=>wS,bindingKeyNotRemoved:()=>oL,cannotAppendScopeSet:()=>bS,cannotRemoveEmptyScope:()=>xS,clientInfoDecodingError:()=>rI,clientInfoEmptyError:()=>fS,deviceCodeExpired:()=>X6,deviceCodePollingCancelled:()=>J6,deviceCodeUnknownError:()=>Z6,emptyInputScopeSet:()=>oI,endSessionEndpointNotSupported:()=>_S,endpointResolutionError:()=>$d,hashNotDeserialized:()=>gS,invalidAssertion:()=>rL,invalidCacheEnvironment:()=>pv,invalidCacheRecord:()=>IS,invalidClientCredential:()=>nL,invalidState:()=>Pg,keyIdMissing:()=>SS,maxAgeTranspired:()=>CS,methodNotImplemented:()=>_i,missingTenantIdError:()=>cL,multipleMatchingAccounts:()=>K6,multipleMatchingAppMetadata:()=>vS,multipleMatchingTokens:()=>Y6,nestedAppAuthBridgeDisabled:()=>lL,networkError:()=>hS,noAccountFound:()=>eL,noAccountInSilentRequest:()=>fv,noCryptoObject:()=>sI,noNetworkConnectivity:()=>sL,nonceMismatch:()=>yS,nullOrEmptyToken:()=>pS,openIdConfigError:()=>mS,requestCannotBeMade:()=>ES,stateMismatch:()=>AS,stateNotFound:()=>iI,tokenClaimsCnfRequiredForSignedJwt:()=>TS,tokenParsingError:()=>nI,tokenRefreshRequired:()=>hv,unexpectedCredentialType:()=>tL,userCanceled:()=>aL,userTimeoutReached:()=>iL});d();var rI="client_info_decoding_error",fS="client_info_empty_error",nI="token_parsing_error",pS="null_or_empty_token",$d="endpoints_resolution_error",hS="network_error",mS="openid_config_error",gS="hash_not_deserialized",Pg="invalid_state",AS="state_mismatch",iI="state_not_found",yS="nonce_mismatch",dv="auth_time_not_found",CS="max_age_transpired",Y6="multiple_matching_tokens",K6="multiple_matching_accounts",vS="multiple_matching_appMetadata",ES="request_cannot_be_made",xS="cannot_remove_empty_scope",bS="cannot_append_scopeset",oI="empty_input_scopeset",J6="device_code_polling_cancelled",X6="device_code_expired",Z6="device_code_unknown_error",fv="no_account_in_silent_request",IS="invalid_cache_record",pv="invalid_cache_environment",eL="no_account_found",sI="no_crypto_object",tL="unexpected_credential_type",rL="invalid_assertion",nL="invalid_client_credential",hv="token_refresh_required",iL="user_timeout_reached",TS="token_claims_cnf_required_for_signedjwt",wS="authorization_code_missing_from_server_response",oL="binding_key_not_removed",_S="end_session_endpoint_not_supported",SS="key_id_missing",sL="no_network_connectivity",aL="user_canceled",cL="missing_tenant_id_error",_i="method_not_implemented",lL="nested_app_auth_bridge_disabled";var ni={[rI]:"The client info could not be parsed/decoded correctly",[fS]:"The client info was empty",[nI]:"Token cannot be parsed",[pS]:"The token is null or empty",[$d]:"Endpoints cannot be resolved",[hS]:"Network request failed",[mS]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[gS]:"The hash parameters could not be deserialized",[Pg]:"State was not the expected format",[AS]:"State mismatch error",[iI]:"State not found",[yS]:"Nonce mismatch error",[dv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[CS]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Y6]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[K6]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[vS]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ES]:"Token request cannot be made without authorization code or refresh token.",[xS]:"Cannot remove null or empty scope from ScopeSet",[bS]:"Cannot append ScopeSet",[oI]:"Empty input ScopeSet cannot be processed",[J6]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[X6]:"Device code is expired.",[Z6]:"Device code stopped polling for unknown reasons.",[fv]:"Please pass an account object, silent flow is not supported without account information",[IS]:"Cache record object was null or undefined.",[pv]:"Invalid environment when attempting to create cache entry",[eL]:"No account found in cache for given key.",[sI]:"No crypto object detected.",[tL]:"Unexpected credential type.",[rL]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[nL]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[hv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[iL]:"User defined timeout for device code polling reached",[TS]:"Cannot generate a POP jwt if the token_claims are not populated",[wS]:"Server response does not contain an authorization code to proceed",[oL]:"Could not remove the credential's binding key from storage.",[_S]:"The provided authority does not support logout",[SS]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[sL]:"No network connectivity. Check your internet connection.",[aL]:"User cancelled the flow.",[cL]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[_i]:"This method has not been implemented",[lL]:"The nested app auth bridge is disabled"},zfe={clientInfoDecodingError:{code:rI,desc:ni[rI]},clientInfoEmptyError:{code:fS,desc:ni[fS]},tokenParsingError:{code:nI,desc:ni[nI]},nullOrEmptyToken:{code:pS,desc:ni[pS]},endpointResolutionError:{code:$d,desc:ni[$d]},networkError:{code:hS,desc:ni[hS]},unableToGetOpenidConfigError:{code:mS,desc:ni[mS]},hashNotDeserialized:{code:gS,desc:ni[gS]},invalidStateError:{code:Pg,desc:ni[Pg]},stateMismatchError:{code:AS,desc:ni[AS]},stateNotFoundError:{code:iI,desc:ni[iI]},nonceMismatchError:{code:yS,desc:ni[yS]},authTimeNotFoundError:{code:dv,desc:ni[dv]},maxAgeTranspired:{code:CS,desc:ni[CS]},multipleMatchingTokens:{code:Y6,desc:ni[Y6]},multipleMatchingAccounts:{code:K6,desc:ni[K6]},multipleMatchingAppMetadata:{code:vS,desc:ni[vS]},tokenRequestCannotBeMade:{code:ES,desc:ni[ES]},removeEmptyScopeError:{code:xS,desc:ni[xS]},appendScopeSetError:{code:bS,desc:ni[bS]},emptyInputScopeSetError:{code:oI,desc:ni[oI]},DeviceCodePollingCancelled:{code:J6,desc:ni[J6]},DeviceCodeExpired:{code:X6,desc:ni[X6]},DeviceCodeUnknownError:{code:Z6,desc:ni[Z6]},NoAccountInSilentRequest:{code:fv,desc:ni[fv]},invalidCacheRecord:{code:IS,desc:ni[IS]},invalidCacheEnvironment:{code:pv,desc:ni[pv]},noAccountFound:{code:eL,desc:ni[eL]},noCryptoObj:{code:sI,desc:ni[sI]},unexpectedCredentialType:{code:tL,desc:ni[tL]},invalidAssertion:{code:rL,desc:ni[rL]},invalidClientCredential:{code:nL,desc:ni[nL]},tokenRefreshRequired:{code:hv,desc:ni[hv]},userTimeoutReached:{code:iL,desc:ni[iL]},tokenClaimsRequired:{code:TS,desc:ni[TS]},noAuthorizationCodeFromServer:{code:wS,desc:ni[wS]},bindingKeyNotRemovedError:{code:oL,desc:ni[oL]},logoutNotSupported:{code:_S,desc:ni[_S]},keyIdMissing:{code:SS,desc:ni[SS]},noNetworkConnectivity:{code:sL,desc:ni[sL]},userCanceledError:{code:aL,desc:ni[aL]},missingTenantIdError:{code:cL,desc:ni[cL]},nestedAppAuthBridgeDisabled:{code:lL,desc:ni[lL]}},aI=class t extends ri{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${ni[e]}: ${r}`:ni[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function Ct(t,e){return new aI(t,e)}s(Ct,"createClientAuthError");var BP={createNewGuid:s(()=>{throw Ct(_i)},"createNewGuid"),base64Decode:s(()=>{throw Ct(_i)},"base64Decode"),base64Encode:s(()=>{throw Ct(_i)},"base64Encode"),base64UrlEncode:s(()=>{throw Ct(_i)},"base64UrlEncode"),encodeKid:s(()=>{throw Ct(_i)},"encodeKid"),async getPublicKeyThumbprint(){throw Ct(_i)},async removeTokenBindingKey(){throw Ct(_i)},async clearKeystore(){throw Ct(_i)},async signJwt(){throw Ct(_i)},async hashString(){throw Ct(_i)}};d();var La;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(La||(La={}));var ep=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=La.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:La.Info,this.correlationId=o.correlationId||tt.EMPTY_STRING,this.packageName=r||tt.EMPTY_STRING,this.packageVersion=n||tt.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:La.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${La[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:La.Error,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:La.Error,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:La.Warning,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:La.Warning,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:La.Info,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:La.Info,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:La.Verbose,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:La.Verbose,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:La.Trace,containsPii:!1,correlationId:r||tt.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:La.Trace,containsPii:!0,correlationId:r||tt.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var Hj="@azure/msal-common",NP="15.8.1";d();var mv={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var gl={};fa(gl,{createAccessTokenEntity:()=>Jfe,createIdTokenEntity:()=>Kfe,createRefreshTokenEntity:()=>Xfe,generateAppMetadataKey:()=>$Rt,generateAuthorityMetadataExpiresAt:()=>jj,generateCredentialKey:()=>fL,isAccessTokenEntity:()=>NRt,isAppMetadataEntity:()=>jRt,isAuthorityMetadataEntity:()=>GRt,isAuthorityMetadataExpired:()=>Gj,isCredentialEntity:()=>$j,isIdTokenEntity:()=>LRt,isRefreshTokenEntity:()=>MRt,isServerTelemetryEntity:()=>HRt,isThrottlingEntity:()=>WRt,updateAuthorityEndpointMetadata:()=>MP,updateCloudDiscoveryMetadata:()=>pL});d();var Wj={};fa(Wj,{checkMaxAge:()=>uL,extractTokenClaims:()=>gv,getJWSPayload:()=>R6e});d();function gv(t,e){let r=R6e(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ct(nI)}}s(gv,"extractTokenClaims");function R6e(t){if(!t)throw Ct(pS);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ct(nI);return r[2]}s(R6e,"getJWSPayload");function uL(t,e){if(e===0||Date.now()-3e5>t+e)throw Ct(CS)}s(uL,"checkMaxAge");var zs={};fa(zs,{delay:()=>BRt,isTokenExpired:()=>LP,nowSeconds:()=>tp,toDateFromSeconds:()=>dL,toSecondsFromDate:()=>DRt,wasClockTurnedBack:()=>Yfe});d();function tp(){return Math.round(new Date().getTime()/1e3)}s(tp,"nowSeconds");function DRt(t){return t.getTime()/1e3}s(DRt,"toSecondsFromDate");function dL(t){return t?new Date(Number(t)*1e3):new Date}s(dL,"toDateFromSeconds");function LP(t,e){let r=Number(t)||0;return tp()+e>r}s(LP,"isTokenExpired");function Yfe(t){return Number(t)>tp()}s(Yfe,"wasClockTurnedBack");function BRt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(BRt,"delay");function fL(t){return[FRt(t),ORt(t),QRt(t),URt(t),qRt(t)].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}s(fL,"generateCredentialKey");function Kfe(t,e,r,n,i){return{credentialType:Co.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(Kfe,"createIdTokenEntity");function Jfe(t,e,r,n,i,o,a,c,l,u,f,p,h,m,g){let A={homeAccountId:t,credentialType:Co.ACCESS_TOKEN,secret:r,cachedAt:tp().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||Zi.BEARER};if(p&&(A.userAssertionHash=p),u&&(A.refreshOn=u.toString()),m&&(A.requestedClaims=m,A.requestedClaimsHash=g),A.tokenType?.toLowerCase()!==Zi.BEARER.toLowerCase())switch(A.credentialType=Co.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case Zi.POP:let y=gv(r,l);if(!y?.cnf?.kid)throw Ct(TS);A.keyId=y.cnf.kid;break;case Zi.SSH:A.keyId=h}return A}s(Jfe,"createAccessTokenEntity");function Xfe(t,e,r,n,i,o,a){let c={credentialType:Co.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(Xfe,"createRefreshTokenEntity");function $j(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s($j,"isCredentialEntity");function NRt(t){return t?$j(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Co.ACCESS_TOKEN||t.credentialType===Co.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(NRt,"isAccessTokenEntity");function LRt(t){return t?$j(t)&&t.hasOwnProperty("realm")&&t.credentialType===Co.ID_TOKEN:!1}s(LRt,"isIdTokenEntity");function MRt(t){return t?$j(t)&&t.credentialType===Co.REFRESH_TOKEN:!1}s(MRt,"isRefreshTokenEntity");function FRt(t){return[t.homeAccountId,t.environment].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}s(FRt,"generateAccountId");function ORt(t){let e=t.credentialType===Co.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}s(ORt,"generateCredentialId");function QRt(t){return(t.target||"").toLowerCase()}s(QRt,"generateTarget");function URt(t){return(t.requestedClaimsHash||"").toLowerCase()}s(URt,"generateClaimsHash");function qRt(t){return t.tokenType&&t.tokenType.toLowerCase()!==Zi.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(qRt,"generateScheme");function HRt(t,e){let r=t.indexOf(ml.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(HRt,"isServerTelemetryEntity");function WRt(t,e){let r=!1;t&&(r=t.indexOf(Qy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(WRt,"isThrottlingEntity");function $Rt({environment:t,clientId:e}){return[$6,t,e].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}s($Rt,"generateAppMetadataKey");function jRt(t,e){return e?t.indexOf($6)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(jRt,"isAppMetadataEntity");function GRt(t,e){return e?t.indexOf(kP.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(GRt,"isAuthorityMetadataEntity");function jj(){return tp()+kP.REFRESH_TIME_SECONDS}s(jj,"generateAuthorityMetadataExpiresAt");function MP(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(MP,"updateAuthorityEndpointMetadata");function pL(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(pL,"updateCloudDiscoveryMetadata");function Gj(t){return t.expiresAt<=tp()}s(Gj,"isAuthorityMetadataExpired");d();d();var FP={};fa(FP,{authorityMismatch:()=>EL,authorityUriInsecure:()=>kS,cannotAllowPlatformBroker:()=>vL,cannotSetOIDCOptions:()=>CL,claimsRequestParsingError:()=>hL,emptyInputScopesError:()=>DS,invalidAuthenticationHeader:()=>yL,invalidAuthorityMetadata:()=>MS,invalidClaims:()=>cI,invalidCloudDiscoveryMetadata:()=>lI,invalidCodeChallengeMethod:()=>mL,logoutRequestEmpty:()=>NS,missingNonceAuthenticationHeader:()=>AL,missingSshJwk:()=>Av,missingSshKid:()=>gL,pkceParamsMissing:()=>LS,redirectUriEmpty:()=>RS,tokenRequestEmpty:()=>BS,untrustedAuthority:()=>OS,urlEmptyError:()=>PS,urlParseError:()=>Uy});d();var RS="redirect_uri_empty",hL="claims_request_parsing_error",kS="authority_uri_insecure",Uy="url_parse_error",PS="empty_url_error",DS="empty_input_scopes_error",cI="invalid_claims",BS="token_request_empty",NS="logout_request_empty",mL="invalid_code_challenge_method",LS="pkce_params_missing",lI="invalid_cloud_discovery_metadata",MS="invalid_authority_metadata",OS="untrusted_authority",Av="missing_ssh_jwk",gL="missing_ssh_kid",AL="missing_nonce_authentication_header",yL="invalid_authentication_header",CL="cannot_set_OIDCOptions",vL="cannot_allow_platform_broker",EL="authority_mismatch";var Ga={[RS]:"A redirect URI is required for all calls, and none has been set.",[hL]:"Could not parse the given claims request object.",[kS]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Uy]:"URL could not be parsed into appropriate segments.",[PS]:"URL was empty or null.",[DS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[cI]:"Given claims parameter must be a stringified JSON object.",[BS]:"Token request was empty and not found in cache.",[NS]:"The logout request was null or undefined.",[mL]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[LS]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[lI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[MS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[OS]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Av]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[gL]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[AL]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[yL]:"Invalid authentication header provided",[CL]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[vL]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[EL]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Zfe={redirectUriNotSet:{code:RS,desc:Ga[RS]},claimsRequestParsingError:{code:hL,desc:Ga[hL]},authorityUriInsecure:{code:kS,desc:Ga[kS]},urlParseError:{code:Uy,desc:Ga[Uy]},urlEmptyError:{code:PS,desc:Ga[PS]},emptyScopesError:{code:DS,desc:Ga[DS]},invalidClaimsRequest:{code:cI,desc:Ga[cI]},tokenRequestEmptyError:{code:BS,desc:Ga[BS]},logoutRequestEmptyError:{code:NS,desc:Ga[NS]},invalidCodeChallengeMethod:{code:mL,desc:Ga[mL]},invalidCodeChallengeParams:{code:LS,desc:Ga[LS]},invalidCloudDiscoveryMetadata:{code:lI,desc:Ga[lI]},invalidAuthorityMetadata:{code:MS,desc:Ga[MS]},untrustedAuthority:{code:OS,desc:Ga[OS]},missingSshJwk:{code:Av,desc:Ga[Av]},missingSshKid:{code:gL,desc:Ga[gL]},missingNonceAuthenticationHeader:{code:AL,desc:Ga[AL]},invalidAuthenticationHeader:{code:yL,desc:Ga[yL]},cannotSetOIDCOptions:{code:CL,desc:Ga[CL]},cannotAllowPlatformBroker:{code:vL,desc:Ga[vL]},authorityMismatch:{code:EL,desc:Ga[EL]}},OP=class t extends ri{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Ga[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function ls(t){return new OP(t)}s(ls,"createClientConfigurationError");d();var va=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var qc=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?va.trimArrayEntries([...e]):[],n=r?va.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ls(DS);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||tt.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(tt.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return jfe.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ct(bS)}}removeScope(e){if(!e)throw Ct(xS);this.scopes.delete(e.trim())}removeOIDCScopes(){jfe.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ct(oI);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ct(oI);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):tt.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function QP(t,e){if(!t)throw Ct(fS);try{let r=e(t);return JSON.parse(r)}catch{throw Ct(rI)}}s(QP,"buildClientInfo");function qy(t){if(!t)throw Ct(rI);let e=t.split(ja.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?tt.EMPTY_STRING:e[1]}}s(qy,"buildClientInfoFromHomeAccountId");d();function k6e(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(k6e,"tenantIdMatchesHomeTenant");function xL(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:k6e(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:k6e(r,t)}}s(xL,"buildTenantProfile");function Vj(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=xL(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(Vj,"updateAccountTenantProfileData");d();var Ih={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function zj(t){return t&&(t.tid||t.tfp||t.acr)||null}s(zj,"getTenantIdFromIdTokenClaims");d();var fd={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var wu=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(ja.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===Ih.Adfs?i.authorityType=uS.ADFS_ACCOUNT_TYPE:r.protocolMode===fd.OIDC?i.authorityType=uS.GENERIC_ACCOUNT_TYPE:i.authorityType=uS.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=QP(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw Ct(pv);i.environment=a,i.realm=o?.utid||zj(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=xL(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||uS.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===Ih.Adfs||r===Ih.Dsts)){if(e)try{let a=QP(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var _u={};fa(_u,{getDeserializedResponse:()=>e0e,mapToQueryString:()=>Hy,stripLeadingHashOrQuery:()=>P6e});d();function P6e(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(P6e,"stripLeadingHashOrQuery");function e0e(t){if(!t||t.indexOf("=")<0)return null;try{let e=P6e(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ct(gS)}return null}s(e0e,"getDeserializedResponse");function Hy(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(Hy,"mapToQueryString");var Si=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ls(PS);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return va.endsWith(r,"?")?r=r.slice(0,-1):va.endsWith(r,"?/")&&(r=r.slice(0,-2)),va.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ls(Uy)}if(!e.HostNameAndPort||!e.PathSegments)throw ls(Uy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ls(kS)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Wf.COMMON||n[0]===Wf.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ls(Uy);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ls(Uy);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===tt.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!e0e(e)}};var B6e={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},t0e=B6e.endpointMetadata,r0e=B6e.instanceDiscoveryMetadata,n0e=new Set;r0e.metadata.forEach(t=>{t.aliases.forEach(e=>{n0e.add(e)})});function N6e(t,e){let r,n=t.canonicalAuthority;if(n){let i=new Si(n).getUrlComponents().HostNameAndPort;r=D6e(i,t.cloudDiscoveryMetadata?.metadata,Wd.CONFIG,e)||D6e(i,r0e.metadata,Wd.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(N6e,"getAliasesFromStaticSources");function D6e(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=bL(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(D6e,"getAliasesFromMetadata");function L6e(t){return bL(r0e.metadata,t)}s(L6e,"getCloudDiscoveryMetadataFromHardcodedValues");function bL(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(bL,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var i0e="cache_quota_exceeded",Yj="cache_error_unknown";var o0e={[i0e]:"Exceeded cache storage capacity.",[Yj]:"Unexpected error occurred when using cache storage."},IL=class t extends ri{static{s(this,"CacheError")}constructor(e,r){let n=r||(o0e[e]?o0e[e]:o0e[Yj]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function M6e(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new IL(i0e):new IL(t.name,t.message):new IL(Yj)}s(M6e,"createCacheError");var uI=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(Hj,NP),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=gv(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=Vj(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw Ct(IS);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ri?i:M6e(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=qc.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&qc.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(ja.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(ja.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(Co.ID_TOKEN.toLowerCase())===-1&&r.indexOf(Co.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(Co.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(Co.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(Co.REFRESH_TOKEN.toLowerCase())>-1){let n=`${Co.REFRESH_TOKEN}${ja.CACHE_KEY_SEPARATOR}${this.clientId}${ja.CACHE_KEY_SEPARATOR}`,i=`${Co.REFRESH_TOKEN}${ja.CACHE_KEY_SEPARATOR}${uv}${ja.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Co.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===Zi.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Co.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Zi.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=wu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Co.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((h,m)=>{h.realm===e.tenantId&&f.set(m,h)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=qc.createSearchScopes(r.scopes),c=r.authenticationScheme||Zi.BEARER,l=c&&c.toLowerCase()!==Zi.BEARER.toLowerCase()?Co.ACCESS_TOKEN_WITH_AUTH_SCHEME:Co.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(m=>{if(this.accessTokenKeyMatchesFilter(m,u,!0)){let g=this.getAccessTokenCredential(m,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let h=p.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(m=>{this.removeAccessToken(fL(m),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?uv:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Co.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let h=this.getRefreshTokenCredential(p,n);h&&this.credentialMatchesFilter(h,c)&&u.push(h)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw Ct(vS);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===uv)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=N6e(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Co.ACCESS_TOKEN&&e.credentialType!==Co.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:qc.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf($6)!==-1}isAuthorityMetadata(e){return e.indexOf(kP.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${kP.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},TL=class extends uI{static{s(this,"DefaultStorageClass")}async setAccount(){throw Ct(_i)}getAccount(){throw Ct(_i)}async setIdTokenCredential(){throw Ct(_i)}getIdTokenCredential(){throw Ct(_i)}async setAccessTokenCredential(){throw Ct(_i)}getAccessTokenCredential(){throw Ct(_i)}async setRefreshTokenCredential(){throw Ct(_i)}getRefreshTokenCredential(){throw Ct(_i)}setAppMetadata(){throw Ct(_i)}getAppMetadata(){throw Ct(_i)}setServerTelemetry(){throw Ct(_i)}getServerTelemetry(){throw Ct(_i)}setAuthorityMetadata(){throw Ct(_i)}getAuthorityMetadata(){throw Ct(_i)}getAuthorityMetadataKeys(){throw Ct(_i)}setThrottlingCache(){throw Ct(_i)}getThrottlingCache(){throw Ct(_i)}removeItem(){throw Ct(_i)}getKeys(){throw Ct(_i)}getAccountKeys(){throw Ct(_i)}getTokenKeys(){throw Ct(_i)}};d();d();var Ke={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},min=new Map([[Ke.AcquireTokenByCode,"ATByCode"],[Ke.AcquireTokenByRefreshToken,"ATByRT"],[Ke.AcquireTokenSilent,"ATS"],[Ke.AcquireTokenSilentAsync,"ATSAsync"],[Ke.AcquireTokenPopup,"ATPopup"],[Ke.AcquireTokenRedirect,"ATRedirect"],[Ke.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ke.CryptoOptsSignJwt,"CryptoSignJwt"],[Ke.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ke.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ke.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ke.SsoSilent,"SsoSlt"],[Ke.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ke.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ke.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ke.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ke.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ke.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ke.BrokerHandhshake,"BrokerHandshake"],[Ke.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ke.AcquireTokenByBroker,"ATByBroker"],[Ke.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ke.RefreshTokenClientAcquireToken,"RTClientAT"],[Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ke.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ke.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ke.AcquireTokenFromCache,"ATFromCache"],[Ke.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ke.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ke.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ke.InitializeBaseRequest,"InitBaseReq"],[Ke.InitializeSilentRequest,"InitSltReq"],[Ke.InitializeClientApplication,"InitClientApplication"],[Ke.InitializeCache,"InitCache"],[Ke.ImportExistingCache,"importCache"],[Ke.SetUserData,"setUserData"],[Ke.LocalStorageUpdated,"localStorageUpdated"],[Ke.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ke.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ke.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ke.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ke.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ke.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ke.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ke.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ke.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ke.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ke.HandleCodeResponse,"HandleCodeResp"],[Ke.HandleResponseEar,"HandleRespEar"],[Ke.HandleResponseCode,"HandleRespCode"],[Ke.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ke.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ke.AuthClientAcquireToken,"AuthClientAT"],[Ke.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ke.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ke.PopTokenGenerateCnf,"PopTGenCnf"],[Ke.PopTokenGenerateKid,"PopTGenKid"],[Ke.HandleServerTokenResponse,"HandleServerTRes"],[Ke.DeserializeResponse,"DeserializeRes"],[Ke.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ke.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ke.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ke.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ke.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ke.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ke.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ke.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ke.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ke.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ke.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ke.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ke.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ke.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ke.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ke.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ke.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ke.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ke.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ke.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ke.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ke.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ke.GeneratePkceCodes,"GenPkceCodes"],[Ke.GenerateCodeVerifier,"GenCodeVerifier"],[Ke.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ke.Sha256Digest,"Sha256Digest"],[Ke.GetRandomValues,"GetRandomValues"],[Ke.GenerateHKDF,"genHKDF"],[Ke.GenerateBaseKey,"genBaseKey"],[Ke.Base64Decode,"b64Decode"],[Ke.UrlEncodeArr,"urlEncArr"],[Ke.Encrypt,"encrypt"],[Ke.Decrypt,"decrypt"],[Ke.GenerateEarKey,"genEarKey"],[Ke.DecryptEarResponse,"decryptEarResp"]]),F6e={NotStarted:0,InProgress:1,Completed:2};var Kj=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},QS=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:F6e.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new Kj}}startPerformanceMeasurement(){return new Kj}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var VRt={tokenRenewalOffsetSeconds:PP,preventCorsPreflight:!1},zRt={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:La.Info,correlationId:tt.EMPTY_STRING},YRt={claimsBasedCachingEnabled:!1},KRt={async sendGetRequestAsync(){throw Ct(_i)},async sendPostRequestAsync(){throw Ct(_i)}},JRt={sku:tt.SKU,version:NP,cpu:tt.EMPTY_STRING,os:tt.EMPTY_STRING},XRt={clientSecret:tt.EMPTY_STRING,clientAssertion:void 0},ZRt={azureCloudInstance:mv.None,tenant:`${tt.DEFAULT_COMMON_TENANT}`},e5t={application:{appName:"",appVersion:""}};function O6e({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:h}){let m={...zRt,...r};return{authOptions:t5t(t),systemOptions:{...VRt,...e},loggerOptions:m,cacheOptions:{...YRt,...n},storageInterface:i||new TL(t.clientId,BP,new ep(m),new QS),networkInterface:o||KRt,cryptoInterface:a||BP,clientCredentials:c||XRt,libraryInfo:{...JRt,...l},telemetry:{...e5t,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:h||null}}s(O6e,"buildClientConfiguration");function t5t(t){return{clientCapabilities:[],azureCloudOptions:ZRt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(t5t,"buildAuthOptions");function Jj(t){return t.authOptions.authority.options.protocolMode===fd.OIDC}s(Jj,"isOidcProtocolMode");d();var jd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var ur={};fa(ur,{addApplicationTelemetry:()=>SL,addAuthorizationCode:()=>K0e,addBrokerParameters:()=>vv,addCcsOid:()=>yv,addCcsUpn:()=>dI,addClaims:()=>jS,addClientAssertion:()=>PL,addClientAssertionType:()=>DL,addClientCapabilitiesToClaims:()=>Q6e,addClientId:()=>WS,addClientInfo:()=>VS,addClientSecret:()=>kL,addCodeChallengeParams:()=>g5t,addCodeVerifier:()=>X0e,addCorrelationId:()=>GS,addDeviceCode:()=>A5t,addDomainHint:()=>V0e,addEARParameters:()=>x5t,addExtraQueryParameters:()=>Cv,addGrantType:()=>BL,addIdTokenHint:()=>G0e,addInstanceAware:()=>NL,addLibraryInfo:()=>_L,addLoginHint:()=>qP,addLogoutHint:()=>Z0e,addNativeBroker:()=>m5t,addNonce:()=>Y0e,addOboAssertion:()=>y5t,addPassword:()=>E5t,addPopToken:()=>LL,addPostLogoutRedirectUri:()=>j0e,addPrompt:()=>z0e,addRedirectUri:()=>$S,addRefreshToken:()=>J0e,addRequestTokenUse:()=>C5t,addResponseMode:()=>$0e,addResponseType:()=>h5t,addScopes:()=>HS,addServerTelemetry:()=>FL,addSid:()=>nG,addSshJwk:()=>ML,addState:()=>RL,addThrottling:()=>OL,addUsername:()=>v5t,instrumentBrokerParams:()=>qS});d();var US={};fa(US,{ACCESS_TOKEN:()=>i5t,BROKER_CLIENT_ID:()=>wL,BROKER_REDIRECT_URI:()=>rG,CCS_HEADER:()=>f5t,CLAIMS:()=>l0e,CLIENT_ASSERTION:()=>B0e,CLIENT_ASSERTION_TYPE:()=>N0e,CLIENT_ID:()=>Wy,CLIENT_INFO:()=>l5t,CLIENT_REQUEST_ID:()=>C0e,CLIENT_SECRET:()=>D0e,CODE:()=>m0e,CODE_CHALLENGE:()=>g0e,CODE_CHALLENGE_METHOD:()=>A0e,CODE_VERIFIER:()=>y0e,DEVICE_CODE:()=>P0e,DOMAIN_HINT:()=>q0e,EAR_JWE_CRYPTO:()=>W0e,EAR_JWK:()=>H0e,ERROR:()=>r5t,ERROR_DESCRIPTION:()=>n5t,EXPIRES_IN:()=>s5t,FOCI:()=>d5t,GRANT_TYPE:()=>c0e,ID_TOKEN:()=>o5t,ID_TOKEN_HINT:()=>k0e,INSTANCE_AWARE:()=>UP,LOGIN_HINT:()=>U0e,LOGOUT_HINT:()=>O0e,NATIVE_BROKER:()=>F0e,NONCE:()=>p0e,OBO_ASSERTION:()=>L0e,ON_BEHALF_OF:()=>u5t,POST_LOGOUT_URI:()=>R0e,PROMPT:()=>h0e,REDIRECT_URI:()=>Xj,REFRESH_TOKEN:()=>d0e,REFRESH_TOKEN_EXPIRES_IN:()=>a5t,REQUESTED_TOKEN_USE:()=>M0e,REQ_CNF:()=>eG,RESPONSE_MODE:()=>a0e,RESPONSE_TYPE:()=>s0e,RETURN_SPA_CODE:()=>tG,SCOPE:()=>u0e,SESSION_STATE:()=>c5t,SID:()=>Q0e,STATE:()=>f0e,TOKEN_TYPE:()=>Zj,X_APP_NAME:()=>_0e,X_APP_VER:()=>S0e,X_CLIENT_CPU:()=>b0e,X_CLIENT_CURR_TELEM:()=>I0e,X_CLIENT_EXTRA_SKU:()=>p5t,X_CLIENT_LAST_TELEM:()=>T0e,X_CLIENT_OS:()=>x0e,X_CLIENT_SKU:()=>v0e,X_CLIENT_VER:()=>E0e,X_MS_LIB_CAPABILITY:()=>w0e});d();var Wy="client_id",Xj="redirect_uri",s0e="response_type",a0e="response_mode",c0e="grant_type",l0e="claims",u0e="scope",r5t="error",n5t="error_description",i5t="access_token",o5t="id_token",d0e="refresh_token",s5t="expires_in",a5t="refresh_token_expires_in",f0e="state",p0e="nonce",h0e="prompt",c5t="session_state",l5t="client_info",m0e="code",g0e="code_challenge",A0e="code_challenge_method",y0e="code_verifier",C0e="client-request-id",v0e="x-client-SKU",E0e="x-client-VER",x0e="x-client-OS",b0e="x-client-CPU",I0e="x-client-current-telemetry",T0e="x-client-last-telemetry",w0e="x-ms-lib-capability",_0e="x-app-name",S0e="x-app-ver",R0e="post_logout_redirect_uri",k0e="id_token_hint",P0e="device_code",D0e="client_secret",B0e="client_assertion",N0e="client_assertion_type",Zj="token_type",eG="req_cnf",L0e="assertion",M0e="requested_token_use",u5t="on_behalf_of",d5t="foci",f5t="X-AnchorMailbox",tG="return_spa_code",F0e="nativebroker",O0e="logout_hint",Q0e="sid",U0e="login_hint",q0e="domain_hint",p5t="x-client-xtra-sku",wL="brk_client_id",rG="brk_redirect_uri",UP="instance_aware",H0e="ear_jwk",W0e="ear_jwe_crypto";function qS(t,e,r){if(!e)return;let n=t.get(Wy);n&&t.has(wL)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(Xj)},e)}s(qS,"instrumentBrokerParams");function h5t(t,e){t.set(s0e,e)}s(h5t,"addResponseType");function $0e(t,e){t.set(a0e,e||Oy.QUERY)}s($0e,"addResponseMode");function m5t(t){t.set(F0e,"1")}s(m5t,"addNativeBroker");function HS(t,e,r=!0,n=Hf){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new qc(i);t.set(u0e,o.printScopes())}s(HS,"addScopes");function WS(t,e){t.set(Wy,e)}s(WS,"addClientId");function $S(t,e){t.set(Xj,e)}s($S,"addRedirectUri");function j0e(t,e){t.set(R0e,e)}s(j0e,"addPostLogoutRedirectUri");function G0e(t,e){t.set(k0e,e)}s(G0e,"addIdTokenHint");function V0e(t,e){t.set(q0e,e)}s(V0e,"addDomainHint");function qP(t,e){t.set(U0e,e)}s(qP,"addLoginHint");function dI(t,e){t.set(Rs.CCS_HEADER,`UPN:${e}`)}s(dI,"addCcsUpn");function yv(t,e){t.set(Rs.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(yv,"addCcsOid");function nG(t,e){t.set(Q0e,e)}s(nG,"addSid");function jS(t,e,r){let n=Q6e(e,r);try{JSON.parse(n)}catch{throw ls(cI)}t.set(l0e,n)}s(jS,"addClaims");function GS(t,e){t.set(C0e,e)}s(GS,"addCorrelationId");function _L(t,e){t.set(v0e,e.sku),t.set(E0e,e.version),e.os&&t.set(x0e,e.os),e.cpu&&t.set(b0e,e.cpu)}s(_L,"addLibraryInfo");function SL(t,e){e?.appName&&t.set(_0e,e.appName),e?.appVersion&&t.set(S0e,e.appVersion)}s(SL,"addApplicationTelemetry");function z0e(t,e){t.set(h0e,e)}s(z0e,"addPrompt");function RL(t,e){e&&t.set(f0e,e)}s(RL,"addState");function Y0e(t,e){t.set(p0e,e)}s(Y0e,"addNonce");function g5t(t,e,r){if(e&&r)t.set(g0e,e),t.set(A0e,r);else throw ls(LS)}s(g5t,"addCodeChallengeParams");function K0e(t,e){t.set(m0e,e)}s(K0e,"addAuthorizationCode");function A5t(t,e){t.set(P0e,e)}s(A5t,"addDeviceCode");function J0e(t,e){t.set(d0e,e)}s(J0e,"addRefreshToken");function X0e(t,e){t.set(y0e,e)}s(X0e,"addCodeVerifier");function kL(t,e){t.set(D0e,e)}s(kL,"addClientSecret");function PL(t,e){e&&t.set(B0e,e)}s(PL,"addClientAssertion");function DL(t,e){e&&t.set(N0e,e)}s(DL,"addClientAssertionType");function y5t(t,e){t.set(L0e,e)}s(y5t,"addOboAssertion");function C5t(t,e){t.set(M0e,e)}s(C5t,"addRequestTokenUse");function BL(t,e){t.set(c0e,e)}s(BL,"addGrantType");function VS(t){t.set(S6e,"1")}s(VS,"addClientInfo");function NL(t){t.has(UP)||t.set(UP,"true")}s(NL,"addInstanceAware");function Cv(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(Cv,"addExtraQueryParameters");function Q6e(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw ls(cI)}return e&&e.length>0&&(r.hasOwnProperty(lS.ACCESS_TOKEN)||(r[lS.ACCESS_TOKEN]={}),r[lS.ACCESS_TOKEN][lS.XMS_CC]={values:e}),JSON.stringify(r)}s(Q6e,"addClientCapabilitiesToClaims");function v5t(t,e){t.set(G6.username,e)}s(v5t,"addUsername");function E5t(t,e){t.set(G6.password,e)}s(E5t,"addPassword");function LL(t,e){e&&(t.set(Zj,Zi.POP),t.set(eG,e))}s(LL,"addPopToken");function ML(t,e){e&&(t.set(Zj,Zi.SSH),t.set(eG,e))}s(ML,"addSshJwk");function FL(t,e){t.set(I0e,e.generateCurrentRequestHeaderValue()),t.set(T0e,e.generateLastRequestHeaderValue())}s(FL,"addServerTelemetry");function OL(t){t.set(w0e,Qy.X_MS_LIB_CAPABILITY_VALUE)}s(OL,"addThrottling");function Z0e(t,e){t.set(O0e,e)}s(Z0e,"addLogoutHint");function vv(t,e,r){t.has(wL)||t.set(wL,e),t.has(rG)||t.set(rG,r)}s(vv,"addBrokerParameters");function x5t(t,e){t.set(H0e,encodeURIComponent(e)),t.set(W0e,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(x5t,"addEARParameters");var oG={};fa(oG,{createDiscoveredInstance:()=>tpe});d();d();d();function U6e(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(U6e,"isOpenIdConfigResponse");d();function q6e(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(q6e,"isCloudInstanceDiscoveryResponse");d();function H6e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(H6e,"isCloudInstanceDiscoveryErrorResponse");d();d();var W6e=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),eo=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var QL=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=dS.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await eo(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(tt.IMDS_VERSION,i);if(o.status===ti.SUCCESS&&(n=o.body,r.region_source=dS.IMDS),o.status===ti.BAD_REQUEST){let a=await eo(this.getCurrentVersion.bind(this),Ke.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=dS.FAILED_AUTO_DETECTION,null;let c=await eo(this.getRegionFromIMDS.bind(this),Ke.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===ti.SUCCESS&&(n=c.body,r.region_source=dS.IMDS)}}catch{return r.region_source=dS.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=dS.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${tt.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,tt.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ke.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${tt.IMDS_ENDPOINT}?format=json`,e);return r.status===ti.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};QL.IMDS_OPTIONS={headers:{Metadata:"true"}};var Dg=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new QL(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(tt.CIAM_AUTH_URL))return Ih.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case tt.ADFS:return Ih.Adfs;case tt.DSTS:return Ih.Dsts}return Ih.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Si(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ct($d)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ct($d)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ct($d)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ct(_S);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ct($d)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ct($d)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ct($d)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ih.Default&&this.protocolMode!==fd.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new Si(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new Si(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ih.Adfs||this.protocolMode===fd.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await eo(this.updateCloudDiscoveryMetadata.bind(this),Ke.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await eo(this.updateEndpointMetadata.bind(this),Ke.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:jj(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Wd.CACHE&&n?.source!==Wd.CACHE&&(e.expiresAt=jj(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Wd.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await eo(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);MP(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await eo(this.getEndpointMetadataFromNetwork.bind(this),Ke.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await eo(this.updateMetadataWithRegionalInformation.bind(this),Ke.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),MP(e,n,!0),Wd.NETWORK;throw Ct(mS,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),MP(e,r,!1),{source:Wd.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return MP(e,i,!1),{source:Wd.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=Gj(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Wd.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Si(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ls(MS)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return U6e(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in t0e?t0e[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==tt.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Uj.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await eo(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ke.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=Uj.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=Uj.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ke.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await eo(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return pL(e,n,!0),Wd.NETWORK;throw ls(OS)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||tt.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||tt.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),pL(e,r,!1),Wd.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=L6e(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),pL(e,i,!1),Wd.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=Gj(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Wd.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ih.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=bL(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ls(lI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ke.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${tt.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(q6e(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(H6e(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===tt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=bL(a,this.hostnameAndPort)}catch(i){if(i instanceof ri)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Si.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==mv.None){let i=r.tenant?r.tenant:tt.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return tt.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ct($d)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return n0e.has(e)}static isPublicCloudAuthority(e){return tt.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new Si(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${tt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=Si.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new Si(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(tt.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${tt.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};Dg.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Wf.COMMON,Wf.CONSUMERS,Wf.ORGANIZATIONS]);function $6e(t){let n=new Si(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Wf.COMMON:case Wf.ORGANIZATIONS:case Wf.CONSUMERS:return;default:return n}}s($6e,"getTenantFromAuthorityString");function iG(t){return t.endsWith(tt.FORWARD_SLASH)?t:`${t}${tt.FORWARD_SLASH}`}s(iG,"formatAuthorityUri");function epe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw ls(lI)}return{canonicalAuthority:t.authority?iG(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(epe,"buildStaticAuthorityOptions");async function tpe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ke.AuthorityFactoryCreateDiscoveredInstance,o);let c=Dg.transformCIAMAuthority(iG(t)),l=new Dg(c,e,r,n,i,o,a);try{return await eo(l.resolveEndpointsAsync.bind(l),Ke.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw Ct($d)}}s(tpe,"createDiscoveredInstance");d();d();var Gd=class t extends ri{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function HP(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(HP,"getRequestThumbprint");var UL=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${Qy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Gd(o.errorCodes?.join(" ")||tt.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Rs.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Rs.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||Qy.DEFAULT_THROTTLE_TIME_SECONDS),n+Qy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=HP(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var sG=class t extends ri{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var Su=class{static{s(this,"BaseClient")}constructor(e,r){this.config=O6e(e),this.logger=new ep(this.config.loggerOptions,Hj,NP),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Rs.CONTENT_TYPE]=tt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case jd.HOME_ACCOUNT_ID:try{let n=qy(e.credential);r[Rs.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case jd.UPN:r[Rs.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){UL.preProcess(this.cacheManager,e,i);let o;try{o=await eo(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ke.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Rs.X_MS_HTTP_VERSION]||"",requestId:a[Rs.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof sG){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Rs.X_MS_HTTP_VERSION]||"",requestId:c[Rs.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Rs.CONTENT_TYPE]||void 0,contentLengthHeader:c[Rs.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof ri?a:Ct(hS)}return UL.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ke.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await tpe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&vv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Cv(r,e.tokenQueryParameters),GS(r,e.correlationId),qS(r,e.correlationId,this.performanceClient),Hy(r)}};d();d();var cG={};fa(cG,{badToken:()=>pI,consentRequired:()=>npe,interactionRequired:()=>rpe,loginRequired:()=>ipe,nativeAccountUnavailable:()=>qL,noTokensFound:()=>fI,refreshTokenExpired:()=>HL,uxNotAllowed:()=>aG});d();var fI="no_tokens_found",qL="native_account_unavailable",HL="refresh_token_expired",aG="ux_not_allowed",rpe="interaction_required",npe="consent_required",ipe="login_required",pI="bad_token";var j6e=[rpe,npe,ipe,pI,aG],b5t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],lG={[fI]:"No refresh token found in the cache. Please sign-in.",[qL]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[HL]:"Refresh token has expired.",[pI]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[aG]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},ope={noTokensFoundError:{code:fI,desc:lG[fI]},native_account_unavailable:{code:qL,desc:lG[qL]},bad_token:{code:pI,desc:lG[pI]}},rp=class t extends ri{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||tt.EMPTY_STRING,this.traceId=o||tt.EMPTY_STRING,this.correlationId=a||tt.EMPTY_STRING,this.claims=c||tt.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function uG(t,e,r){let n=!!t&&j6e.indexOf(t)>-1,i=!!r&&b5t.indexOf(r)>-1,o=!!e&&j6e.some(a=>e.indexOf(a)>-1);return n||o||i}s(uG,"isInteractionRequiredError");function dG(t){return new rp(t,lG[t])}s(dG,"createInteractionRequiredAuthError");d();var fG=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${tt.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ct(sI);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ct(sI);if(!r)throw Ct(Pg);try{let n=r.split(tt.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(tt.RESOURCE_DELIM):tt.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||tt.EMPTY_STRING,libraryState:c}}catch{throw Ct(Pg)}}};d();var I5t={SW:"sw"},hI=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateCnf,e.correlationId);let n=await eo(this.generateKid.bind(this),Ke.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ke.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:I5t.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new Si(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:tp(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var np=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var Ac=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||tt.NOT_AVAILABLE} - Timestamp: ${e.timestamp||tt.NOT_AVAILABLE} - Description: ${e.error_description||tt.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||tt.NOT_AVAILABLE} - Trace ID: ${e.trace_id||tt.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new Gd(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=ti.SERVER_ERROR_RANGE_START&&e.status<=ti.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=ti.CLIENT_ERROR_RANGE_START&&e.status<=ti.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw uG(e.error,e.error_description,e.suberror)?new rp(e.error,e.error_description,e.suberror,e.timestamp||tt.EMPTY_STRING,e.trace_id||tt.EMPTY_STRING,e.correlation_id||tt.EMPTY_STRING,e.claims||tt.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ke.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=gv(e.id_token||tt.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw Ct(yS);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw Ct(dv);uL(g,i.maxAge)}}this.homeAccountIdentifier=wu.generateHomeAccountId(e.client_info||tt.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=fG.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let h=this.generateCacheRecord(e,r,n,i,f,a,o),m;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new np(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),c&&!l&&h.account){let g=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,h,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(h,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return t.generateAuthenticationResult(this.cryptoObj,r,h,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw Ct(pv);let u=zj(o),f,p;e.id_token&&o&&(f=Kfe(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=G6e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let h=null;if(e.access_token){let A=e.scope?qc.fromString(e.scope):new qc(i.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,E=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=n+y,S=_+E,P=b&&b>0?n+b:void 0;h=Jfe(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",A.printScopes(),_,S,this.cryptoObj.base64Decode,P,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let m=null;if(e.refresh_token){let A;if(e.refresh_token_expires_in){let y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;A=n+y}m=Xfe(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,A)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:h,refreshToken:m,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=tt.EMPTY_STRING,p=[],h=null,m,g,A=tt.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Zi.POP&&!o.popKid){let _=new hI(e),{secret:S,keyId:P}=n.accessToken;if(!P)throw Ct(SS);f=await _.signPopToken(S,P,o)}else f=n.accessToken.secret;p=qc.fromString(n.accessToken.target).asArray(),h=dL(n.accessToken.expiresOn),m=dL(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=dL(n.accessToken.refreshOn))}n.appMetadata&&(A=n.appMetadata.familyId===uv?uv:"");let y=a?.oid||a?.sub||"",E=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?Vj(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:y,tenantId:E,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:h,extExpiresOn:m,refreshOn:g,correlationId:o.correlationId,requestId:u||tt.EMPTY_STRING,familyId:A,tokenType:n.accessToken?.tokenType||tt.EMPTY_STRING,state:c?c.userRequestState:tt.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||tt.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||tt.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function G6e(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let m=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;m&&(g=t.getAccount(m,i));let A=g||wu.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),y=A.tenantProfiles||[],E=l||A.realm;if(E&&!y.find(b=>b.tenantId===E)){let b=xL(r,A.localAccountId,E,o);y.push(b)}return A.tenantProfiles=y,A}s(G6e,"buildAccountToCache");d();async function Vd(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(Vd,"getClientAssertion");var WL=class extends Su{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ke.AuthClientAcquireToken,e.correlationId),!e.code)throw Ct(ES);let n=tp(),i=await eo(this.executeTokenRequest.bind(this),Ke.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Rs.X_MS_REQUEST_ID],a=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),eo(a.handleServerTokenResponse.bind(a),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw ls(NS);let r=this.createLogoutUrlQueryString(e);return Si.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=Si.appendQueryString(e.tokenEndpoint,n),o=await eo(this.createTokenRequestBody.bind(this),Ke.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=QP(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${ja.CLIENT_INFO_SEPARATOR}${u.utid}`,type:jd.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=HP(this.config.authOptions.clientId,r);return eo(this.executePostToTokenEndpoint.bind(this),Ke.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ke.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(WS(r,e.embeddedClientId||e.tokenBodyParameters?.[Wy]||this.config.authOptions.clientId),this.includeRedirectUri)$S(r,e.redirectUri);else if(!e.redirectUri)throw ls(RS);if(HS(r,e.scopes,!0,this.oidcDefaultScopes),K0e(r,e.code),_L(r,this.config.libraryInfo),SL(r,this.config.telemetry.application),OL(r),this.serverTelemetryManager&&!Jj(this.config)&&FL(r,this.serverTelemetryManager),e.codeVerifier&&X0e(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&kL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;PL(r,await Vd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),DL(r,i.assertionType)}if(BL(r,$f.AUTHORIZATION_CODE_GRANT),VS(r),e.authenticationScheme===Zi.POP){let i=new hI(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await eo(i.generateCnf.bind(i),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,LL(r,o)}else if(e.authenticationScheme===Zi.SSH)if(e.sshJwk)ML(r,e.sshJwk);else throw ls(Av);(!va.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&jS(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=QP(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${ja.CLIENT_INFO_SEPARATOR}${i.utid}`,type:jd.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case jd.HOME_ACCOUNT_ID:try{let i=qy(n.credential);yv(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case jd.UPN:dI(r,n.credential);break}return e.embeddedClientId&&vv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cv(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[tG])&&Cv(r,{[tG]:"1"}),qS(r,e.correlationId,this.performanceClient),Hy(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&j0e(r,e.postLogoutRedirectUri),e.correlationId&&GS(r,e.correlationId),e.idTokenHint&&G0e(r,e.idTokenHint),e.state&&RL(r,e.state),e.logoutHint&&Z0e(r,e.logoutHint),e.extraQueryParameters&&Cv(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&NL(r),Hy(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var T5t=300,zS=class extends Su{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireToken,e.correlationId);let r=tp(),n=await eo(this.executeTokenRequest.bind(this),Ke.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Rs.X_MS_REQUEST_ID],o=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),eo(o.handleServerTokenResponse.bind(o),Ke.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw ls(BS);if(this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ct(fv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await eo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof rp&&n.errorCode===fI,o=n instanceof Gd&&n.errorCode===j6.INVALID_GRANT_ERROR&&n.subError===j6.CLIENT_MISMATCH_ERROR;if(i||o)return eo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return eo(this.acquireTokenWithCachedRefreshToken.bind(this),Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=W6e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ke.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw dG(fI);if(n.expiresOn&&LP(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||T5t))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),dG(HL);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Zi.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:jd.HOME_ACCOUNT_ID}};try{return await eo(this.acquireToken.bind(this),Ke.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof rp&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===pI)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=fL(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=Si.appendQueryString(r.tokenEndpoint,n),o=await eo(this.createTokenRequestBody.bind(this),Ke.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=HP(this.config.authOptions.clientId,e);return eo(this.executePostToTokenEndpoint.bind(this),Ke.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ke.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ke.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(WS(r,e.embeddedClientId||e.tokenBodyParameters?.[Wy]||this.config.authOptions.clientId),e.redirectUri&&$S(r,e.redirectUri),HS(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),BL(r,$f.REFRESH_TOKEN_GRANT),VS(r),_L(r,this.config.libraryInfo),SL(r,this.config.telemetry.application),OL(r),this.serverTelemetryManager&&!Jj(this.config)&&FL(r,this.serverTelemetryManager),J0e(r,e.refreshToken),this.config.clientCredentials.clientSecret&&kL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;PL(r,await Vd(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),DL(r,n.assertionType)}if(e.authenticationScheme===Zi.POP){let n=new hI(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await eo(n.generateCnf.bind(n),Ke.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,LL(r,i)}else if(e.authenticationScheme===Zi.SSH)if(e.sshJwk)ML(r,e.sshJwk);else throw ls(Av);if((!va.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&jS(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case jd.HOME_ACCOUNT_ID:try{let n=qy(e.ccsCredential.credential);yv(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case jd.UPN:dI(r,e.ccsCredential.credential);break}return e.embeddedClientId&&vv(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cv(r,e.tokenBodyParameters),qS(r,e.correlationId,this.performanceClient),Hy(r)}};d();var $L=class extends Su{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Cs.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!va.isEmptyObj(e.claims))throw this.setCacheOutcome(Cs.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ct(hv);if(!e.account)throw Ct(fv);let n=e.account.tenantId||$6e(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(Yfe(o.cachedAt)||LP(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Cs.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ct(hv);o.refreshOn&&LP(o.refreshOn,0)&&(r=Cs.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Cs.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ct(hv);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await eo(this.generateResultFromCacheRecord.bind(this),Ke.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Cs.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ke.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=gv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ct(dv);uL(i,r.maxAge)}return Ac.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var jL={};fa(jL,{getAuthorizationCodePayload:()=>S5t,getAuthorizeUrl:()=>_5t,getStandardAuthorizeRequestParameters:()=>w5t,validateAuthorizationResponse:()=>V6e});d();function w5t(t,e,r,n){let i=e.correlationId,o=new Map;WS(o,e.embeddedClientId||e.extraQueryParameters?.[Wy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(HS(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),$S(o,e.redirectUri),GS(o,i),$0e(o,e.responseMode),VS(o),e.prompt&&(z0e(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(V0e(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==tI.SELECT_ACCOUNT)if(e.sid&&e.prompt===tI.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),nG(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=k5t(e.account),l=P5t(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),qP(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=qy(e.account.homeAccountId);yv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===tI.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),nG(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=qy(e.account.homeAccountId);yv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),qP(o,e.loginHint),dI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),qP(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=qy(e.account.homeAccountId);yv(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),qP(o,e.loginHint),dI(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Y0e(o,e.nonce),e.state&&RL(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&jS(o,e.claims,t.clientCapabilities),e.embeddedClientId&&vv(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(UP))&&NL(o),o}s(w5t,"getStandardAuthorizeRequestParameters");function _5t(t,e,r,n){let i=Hy(e,r,n);return Si.appendQueryString(t.authorizationEndpoint,i)}s(_5t,"getAuthorizeUrl");function S5t(t,e){if(V6e(t,e),!t.code)throw Ct(wS);return t}s(S5t,"getAuthorizationCodePayload");function V6e(t,e){if(!t.state||!e)throw t.state?Ct(iI,"Cached State"):Ct(iI,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ct(Pg,t.state)}try{n=decodeURIComponent(e)}catch{throw Ct(Pg,t.state)}if(r!==n)throw Ct(AS);if(t.error||t.error_description||t.suberror){let i=R5t(t);throw uG(t.error,t.error_description,t.suberror)?new rp(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Gd(t.error||"",t.error_description,t.suberror,i)}}s(V6e,"validateAuthorizationResponse");function R5t(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(R5t,"parseServerErrorNo");function k5t(t){return t.idTokenClaims?.sid||null}s(k5t,"extractAccountSid");function P5t(t){return t.idTokenClaims?.login_hint||null}s(P5t,"extractLoginHint");d();var z6e=",",Y6e="|";function D5t(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(z6e),c.length<4)return e}else c=Array.from({length:4},()=>Y6e);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&B5t({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(z6e)}s(D5t,"makeExtraSkuString");function B5t(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(Y6e))}s(B5t,"setSku");var YS=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=Cs.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||tt.EMPTY_STRING,this.wrapperVer=e.wrapperVer||tt.EMPTY_STRING,this.telemetryCacheKey=ml.CACHE_KEY+ja.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${ml.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(ml.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(ml.VALUE_SEPARATOR);return[ml.SCHEMA_VERSION,a,i].join(ml.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(ml.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(ml.VALUE_SEPARATOR),o=e.errors.length,a=r<o?ml.OVERFLOW_TRUE:ml.OVERFLOW_FALSE,c=[o,a].join(ml.VALUE_SEPARATOR);return[ml.SCHEMA_VERSION,e.cacheHits,n,i,c].join(ml.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=ml.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ri?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(ml.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||tt.EMPTY_STRING,c=e.failedRequests[2*r+1]||tt.EMPTY_STRING,l=e.errors[r]||tt.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<ml.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||tt.EMPTY_STRING),e.push(this.regionSource||tt.EMPTY_STRING),e.push(this.regionOutcome||tt.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return D5t(e)}};var Ev=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new wu;uI.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var K6e="system_assigned_managed_identity",Q5t="managed_identity",ape=`https://login.microsoftonline.com/${Q5t}/`,jf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},Hc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},On={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Yn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Ma={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Ys={GET:"get",POST:"post"},pG={SUCCESS_RANGE_START:ti.SUCCESS_RANGE_START,SUCCESS_RANGE_END:ti.SUCCESS_RANGE_END,SERVER_ERROR:ti.SERVER_ERROR},J6e="REGION_NAME",X6e="MSAL_FORCE_REGION",Z6e=32,eLe={SHA256:"sha256"},hG={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Al={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},xv={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Th={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},mG={INTERVAL_MS:100,TIMEOUT_MS:5e3},tLe=4096;d();d();d();d();var WP=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var gG=Me(require("http"),1),cpe=Me(require("https"),1);var $P=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?rLe(e,this.proxyUrl,Ys.GET,r,this.customAgentOptions,n):nLe(e,Ys.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?rLe(e,this.proxyUrl,Ys.POST,r,this.customAgentOptions):nLe(e,Ys.POST,r,this.customAgentOptions)}},rLe=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new gG.default.Agent(i));let f="";if(r===Ys.POST){let h=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${h.length}\r
\r
${h}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((h,m)=>{let g=gG.default.request(u);o&&g.on("timeout",()=>{g.destroy(),m(new Error("Request time out"))}),g.end(),g.on("connect",(A,y)=>{let E=A?.statusCode||pG.SERVER_ERROR;(E<pG.SUCCESS_RANGE_START||E>pG.SUCCESS_RANGE_END)&&(g.destroy(),y.destroy(),m(new Error(`Error connecting to proxy. Http status code: ${A.statusCode}. Http status message: ${A?.statusMessage||"Unknown"}`))),y.write(p);let b=[];y.on("data",_=>{b.push(_)}),y.on("end",()=>{let S=Buffer.concat([...b]).toString().split(`\r
`),P=parseInt(S[0].split(" ")[1]),B=S[0].split(" ").slice(2).join(" "),F=S[S.length-1],Y=S.slice(1,S.length-2),ee=new Map;Y.forEach(X=>{let K=X.split(new RegExp(/:\s(.*)/s)),j=K[0],W=K[1];try{let J=JSON.parse(W);J&&typeof J=="object"&&(W=J)}catch{}ee.set(j,W)});let H=Object.fromEntries(ee),U=WP.getNetworkResponse(H,iLe(P,B,H,F),P);(P<ti.SUCCESS_RANGE_START||P>ti.SUCCESS_RANGE_END)&&U.body.error!==Al.AUTHORIZATION_PENDING&&g.destroy(),h(U)}),y.on("error",_=>{g.destroy(),y.destroy(),m(new Error(_.toString()))})}),g.on("error",A=>{g.destroy(),m(new Error(A.toString()))})})},"networkRequestViaProxy"),nLe=s((t,e,r,n,i)=>{let o=e===Ys.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...WP.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new cpe.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let h;u.protocol==="http:"?h=gG.default.request(u):h=cpe.default.request(u),o&&h.write(a),i&&h.on("timeout",()=>{h.destroy(),p(new Error("Request time out"))}),h.end(),h.on("response",m=>{let g=m.headers,A=m.statusCode,y=m.statusMessage,E=[];m.on("data",b=>{E.push(b)}),m.on("end",()=>{let b=Buffer.concat([...E]).toString(),_=g,S=WP.getNetworkResponse(_,iLe(A,y,_,b),A);(A<ti.SUCCESS_RANGE_START||A>ti.SUCCESS_RANGE_END)&&S.body.error!==Al.AUTHORIZATION_PENDING&&h.destroy(),f(S)})}),h.on("error",m=>{h.destroy(),p(new Error(m.toString()))})})},"networkRequestViaHttps"),iLe=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=ti.CLIENT_ERROR_RANGE_START&&t<=ti.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=ti.SERVER_ERROR_RANGE_START&&t<=ti.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var AG="invalid_file_extension",yG="invalid_file_path",mI="invalid_managed_identity_id_type",CG="invalid_secret",oLe="missing_client_id",sLe="network_unavailable",vG="platform_not_supported",EG="unable_to_create_azure_arc",xG="unable_to_create_cloud_shell",bG="unable_to_create_source",GL="unable_to_read_secret_file",aLe="user_assigned_not_available_at_runtime",IG="www_authenticate_header_missing",TG="www_authenticate_header_unsupported_format",KS={[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[On.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[On.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[On.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var U5t={[AG]:"The file path in the WWW-Authenticate header does not contain a .key file.",[yG]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[mI]:"More than one ManagedIdentityIdType was provided.",[CG]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[vG]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[oLe]:"A ManagedIdentityId id was not provided.",[KS.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${On.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[KS.IDENTITY_ENDPOINT]:`The Managed Identity's '${On.IDENTITY_ENDPOINT}' environment variable is malformed.`,[KS.IMDS_ENDPOINT]:`The Managed Identity's '${On.IMDS_ENDPOINT}' environment variable is malformed.`,[KS.MSI_ENDPOINT]:`The Managed Identity's '${On.MSI_ENDPOINT}' environment variable is malformed.`,[sLe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[EG]:"Azure Arc Managed Identities can only be system assigned.",[xG]:"Cloud Shell Managed Identities can only be system assigned.",[bG]:"Unable to create a Managed Identity source based on environment variables.",[GL]:"Unable to read the secret file.",[aLe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[IG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[TG]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},lpe=class t extends ri{static{s(this,"ManagedIdentityError")}constructor(e){super(e,U5t[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function yc(t){return new lpe(t)}s(yc,"createManagedIdentityError");var wG=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw yc(mI);this.id=r,this.idType=Ma.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw yc(mI);this.id=n,this.idType=Ma.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw yc(mI);this.id=i,this.idType=Ma.USER_ASSIGNED_OBJECT_ID}else this.id=K6e,this.idType=Ma.SYSTEM_ASSIGNED}};d();var ql={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},Gf=class t extends ri{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(ql.invalidLoopbackAddressType.code,`${ql.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(ql.unableToLoadRedirectUri.code,`${ql.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(ql.noAuthCodeInResponse.code,`${ql.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(ql.noLoopbackServerExists.code,`${ql.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(ql.loopbackServerAlreadyExists.code,`${ql.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(ql.loopbackServerTimeout.code,`${ql.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(ql.stateNotFoundError.code,ql.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(ql.thumbprintMissing.code,ql.thumbprintMissing.desc)}};var q5t={clientId:tt.EMPTY_STRING,authority:tt.DEFAULT_AUTHORITY,clientSecret:tt.EMPTY_STRING,clientAssertion:tt.EMPTY_STRING,clientCertificate:{thumbprint:tt.EMPTY_STRING,thumbprintSha256:tt.EMPTY_STRING,privateKey:tt.EMPTY_STRING,x5c:tt.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:tt.EMPTY_STRING,authorityMetadata:tt.EMPTY_STRING,clientCapabilities:[],protocolMode:fd.AAD,azureCloudOptions:{azureCloudInstance:mv.None,tenant:tt.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},H5t={claimsBasedCachingEnabled:!1},upe={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:La.Info},W5t={loggerOptions:upe,networkClient:new $P,proxyUrl:tt.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},$5t={application:{appName:tt.EMPTY_STRING,appVersion:tt.EMPTY_STRING}};function cLe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...W5t,networkClient:new $P(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||upe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Gf.createStateNotFoundError();return{auth:{...q5t,...t},broker:{...e},cache:{...H5t,...r},system:{...o,...n},telemetry:{...$5t,...i}}}s(cLe,"buildAppConfiguration");function lLe({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new wG(e),i=r?.loggerOptions||upe,o;return r?.networkClient?o=r.networkClient:o=new $P(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(lLe,"buildManagedIdentityConfiguration");d();d();d();d();var uLe=Me(require("crypto"));var SG=new Uint8Array(256),_G=SG.length;function dpe(){return _G>SG.length-16&&(uLe.default.randomFillSync(SG),_G=0),SG.slice(_G,_G+=16)}s(dpe,"rng");d();d();d();var dLe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function j5t(t){return typeof t=="string"&&dLe.test(t)}s(j5t,"validate");var fLe=j5t;var Ru=[];for(let t=0;t<256;++t)Ru.push((t+256).toString(16).substr(1));function G5t(t,e=0){let r=(Ru[t[e+0]]+Ru[t[e+1]]+Ru[t[e+2]]+Ru[t[e+3]]+"-"+Ru[t[e+4]]+Ru[t[e+5]]+"-"+Ru[t[e+6]]+Ru[t[e+7]]+"-"+Ru[t[e+8]]+Ru[t[e+9]]+"-"+Ru[t[e+10]]+Ru[t[e+11]]+Ru[t[e+12]]+Ru[t[e+13]]+Ru[t[e+14]]+Ru[t[e+15]]).toLowerCase();if(!fLe(r))throw TypeError("Stringified UUID is invalid");return r}s(G5t,"stringify");var pLe=G5t;d();function V5t(t,e,r){t=t||{};let n=t.random||(t.rng||dpe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return pLe(n)}s(V5t,"v4");var fpe=V5t;var jP=class{static{s(this,"GuidGenerator")}generateGuid(){return fpe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var ip=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(Tu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,tt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,Tu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var hLe=Me(require("crypto"),1);var gI=class{static{s(this,"HashUtils")}sha256(e){return hLe.default.createHash(eLe.SHA256).update(e).digest()}};var mLe=Me(require("crypto"),1);var RG=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new gI}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%hG.CV_CHARSET.length;for(;e.length<=Z6e;){let i=mLe.default.randomBytes(1)[0];if(i>=r)continue;let o=i%hG.CV_CHARSET.length;e.push(hG.CV_CHARSET[o])}let n=e.join(tt.EMPTY_STRING);return ip.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return ip.base64EncodeUrl(this.hashUtils.sha256(e).toString(Tu.BASE64),Tu.BASE64)}};var $y=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new RG,this.guidGenerator=new jP,this.hashUtils=new gI}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return ip.base64Encode(e)}base64Decode(e){return ip.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return ip.base64EncodeUrl(this.hashUtils.sha256(e).toString(Tu.BASE64),Tu.BASE64)}};d();d();var AI=class extends uI{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new QS,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof wu)r.accounts[n]=i;else if(gl.isIdTokenEntity(i))r.idTokens[n]=i;else if(gl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(gl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(gl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new wu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return gl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=gl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return gl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=gl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return gl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=gl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return gl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=gl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&gl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&gl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&gl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Ev.deserializeAllCache(Ev.deserializeJSONBlob(e))}static generateJsonCache(e){return eI.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=gl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var VL={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},GP=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=eI.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Ev.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=AI.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new $y().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new np(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new np(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(wu.generateAccountCacheKey(e),r||new jP().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new np(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...VL.Account,...e.Account},IdToken:{...VL.IdToken,...e.IdToken},AccessToken:{...VL.AccessToken,...e.AccessToken},RefreshToken:{...VL.RefreshToken,...e.RefreshToken},AppMetadata:{...VL.AppMetadata,...e.AppMetadata}}}};d();var $Oe=Me(WOe(),1);var bv=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ct(cs.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=zs.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?Th.PSS_256:Th.RSA_256},c=this.useSha256?Th.X5T_256:Th.X5T;Object.assign(a,{[c]:ip.base64EncodeUrl(this.thumbprint,Tu.HEX)}),this.publicCertificate&&Object.assign(a,{[Th.X5C]:this.publicCertificate});let l={[Th.AUDIENCE]:this.jwtAudience,[Th.EXPIRATION_TIME]:this.expirationTime,[Th.ISSUER]:this.issuer,[Th.SUBJECT]:this.issuer,[Th.NOT_BEFORE]:i,[Th.JWT_ID]:e.createNewGuid()};return this.jwt=$Oe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<zs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,tt.EMPTY_STRING));return n}};d();var iV="@azure/msal-node",Ng="3.6.3";d();var e3=class extends Su{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=zs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=Si.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:jd.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;ur.addClientId(r,this.config.authOptions.clientId),ur.addUsername(r,e.username),ur.addPassword(r,e.password),ur.addScopes(r,e.scopes),ur.addResponseType(r,RP.IDTOKEN_TOKEN),ur.addGrantType(r,$f.RESOURCE_OWNER_PASSWORD_GRANT),ur.addClientInfo(r),ur.addLibraryInfo(r,this.config.libraryInfo),ur.addApplicationTelemetry(r,this.config.telemetry.application),ur.addThrottling(r),this.serverTelemetryManager&&ur.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ur.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&ur.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(ur.addClientAssertion(r,await Vd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ur.addClientAssertionType(r,i.assertionType)),(!va.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ur.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&ur.addCcsUpn(r,e.username),_u.mapToQueryString(r)}};d();function jOe(t,e,r,n){let i=jL.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return ur.addLibraryInfo(i,{sku:Al.MSAL_SKU,version:Ng,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==fd.OIDC&&ur.addApplicationTelemetry(i,t.telemetry.application),ur.addResponseType(i,RP.CODE),r.codeChallenge&&r.codeChallengeMethod&&ur.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),ur.addExtraQueryParameters(i,r.extraQueryParameters||{}),jL.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(jOe,"getAuthCodeRequestUrl");var vI=class{static{s(this,"ClientApplication")}constructor(e){this.config=cLe(e),this.cryptoProvider=new $y,this.logger=new ep(this.config.system.loggerOptions,iV,Ng),this.storage=new AI(this.logger,this.config.auth.clientId,this.cryptoProvider,epe(this.config.auth)),this.tokenCache=new GP(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||Oy.QUERY,authenticationScheme:Zi.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return jOe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Zi.BEARER},i=this.initializeServerTelemetryManager(xv.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new WL(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof ri&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:Zi.BEARER},n=this.initializeServerTelemetryManager(xv.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new zS(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(xv.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new $L(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof aI&&c.errorCode===cs.tokenRefreshRequired)return new zS(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Hf]});if(o===Cs.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new zS(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(xv.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new e3(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Gf.createStateNotFoundError();if(e!==r)throw Ct(cs.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Al.MSAL_SKU,version:Ng,cpu:process.arch||tt.EMPTY_STRING,os:process.platform||tt.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=bv.fromAssertion(await Vd(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Al.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Zi.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Zi.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!va.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...Hf],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new YS(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=Dg.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return oG.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var GOe=Me(require("http"),1);var oV=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw Gf.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=GOe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===tt.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(Gf.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=_u.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(ti.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw Gf.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),Gf.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${Al.HTTP_PROTOCOL}${Al.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var t3=class extends Su{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=zs.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=Si.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&ur.addExtraQueryParameters(r,e.extraQueryParameters),_u.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return ur.addScopes(r,e.scopes),ur.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&ur.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ur.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),_u.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Ct(cs.deviceCodePollingCancelled);if(r&&r<e&&zs.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),Ct(cs.userTimeoutReached);if(zs.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Ct(cs.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=Si.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?zs.nowSeconds()+e.timeout:void 0,l=zs.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===tt.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await zs.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),Vfe(DP.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),Ct(cs.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;ur.addScopes(n,e.scopes),ur.addClientId(n,this.config.authOptions.clientId),ur.addGrantType(n,$f.DEVICE_CODE_GRANT),ur.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return ur.addCorrelationId(n,i),ur.addClientInfo(n),ur.addLibraryInfo(n,this.config.libraryInfo),ur.addApplicationTelemetry(n,this.config.telemetry.application),ur.addThrottling(n),this.serverTelemetryManager&&ur.addServerTelemetry(n,this.serverTelemetryManager),(!va.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ur.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),_u.mapToQueryString(n)}};var r3=class extends vI{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=YS.makeExtraSkuString({libraryName:Al.MSAL_SKU,libraryVersion:Ng})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(xv.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new t3(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof ri&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||Hf,redirectUri:`${Al.HTTP_PROTOCOL}${Al.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[US.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new oV,h={},m=null;try{let g=p.listenForAuthCode(i,o).then(S=>{h=S}).catch(S=>{m=S}),A=await this.waitForRedirectUri(p),y={...l,correlationId:r,scopes:e.scopes||Hf,redirectUri:A,responseMode:Oy.QUERY,codeChallenge:f,codeChallengeMethod:Qj.S256},E=await this.getAuthCodeUrl(y);if(await n(E),await g,m)throw m;if(h.error)throw new Gd(h.error,h.error_description,h.suberror);if(!h.code)throw Gf.createNoAuthCodeInResponseError();let b=h.client_info,_={code:h.code,codeVerifier:u,clientInfo:b||tt.EMPTY_STRING,...y};return await this.acquireTokenByCode(_)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||Hf,redirectUri:`${Al.HTTP_PROTOCOL}${Al.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[US.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(mG.TIMEOUT_MS/mG.INTERVAL_MS<i){clearInterval(o),n(Gf.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof ri&&a.errorCode===ql.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},mG.INTERVAL_MS)})}};d();d();var EI=class extends Su{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Cs.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=Cs.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new np(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new qc(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?zs.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||PP)?(a?.setCacheOutcome(Cs.CACHED_ACCESS_TOKEN_EXPIRED),[null,Cs.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&zs.isTokenExpired(p.refreshOn.toString(),0)&&(u=Cs.PROACTIVELY_REFRESHED,a?.setCacheOutcome(Cs.PROACTIVELY_REFRESHED)),[await Ac.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(Cs.NO_CACHED_ACCESS_TOKEN),[null,Cs.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:tt.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Co.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:qc.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw Ct(cs.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=zs.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:Zi.BEARER}}else{let l=this.createTokenQueryParameters(e),u=Si.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),h={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=zs.nowSeconds();let m=await this.executePostToTokenEndpoint(u,f,p,h,e.correlationId);i=m.body,i.status=m.status}let a=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;ur.addClientId(r,this.config.authOptions.clientId),ur.addScopes(r,e.scopes,!1),ur.addGrantType(r,$f.CLIENT_CREDENTIALS_GRANT),ur.addLibraryInfo(r,this.config.libraryInfo),ur.addApplicationTelemetry(r,this.config.telemetry.application),ur.addThrottling(r),this.serverTelemetryManager&&ur.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ur.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&ur.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(ur.addClientAssertion(r,await Vd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ur.addClientAssertionType(r,i.assertionType)),(!va.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ur.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),_u.mapToQueryString(r)}};d();var n3=class extends Su{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new qc(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(zs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Cs.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ct(cs.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Cs.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ct(cs.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=Wj.extractTokenClaims(n.secret,ip.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:tt.EMPTY_STRING,localAccountId:a||tt.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),Ac.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Co.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||Zi.BEARER,o={credentialType:n&&n.toLowerCase()!==Zi.BEARER.toLowerCase()?Co.ACCESS_TOKEN_WITH_AUTH_SCHEME:Co.ACCESS_TOKEN,clientId:e,target:qc.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw Ct(cs.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=Si.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=zs.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new Ac(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;ur.addClientId(r,this.config.authOptions.clientId),ur.addScopes(r,e.scopes),ur.addGrantType(r,$f.JWT_BEARER),ur.addClientInfo(r),ur.addLibraryInfo(r,this.config.libraryInfo),ur.addApplicationTelemetry(r,this.config.telemetry.application),ur.addThrottling(r),this.serverTelemetryManager&&ur.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();ur.addCorrelationId(r,n),ur.addRequestTokenUse(r,US.ON_BEHALF_OF),ur.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&ur.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(ur.addClientAssertion(r,await Vd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),ur.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&ur.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),_u.mapToQueryString(r)}};var i3=class extends vI{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ct(cs.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?bv.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):bv.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ct(cs.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Vd(e.clientAssertion,this.config.auth.clientId),assertionType:Al.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(h=>!Hf.includes(h))},o={...e,...i,clientAssertion:r},c=new Si(o.authority).getUrlComponents().PathSegments[0];if(Object.values(Wf).includes(c))throw Ct(cs.missingTenantIdError);let l=process.env[X6e],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[J6e]},p=this.initializeServerTelemetryManager(xv.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let h=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),m=await this.buildOauthClientConfiguration(h,o.correlationId,"",p),g=new EI(m,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(h){throw h instanceof ri&&h.setCorrelationId(o.correlationId),p.cacheFailedRequest(h),h}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new n3(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof ri&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function VOe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(VOe,"isIso8601");d();var sV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Ys.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Rs.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Ys.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Ys.POST,e,r)}};var ZS={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Kd=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(VOe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-zs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[Hc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let m=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${m}`),o.queryParameters[Hc.XMS_CC]=m}let a=o.headers;a[Rs.CONTENT_TYPE]=tt.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new sV(this.networkClient,o.retryPolicy,this.logger),u=zs.nowSeconds(),f;try{o.httpMethod===Ys.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(m){throw m instanceof ri?m:Ct(cs.networkError)}let p=new Ac(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),h=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(h,i),p.handleServerTokenResponse(h,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Ma.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?ZS.MANAGED_IDENTITY_CLIENT_ID_2017:ZS.MANAGED_IDENTITY_CLIENT_ID;case Ma.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?ZS.MANAGED_IDENTITY_RESOURCE_ID_IMDS:ZS.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Ma.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),ZS.MANAGED_IDENTITY_OBJECT_ID;default:throw yc(mI)}}};Kd.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new Si(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),yc(KS[t])}};d();d();d();var aV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var VBt=3,zBt=1e3,YBt=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.TOO_MANY_REQUESTS,ti.SERVER_ERROR,ti.SERVICE_UNAVAILABLE,ti.GATEWAY_TIMEOUT],cV=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new aV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return zBt}async pauseForRetry(e,r,n,i){if(YBt.includes(e)&&r<VBt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var zf=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new cV}computeUri(){let e=new Map;this.queryParameters&&ur.addExtraQueryParameters(e,this.queryParameters);let r=_u.mapToQueryString(e);return Si.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&ur.addExtraQueryParameters(e,this.bodyParameters),_u.mapToQueryString(e)}};var KBt="2019-08-01",oM=class t extends Kd{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Yn.APP_SERVICE} managed identity is unavailable because one or both of the '${On.IDENTITY_HEADER}' and '${On.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,a,Yn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Yn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new zf(Ys.GET,this.identityEndpoint);return n.headers[jf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Hc.API_VERSION]=KBt,n.queryParameters[Hc.RESOURCE]=e,r.idType!==Ma.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var Iv=require("fs"),JOe=Me(require("path"),1);var JBt="2019-11-01",zOe="http://127.0.0.1:40342/metadata/identity/oauth2/token",YOe="N/A: himds executable exists",KOe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},XBt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},sM=class t extends Kd{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IMDS_ENDPOINT];if(!e||!r){let n=XBt[process.platform];try{(0,Iv.accessSync)(n,Iv.constants.F_OK|Iv.constants.R_OK),e=zOe,r=YOe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Yn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${On.IDENTITY_ENDPOINT}' and '${On.IMDS_ENDPOINT}' are not defined. ${Yn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===YOe)e.info(`[Managed Identity] ${Yn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Yn.AZURE_ARC} endpoint: ${zOe}. Creating ${Yn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,c,Yn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(On.IMDS_ENDPOINT,l,Yn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Yn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Yn.AZURE_ARC} managed identity.`)}if(a.idType!==Ma.SYSTEM_ASSIGNED)throw yc(EG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new zf(Ys.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[jf.METADATA_HEADER_NAME]="true",r.queryParameters[Hc.API_VERSION]=JBt,r.queryParameters[Hc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===ti.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw yc(IG);if(!a.includes("Basic realm="))throw yc(TG);let c=a.split("Basic realm=")[1];if(!KOe.hasOwnProperty(process.platform))throw yc(vG);let l=KOe[process.platform],u=JOe.default.basename(c);if(!u.endsWith(".key"))throw yc(AG);if(l+u!==c)throw yc(yG);let f;try{f=await(0,Iv.statSync)(c).size}catch{throw yc(GL)}if(f>tLe)throw yc(CG);let p;try{p=(0,Iv.readFileSync)(c,Tu.UTF8)}catch{throw yc(GL)}let h=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[jf.AUTHORIZATION_HEADER_NAME]=h;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(m){throw m instanceof ri?m:Ct(cs.networkError)}}return this.getServerTokenResponse(o||e)}};d();var aM=class t extends Kd{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[On.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Yn.CLOUD_SHELL} managed identity is unavailable because the '${On.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.MSI_ENDPOINT,c,Yn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Yn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Yn.CLOUD_SHELL} managed identity.`),a.idType!==Ma.SYSTEM_ASSIGNED)throw yc(xG);return new t(e,r,n,i,o,c)}createRequest(e){let r=new zf(Ys.POST,this.msiEndpoint);return r.headers[jf.METADATA_HEADER_NAME]="true",r.bodyParameters[Hc.RESOURCE]=e,r}};d();d();d();var lV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var ZBt=[ti.NOT_FOUND,ti.REQUEST_TIMEOUT,ti.GONE,ti.TOO_MANY_REQUESTS],eNt=3,tNt=7,rNt=1e3,nNt=4e3,iNt=2e3,oNt=10*1e3,uV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new lV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return rNt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return nNt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return iNt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return oNt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===ti.GONE?tNt:eNt),(ZBt.includes(e)||e>=ti.SERVER_ERROR_RANGE_START&&e<=ti.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===ti.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var XOe="/metadata/identity/oauth2/token",sNt=`http://169.254.169.254${XOe}`,aNt="2018-02-01",dV=class t extends Kd{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${On.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Yn.IMDS} returned endpoint: ${process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(On.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[On.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${XOe}`,Yn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${On.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Yn.IMDS}, using the default endpoint.`),a=sNt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new zf(Ys.GET,this.identityEndpoint);return n.headers[jf.METADATA_HEADER_NAME]="true",n.queryParameters[Hc.API_VERSION]=aNt,n.queryParameters[Hc.RESOURCE]=e,r.idType!==Ma.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new uV,n}};d();var cNt="2019-07-01-preview",cM=class t extends Kd{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[On.IDENTITY_ENDPOINT],r=process.env[On.IDENTITY_HEADER],n=process.env[On.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Yn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${On.IDENTITY_HEADER}', '${On.IDENTITY_ENDPOINT}' or '${On.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(On.IDENTITY_ENDPOINT,c,Yn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${Yn.SERVICE_FABRIC} managed identity.`),a.idType!==Ma.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Yn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new zf(Ys.GET,this.identityEndpoint);return n.headers[jf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Hc.API_VERSION]=cNt,n.queryParameters[Hc.RESOURCE]=e,r.idType!==Ma.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var lNt="2017-09-01",uNt=`Only client id is supported for user-assigned managed identity in ${Yn.MACHINE_LEARNING}.`,lM=class t extends Kd{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[On.MSI_ENDPOINT],r=process.env[On.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Yn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${On.MSI_ENDPOINT}' and '${On.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(On.MSI_ENDPOINT,a,Yn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Yn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Yn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new zf(Ys.GET,this.msiEndpoint);if(n.headers[jf.METADATA_HEADER_NAME]="true",n.headers[jf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[Hc.API_VERSION]=lNt,n.queryParameters[Hc.RESOURCE]=e,r.idType===Ma.SYSTEM_ASSIGNED)n.queryParameters[ZS.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[On.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===Ma.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(uNt);return n}};var uM=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(cM.getEnvironmentVariables())?Yn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(oM.getEnvironmentVariables())?Yn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(lM.getEnvironmentVariables())?Yn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(aM.getEnvironmentVariables())?Yn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(sM.getEnvironmentVariables())?Yn.AZURE_ARC:Yn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=cM.tryCreate(e,r,n,i,o,a)||oM.tryCreate(e,r,n,i,o)||lM.tryCreate(e,r,n,i,o)||aM.tryCreate(e,r,n,i,o,a)||sM.tryCreate(e,r,n,i,o,a)||dV.tryCreate(e,r,n,i,o);if(!c)throw yc(bG);return c}};var dNt=[Yn.SERVICE_FABRIC],o3=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=lLe(e||{}),this.logger=new ep(this.config.system.loggerOptions,iV,Ng);let r={canonicalAuthority:tt.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new AI(this.logger,this.config.managedIdentityId.id,BP,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new $y;let n={protocolMode:fd.AAD,knownAuthorities:[ape],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new Dg(ape,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new EI({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new uM(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new gI}async acquireToken(e){if(!e.resource)throw ls(FP.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&dNt.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(Tu.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===Cs.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return uM.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var fV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>wu.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();var dM=ci("IdentityUtils"),fNt="1.0";function s3(t,e,r){let n=s(i=>(dM.getToken.info(i),new Sg({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(s3,"ensureValidMsalToken");function ehe(t){let e=t?.authorityHost;return!e&&wP&&(e=process.env.AZURE_AUTHORITY_HOST),e??R6}s(ehe,"getAuthorityHost");function the(t,e){return e||(e=R6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(the,"getAuthority");function ZOe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(ZOe,"getKnownAuthorities");var pV=s((t,e=Pj?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case op.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case op.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case op.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case op.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function hV(t){switch(t){case"error":return op.LogLevel.Error;case"info":return op.LogLevel.Info;case"verbose":return op.LogLevel.Verbose;case"warning":return op.LogLevel.Warning;default:return op.LogLevel.Info}}s(hV,"getMSALLogLevel");function e2(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return dM.info(Mo(t,e.message)),new en(e.message);case"device_code_polling_cancelled":return new cS("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":dM.info(Mo(t,`Authentication returned errorCode ${n.errorCode}`));break;default:dM.info(Mo(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(dM.info(Mo(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Sg({scopes:t,getTokenOptions:r,message:e.message})}s(e2,"handleMsalError");function e7e(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(e7e,"publicToMsal");function t7e(t,e){var r;return{authority:(r=e.environment)!==null&&r!==void 0?r:u8e,homeAccountId:e.homeAccountId,tenantId:e.tenantId||l8e,username:e.username,clientId:t,version:fNt}}s(t7e,"msalToPublic");d();var pNt=1e3*64;function r7e(t){return Ffe([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>r?.status!==404?{skipStrategy:!0}:e6e(e,{retryDelayInMs:t.startDelayInMs,maxRetryDelayInMs:pNt}),"retry")}],{maxRetries:t.maxRetries})}s(r7e,"imdsRetryPolicy");d();var Tv="ManagedIdentityCredential - IMDS",t2=ci(Tv),hNt="http://169.254.169.254",mNt="/metadata/identity/oauth2/token";function gNt(t){var e;if(!H6(t))throw new Error(`${Tv}: Multiple scopes are not supported.`);let n=new URL(mNt,(e=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&e!==void 0?e:hNt),i={Accept:"application/json"};return{url:`${n}`,method:"GET",headers:Xb(i)}}s(gNt,"prepareInvalidRequestOptions");var n7e={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=H6(e);if(!i)return t2.info(`${Tv}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=gNt(i);return as.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=kg(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let f;try{t2.info(`${Tv}: Pinging the Azure IMDS endpoint`),f=await r.sendRequest(u)}catch(p){return kj(p)&&t2.verbose(`${Tv}: Caught error ${p.name}: ${p.message}`),t2.info(`${Tv}: The Azure IMDS endpoint is unavailable`),!1}return f.status===403&&!((l=f.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(t2.info(`${Tv}: The Azure IMDS endpoint is unavailable`),t2.info(`${Tv}: ${f.bodyAsText}`),!1):(t2.info(`${Tv}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();d();d();var rhe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(rhe||(rhe={}));function mV(t){var e,r;let n=t;return n===void 0&&((r=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||r===void 0?void 0:r.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===rhe.AutoDiscoverRegion?"AUTO_DISCOVER":n}s(mV,"calculateRegionalAuthority");var Yf=ci("MsalClient");function PNt(t,e,r={}){var n,i,o;let a=J$((n=r.logger)!==null&&n!==void 0?n:Yf,e,t),c=the(a,ehe(r)),l=new lv(Object.assign(Object.assign({},r.tokenCredentialOptions),{authorityHost:c,loggingOptions:r.loggingOptions}));return{auth:{clientId:t,authority:c,knownAuthorities:ZOe(a,c,r.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:pV((i=r.logger)!==null&&i!==void 0?i:Yf),logLevel:hV(z$()),piiLoggingEnabled:(o=r.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}s(PNt,"generateMsalConfiguration");function Rh(t,e,r={}){var n;let i={msalConfig:PNt(t,e,r),cachedAccount:r.authenticationRecord?e7e(r.authenticationRecord):null,pluginConfiguration:g8e.generatePluginConfiguration(r),logger:(n=r.logger)!==null&&n!==void 0?n:Yf},o=new Map;async function a(P={}){let B=P.enableCae?"CAE":"default",F=o.get(B);if(F)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),F;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let Y=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,F=new r3(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await Y}})),o.set(B,F),F}s(a,"getPublicApp");let c=new Map;async function l(P={}){let B=P.enableCae?"CAE":"default",F=c.get(B);if(F)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),F;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let Y=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,F=new i3(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await Y}})),c.set(B,F),F}s(l,"getConfidentialApp");async function u(P,B,F={}){if(i.cachedAccount===null)throw i.logger.getToken.info("No cached account found in local state."),new Sg({scopes:B});F.claims&&(i.cachedClaims=F.claims);let Y={account:i.cachedAccount,scopes:B,claims:i.cachedClaims};i.pluginConfiguration.broker.isEnabled&&(Y.tokenQueryParameters||(Y.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(Y.tokenQueryParameters.msal_request_type="consumer_passthrough")),F.proofOfPossessionOptions&&(Y.shrNonce=F.proofOfPossessionOptions.nonce,Y.authenticationScheme="pop",Y.resourceRequestMethod=F.proofOfPossessionOptions.resourceRequestMethod,Y.resourceRequestUri=F.proofOfPossessionOptions.resourceRequestUrl),i.logger.getToken.info("Attempting to acquire token silently");try{return await P.acquireTokenSilent(Y)}catch(ee){throw e2(B,ee,F)}}s(u,"getTokenSilent");function f(P){return P?.tenantId?the(P.tenantId,ehe(r)):i.msalConfig.auth.authority}s(f,"calculateRequestAuthority");async function p(P,B,F,Y){var ee,V;let H=null;try{H=await u(P,B,F)}catch(U){if(U.name!=="AuthenticationRequiredError")throw U;if(F.disableAutomaticAuthentication)throw new Sg({scopes:B,getTokenOptions:F,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(H===null)try{H=await Y()}catch(U){throw e2(B,U,F)}return s3(B,H,F),i.cachedAccount=(ee=H?.account)!==null&&ee!==void 0?ee:null,i.logger.getToken.info(pl(B)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:(V=H.refreshOn)===null||V===void 0?void 0:V.getTime(),tokenType:H.tokenType}}s(p,"withSilentAuthentication");async function h(P,B,F={}){var Y;i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=B;let ee=await l(F);try{let V=await ee.acquireTokenByClientCredential({scopes:P,authority:f(F),azureRegion:mV(),claims:F?.claims});return s3(P,V,F),i.logger.getToken.info(pl(P)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw e2(P,V,F)}}s(h,"getTokenByClientSecret");async function m(P,B,F={}){var Y;i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=B;let ee=await l(F);try{let V=await ee.acquireTokenByClientCredential({scopes:P,authority:f(F),azureRegion:mV(),claims:F?.claims,clientAssertion:B});return s3(P,V,F),i.logger.getToken.info(pl(P)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw e2(P,V,F)}}s(m,"getTokenByClientAssertion");async function g(P,B,F={}){var Y;i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=B;let ee=await l(F);try{let V=await ee.acquireTokenByClientCredential({scopes:P,authority:f(F),azureRegion:mV(),claims:F?.claims});return s3(P,V,F),i.logger.getToken.info(pl(P)),{token:V.accessToken,expiresOnTimestamp:V.expiresOn.getTime(),refreshAfterTimestamp:(Y=V.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:V.tokenType}}catch(V){throw e2(P,V,F)}}s(g,"getTokenByClientCertificate");async function A(P,B,F={}){i.logger.getToken.info("Attempting to acquire token using device code");let Y=await a(F);return p(Y,P,F,()=>{var ee,V;let H={scopes:P,cancel:(V=(ee=F?.abortSignal)===null||ee===void 0?void 0:ee.aborted)!==null&&V!==void 0?V:!1,deviceCodeCallback:B,authority:f(F),claims:F?.claims},U=Y.acquireTokenByDeviceCode(H);return F.abortSignal&&F.abortSignal.addEventListener("abort",()=>{H.cancel=!0}),U})}s(A,"getTokenByDeviceCode");async function y(P,B,F,Y={}){i.logger.getToken.info("Attempting to acquire token using username and password");let ee=await a(Y);return p(ee,P,Y,()=>{let V={scopes:P,username:B,password:F,authority:f(Y),claims:Y?.claims};return ee.acquireTokenByUsernamePassword(V)})}s(y,"getTokenByUsernamePassword");function E(){if(i.cachedAccount)return t7e(t,i.cachedAccount)}s(E,"getActiveAccount");async function b(P,B,F,Y,ee={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let V;return Y?(i.msalConfig.auth.clientSecret=Y,V=await l(ee)):V=await a(ee),p(V,P,ee,()=>V.acquireTokenByCode({scopes:P,redirectUri:B,code:F,authority:f(ee),claims:ee?.claims}))}s(b,"getTokenByAuthorizationCode");async function _(P,B,F,Y={}){var ee;Yf.getToken.info("Attempting to acquire token on behalf of another user"),typeof F=="string"?(Yf.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=F):typeof F=="function"?(Yf.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=F):(Yf.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=F);let V=await l(Y);try{let H=await V.acquireTokenOnBehalfOf({scopes:P,authority:f(Y),claims:Y.claims,oboAssertion:B});return s3(P,H,Y),Yf.getToken.info(pl(P)),{token:H.accessToken,expiresOnTimestamp:H.expiresOn.getTime(),refreshAfterTimestamp:(ee=H.refreshOn)===null||ee===void 0?void 0:ee.getTime(),tokenType:H.tokenType}}catch(H){throw e2(P,H,Y)}}s(_,"getTokenOnBehalfOf");async function S(P,B={}){Yf.getToken.info("Attempting to acquire token interactively");let F=await a(B);async function Y(V){var H;Yf.verbose("Authentication will resume through the broker");let U=ee();i.pluginConfiguration.broker.parentWindowHandle?U.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):Yf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((H=U.tokenQueryParameters)!==null&&H!==void 0?H:U.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),V?(U.prompt="none",Yf.verbose("Attempting broker authentication using the default broker account")):Yf.verbose("Attempting broker authentication without the default broker account"),B.proofOfPossessionOptions&&(U.shrNonce=B.proofOfPossessionOptions.nonce,U.authenticationScheme="pop",U.resourceRequestMethod=B.proofOfPossessionOptions.resourceRequestMethod,U.resourceRequestUri=B.proofOfPossessionOptions.resourceRequestUrl);try{return await F.acquireTokenInteractive(U)}catch(X){if(Yf.verbose(`Failed to authenticate through the broker: ${X.message}`),V)return Y(!1);throw X}}s(Y,"getBrokeredToken");function ee(){var V,H;return{openBrowser:s(async U=>{await(await Promise.resolve().then(()=>(yV(),B7e))).default(U,{wait:!0,newInstance:!0})},"openBrowser"),scopes:P,authority:f(B),claims:B?.claims,loginHint:B?.loginHint,errorTemplate:(V=B?.browserCustomizationOptions)===null||V===void 0?void 0:V.errorMessage,successTemplate:(H=B?.browserCustomizationOptions)===null||H===void 0?void 0:H.successMessage,prompt:B?.loginHint?"login":"select_account"}}return s(ee,"createBaseInteractiveRequest"),p(F,P,B,async()=>{var V;let H=ee();return i.pluginConfiguration.broker.isEnabled?Y((V=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&V!==void 0?V:!1):(B.proofOfPossessionOptions&&(H.shrNonce=B.proofOfPossessionOptions.nonce,H.authenticationScheme="pop",H.resourceRequestMethod=B.proofOfPossessionOptions.resourceRequestMethod,H.resourceRequestUri=B.proofOfPossessionOptions.resourceRequestUrl),F.acquireTokenInteractive(H))})}return s(S,"getTokenByInteractiveRequest"),{getActiveAccount:E,getTokenByClientSecret:h,getTokenByClientAssertion:m,getTokenByClientCertificate:g,getTokenByDeviceCode:A,getTokenByUsernamePassword:y,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:_,getTokenByInteractiveRequest:S}}s(Rh,"createMsalClient");var N7e=ci("ClientAssertionCredential"),u3=class{static{s(this,"ClientAssertionCredential")}constructor(e,r,n,i={}){if(!e)throw new en("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new en("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new en("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=hl(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=Rh(r,e,Object.assign(Object.assign({},i),{logger:N7e,tokenCredentialOptions:this.options}))}async getToken(e,r={}){return as.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Uc(this.tenantId,n,this.additionallyAllowedTenantIds,N7e);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var L7e=require("node:fs/promises");var o2="WorkloadIdentityCredential",DNt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],mM=ci(o2),wv=class{static{s(this,"WorkloadIdentityCredential")}constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let r=Y$(DNt).assigned.join(", ");mM.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&xu(mM,i),!o)throw new en(`${o2}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new en(`${o2}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new en(`${o2}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);mM.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new u3(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${o2}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw mM.info(n),new en(n)}return mM.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new en(`${o2}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,L7e.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new en(`${o2}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var M7e="ManagedIdentityCredential - Token Exchange",BNt=ci(M7e),Che={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||BNt.info(`${M7e}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new wv(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(r,e)}};var sp=ci("ManagedIdentityCredential"),xI=class{static{s(this,"ManagedIdentityCredential")}constructor(e,r){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let o;typeof e=="string"?(this.clientId=e,o=r??{}):(this.clientId=e?.clientId,o=e??{}),this.resourceId=o?.resourceId,this.objectId=o?.objectId;let a=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(l=>l.value);if(a.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);o.allowInsecureConnection=!0,((n=o.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=o.retryOptions.maxRetries),this.identityClient=new lv(Object.assign(Object.assign({},o),{additionalPolicies:[{policy:r7e(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new o3({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:hV(z$()),piiLoggingEnabled:(i=o.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:pV(sp)}}}),this.isAvailableIdentityClient=new lv(Object.assign(Object.assign({},o),{retryOptions:{maxRetries:0}}));let c=this.managedIdentityApp.getManagedIdentitySource();if(c==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw sp.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new en("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(c==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw sp.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new en(`ManagedIdentityCredential: ${T6e}`);if(sp.info(`Using ${c} managed identity.`),a.length===1){let{key:l,value:u}=a[0];sp.info(`${c} with ${l}: ${u}`)}}async getToken(e,r={}){sp.getToken.info("Using the MSAL provider for Managed Identity.");let n=H6(e);if(!n)throw new en(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return as.withSpan("ManagedIdentityCredential.getToken",r,async()=>{var i;try{let o=await Che.isAvailable(this.clientId),a=this.managedIdentityApp.getManagedIdentitySource(),c=a==="DefaultToImds"||a==="Imds";if(sp.getToken.info(`MSAL Identity source: ${a}`),o){sp.getToken.info("Using the token exchange managed identity.");let u=await Che.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new en("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(sp.getToken.info("Using the IMDS endpoint to probe for availability."),!await n7e.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new en("Attempted to use the IMDS endpoint, but it is not available.");sp.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),sp.getToken.info(pl(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:(i=l.refreshOn)===null||i===void 0?void 0:i.getTime(),tokenType:"Bearer"}}catch(o){throw sp.getToken.error(Mo(e,o)),o.name==="AuthenticationRequiredError"?o:NNt(o)?new en(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new en(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(sp.getToken.info(o),new Sg({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function NNt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(NNt,"isNetworkError");d();d();function bI(t){return Array.isArray(t)?t:[t]}s(bI,"ensureScopes");function d3(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(Mo(t,r)),r}}s(d3,"ensureValidScopeForDevTimeCreds");function CV(t){return t.replace(/\/.default$/,"")}s(CV,"getScopeResource");var F7e=Me(require("child_process"),1);d();function vhe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(Mo("",r)),r}}s(vhe,"checkSubscription");var kh=ci("AzureCliCredential"),O7e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(kh.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{F7e.default.execFile("az",["account","get-access-token","--output","json","--resource",t,...i,...o],{cwd:O7e.getSafeWorkingDir(),shell:!0,timeout:n},(l,u,f)=>{a({stdout:u,stderr:f,error:l})})}catch(l){c(l)}})}},gM=class{static{s(this,"AzureCliCredential")}constructor(e){e?.tenantId&&(xu(kh,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(vhe(kh,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=hl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Uc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&xu(kh,n),this.subscription&&vhe(kh,this.subscription);let i=typeof e=="string"?e:e[0];return kh.getToken.info(`Using the scope ${i}`),as.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{d3(i,kh);let u=CV(i),f=await O7e.getAzureCliAccessToken(u,n,this.subscription,this.timeout),p=(o=f.stderr)===null||o===void 0?void 0:o.match("(.*)az login --scope(.*)"),h=((a=f.stderr)===null||a===void 0?void 0:a.match("(.*)az login(.*)"))&&!p;if(((c=f.stderr)===null||c===void 0?void 0:c.match("az:(.*)not found"))||((l=f.stderr)===null||l===void 0?void 0:l.startsWith("'az' is not recognized"))){let g=new en("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw kh.getToken.info(Mo(e,g)),g}if(h){let g=new en("Please run 'az login' from a command prompt to authenticate before using this credential.");throw kh.getToken.info(Mo(e,g)),g}try{let g=f.stdout,A=this.parseRawResponse(g);return kh.getToken.info(pl(e)),A}catch(g){throw f.stderr?new en(f.stderr):g}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new en(u.message||"Unknown error while trying to retrieve the access token");throw kh.getToken.info(Mo(e,f)),f}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return kh.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new en(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();var Q7e=Me(require("child_process"),1);var _v=ci("AzureDeveloperCliCredential"),U7e={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(_v.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{Q7e.default.execFile("azd",["auth","token","--output","json",...t.reduce((a,c)=>a.concat("--scope",c),[]),...n],{cwd:U7e.getSafeWorkingDir(),timeout:r},(a,c,l)=>{i({stdout:c,stderr:l,error:a})})}catch(a){o(a)}})}},AM=class{static{s(this,"AzureDeveloperCliCredential")}constructor(e){e?.tenantId&&(xu(_v,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=hl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=Uc(this.tenantId,r,this.additionallyAllowedTenantIds);n&&xu(_v,n);let i;return typeof e=="string"?i=[e]:i=e,_v.getToken.info(`Using the scopes ${e}`),as.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{i.forEach(h=>{d3(h,_v)});let u=await U7e.getAzdAccessToken(i,n,this.timeout),f=((o=u.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd login` to login"))||((a=u.stderr)===null||a===void 0?void 0:a.match("not logged in, run `azd auth login` to login"));if(((c=u.stderr)===null||c===void 0?void 0:c.match("azd:(.*)not found"))||((l=u.stderr)===null||l===void 0?void 0:l.startsWith("'azd' is not recognized"))||u.error&&u.error.code==="ENOENT"){let h=new en("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw _v.getToken.info(Mo(e,h)),h}if(f){let h=new en("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw _v.getToken.info(Mo(e,h)),h}try{let h=JSON.parse(u.stdout);return _v.getToken.info(pl(e)),{token:h.token,expiresOnTimestamp:new Date(h.expiresOn).getTime(),tokenType:"Bearer"}}catch(h){throw u.stderr?new en(u.stderr):h}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new en(u.message||"Unknown error while trying to retrieve the access token");throw _v.getToken.info(Mo(e,f)),f}})}};d();d();var q7e=Me(require("child_process"),1),H7e={execFile(t,e,r){return new Promise((n,i)=>{q7e.execFile(t,e,r,(o,a,c)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||o?i(c?new Error(c):o):n(a)})})}};var Sv=ci("AzurePowerShellCredential"),$7e=process.platform==="win32";function j7e(t){return $7e?`${t}.exe`:t}s(j7e,"formatCommand");async function W7e(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await H7e.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(W7e,"runCommands");var G7e={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Ehe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},LNt=s(t=>t.message.match(`(.*)${G7e.login}(.*)`),"isLoginError"),MNt=s(t=>t.message.match(G7e.installed),"isNotInstalledError"),xhe=[j7e("pwsh")];$7e&&xhe.push(j7e("powershell"));var yM=class{static{s(this,"AzurePowerShellCredential")}constructor(e){e?.tenantId&&(xu(Sv,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=hl(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...xhe]){try{await W7e([[i,"/?"]],n)}catch{xhe.shift();continue}let a=(await W7e([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return FNt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return as.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=Uc(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&xu(Sv,n);try{d3(i,Sv),Sv.getToken.info(`Using the scope ${i}`);let o=CV(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return Sv.getToken.info(pl(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(MNt(o)){let c=new en(Ehe.installed);throw Sv.getToken.info(Mo(i,c)),c}else if(LNt(o)){let c=new en(Ehe.login);throw Sv.getToken.info(Mo(i,c)),c}let a=new en(`${o}. ${Ehe.troubleshoot}`);throw Sv.getToken.info(Mo(i,a)),a}})}};async function FNt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&Sv.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(FNt,"parseJsonToken");d();var bhe=ci("ChainedTokenCredential"),CM=class{static{s(this,"ChainedTokenCredential")}constructor(...e){this._sources=[],this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return as.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw bhe.getToken.info(Mo(e,l)),l}if(!n&&o.length>0){let c=new k6(o,"ChainedTokenCredential authentication failed.");throw bhe.getToken.info(Mo(e,c)),c}if(bhe.getToken.info(`Result for ${i.constructor.name}: ${pl(e)}`),n===null)throw new en("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();var EM=require("node:crypto");var z7e=require("node:fs/promises");var vM="ClientCertificateCredential",V7e=ci(vM),xM=class{static{s(this,"ClientCertificateCredential")}constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${vM}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=hl(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${vM}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${vM}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=Rh(r,e,Object.assign(Object.assign({},i),{logger:V7e,tokenCredentialOptions:i}))}async getToken(e,r={}){return as.withSpan(`${vM}.getToken`,r,async n=>{n.tenantId=Uc(this.tenantId,n,this.additionallyAllowedTenantIds,V7e);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){var e;let r=await ONt(this.certificateConfiguration,(e=this.sendCertificateChain)!==null&&e!==void 0?e:!1),n;return this.certificateConfiguration.certificatePassword!==void 0?n=(0,EM.createPrivateKey)({key:r.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():n=r.certificateContents,{thumbprint:r.thumbprint,thumbprintSha256:r.thumbprintSha256,privateKey:n,x5c:r.x5c}}};async function ONt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,z7e.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,EM.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,EM.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(ONt,"parseCertificate");d();var Y7e=ci("ClientSecretCredential"),bM=class{static{s(this,"ClientSecretCredential")}constructor(e,r,n,i={}){if(!e)throw new en("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new en("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new en("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=hl(i?.additionallyAllowedTenants),this.msalClient=Rh(r,e,Object.assign(Object.assign({},i),{logger:Y7e,tokenCredentialOptions:i}))}async getToken(e,r={}){return as.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Uc(this.tenantId,n,this.additionallyAllowedTenantIds,Y7e);let i=bI(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var QNt=ci("UsernamePasswordCredential"),IM=class{static{s(this,"UsernamePasswordCredential")}constructor(e,r,n,i,o={}){if(!e)throw new en("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new en("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new en("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new en("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=hl(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=Rh(r,this.tenantId,Object.assign(Object.assign({},o),{tokenCredentialOptions:o??{}}))}async getToken(e,r={}){return as.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=Uc(this.tenantId,n,this.additionallyAllowedTenantIds,QNt);let i=bI(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var UNt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function qNt(){var t;return((t=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&t!==void 0?t:"").split(";")}s(qNt,"getAdditionallyAllowedTenants");var vV="EnvironmentCredential",Rv=ci(vV);function HNt(){var t;let e=((t=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&t!==void 0?t:"").toLowerCase(),r=e==="true"||e==="1";return Rv.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${r}`),r}s(HNt,"getSendCertificateChain");var TM=class{static{s(this,"EnvironmentCredential")}constructor(e){this._credential=void 0;let r=Y$(UNt).assigned.join(", ");Rv.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=qNt(),c=HNt(),l=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:a,sendCertificateChain:c});if(n&&xu(Rv,n),n&&i&&o){Rv.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new bM(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){Rv.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new xM(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,h=process.env.AZURE_PASSWORD;n&&i&&p&&h&&(Rv.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),Rv.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new IM(n,i,p,h,l))}async getToken(e,r={}){return as.withSpan(`${vV}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return Rv.getToken.info(pl(e)),i}catch(i){let o=new zb(400,{error:`${vV} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw Rv.getToken.info(Mo(e,o)),o}throw new en(`${vV} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};var Ihe=ci("DefaultAzureCredential");function WNt(t={}){var e,r,n,i;(e=t.retryOptions)!==null&&e!==void 0||(t.retryOptions={maxRetries:5,retryDelayInMs:800});let o=(r=t?.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID,a=(n=t?.workloadIdentityClientId)!==null&&n!==void 0?n:o,c=t?.managedIdentityResourceId,l=process.env.AZURE_FEDERATED_TOKEN_FILE,u=(i=t?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(c){let f=Object.assign(Object.assign({},t),{resourceId:c});return new xI(f)}if(l&&a){let f=Object.assign(Object.assign({},t),{tenantId:u});return new xI(a,f)}if(o){let f=Object.assign(Object.assign({},t),{clientId:o});return new xI(f)}return new xI(t)}s(WNt,"createDefaultManagedIdentityCredential");function $Nt(t){var e,r,n;let i=(e=t?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,o=(r=t?.workloadIdentityClientId)!==null&&r!==void 0?r:i,a=process.env.AZURE_FEDERATED_TOKEN_FILE,c=(n=t?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(a&&o){let l=Object.assign(Object.assign({},t),{tenantId:c,clientId:o,tokenFilePath:a});return new wv(l)}if(c){let l=Object.assign(Object.assign({},t),{tenantId:c});return new wv(l)}return new wv(t)}s($Nt,"createDefaultWorkloadIdentityCredential");function jNt(t={}){let e=t.processTimeoutInMs;return new AM(Object.assign({processTimeoutInMs:e},t))}s(jNt,"createDefaultAzureDeveloperCliCredential");function GNt(t={}){let e=t.processTimeoutInMs;return new gM(Object.assign({processTimeoutInMs:e},t))}s(GNt,"createDefaultAzureCliCredential");function VNt(t={}){let e=t.processTimeoutInMs;return new yM(Object.assign({processTimeoutInMs:e},t))}s(VNt,"createDefaultAzurePowershellCredential");function zNt(t={}){return new TM(t)}s(zNt,"createEnvironmentCredential");var The=class{static{s(this,"UnavailableDefaultCredential")}constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return Ihe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},f3=class extends CM{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[GNt,VNt,jNt],i=[zNt,$Nt,WNt],o=[];if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;default:{let c=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw Ihe.warning(c),new Error(c)}}else o=[...i,...n];let a=o.map(c=>{try{return c(e)}catch(l){return Ihe.warning(`Skipped ${c.name} because of an error creating the credential: ${l}`),new The(c.name,l.message)}});super(...a)}};d();var Bvn=ci("InteractiveBrowserCredential");d();var Wvn=ci("DeviceCodeCredential");d();var YNt="AzurePipelinesCredential",Zvn=ci(YNt);d();var lEn=ci("AuthorizationCodeCredential");d();var KNt="OnBehalfOfCredential",CEn=ci(KNt);d();function JNt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(JNt,"getIntegrationId");function II(t){let e={...F0(t),"X-GitHub-Api-Version":hy},r=JNt(t.get(ln));return r&&(e["Copilot-Integration-Id"]=r),I6()&&(e["ces-proxy-target"]=rS.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(II,"getCapiHeaders");function EV(t,e,...r){if(I6()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return Ry(t,e,"api",...r)}s(EV,"getCapiUrl");async function s2(t,e){let r=await t.get(Gr).getToken(),n=EV(t,r,e),i=r.token;I6()&&(i=await J7e());let o={Authorization:`Bearer ${i}`,...II(t)};return await t.get(zn).fetch(new URL(n).href,{method:"GET",headers:o})}s(s2,"fetchCapiUrl");async function K7e(t,e,r){let n=await t.get(Gr).getToken(),i=EV(t,n,e),o=n.token;I6()&&(o=await J7e());let a={Authorization:`Bearer ${o}`,...II(t)};return await t.get(zn).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(K7e,"postCapiUrl");async function J7e(){let e=await new f3().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(J7e,"getMsBenchToken");d();var X7e=10*60*1e3,yn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},Z7e=new Set([yn.O1Ga,yn.O3Mini,yn.O1Mini,yn.Gemini20Pro,yn.Gemini20Flash]);function Ph(t){switch(t){case"edits":case"user":case"inline":return[yn.Gpt4o,yn.Gpt4turbo,yn.Gpt4,yn.O1Mini,yn.O1Ga,yn.Claude35Sonnet,yn.O3Mini,yn.Gemini20Flash,yn.Claude37Sonnet,yn.Claude37SonnetThought,yn.Gpt45,yn.Gpt41,yn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[yn.Gpt4oMini,yn.Gpt4o,yn.Gpt35turbo,yn.Gpt41,yn.CopilotBase];case"gitCommit":return[yn.Gpt4oMini,yn.Gpt4o,yn.Gpt4,yn.Gpt41,yn.CopilotBase];case"codeReview":return[yn.Gpt4,yn.Gpt4o,yn.Gpt41,yn.CopilotBase];case"nesStubs":return[yn.Gpt4oMini,yn.Gpt4o,yn.Gpt41,yn.CopilotBase]}}s(Ph,"getSupportedModelFamiliesForPrompt");var IV={textEmbedding3Small:"text-embedding-3-small"},XNt=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),ZNt=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:XNt,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),eQe=I.Object({data:I.Array(ZNt)}),Jd=class{static{s(this,"ModelMetadataProvider")}},xV=class extends Jd{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ha(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await s2(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){An.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw An.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new py(r)}await this.processModels(r)}async fetchModel(r){let n=await s2(this.ctx,`/models/${r}`);if(!n.ok){An.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await K7e(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){An.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>X7e}},bV=class extends Jd{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Ot),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<X7e)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function tQe(t){let e=Ao(t,Qt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(tQe,"getUserSelectedModelConfiguration");d();d();d();var p3=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var rQe=Me(require("node:fs/promises")),TV=Me(require("node:path"));async function wV(t){return await rQe.readFile(whe(t))}s(wV,"readFile");function whe(t){return TV.default.resolve(TV.default.extname(__filename)!==".ts"?__dirname:TV.default.resolve(__dirname,"../../dist"),t)}s(whe,"locateFile");var h3=Me(gQe());var DV=new Map;function vo(t="o200k_base"){let e=DV.get(t);return e!==void 0||(e=DV.get("o200k_base"),e!==void 0)?e:new BV}s(vo,"getTokenizer");async function yQe(t="o200k_base"){return await a2,vo(t)}s(yQe,"getTokenizerAsync");async function m8t(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await wV(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(m8t,"parseTikTokenNoIndex");var Fhe=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,h3.createTokenizer)(await m8t(`resources/${e}.tiktoken.noindex`),(0,h3.getSpecialTokensByEncoder)(e),(0,h3.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new p3("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Ohe=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},g8t={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},Mhe=4,BV=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,Mhe)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-Mhe),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-Mhe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?g8t[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function AQe(t){try{let e=await Fhe.create(t);DV.set(t,e)}catch{}}s(AQe,"setTokenizer");var a2=(async()=>{DV.set("mock",new Ohe),await Promise.all([AQe("cl100k_base"),AQe("o200k_base")])})();d();d();var A8t=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},vQe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Qhe,NV,EQe,Uhe=class extends _n{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Qhe.add(this),NV.set(this,void 0),A8t(this,NV,e,"f"),this.error=r}Errors(){return new Nb(vQe(this,Qhe,"m",EQe).call(this))}};NV=new WeakMap,Qhe=new WeakSet,EQe=s(function*(){this.error&&(yield this.error),yield*vQe(this,NV,"f")},"_AssertError_Iterator");function CQe(t,e,r){if(!wi(t,e,r))throw new Uhe(xy(t,e,r))}s(CQe,"AssertValue");function LV(...t){return t.length===3?CQe(t[0],t[1],t[2]):CQe(t[0],[],t[1])}s(LV,"Assert");d();d();d();function y8t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Eo(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Eo(t[r]);return e}s(y8t,"FromObject");function C8t(t){return t.map(e=>Eo(e))}s(C8t,"FromArray");function v8t(t){return t.slice()}s(v8t,"FromTypedArray");function E8t(t){return new Map(Eo([...t.entries()]))}s(E8t,"FromMap");function x8t(t){return new Set(Eo([...t.entries()]))}s(x8t,"FromSet");function b8t(t){return new Date(t.toISOString())}s(b8t,"FromDate");function Eo(t){if(wn(t))return C8t(t);if(Od(t))return b8t(t);if(ch(t))return v8t(t);if(Ake(t))return E8t(t);if(yke(t))return x8t(t);if(bi(t))return y8t(t);if(Q0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Eo,"Clone");var ap=class extends _n{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function xo(t){return Tb(t)?t():Eo(t)}s(xo,"FromDefault");function I8t(t,e){return Tn(t,"default")?xo(t.default):{}}s(I8t,"FromAny");function T8t(t,e){return{}}s(T8t,"FromArgument");function w8t(t,e){if(t.uniqueItems===!0&&!Tn(t,"default"))throw new ap(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!Tn(t,"default"))throw new ap(t,"Array with the contains constraint requires a default value");return"default"in t?xo(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Kf(t.items,e)):[]}s(w8t,"FromArray");function _8t(t,e){return Tn(t,"default")?xo(t.default):async function*(){}()}s(_8t,"FromAsyncIterator");function S8t(t,e){return Tn(t,"default")?xo(t.default):BigInt(0)}s(S8t,"FromBigInt");function R8t(t,e){return Tn(t,"default")?xo(t.default):!1}s(R8t,"FromBoolean");function k8t(t,e){if(Tn(t,"default"))return xo(t.default);{let r=Kf(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(k8t,"FromConstructor");function P8t(t,e){return Tn(t,"default")?xo(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(P8t,"FromDate");function D8t(t,e){return Tn(t,"default")?xo(t.default):()=>Kf(t.returns,e)}s(D8t,"FromFunction");function B8t(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Kf(n,[...e,...r])}s(B8t,"FromImport");function N8t(t,e){return Tn(t,"default")?xo(t.default):t.minimum!==void 0?t.minimum:0}s(N8t,"FromInteger");function L8t(t,e){if(Tn(t,"default"))return xo(t.default);{let r=t.allOf.reduce((n,i)=>{let o=Kf(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!wi(t,e,r))throw new ap(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(L8t,"FromIntersect");function M8t(t,e){return Tn(t,"default")?xo(t.default):function*(){}()}s(M8t,"FromIterator");function F8t(t,e){return Tn(t,"default")?xo(t.default):t.const}s(F8t,"FromLiteral");function O8t(t,e){if(Tn(t,"default"))return xo(t.default);throw new ap(t,"Never types cannot be created. Consider using a default value.")}s(O8t,"FromNever");function Q8t(t,e){if(Tn(t,"default"))return xo(t.default);throw new ap(t,"Not types must have a default value")}s(Q8t,"FromNot");function U8t(t,e){return Tn(t,"default")?xo(t.default):null}s(U8t,"FromNull");function q8t(t,e){return Tn(t,"default")?xo(t.default):t.minimum!==void 0?t.minimum:0}s(q8t,"FromNumber");function H8t(t,e){if(Tn(t,"default"))return xo(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=Kf(o,e));return n}}s(H8t,"FromObject");function W8t(t,e){return Tn(t,"default")?xo(t.default):Promise.resolve(Kf(t.item,e))}s(W8t,"FromPromise");function $8t(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(Tn(t,"default"))return xo(t.default);if(r===Cy||r===yy)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=Kf(n,e);return o}}s($8t,"FromRecord");function j8t(t,e){return Tn(t,"default")?xo(t.default):Kf(go(t,e),e)}s(j8t,"FromRef");function G8t(t,e){if(Tn(t,"default"))return xo(t.default);throw new ap(t,"RegExp types cannot be created. Consider using a default value.")}s(G8t,"FromRegExp");function V8t(t,e){if(t.pattern!==void 0){if(Tn(t,"default"))return xo(t.default);throw new ap(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(Tn(t,"default"))return xo(t.default);throw new ap(t,"String types with formats must specify a default value")}else return Tn(t,"default")?xo(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(V8t,"FromString");function z8t(t,e){return Tn(t,"default")?xo(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(z8t,"FromSymbol");function Y8t(t,e){if(Tn(t,"default"))return xo(t.default);if(!hW(t))throw new ap(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return I4(t)[0]}s(Y8t,"FromTemplateLiteral");function K8t(t,e){if(xQe++>i9t)throw new ap(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Tn(t,"default")?xo(t.default):Kf(go(t,e),e)}s(K8t,"FromThis");function J8t(t,e){return Tn(t,"default")?xo(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Kf(t.items[n],e))}s(J8t,"FromTuple");function X8t(t,e){if(Tn(t,"default"))return xo(t.default)}s(X8t,"FromUndefined");function Z8t(t,e){if(Tn(t,"default"))return xo(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Kf(t.anyOf[0],e)}s(Z8t,"FromUnion");function e9t(t,e){return Tn(t,"default")?xo(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(e9t,"FromUint8Array");function t9t(t,e){return Tn(t,"default")?xo(t.default):{}}s(t9t,"FromUnknown");function r9t(t,e){if(Tn(t,"default"))return xo(t.default)}s(r9t,"FromVoid");function n9t(t,e){if(Tn(t,"default"))return xo(t.default);throw new Error("User defined types must specify a default value")}s(n9t,"FromKind");function Kf(t,e){let r=Bl(t,e),n=t;switch(n[it]){case"Any":return I8t(n,r);case"Argument":return T8t(n,r);case"Array":return w8t(n,r);case"AsyncIterator":return _8t(n,r);case"BigInt":return S8t(n,r);case"Boolean":return R8t(n,r);case"Constructor":return k8t(n,r);case"Date":return P8t(n,r);case"Function":return D8t(n,r);case"Import":return B8t(n,r);case"Integer":return N8t(n,r);case"Intersect":return L8t(n,r);case"Iterator":return M8t(n,r);case"Literal":return F8t(n,r);case"Never":return O8t(n,r);case"Not":return Q8t(n,r);case"Null":return U8t(n,r);case"Number":return q8t(n,r);case"Object":return H8t(n,r);case"Promise":return W8t(n,r);case"Record":return $8t(n,r);case"Ref":return j8t(n,r);case"RegExp":return G8t(n,r);case"String":return V8t(n,r);case"Symbol":return z8t(n,r);case"TemplateLiteral":return Y8t(n,r);case"This":return K8t(n,r);case"Tuple":return J8t(n,r);case"Undefined":return X8t(n,r);case"Union":return Z8t(n,r);case"Uint8Array":return e9t(n,r);case"Unknown":return t9t(n,r);case"Void":return r9t(n,r);default:if(!Qd.Has(n[it]))throw new ap(n,"Unknown type");return n9t(n,r)}}s(Kf,"Visit");var i9t=512,xQe=0;function Dh(...t){return xQe=0,t.length===2?Kf(t[0],t[1]):Kf(t[0],[])}s(Dh,"Create");var MV=class extends _n{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function o9t(t,e,r){if(t[it]==="Object"&&typeof r=="object"&&!V1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[it]==="Literal"&&f.const===r[u]?c:0,h=wi(f,e,r[u])?a:0,m=i.includes(u)?a:0;return l+(p+h+m)},0)}else return wi(t,e,r)?1:0}s(o9t,"ScoreUnion");function s9t(t,e,r){let n=t.anyOf.map(a=>go(a,e)),[i,o]=[n[0],0];for(let a of n){let c=o9t(a,e,r);c>o&&(i=a,o=c)}return i}s(s9t,"SelectUnion");function a9t(t,e,r){if("default"in t)return typeof r=="function"?t.default:Eo(t.default);{let n=s9t(t,e,r);return _M(n,e,r)}}s(a9t,"CastUnion");function c9t(t,e,r){return wi(t,e,r)?Eo(r):Dh(t,e)}s(c9t,"DefaultClone");function l9t(t,e,r){return wi(t,e,r)?r:Dh(t,e)}s(l9t,"Default");function u9t(t,e,r){if(wi(t,e,r))return Eo(r);let n=wn(r)?Eo(r):Dh(t,e),i=Zr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Zr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>Lg(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!wi(t,e,c))throw new MV(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(u9t,"FromArray");function d9t(t,e,r){if(wi(t,e,r))return Dh(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=Lg(a,e,r.prototype[o]));return i}s(d9t,"FromConstructor");function f9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Lg(i,[...e,...n],r)}s(f9t,"FromImport");function p9t(t,e,r){let n=Dh(t,e),i=bi(n)&&bi(r)?{...n,...r}:r;return wi(t,e,i)?i:Dh(t,e)}s(p9t,"FromIntersect");function h9t(t,e,r){throw new MV(t,"Never types cannot be cast")}s(h9t,"FromNever");function m9t(t,e,r){if(wi(t,e,r))return r;if(r===null||typeof r!="object")return Dh(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=Lg(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=Lg(t.additionalProperties,e,r[a]))}return i}s(m9t,"FromObject");function g9t(t,e,r){if(wi(t,e,r))return Eo(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Dh(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=Lg(i,e,c);return o}s(g9t,"FromRecord");function A9t(t,e,r){return Lg(go(t,e),e,r)}s(A9t,"FromRef");function y9t(t,e,r){return Lg(go(t,e),e,r)}s(y9t,"FromThis");function C9t(t,e,r){return wi(t,e,r)?Eo(r):wn(r)?t.items===void 0?[]:t.items.map((n,i)=>Lg(n,e,r[i])):Dh(t,e)}s(C9t,"FromTuple");function v9t(t,e,r){return wi(t,e,r)?Eo(r):a9t(t,e,r)}s(v9t,"FromUnion");function Lg(t,e,r){let n=ao(t.$id)?Bl(t,e):e,i=t;switch(t[it]){case"Array":return u9t(i,n,r);case"Constructor":return d9t(i,n,r);case"Import":return f9t(i,n,r);case"Intersect":return p9t(i,n,r);case"Never":return h9t(i,n,r);case"Object":return m9t(i,n,r);case"Record":return g9t(i,n,r);case"Ref":return A9t(i,n,r);case"This":return y9t(i,n,r);case"Tuple":return C9t(i,n,r);case"Union":return v9t(i,n,r);case"Date":case"Symbol":case"Uint8Array":return c9t(t,e,r);default:return l9t(i,n,r)}}s(Lg,"Visit");function _M(...t){return t.length===3?Lg(t[0],t[1],t[2]):Lg(t[0],[],t[1])}s(_M,"Cast");d();function E9t(t){return _b(t)&&t[it]!=="Unsafe"}s(E9t,"IsCheckable");function x9t(t,e,r){return wn(r)?r.map(n=>Jf(t.items,e,n)):r}s(x9t,"FromArray");function b9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Jf(i,[...e,...n],r)}s(b9t,"FromImport");function I9t(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>Jf(c,e,Eo(r))).reduce((c,l)=>bi(l)?{...c,...l}:l,{});if(!bi(r)||!bi(o)||!_b(n))return o;let a=Df(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||wi(n,e,r[c])&&(o[c]=Jf(n,e,r[c]));return o}s(I9t,"FromIntersect");function T9t(t,e,r){if(!bi(r)||wn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(Tn(t.properties,i)){r[i]=Jf(t.properties[i],e,r[i]);continue}if(_b(n)&&wi(n,e,r[i])){r[i]=Jf(n,e,r[i]);continue}delete r[i]}return r}s(T9t,"FromObject");function w9t(t,e,r){if(!bi(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=Jf(a,e,r[l]);continue}if(_b(n)&&wi(n,e,r[l])){r[l]=Jf(n,e,r[l]);continue}delete r[l]}return r}s(w9t,"FromRecord");function _9t(t,e,r){return Jf(go(t,e),e,r)}s(_9t,"FromRef");function S9t(t,e,r){return Jf(go(t,e),e,r)}s(S9t,"FromThis");function R9t(t,e,r){if(!wn(r))return r;if(Ws(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=Jf(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(R9t,"FromTuple");function k9t(t,e,r){for(let n of t.anyOf)if(E9t(n)&&wi(n,e,r))return Jf(n,e,r);return r}s(k9t,"FromUnion");function Jf(t,e,r){let n=ao(t.$id)?Bl(t,e):e,i=t;switch(i[it]){case"Array":return x9t(i,n,r);case"Import":return b9t(i,n,r);case"Intersect":return I9t(i,n,r);case"Object":return T9t(i,n,r);case"Record":return w9t(i,n,r);case"Ref":return _9t(i,n,r);case"This":return S9t(i,n,r);case"Tuple":return R9t(i,n,r);case"Union":return k9t(i,n,r);default:return r}}s(Jf,"Visit");function FV(...t){return t.length===3?Jf(t[0],t[1],t[2]):Jf(t[0],[],t[1])}s(FV,"Clean");d();function OV(t){return ao(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(OV,"IsStringNumeric");function P9t(t){return mu(t)||Ay(t)||Zr(t)}s(P9t,"IsValueToString");function SM(t){return t===!0||Zr(t)&&t===1||mu(t)&&t===BigInt("1")||ao(t)&&(t.toLowerCase()==="true"||t==="1")}s(SM,"IsValueTrue");function RM(t){return t===!1||Zr(t)&&(t===0||Object.is(t,-0))||mu(t)&&t===BigInt("0")||ao(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(RM,"IsValueFalse");function D9t(t){return ao(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(D9t,"IsTimeStringWithTimeZone");function B9t(t){return ao(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(B9t,"IsTimeStringWithoutTimeZone");function N9t(t){return ao(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(N9t,"IsDateTimeStringWithTimeZone");function L9t(t){return ao(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(L9t,"IsDateTimeStringWithoutTimeZone");function M9t(t){return ao(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(M9t,"IsDateString");function F9t(t,e){let r=IQe(t);return r===e?r:t}s(F9t,"TryConvertLiteralString");function O9t(t,e){let r=TQe(t);return r===e?r:t}s(O9t,"TryConvertLiteralNumber");function Q9t(t,e){let r=bQe(t);return r===e?r:t}s(Q9t,"TryConvertLiteralBoolean");function U9t(t,e){return ao(t.const)?F9t(e,t.const):Zr(t.const)?O9t(e,t.const):Ay(t.const)?Q9t(e,t.const):e}s(U9t,"TryConvertLiteral");function bQe(t){return SM(t)?!0:RM(t)?!1:t}s(bQe,"TryConvertBoolean");function q9t(t){let e=s(r=>r.split(".")[0],"truncateInteger");return OV(t)?BigInt(e(t)):Zr(t)?BigInt(Math.trunc(t)):RM(t)?BigInt(0):SM(t)?BigInt(1):t}s(q9t,"TryConvertBigInt");function IQe(t){return z1(t)&&t.description!==void 0?t.description.toString():P9t(t)?t.toString():t}s(IQe,"TryConvertString");function TQe(t){return OV(t)?parseFloat(t):SM(t)?1:RM(t)?0:t}s(TQe,"TryConvertNumber");function H9t(t){return OV(t)?parseInt(t):Zr(t)?Math.trunc(t):SM(t)?1:RM(t)?0:t}s(H9t,"TryConvertInteger");function W9t(t){return ao(t)&&t.toLowerCase()==="null"?null:t}s(W9t,"TryConvertNull");function $9t(t){return ao(t)&&t==="undefined"?void 0:t}s($9t,"TryConvertUndefined");function j9t(t){return Od(t)?t:Zr(t)?new Date(t):SM(t)?new Date(1):RM(t)?new Date(0):OV(t)?new Date(parseInt(t)):B9t(t)?new Date(`1970-01-01T${t}.000Z`):D9t(t)?new Date(`1970-01-01T${t}`):L9t(t)?new Date(`${t}.000Z`):N9t(t)?new Date(t):M9t(t)?new Date(`${t}T00:00:00.000Z`):t}s(j9t,"TryConvertDate");function G9t(t,e,r){return(wn(r)?r:[r]).map(i=>Mg(t.items,e,i))}s(G9t,"FromArray");function V9t(t,e,r){return q9t(r)}s(V9t,"FromBigInt");function z9t(t,e,r){return bQe(r)}s(z9t,"FromBoolean");function Y9t(t,e,r){return j9t(r)}s(Y9t,"FromDate");function K9t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Mg(i,[...e,...n],r)}s(K9t,"FromImport");function J9t(t,e,r){return H9t(r)}s(J9t,"FromInteger");function X9t(t,e,r){return t.allOf.reduce((n,i)=>Mg(i,e,n),r)}s(X9t,"FromIntersect");function Z9t(t,e,r){return U9t(t,r)}s(Z9t,"FromLiteral");function e6t(t,e,r){return W9t(r)}s(e6t,"FromNull");function t6t(t,e,r){return TQe(r)}s(t6t,"FromNumber");function r6t(t,e,r){if(!bi(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))Tn(r,n)&&(r[n]=Mg(t.properties[n],e,r[n]));return r}s(r6t,"FromObject");function n6t(t,e,r){if(!bi(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=Mg(o,e,c);return r}s(n6t,"FromRecord");function i6t(t,e,r){return Mg(go(t,e),e,r)}s(i6t,"FromRef");function o6t(t,e,r){return IQe(r)}s(o6t,"FromString");function s6t(t,e,r){return ao(r)||Zr(r)?Symbol(r):r}s(s6t,"FromSymbol");function a6t(t,e,r){return Mg(go(t,e),e,r)}s(a6t,"FromThis");function c6t(t,e,r){return wn(r)&&!Ws(t.items)?r.map((i,o)=>o<t.items.length?Mg(t.items[o],e,i):i):r}s(c6t,"FromTuple");function l6t(t,e,r){return $9t(r)}s(l6t,"FromUndefined");function u6t(t,e,r){for(let n of t.anyOf){let i=Mg(n,e,Eo(r));if(wi(n,e,i))return i}return r}s(u6t,"FromUnion");function Mg(t,e,r){let n=Bl(t,e),i=t;switch(t[it]){case"Array":return G9t(i,n,r);case"BigInt":return V9t(i,n,r);case"Boolean":return z9t(i,n,r);case"Date":return Y9t(i,n,r);case"Import":return K9t(i,n,r);case"Integer":return J9t(i,n,r);case"Intersect":return X9t(i,n,r);case"Literal":return Z9t(i,n,r);case"Null":return e6t(i,n,r);case"Number":return t6t(i,n,r);case"Object":return r6t(i,n,r);case"Record":return n6t(i,n,r);case"Ref":return i6t(i,n,r);case"String":return o6t(i,n,r);case"Symbol":return s6t(i,n,r);case"This":return a6t(i,n,r);case"Tuple":return c6t(i,n,r);case"Undefined":return l6t(i,n,r);case"Union":return u6t(i,n,r);default:return r}}s(Mg,"Visit");function QV(...t){return t.length===3?Mg(t[0],t[1],t[2]):Mg(t[0],[],t[1])}s(QV,"Convert");d();function wQe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!wi(e,r,n))throw new F4(e,n,xy(e,r,n).First());return nv(e,r)?O4(e,r,n):n}s(wQe,"Decode");d();function kv(t,e){let r=Tn(t,"default")?t.default:void 0,n=Tb(r)?r():Eo(r);return Ws(e)?n:bi(e)&&bi(n)?Object.assign(n,e):e}s(kv,"ValueOrDefault");function qhe(t){return _b(t)&&"default"in t}s(qhe,"HasDefaultProperty");function d6t(t,e,r){if(wn(r)){for(let i=0;i<r.length;i++)r[i]=Zd(t.items,e,r[i]);return r}let n=kv(t,r);if(!wn(n))return n;for(let i=0;i<n.length;i++)n[i]=Zd(t.items,e,n[i]);return n}s(d6t,"FromArray");function f6t(t,e,r){return Od(r)?r:kv(t,r)}s(f6t,"FromDate");function p6t(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Zd(i,[...e,...n],r)}s(p6t,"FromImport");function h6t(t,e,r){let n=kv(t,r);return t.allOf.reduce((i,o)=>{let a=Zd(o,e,n);return bi(a)?{...i,...a}:a},{})}s(h6t,"FromIntersect");function m6t(t,e,r){let n=kv(t,r);if(!bi(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Zd(t.properties[o],e,n[o]);Ws(a)||(n[o]=Zd(t.properties[o],e,n[o]))}if(!qhe(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=Zd(t.additionalProperties,e,n[o]));return n}s(m6t,"FromObject");function g6t(t,e,r){let n=kv(t,r);if(!bi(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&qhe(a)&&(n[l]=Zd(a,e,n[l]));if(!qhe(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=Zd(i,e,n[l]));return n}s(g6t,"FromRecord");function A6t(t,e,r){return Zd(go(t,e),e,kv(t,r))}s(A6t,"FromRef");function y6t(t,e,r){return Zd(go(t,e),e,r)}s(y6t,"FromThis");function C6t(t,e,r){let n=kv(t,r);if(!wn(n)||Ws(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=Zd(i[a],e,n[a]));return n}s(C6t,"FromTuple");function v6t(t,e,r){let n=kv(t,r);for(let i of t.anyOf){let o=Zd(i,e,Eo(n));if(wi(i,e,o))return o}return n}s(v6t,"FromUnion");function Zd(t,e,r){let n=Bl(t,e),i=t;switch(i[it]){case"Array":return d6t(i,n,r);case"Date":return f6t(i,n,r);case"Import":return p6t(i,n,r);case"Intersect":return h6t(i,n,r);case"Object":return m6t(i,n,r);case"Record":return g6t(i,n,r);case"Ref":return A6t(i,n,r);case"This":return y6t(i,n,r);case"Tuple":return C6t(i,n,r);case"Union":return v6t(i,n,r);default:return kv(i,r)}}s(Zd,"Visit");function UV(...t){return t.length===3?Zd(t[0],t[1],t[2]):Zd(t[0],[],t[1])}s(UV,"Default");d();d();var Fg={};fa(Fg,{Delete:()=>x6t,Format:()=>kM,Get:()=>I6t,Has:()=>b6t,Set:()=>E6t,ValuePointerRootDeleteError:()=>HV,ValuePointerRootSetError:()=>qV});d();var qV=class extends _n{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},HV=class extends _n{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function _Qe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(_Qe,"Escape");function*kM(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield _Qe(t.slice(e,r))),e=n+1):r=n;yield _Qe(t.slice(e))}s(kM,"Format");function E6t(t,e,r){if(e==="")throw new qV(t,e,r);let[n,i,o]=[null,t,""];for(let a of kM(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(E6t,"Set");function x6t(t,e){if(e==="")throw new HV(t,e);let[r,n,i]=[null,t,""];for(let o of kM(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(x6t,"Delete");function b6t(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of kM(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(b6t,"Has");function I6t(t,e){if(e==="")return t;let r=t;for(let n of kM(e)){if(r[n]===void 0)return;r=r[n]}return r}s(I6t,"Get");d();function T6t(t,e){if(!bi(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>c2(t[i],e[i]))}s(T6t,"ObjectType");function w6t(t,e){return Od(e)&&t.getTime()===e.getTime()}s(w6t,"DateType");function _6t(t,e){return!wn(e)||t.length!==e.length?!1:t.every((r,n)=>c2(r,e[n]))}s(_6t,"ArrayType");function S6t(t,e){return!ch(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>c2(r,e[n]))}s(S6t,"TypedArrayType");function R6t(t,e){return t===e}s(R6t,"ValueType");function c2(t,e){if(Od(t))return w6t(t,e);if(ch(t))return S6t(t,e);if(wn(t))return _6t(t,e);if(bi(t))return T6t(t,e);if(Q0(t))return R6t(t,e);throw new Error("ValueEquals: Unable to compare value")}s(c2,"Equal");var k6t=Bo({type:Xi("insert"),path:Ud(),value:Ag()}),P6t=Bo({type:Xi("update"),path:Ud(),value:Ag()}),D6t=Bo({type:Xi("delete"),path:Ud()}),RQe=Do([k6t,P6t,D6t]),WV=class extends _n{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function $V(t,e){return{type:"update",path:t,value:e}}s($V,"CreateUpdate");function kQe(t,e){return{type:"insert",path:t,value:e}}s(kQe,"CreateInsert");function PQe(t){return{type:"delete",path:t}}s(PQe,"CreateDelete");function SQe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new WV(t,"Cannot diff objects with symbols")}s(SQe,"AssertDiffable");function*B6t(t,e,r){if(SQe(e),SQe(r),!$ce(r))return yield $V(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)Tn(e,o)||(yield kQe(`${t}/${o}`,r[o]));for(let o of n)Tn(r,o)&&(c2(e,r)||(yield*jV(`${t}/${o}`,e[o],r[o])));for(let o of n)Tn(r,o)||(yield PQe(`${t}/${o}`))}s(B6t,"ObjectType");function*N6t(t,e,r){if(!wn(r))return yield $V(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*jV(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield kQe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield PQe(`${t}/${n}`))}s(N6t,"ArrayType");function*L6t(t,e,r){if(!ch(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield $V(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*jV(`${t}/${n}`,e[n],r[n])}s(L6t,"TypedArrayType");function*M6t(t,e,r){e!==r&&(yield $V(t,r))}s(M6t,"ValueType");function*jV(t,e,r){if($ce(e))return yield*B6t(t,e,r);if(wn(e))return yield*N6t(t,e,r);if(ch(e))return yield*L6t(t,e,r);if(Q0(e))return yield*M6t(t,e,r);throw new WV(e,"Unable to diff value")}s(jV,"Visit");function DQe(t,e){return[...jV("",t,e)]}s(DQe,"Diff");function F6t(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(F6t,"IsRootUpdate");function O6t(t){return t.length===0}s(O6t,"IsIdentity");function BQe(t,e){if(F6t(e))return Eo(e[0].value);if(O6t(e))return Eo(t);let r=Eo(t);for(let n of e)switch(n.type){case"insert":{Fg.Set(r,n.path,n.value);break}case"update":{Fg.Set(r,n.path,n.value);break}case"delete":{Fg.Delete(r,n.path);break}}return r}s(BQe,"Patch");d();function NQe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=nv(e,r)?U4(e,r,n):n;if(!wi(e,r,i))throw new Q4(e,i,xy(e,r,i).First());return i}s(NQe,"Encode");d();function GV(t){return bi(t)&&!wn(t)}s(GV,"IsStandardObject");var VV=class extends _n{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Q6t(t,e,r,n){if(!GV(r))Fg.Set(t,e,Eo(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Hhe(t,`${e}/${a}`,r[a],n[a])}}s(Q6t,"ObjectType");function U6t(t,e,r,n){if(!wn(r))Fg.Set(t,e,Eo(n));else{for(let i=0;i<n.length;i++)Hhe(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(U6t,"ArrayType");function q6t(t,e,r,n){if(ch(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else Fg.Set(t,e,Eo(n))}s(q6t,"TypedArrayType");function H6t(t,e,r,n){r!==n&&Fg.Set(t,e,n)}s(H6t,"ValueType");function Hhe(t,e,r,n){if(wn(n))return U6t(t,e,r,n);if(ch(n))return q6t(t,e,r,n);if(GV(n))return Q6t(t,e,r,n);if(Q0(n))return H6t(t,e,r,n)}s(Hhe,"Visit");function LQe(t){return ch(t)||Q0(t)}s(LQe,"IsNonMutableValue");function W6t(t,e){return GV(t)&&wn(e)||wn(t)&&GV(e)}s(W6t,"IsMismatchedValue");function MQe(t,e){if(LQe(t)||LQe(e))throw new VV("Only object and array types can be mutated at the root level");if(W6t(t,e))throw new VV("Cannot assign due type mismatch of assignable values");Hhe(t,"",t,e)}s(MQe,"Mutate");d();var zV=class extends _n{static{s(this,"ParseError")}constructor(e){super(e)}},Whe;(function(t){let e=new Map([["Assert",(o,a,c)=>(LV(o,a,c),c)],["Cast",(o,a,c)=>_M(o,a,c)],["Clean",(o,a,c)=>FV(o,a,c)],["Clone",(o,a,c)=>Eo(c)],["Convert",(o,a,c)=>QV(o,a,c)],["Decode",(o,a,c)=>nv(o,a)?O4(o,a,c):c],["Default",(o,a,c)=>UV(o,a,c)],["Encode",(o,a,c)=>nv(o,a)?U4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Whe||(Whe={}));var FQe=["Clone","Clean","Default","Convert","Assert","Decode"];function $6t(t,e,r,n){return t.reduce((i,o)=>{let a=Whe.Get(o);if(Ws(a))throw new zV(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s($6t,"ParseValue");function OQe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?wn(t[0])?[t[0],t[1],[],t[2]]:[FQe,t[0],t[1],t[2]]:t.length===2?[FQe,t[0],[],t[1]]:(()=>{throw new zV("Invalid Arguments")})();return $6t(e,r,n,i)}s(OQe,"Parse");d();var Yy={};fa(Yy,{Assert:()=>LV,Cast:()=>_M,Check:()=>wi,Clean:()=>FV,Clone:()=>Eo,Convert:()=>QV,Create:()=>Dh,Decode:()=>wQe,Default:()=>UV,Diff:()=>DQe,Edit:()=>RQe,Encode:()=>NQe,Equal:()=>c2,Errors:()=>xy,Hash:()=>Bb,Mutate:()=>MQe,Parse:()=>OQe,Patch:()=>BQe,ValueErrorIterator:()=>Nb});d();var j6t="gpt-4o-copilot",Bh=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ha(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return j6t}parseModelsResponse(e){try{return Yy.Parse(eQe,e)}catch(r){An.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await s2(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(An.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=tQe(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&An.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=Ao(this._ctx,Qt.DebugOverrideEngine)||Ao(this._ctx,Qt.DebugOverrideEngineLegacy);if(i)return new wI(i,"override");let o=e?this._ctx.get(Ot).customEngine(e):"",a=e?this._ctx.get(Ot).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new wI(o,"exp"):new wI(n,"modelpicker"):o?new wI(o,"exp"):this.customModels.length>0?new wI(this.customModels[0],"custommodel"):new wI(r,"default")}},wI=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function SI(t,e=void 0){let r=t.get(Bh),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(SI,"getEngineRequestInfo");d();d();var bo=class{static{s(this,"FileSystem")}};var rUe=Me(tUe());function nUe(t){return t!==void 0&&t!==0}s(nUe,"isRepoInfo");function iUe(t){if(t===void 0||t===0)return"";let e=Pv(t);if(e==="github/github")return e;let r=ALt(t)?.toLowerCase();return r!==void 0?r:""}s(iUe,"getDogFood");function Pv(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(Pv,"tryGetGitHubNWO");function ALt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(ALt,"tryGetADONWO");function RI(t,e){let r=dd(e);return yLt(t,r)}s(RI,"extractRepoInfoInBackground");var yLt=xLt(CLt,1e4);async function CLt(t,e){let r=GNe(e);if(!r)return;let n=await vLt(t,r);if(!n)return;let i=t.get(bo),o=qo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=ELt(a)??"",l=Vhe(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(CLt,"extractRepoInfo");function Vhe(t){let e;try{if(e=(0,rUe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Vhe,"parseRepoUrl");async function vLt(t,e){let r=e+"_add_to_make_longer",n=t.get(bo);for(;e!=="file:///"&&e.length<r.length;){let i=qo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=dd(e)}}s(vLt,"getRepoBaseUri");function ELt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(ELt,"getRepoUrlFromConfigText");var Ghe=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function xLt(t,e){let r=new Or(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new Ghe(u)),n.delete(a)}),0}}s(xLt,"computeInBackgroundAndMemoize");d();var PM=500,oUe=8192-PM,sUe=4,m3=10,aUe=15,cUe=35,bLt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function DM(t){return t=t.toLowerCase(),bLt[t]??t}s(DM,"normalizeLanguageId");var zhe=class{constructor(e){this.ctx=e;this.cache=new Or(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Yhe(()=>this.ctx.get(_g).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Yhe=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function TLt(t){return"uri"in t}s(TLt,"isCompletionsFiltersInfo");var Ot=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new zhe(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=Fr.createAndMarkAsIssued(),n=void 0){if(r instanceof wy)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&TLt(e)?RI(this.ctx,e.uri):void 0,o=Pv(i)??"",a=iUe(i)??"",c=e?.languageId??"",l=SI(this.ctx).modelId;n??=await this.ctx.get(Gr).getToken();let u=ONe(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",h=n.getTokenValue("cml")??"",m=n.getTokenValue("tid")??"",g=n.endpoints,A={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":h,"X-Copilot-CopilotTrackingId":m},y=this.getGranularityDirectory(),E=this.makeFilterSettings(A),b=y.extendFilters(E),_=await this.getExpConfig(b.newFilterSettings,g);y.update(E,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let S=y.extendFilters(E),P=S.newFilterSettings,B=await this.getExpConfig(P,g),F=new Promise(Y=>setTimeout(Y,t.upcomingDynamicFilterCheckDelayMs));for(let Y of S.otherFilterSettingsToPrefetch)F=F.then(async()=>{await new Promise(ee=>setTimeout(ee,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(Y,g)});return this.prepareForUpcomingFilters(P,g),new wy(r.properties,r.measurements,r.issuedTime,{filters:P,exp:B})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ts).machineId;this.granularityDirectory=new H$(e,this.ctx.get(ky))}return this.granularityDirectory}makeFilterSettings(e){return new B_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return oh.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new B_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=lP(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??aUe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??m3}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??oUe+PM}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextPercent(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextpercent??cUe}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();var KV=Me(YV());var Jhe={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function cp(t){return t in Jhe&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(cp,"isSupportedLanguageId");function JV(t){if(!(t in Jhe))throw new Error(`Unrecognized language: ${t}`);return Jhe[t]}s(JV,"languageIdToWasmLanguage");var Khe=new Map;async function wLt(t){let e;try{e=await wV(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new p3(`Could not load tree-sitter-${t}.wasm`,r):r}return KV.default.Language.load(e)}s(wLt,"loadWasmLanguage");function Zhe(t){let e=JV(t);if(!Khe.has(e)){let r=wLt(e);Khe.set(e,r)}return Khe.get(e)}s(Zhe,"getLanguage");var Xhe=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function Dv(t,e){await KV.default.init({locateFile:s(o=>whe(o),"locateFile")});let r;try{r=new KV.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Xhe(`Could not init Parse for language <${t}>`,o):o}let n=await Zhe(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(Dv,"parseTreeSitter");function lUe(t){switch(JV(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(lUe,"getBlockCloseToken");function _Lt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(_Lt,"innerQuery");var SLt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function uUe(t){return _Lt([SLt],t).length==1}s(uUe,"queryPythonIsDocstring");var Ky=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},hd=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return BM.languageIds.has(e)||NM.languageIds.has(e)||LM.languageIds.has(e)||MM.languageIds.has(e)||FM.languageIds.has(e)||OM.languageIds.has(e)||QM.languageIds.has(e)||UM.languageIds.has(e)}static create(e,r,n,i){if(BM.languageIds.has(e))return new BM(e,r,n,i);if(NM.languageIds.has(e))return new NM(e,r,n,i);if(LM.languageIds.has(e))return new LM(e,r,n,i);if(OM.languageIds.has(e))return new OM(e,r,n,i);if(MM.languageIds.has(e))return new MM(e,r,n,i);if(FM.languageIds.has(e))return new FM(e,r,n,i);if(QM.languageIds.has(e))return new QM(e,r,n,i);if(UM.languageIds.has(e))return new UM(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await Dv(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},eme=class t extends Ky{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},BM=class extends hd{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new eme(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},tme=class t extends Ky{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},NM=class extends hd{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new tme(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},rme=class t extends Ky{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},LM=class extends hd{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new rme(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},nme=class t extends Ky{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},MM=class extends hd{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new nme(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},ime=class t extends Ky{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},FM=class extends hd{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new ime(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},ome=class t extends Ky{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},OM=class extends hd{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new ome(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},sme=class t extends Ky{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},QM=class extends hd{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new sme(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},ame=class t extends Ky{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},UM=class extends hd{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new ame(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};d();function RLt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(RLt,"getProxyFromEnvironment");function kLt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(kLt,"getRejectUnauthorizedFromEnvironment");var dUe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function fUe(t){let e=RLt(t),r=qM({proxy:e,proxyStrictSSL:kLt(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(fUe,"getHttpSettingsFromEnvironment");function qM(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||PLt(n,i)}}catch{return{...t,proxy:""}}}s(qM,"normalizeHttpSettings");function PLt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(PLt,"getAuth");var hUe=Me(require("events"));var cme={};fa(cme,{activationEvents:()=>JLt,badges:()=>KLt,browser:()=>XLt,bugs:()=>HLt,build:()=>MLt,buildType:()=>FLt,categories:()=>zLt,contributes:()=>lme,default:()=>oMt,dependencies:()=>nMt,description:()=>NLt,devDependencies:()=>rMt,displayName:()=>BLt,enabledApiProposals:()=>eMt,engines:()=>VLt,extensionPack:()=>GLt,homepage:()=>ULt,icon:()=>$Lt,keywords:()=>YLt,license:()=>qLt,main:()=>ZLt,name:()=>DLt,overrides:()=>iMt,preview:()=>QLt,pricing:()=>jLt,publisher:()=>OLt,qna:()=>WLt,scripts:()=>tMt,version:()=>LLt});var DLt="copilot",BLt="GitHub Copilot",NLt="Your AI pair programmer",LLt="1.349.0",MLt="1702",FLt="prod",OLt="GitHub",QLt=!1,ULt="https://github.com/features/copilot?editor=vscode",qLt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",HLt={url:"https://github.com/microsoft/vscode/issues"},WLt="https://github.com/github-community/community/discussions/categories/copilot",$Lt="assets/Copilot-App-Icon.png",jLt="Trial",GLt=["GitHub.copilot-chat","GitHub.copilot"],VLt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},zLt=["AI","Chat","Programming Languages","Machine Learning"],YLt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],KLt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],JLt=["onStartupFinished"],XLt="./dist/web",ZLt="./dist/extension",eMt=["inlineCompletionsAdditions"],lme={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},tMt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},rMt={"@azure/identity":"^4.10.1","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.15.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^8.0.0","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.6.0",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.4",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},nMt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.9","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.17.0","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^8.0.2",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},iMt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},oMt={name:DLt,displayName:BLt,description:NLt,version:LLt,build:MLt,buildType:FLt,publisher:OLt,preview:QLt,homepage:ULt,license:qLt,bugs:HLt,qna:WLt,icon:$Lt,pricing:jLt,extensionPack:GLt,engines:VLt,categories:zLt,keywords:YLt,badges:KLt,activationEvents:JLt,browser:XLt,main:ZLt,enabledApiProposals:eMt,contributes:lme,scripts:tMt,devDependencies:rMt,dependencies:nMt,overrides:iMt};var Qt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function mUe(t){return["server","parsingandserver"].includes(t)}s(mUe,"shouldDoServerTrimming");var Og=class{static{s(this,"BlockModeConfig")}},A3=class extends Og{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Ot).overrideBlockMode(n);if(i)return pUe(i,r);let o=e.get(Ot).enableProgressiveReveal(n);return Ao(e,Qt.AlwaysRequestMultiline)??o?pUe("moremultiline",r):r=="ruby"?"parsing":cp(r)?"parsingandserver":"server"}};function sMt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(sMt,"blockModeRequiresTreeSitter");function pUe(t,e){return t==="moremultiline"&&hd.isSupported(e)?t:sMt(t)&&!cp(e)?"server":t}s(pUe,"toApplicableBlockMode");var vu=class{static{s(this,"ConfigProvider")}},y3=class extends vu{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return cMt(e)}getOptionalConfig(e){return lMt(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},l2=class extends vu{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.emitter=new hUe.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=qM(r);this.httpSettings=n,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(r){return this.emitter.on("didChangeHttpSettings",r),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",r)},"dispose")}}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[Qt.ShowEditorCompletions,Qt.EnableAutoCompletions,Qt.DelayCompletions,Qt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function aMt(t){return t?.type==="object"&&"properties"in t}s(aMt,"isContributesObject");function gUe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(gUe,"getConfigKeyRecursively");function cMt(t){if(g3.has(t))return g3.get(t);throw new Error(`Missing config default value: ${U9}.${t}`)}s(cMt,"getConfigDefaultForKey");function lMt(t){return g3.get(t)}s(lMt,"getOptionalConfigDefaultForKey");var g3=new Map([[Qt.DebugOverrideCppHeadersEnableSwitch,!1],[Qt.RelatedFilesVSCodeCSharp,!1],[Qt.RelatedFilesVSCodeTypeScript,!1],[Qt.RelatedFilesVSCode,!1],[Qt.IncludeNeighboringFiles,!1],[Qt.ExcludeRelatedFiles,!1],[Qt.ContextProviders,[]],[Qt.DebugUseEditorFetcher,null],[Qt.DebugUseElectronFetcher,null],[Qt.DebugOverrideLogLevels,{}],[Qt.DebugSnippyOverrideUrl,""],[Qt.FetchStrategy,"auto"],[Qt.UseSubsetMatching,null],[Qt.ContextProviderTimeBudget,void 0],[Qt.DebugOverrideCapiUrl,""],[Qt.DebugTestOverrideCapiUrl,""],[Qt.DebugOverrideProxyUrl,""],[Qt.DebugTestOverrideProxyUrl,""],[Qt.DebugOverrideEngine,""],[Qt.AlwaysRequestMultiline,void 0],[Qt.ModelAlwaysTerminatesSingleline,void 0],[Qt.TrimCompletionsAggressively,void 0],[Qt.CompletionsDebounce,void 0],[Qt.NESXTab,void 0],[Qt.UseWorkspaceContextCoordinator,void 0],[Qt.ShowWorkspaceContextDebugger,!1],[Qt.CompletionsDelay,void 0],[Qt.UseSplitContextPrompt,void 0],[Qt.UseCompletionsComparisonPanel,!1],[Qt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[Qt.ComparisonPanelRandomizedMode,!1],[Qt.ShowEditorCompletions,void 0],[Qt.EnableAutoCompletions,void 0],[Qt.DelayCompletions,void 0],[Qt.FilterCompletions,void 0]]);for(let t of Object.values(Qt)){let e=lme.configuration[0],r=[],n=`${U9}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(aMt(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(g3.has(t))throw new Error(`Duplicate config default value ${U9}.${t}`);g3.set(t,i.default)}}if(!g3.has(t))throw new Error(`Missing config default value ${U9}.${t}`)}function Ao(t,e){return t.get(vu).getConfig(e)}s(Ao,"getConfig");function ANe(t){return t.get(vu).dumpForTelemetry()}s(ANe,"dumpForTelemetry");var ho=class{constructor(){this.packageJson=cme}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function Tde(t){return t.get(ho).isProduction()}s(Tde,"isProduction");function s8e(t){return t.get(ho).getBuildType()==="dev"}s(s8e,"isDevBuild");function _y(t){return t.get(ho).getBuildType()}s(_y,"getBuildType");function yNe(t){return t.get(ho).getBuild()}s(yNe,"getBuild");function J_(t){return t.get(ho).getVersion()}s(J_,"getVersion");var Ts=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function my({name:t,version:e}){return`${t}/${e}`}s(my,"formatNameAndVersion");var ln=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},hy="2025-05-01";function F0(t){let e=t.get(ln);return{"Editor-Version":my(e.getEditorInfo()),"Editor-Plugin-Version":my(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":J_(t)}}s(F0,"editorVersionHeaders");var wg="Iv1.b507a08c87ecfe98",Ql=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??wg}};d();var kI=require("fs"),AUe=require("os"),yUe=Me(require("path")),C3=require("process");var ku=class{static{s(this,"PersistenceManager")}},ume=class extends ku{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await kI.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await kI.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await kI.promises.rm(i):await kI.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await kI.promises.rm(n)}catch{}}async listSettings(){try{return(await kI.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await kI.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function dme(){return C3.env.XDG_CONFIG_HOME&&yUe.isAbsolute(C3.env.XDG_CONFIG_HOME)?C3.env.XDG_CONFIG_HOME+"/github-copilot":(0,AUe.platform)()==="win32"?C3.env.USERPROFILE+"\\AppData\\Local\\github-copilot":C3.env.HOME+"/.config/github-copilot"}s(dme,"getXdgConfigPath");function CUe(){return new ume(dme())}s(CUe,"makeXdgPersistenceManager");d();d();d();var Bv={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var vUe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],EUe={".php":[".blade"]},u2=Object.keys(Bv).flatMap(t=>Bv[t].extensions);var fme=Me(require("node:path"));var E3=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},HM=class{static{s(this,"LanguageDetection")}},pme=new Map,v3=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(Bv)){for(let n of e)pme.set(n,[...pme.get(n)??[],t]);for(let n of r??[])v3.set(n,[...v3.get(n)??[],t])}var hme=class extends HM{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Ui(e.uri),n=fme.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new E3(o.languageId,o.isGuess,a):new E3(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(vUe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=fme.extname(n).toLowerCase();if(i.length>0&&u2.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=EUe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(v3.has(e))return{languageId:v3.get(e)[0],isGuess:!1};let n=pme.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),v3.has(e))return{languageId:v3.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},mme=class extends HM{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new E3("cpp",n.isGuess,n.fileExtension):n}},gme=class extends HM{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new E3(r.languageId,!0,""):this.delegate.detectLanguage(r)}},uMt=new mme(new gme(new hme));function x3({uri:t,languageId:e}){let r=uMt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(x3,"detectLanguage");d();d();d();d();function Nv(t){if(t.isCancellationRequested)throw new XV}s(Nv,"throwIfCancellationRequested");function ez(t){return t instanceof XV?!0:t instanceof Error&&t.name===Ame&&t.message===Ame}s(ez,"isCancellationError");var XV=class extends Error{static{s(this,"CancellationError")}constructor(){super(Ame),this.name=this.message}},Ame="Canceled",ZV=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function d2(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(d2,"isTypeDefinition");var Ps=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=bUe(e,e.length,i),xUe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=bUe(e,e.length,++i),xUe(n,r)):i++;return n.join("")}};function xUe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(xUe,"appendIndent");function bUe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(bUe,"consumeIndent");var Nh=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},jc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await Dv(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new ZV,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,h=0,m=null,g=null;for(let E=0;E<i.length;E++){let b=i[E].name;b==="name"?(u=i[E].node.startIndex,f=i[E].node.endIndex):b==="reference"?(u=i[E].node.startIndex,f=i[E].node.endIndex,c=i[E].node.startIndex,l=i[E].node.endIndex,m=b):b==="body"?(p=i[E].node.startIndex,h=i[E].node.endIndex):b==="comment"?(o=o===0?i[E].node.startIndex:Math.min(o,i[E].node.startIndex),a=Math.max(a,i[E].node.endIndex)):b==="receiver"?g=Ps.fromBounds(i[E].node.startIndex,i[E].node.endIndex).getText(n):(c=i[E].node.startIndex,l=i[E].node.endIndex,m=b)}m==="definition.module.filescoped"&&(h=n.length,l=h);let A=Ps.fromBounds(c,l),y=c>0||l>0||u>0||f>0?new Nh(r,"","",Ps.fromBounds(o,a),Ps.fromBounds(u,f),Ps.fromBounds(p,h),A,t.kindFromString(m),0):null;if(y){t.updateScopesForSymbol(e,y);let E=y.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new Nh(r,b,E.substring(E.lastIndexOf(".")+1),y.commentRange,y.nameRange,y.bodyRange,y.extentRange,y.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var tz=class extends jc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,dMt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},rz=class extends jc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,pMt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,hMt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},nz=class extends jc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,fMt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,h=c?new Ps(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Ps(f,p-f),m=new Ps(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=Ps.empty,A=Ps.empty,y=u.substring(u.lastIndexOf("/")+1);i.add(new Nh(e,u,y,g,h,A,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},dMt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,fMt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,pMt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,hMt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var oz=class extends jc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,mMt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},sz=class extends jc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,AMt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,yMt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},az=class extends jc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,gMt)).filter(i=>i.kind===0)}},mMt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,gMt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,AMt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,yMt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var CMt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),cz=class extends jc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,vMt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},lz=class extends jc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,EMt)).filter(i=>!CMt.has(i.unqualifiedName))}};var vMt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,EMt=`
(call_expression function: (_) @name) @reference
`;d();var xMt=new Set(["int","str","float","bool","list","dict","tuple","set"]),uz=class extends jc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,bMt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},dz=class extends jc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,IMt)).filter(i=>!xMt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,wMt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},fz=class extends jc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,TMt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new Ps(c.node.startIndex,c.node.endIndex-c.node.startIndex):new Ps(f.node.startIndex,u.node.endIndex-f.node.endIndex),h=new Ps(u.node.startIndex,u.node.endIndex-u.node.startIndex),m=Ps.empty,g=Ps.empty,A=f.node.text,y=A.split(".").pop()||A,E;a?E=`${l.node.text}.${a.node.text}`:E=l.node.text,i.add(new Nh(e,E,y,m,p,g,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},bMt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,IMt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,TMt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,wMt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var _Mt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),b3=class extends jc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,SMt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},I3=class extends jc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,RMt)).filter(i=>!_Mt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var SMt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,RMt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var kMt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),pz=class extends b3{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,PMt),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},hz=class extends I3{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,DMt),super.extractReferences(e,r)]);return[...n.filter(o=>!kMt.has(o.unqualifiedName)),...i]}},PMt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,DMt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var WM=[{symbolExtractor:new oz,referenceExtractor:new sz,importExtractor:new az,languageId:"java"},{symbolExtractor:new tz,referenceExtractor:new rz,importExtractor:new nz,languageId:"go"},{symbolExtractor:new uz,referenceExtractor:new dz,importExtractor:new fz,languageId:"python"},{symbolExtractor:new b3,referenceExtractor:new I3,languageId:"typescript"},{symbolExtractor:new pz,referenceExtractor:new hz,languageId:"typescriptreact"},{symbolExtractor:new cz,referenceExtractor:new lz,languageId:"javascript"}];function IUe(t){let e=x3({uri:t});if(e&&WM.some(r=>e===r.languageId))return e}s(IUe,"getSupportedLanguageIdForMultiLanguageProvider");var TUe=new Map(WM.map(t=>[t.languageId,t.referenceExtractor])),mz=new Map(WM.map(t=>[t.languageId,t.symbolExtractor])),wUe=new Map(WM.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),yme=WM.map(t=>Bv[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function Cme(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Cme,"virtualNode");function _Ue(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(_Ue,"lineNode");function vme(t){return{type:"blank",lineNumber:t,subs:[]}}s(vme,"blankNode");function gz(t){return{type:"top",indentation:-1,subs:t??[]}}s(gz,"topNode");function Pu(t){return t.type==="blank"}s(Pu,"isBlank");function f2(t){return t.type==="line"}s(f2,"isLine");function p2(t){return t.type==="virtual"}s(p2,"isVirtual");d();function SUe(t,e){return md(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(SUe,"clearLabelsIf");function h2(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>h2(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>h2(r,e)),label:t.label?e(t.label):void 0}}}s(h2,"mapLabels");function md(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(md,"visitTree");function Eme(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),md(t,o,n),i}s(Eme,"foldTree");function Az(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:gz()}s(Az,"rebuildTree");d();function NMt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[_Ue(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,h=[],m=u,g;for(;m<n.length&&(n[m]===""||r[m]>f);)if(n[m]==="")g===void 0&&(g=m),m+=1;else{if(g!==void 0){for(let A=g;A<m;A++)h.push(vme(A));g=void 0}[p,m]=i(m),h.push(p)}return g!==void 0&&(m=g),[h,m]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(vme(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return gz(a)}s(NMt,"parseRaw");function $M(t,e){function r(n){if(f2(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),md(t,r,"bottomUp")}s($M,"labelLines");function yz(t){function e(r){if(p2(r)&&r.label===void 0){let n=r.subs.filter(i=>!Pu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),md(t,e,"bottomUp")}s(yz,"labelVirtualInherited");function jM(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(jM,"buildLabelRules");function xme(t){let r=Az(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&f2(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(f2(c)||p2(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Pu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),h=o.subs.slice(f),m=h.length>0?[Cme(c.indentation,h,"newVirtual")]:[];o.subs=[...p,...m,c]}else o.subs.push(c)}else i.push(c),Pu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return SUe(t,n=>n==="newVirtual"),r}s(xme,"combineClosersAndOpeners");function RUe(t,e=Pu,r){return Az(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=Cme(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],h=e(p);!h&&l&&(u(),a=[]),l=h,a.push(p),Pu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(RUe,"groupBlocks");function m2(t){return Az(t,s(function(r){return p2(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&p2(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(m2,"flattenVirtual");var LMt={opener:/^[[({]/,closer:/^[\])}]/},MMt=jM(LMt),kUe={};function bme(t,e){kUe[t]=e}s(bme,"registerLanguageSpecificParser");function g2(t,e){let r=NMt(t),n=kUe[e??""];return n?n(r):($M(r,MMt),xme(r))}s(g2,"parseTree");var FMt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},OMt=jM(FMt);function PUe(t){let e=t;return $M(e,OMt),e=xme(e),e=m2(e),yz(e),md(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!Pu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(PUe,"processJava");d();var QMt={heading:/^# /,subheading:/^## /,subsubheading:/### /},UMt=jM(QMt);function DUe(t){let e=t;if($M(e,UMt),Pu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||Pu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=RUe(e),e=m2(e),yz(e),e}s(DUe,"processMarkdown");d();function BUe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(BUe,"deparseLine");bme("markdown",DUe);bme("java",PUe);var qMt={worthUp:.9,worthSibling:.88,worthDown:.8};function Ime(t,e,r=vo(),n=qMt){let i=h2(t,o=>o?1:void 0);return md(i,o=>{if(Pu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),md(i,o=>{if(Pu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),HMt(i,e,r)}s(Ime,"fromTreeWithFocussedLines");function HMt(t,e,r=vo()){let n=Eme(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[BUe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Ut(n,e,r)}s(HMt,"fromTreeWithValuedLines");function lp(t,e=!0,r=!0,n,i=vo()){let o=typeof t=="string"?g2(t):g2(t.source,t.languageId);m2(o);let a=h2(o,c=>e&&c!=="closer");return md(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&md(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&md(a,c=>{c.label||=(f2(c)||Pu(c))&&c.lineNumber==0},"topDown"),Ime(a,n,i)}s(lp,"elidableTextForSourceCode");d();var GM=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>vo().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Ut=class t{constructor(e,r,n=vo()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new GM(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&lp(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>vo().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=$Mt(this.lines,i);if(l<=e)return Tme(c);jMt(u,a);let f=l;for(;f>e&&u.length>0;){let h=u.shift().originalIndex,m=c[h];if(m.markedForRemoval)continue;let g=n?GMt(c,h):"",A=NUe(g,r,o,m);c[h]=A,f-=m.cost,f+=A.cost;let y=h+1;if(y<c.length){let b=c[y];Cz(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let E=h-1;if(E>=0){let b=c[E];Cz(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return Tme([NUe("",r,o)]);let p=c.filter(h=>!h.markedForRemoval);for(let h=p.length-1;h>0;h--)Cz(p[h],r)&&Cz(p[h-1],r)&&p.splice(h,1);return Tme(p)}};function WMt(t){return t?.text.match(/^\s*/)?.[0]??""}s(WMt,"getIndentation");function Cz(t,e){return t?.text.trim()===e.trim()}s(Cz,"isEllipsis");function Tme(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(Tme,"produceElidedText");function $Mt(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s($Mt,"initializeElisionContext");function jMt(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(jMt,"sortPriorityQueue");function GMt(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=WMt(i);break}}return r}s(GMt,"getClosestIndentation");function NUe(t,e,r,n){let i=t+e;return new GM(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(NUe,"getNewEllipsis");d();var LUe=require("fs");async function MUe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let h=p.node.fileName.toLowerCase(),m=o.get(h);m?m.symbols.push(p):o.set(h,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,h)=>{let m=o.get(p).topRank,g=o.get(h).topRank;return m-g});for(let p of f){let h=o.get(p).symbols;if(h.length===0)continue;let m=h[0].node.fileName,g=h.reduce((A,y)=>A+y.node.extentRange.length,0);for(let A of h){if(c<=5)return u;Nv(i);let y=A.node.extentRange.length/g,E=Math.min(c,y*l),b=(await VMt([A])).elide(E).getText();c-=n.tokenLength(b),u.push({uri:m,value:b})}}return u}s(MUe,"symbolRangesToCodeSnippets");async function VMt(t){if(t.length===0)return new Ut([]);let e=t[0].node.fileName,r=[],n="";try{let i=ys(e);i&&(n=(await LUe.promises.readFile(i)).toString())}catch{}for(let i of t)FUe(i,n).forEach(o=>r.push(o));return new Ut(r)}s(VMt,"sameFileSymbolRangeToElidableText");function FUe(t,e){let n=[],i=t.node,o=e.substring(wme(e,i.commentRange.start),i.commentRange.end);n.push([_me(o),1-3e-4]);let a=wme(e,i.bodyRange.start),c=wme(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(d2(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([_me(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...FUe(u,e));else{let u=1-(d2(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([_me(f),u])}return d2(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(FUe,"prepareForElidableText");function wme(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(wme,"shiftLeftToNearestLineEndingOrAlphanumeric");function _me(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(_me,"trimLineEndingsAndTrailingWhitespace");var Sme=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},PI=class extends Sme{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];Nv(a);let l=await c.extractReferences(e,r);Nv(a);let u=Array.from(l);u.sort((m,g)=>this.compareSymbolRangesByProximityToCaret(m,g,n));let f=[],p=new Set,h=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(h=h.filter(m=>d2(m.kind)));for(let m of h)p.has(JSON.stringify(m))||(p.add(JSON.stringify(m)),f.push(await this.makeSymbolRangeNodeFromDefinition(m,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let h=l(p),m=u.get(h)??[];u.set(h,[...m,p])}let f=[];for(let p of i){let h=u.get(c(p));if(!(!h||h.length>r.mlcpMaxSymbolMatches)){if(f.length+h.length>r.mlcpMaxContextItems){f.push(...h.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...h)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(Nv(r),d2(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},vz=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new PI(e,r,!0,!0)),this.strategies.set("java",new PI(e,r,!0,!0)),this.strategies.set("python",new PI(e,r,!0,!1)),this.strategies.set("typescript",new PI(e,r,!0,!0)),this.strategies.set("typescriptreact",new PI(e,r,!0,!0)),this.strategies.set("javascript",new PI(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);Nv(c);let u=vo();return MUe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var A2={Id:"id"},up={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},to={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var Ez=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new Rme(A2.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},VM=class t extends Ez{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${up.FilePath}');`]);this.fields=[new KM(up.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Xf(up.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},zM=class t extends Ez{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${to.DocumentId}', '${to.ExtentStart}', '${to.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${to.UnqualifiedName}');`],`FOREIGN KEY(${to.DocumentId}) REFERENCES Document(${A2.Id}) ON DELETE CASCADE`);this.fields=[new Xf(to.DocumentId),new KM(to.FullyQualifiedName,{notNull:!0}),new KM(to.UnqualifiedName,{notNull:!0}),new Xf(to.CommentStart,{notNull:!0}),new Xf(to.CommentLength,{notNull:!0}),new Xf(to.NameStart,{notNull:!0}),new Xf(to.NameLength,{notNull:!0}),new Xf(to.BodyStart,{notNull:!0}),new Xf(to.BodyLength,{notNull:!0}),new Xf(to.ExtentStart,{notNull:!0}),new Xf(to.ExtentLength,{notNull:!0}),new Xf(to.SymbolKind,{notNull:!0}),new Xf(to.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},YM=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},KM=class extends YM{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},Xf=class extends YM{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Rme=class extends YM{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var xz=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?Lh(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Lh(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${A2.Id} = ?`,[e])}},Lv=class t extends xz{static{s(this,"DocumentTable")}static{this.tableName=VM.tableName}createQueryGenerator(){return new VM}async updateTimestamp(e,r){let n=await this.init;n&&await Lh(n,`UPDATE ${t.tableName} SET ${up.LastWriteTimeUtc} = ? WHERE ${up.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Lh(r,`DELETE FROM ${t.tableName} WHERE ${up.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Lh(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${up.FilePath} = ?`,[e]):[]}},Gc=class t extends xz{static{s(this,"SymbolTable")}static{this.tableName=zM.tableName}createQueryGenerator(){return new zM}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Lh(r,`DELETE FROM ${t.tableName} WHERE ${to.DocumentId} = ?`,[e])}};async function Lh(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(Lh,"runPromisifiedDBQuery");var Tz=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Lv.tableName} ON ${Gc.tableName}.${to.DocumentId} = ${Lv.tableName}.${A2.Id}`;this.db=this.initDb(e),this.documentTable=new Lv(this.db),this.symbolTable=new Gc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Me(YUe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Lh(n,"pragma journal_mode=wal",[]),await Lh(n,"pragma synchronous=normal",[]),await Lh(n,"pragma optimize=0x10002",[]),await Lh(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${to.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${to.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${to.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${to.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${Lv.tableName}.${up.FilePath} = ? AND ${Gc.tableName}.${to.ExtentStart} <= ? AND (${Gc.tableName}.${to.ExtentStart} + ${Gc.tableName}.${to.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${Lv.tableName}.${up.FilePath} = ? AND ${Gc.tableName}.${to.ExtentStart} >= ? AND (${Gc.tableName}.${to.ExtentStart} + ${Gc.tableName}.${to.ExtentLength}) <= ?`,`ORDER BY ${Gc.tableName}.${to.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Gc.tableName}`,this.innerJoinStatement,`WHERE ${Lv.tableName}.${up.FilePath} = ? AND ${Gc.tableName}.${to.FullyQualifiedName} LIKE ?`,`ORDER BY ${Gc.tableName}.${to.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Lh(n,e,r)):[]}};var wz=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new Tz(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return _3(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),Nv(n)}return _3(i)}async getDefinitionsAsync(e){return _3(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return _3(n)}async findSymbolsContainedByRangeAsync(e,r,n){return _3(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return _3(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function _3(t){return t.map(e=>new Nh(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Ps(e.commentStart,e.commentLength),new Ps(e.nameStart,e.nameLength),new Ps(e.bodyStart,e.bodyLength),new Ps(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(_3,"symbolsToSymbolRanges");var Sz=Me(require("fs/promises"));var _z=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new wz(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=ys(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await Sz.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await Sz.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let h=await p.extractSymbols(e,l);f=[...u,...h]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function Lme(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>eFt(r))}s(Lme,"isIndexWorkerData");var XM=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},DI=class extends XM{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},Rz=class extends XM{constructor(r){super(gd.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},gd={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},kz=class extends DI{constructor(r,n,i){super(r,gd.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},Pz=class extends DI{constructor(r,n){super(r,gd.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},Dz=class extends DI{constructor(r,n,i){super(r,gd.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},Bz=class extends DI{constructor(r,n){super(r,gd.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},Nz=class extends DI{constructor(r,n,i,o,a,c){super(r,gd.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},Lz=class extends DI{static{s(this,"ExitRequest")}constructor(e){super(e,gd.Exit)}},Qg=class extends XM{constructor(r,n,i){super(gd.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function eFt(t){return"databaseFilePath"in t&&"rootPath"in t}s(eFt,"isIndexableWorkspaceFolder");var KUe=Me(pi()),BI=require("worker_threads");var Mz=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new _z(e,mz,wUe,r),this.contextRetreival=new vz(this.index.reader,TUe)}},Mme=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=$a(i.rootPath);this.indices.set(o,new Mz(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new KUe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case gd.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case gd.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case gd.Cancel:n.get(e.id)?.cancel(),o=new Qg(e.id,void 0,void 0);break;case gd.Exit:o=await this.dispatchExit(e,r,i.token);break;case gd.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case gd.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case gd.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Qg(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=$a(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Qg(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=$a(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Qg(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=$a(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Qg(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new Qg(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=$a(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new Mz(e.databaseFilePath)),new Qg(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=$a(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new Qg(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function JUe(){return Lme(BI.workerData)}s(JUe,"isIndexWorker");function XUe(){let t=BI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Lme(BI.workerData))throw new Error("Worker data must provide a valid database path.");let e=BI.workerData.cwd;process.cwd=()=>e,new Mme(t,BI.workerData.indexWorkspaceRoots,BI.workerData.params)}s(XUe,"runIndexWorker");d();var ZM=Me(require("util"));function ZUe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(_y(t)==="dev")return t.get(Oc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",ZM.format(...i)))},e.dir=(n,i)=>r(4,ZM.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(ZM.format(...n));i.name="Trace",e.log(i)},e}s(ZUe,"createConsole");var tx=Me(require("fs/promises")),BAt=Me(require("os")),PU=Me(require("path")),Mm=Me(qg()),NAt=require("worker_threads");d();d();var vY=require("assert");d();d();var pOt={right:yOt,center:COt},hOt=0,pY=1,mOt=2,hY=3,cge=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&dp.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),dp.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=dp.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>dp.stringWidth(a)&&(f+=" ".repeat(u-dp.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let h=pOt[e[c].align];f=h(f,u),dp.stringWidth(f)<u&&(f+=" ".repeat((l||0)-dp.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[hY]&&(o+=" ".repeat(p[hY])),o+=Vqe(e[c],f,"| "),o+=f,o+=Vqe(e[c],f," |"),p[pY]&&(o+=" ".repeat(p[pY])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=dp.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=dp.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[hOt]||0).fill("")),i.push(...new Array(o.padding[mOt]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[hY]||0)+(e.padding[pY]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||dp.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,gOt(e[c])):a)}};function Vqe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(Vqe,"addBorder");function gOt(t){let e=t.padding||[],r=1+(e[hY]||0)+(e[pY]||0);return t.border?r+4:r}s(gOt,"_minWidth");function AOt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(AOt,"getWindowWidth");function yOt(t,e){t=t.trim();let r=dp.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(yOt,"alignRight");function COt(t,e){t=t.trim();let r=dp.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(COt,"alignCenter");var dp;function zqe(t,e){return dp=e,new cge({width:t?.width||AOt(),wrap:t?.wrap})}s(zqe,"cliui");d();var Yqe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function lge(t){return t.replace(Yqe,"")}s(lge,"stripAnsi");function Kqe(t,e){let[r,n]=t.match(Yqe)||["",""];t=lge(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(Kqe,"wrap");function uge(t){return zqe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:lge,wrap:Kqe})}s(uge,"ui");d();var P3=require("path"),mY=require("fs");function dge(t,e){let r=(0,P3.resolve)(".",t),n;for((0,mY.statSync)(r).isDirectory()||(r=(0,P3.dirname)(r));;){if(n=e(r,(0,mY.readdirSync)(r)),n)return(0,P3.resolve)(r,n);if(r=(0,P3.dirname)(n=r),n===r)break}}s(dge,"default");var fHe=require("util"),pHe=require("fs"),hHe=require("url");d();var tHe=require("util"),CY=require("path");d();function E2(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(E2,"camelCase");function gY(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(gY,"decamelize");function AY(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(AY,"looksLikeNumber");d();d();function Jqe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(Jqe,"tokenizeArgString");d();var qh;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(qh||(qh={}));var Mv,yY=class{static{s(this,"YargsParser")}constructor(e){Mv=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=Jqe(e),o=typeof e=="string",a=vOt(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],h=p?"--":"_",m=Object.create(null),g=Object.create(null),A=n.__||Mv.format,y={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},E=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(se){let le=typeof se=="object"?se.key:se,qe=Object.keys(se).map(function(Be){return{boolean:"bools",string:"strings",number:"numbers"}[Be]}).filter(Boolean).pop();qe&&(y[qe][le]=!0),y.arrays[le]=!0,y.keys.push(le)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(se){y.bools[se]=!0,y.keys.push(se)}),[].concat(n.string||[]).filter(Boolean).forEach(function(se){y.strings[se]=!0,y.keys.push(se)}),[].concat(n.number||[]).filter(Boolean).forEach(function(se){y.numbers[se]=!0,y.keys.push(se)}),[].concat(n.count||[]).filter(Boolean).forEach(function(se){y.counts[se]=!0,y.keys.push(se)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(se){y.normalize[se]=!0,y.keys.push(se)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([se,le])=>{typeof le=="number"&&(y.nargs[se]=le,y.keys.push(se))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([se,le])=>{typeof le=="function"&&(y.coercions[se]=le,y.keys.push(se))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(se){y.configs[se]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([se,le])=>{(typeof le=="boolean"||typeof le=="function")&&(y.configs[se]=le)})),Oe(n.key,a,n.default,y.arrays),Object.keys(l).forEach(function(se){(y.aliases[se]||[]).forEach(function(le){l[le]=l[se]})});let _=null;We();let S=[],P=Object.assign(Object.create(null),{_:[]}),B={};for(let se=0;se<i.length;se++){let le=i[se],qe=le.replace(/^-{3,}/,"---"),Be,xe,je,et,pt,Lt;if(le!=="--"&&/^-/.test(le)&&St(le))F(le);else if(qe.match(/^---+(=|$)/)){F(le);continue}else if(le.match(/^--.+=/)||!c["short-option-groups"]&&le.match(/^-.+=/))et=le.match(/^--?([^=]+)=([\s\S]*)$/),et!==null&&Array.isArray(et)&&et.length>=3&&(Te(et[1],y.arrays)?se=ee(se,et[1],i,et[2]):Te(et[1],y.nargs)!==!1?se=Y(se,et[1],i,et[2]):V(et[1],et[2],!0));else if(le.match(b)&&c["boolean-negation"])et=le.match(b),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],V(xe,Te(xe,y.arrays)?[!1]:!1));else if(le.match(/^--.+/)||!c["short-option-groups"]&&le.match(/^-[^-]+/))et=le.match(/^--?(.+)/),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],Te(xe,y.arrays)?se=ee(se,xe,i):Te(xe,y.nargs)!==!1?se=Y(se,xe,i):(pt=i[se+1],pt!==void 0&&(!pt.match(/^-/)||pt.match(E))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(V(xe,pt),se++):V(xe,mt(xe))));else if(le.match(/^-.\..+=/))et=le.match(/^-([^=]+)=([\s\S]*)$/),et!==null&&Array.isArray(et)&&et.length>=3&&V(et[1],et[2]);else if(le.match(/^-.\..+/)&&!le.match(E))pt=i[se+1],et=le.match(/^-(.\..+)/),et!==null&&Array.isArray(et)&&et.length>=2&&(xe=et[1],pt!==void 0&&!pt.match(/^-/)&&!Te(xe,y.bools)&&!Te(xe,y.counts)?(V(xe,pt),se++):V(xe,mt(xe)));else if(le.match(/^-[^-]+/)&&!le.match(E)){je=le.slice(1,-1).split(""),Be=!1;for(let Kt=0;Kt<je.length;Kt++){if(pt=le.slice(Kt+2),je[Kt+1]&&je[Kt+1]==="="){Lt=le.slice(Kt+3),xe=je[Kt],Te(xe,y.arrays)?se=ee(se,xe,i,Lt):Te(xe,y.nargs)!==!1?se=Y(se,xe,i,Lt):V(xe,Lt),Be=!0;break}if(pt==="-"){V(je[Kt],pt);continue}if(/[A-Za-z]/.test(je[Kt])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(pt)&&Te(pt,y.bools)===!1){V(je[Kt],pt),Be=!0;break}if(je[Kt+1]&&je[Kt+1].match(/\W/)){V(je[Kt],pt),Be=!0;break}else V(je[Kt],mt(je[Kt]))}xe=le.slice(-1)[0],!Be&&xe!=="-"&&(Te(xe,y.arrays)?se=ee(se,xe,i):Te(xe,y.nargs)!==!1?se=Y(se,xe,i):(pt=i[se+1],pt!==void 0&&(!/^(-|--)[^-]/.test(pt)||pt.match(E))&&!Te(xe,y.bools)&&!Te(xe,y.counts)||/^(true|false)$/.test(pt)?(V(xe,pt),se++):V(xe,mt(xe))))}else if(le.match(/^-[0-9]$/)&&le.match(E)&&Te(le.slice(1),y.bools))xe=le.slice(1),V(xe,mt(xe));else if(le==="--"){S=i.slice(se+1);break}else if(c["halt-at-non-option"]){S=i.slice(se);break}else F(le)}J(P,!0),J(P,!1),K(P),W(),te(P,y.aliases,l,!0),ie(P),c["set-placeholder-key"]&&ae(P),Object.keys(y.counts).forEach(function(se){pe(P,se.split("."))||V(se,0)}),p&&S.length&&(P[h]=[]),S.forEach(function(se){P[h].push(se)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(P).filter(se=>se!=="--"&&se.includes("-")).forEach(se=>{delete P[se]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(se=>a[se])).forEach(se=>{c["camel-case-expansion"]&&se.includes("-")&&delete P[se.split(".").map(le=>E2(le)).join(".")],delete P[se]});function F(se){let le=X("_",se);(typeof le=="string"||typeof le=="number")&&P._.push(le)}s(F,"pushPositional");function Y(se,le,qe,Be){let xe,je=Te(le,y.nargs);if(je=typeof je!="number"||isNaN(je)?1:je,je===0)return ye(Be)||(_=Error(A("Argument unexpected for: %s",le))),V(le,mt(le)),se;let et=ye(Be)?0:1;if(c["nargs-eats-options"])qe.length-(se+1)+et<je&&(_=Error(A("Not enough arguments following: %s",le))),et=je;else{for(xe=se+1;xe<qe.length&&(!qe[xe].match(/^-[^0-9]/)||qe[xe].match(E)||St(qe[xe]));xe++)et++;et<je&&(_=Error(A("Not enough arguments following: %s",le)))}let pt=Math.min(et,je);for(!ye(Be)&&pt>0&&(V(le,Be),pt--),xe=se+1;xe<pt+se+1;xe++)V(le,qe[xe]);return se+pt}s(Y,"eatNargs");function ee(se,le,qe,Be){let xe=[],je=Be||qe[se+1],et=Te(le,y.nargs);if(Te(le,y.bools)&&!/^(true|false)$/.test(je))xe.push(!0);else if(ye(je)||ye(Be)&&/^-/.test(je)&&!E.test(je)&&!St(je)){if(l[le]!==void 0){let pt=l[le];xe=Array.isArray(pt)?pt:[pt]}}else{ye(Be)||xe.push(U(le,Be,!0));for(let pt=se+1;pt<qe.length&&!(!c["greedy-arrays"]&&xe.length>0||et&&typeof et=="number"&&xe.length>=et||(je=qe[pt],/^-/.test(je)&&!E.test(je)&&!St(je)));pt++)se=pt,xe.push(U(le,je,o))}return typeof et=="number"&&(et&&xe.length<et||isNaN(et)&&xe.length===0)&&(_=Error(A("Not enough arguments following: %s",le))),V(le,xe),se}s(ee,"eatArray");function V(se,le,qe=o){if(/-/.test(se)&&c["camel-case-expansion"]){let je=se.split(".").map(function(et){return E2(et)}).join(".");H(se,je)}let Be=U(se,le,qe),xe=se.split(".");Ae(P,xe,Be),y.aliases[se]&&y.aliases[se].forEach(function(je){let et=je.split(".");Ae(P,et,Be)}),xe.length>1&&c["dot-notation"]&&(y.aliases[xe[0]]||[]).forEach(function(je){let et=je.split("."),pt=[].concat(xe);pt.shift(),et=et.concat(pt),(y.aliases[se]||[]).includes(et.join("."))||Ae(P,et,Be)}),Te(se,y.normalize)&&!Te(se,y.arrays)&&[se].concat(y.aliases[se]||[]).forEach(function(et){Object.defineProperty(B,et,{enumerable:!0,get(){return le},set(pt){le=typeof pt=="string"?Mv.normalize(pt):pt}})})}s(V,"setArg");function H(se,le){y.aliases[se]&&y.aliases[se].length||(y.aliases[se]=[le],m[le]=!0),y.aliases[le]&&y.aliases[le].length||H(le,se)}s(H,"addNewAlias");function U(se,le,qe){qe&&(le=EOt(le)),(Te(se,y.bools)||Te(se,y.counts))&&typeof le=="string"&&(le=le==="true");let Be=Array.isArray(le)?le.map(function(xe){return X(se,xe)}):X(se,le);return Te(se,y.counts)&&(ye(Be)||typeof Be=="boolean")&&(Be=fge()),Te(se,y.normalize)&&Te(se,y.arrays)&&(Array.isArray(le)?Be=le.map(xe=>Mv.normalize(xe)):Be=Mv.normalize(le)),Be}s(U,"processValue");function X(se,le){return!c["parse-positional-numbers"]&&se==="_"||!Te(se,y.strings)&&!Te(se,y.bools)&&!Array.isArray(le)&&(AY(le)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${le}`)))||!ye(le)&&Te(se,y.numbers))&&(le=Number(le)),le}s(X,"maybeCoerceNumber");function K(se){let le=Object.create(null);te(le,y.aliases,l),Object.keys(y.configs).forEach(function(qe){let Be=se[qe]||le[qe];if(Be)try{let xe=null,je=Mv.resolve(Mv.cwd(),Be),et=y.configs[qe];if(typeof et=="function"){try{xe=et(je)}catch(pt){xe=pt}if(xe instanceof Error){_=xe;return}}else xe=Mv.require(je);j(xe)}catch(xe){xe.name==="PermissionDenied"?_=xe:se[qe]&&(_=Error(A("Invalid JSON config file: %s",Be)))}})}s(K,"setConfig");function j(se,le){Object.keys(se).forEach(function(qe){let Be=se[qe],xe=le?le+"."+qe:qe;typeof Be=="object"&&Be!==null&&!Array.isArray(Be)&&c["dot-notation"]?j(Be,xe):(!pe(P,xe.split("."))||Te(xe,y.arrays)&&c["combine-arrays"])&&V(xe,Be)})}s(j,"setConfigObject");function W(){typeof u<"u"&&u.forEach(function(se){j(se)})}s(W,"setConfigObjects");function J(se,le){if(typeof f>"u")return;let qe=typeof f=="string"?f:"",Be=Mv.env();Object.keys(Be).forEach(function(xe){if(qe===""||xe.lastIndexOf(qe,0)===0){let je=xe.split("__").map(function(et,pt){return pt===0&&(et=et.substring(qe.length)),E2(et)});(le&&y.configs[je.join(".")]||!le)&&!pe(se,je)&&V(je.join("."),Be[xe])}})}s(J,"applyEnvVars");function ie(se){let le,qe=new Set;Object.keys(se).forEach(function(Be){if(!qe.has(Be)&&(le=Te(Be,y.coercions),typeof le=="function"))try{let xe=X(Be,le(se[Be]));[].concat(y.aliases[Be]||[],Be).forEach(je=>{qe.add(je),se[je]=xe})}catch(xe){_=xe}})}s(ie,"applyCoercions");function ae(se){return y.keys.forEach(le=>{~le.indexOf(".")||typeof se[le]>"u"&&(se[le]=void 0)}),se}s(ae,"setPlaceholderKeys");function te(se,le,qe,Be=!1){Object.keys(qe).forEach(function(xe){pe(se,xe.split("."))||(Ae(se,xe.split("."),qe[xe]),Be&&(g[xe]=!0),(le[xe]||[]).forEach(function(je){pe(se,je.split("."))||Ae(se,je.split("."),qe[xe])}))})}s(te,"applyDefaultsAndAliases");function pe(se,le){let qe=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(xe){qe=qe[xe]||{}});let Be=le[le.length-1];return typeof qe!="object"?!1:Be in qe}s(pe,"hasKey");function Ae(se,le,qe){let Be=se;c["dot-notation"]||(le=[le.join(".")]),le.slice(0,-1).forEach(function(Lt){Lt=Xqe(Lt),typeof Be=="object"&&Be[Lt]===void 0&&(Be[Lt]={}),typeof Be[Lt]!="object"||Array.isArray(Be[Lt])?(Array.isArray(Be[Lt])?Be[Lt].push({}):Be[Lt]=[Be[Lt],{}],Be=Be[Lt][Be[Lt].length-1]):Be=Be[Lt]});let xe=Xqe(le[le.length-1]),je=Te(le.join("."),y.arrays),et=Array.isArray(qe),pt=c["duplicate-arguments-array"];!pt&&Te(xe,y.nargs)&&(pt=!0,(!ye(Be[xe])&&y.nargs[xe]===1||Array.isArray(Be[xe])&&Be[xe].length===y.nargs[xe])&&(Be[xe]=void 0)),qe===fge()?Be[xe]=fge(Be[xe]):Array.isArray(Be[xe])?pt&&je&&et?Be[xe]=c["flatten-duplicate-arrays"]?Be[xe].concat(qe):(Array.isArray(Be[xe][0])?Be[xe]:[Be[xe]]).concat([qe]):!pt&&!!je==!!et?Be[xe]=qe:Be[xe]=Be[xe].concat([qe]):Be[xe]===void 0&&je?Be[xe]=et?qe:[qe]:pt&&!(Be[xe]===void 0||Te(xe,y.counts)||Te(xe,y.bools))?Be[xe]=[Be[xe],qe]:Be[xe]=qe}s(Ae,"setKey");function Oe(...se){se.forEach(function(le){Object.keys(le||{}).forEach(function(qe){y.aliases[qe]||(y.aliases[qe]=[].concat(a[qe]||[]),y.aliases[qe].concat(qe).forEach(function(Be){if(/-/.test(Be)&&c["camel-case-expansion"]){let xe=E2(Be);xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),m[xe]=!0)}}),y.aliases[qe].concat(qe).forEach(function(Be){if(Be.length>1&&/[A-Z]/.test(Be)&&c["camel-case-expansion"]){let xe=gY(Be,"-");xe!==qe&&y.aliases[qe].indexOf(xe)===-1&&(y.aliases[qe].push(xe),m[xe]=!0)}}),y.aliases[qe].forEach(function(Be){y.aliases[Be]=[qe].concat(y.aliases[qe].filter(function(xe){return Be!==xe}))}))})})}s(Oe,"extendAliases");function Te(se,le){let qe=[].concat(y.aliases[se]||[],se),Be=Object.keys(le),xe=qe.find(je=>Be.includes(je));return xe?le[xe]:!1}s(Te,"checkAllAliases");function Je(se){let le=Object.keys(y);return[].concat(le.map(Be=>y[Be])).some(function(Be){return Array.isArray(Be)?Be.includes(se):Be[se]})}s(Je,"hasAnyFlag");function Fe(se,...le){return[].concat(...le).some(function(Be){let xe=se.match(Be);return xe&&Je(xe[1])})}s(Fe,"hasFlagsMatching");function ct(se){if(se.match(E)||!se.match(/^-[^-]+/))return!1;let le=!0,qe,Be=se.slice(1).split("");for(let xe=0;xe<Be.length;xe++){if(qe=se.slice(xe+2),!Je(Be[xe])){le=!1;break}if(Be[xe+1]&&Be[xe+1]==="="||qe==="-"||/[A-Za-z]/.test(Be[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(qe)||Be[xe+1]&&Be[xe+1].match(/\W/))break}return le}s(ct,"hasAllShortFlags");function St(se){return c["unknown-options-as-args"]&&vt(se)}s(St,"isUnknownOptionAsArg");function vt(se){return se=se.replace(/^-{3,}/,"--"),se.match(E)||ct(se)?!1:!Fe(se,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(vt,"isUnknownOption");function mt(se){return!Te(se,y.bools)&&!Te(se,y.counts)&&`${se}`in l?l[se]:ue(Ue(se))}s(mt,"defaultValue");function ue(se){return{[qh.BOOLEAN]:!0,[qh.STRING]:"",[qh.NUMBER]:void 0,[qh.ARRAY]:[]}[se]}s(ue,"defaultForType");function Ue(se){let le=qh.BOOLEAN;return Te(se,y.strings)?le=qh.STRING:Te(se,y.numbers)?le=qh.NUMBER:Te(se,y.bools)?le=qh.BOOLEAN:Te(se,y.arrays)&&(le=qh.ARRAY),le}s(Ue,"guessType");function ye(se){return se===void 0}s(ye,"isUndefined");function We(){Object.keys(y.counts).find(se=>Te(se,y.arrays)?(_=Error(A("Invalid configuration: %s, opts.count excludes opts.array.",se)),!0):Te(se,y.nargs)?(_=Error(A("Invalid configuration: %s, opts.count excludes opts.narg.",se)),!0):!1)}return s(We,"checkConfiguration"),{aliases:Object.assign({},y.aliases),argv:Object.assign(B,P),configuration:c,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},m)}}};function vOt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(vOt,"combineAliases");function fge(t){return t!==void 0?t+1:1}s(fge,"increment");function Xqe(t){return t==="__proto__"?"___proto___":t}s(Xqe,"sanitizeKey");function EOt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(EOt,"stripQuotes");var rHe=require("fs");var pge,hge,mge,Zqe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,eHe=(hge=(pge=process==null?void 0:process.versions)===null||pge===void 0?void 0:pge.node)!==null&&hge!==void 0?hge:(mge=process==null?void 0:process.version)===null||mge===void 0?void 0:mge.slice(1);if(eHe&&Number(eHe.match(/^([^.]+)/)[1])<Zqe)throw Error(`yargs parser supports a minimum Node.js version of ${Zqe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var xOt=process?process.env:{},nHe=new yY({cwd:process.cwd,env:s(()=>xOt,"env"),format:tHe.format,normalize:CY.normalize,resolve:CY.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,rHe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),sF=s(function(e,r){return nHe.parse(e.slice(),r).argv},"Parser");sF.detailed=function(t,e){return nHe.parse(t.slice(),e)};sF.camelCase=E2;sF.decamelize=gY;sF.looksLikeNumber=AY;var iHe=sF;var Wg=require("path");d();function bOt(){return IOt()?0:1}s(bOt,"getProcessArgvBinIndex");function IOt(){return TOt()&&!process.defaultApp}s(IOt,"isBundledElectronApp");function TOt(){return!!process.versions.electron}s(TOt,"isElectronApp");function oHe(){return process.argv[bOt()]}s(oHe,"getProcessArgvBin");d();var Js=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var D3=require("fs"),sHe=require("util"),aHe=require("path");var cHe={fs:{readFileSync:D3.readFileSync,writeFile:D3.writeFile},format:sHe.format,resolve:aHe.resolve,exists:s(t=>{try{return(0,D3.statSync)(t).isFile()}catch{return!1}},"exists")};d();var Hg,gge=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),Hg.format.apply(Hg.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),Hg.format.apply(Hg.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);Hg.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{Hg.fs.readFileSync&&(e=JSON.parse(Hg.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=Hg.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=Hg.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return Hg.exists(e)}};function lHe(t,e){Hg=e;let r=new gge(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(lHe,"y18n");var wOt=s(t=>lHe(t,cHe),"y18n"),uHe=wOt;var _Ot="require is not supported by ESM",dHe="loading a directory of commands is not supported yet for ESM",aF;try{aF=(0,hHe.fileURLToPath)(importMetaUrlShim)}catch{aF=process.cwd()}var SOt=aF.substring(0,aF.lastIndexOf("node_modules")),mHe={assert:{notStrictEqual:vY.notStrictEqual,strictEqual:vY.strictEqual},cliui:uge,findUp:dge,getEnv:s(t=>process.env[t],"getEnv"),inspect:fHe.inspect,getCallerFile:s(()=>{throw new Js(dHe)},"getCallerFile"),getProcessArgvBin:oHe,mainFilename:SOt||process.cwd(),Parser:iHe,path:{basename:Wg.basename,dirname:Wg.dirname,extname:Wg.extname,relative:Wg.relative,resolve:Wg.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:pHe.readFileSync,require:s(()=>{throw new Js(_Ot)},"require"),requireDirectory:s(()=>{throw new Js(dHe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:uHe({directory:(0,Wg.resolve)(aF,"../../../locales"),updateFiles:!1})};d();d();d();function tf(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(tf,"assertNotStrictEqual");function Age(t,e){e.assert.strictEqual(typeof t,"string")}s(Age,"assertSingleKey");function B3(t){return Object.keys(t)}s(B3,"objectKeys");d();function Xs(t){return!!t&&!!t.then&&typeof t.then=="function"}s(Xs,"isPromise");d();d();d();function FI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(FI,"parseCommand");var ROt=["first","second","third","fourth","fifth","sixth"];function Pr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[FI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Js(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new Js(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let h=l.shift(),m=gHe(h);p.cmd.filter(A=>A===m||A==="*").length===0&&AHe(m,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let h=l.shift(),m=gHe(h);p.cmd.filter(A=>A===m||A==="*").length===0&&AHe(m,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Pr,"argsert");function gHe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(gHe,"guessType");function AHe(t,e,r){throw new Js(`Invalid ${ROt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(AHe,"argumentTypeError");var EY=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Pr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function yHe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(yHe,"commandMiddlewareFactory");function x2(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(Xs(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return Xs(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(x2,"applyMiddleware");d();function b2(t,e,r=n=>{throw n}){try{let n=kOt(t)?t():t;return Xs(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(b2,"maybeAsyncResult");function kOt(t){return typeof t=="function"}s(kOt,"isFunction");d();function yge(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(yge,"whichModule");var N3=/(^\*)|(^\$0)/,Cge=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=yHe(o);if(i=i||(()=>{}),Array.isArray(e))if(POt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(BOt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(CHe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=FI(e);c=c.map(h=>FI(h).cmd);let f=!1,p=[u.cmd].concat(c).filter(h=>N3.test(h)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(N3,u.cmd)),c.forEach(h=>{this.aliasMap[h]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return Xs(p)?p.then(h=>this.applyMiddlewareAndGetResult(f,c,h.innerArgv,l,o,h.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if(xY(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(Xs(p))return p.then(h=>(f=EHe(h)?h:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else DOt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return Xs(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=N3.test(r.original)?r.original.replace(N3,"").trim():r.original,i=e.filter(o=>!N3.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=b2(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=x2(n,a,c,!1),n=b2(n,f=>{let p=r.handler(f);return Xs(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Xs(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=x2(n,c,u,!0);return Xs(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=FI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=N3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(xY(r))return r(e,!0);CHe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=yge(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;tf(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();tf(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function vHe(t,e,r,n){return new Cge(t,e,r,n)}s(vHe,"command");function CHe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(CHe,"isCommandBuilderDefinition");function POt(t){return t.every(e=>typeof e=="string")}s(POt,"isCommandAndAliases");function xY(t){return typeof t=="function"}s(xY,"isCommandBuilderCallback");function DOt(t){return typeof t=="object"}s(DOt,"isCommandBuilderOptionDefinitions");function BOt(t){return typeof t=="object"&&!Array.isArray(t)}s(BOt,"isCommandHandlerDefinition");d();d();function OI(t={},e=()=>!0){let r={};return B3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(OI,"objFilter");d();function QI(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(QI,"setBlocking");function NOt(t){return typeof t=="boolean"}s(NOt,"isBoolean");function bHe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(U){i.push(U)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(U=!0,X){let[K,j]=typeof U=="string"?[!0,U]:[U,X];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,c=K,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(U,X){let K=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let W=i[j];if(NOt(W)){if(X)throw X;if(U)throw Error(U)}else W(U,X,n)}else{if(t.getExitProcess()&&QI(!0),!l){l=!0,c&&(t.showHelp("error"),K.error()),(U||X)&&K.error(U||X);let j=o||a;j&&((U||X)&&K.error(""),K.error(j))}if(X=X||new Js(U),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,X);throw X}},"fail");let u=[],f=!1;n.usage=(H,U)=>H===null?(f=!0,u=[],n):(f=!1,u.push([H,U||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(H,U)=>{p.push([H,U||""])};let h=[];n.command=s(function(U,X,K,j,W=!1){K&&(h=h.map(J=>(J[2]=!1,J))),h.push([U,X||"",K,j,W])},"command"),n.getCommands=()=>h;let m={};n.describe=s(function(U,X){Array.isArray(U)?U.forEach(K=>{n.describe(K,X)}):typeof U=="object"?Object.keys(U).forEach(K=>{n.describe(K,U[K])}):m[U]=X},"describe"),n.getDescriptions=()=>m;let g=[];n.epilog=H=>{g.push(H)};let A=!1,y;n.wrap=H=>{A=!0,y=H},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(A||(y=Y(),A=!0),y);let E="__yargsString__:";n.deferY18nLookup=H=>E+H,n.help=s(function(){if(S)return S;_();let U=t.customScriptName?t.$0:e.path.basename(t.$0),X=t.getDemandedOptions(),K=t.getDemandedCommands(),j=t.getDeprecatedOptions(),W=t.getGroups(),J=t.getOptions(),ie=[];ie=ie.concat(Object.keys(m)),ie=ie.concat(Object.keys(X)),ie=ie.concat(Object.keys(K)),ie=ie.concat(Object.keys(J.default)),ie=ie.filter(B),ie=Object.keys(ie.reduce((Fe,ct)=>(ct!=="_"&&(Fe[ct]=!0),Fe),{}));let ae=n.getWrap(),te=e.cliui({width:ae,wrap:!!ae});if(!f){if(u.length)u.forEach(Fe=>{te.div({text:`${Fe[0].replace(/\$0/g,U)}`}),Fe[1]&&te.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),te.div();else if(h.length){let Fe=null;K._?Fe=`${U} <${r("command")}>
`:Fe=`${U} [${r("command")}]
`,te.div(`${Fe}`)}}if(h.length>1||h.length===1&&!h[0][2]){te.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),ct=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(h=h.sort((vt,mt)=>vt[0].localeCompare(mt[0])));let St=U?`${U} `:"";h.forEach(vt=>{let mt=`${St}${ct}${vt[0].replace(/^\$0 ?/,"")}`;te.span({text:mt,padding:[0,2,0,2],width:b(h,ae,`${U}${ct}`)+4},{text:vt[1]});let ue=[];vt[2]&&ue.push(`[${r("default")}]`),vt[3]&&vt[3].length&&ue.push(`[${r("aliases:")} ${vt[3].join(", ")}]`),vt[4]&&(typeof vt[4]=="string"?ue.push(`[${r("deprecated: %s",vt[4])}]`):ue.push(`[${r("deprecated")}]`)),ue.length?te.div({text:ue.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(J.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ie=ie.filter(Fe=>!t.parsed.newAliases[Fe]&&pe.every(ct=>(J.alias[ct]||[]).indexOf(Fe)===-1));let Ae=r("Options:");W[Ae]||(W[Ae]=[]),P(ie,J.alias,W,Ae);let Oe=s(Fe=>/^--/.test(bY(Fe)),"isLongSwitch"),Te=Object.keys(W).filter(Fe=>W[Fe].length>0).map(Fe=>{let ct=W[Fe].filter(B).map(St=>{if(pe.includes(St))return St;for(let vt=0,mt;(mt=pe[vt])!==void 0;vt++)if((J.alias[mt]||[]).includes(St))return mt;return St});return{groupName:Fe,normalizedKeys:ct}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ct})=>{let St=ct.reduce((vt,mt)=>(vt[mt]=[mt].concat(J.alias[mt]||[]).map(ue=>Fe===n.getPositionalGroupName()?ue:(/^[0-9]$/.test(ue)?J.boolean.includes(mt)?"-":"--":ue.length>1?"--":"-")+ue).sort((ue,Ue)=>Oe(ue)===Oe(Ue)?0:Oe(ue)?1:-1).join(", "),vt),{});return{groupName:Fe,normalizedKeys:ct,switches:St}});if(Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ct})=>!Fe.every(St=>Oe(ct[St])))&&Te.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ct})=>{Fe.forEach(St=>{Oe(ct[St])&&(ct[St]=LOt(ct[St],4))})}),Te.forEach(({groupName:Fe,normalizedKeys:ct,switches:St})=>{te.div(Fe),ct.forEach(vt=>{let mt=St[vt],ue=m[vt]||"",Ue=null;ue.includes(E)&&(ue=r(ue.substring(E.length))),J.boolean.includes(vt)&&(Ue=`[${r("boolean")}]`),J.count.includes(vt)&&(Ue=`[${r("count")}]`),J.string.includes(vt)&&(Ue=`[${r("string")}]`),J.normalize.includes(vt)&&(Ue=`[${r("string")}]`),J.array.includes(vt)&&(Ue=`[${r("array")}]`),J.number.includes(vt)&&(Ue=`[${r("number")}]`);let ye=s(le=>typeof le=="string"?`[${r("deprecated: %s",le)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),We=[vt in j?ye(j[vt]):null,Ue,vt in X?`[${r("required")}]`:null,J.choices&&J.choices[vt]?`[${r("choices:")} ${n.stringifiedValues(J.choices[vt])}]`:null,F(J.default[vt],J.defaultDescription[vt])].filter(Boolean).join(" ");te.span({text:bY(mt),padding:[0,2,0,2+xHe(mt)],width:b(St,ae)+4},ue);let se=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;We&&!se?te.div({text:We,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,U)}),p.forEach(Fe=>{Fe[1]===""?te.div({text:Fe[0],padding:[0,2,0,2]}):te.div({text:Fe[0],padding:[0,2,0,2],width:b(p,ae)+4},{text:Fe[1]})}),te.div()),g.length>0){let Fe=g.map(ct=>ct.replace(/\$0/g,U)).join(`
`);te.div(`${Fe}
`)}return te.toString().replace(/\s*$/,"")},"help");function b(H,U,X){let K=0;return Array.isArray(H)||(H=Object.values(H).map(j=>[j])),H.forEach(j=>{K=Math.max(e.stringWidth(X?`${X} ${bY(j[0])}`:bY(j[0]))+xHe(j[0]),K)}),U&&(K=Math.min(K,parseInt((U*.5).toString(),10))),K}s(b,"maxWidth");function _(){let H=t.getDemandedOptions(),U=t.getOptions();(Object.keys(U.alias)||[]).forEach(X=>{U.alias[X].forEach(K=>{m[K]&&n.describe(X,m[K]),K in H&&t.demandOption(X,H[K]),U.boolean.includes(K)&&t.boolean(X),U.count.includes(K)&&t.count(X),U.string.includes(K)&&t.string(X),U.normalize.includes(K)&&t.normalize(X),U.array.includes(K)&&t.array(X),U.number.includes(K)&&t.number(X)})})}s(_,"normalizeAliases");let S;n.cacheHelpMessage=function(){S=this.help()},n.clearCachedHelpMessage=function(){S=void 0},n.hasCachedHelpMessage=function(){return!!S};function P(H,U,X,K){let j=[],W=null;return Object.keys(X).forEach(J=>{j=j.concat(X[J])}),H.forEach(J=>{W=[J].concat(U[J]),W.some(ie=>j.indexOf(ie)!==-1)||X[K].push(J)}),j}s(P,"addUngroupedKeys");function B(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(B,"filterHiddenOptions"),n.showHelp=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(n.help())},n.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(U,X){let K="",j=X||", ",W=[].concat(U);return!U||!W.length||W.forEach(J=>{K.length&&(K+=j),K+=JSON.stringify(J)}),K},"stringifiedValues");function F(H,U){let X=`[${r("default:")} `;if(H===void 0&&!U)return null;if(U)X+=U;else switch(typeof H){case"string":X+=`"${H}"`;break;case"object":X+=JSON.stringify(H);break;default:X+=H}return`${X}]`}s(F,"defaultString");function Y(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(Y,"windowWidth");let ee=null;n.version=H=>{ee=H},n.showVersion=H=>{let U=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:U[H])(ee)},n.reset=s(function(U){return o=null,l=!1,u=[],f=!1,g=[],p=[],h=[],m=OI(m,X=>!U[X]),n},"reset");let V=[];return n.freeze=s(function(){V.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:h,descriptions:m})},"freeze"),n.unfreeze=s(function(U=!1){let X=V.pop();X&&(U?(m={...X.descriptions,...m},h=[...X.commands,...h],u=[...X.usages,...u],p=[...X.examples,...p],g=[...X.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:h,descriptions:m}=X)},"unfreeze"),n}s(bHe,"usage");function vge(t){return typeof t=="object"}s(vge,"isIndentedText");function LOt(t,e){return vge(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(LOt,"addIndentation");function xHe(t){return vge(t)?t.indentation:0}s(xHe,"getIndentation");function bY(t){return vge(t)?t.text:t}s(bY,"getText");d();d();var IHe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,THe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Ege=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(xY(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=FI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let m=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(E=>{let b=m[E];return typeof b=="string"&&b.length>0}),A=g?m[g]:void 0,y=(l=(c=m[e])!==null&&c!==void 0?c:A)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${y.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(m=>/^--/.test(m),"startsByTwoDashes"),p=s(m=>/^[^0-9]$/.test(m),"isShortOption"),h=!f(n)&&p(e)?"-":"--";r.push(h+u),i&&r.push(h+"no-"+u)}customCompletion(e,r,n,i){if(tf(this.customCompletionFunction,null,this.shim),FOt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return Xs(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return OOt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return Xs(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?THe:IHe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function wHe(t,e,r,n){return new Ege(t,e,r,n)}s(wHe,"completion");function FOt(t){return t.length<3}s(FOt,"isSyncCompletionFunction");function OOt(t){return t.length>3}s(OOt,"isFallbackCompletionFunction");d();d();function _He(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(_He,"levenshtein");var SHe=["$0","--","_"];function RHe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let h=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;h._&&(g<h._.min||g>h._.max)&&(g<h._.min?h._.minMsg!==void 0?e.fail(h._.minMsg?h._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,h._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),h._.min.toString())):g>h._.max&&(h._.maxMsg!==void 0?e.fail(h._.maxMsg?h._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,h._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),h._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,h){h<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",h,h+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,h){let m=null;for(let g of Object.keys(h))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(m=m||{},m[g]=h[g]);if(m){let g=[];for(let y of Object.keys(m)){let E=m[y];E&&g.indexOf(E)<0&&g.push(E)}let A=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(m).length,Object.keys(m).join(", ")+A))}},"requiredArguments"),o.unknownArguments=s(function(p,h,m,g,A=!0){var y;let E=t.getInternalMethods().getCommandInstance().getCommands(),b=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(S=>{!SHe.includes(S)&&!Object.prototype.hasOwnProperty.call(m,S)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),S)&&!o.isValidAndSomeAliasIsNotNew(S,h)&&b.push(S)}),A&&(_.commands.length>0||E.length>0||g)&&p._.slice(_.commands.length).forEach(S=>{E.includes(""+S)||b.push(""+S)}),A){let P=((y=t.getDemandedCommands()._)===null||y===void 0?void 0:y.max)||0,B=_.commands.length+P;B<p._.length&&p._.slice(B).forEach(F=>{F=String(F),!_.commands.includes(F)&&!b.includes(F)&&b.push(F)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(S=>S.trim()?S:`"${S}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let h=t.getInternalMethods().getCommandInstance().getCommands(),m=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||h.length>0)&&p._.slice(g.commands.length).forEach(A=>{h.includes(""+A)||m.push(""+A)}),m.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",m.length,m.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,h){if(!Object.prototype.hasOwnProperty.call(h,p))return!1;let m=t.parsed.newAliases;return[p,...h[p]].some(g=>!Object.prototype.hasOwnProperty.call(m,g)||!m[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let h=t.getOptions(),m={};if(!Object.keys(h.choices).length)return;Object.keys(p).forEach(y=>{SHe.indexOf(y)===-1&&Object.prototype.hasOwnProperty.call(h.choices,y)&&[].concat(p[y]).forEach(E=>{h.choices[y].indexOf(E)===-1&&E!==void 0&&(m[y]=(m[y]||[]).concat(E))})});let g=Object.keys(m);if(!g.length)return;let A=n("Invalid values:");g.forEach(y=>{A+=`
  ${n("Argument: %s, Given: %s, Choices: %s",y,e.stringifiedValues(m[y]),e.stringifiedValues(h.choices[y]))}`}),e.fail(A)},"limitedChoices");let a={};o.implies=s(function(p,h){Pr("<string|object> [array|number|string]",[p,h],arguments.length),typeof p=="object"?Object.keys(p).forEach(m=>{o.implies(m,p[m])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(h)?h.forEach(m=>o.implies(p,m)):(tf(h,void 0,r),a[p].push(h)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let h=Number(p);return p=isNaN(h)?p:h,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let h=[];if(Object.keys(a).forEach(m=>{let g=m;(a[m]||[]).forEach(A=>{let y=g,E=A;y=c(p,y),A=c(p,A),y&&!A&&h.push(` ${g} -> ${E}`)})}),h.length){let m=`${n("Implications failed:")}
`;h.forEach(g=>{m+=g}),e.fail(m)}},"implications");let l={};o.conflicts=s(function(p,h){Pr("<string|object> [array|string]",[p,h],arguments.length),typeof p=="object"?Object.keys(p).forEach(m=>{o.conflicts(m,p[m])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(h)?h.forEach(m=>o.conflicts(p,m)):l[p].push(h))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(h=>{l[h]&&l[h].forEach(m=>{m&&p[h]!==void 0&&p[m]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,m))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(h=>{l[h].forEach(m=>{m&&p[r.Parser.camelCase(h)]!==void 0&&p[r.Parser.camelCase(m)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,m))})})},"conflictingFn"),o.recommendCommands=s(function(p,h){h=h.sort((y,E)=>E.length-y.length);let g=null,A=1/0;for(let y=0,E;(E=h[y])!==void 0;y++){let b=_He(p,E);b<=3&&b<A&&(A=b,g=E)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=OI(a,h=>!p[h]),l=OI(l,h=>!p[h]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();tf(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(RHe,"validation");d();var xge=[],cF;function IY(t,e,r,n){cF=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=UOt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}QOt(a),xge.push(a),i=o?JSON.parse(cF.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=IY(i,cF.path.dirname(a),r,cF)}return xge=[],r?kHe(i,t):Object.assign({},i,t)}s(IY,"applyExtends");function QOt(t){if(xge.indexOf(t)>-1)throw new Js(`Circular extended configurations: '${t}'.`)}s(QOt,"checkForCircularExtends");function UOt(t,e){return cF.path.resolve(t,e)}s(UOt,"getPathToDefaultConfig");function kHe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=kHe(t[i],e[i]):r[i]=e[i];return r}s(kHe,"mergeDeep");var Br=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},me=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Cc,I2,lF,Hh,fp,TY,UI,T2,wY,Wh,_Y,$h,Jy,pp,jh,SY,L3,Hl,Kr,RY,kY,hp,w2,M3,_2,qI,PY,$n,S2,R2,k2,ii,DY,Xy,Va;function KHe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new Bge(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(KHe,"YargsFactory");var PHe=Symbol("copyDoubleDash"),DHe=Symbol("copyDoubleDash"),bge=Symbol("deleteFromParserHintObject"),BHe=Symbol("emitWarning"),NHe=Symbol("freeze"),LHe=Symbol("getDollarZero"),P2=Symbol("getParserConfiguration"),MHe=Symbol("getUsageConfiguration"),Ige=Symbol("guessLocale"),FHe=Symbol("guessVersion"),OHe=Symbol("parsePositionalNumbers"),Tge=Symbol("pkgUp"),HI=Symbol("populateParserHintArray"),F3=Symbol("populateParserHintSingleValueDictionary"),wge=Symbol("populateParserHintArrayDictionary"),_ge=Symbol("populateParserHintDictionary"),Sge=Symbol("sanitizeKey"),Rge=Symbol("setKey"),kge=Symbol("unfreeze"),QHe=Symbol("validateAsync"),UHe=Symbol("getCommandInstance"),qHe=Symbol("getContext"),HHe=Symbol("getHasOutput"),WHe=Symbol("getLoggerInstance"),$He=Symbol("getParseContext"),jHe=Symbol("getUsageInstance"),GHe=Symbol("getValidationInstance"),BY=Symbol("hasParseCallback"),VHe=Symbol("isGlobalContext"),D2=Symbol("postProcess"),zHe=Symbol("rebase"),Pge=Symbol("reset"),uF=Symbol("runYargsParserAndExecuteCommands"),Dge=Symbol("runValidation"),YHe=Symbol("setHasOutput"),B2=Symbol("kTrackManuallySetKeys"),Bge=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Cc.set(this,void 0),I2.set(this,void 0),lF.set(this,{commands:[],fullCommands:[]}),Hh.set(this,null),fp.set(this,null),TY.set(this,"show-hidden"),UI.set(this,null),T2.set(this,!0),wY.set(this,{}),Wh.set(this,!0),_Y.set(this,[]),$h.set(this,void 0),Jy.set(this,{}),pp.set(this,!1),jh.set(this,null),SY.set(this,!0),L3.set(this,void 0),Hl.set(this,""),Kr.set(this,void 0),RY.set(this,void 0),kY.set(this,{}),hp.set(this,null),w2.set(this,null),M3.set(this,{}),_2.set(this,{}),qI.set(this,void 0),PY.set(this,!1),$n.set(this,void 0),S2.set(this,!1),R2.set(this,!1),k2.set(this,!1),ii.set(this,void 0),DY.set(this,{}),Xy.set(this,null),Va.set(this,void 0),Br(this,$n,i,"f"),Br(this,qI,e,"f"),Br(this,I2,r,"f"),Br(this,RY,n,"f"),Br(this,$h,new EY(this),"f"),this.$0=this[LHe](),this[Pge](),Br(this,Cc,me(this,Cc,"f"),"f"),Br(this,ii,me(this,ii,"f"),"f"),Br(this,Va,me(this,Va,"f"),"f"),Br(this,Kr,me(this,Kr,"f"),"f"),me(this,Kr,"f").showHiddenOpt=me(this,TY,"f"),Br(this,L3,this[DHe](),"f")}addHelpOpt(e,r){let n="help";return Pr("[string|boolean] [string]",[e,r],arguments.length),me(this,jh,"f")&&(this[bge](me(this,jh,"f")),Br(this,jh,null,"f")),e===!1&&r===void 0?this:(Br(this,jh,typeof e=="string"?e:n,"f"),this.boolean(me(this,jh,"f")),this.describe(me(this,jh,"f"),r||me(this,ii,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Pr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:me(this,TY,"f");return this.boolean(n),this.describe(n,r||me(this,ii,"f").deferY18nLookup("Show hidden options")),me(this,Kr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Pr("<object|string|array> [string|array]",[e,r],arguments.length),this[wge](this.alias.bind(this),"alias",e,r),this}array(e){return Pr("<array|string>",[e],arguments.length),this[HI]("array",e),this[B2](e),this}boolean(e){return Pr("<array|string>",[e],arguments.length),this[HI]("boolean",e),this[B2](e),this}check(e,r){return Pr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>b2(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&me(this,ii,"f").fail(o.toString(),o):me(this,ii,"f").fail(me(this,$n,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(me(this,ii,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Pr("<object|string|array> [string|array]",[e,r],arguments.length),this[wge](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Pr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Js("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Js("coerce callback must be provided");return me(this,Kr,"f").key[e]=!0,me(this,$h,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?b2(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Js(c.message)}):n},e),this}conflicts(e,r){return Pr("<string|object> [string|array]",[e,r],arguments.length),me(this,Va,"f").conflicts(e,r),this}config(e="config",r,n){return Pr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=IY(e,me(this,I2,"f"),this[P2]()["deep-merge-config"]||!1,me(this,$n,"f")),me(this,Kr,"f").configObjects=(me(this,Kr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||me(this,ii,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{me(this,Kr,"f").config[i]=n||!0}),this)}completion(e,r,n){return Pr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Br(this,fp,e||me(this,fp,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(me(this,fp,"f"),r),n&&me(this,Hh,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Pr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),me(this,Cc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Pr("<string> [object]",[e,r],arguments.length);let n=me(this,RY,"f")||me(this,$n,"f").require;return me(this,Cc,"f").addDirectory(e,n,me(this,$n,"f").getCallerFile(),r),this}count(e){return Pr("<array|string>",[e],arguments.length),this[HI]("count",e),this[B2](e),this}default(e,r,n){return Pr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Age(e,me(this,$n,"f")),me(this,Kr,"f").defaultDescription[e]=n),typeof r=="function"&&(Age(e,me(this,$n,"f")),me(this,Kr,"f").defaultDescription[e]||(me(this,Kr,"f").defaultDescription[e]=me(this,ii,"f").functionDescription(r)),r=r.call()),this[F3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Pr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),me(this,Kr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{tf(n,!0,me(this,$n,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(tf(n,!0,me(this,$n,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{tf(n,!0,me(this,$n,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Pr("<object|string|array> [string]",[e,r],arguments.length),this[F3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Pr("<string> [string|boolean]",[e,r],arguments.length),me(this,Kr,"f").deprecatedOptions[e]=r,this}describe(e,r){return Pr("<object|string|array> [string]",[e,r],arguments.length),this[Rge](e,!0),me(this,ii,"f").describe(e,r),this}detectLocale(e){return Pr("<boolean>",[e],arguments.length),Br(this,T2,e,"f"),this}env(e){return Pr("[string|boolean]",[e],arguments.length),e===!1?delete me(this,Kr,"f").envPrefix:me(this,Kr,"f").envPrefix=e||"",this}epilogue(e){return Pr("<string>",[e],arguments.length),me(this,ii,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Pr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):me(this,ii,"f").example(e,r),this}exit(e,r){Br(this,pp,!0,"f"),Br(this,UI,r,"f"),me(this,Wh,"f")&&me(this,$n,"f").process.exit(e)}exitProcess(e=!0){return Pr("[boolean]",[e],arguments.length),Br(this,Wh,e,"f"),this}fail(e){if(Pr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Js("Invalid first argument. Expected function or boolean 'false'");return me(this,ii,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Pr("<array> [function]",[e,r],arguments.length),r?me(this,Hh,"f").getCompletion(e,r):new Promise((n,i)=>{me(this,Hh,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Pr([],0),me(this,Kr,"f").demandedOptions}getDemandedCommands(){return Pr([],0),me(this,Kr,"f").demandedCommands}getDeprecatedOptions(){return Pr([],0),me(this,Kr,"f").deprecatedOptions}getDetectLocale(){return me(this,T2,"f")}getExitProcess(){return me(this,Wh,"f")}getGroups(){return Object.assign({},me(this,Jy,"f"),me(this,_2,"f"))}getHelp(){if(Br(this,pp,!0,"f"),!me(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[uF](me(this,qI,"f"),void 0,void 0,0,!0);if(Xs(r))return r.then(()=>me(this,ii,"f").help())}let e=me(this,Cc,"f").runDefaultBuilderOn(this);if(Xs(e))return e.then(()=>me(this,ii,"f").help())}return Promise.resolve(me(this,ii,"f").help())}getOptions(){return me(this,Kr,"f")}getStrict(){return me(this,S2,"f")}getStrictCommands(){return me(this,R2,"f")}getStrictOptions(){return me(this,k2,"f")}global(e,r){return Pr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?me(this,Kr,"f").local=me(this,Kr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{me(this,Kr,"f").local.includes(n)||me(this,Kr,"f").local.push(n)}),this}group(e,r){Pr("<string|array> <string>",[e,r],arguments.length);let n=me(this,_2,"f")[r]||me(this,Jy,"f")[r];me(this,_2,"f")[r]&&delete me(this,_2,"f")[r];let i={};return me(this,Jy,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Pr("<string>",[e],arguments.length),me(this,Kr,"f").hiddenOptions.push(e),this}implies(e,r){return Pr("<string|object> [number|string|array]",[e,r],arguments.length),me(this,Va,"f").implies(e,r),this}locale(e){return Pr("[string]",[e],arguments.length),e===void 0?(this[Ige](),me(this,$n,"f").y18n.getLocale()):(Br(this,T2,!1,"f"),me(this,$n,"f").y18n.setLocale(e),this)}middleware(e,r,n){return me(this,$h,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Pr("<string|object|array> [number]",[e,r],arguments.length),this[F3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Pr("<array|string>",[e],arguments.length),this[HI]("normalize",e),this}number(e){return Pr("<array|string>",[e],arguments.length),this[HI]("number",e),this[B2](e),this}option(e,r){if(Pr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[B2](e),me(this,Xy,"f")&&(e==="version"||r?.alias==="version")&&this[BHe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),me(this,Kr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(me(this,Kr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=me(this,ii,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Pr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[NHe](),typeof e>"u"&&(e=me(this,qI,"f")),typeof r=="object"&&(Br(this,w2,r,"f"),r=n),typeof r=="function"&&(Br(this,hp,r,"f"),r=!1),r||Br(this,qI,e,"f"),me(this,hp,"f")&&Br(this,Wh,!1,"f");let i=this[uF](e,!!r),o=this.parsed;return me(this,Hh,"f").setParsed(this.parsed),Xs(i)?i.then(a=>(me(this,hp,"f")&&me(this,hp,"f").call(this,me(this,UI,"f"),a,me(this,Hl,"f")),a)).catch(a=>{throw me(this,hp,"f")&&me(this,hp,"f")(a,this.parsed.argv,me(this,Hl,"f")),a}).finally(()=>{this[kge](),this.parsed=o}):(me(this,hp,"f")&&me(this,hp,"f").call(this,me(this,UI,"f"),i,me(this,Hl,"f")),this[kge](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Xs(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Xs(i))throw new Js(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Pr("<object>",[e],arguments.length),Br(this,kY,e,"f"),this}pkgConf(e,r){Pr("<string> [string]",[e,r],arguments.length);let n=null,i=this[Tge](r||me(this,I2,"f"));return i[e]&&typeof i[e]=="object"&&(n=IY(i[e],r||me(this,I2,"f"),this[P2]()["deep-merge-config"]||!1,me(this,$n,"f")),me(this,Kr,"f").configObjects=(me(this,Kr,"f").configObjects||[]).concat(n)),this}positional(e,r){Pr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=OI(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=me(this,lF,"f").fullCommands[me(this,lF,"f").fullCommands.length-1],o=i?me(this,Cc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return B3(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,me(this,ii,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Pr("[boolean]",[e],arguments.length),Br(this,PY,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Pr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&me(this,Kr,"f").narg[e]?this:(this[F3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Pr("[string] [string]",[e,r],arguments.length),e=e||this.$0,me(this,L3,"f").log(me(this,Hh,"f").generateCompletionScript(e,r||me(this,fp,"f")||"completion")),this}showHelp(e){if(Pr("[string|function]",[e],arguments.length),Br(this,pp,!0,"f"),!me(this,ii,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[uF](me(this,qI,"f"),void 0,void 0,0,!0);if(Xs(n))return n.then(()=>{me(this,ii,"f").showHelp(e)}),this}let r=me(this,Cc,"f").runDefaultBuilderOn(this);if(Xs(r))return r.then(()=>{me(this,ii,"f").showHelp(e)}),this}return me(this,ii,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Pr("[boolean|string] [string]",[e,r],arguments.length),me(this,ii,"f").showHelpOnFail(e,r),this}showVersion(e){return Pr("[string|function]",[e],arguments.length),me(this,ii,"f").showVersion(e),this}skipValidation(e){return Pr("<array|string>",[e],arguments.length),this[HI]("skipValidation",e),this}strict(e){return Pr("[boolean]",[e],arguments.length),Br(this,S2,e!==!1,"f"),this}strictCommands(e){return Pr("[boolean]",[e],arguments.length),Br(this,R2,e!==!1,"f"),this}strictOptions(e){return Pr("[boolean]",[e],arguments.length),Br(this,k2,e!==!1,"f"),this}string(e){return Pr("<array|string>",[e],arguments.length),this[HI]("string",e),this[B2](e),this}terminalWidth(){return Pr([],0),me(this,$n,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Pr("<object>",[e],arguments.length),Br(this,T2,!1,"f"),me(this,$n,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Pr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(tf(e,null,me(this,$n,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Js(".usage() description must start with $0 if being used as alias for .command()")}else return me(this,ii,"f").usage(e),this}usageConfiguration(e){return Pr("<object>",[e],arguments.length),Br(this,DY,e,"f"),this}version(e,r,n){let i="version";if(Pr("[boolean|string] [string] [string]",[e,r,n],arguments.length),me(this,Xy,"f")&&(this[bge](me(this,Xy,"f")),me(this,ii,"f").version(void 0),Br(this,Xy,null,"f")),arguments.length===0)n=this[FHe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Br(this,Xy,typeof e=="string"?e:i,"f"),r=r||me(this,ii,"f").deferY18nLookup("Show version number"),me(this,ii,"f").version(n||void 0),this.boolean(me(this,Xy,"f")),this.describe(me(this,Xy,"f"),r),this}wrap(e){return Pr("<number|null|undefined>",[e],arguments.length),me(this,ii,"f").wrap(e),this}[(Cc=new WeakMap,I2=new WeakMap,lF=new WeakMap,Hh=new WeakMap,fp=new WeakMap,TY=new WeakMap,UI=new WeakMap,T2=new WeakMap,wY=new WeakMap,Wh=new WeakMap,_Y=new WeakMap,$h=new WeakMap,Jy=new WeakMap,pp=new WeakMap,jh=new WeakMap,SY=new WeakMap,L3=new WeakMap,Hl=new WeakMap,Kr=new WeakMap,RY=new WeakMap,kY=new WeakMap,hp=new WeakMap,w2=new WeakMap,M3=new WeakMap,_2=new WeakMap,qI=new WeakMap,PY=new WeakMap,$n=new WeakMap,S2=new WeakMap,R2=new WeakMap,k2=new WeakMap,ii=new WeakMap,DY=new WeakMap,Xy=new WeakMap,Va=new WeakMap,PHe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[DHe](){return{log:s((...e)=>{this[BY]()||console.log(...e),Br(this,pp,!0,"f"),me(this,Hl,"f").length&&Br(this,Hl,me(this,Hl,"f")+`
`,"f"),Br(this,Hl,me(this,Hl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[BY]()||console.error(...e),Br(this,pp,!0,"f"),me(this,Hl,"f").length&&Br(this,Hl,me(this,Hl,"f")+`
`,"f"),Br(this,Hl,me(this,Hl,"f")+e.join(" "),"f")},"error")}}[bge](e){B3(me(this,Kr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=me(this,Kr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete me(this,ii,"f").getDescriptions()[e]}[BHe](e,r,n){me(this,wY,"f")[n]||(me(this,$n,"f").process.emitWarning(e,r),me(this,wY,"f")[n]=!0)}[NHe](){me(this,_Y,"f").push({options:me(this,Kr,"f"),configObjects:me(this,Kr,"f").configObjects.slice(0),exitProcess:me(this,Wh,"f"),groups:me(this,Jy,"f"),strict:me(this,S2,"f"),strictCommands:me(this,R2,"f"),strictOptions:me(this,k2,"f"),completionCommand:me(this,fp,"f"),output:me(this,Hl,"f"),exitError:me(this,UI,"f"),hasOutput:me(this,pp,"f"),parsed:this.parsed,parseFn:me(this,hp,"f"),parseContext:me(this,w2,"f")}),me(this,ii,"f").freeze(),me(this,Va,"f").freeze(),me(this,Cc,"f").freeze(),me(this,$h,"f").freeze()}[LHe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(me(this,$n,"f").process.argv()[0])?r=me(this,$n,"f").process.argv().slice(1,2):r=me(this,$n,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[zHe](me(this,I2,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),me(this,$n,"f").getEnv("_")&&me(this,$n,"f").getProcessArgvBin()===me(this,$n,"f").getEnv("_")&&(e=me(this,$n,"f").getEnv("_").replace(`${me(this,$n,"f").path.dirname(me(this,$n,"f").process.execPath())}/`,"")),e}[P2](){return me(this,kY,"f")}[MHe](){return me(this,DY,"f")}[Ige](){if(!me(this,T2,"f"))return;let e=me(this,$n,"f").getEnv("LC_ALL")||me(this,$n,"f").getEnv("LC_MESSAGES")||me(this,$n,"f").getEnv("LANG")||me(this,$n,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[FHe](){return this[Tge]().version||"unknown"}[OHe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)me(this,$n,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Tge](e){let r=e||"*";if(me(this,M3,"f")[r])return me(this,M3,"f")[r];let n={};try{let i=e||me(this,$n,"f").mainFilename;!e&&me(this,$n,"f").path.extname(i)&&(i=me(this,$n,"f").path.dirname(i));let o=me(this,$n,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});tf(o,void 0,me(this,$n,"f")),n=JSON.parse(me(this,$n,"f").readFileSync(o,"utf8"))}catch{}return me(this,M3,"f")[r]=n||{},me(this,M3,"f")[r]}[HI](e,r){r=[].concat(r),r.forEach(n=>{n=this[Sge](n),me(this,Kr,"f")[e].push(n)})}[F3](e,r,n,i){this[_ge](e,r,n,i,(o,a,c)=>{me(this,Kr,"f")[o][a]=c})}[wge](e,r,n,i){this[_ge](e,r,n,i,(o,a,c)=>{me(this,Kr,"f")[o][a]=(me(this,Kr,"f")[o][a]||[]).concat(c)})}[_ge](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of B3(n))e(a,n[a]);else o(r,this[Sge](n),i)}[Sge](e){return e==="__proto__"?"___proto___":e}[Rge](e,r){return this[F3](this[Rge].bind(this),"key",e,r),this}[kge](){var e,r,n,i,o,a,c,l,u,f,p,h;let m=me(this,_Y,"f").pop();tf(m,void 0,me(this,$n,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,h=this,{options:{set value(A){Br(e,Kr,A,"f")}}.value,configObjects:g,exitProcess:{set value(A){Br(r,Wh,A,"f")}}.value,groups:{set value(A){Br(n,Jy,A,"f")}}.value,output:{set value(A){Br(i,Hl,A,"f")}}.value,exitError:{set value(A){Br(o,UI,A,"f")}}.value,hasOutput:{set value(A){Br(a,pp,A,"f")}}.value,parsed:this.parsed,strict:{set value(A){Br(c,S2,A,"f")}}.value,strictCommands:{set value(A){Br(l,R2,A,"f")}}.value,strictOptions:{set value(A){Br(u,k2,A,"f")}}.value,completionCommand:{set value(A){Br(f,fp,A,"f")}}.value,parseFn:{set value(A){Br(p,hp,A,"f")}}.value,parseContext:{set value(A){Br(h,w2,A,"f")}}.value}=m,me(this,Kr,"f").configObjects=g,me(this,ii,"f").unfreeze(),me(this,Va,"f").unfreeze(),me(this,Cc,"f").unfreeze(),me(this,$h,"f").unfreeze()}[QHe](e,r){return b2(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[UHe].bind(this),getContext:this[qHe].bind(this),getHasOutput:this[HHe].bind(this),getLoggerInstance:this[WHe].bind(this),getParseContext:this[$He].bind(this),getParserConfiguration:this[P2].bind(this),getUsageConfiguration:this[MHe].bind(this),getUsageInstance:this[jHe].bind(this),getValidationInstance:this[GHe].bind(this),hasParseCallback:this[BY].bind(this),isGlobalContext:this[VHe].bind(this),postProcess:this[D2].bind(this),reset:this[Pge].bind(this),runValidation:this[Dge].bind(this),runYargsParserAndExecuteCommands:this[uF].bind(this),setHasOutput:this[YHe].bind(this)}}[UHe](){return me(this,Cc,"f")}[qHe](){return me(this,lF,"f")}[HHe](){return me(this,pp,"f")}[WHe](){return me(this,L3,"f")}[$He](){return me(this,w2,"f")||{}}[jHe](){return me(this,ii,"f")}[GHe](){return me(this,Va,"f")}[BY](){return!!me(this,hp,"f")}[VHe](){return me(this,SY,"f")}[D2](e,r,n,i){return n||Xs(e)||(r||(e=this[PHe](e)),(this[P2]()["parse-positional-numbers"]||this[P2]()["parse-positional-numbers"]===void 0)&&(e=this[OHe](e)),i&&(e=x2(e,this,me(this,$h,"f").getMiddleware(),!1))),e}[Pge](e={}){Br(this,Kr,me(this,Kr,"f")||{},"f");let r={};r.local=me(this,Kr,"f").local||[],r.configObjects=me(this,Kr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(me(this,_2,"f"),Object.keys(me(this,Jy,"f")).reduce((a,c)=>{let l=me(this,Jy,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),Br(this,Jy,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(me(this,Kr,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=OI(me(this,Kr,"f")[a],c=>!n[c])}),r.envPrefix=me(this,Kr,"f").envPrefix,Br(this,Kr,r,"f"),Br(this,ii,me(this,ii,"f")?me(this,ii,"f").reset(n):bHe(this,me(this,$n,"f")),"f"),Br(this,Va,me(this,Va,"f")?me(this,Va,"f").reset(n):RHe(this,me(this,ii,"f"),me(this,$n,"f")),"f"),Br(this,Cc,me(this,Cc,"f")?me(this,Cc,"f").reset():vHe(me(this,ii,"f"),me(this,Va,"f"),me(this,$h,"f"),me(this,$n,"f")),"f"),me(this,Hh,"f")||Br(this,Hh,wHe(this,me(this,ii,"f"),me(this,Cc,"f"),me(this,$n,"f")),"f"),me(this,$h,"f").reset(),Br(this,fp,null,"f"),Br(this,Hl,"","f"),Br(this,UI,null,"f"),Br(this,pp,!1,"f"),this.parsed=!1,this}[zHe](e,r){return me(this,$n,"f").path.relative(e,r)}[uF](e,r,n,i=0,o=!1){let a=!!n||o;e=e||me(this,qI,"f"),me(this,Kr,"f").__=me(this,$n,"f").y18n.__,me(this,Kr,"f").configuration=this[P2]();let c=!!me(this,Kr,"f").configuration["populate--"],l=Object.assign({},me(this,Kr,"f").configuration,{"populate--":!0}),u=me(this,$n,"f").Parser.detailed(e,Object.assign({},me(this,Kr,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,me(this,w2,"f")),p,h=u.aliases,m=!1,g=!1;Object.keys(f).forEach(A=>{A===me(this,jh,"f")&&f[A]?m=!0:A===me(this,Xy,"f")&&f[A]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&me(this,ii,"f").clearCachedHelpMessage();try{if(this[Ige](),r)return this[D2](f,c,!!n,!1);me(this,jh,"f")&&[me(this,jh,"f")].concat(h[me(this,jh,"f")]||[]).filter(_=>_.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),m=!0),Br(this,SY,!1,"f");let A=me(this,Cc,"f").getCommands(),y=me(this,Hh,"f").completionKey in f,E=m||y||o;if(f._.length){if(A.length){let b;for(let _=i||0,S;f._[_]!==void 0;_++)if(S=String(f._[_]),A.includes(S)&&S!==me(this,fp,"f")){let P=me(this,Cc,"f").runCommand(S,this,u,_+1,o,m||g||o);return this[D2](P,c,!!n,!1)}else if(!b&&S!==me(this,fp,"f")){b=S;break}!me(this,Cc,"f").hasDefaultCommand()&&me(this,PY,"f")&&b&&!E&&me(this,Va,"f").recommendCommands(b,A)}me(this,fp,"f")&&f._.includes(me(this,fp,"f"))&&!y&&(me(this,Wh,"f")&&QI(!0),this.showCompletionScript(),this.exit(0))}if(me(this,Cc,"f").hasDefaultCommand()&&!E){let b=me(this,Cc,"f").runCommand(null,this,u,0,o,m||g||o);return this[D2](b,c,!!n,!1)}if(y){me(this,Wh,"f")&&QI(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${me(this,Hh,"f").completionKey}`)+1);return me(this,Hh,"f").getCompletion(b,(_,S)=>{if(_)throw new Js(_.message);(S||[]).forEach(P=>{me(this,L3,"f").log(P)}),this.exit(0)}),this[D2](f,!c,!!n,!1)}if(me(this,pp,"f")||(m?(me(this,Wh,"f")&&QI(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(me(this,Wh,"f")&&QI(!0),a=!0,me(this,ii,"f").showVersion("log"),this.exit(0))),!a&&me(this,Kr,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>me(this,Kr,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new Js(u.error.message);if(!y){let b=this[Dge](h,{},u.error);n||(p=x2(f,this,me(this,$h,"f").getMiddleware(),!0)),p=this[QHe](b,p??f),Xs(p)&&!n&&(p=p.then(()=>x2(f,this,me(this,$h,"f").getMiddleware(),!1)))}}}catch(A){if(A instanceof Js)me(this,ii,"f").fail(A.message,A);else throw A}return this[D2](p??f,c,!!n,!0)}[Dge](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Js(n.message);me(this,Va,"f").nonOptionCount(a),me(this,Va,"f").requiredArguments(a,o);let c=!1;me(this,R2,"f")&&(c=me(this,Va,"f").unknownCommands(a)),me(this,S2,"f")&&!c?me(this,Va,"f").unknownArguments(a,e,r,!!i):me(this,k2,"f")&&me(this,Va,"f").unknownArguments(a,e,{},!1,!1),me(this,Va,"f").limitedChoices(a),me(this,Va,"f").implications(a),me(this,Va,"f").conflicting(a)}}[YHe](){Br(this,pp,!0,"f")}[B2](e){if(typeof e=="string")me(this,Kr,"f").key[e]=!0;else for(let r of e)me(this,Kr,"f").key[r]=!0}};function EHe(t){return!!t&&typeof t.getInternalMethods=="function"}s(EHe,"isYargsInstance");var qOt=KHe(mHe),JHe=qOt;d();d();d();var XHe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function ZHe(t,e,r){let n=Fr.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,XHe.NewGitHubLogin,n)}s(ZHe,"telemetryNewGitHubLogin");function eWe(t,e){let r=Fr.createAndMarkAsIssued({authType:e});return Bt(t,XHe.GitHubLoginSuccess,r)}s(eWe,"telemetryGitHubLoginSuccess");var Nge=class extends qs{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function HOt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...F0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(zn).fetch(o,n)}catch(a){throw a instanceof Error&&W9(a)?new qs(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new qs(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(HOt,"requestDeviceFlowStage1");async function WOt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...F0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(zn).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new Nge(a):new qs(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(WOt,"requestDeviceFlowStage2");async function $Ot(t,e){eWe(t,"deviceFlow");let n=await(await yh(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new qs(`Error retrieving user information: ${String(n.errors)}`);return n}s($Ot,"requestUserInfo");var N2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(qd).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){ZHe(e,"unknown","deviceFlow");let i=await HOt(e,r,n),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(f=>setTimeout(f,1e3*l));let u=await WOt(e,i.device_code,r,n);if(a-=l,c=u.access_token,c){let f=await $Ot(e,{...n,accessToken:c});return{...n,githubAppId:r,login:f.login,accessToken:c}}l=u.interval??l}throw new qs("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};d();var rf=class{static{s(this,"CitationManager")}},NY=class extends rf{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var jOt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},vs=class{constructor(){this.capabilities={...jOt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};d();d();d();d();function Lge(t,e){let r=$g(t,e);return r===-1?void 0:t[r]}s(Lge,"findLastMonotonous");function $g(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s($g,"findLastIdxMonotonous");function O3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(O3,"findFirstIdxMonotonousOrArrLen");var tWe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=$g(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var Mge=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?LY.isErrorNoTelemetry(e)?new LY(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},rWe=new Mge;function L2(t){rWe.onUnexpectedError(t)}s(L2,"onBugIndicatingError");function Q3(t){GOt(t)||rWe.onUnexpectedError(t)}s(Q3,"onUnexpectedError");var Fge="Canceled";function GOt(t){return t instanceof Zy?!0:t instanceof Error&&t.name===Fge&&t.message===Fge}s(GOt,"isCancellationError");var Zy=class extends Error{static{s(this,"CancellationError")}constructor(){super(Fge),this.name=this.message}};function dF(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(dF,"illegalArgument");function nWe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(nWe,"illegalState");var LY=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},gn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function fF(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(fF,"equals");function*pF(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(pF,"groupAdjacentBy");function oWe(t){return t.filter(e=>!!e)}s(oWe,"coalesce");var sWe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(sWe||={});function WI(t,e){return(r,n)=>e(t(r),t(n))}s(WI,"compareBy");var $I=s((t,e)=>t-e,"numberComparator");var MY=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},iWe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||sWe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function aWe(t,e){return t.reduce((r,n)=>r+e(n),0)}s(aWe,"sumBy");d();function dWe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(dWe,"groupBy");var lWe,uWe,cWe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[lWe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(uWe=Symbol.iterator,lWe=Symbol.toStringTag,uWe)](){return this.values()}};d();function Oge(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(Oge,"createSingleCallFunction");d();var Qge;(_=>{function t(S){return S&&typeof S=="object"&&typeof S[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(S){yield S}_.single=n,s(n,"single");function i(S){return t(S)?S:n(S)}_.wrap=i,s(i,"wrap");function o(S){return S||e}_.from=o,s(o,"from");function*a(S){for(let P=S.length-1;P>=0;P--)yield S[P]}_.reverse=a,s(a,"reverse");function c(S){return!S||S[Symbol.iterator]().next().done===!0}_.isEmpty=c,s(c,"isEmpty");function l(S){return S[Symbol.iterator]().next().value}_.first=l,s(l,"first");function u(S,P){let B=0;for(let F of S)if(P(F,B++))return!0;return!1}_.some=u,s(u,"some");function f(S,P){for(let B of S)if(P(B))return B}_.find=f,s(f,"find");function*p(S,P){for(let B of S)P(B)&&(yield B)}_.filter=p,s(p,"filter");function*h(S,P){let B=0;for(let F of S)yield P(F,B++)}_.map=h,s(h,"map");function*m(S,P){let B=0;for(let F of S)yield*P(F,B++)}_.flatMap=m,s(m,"flatMap");function*g(...S){for(let P of S)yield*P}_.concat=g,s(g,"concat");function A(S,P,B){let F=B;for(let Y of S)F=P(F,Y);return F}_.reduce=A,s(A,"reduce");function*y(S,P,B=S.length){for(P<-S.length&&(P=0),P<0&&(P+=S.length),B<0?B+=S.length:B>S.length&&(B=S.length);P<B;P++)yield S[P]}_.slice=y,s(y,"slice");function E(S,P=Number.POSITIVE_INFINITY){let B=[];if(P===0)return[B,S];let F=S[Symbol.iterator]();for(let Y=0;Y<P;Y++){let ee=F.next();if(ee.done)return[B,_.empty()];B.push(ee.value)}return[B,{[Symbol.iterator](){return F}}]}_.consume=E,s(E,"consume");async function b(S){let P=[];for await(let B of S)P.push(B);return Promise.resolve(P)}_.asyncToArray=b,s(b,"asyncToArray")})(Qge||={});d();var Uge=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function zOt(t){return Array.isArray(t)}s(zOt,"isEntries");var pWe,FY=class t{constructor(e,r){this[pWe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(zOt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Uge(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(pWe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},hWe,fWe=class{constructor(e,r){this[hWe]="ResourceSet";!e||typeof e=="function"?this._map=new FY(e):(this._map=new FY(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(hWe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var mWe,qge=class{constructor(){this[mWe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(mWe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Hge=class extends qge{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},OY=class extends Hge{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var QY=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var YOt=!1,U3=null;var gWe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,h){for(;p.length>0&&h.some(m=>typeof m=="string"?m===p[0]:p[0].match(m));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new QY;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(WI(l=>l.idx,$I));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let h=u[p];h=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${h}`;let g=o.get(u.slice(0,p).join(`
`)),A=dWe([...g].map(y=>i(y)[p]),y=>y);delete A[u[p]];for(let[y,E]of Object.entries(A))f.unshift(`    - stacktraces of ${E.length} other leaks continue with ${y}`);f.unshift(h)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function KOt(t){U3=t}s(KOt,"setDisposableTracker");if(YOt){let t="__is_disposable_tracked__";KOt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==Es.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==Es.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function q3(t){return U3?.trackDisposable(t),t}s(q3,"trackDisposable");function H3(t){U3?.markAsDisposed(t)}s(H3,"markAsDisposed");function Wge(t,e){U3?.setParent(t,e)}s(Wge,"setParentOfDisposable");function JOt(t,e){if(U3)for(let r of t)U3.setParent(r,e)}s(JOt,"setParentOfDisposables");function AWe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(AWe,"isDisposable");function UY(t){if(Qge.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(UY,"dispose");function yWe(...t){let e=vc(()=>UY(t));return JOt(t,e),e}s(yWe,"combinedDisposable");function vc(t){let e=q3({dispose:Oge(()=>{H3(e),t()})});return e}s(vc,"toDisposable");var Du=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;q3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(H3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{UY(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Wge(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Wge(e,null))}},Es=class{constructor(){this._store=new Du;q3(this),Wge(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){H3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Gh=class extends Es{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ha(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var CWe=Me(require("events"));var qY="CompletionRequested",eC=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new CWe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(qY,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=ud(this.ctx,e,`event.${qY}`);return this.#e.on(qY,r),Sn.Disposable.create(()=>this.#e.off(qY,r))}};d();var $ge=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},W3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new $ge(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var HY=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=xWe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=vWe(n.text,!1,o);if(l-c===f.length)for(let h=0,m=f.length;h<m;h++)u[h+c+1]=f[h];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let h=c+1+f.length,m=u.length;h<m;h++)u[h]=u[h]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=vWe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&EWe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},jI;(function(t){function e(i,o,a,c){return new HY(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof HY)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=jge(o.map(XOt),(f,p)=>{let h=f.range.start.line-p.range.start.line;return h===0?f.range.start.character-p.range.start.character:h}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(jI||(jI={}));function jge(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);jge(n,e),jge(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(jge,"mergeSort");function vWe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);EWe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(vWe,"computeLineOffsets");function EWe(t){return t===13||t===10}s(EWe,"isEOL");function xWe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(xWe,"getWellformedRange");function XOt(t){let e=xWe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(XOt,"getWellformedEdit");d();var bWe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(bWe||(bWe={}));var Gge;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Gge||(Gge={}));var IWe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(IWe||(IWe={}));var WY;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(WY||(WY={}));var yd;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=WY.MAX_VALUE),i===Number.MAX_VALUE&&(i=WY.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.line)&&Xe.uinteger(i.character)}s(r,"is"),t.is=r})(yd||(yd={}));var Ds;(function(t){function e(n,i,o,a){if(Xe.uinteger(n)&&Xe.uinteger(i)&&Xe.uinteger(o)&&Xe.uinteger(a))return{start:yd.create(n,i),end:yd.create(o,a)};if(yd.is(n)&&yd.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&yd.is(i.start)&&yd.is(i.end)}s(r,"is"),t.is=r})(Ds||(Ds={}));var $Y;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ds.is(i.range)&&(Xe.string(i.uri)||Xe.undefined(i.uri))}s(r,"is"),t.is=r})($Y||($Y={}));var TWe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ds.is(i.targetRange)&&Xe.string(i.targetUri)&&Ds.is(i.targetSelectionRange)&&(Ds.is(i.originSelectionRange)||Xe.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(TWe||(TWe={}));var Vge;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.numberRange(i.red,0,1)&&Xe.numberRange(i.green,0,1)&&Xe.numberRange(i.blue,0,1)&&Xe.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Vge||(Vge={}));var wWe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ds.is(i.range)&&Vge.is(i.color)}s(r,"is"),t.is=r})(wWe||(wWe={}));var _We;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.undefined(i.textEdit)||j3.is(i))&&(Xe.undefined(i.additionalTextEdits)||Xe.typedArray(i.additionalTextEdits,j3.is))}s(r,"is"),t.is=r})(_We||(_We={}));var SWe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(SWe||(SWe={}));var RWe;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return Xe.defined(o)&&(u.startCharacter=o),Xe.defined(a)&&(u.endCharacter=a),Xe.defined(c)&&(u.kind=c),Xe.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.uinteger(i.startLine)&&Xe.uinteger(i.startLine)&&(Xe.undefined(i.startCharacter)||Xe.uinteger(i.startCharacter))&&(Xe.undefined(i.endCharacter)||Xe.uinteger(i.endCharacter))&&(Xe.undefined(i.kind)||Xe.string(i.kind))}s(r,"is"),t.is=r})(RWe||(RWe={}));var zge;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&$Y.is(i.location)&&Xe.string(i.message)}s(r,"is"),t.is=r})(zge||(zge={}));var kWe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(kWe||(kWe={}));var PWe;(function(t){t.Unnecessary=1,t.Deprecated=2})(PWe||(PWe={}));var DWe;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Xe.string(n.href)}s(e,"is"),t.is=e})(DWe||(DWe={}));var jY;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return Xe.defined(o)&&(u.severity=o),Xe.defined(a)&&(u.code=a),Xe.defined(c)&&(u.source=c),Xe.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Xe.defined(o)&&Ds.is(o.range)&&Xe.string(o.message)&&(Xe.number(o.severity)||Xe.undefined(o.severity))&&(Xe.integer(o.code)||Xe.string(o.code)||Xe.undefined(o.code))&&(Xe.undefined(o.codeDescription)||Xe.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Xe.string(o.source)||Xe.undefined(o.source))&&(Xe.undefined(o.relatedInformation)||Xe.typedArray(o.relatedInformation,zge.is))}s(r,"is"),t.is=r})(jY||(jY={}));var $3;(function(t){function e(n,i,...o){let a={title:n,command:i};return Xe.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.title)&&Xe.string(i.command)}s(r,"is"),t.is=r})($3||($3={}));var j3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Xe.objectLiteral(a)&&Xe.string(a.newText)&&Ds.is(a.range)}s(i,"is"),t.is=i})(j3||(j3={}));var Yge;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Xe.string(i.label)&&(Xe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Xe.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(Yge||(Yge={}));var G3;(function(t){function e(r){let n=r;return Xe.string(n)}s(e,"is"),t.is=e})(G3||(G3={}));var BWe;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return j3.is(a)&&(Yge.is(a.annotationId)||G3.is(a.annotationId))}s(i,"is"),t.is=i})(BWe||(BWe={}));var Kge;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&tAe.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(Kge||(Kge={}));var Jge;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||G3.is(i.annotationId))}s(r,"is"),t.is=r})(Jge||(Jge={}));var Xge;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Xe.string(i.oldUri)&&Xe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Xe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Xe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||G3.is(i.annotationId))}s(r,"is"),t.is=r})(Xge||(Xge={}));var Zge;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Xe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Xe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Xe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||G3.is(i.annotationId))}s(r,"is"),t.is=r})(Zge||(Zge={}));var eAe;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Xe.string(i.kind)?Jge.is(i)||Xge.is(i)||Zge.is(i):Kge.is(i)))}s(e,"is"),t.is=e})(eAe||(eAe={}));var NWe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)}s(r,"is"),t.is=r})(NWe||(NWe={}));var LWe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.integer(i.version)}s(r,"is"),t.is=r})(LWe||(LWe={}));var tAe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&(i.version===null||Xe.integer(i.version))}s(r,"is"),t.is=r})(tAe||(tAe={}));var MWe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.string(i.uri)&&Xe.string(i.languageId)&&Xe.integer(i.version)&&Xe.string(i.text)}s(r,"is"),t.is=r})(MWe||(MWe={}));var rAe;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(rAe||(rAe={}));var hF;(function(t){function e(r){let n=r;return Xe.objectLiteral(r)&&rAe.is(n.kind)&&Xe.string(n.value)}s(e,"is"),t.is=e})(hF||(hF={}));var FWe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(FWe||(FWe={}));var OWe;(function(t){t.PlainText=1,t.Snippet=2})(OWe||(OWe={}));var QWe;(function(t){t.Deprecated=1})(QWe||(QWe={}));var UWe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.newText)&&Ds.is(i.insert)&&Ds.is(i.replace)}s(r,"is"),t.is=r})(UWe||(UWe={}));var qWe;(function(t){t.asIs=1,t.adjustIndentation=2})(qWe||(qWe={}));var HWe;(function(t){function e(r){let n=r;return n&&(Xe.string(n.detail)||n.detail===void 0)&&(Xe.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(HWe||(HWe={}));var WWe;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(WWe||(WWe={}));var $We;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})($We||($We={}));var GY;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Xe.string(i)||Xe.objectLiteral(i)&&Xe.string(i.language)&&Xe.string(i.value)}s(r,"is"),t.is=r})(GY||(GY={}));var jWe;(function(t){function e(r){let n=r;return!!n&&Xe.objectLiteral(n)&&(hF.is(n.contents)||GY.is(n.contents)||Xe.typedArray(n.contents,GY.is))&&(r.range===void 0||Ds.is(r.range))}s(e,"is"),t.is=e})(jWe||(jWe={}));var GWe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(GWe||(GWe={}));var VWe;(function(t){function e(r,n,...i){let o={label:r};return Xe.defined(n)&&(o.documentation=n),Xe.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(VWe||(VWe={}));var zWe;(function(t){t.Text=1,t.Read=2,t.Write=3})(zWe||(zWe={}));var YWe;(function(t){function e(r,n){let i={range:r};return Xe.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(YWe||(YWe={}));var KWe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(KWe||(KWe={}));var JWe;(function(t){t.Deprecated=1})(JWe||(JWe={}));var XWe;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(XWe||(XWe={}));var ZWe;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(ZWe||(ZWe={}));var e$e;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.name)&&Xe.number(i.kind)&&Ds.is(i.range)&&Ds.is(i.selectionRange)&&(i.detail===void 0||Xe.string(i.detail))&&(i.deprecated===void 0||Xe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(e$e||(e$e={}));var t$e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(t$e||(t$e={}));var VY;(function(t){t.Invoked=1,t.Automatic=2})(VY||(VY={}));var r$e;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.typedArray(i.diagnostics,jY.is)&&(i.only===void 0||Xe.typedArray(i.only,Xe.string))&&(i.triggerKind===void 0||i.triggerKind===VY.Invoked||i.triggerKind===VY.Automatic)}s(r,"is"),t.is=r})(r$e||(r$e={}));var n$e;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):$3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Xe.string(i.title)&&(i.diagnostics===void 0||Xe.typedArray(i.diagnostics,jY.is))&&(i.kind===void 0||Xe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||$3.is(i.command))&&(i.isPreferred===void 0||Xe.boolean(i.isPreferred))&&(i.edit===void 0||eAe.is(i.edit))}s(r,"is"),t.is=r})(n$e||(n$e={}));var i$e;(function(t){function e(n,i){let o={range:n};return Xe.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ds.is(i.range)&&(Xe.undefined(i.command)||$3.is(i.command))}s(r,"is"),t.is=r})(i$e||(i$e={}));var o$e;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Xe.uinteger(i.tabSize)&&Xe.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(o$e||(o$e={}));var s$e;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ds.is(i.range)&&(Xe.undefined(i.target)||Xe.string(i.target))}s(r,"is"),t.is=r})(s$e||(s$e={}));var a$e;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&Ds.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(a$e||(a$e={}));var c$e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(c$e||(c$e={}));var l$e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(l$e||(l$e={}));var u$e;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(u$e||(u$e={}));var d$e;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ds.is(i.range)&&Xe.string(i.text)}s(r,"is"),t.is=r})(d$e||(d$e={}));var f$e;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ds.is(i.range)&&Xe.boolean(i.caseSensitiveLookup)&&(Xe.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(f$e||(f$e={}));var p$e;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Ds.is(i.range)&&(Xe.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(p$e||(p$e={}));var h$e;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.defined(i)&&Ds.is(n.stoppedLocation)}s(r,"is"),t.is=r})(h$e||(h$e={}));var nAe;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(nAe||(nAe={}));var iAe;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&(i.tooltip===void 0||Xe.string(i.tooltip)||hF.is(i.tooltip))&&(i.location===void 0||$Y.is(i.location))&&(i.command===void 0||$3.is(i.command))}s(r,"is"),t.is=r})(iAe||(iAe={}));var m$e;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Xe.objectLiteral(i)&&yd.is(i.position)&&(Xe.string(i.label)||Xe.typedArray(i.label,iAe.is))&&(i.kind===void 0||nAe.is(i.kind))&&i.textEdits===void 0||Xe.typedArray(i.textEdits,j3.is)&&(i.tooltip===void 0||Xe.string(i.tooltip)||hF.is(i.tooltip))&&(i.paddingLeft===void 0||Xe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Xe.boolean(i.paddingRight))}s(r,"is"),t.is=r})(m$e||(m$e={}));var g$e;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(g$e||(g$e={}));var A$e;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(A$e||(A$e={}));var y$e;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(y$e||(y$e={}));var C$e;(function(t){t.Invoked=0,t.Automatic=1})(C$e||(C$e={}));var v$e;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(v$e||(v$e={}));var E$e;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(E$e||(E$e={}));var x$e;(function(t){function e(r){let n=r;return Xe.objectLiteral(n)&&Gge.is(n.uri)&&Xe.string(n.name)}s(e,"is"),t.is=e})(x$e||(x$e={}));var b$e;(function(t){function e(o,a,c,l){return new oAe(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Xe.defined(a)&&Xe.string(a.uri)&&(Xe.undefined(a.languageId)||Xe.string(a.languageId))&&Xe.uinteger(a.lineCount)&&Xe.func(a.getText)&&Xe.func(a.positionAt)&&Xe.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let h=f.range.start.line-p.range.start.line;return h===0?f.range.start.character-p.range.start.character:h}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],h=o.offsetAt(p.range.start),m=o.offsetAt(p.range.end);if(m<=u)c=c.substring(0,h)+p.newText+c.substring(m,c.length);else throw new Error("Overlapping edit");u=h}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,h=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[h++]=l[f++]:o[h++]=u[p++];for(;f<l.length;)o[h++]=l[f++];for(;p<u.length;)o[h++]=u[p++];return o}s(i,"mergeSort")})(b$e||(b$e={}));var oAe=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return yd.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return yd.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Xe;(function(t){let e=Object.prototype.toString;function r(m){return typeof m<"u"}s(r,"defined"),t.defined=r;function n(m){return typeof m>"u"}s(n,"undefined"),t.undefined=n;function i(m){return m===!0||m===!1}s(i,"boolean"),t.boolean=i;function o(m){return e.call(m)==="[object String]"}s(o,"string"),t.string=o;function a(m){return e.call(m)==="[object Number]"}s(a,"number"),t.number=a;function c(m,g,A){return e.call(m)==="[object Number]"&&g<=m&&m<=A}s(c,"numberRange"),t.numberRange=c;function l(m){return e.call(m)==="[object Number]"&&-2147483648<=m&&m<=2147483647}s(l,"integer"),t.integer=l;function u(m){return e.call(m)==="[object Number]"&&0<=m&&m<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(m){return e.call(m)==="[object Function]"}s(f,"func"),t.func=f;function p(m){return m!==null&&typeof m=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function h(m,g){return Array.isArray(m)&&m.every(g)}s(h,"typedArray"),t.typedArray=h})(Xe||(Xe={}));var us=class{static{s(this,"LocationFactory")}static{this.range=Ds.create.bind(Ds)}static{this.position=yd.create.bind(yd)}},Fv=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=jI.create(e.clientUri,e.clientLanguageId,n,e.getText());return jI.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=jI.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return jI.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=x3({uri:e,languageId:r})){return new t(fl(e),jI.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Ds.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Ds.create(yd.create(r,0),yd.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var mF={isBlocked:!1,reason:"VALID_FILE"},zY={isBlocked:!1,reason:"NO_MATCHING_POLICY"},I$e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},M2={all:"all",repo:"repo"},GI=new _t("contentExclusion");d();d();var YY=class{static{s(this,"PolicyEvaluator")}};d();d();d();var T$e=new _t("repository"),F2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},jg=class{static{s(this,"GitConfigLoader")}},KY=class extends jg{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var w$e=require("os");var JY=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return jb.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=jb.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,w$e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var XY=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(jg).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new JY(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var ZOt=100,sAe=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},Ov=class t{constructor(e){this.ctx=e;this.remoteResolver=new XY;this.cache=new Or(ZOt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=dd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new sAe(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(bo),i=qo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=qo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=tS(r,o[1]),c=qo(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=qo(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=qo(a,"commondir");a=tS(a,(await e.readFileString(u)).trimEnd());let f=qo(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var O2=s((t,e)=>{if(Yy.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...Yy.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var eK=new WeakMap;function tK(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&eK.has(t))return eK.get(t);switch(eK.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=tK(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+tK(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+tK(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return eK.set(t,n),n}s(tK,"t");function rK(t){return tK(t,0)}s(rK,"r");var aAe=new WeakMap;function _$e(t,e,r=rK(e)){let n,i,o=aAe.get(t);o||(aAe.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(h){for(;u=n[f++];u.r(h));}s(p,"o"),aAe.delete(t),t(i).then(function(h){if(h.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=h[f++],f<=h.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(_$e,"n");var S$e=new WeakMap;function e7t(t,e,r,n=rK(r)){if(e||(e=S$e.get(t)),e||S$e.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=_$e(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(e7t,"n");function R$e(t,e){return function(r,n){return e7t(t,e,r,n)}}s(R$e,"o");d();var K$e=Me(H$e(),1);d();var AF=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var c7t={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},yF=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),l7t=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),W$e=s(t=>t.join(""),"rangesToString"),$$e=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let A=t.charAt(o);if((A==="!"||A==="^")&&o===r+1){u=!0,o++;continue}if(A==="]"&&a&&!l){f=o+1;break}if(a=!0,A==="\\"&&!l){l=!0,o++;continue}if(A==="["&&!l){for(let[y,[E,b,_]]of Object.entries(c7t))if(t.startsWith(y,o)){if(p)return["$.",!1,t.length-r,!0];o+=y.length,_?i.push(E):n.push(E),c=c||b;continue e}}if(l=!1,p){A>p?n.push(yF(p)+"-"+yF(A)):A===p&&n.push(yF(A)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(yF(A+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=A,o+=2;continue}n.push(yF(A)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let A=n[0].length===2?n[0].slice(-1):n[0];return[l7t(A),!1,f-r,!1]}let h="["+(u?"^":"")+W$e(n)+"]",m="["+(u?"":"^")+W$e(i)+"]";return[n.length&&i.length?"("+h+"|"+m+")":n.length?h:m,c,f-r,!0]},"parseClass");d();var VI=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var u7t=new Set(["!","?","+","*","@"]),j$e=s(t=>u7t.has(t),"isExtglobType"),d7t="(?!(?:^|/)\\.\\.?(?:$|/))",nK="(?!\\.)",f7t=new Set(["[","."]),p7t=new Set(["..","."]),h7t=new Set("().*{}+?[]^$\\!"),m7t=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),uAe="[^/]",G$e=uAe+"*?",V$e=uAe+"+?",V3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let m=n,g="";for(;m<e.length;){let A=e.charAt(m++);if(o||A==="\\"){o=!o,g+=A;continue}if(a){m===c+1?(A==="^"||A==="!")&&(l=!0):A==="]"&&!(m===c+2&&l)&&(a=!1),g+=A;continue}else if(A==="["){a=!0,c=m,l=!1,g+=A;continue}if(!i.noext&&j$e(A)&&e.charAt(m)==="("){r.push(g),g="";let y=new t(A,r);m=t.#u(e,y,m,i),r.push(y);continue}g+=A}return r.push(g),m}let u=n+1,f=new t(null,r),p=[],h="";for(;u<e.length;){let m=e.charAt(u++);if(o||m==="\\"){o=!o,h+=m;continue}if(a){u===c+1?(m==="^"||m==="!")&&(l=!0):m==="]"&&!(u===c+2&&l)&&(a=!1),h+=m;continue}else if(m==="["){a=!0,c=u,l=!1,h+=m;continue}if(j$e(m)&&e.charAt(u)==="("){f.push(h),h="";let g=new t(m,f);f.push(g),u=t.#u(e,g,u,i);continue}if(m==="|"){f.push(h),h="",p.push(f),f=new t(null,r);continue}if(m===")")return h===""&&r.#n.length===0&&(r.#d=!0),f.push(h),h="",r.push(...p,f),u;h+=m}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(m=>{let[g,A,y,E]=typeof m=="string"?t.#h(m,this.#t,l):m.toRegExpSource(e);return this.#t=this.#t||y,this.#i=this.#i||E,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&p7t.has(this.#n[0]))){let g=f7t,A=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),y=!r&&!e&&g.has(u.charAt(0));f=A?d7t:y?nK:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,VI(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,VI(this.toString()),!1,!1]}let a=!n||e||r||!nK?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?nK:"")+V$e;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?nK:"")+G$e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,VI(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#h(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(h7t.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,h]=$$e(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||h;continue}}if(l==="*"){n&&e==="*"?o+=V$e:o+=G$e,r=!0;continue}if(l==="?"){o+=uAe,r=!0;continue}o+=m7t(l)}return[o,VI(e),!!r,a]}};d();var dAe=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Ec=s((t,e,r={})=>(AF(e),!r.nocomment&&e.charAt(0)==="#"?!1:new z3(e,r).match(t)),"minimatch"),g7t=/^\*+([^+@!?\*\[\(]*)$/,A7t=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),y7t=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),C7t=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),v7t=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),E7t=/^\*+\.\*+$/,x7t=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),b7t=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),I7t=/^\.\*+$/,T7t=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),w7t=/^\*+$/,_7t=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),S7t=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),R7t=/^\?+([^+@!?\*\[\(]*)?$/,k7t=s(([t,e=""])=>{let r=J$e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),P7t=s(([t,e=""])=>{let r=X$e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),D7t=s(([t,e=""])=>{let r=X$e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),B7t=s(([t,e=""])=>{let r=J$e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),J$e=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),X$e=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),Z$e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",z$e={win32:{sep:"\\"},posix:{sep:"/"}},N7t=Z$e==="win32"?z$e.win32.sep:z$e.posix.sep;Ec.sep=N7t;var zh=Symbol("globstar **");Ec.GLOBSTAR=zh;var L7t="[^/]",M7t=L7t+"*?",F7t="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",O7t="(?:(?!(?:\\/|^)\\.).)*?",Q7t=s((t,e={})=>r=>Ec(r,t,e),"filter");Ec.filter=Q7t;var Vh=s((t,e={})=>Object.assign({},t,e),"ext"),U7t=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ec;let e=Ec;return Object.assign(s((n,i,o={})=>e(n,i,Vh(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Vh(t,o))}static defaults(i){return e.defaults(Vh(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Vh(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Vh(t,o))}},unescape:s((n,i={})=>e.unescape(n,Vh(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Vh(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Vh(t,i)),"filter"),defaults:s(n=>e.defaults(Vh(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Vh(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Vh(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Vh(t,o)),"match"),sep:e.sep,GLOBSTAR:zh})},"defaults");Ec.defaults=U7t;var eje=s((t,e={})=>(AF(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,K$e.default)(t)),"braceExpand");Ec.braceExpand=eje;var q7t=s((t,e={})=>new z3(t,e).makeRe(),"makeRe");Ec.makeRe=q7t;var H7t=s((t,e,r={})=>{let n=new z3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Ec.match=H7t;var Y$e=/[?*]|[+@!]\(.*?\)|\[|\]/,W7t=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),z3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){AF(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||Z$e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!Y$e.test(o[2]))&&!Y$e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let A=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),y=!A&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),E=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!E&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=y?3:A?0:void 0,S=b?3:E?0:void 0;if(typeof _=="number"&&typeof S=="number"){let[P,B]=[e[_],r[S]];P.toLowerCase()===B.toLowerCase()&&(r[S]=P,S>_?r=r.slice(S):_>S&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===zh){this.debug("GLOBSTAR",[r,f,p]);var h=a,m=c+1;if(m===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;h<l;){var g=e[h];if(this.debug(`
globstar while`,e,h,r,m,g),this.matchOne(e.slice(h),r.slice(m),n))return this.debug("globstar found match!",h,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,h,r,m);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,h,r,m),h===l))}let A;if(typeof f=="string"?(A=p===f,this.debug("string match",f,p,A)):(A=f.test(p),this.debug("pattern match",f,p,A)),!A)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return eje(this.pattern,this.options)}parse(e){AF(e);let r=this.options;if(e==="**")return zh;if(e==="")return"";let n,i=null;(n=e.match(w7t))?i=r.dot?S7t:_7t:(n=e.match(g7t))?i=(r.nocase?r.dot?v7t:C7t:r.dot?y7t:A7t)(n[1]):(n=e.match(R7t))?i=(r.nocase?r.dot?P7t:k7t:r.dot?D7t:B7t)(n):(n=e.match(E7t))?i=r.dot?b7t:x7t:(n=e.match(I7t))&&(i=T7t);let o=V3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?M7t:r.dot?F7t:O7t,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?W7t(f):f===zh?zh:f._src});return u.forEach((f,p)=>{let h=u[p+1],m=u[p-1];f!==zh||m===zh||(m===void 0?h!==void 0&&h!==zh?u[p+1]="(?:\\/|"+n+"\\/)?"+h:u[p]=n:h===void 0?u[p-1]=m+"(?:\\/|"+n+")?":h!==zh&&(u[p-1]=m+"(?:\\/|\\/"+n+"\\/)"+h,u[p+1]=zh))}),u.filter(f=>f!==zh).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Ec.defaults(e).Minimatch}};Ec.AST=V3;Ec.Minimatch=z3;Ec.escape=dAe;Ec.unescape=VI;var fAe="contentExclusion",iK=class extends YY{static{s(this,"CopilotContentExclusion")}#e;#t=new Or(1e4);#i=new Or(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=tS(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??M2.all);if(!i)return zY;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return GI.exception(this.#e,n,`${fAe}.evaluate`),I$e}return mF}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=mF,a,c=bde(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(Ec(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=pAe(l,"FILE_BLOCKED_PATH"),a=u;break e}return GI.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return mF;let a=this.evaluateFileContent(i,o,n);return GI.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>tje(a)).some(a=>a.test(n)))return pAe(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>tje(a)).some(a=>a.test(n)))return pAe(i,"FILE_BLOCKED_TEXT_BASED");return mF}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Na(this.#e,e,`${fAe}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=R$e(async e=>{let r=await this.#e.get(Gr).getGitHubSession();if(!r)throw new qs("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(M2.all);e.filter(u=>u!==M2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==M2.all).join(",")),i.searchParams.set("scope",o?M2.all:M2.repo);let c=await yh(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new py(c)}return this.#s("fetch.success"),O2(V7t,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(Ov).getRepo(dd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${fAe}.${e}`,Fr.createAndMarkAsIssued(r,n))}};function tje(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(tje,"stringToRegex");function pAe(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(pAe,"fileBlockedEvaluationResult");var $7t=I.Object({name:I.String(),type:I.String()}),j7t=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:$7t}),hAe=I.Array(j7t),G7t=I.Object({rules:hAe,last_updated_at:I.String(),scope:I.String()}),V7t=I.Array(G7t);var Yc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new iK(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(vr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(vr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ha(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=Date.now(),p=await u.evaluate(e,r),h=Date.now();return i.push({key:l,result:p,elapsedMs:h-f}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){GI.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(yo).setInactive(r??"Copilot is disabled"):this.ctx.get(yo).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===zY.reason)return GI.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={elapsedMs:i};return Bt(this.ctx,e,Fr.createAndMarkAsIssued(c,l)),Bt(this.ctx,e,Fr.createAndMarkAsIssued({...c,path:r},l),1),GI.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function Qv(t,e,r){let n=await t.get(Yc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(Qv,"isDocumentValid");var vr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await Qv(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=fl(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return Qv(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(bo).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(bo).readFileString(e)}getWorkspaceFolder(e){let r=fl(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(fl(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=fl(e.uri);for(let n of this.getWorkspaceFolders()){let i=fl(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Ui(r)}};function Zs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(Zs,"statusFromTextDocumentResult");var Cn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(vr).getRelativePath(e)??Ui(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(vr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await Qv(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:Fv.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(bo).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(bo).stat(e)).size/1024/1024}};d();d();var Yh=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function tC(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(tC,"delay");d();var mAe=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},oK=class extends mAe{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var e0=class{constructor(e){this.ctx=e;this.#e=new _t("AsyncCompletionManager");this.requests=new Or(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(gAe(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new oK;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Ot).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Yh,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(gAe(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:h}=f.choice;if(!h.startsWith(p)||h.length<=p.length){l(f.headerRequestId)();return}h=h.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(h)}`),a.resolve([{...f.choice,completionText:h},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)gAe(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function gAe(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(gAe,"isCandidate");d();d();var vF=class{constructor(e){this.maxSize=e;this.root=new CF;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new CF;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new CF;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},CF=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Gg=class{constructor(){this.cache=new vF(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new vF(100)}};d();d();d();var zI=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return hd.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=cce(n,hd.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{lce(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var sK=class extends zI{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function rje(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=cce(c,hd.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{lce(c,u,f)}}s(rje,"getBlockPositionType");d();d();var Uv={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function nje(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let h;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?h=-.10069846585436666:h=-.010577995535809317:t[146]>1e-35?h=-.008877238274428668:t[280]>1e-35?h=.10076055897012692:t[6]>70.50000000000001?h=-.020603523042565547:t[7]>1.5000000000000002?h=.02819095420813202:h=-.1223354167911277:h=-.025073583348334844:t[8]>416.50000000000006?h=.01718560189149466:t[230]>1e-35?h=.12281803224342265:h=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.13070568109867683:t[4]>63.50000000000001?h=-.027221825262496814:h=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?h=-.00605574271293711:h=.04739407327741249:h=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?h=.1252215087035768:h=.003905888677601057:t[52]>1e-35?h=.045466299731038815:t[2]>100.50000000000001?h=-.07815624550168065:t[308]>1e-35?h=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?h=-.03538265083203445:t[18]>1e-35?h=.1591211669800727:h=.015151475408241136:t[8]>557.5000000000001?h=-.04225569725456342:h=-.022455546324243267:t[308]>1e-35?h=.01325441736085826:t[197]>1e-35?h=.03752194600682512:t[225]>1e-35?h=.06583712394533976:h=-.005205289866839043;let m;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?m=.010264022580774884:m=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?m=-.0936747137352166:t[0]>384.50000000000006?m=.019846244507320695:m=-.0751102554077272:m=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?m=.11654906890054273:m=.0346250587613322:t[4]>39.50000000000001?m=-.08568002378645614:t[9]>16.500000000000004?m=-.12010535752923689:m=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.12056431231412057:t[131]>1e-35?m=.03652965550568472:m=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?m=-.10141481732178981:m=-.003936457893178248:t[31]>1e-35?m=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?m=.12972828769588213:m=-.003137412232297087:t[2]>100.50000000000001?m=-.0730872929087944:t[308]>1e-35?m=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?m=.07934620723812878:m=-.018598568353702116:m=-.030635505446410763:t[128]>1e-35?m=-.06962290453843294:t[84]>1e-35?m=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?m=-.034938657503885584:m=.016339322898966915:t[197]>1e-35?m=.03358907965870046:t[18]>1e-35?m=-.01754013791515288:m=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let A;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?A=.03507251990078782:t[2]>14.500000000000002?A=.004905698363309292:t[8]>2421.5000000000005?A=-.10306119951984316:A=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?A=-.08503171085833393:A=.015130974593044409:A=-.024425267075198206:A=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?A=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?A=.09908783187786288:A=-.06920877329925636:t[8]>241.50000000000003?A=-.016756131804203496:t[9]>33.50000000000001?A=.04903179955263626:t[217]>1e-35?A=-.047416847619291644:A=-.0017200891991431119:t[39]>1e-35?A=-.10389927604977028:t[134]>1e-35?A=-.050480365434872866:t[178]>1e-35?A=-.05167855791556937:t[8]>2134.5000000000005?A=-.01663197335585307:t[242]>1e-35?A=-.05361323756615453:t[118]>1e-35?A=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?A=-.0016544848369620534:A=.04494144460483587:A=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?A=.051166688553608355:A=-.06623908820705383:t[84]>1e-35?A=-.12990936092409747:t[306]>1e-35?A=-.07020596855118943:t[49]>1e-35?A=.06272964802556856:t[192]>1e-35?A=.06540204627162581:A=.008277910531592885;let y;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?y=.003325460510319164:y=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?y=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?y=.0697359767152808:t[230]>1e-35?y=.06513506845651572:y=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?y=.013616385013146277:y=.04171540100223404:y=-.04360396575094823:t[212]>1e-35?y=.025945477945627522:y=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?y=-.07856453318384411:y=-.014803893522351739:t[39]>1e-35?y=-.09185452630751932:t[149]>1e-35?y=-.07122426086157027:t[134]>1e-35?y=-.04231052091434186:t[227]>1e-35?y=-.029815824273994197:t[50]>1e-35?y=-.15736496271211153:t[222]>1e-35?y=-.02360285356956629:t[128]>1e-35?y=-.03922080193836443:t[136]>1e-35?y=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?y=-.0029736170756835783:y=-.06482902102259112:t[84]>1e-35?y=-.11340924635708383:t[94]>1e-35?y=-.03635703457792193:t[118]>1e-35?y=-.058181913914186034:t[126]>1e-35?y=-.062030576241517366:t[116]>1e-35?y=-.045086301850604006:t[25]>1e-35?y=-.031665223656767286:t[203]>1e-35?y=-.009444685731407691:y=.0112265153772187;let E;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?E=.022717227245241684:E=-.049700413274686266:E=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?E=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?E=-.12263724050601095:E=.0070743478891288035:t[288]>1e-35?E=-.050439138582109:E=.0255701593657891:E=-.005812703740580558:t[6]>49.50000000000001?E=-.008542694147899113:E=.035147383686665:E=-.0960461939274094:t[32]>1e-35?E=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?E=-.01800870272656664:E=-.07817304234604389:t[30]>1e-35?E=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?E=.08778416018479411:E=-.026563982720830256:E=-.05296139548112329:t[50]>1e-35?E=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?E=-.036572140520852024:t[183]>1e-35?E=-.10766853736801459:E=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?E=.09513215942486053:E=-.03641865277445567:t[10]>59.50000000000001?E=.03177172388687933:t[39]>1e-35?E=-.10234241303898953:t[243]>1e-35?E=-.02966738115984321:t[190]>1e-35?E=-.04312785336449181:t[118]>1e-35?E=-.05808521194081524:E=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let S;t[308]>1e-35?t[0]>7277.500000000001?S=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?S=-.040884836258675006:t[210]>1e-35?S=-.0003719413278428804:t[13]>1e-35?S=.030287610160818174:S=.011174130013595384:t[1]>38.50000000000001?S=-.0662442170185784:S=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?S=-.08092286307197555:S=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?S=-.1155211149523894:S=-.0032903546638958538:t[149]>1e-35?S=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?S=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?S=-.025416927789760076:S=.02777568919793122:S=-.10310351509769732:S=.013549608903688785:t[186]>1e-35?S=.08513865847420551:S=-.009306721292510369:t[31]>1e-35?S=.009780833952582307:t[23]>1e-35?S=.011143773934157629:t[210]>1e-35?S=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?S=-.04846287537743046:S=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?S=-.034224938681445764:t[8]>1641.5000000000002?S=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?S=-.027950103994861836:S=.14575930827829034:S=-.007124740389354946:t[10]>22.500000000000004?S=.013173304107866726:S=-.11119620042551365;let P;t[131]>1e-35?P=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?P=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?P=-.022305242912035072:P=.024792895826340516:P=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?P=.2080083584805785:P=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?P=.060783227455868206:P=-.056904865557409035:P=-.03278952553107572:t[192]>1e-35?P=.13117402617043625:P=.01647119888257836:P=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?P=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?P=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?P=-.11083976837572328:t[146]>1e-35?P=-.03359294484446772:P=-.0042815953591236475:t[190]>1e-35?P=-.09264239592903775:t[10]>1e-35?P=.022282638485105657:P=-.0205994057928458:t[5]>4918.500000000001?P=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?P=.08935072241972036:P=-.03781647876237494:P=.0062655753179671515:t[31]>1e-35?P=.008603500300349887:t[230]>1e-35?P=.03350056932774173:t[23]>1e-35?t[241]>1e-35?P=.10277555508503314:P=.0017901817172993888:t[2]>98.50000000000001?P=-.05920081229672715:P=-.015722173275739208;let B;t[13]>1e-35?t[118]>1e-35?B=.07957905150112207:t[1]>125.50000000000001?B=-.0662620579858685:t[145]>1e-35?B=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?B=-.0009597832580977798:B=-.081474760755753:t[212]>1e-35?B=.03637001492325179:B=.006912305498963309:t[32]>1e-35?B=-.03919900630910754:t[134]>1e-35?B=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?B=.06671440854602108:t[136]>1e-35?B=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?B=.026430947016830915:B=-.04075501264495112:t[9]>93.50000000000001?B=-.04353169430417609:t[50]>1e-35?B=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?B=.068392679163672:t[10]>1.5000000000000002?B=-.0209659792007492:B=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?B=.07254524592323175:B=-.0319087835282534:B=.00037444813327793425:B=-.025138768151370408:t[243]>1e-35?B=-.050010891710502096:t[94]>1e-35?B=-.0817513550778599:t[122]>1e-35?B=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?B=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?B=.1454877641381946:B=.053787998331240316:t[9]>33.50000000000001?B=.08602629796680285:B=-.03895127455803038:B=.008830878042315722;let F;t[131]>1e-35?F=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?F=.07473600489975568:t[0]>93.50000000000001?F=-.021596848506011502:F=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?F=.10264284346448256:F=.031042487183181262:F=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?F=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?F=.006271403149804702:F=-.030013637555715046:t[0]>4449.500000000001?F=-.06556876058654929:F=.06437994816903034:t[32]>1e-35?F=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?F=-.09349726304052086:t[210]>1e-35?F=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?F=-.029188394315052574:F=.017219308333820193:F=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?F=-.04428555753857688:F=.0001456106867817353:t[5]>213.50000000000003?F=.01740292726636365:F=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?F=.03410288911259329:t[121]>1e-35?F=-.06056527462120627:t[8]>2592.5000000000005?F=.12166808844363577:t[191]>1e-35?F=.11669879218998758:F=-.001664858391716235:F=-.01262927450503166:F=-.04506589951879664:t[227]>1e-35?F=-.08548904959752329:F=.02156080776537726;let Y;t[306]>1e-35?t[149]>1e-35?Y=-.1389218965136736:Y=-.032218642644416894:t[13]>1e-35?Y=.006465035217331847:t[50]>1e-35?Y=-.1381687930130022:t[179]>1e-35?Y=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?Y=-.03262719498763048:Y=.023342916702125613:t[191]>1e-35?Y=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?Y=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?Y=-.09989343595668776:Y=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?Y=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?Y=-.09165257825246746:t[9]>32.50000000000001?Y=.02484870392366004:Y=-.008499493096971395:t[8]>24.500000000000004?Y=.02459679192828244:Y=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?Y=.0015644546318714849:Y=-.06579524865022705:Y=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?Y=.03331853632960164:Y=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?Y=-.019091477207111116:Y=.037878468575478504:t[94]>1e-35?Y=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?Y=.16919658785098224:t[243]>1e-35?Y=-.06580584936754524:Y=.01567555159935563:t[129]>1e-35?Y=.06721746994993226:t[10]>32.50000000000001?Y=-.046394462507797975:Y=-.006436180519584767;let ee;t[131]>1e-35?ee=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?ee=.019122095523977856:t[298]>1e-35?ee=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?ee=-.026094309429557913:t[204]>1e-35?ee=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?ee=.012643810980689466:ee=-.07884161741497837:ee=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?ee=.04493082949897325:ee=.18046359750455776:t[7]>18.500000000000004?ee=-.018667348656891496:ee=.02584325784698236:ee=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?ee=.04749240016989375:ee=-.0333334578246718:t[5]>3276.5000000000005?ee=.11330554740098908:t[7]>94.50000000000001?ee=.1296600395033268:ee=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?ee=-.13787130789142835:t[0]>1847.5000000000002?ee=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?ee=.028856848462727104:ee=-.11197632885851168:ee=.08169801342016791:t[1]>22.500000000000004?ee=-.021052888644970163:ee=.019048604298876753:t[7]>4.500000000000001?ee=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?ee=.03432638833359197:ee=-.0036767863082454973:t[1]>48.50000000000001?ee=.03087375270128195:t[2]>3.5000000000000004?ee=-.04219917149740248:ee=.018818493993207935;let V;t[306]>1e-35?V=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?V=-.09091897542577475:V=.04042943082645558:t[218]>1e-35?V=.056254985867151:V=-.053848117950183044:V=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?V=.021581808008986944:V=-.05639286496176611:V=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?V=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?V=.023885302967553288:V=.1617794086125622:t[212]>1e-35?V=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?V=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?V=.01894935813286188:V=-.06449356357429188:V=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?V=-.034718828212885515:V=.0898976288814321:t[1]>17.500000000000004?V=-.15440137451988326:V=-.03864183216821465:V=.009988507307006308:V=-.08540311947043305:t[50]>1e-35?V=-.13323659732101975:t[134]>1e-35?V=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?V=.08082476177379844:V=-.041665761903645876:t[179]>1e-35?V=-.12405023987936657:t[39]>1e-35?V=-.06247416524997478:t[138]>1e-35?V=-.10724031753676487:V=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let U;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?U=-.03461119351456781:U=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?U=-.12404435523286539:U=-.0034376913880382956:U=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?U=.0037507103585310234:U=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?U=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?U=-.04832024079663151:t[37]>1e-35?U=-.037103393468366934:U=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?U=.032539071163832034:t[5]>1643.5000000000002?U=.036408625378035665:t[0]>1500.5000000000002?U=-.1346358322854993:U=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?U=-.1133991164577881:t[9]>52.50000000000001?U=-.024478640359723122:U=.03673777861098756:U=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?U=.002583438691776944:U=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?U=-.02141222346712401:U=.06392462314316179:t[4]>12.500000000000002?U=.08700122294434816:t[8]>267.50000000000006?U=.056923170082743224:U=-.07716309825583327:t[32]>1e-35?U=-.03961343943752142:U=.002674914122888783:t[1]>42.50000000000001?U=-.05217539654421676:t[145]>1e-35?U=.09553630282946368:U=-.009424791262477729;let X;t[183]>1e-35?X=-.05753337139158443:t[308]>1e-35?X=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?X=-.10477869875380448:X=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?X=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?X=-.04442302951713574:X=.00012409888451734224:X=-.092199119633697:t[225]>1e-35?X=.13773072450201831:t[0]>2882.5000000000005?X=.0028540012229920533:t[298]>1e-35?X=.07134486044361629:X=.014297412329837425:t[145]>1e-35?X=.05608385321902638:t[92]>1e-35?X=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?X=-.0039957800609801315:X=.0776927564241081:t[203]>1e-35?X=-.05502900859432093:t[105]>1e-35?X=.06062892720841595:X=-.009574839629252128:t[31]>1e-35?X=.009488858841144216:t[23]>1e-35?t[20]>1e-35?X=.08818126313644752:t[8]>161.50000000000003?X=.014353968957885408:X=-.022240738532827903:t[210]>1e-35?X=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?X=-.043902062079383485:X=-.014741559220396223:X=-.00934935734853194:t[6]>32.50000000000001?X=.1514593126307404:X=.010771222510801532:t[10]>22.500000000000004?X=.01412495209334078:X=-.08576940379502533;let K;t[0]>384.50000000000006?t[84]>1e-35?K=-.06647690967306838:t[2]>101.50000000000001?K=-.024451334501552457:t[306]>1e-35?K=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?K=.0031858381443673127:K=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?K=-.08601340441214533:t[1]>29.500000000000004?K=.10487598629539963:t[8]>597.5000000000001?K=-.0786529133673238:K=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?K=-.04883600353740688:t[126]>1e-35?K=-.03794042763348827:K=-.003358871967539988:t[210]>1e-35?K=.054991356498447566:t[6]>19.500000000000004?K=-.007418396981635549:K=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?K=-.02143003429501711:K=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?K=-.006636355416244082:K=-.06483095743431454:t[4]>21.500000000000004?K=-.028975965946833545:K=.022012264796522657:K=-.06653648243193663:t[5]>4593.500000000001?K=.01753551428088607:t[217]>1e-35?K=-.028864824937700297:t[94]>1e-35?K=-.04885192273020658:t[279]>1e-35?K=.08105715462329498:t[121]>1e-35?K=-.04576676034750651:K=.004795141324949362:t[1]>42.50000000000001?K=-.047446619702809195:t[145]>1e-35?K=.08400495571952321:K=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let W;t[0]>384.50000000000006?t[84]>1e-35?W=-.06088131453064195:t[147]>1e-35?W=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?W=.04219361472548491:W=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?W=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?W=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?W=-.11431764534511478:W=.013549717238356157:W=-.020987333767091276:t[6]>2.5000000000000004?W=-.02914877855133127:W=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?W=-.10087072787978416:t[37]>1e-35?W=-.030467397753331196:t[229]>1e-35?W=-.1017559811057469:t[4]>20.500000000000004?W=-.00413177742240167:t[20]>1e-35?W=.05213315982685969:W=.0037921635866823133:t[8]>51.50000000000001?W=.07327913092421544:t[6]>49.50000000000001?W=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?W=.02744420891894289:W=.11288946357194463:W=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?W=-.012329314369909049:W=.026816658655600168:W=-.0872405354618811:W=.007872673500247845:t[1]>42.50000000000001?W=-.04309044198258254:t[145]>1e-35?W=.07572529147860785:t[7]>5.500000000000001?W=-.013837187093264945:t[1]>17.500000000000004?W=.04208698439539668:W=-.06284346769019863;let J;t[294]>1e-35?J=-.0384794324818203:t[266]>1e-35?J=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?J=.07432960094940501:J=-.035248735855751855:t[134]>1e-35?J=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?J=-.01706896375068821:J=.08212247914968074:t[2]>59.50000000000001?J=-.09546478958824225:t[6]>53.50000000000001?J=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?J=.02816463285971267:J=.15449139016588445:J=-.10199787406123524:J=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?J=-.13924786681478077:J=-.0072772442570213335:t[39]>1e-35?J=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?J=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?J=-.11174465335620831:J=.00013144040097180107:J=-.08493919336681105:t[42]>1e-35?J=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?J=-.015540659878839153:J=-.14442609417300142:t[21]>1e-35?J=-.025251979447574083:J=.0023698372645272847:t[18]>1e-35?J=.07269739695712212:t[8]>2592.5000000000005?J=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?J=-.01835130329646532:t[9]>45.50000000000001?J=.02023047454629885:J=.16469378262221102:J=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let ae;t[183]>1e-35?t[17]>1e-35?ae=.030100940443356424:t[10]>1.5000000000000002?ae=-.10861112216742408:ae=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ae=-.032062878390325456:ae=-.10808232631806887:t[8]>1641.5000000000002?ae=-.06147013392655731:t[4]>12.500000000000002?ae=.03324767551088266:t[145]>1e-35?ae=.028851633810612017:ae=-.054871239091792784:t[134]>1e-35?ae=-.023813968121342108:t[266]>1e-35?ae=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ae=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ae=-.025350325484720576:ae=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ae=.056817276537534815:ae=-.07674158463557636:ae=-.06335553143454145:t[1]>56.50000000000001?ae=.16390494217299284:ae=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ae=.041717597065890205:ae=-.10357913492269129:t[10]>29.500000000000004?ae=.1365512866715726:ae=.020600048310575665:ae=.09708785634773187:ae=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ae=-.03146213719547347:ae=.11784024316238083:ae=-.050940520532045355:ae=-.047988344143075616:t[191]>1e-35?ae=.028764654731460032:ae=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let Ae;t[179]>1e-35?Ae=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ae=.026484626664041125:t[10]>1.5000000000000002?Ae=-.10187000872941615:Ae=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ae=.09574540795390041:Ae=-.06454986703691233:Ae=-.11411849349353141:t[266]>1e-35?Ae=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ae=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ae=-.04403391373512386:Ae=.1132928075412222:t[2]>47.50000000000001?Ae=-.09700191391838056:Ae=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ae=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ae=-.001668912999010927:Ae=-.02363511102970245:t[8]>58.50000000000001?Ae=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ae=.0911011436534449:t[1]>28.500000000000004?Ae=-.07192390493729035:Ae=.06913818091291246:Ae=-.012312625373699222:Ae=.06784496312307986:Ae=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ae=.0026564453057705273:Ae=-.025425772389361445:t[122]>1e-35?Ae=-.12046786388602149:t[0]>3183.5000000000005?Ae=.01162092842804907:t[91]>1e-35?Ae=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ae=-.0001647792543020228:Ae=-.023664538532907665:Ae=.01609078206180752;let Oe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Oe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Oe=-.017696526862422682:Oe=.1450050954613223:Oe=-.05406930069823832:Oe=-.08308700260259043:t[120]>1e-35?Oe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Oe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Oe=.038431826961746934:Oe=-.05937462906539856:t[9]>65.50000000000001?Oe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Oe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Oe=-.09579030954062734:Oe=.025064711572811746:Oe=.02579440518821548:Oe=.1044440128091862:Oe=-.058348633139536844:Oe=.07766788227934436:Oe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Oe=.07463684068207214:Oe=.18244269035484484:t[6]>39.50000000000001?Oe=-.06050050067471004:Oe=.05787759066913493:Oe=.010783225857972171:Oe=.1674891243602606:t[4]>9.500000000000002?Oe=-.004814132027475892:Oe=-.14543299413454813:Oe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Oe=-.07634466313617769:Oe=.0287825335169114:Oe=-.06894721943300268:Oe=-.00023988459059521937;let Te;t[131]>1e-35?t[1]>93.50000000000001?Te=-.05706887458825395:t[2]>1.5000000000000002?Te=.011446637886629108:Te=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Te=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Te=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Te=.026278724448495064:Te=.17053138400480508:t[0]>4463.500000000001?Te=-.06482289890096041:Te=.03026516489536295:Te=-.031785170717683144:Te=.1312690622980455:t[13]>1e-35?Te=.14336922540461444:Te=.03523850945454039:Te=-.015407465968975714:t[39]>1e-35?Te=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Te=-.0659975068798723:Te=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Te=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Te=.057409156184759516:Te=.2024322059866388:Te=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Te=.010648654146284154:t[308]>1e-35?Te=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Te=.12364025998551711:Te=-.02247495081065243:t[1]>22.500000000000004?Te=-.0726295464624251:Te=.03481895086048152:t[0]>4331.500000000001?Te=-.04775443357020673:Te=.07172377425057568:t[2]>89.50000000000001?Te=-.11782645274716962:Te=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ct;t[179]>1e-35?ct=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ct=-.07595415373151816:ct=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ct=.022822510448266862:ct=.17491569312933697:ct=-.058362287133533565:t[2]>2.5000000000000004?ct=-.03633895806364428:ct=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ct=-.07294848747514579:ct=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ct=-.07009535282685533:t[8]>2640.0000000000005?ct=-.051761240111316276:t[131]>1e-35?ct=-.06245774419231631:ct=.03495606662854905:ct=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ct=.0015036626973581122:ct=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ct=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ct=.022343994371919224:ct=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ct=.07724450228328664:t[0]>3853.5000000000005?ct=-.15671707454435677:t[10]>28.500000000000004?ct=-.10179090671841723:ct=.014878216919760927:ct=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ct=.14054154485273487:ct=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ct=-.08632985141410315:ct=.005524157938954954:ct=-.08802502622523681:ct=-.0004649168897260341;let St;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?St=-.007458687464321174:St=-.09444966249102484:t[1]>23.500000000000004?St=.08564129697360716:St=-.07105002902845851:St=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?St=-.10326216566705966:t[1]>26.500000000000004?St=.0050539832484585365:St=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?St=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?St=.05783632021087773:t[10]>17.500000000000004?St=-.06720598671764105:t[1]>47.50000000000001?St=.097495825172558:St=-.013372242800584872:St=-.06463226787713715:t[42]>1e-35?St=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?St=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?St=.11051270080118503:St=.027719462817590454:t[8]>597.5000000000001?St=-.08441503592016869:St=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?St=-.12190088985091102:St=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?St=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?St=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?St=.016585157185448045:St=-.11032043771149425:St=.01586986028570486:t[8]>388.50000000000006?St=-.10592413013261853:St=.04930703248769364:t[13]>1e-35?St=.003621937787920821:St=-.0013786331198611841;let vt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?vt=.009769895322846493:vt=-.10620052926943656:t[9]>19.500000000000004?vt=.03781202525403449:t[9]>14.500000000000002?vt=-.11485785321365344:t[9]>6.500000000000001?vt=.07677177833073881:t[0]>4342.500000000001?vt=-.07079285609687631:t[49]>1e-35?vt=.06156814809246001:vt=-.014788509042554625:vt=-.032659201618470655:t[5]>5207.500000000001?vt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?vt=-.03094160322187924:t[1]>29.500000000000004?vt=.09474646043921069:vt=.023445783928231618:vt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?vt=-.07164443768784848:t[1]>29.500000000000004?vt=.089473622509272:t[8]>597.5000000000001?vt=-.08155349903101317:vt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?vt=-.004003900679358653:t[190]>1e-35?vt=-.09236113461485262:t[8]>3198.5000000000005?vt=-.0124130160451179:vt=.018453070064009328:t[15]>1e-35?vt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?vt=-.0009580759587680961:vt=-.03227283036698222:vt=.01369287669536875:t[1]>50.50000000000001?vt=-.04213060332500437:t[35]>1e-35?vt=-.11508095777767471:t[190]>1e-35?vt=-.08611884672400155:t[297]>1e-35?vt=.05723551879433584:vt=-.004829340082311461;let mt;t[183]>1e-35?mt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?mt=-.11753465135886734:mt=-.007515490299047085:mt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?mt=-.12371142493530439:t[1]>36.50000000000001?mt=.032189417575190435:mt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?mt=-.0784518658439288:t[2]>54.50000000000001?mt=.12477882322370665:mt=.000313468482399738:mt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?mt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?mt=.0353146070135579:mt=-.06327619611098285:mt=.02813577701641991:mt=-.12354390728506215:t[34]>1e-35?mt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?mt=-.01245803535276381:mt=-.07169472553475001:t[1]>11.500000000000002?mt=.12989984824561698:mt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?mt=.010390226893521422:t[10]>14.500000000000002?mt=.16790888126487719:mt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?mt=-.043398307129729134:mt=.09963544907820426:t[9]>30.500000000000004?mt=-.13540713124984502:t[9]>17.500000000000004?mt=.0509435850590757:mt=-.04761897852404613:t[4]>78.50000000000001?mt=.09197086656470652:mt=.0006771050176682337;let ue;t[122]>1e-35?t[6]>36.50000000000001?ue=.05686884451670743:ue=-.05334759543084309:t[266]>1e-35?ue=-.08603579519816038:t[157]>1e-35?ue=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ue=-.0499592651503952:t[0]>725.5000000000001?ue=.11780353905132664:ue=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ue=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ue=-.03190157229022304:ue=.07985197845805492:ue=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ue=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ue=-.027174047777029083:ue=.057117284879796476:t[3]>43.50000000000001?ue=-.0016147040913107311:ue=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ue=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ue=-.01466076988151239:ue=.13375695925484857:ue=-.04885873081899647:t[0]>5566.500000000001?ue=.11086813028591343:t[8]>992.5000000000001?ue=-.07622304217072383:ue=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ue=.03285858361708423:ue=-.12354858211764992:ue=.0672788301823281:t[15]>1e-35?ue=.08658836986585006:ue=-.02741484278509758:t[290]>1e-35?ue=-.08161310335133287:t[135]>1e-35?ue=-.04824156054814152:ue=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let We;t[189]>1e-35?t[0]>5269.500000000001?We=-.103183298350443:t[2]>51.50000000000001?We=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?We=-.05186168947388339:We=.0496996365539082:t[10]>23.500000000000004?We=.1404445738719:t[93]>1e-35?We=.0027146310074558505:t[5]>3821.5000000000005?We=.002153033152069652:t[4]>2.5000000000000004?We=.007663539551317215:We=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?We=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?We=-.021479467709980358:We=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?We=.021660293256233334:We=-.0927396152303864:We=.0665074081601698:t[0]>1550.5000000000002?We=.08972407105958534:We=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?We=.06761927942466854:We=-.015762168112653286:t[17]>1e-35?We=.10311304131145381:We=-.017672785252336027:We=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?We=-.10638321435298535:We=.0007073011744385905:t[18]>1e-35?We=-.027056185501334325:t[145]>1e-35?We=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?We=.09762140519655171:t[9]>110.50000000000001?We=-.06581942957595835:t[6]>54.50000000000001?We=.04959634035251596:We=.0022616298654554207:We=-.007437620924990854;let se;t[179]>1e-35?se=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?se=.1470294450403005:se=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?se=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?se=.07965955447707423:t[10]>10.500000000000002?se=-.09236156404262426:se=.03396273196231458:se=-.13246465021467432:se=.07092822261735353:se=-.08753829085942:se=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?se=.004705878789890202:se=.13775378964952867:se=-.04770928980587811:t[10]>29.500000000000004?se=.011221519891071544:t[0]>3853.5000000000005?se=.06365381191628273:se=.15506252245336827:t[1]>37.50000000000001?se=-.07254777021042061:se=.026514587757252385:t[308]>1e-35?se=.04115804816617256:t[10]>26.500000000000004?se=.02077721353011946:t[5]>3548.5000000000005?se=-.1280907116663952:se=-.021974774274438:t[306]>1e-35?se=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?se=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?se=-.005710865560475598:t[94]>1e-35?se=-.06751507982853555:se=.027250040757588703:t[9]>52.50000000000001?se=.07060357924595577:se=-.030297760713011795:se=-.0006005400085266517;let le;t[113]>1e-35?le=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?le=-.06996356565314456:le=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?le=-.08317707559926495:t[21]>1e-35?le=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?le=-.010538203005984922:le=.08454819465349446:t[9]>124.50000000000001?le=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?le=-.08542251249346582:t[9]>50.50000000000001?le=-.023428882537657472:le=.010042500833979073:le=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?le=.03006025206979096:t[9]>108.50000000000001?le=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?le=.04222035773042132:le=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?le=-.07209095448054853:le=.028065954981903313:le=.08714651929917122:le=-.006678820669279169:t[10]>40.50000000000001?le=.006982396294941626:le=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?le=-.09351114982645548:t[4]>3.5000000000000004?le=-.004837550129223451:le=-.08324141237464677:t[303]>1e-35?le=.10703037493990825:t[9]>156.50000000000003?le=-.10803018621648303:t[116]>1e-35?le=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?le=.10261721665006701:le=.018994509090668264:le=.0011244262442038839;let qe;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?qe=-.08404263465005328:t[0]>3682.5000000000005?qe=.041259223920298876:t[1]>29.500000000000004?qe=-.09541257493441671:qe=.001482192721625409:qe=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?qe=-.08268996098437432:t[230]>1e-35?qe=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?qe=-913218977737457e-19:t[4]>10.500000000000002?qe=-.056334165674005156:t[127]>1e-35?qe=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?qe=-.04231200150318989:t[10]>42.50000000000001?qe=.10182973257894812:qe=.015934763950068445:qe=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?qe=-.041117068322885315:qe=.1167767830037126:qe=.13611206992387337:t[10]>41.50000000000001?qe=-.07120286010564107:qe=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?qe=-.07702290997669524:t[198]>1e-35?qe=.08776558554437136:qe=-.008290740324975692:t[2]>32.50000000000001?qe=.07198457624219955:qe=.005463113714361629:qe=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?qe=.03295785445437507:qe=.15140250150674536:qe=-.035613213948910254:t[186]>1e-35?qe=.06849425535860769:t[96]>1e-35?qe=.06028225812727254:qe=-.007582543288662308;let Be;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Be=.08396556264106572:Be=-.0562516995099192:Be=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Be=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Be=.0052017514017035915:Be=-.11194119432743639:Be=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Be=-.025692451287403446:Be=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Be=-.11892250746801664:t[10]>22.500000000000004?Be=.07548493166973796:Be=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Be=.13750699058082427:t[18]>1e-35?Be=.06535408879552801:Be=-.054118179035040674:Be=.1344282838979622:t[0]>3982.5000000000005?Be=-.10409582202467015:t[19]>1e-35?Be=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Be=.012705935670766466:Be=.14149359442527545:Be=-.047977876173706004:t[20]>1e-35?Be=.057945228080337946:t[0]>3642.5000000000005?Be=-.008726535792122467:Be=-.08424769891378858:t[34]>1e-35?Be=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Be=.01196849566739346:Be=.1614642278429876:Be=-.043022338150701625:t[3]>5.500000000000001?Be=-.03907848255033881:Be=.018280601026175593:Be=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let je;t[120]>1e-35?je=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?je=-.042799574885345304:je=.07412430171193245:je=-.11248270469336048:t[193]>1e-35?je=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?je=.028911612178122104:je=.12326369727728437:t[0]>4091.5000000000005?je=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?je=.1159839898100149:je=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?je=-.0216343737351583:je=-.1220272260878369:t[2]>18.500000000000004?je=.09152924475072398:t[8]>55.50000000000001?je=.039508716651005665:je=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?je=.06793009902674053:je=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?je=-.04391068849624096:je=.04009967593394672:t[8]>1085.5000000000002?je=-.024773826356034825:je=-.13919707884246582:je=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?je=-.11567917501901476:je=-.006813640337684114:t[3]>7.500000000000001?je=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?je=-.001754586408351048:je=-.055422422450722056:je=-.06090032532532226:t[0]>5269.500000000001?je=.11787981735983527:je=-.00198119768540783:je=.00210412924303036;let et;t[294]>1e-35?t[10]>50.50000000000001?et=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?et=-.06063239096209816:et=.03317022411417386:et=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?et=-.013608609329298802:et=.09078000157330264:t[99]>1e-35?et=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?et=-.07536137260189814:et=.006253266595455118:t[10]>28.500000000000004?et=-.006106041147592768:t[9]>156.50000000000003?et=-.11828932797811101:t[94]>1e-35?et=-.02566078479505714:t[303]>1e-35?et=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?et=-.08401252789168523:t[5]>4244.500000000001?et=.026372887658499107:t[1]>16.500000000000004?et=-.027836756345634026:et=.09205362097909099:et=.00934612788718244:t[203]>1e-35?et=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?et=-.09580979052540028:t[1]>50.50000000000001?et=-.06402211827281554:et=.08342858760095972:t[2]>36.50000000000001?et=.008114897658204584:t[92]>1e-35?et=.09541587072672864:et=-.022342147210555434:et=-.01660492519175128:et=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?et=.15846731118501817:et=.039498507912023195:t[245]>1e-35?et=.07008718676813333:et=.0019806389728814727;let pt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?pt=-.01192072916082109:pt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?pt=.06874032717466054:t[4]>40.50000000000001?pt=-.07752510020707537:t[1]>76.50000000000001?pt=-.09944032260703917:t[8]>1381.5000000000002?pt=-.054466635810800745:t[1]>32.50000000000001?pt=.05974084520839573:pt=-.0384718740755954:pt=-.11374190719134032:t[0]>2151.5000000000005?pt=-.13703645155803298:pt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?pt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?pt=.013539805885738608:pt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?pt=.09941880179344399:pt=-.01608127391210995:pt=.08025226531247417:t[9]>67.50000000000001?pt=.13525448212444113:t[6]>61.50000000000001?pt=-.05511099182158894:t[94]>1e-35?pt=-.06821509831783572:t[128]>1e-35?pt=.11361314817714643:pt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?pt=-.09954181329804547:t[197]>1e-35?pt=.10102833149755386:t[188]>1e-35?pt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?pt=-.03781554214742005:pt=.09927933385592314:pt=-.020006000056720083:pt=-.10520473615957895:pt=-.12006990846253787:pt=-.00026111570975317574;let Lt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Lt=-.019188245509744628:Lt=-.13354864350075848:t[0]>2461.5000000000005?Lt=.051885477468354396:Lt=-.0833581968852119:Lt=.08233441701532287:Lt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Lt=.09926337893072812:Lt=-.027753610497327715:t[0]>1972.5000000000002?Lt=-.09780045823152517:Lt=.032380915168504935:Lt=.11502632261226381:t[17]>1e-35?Lt=-.06094965899579662:t[10]>40.50000000000001?Lt=-.07500475582440802:Lt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Lt=-.09584538995220808:Lt=-.00908705814304442:Lt=.03203281520813893:t[10]>49.50000000000001?Lt=-.03146271513986384:t[2]>63.50000000000001?Lt=.13172001315536286:t[224]>1e-35?Lt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Lt=.09521549382082259:Lt=-.04414925613522197:t[0]>1847.5000000000002?Lt=-.09118580379557353:Lt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Lt=.03525144509943896:Lt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Lt=-.04766112322938157:t[2]>10.500000000000002?Lt=.0728516504357201:Lt=-.05049625965272536:Lt=-.10868663055825774:Lt=.0005382613419948969;let Kt;t[147]>1e-35?t[1]>53.50000000000001?Kt=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Kt=-.030504020655417463:Kt=.07102458639110094:Kt=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?Kt=.055304563442710876:t[1]>53.50000000000001?Kt=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?Kt=-.1568835288372895:Kt=-.0279829124400056:Kt=.04493843959601833:Kt=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?Kt=-.054133834303687026:t[9]>48.50000000000001?Kt=.11263810289007213:t[9]>9.500000000000002?Kt=-.02202034562838259:t[4]>45.50000000000001?Kt=-.03410927569045158:Kt=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?Kt=-.029687297407295893:Kt=.10673602850001934:t[4]>42.50000000000001?Kt=.0036275562945108117:Kt=-.0760789221330622:Kt=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Kt=.08274426793676076:Kt=-.07076234425516396:Kt=.13890177606150175:Kt=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?Kt=-.09250637750836187:Kt=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?Kt=-.01897867921812603:Kt=.04890781705365262:Kt=-.11569892307597907:t[2]>106.50000000000001?Kt=.09032697440623969:Kt=.00047935919155035045;let Ft;t[115]>1e-35?Ft=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ft=-.10131179514695865:t[8]>938.5000000000001?Ft=.10203729808015481:Ft=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ft=.03574015165562999:Ft=-.07763042506449493:Ft=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ft=.0665706259130275:Ft=-.06586817559309924:Ft=.11925564412287476:Ft=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ft=.046017146627455346:Ft=-.08623321630086885:t[8]>1765.5000000000002?Ft=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ft=.11143827902215087:Ft=-.01817808730473413:Ft=.16980985030210127:Ft=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ft=.010168994879727824:Ft=-.09099594488792513:t[9]>1.5000000000000002?Ft=.0533459678147928:Ft=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ft=-.062346959148773695:t[1]>47.50000000000001?Ft=-.0021578343835599316:t[2]>27.500000000000004?Ft=.19567373210166172:Ft=.07851555379116423:t[18]>1e-35?Ft=.03711549097804649:t[8]>359.50000000000006?Ft=.012492346746905587:t[4]>20.500000000000004?Ft=.047511695735697544:Ft=-.07999269063948773:Ft=6802045404471004e-20;let Qr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Qr=.0011484728213539738:Qr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Qr=-.09828874964938798:t[8]>1586.5000000000002?Qr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Qr=.011938269926919522:Qr=.17541983715953954:t[19]>1e-35?Qr=.023002786011088672:Qr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Qr=.06508934844183291:Qr=-.10168553534835639:Qr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Qr=.021140806225203937:Qr=-.1167833342453639:t[2]>33.50000000000001?Qr=.13163585734056618:Qr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Qr=.06314479201263888:Qr=-.09639088327091713:t[10]>29.500000000000004?Qr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Qr=40577156464836036e-21:Qr=.12322387121810757:Qr=-.03697224045046014:t[1]>22.500000000000004?Qr=.016474835887320276:Qr=.16919298733903063:Qr=.07633203630214054:Qr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Qr=.14150493354700563:Qr=-.01831155354975749:t[1]>28.500000000000004?Qr=-.07952557178685365:t[10]>28.500000000000004?Qr=.0665695554984927:Qr=-.053640139319277094:Qr=.0004754840665898665;let Sr;t[76]>1e-35?Sr=-.06814884255939921:t[179]>1e-35?Sr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Sr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Sr=.004193658608848433:Sr=-.1066968975983452:t[8]>302.50000000000006?Sr=.05476730110440451:Sr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Sr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Sr=.013555772109446666:Sr=-.09856116699770784:Sr=.0284329611813383:t[2]>52.50000000000001?Sr=.04008708444763762:t[9]>29.500000000000004?Sr=-.1289599546008197:Sr=-.018566534248335896:t[8]>747.5000000000001?Sr=.02236484980076122:Sr=.1148871655157582:t[8]>3084.0000000000005?Sr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Sr=.03164751204281298:Sr=.11752140436184891:t[9]>42.50000000000001?Sr=-.07180559595410106:t[22]>1e-35?Sr=.09325040416256854:Sr=-.016041122807939914:Sr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Sr=-.010718250133458515:Sr=.09818827994853763:Sr=.010180038981174032:Sr=-.039472162599295535:t[9]>170.50000000000003?Sr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Sr=-.08674788057474031:Sr=.02077653508548371:Sr=-.0003536561382007414;let rn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?rn=.018337297491457794:rn=-.05926206443180149:rn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?rn=.10747078482128616:t[126]>1e-35?rn=-.10550625192391357:t[7]>71.50000000000001?rn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?rn=.1317396472229434:rn=-.025035791351328947:rn=-.0728334305864372:t[8]>963.5000000000001?rn=.023642201723096064:rn=.183010326734258:t[128]>1e-35?rn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?rn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?rn=-.1088876900335281:rn=.02758317023002635:rn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?rn=-.01928020117446408:rn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?rn=.07893723375925096:rn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?rn=-.10301657587280551:rn=.005787463140224318:rn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?rn=-.019296977889522397:rn=-.07274529751752634:t[1]>30.500000000000004?rn=-.050368901143148286:rn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?rn=.0015332402792773946:rn=.09930153676749967:rn=-.06370844564357069:rn=.00042272155209927616;let ve;t[71]>1e-35?t[4]>17.500000000000004?ve=.12586844370423247:ve=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?ve=-.08474891624263797:t[8]>125.50000000000001?ve=.08125086980439704:ve=-.04082085238068532:t[0]>3863.5000000000005?ve=.020481535807469208:ve=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?ve=-.019110200161573936:ve=-.12387719685855114:t[0]>1102.5000000000002?ve=.08376595701957407:ve=-.031821919580524834:t[9]>4.500000000000001?ve=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?ve=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?ve=.1349841206807871:ve=.011864053595560297:t[1]>41.50000000000001?ve=-.08203662486612544:t[2]>18.500000000000004?ve=-.009541865642346947:ve=.08345043168501759:t[2]>10.500000000000002?ve=-.09585031818030947:ve=.019432330487099865:ve=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ve=.11951517733981365:ve=-.016651014735738538:t[1]>28.500000000000004?ve=-.07410922545030711:t[10]>28.500000000000004?ve=.05886430683844788:ve=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?ve=.04802269879144705:ve=-.026208212831796737:t[4]>45.50000000000001?ve=-.03227476944664786:ve=.05124575625622705:ve=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let It;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?It=-.10504730480402079:t[5]>3341.5000000000005?It=.11087894671081754:It=-.0406668834674614:It=.03308382165616109:t[8]>104.50000000000001?It=-.10431436764549162:It=.0073928337244891455:t[4]>34.50000000000001?It=-.10571751512748416:It=-.006081128814142983:t[13]>1e-35?It=.1299673566095023:t[4]>60.50000000000001?It=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?It=.04857126072645073:It=-.03431365358104773:t[4]>16.500000000000004?It=.04101865986596709:It=.16480274980378218:t[10]>26.500000000000004?It=.03673978504199255:t[10]>9.500000000000002?It=-.10996402743800027:t[308]>1e-35?It=.0553693735082498:It=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?It=.010902983761213922:It=.1325118659895645:It=-.064362945508595:t[1]>66.50000000000001?It=.033416767779331176:It=-.054080316225040496:t[42]>1e-35?It=-.07762364337810815:t[10]>1089.5000000000002?It=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?It=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?It=.0220102041325908:It=-.06516708740003069:It=.012833498905748267:t[224]>1e-35?It=-.007038418272997865:It=.00037666304316290967;let rr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?rr=.07554189644995735:rr=-.052089349455904946:rr=-.10148206848169845:t[113]>1e-35?rr=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?rr=.07172653627995676:rr=-.07602959317610998:rr=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?rr=-.0399322883690891:rr=.06523495517476098:rr=-.10358715295743802:t[193]>1e-35?rr=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?rr=.015928764772252406:rr=.1341513061552287:rr=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?rr=-.033592997607280156:rr=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?rr=-.08402551858097379:rr=.017401984506038796:t[1]>25.500000000000004?rr=.13337205393591278:rr=-.01160208350090984:rr=.06708317942315471:t[8]>227.50000000000003?rr=-.08486943882418681:rr=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?rr=-.10496268177586783:rr=-.020921489532370493:rr=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?rr=.11639296062157028:rr=-.004275784356569115:t[32]>1e-35?rr=-.07297384970166025:rr=.006026841626381599:rr=.002034611134960428;let Xt;t[248]>1e-35?Xt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Xt=-.06455513326540585:t[1]>29.500000000000004?Xt=.07718474591552532:t[4]>7.500000000000001?Xt=.040139336931404826:Xt=-.09685734690563386:Xt=.00015327283570347363:t[9]>88.50000000000001?Xt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Xt=-.04077257804338707:Xt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Xt=.03778141591008941:Xt=-.06459919920634845:Xt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Xt=.14063930759326346:t[0]>179.50000000000003?Xt=.07287482250668585:t[8]>1180.5000000000002?Xt=-.14419393112726253:t[10]>28.500000000000004?Xt=-.07993142770099469:t[17]>1e-35?Xt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Xt=.05527969663610186:Xt=-.10824385941441346:t[3]>11.500000000000002?Xt=.12358502961047915:Xt=-.017509147119622873:t[0]>74.50000000000001?Xt=-.014907705458730486:t[8]>95.50000000000001?Xt=-.02225118168342062:Xt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Xt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Xt=.04962819555610421:Xt=-.07213577821855309:Xt=.09139529824708481:t[19]>1e-35?Xt=.013439401088345224:Xt=-.049274647207292056:Xt=.10531673719686951;let xr;t[40]>1e-35?t[0]>1937.5000000000002?xr=-.06421671152073961:xr=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?xr=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?xr=-.03520420769287065:t[8]>1085.5000000000002?xr=-.019817352506127633:xr=.11444439424520964:xr=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?xr=-.010490117519863269:xr=.08104430117757461:t[121]>1e-35?t[243]>1e-35?xr=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?xr=.06619344145920268:t[0]>4091.5000000000005?xr=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?xr=.10016091391222309:xr=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?xr=-.019511460451434884:xr=-.11643672465055221:t[2]>18.500000000000004?xr=.07848228087333317:t[8]>55.50000000000001?xr=.032583027899956235:xr=-.11209832692153521:t[11]>1e-35?xr=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?xr=-.09996887746328006:t[9]>2.5000000000000004?xr=.02157682011863397:xr=-.05247727848991843:xr=.07409150201483244:t[1]>38.50000000000001?xr=-.11378466075449625:t[224]>1e-35?xr=-.10741749127732923:t[1]>26.500000000000004?xr=.07343136534146562:xr=-.07013573628594773:t[25]>1e-35?xr=-.04626669734164317:xr=.05518333197956482:xr=.00032434010867555516;let ar;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?ar=.026313251010808853:ar=-.08997339150292381:ar=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?ar=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?ar=.0905155504503746:t[8]>1049.5000000000002?ar=-.062312558183394054:t[8]>719.5000000000001?ar=.09583836191410239:t[0]>3719.5000000000005?ar=-.0778097309430818:ar=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?ar=-.12920865648544927:t[0]>2699.5000000000005?ar=-.07086587879041864:ar=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?ar=-.11377786322600797:ar=-.009486325820117998:t[1]>55.50000000000001?ar=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?ar=-.07938291201004219:t[2]>36.50000000000001?ar=.01520046732530246:ar=.13649854049662832:ar=-.07145015938528873:t[8]>407.50000000000006?ar=-.00350257360822279:ar=.11332047082193297:ar=-.10060624458629897:ar=.05429496612497562:t[8]>1446.5000000000002?ar=.006073419197482838:ar=-.08718676350883998:ar=-.11532497988252638:ar=.10766270463068293:t[34]>1e-35?ar=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?ar=-.0004109812623829506:ar=.021601073497455662:ar=-7343540098965853e-20;let er;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?er=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?er=.05995640200798119:t[0]>3443.5000000000005?er=-.14698883458733583:er=-.030039164579240187:t[189]>1e-35?er=-.06086763220538141:t[1]>86.50000000000001?er=-.05096727866142538:t[4]>64.50000000000001?er=.11240554253834577:t[4]>45.50000000000001?er=-.030279760168394117:t[6]>45.50000000000001?er=.10161088917815142:t[10]>77.50000000000001?er=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?er=-.06672020005240323:er=.08831457502630258:t[8]>2592.5000000000005?er=-.052617701047376654:t[10]>29.500000000000004?er=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?er=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?er=-.064099222705728:er=.044332487521538365:t[0]>2882.5000000000005?er=.031099546885005065:er=.12938467051623853:t[0]>4221.500000000001?er=-.0928676413498701:t[9]>30.500000000000004?er=-.05781824812803708:er=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?er=-.06648105454098469:er=.05985487552383097:er=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?er=.05282385499619401:t[1]>66.50000000000001?er=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?er=.027885690791379255:er=-.08407126408362446:er=.014432924125571093:er=-9903435845205118e-20;let sr;t[76]>1e-35?sr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?sr=.013633653464240465:sr=-.10164319411983509:sr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?sr=.00632864847804078:sr=-.08393000368134668:sr=.07870508617440916:t[284]>1e-35?sr=.1092302727710421:sr=-.0025505047582483234:t[248]>1e-35?sr=.07101822393621864:t[274]>1e-35?sr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?sr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?sr=.025081789181021243:sr=-.014813325803582618:t[9]>33.50000000000001?sr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?sr=.11926990418060353:sr=.01852125513565268:sr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?sr=-.1178464984373743:t[283]>1e-35?sr=.043370859226927405:t[5]>4320.500000000001?sr=-.01103141226366587:t[8]>1104.5000000000002?sr=-.023053423988095886:sr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?sr=.000579145585864887:sr=.03389152834202143:t[128]>1e-35?sr=-.14527722052568462:t[210]>1e-35?sr=-.08915971541902741:t[7]>9.500000000000002?sr=-.03307314577076116:t[18]>1e-35?sr=-.05521712302023565:sr=.009315605032770029:sr=.0036332551852289933;let tr;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?tr=-.07583539600416284:t[188]>1e-35?tr=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?tr=-.011038193049597113:tr=.08154028164397753:t[1]>85.50000000000001?tr=.10259361975201933:tr=.011640408330521594:tr=-.00023319159023748508:t[92]>1e-35?tr=.13771692859530546:tr=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?tr=.09967230141007705:t[30]>1e-35?tr=-.08888529037551285:tr=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?tr=.08284665960761373:tr=-.029292565021289504:t[7]>7.500000000000001?tr=-.09945093355204493:tr=-.008381393701708593:t[20]>1e-35?tr=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?tr=.07585582641438211:t[8]>284.50000000000006?tr=-.029387993239886723:tr=.07716738177321587:t[1]>18.500000000000004?tr=.026745348497993746:tr=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?tr=.02337306890530338:tr=-.10390355904767366:tr=.07390521199638532:tr=-.06788247515155237:tr=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?tr=-.06360325615644084:tr=.04342192339836601:tr=-.10598779152030145:tr=.05253384605768211;let kr;t[3]>7.500000000000001?t[157]>1e-35?kr=-.07514182877923786:kr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?kr=.028692053800951845:kr=.14081686716133598:kr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?kr=.0037139292567243084:kr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?kr=.01202688580305612:kr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?kr=.043935495082738626:kr=-.05639305759669704:t[247]>1e-35?kr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?kr=.10331836202616368:kr=.0006926658459781341:t[96]>1e-35?kr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?kr=-.0741403257305367:kr=.022900127535540854:t[7]>3.5000000000000004?kr=.038110741403836294:kr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?kr=-.09552842289807008:t[1]>27.500000000000004?kr=.012505935885798007:kr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?kr=-.1046104767723845:kr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?kr=.023466328488582572:kr=.11730925774586994:kr=-.04771965631104874:kr=.17059689880751394:kr=-.08181850955999449:t[26]>1e-35?kr=-.12727482696678769:kr=-.014343123272734182;let Ur;t[147]>1e-35?t[1]>53.50000000000001?Ur=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Ur=-.02763546051134888:Ur=.06423344777499343:Ur=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Ur=.049825139823021586:t[7]>22.500000000000004?Ur=-.01131680751379858:t[0]>2579.5000000000005?Ur=-.10673674485369694:Ur=-.015387212937189957:Ur=.04347325151148724:t[179]>1e-35?Ur=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ur=.0650355590939066:Ur=-.0473332870892226:Ur=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Ur=.11139543329789044:t[126]>1e-35?Ur=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Ur=.06370903833231022:t[10]>29.500000000000004?Ur=.03415223859607161:t[10]>3.5000000000000004?Ur=-.07415518117873297:Ur=-.0014119203473324082:Ur=.12617652343819508:t[9]>41.50000000000001?Ur=-.10311145857176976:t[8]>2757.5000000000005?Ur=-.08106484219011428:t[7]>71.50000000000001?Ur=-.09783384432091176:t[1]>88.50000000000001?Ur=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Ur=-.008884084501608536:Ur=.061339437777743616:Ur=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Ur=.01526664064166223:Ur=.13534828515415498:Ur=-.06985484465894776:Ur=.0005758961943178744;let Jr;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Jr=-.029152732370514342:Jr=.07173628916139178:t[1]>36.50000000000001?Jr=-.08859111297255318:Jr=.0018030071815630785:Jr=.13652461563759322:Jr=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Jr=-.07145140450454163:t[21]>1e-35?Jr=-.07422841663493233:Jr=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Jr=.11864240653986852:t[3]>33.50000000000001?Jr=-.08821209591953476:Jr=.05706392280054726:Jr=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Jr=.01953613016837112:Jr=-.059781039130025006:t[148]>1e-35?Jr=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Jr=.07207826841738371:t[202]>1e-35?Jr=.08163917539410503:Jr=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Jr=-.06858280496900336:Jr=-.1781828899516648:Jr=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Jr=.018232649414147116:Jr=-.04419781124222661:Jr=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Jr=.11452368095776105:Jr=-.036496437259924026:Jr=-.040445338739465486:Jr=.0816572651001145:Jr=-.08968914517368663:Jr=.0002826343082585516;let hn;t[189]>1e-35?t[0]>5269.500000000001?hn=-.08839493050459957:t[10]>85.50000000000001?hn=.10046908365702462:t[8]>2592.5000000000005?hn=-.09632233975926387:t[8]>2000.5000000000002?hn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?hn=.035504970430426296:t[1]>31.500000000000004?hn=-.1133764813142531:hn=-.01138280942244812:t[8]>1125.5000000000002?hn=.09800530246229806:hn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?hn=.07316772160107896:hn=-.059095014819051765:hn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?hn=-.09150209066166894:t[8]>3084.0000000000005?hn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?hn=-.04449234460408263:hn=.05568837973347338:hn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?hn=.12741077850267066:hn=.007372371864985329:t[2]>39.50000000000001?hn=.02295917234617787:hn=.14966532083907075:t[1]>39.50000000000001?hn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?hn=-.02511861881285652:t[1]>27.500000000000004?hn=.08683660011672288:hn=.02956214835267301:t[9]>15.500000000000002?hn=-.016538805462996232:hn=.04352738094981517:hn=-.05561856645643868:t[9]>170.50000000000003?hn=-.07996752635874248:t[179]>1e-35?hn=-.09065975936933919:hn=-.00042817975060427177;let Zn;t[39]>1e-35?t[4]>25.500000000000004?Zn=.03443173196222934:Zn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Zn=-.0013415395759330318:Zn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Zn=.002297618040307216:Zn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Zn=-.015297257305397608:Zn=.09651828834062742:Zn=-.06636003334371929:t[10]>11.500000000000002?Zn=.17631616138309397:t[0]>1639.5000000000002?Zn=3804386478092585e-20:Zn=-.09099296398683193:Zn=-.06874415876172972:t[0]>2151.5000000000005?Zn=-.1311264883406766:Zn=.00809052010141122:t[253]>1e-35?Zn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Zn=.045038497754638605:Zn=-.07770167665661752:Zn=-.08596294280650517:Zn=.08538655727027213:Zn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Zn=.054627956617973275:t[1]>61.50000000000001?Zn=-.11994465088415499:t[4]>8.500000000000002?Zn=.06676200239406452:Zn=-.027503148069376867:t[8]>676.5000000000001?Zn=-.10363964928357075:t[4]>8.500000000000002?Zn=-.07589816227175682:Zn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Zn=.009093153189012338:Zn=-.06119765876605404:Zn=.0004668642103528348;let bn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?bn=-.10100794502567233:bn=.08000205636470442:bn=-.11945419826856896:t[113]>1e-35?bn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?bn=.1224302423880318:bn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?bn=.0019277012166729114:t[1]>28.500000000000004?bn=-.054445821715687494:bn=.045645722976713245:t[30]>1e-35?bn=.13402660155331655:bn=.008921176001777645:bn=-.058547426505451076:bn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?bn=-.13526418192218206:bn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?bn=.0007263224246135398:bn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?bn=-.11575657261278308:bn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?bn=-.01995960178292952:bn=.11216586049153021:bn=-.10050961087149474:bn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?bn=.10303451081526649:bn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?bn=-.043799548968209395:bn=-.12451444314954115:t[4]>12.500000000000002?bn=-.03838117361958468:bn=.06504990789767144:t[57]>1e-35?bn=.06890006938293915:bn=.0003914274695562949;let Jn;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Jn=.004271749009686975:Jn=-.10523878297127605:Jn=.04633982158107851:Jn=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Jn=-.08655730561951676:t[8]>919.5000000000001?Jn=-.0676453705610183:t[7]>18.500000000000004?Jn=-.027787974193650575:Jn=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Jn=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Jn=-.03473877164537313:t[8]>719.5000000000001?Jn=.10471053866934404:Jn=.008236107678382981:t[4]>57.50000000000001?Jn=.09412219478825269:t[10]>66.50000000000001?Jn=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Jn=-.040681323751002293:Jn=.06374650297561021:Jn=.12884615227401788:t[10]>5.500000000000001?Jn=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Jn=-.05474068967150784:Jn=.03744700650806603:Jn=-.07846396348680855:t[1]>42.50000000000001?Jn=.018972315810821302:Jn=.10953621007604744:t[5]>4439.500000000001?Jn=.010999776705494586:t[1]>40.50000000000001?Jn=-.12394200059775967:t[10]>2.5000000000000004?Jn=.013528093962849453:Jn=-.09222088417048682:Jn=-.12662967149701485:Jn=.09327296405849603:t[3]>99.50000000000001?Jn=-.013581954439986752:Jn=.0005526498251862075;let Xr;t[187]>1e-35?t[243]>1e-35?Xr=-.08392792551692502:t[10]>68.50000000000001?Xr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?Xr=-.0825306209711224:Xr=.049559996084532945:Xr=-.1064938580886302:Xr=.03353240732240275:Xr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?Xr=.16966001471529374:t[1]>57.50000000000001?Xr=-.005772777673676247:Xr=.09383677041525058:t[8]>747.5000000000001?Xr=.054068175469351235:Xr=-.049968216310277036:t[8]>753.5000000000001?Xr=-.0679383555784074:t[4]>8.500000000000002?Xr=-.059757341189735386:Xr=.05701083682780414:Xr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?Xr=.05820296128730006:Xr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?Xr=.15340611616954566:Xr=.04385036188666874:t[0]>4449.500000000001?Xr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?Xr=.004840354641006495:Xr=.09967827580276283:Xr=.11605363537391578:t[9]>19.500000000000004?Xr=-.0735831692725717:Xr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?Xr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?Xr=-.02442182361342386:Xr=.10334853004243093:Xr=-.030431948680167104:Xr=-956078595250818e-19;let Gn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Gn=-.040232505718244854:t[0]>3030.5000000000005?Gn=.0634109586813073:Gn=-.04043617034245621:Gn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Gn=-.007859096946435131:Gn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Gn=.05515771679628051:Gn=-.04214471312668263:Gn=-.09589322222261765:t[193]>1e-35?Gn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Gn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Gn=-.08152604001147906:t[11]>1e-35?Gn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Gn=.13100930780107503:t[10]>25.500000000000004?Gn=.05921074710011526:Gn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Gn=.0009447118243153454:Gn=-.09820565036865991:Gn=.057146909749745546:t[0]>2115.5000000000005?Gn=-.12331216726611678:Gn=.007281983677694285:t[2]>56.50000000000001?Gn=.012310154675612615:Gn=-.08873665774670461:t[6]>25.500000000000004?Gn=.134708740821879:t[9]>5.500000000000001?Gn=-.0805901581148979:t[224]>1e-35?Gn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Gn=.10842593386554122:t[2]>13.500000000000002?Gn=.06466798320378395:Gn=-.08578130788886655:Gn=-.03590892078300114:Gn=.0003499894043880708;let Pe;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?Pe=.10839808814624702:Pe=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?Pe=-.007478368069393829:Pe=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?Pe=.04035247751736232:t[0]>4255.500000000001?Pe=-.1310865624507367:t[0]>4004.5000000000005?Pe=.06647367311982634:Pe=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?Pe=-.011618902907510411:Pe=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?Pe=.09356028223727986:Pe=-.03811765057032162:Pe=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?Pe=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?Pe=.1146142460964847:t[1]>62.50000000000001?Pe=-.09679869865322362:t[9]>71.50000000000001?Pe=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?Pe=-.039046426387852974:Pe=.04558778688367152:Pe=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?Pe=.03261697816211156:t[15]>1e-35?Pe=.02586252542264368:t[2]>14.500000000000002?Pe=-.016420452667484604:Pe=-.1011799626006976:Pe=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?Pe=.010193588102560583:Pe=.11748729525930773:Pe=-.04468162226743652:Pe=-.028365274393617957:t[71]>1e-35?Pe=.05115139346588793:Pe=-.0001510425316936658;let z;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?z=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?z=.020637047900190317:z=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?z=-.04632587527094407:z=.08603684785510396:z=-.05101401015448496:z=.025466432054358498:z=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?z=.020385355430046367:z=.12032592051335252:z=-.012387370292173013:t[2]>23.500000000000004?z=-.12568545484492677:z=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?z=.043528764484784536:z=.14352071657196003:z=-.009332833816977268:z=.11186782227735846:z=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?z=-.05649104643152564:z=.03884200719305747:t[42]>1e-35?z=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?z=-.04103416502526736:z=.04881823954656287:t[4]>15.500000000000002?z=.009342724662897898:t[0]>3969.5000000000005?z=-.025637309961309498:z=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?z=-.08185697075265091:t[0]>2215.5000000000005?z=.030063975892297354:t[0]>807.5000000000001?z=-.03924325550733229:z=.0415330999189793:z=-.00024374664461674863;let Ce;t[3]>7.500000000000001?Ce=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ce=.025798416259686565:Ce=.13251610353146012:Ce=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?Ce=-.11098564237775424:Ce=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?Ce=.15347826616466054:t[3]>4.500000000000001?Ce=.10379320730958941:Ce=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?Ce=.03159791088468647:Ce=-.10612873364104258:Ce=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?Ce=-.02335760775001469:Ce=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?Ce=-.011164334474672973:Ce=-.06594044410501655:t[207]>1e-35?Ce=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?Ce=-.01725821503981916:Ce=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?Ce=-.04226531631656534:Ce=-.14409800530171432:Ce=-.03245576341206398:t[8]>4214.500000000001?Ce=.0895409165534886:t[247]>1e-35?Ce=-.06506383629143335:t[118]>1e-35?Ce=-.07214270121257443:t[8]>546.5000000000001?Ce=-.004385020865473831:Ce=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?Ce=.046278501133958524:Ce=-.030835570926968044:t[0]>493.50000000000006?Ce=-.12794504651610425:Ce=.009415039807550776;let Ie;t[304]>1e-35?Ie=-.04717777269217453:t[76]>1e-35?Ie=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?Ie=-.09648224457374217:t[132]>1e-35?Ie=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?Ie=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?Ie=.10838431695638147:t[230]>1e-35?Ie=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?Ie=.050071316251979:Ie=-.006356941111525215:t[6]>8.500000000000002?Ie=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?Ie=.10217402850540398:Ie=-.048840949025349197:Ie=-.03668313197909846:t[7]>39.50000000000001?Ie=-.0562642841496003:t[10]>2.5000000000000004?Ie=.09749777369987417:Ie=-.04848223121417616:t[0]>5453.500000000001?Ie=.08316648226133942:Ie=-.0261979698267618:t[212]>1e-35?Ie=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?Ie=.04837009746506856:Ie=-.09184360565631328:Ie=.0032411047845613606:t[0]>4733.500000000001?Ie=.0977378556864798:Ie=.010776545559325588:Ie=-.012483310473120218:Ie=-.049284121449103935:Ie=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?Ie=-.08380361910948711:Ie=.07375088778585813:Ie=-.1084864186071348:Ie=.0007819503469605476;let M;t[7]>17.500000000000004?t[115]>1e-35?M=.08741852531696623:t[167]>1e-35?M=.10078975495600809:M=-.0018324767784017562:t[290]>1e-35?M=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?M=.1379733311640402:M=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?M=-.09360083033774169:M=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?M=-.015599362579530679:t[0]>4593.500000000001?M=-.12029549262691491:M=-.018917032256501397:M=.04632831686576592:M=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?M=-.05894883236412263:M=.05213944998315824:M=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?M=.07577412405680808:M=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?M=-.0277076900736147:t[1]>65.50000000000001?M=-.023587471585763506:M=.10184896592433082:M=-.057699270527916825:M=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?M=.06566902102799584:t[10]>25.500000000000004?M=-.07033633753181047:M=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?M=-.08108035861059537:M=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?M=-.12431182772561139:M=.01886235886984271:M=.0025579594894418116;let D;t[8]>2915.5000000000005?t[101]>1e-35?D=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?D=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?D=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?D=.0687641681341721:t[10]>102.50000000000001?D=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?D=-.06762578396473291:t[10]>65.50000000000001?D=-.05226727783610509:t[282]>1e-35?D=.09911438410640917:t[19]>1e-35?D=.06915156336429933:D=-.006565637886508241:D=-.08344300251849307:D=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?D=.19428463865406298:D=.016073883020956765:t[13]>1e-35?D=.06864077097923665:D=-.01388867527034731:t[0]>1847.5000000000002?D=.004655280608161356:t[1]>40.50000000000001?D=.031406054057765996:D=.12798062439212832:D=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?D=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?D=-.0706095614785733:D=.04227164041372561:D=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?D=-.07139533369873902:D=.008952586782921625:D=.06086212582180936:D=-.0816938490403437:D=-.051224901945956025:D=-.10525399124186095:D=.000270924147208224;let Z;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Z=.029186512383291244:t[7]>1.5000000000000002?Z=-.14984127276725573:t[1]>40.50000000000001?Z=.032757060730648144:Z=-.07675575422749602:t[6]>8.500000000000002?Z=.10599766037117893:Z=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Z=-.051394622947855385:Z=.03237141302699347:Z=.12526173027943244:Z=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Z=-.07383912482657777:t[0]>5147.500000000001?Z=.07008813937042091:t[10]>38.50000000000001?Z=-.06779203808365307:Z=-.013782769999524498:Z=.0880038869117715:Z=-.12846294176070952:t[281]>1e-35?Z=-.06810806903850834:t[10]>227.50000000000003?Z=-.08937977001661111:t[10]>130.50000000000003?Z=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Z=.011036530162093841:Z=-.11500797478569702:Z=.03702229366129399:Z=.07242026683784307:t[189]>1e-35?Z=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Z=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Z=-.02608892716555304:Z=.09609599320761308:t[9]>105.50000000000001?Z=-.06848127135991534:Z=.0023675721254089715:t[86]>1e-35?Z=-.11049635625500497:Z=-.004847764219432233;let ge;t[125]>1e-35?t[0]>3969.5000000000005?ge=-.09462233499115416:ge=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ge=-.030700661288166148:ge=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ge=.03149547314036763:ge=-.08166208257451366:t[0]>5850.500000000001?ge=-.10228136324773157:t[102]>1e-35?ge=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ge=.01782894842128785:t[13]>1e-35?ge=.002680190260979968:ge=.1773965720476949:t[2]>72.50000000000001?ge=.09090831938627947:t[1]>59.50000000000001?ge=-.12297206702816128:t[0]>4977.500000000001?ge=.09899015653118268:ge=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ge=-.0675900954187773:ge=.012336403425364092:ge=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ge=-.02671721777458802:ge=-.09242452991958029:t[284]>1e-35?ge=-.08585691288582491:ge=.013332890564324447:t[4]>14.500000000000002?ge=-.005245022074799553:t[23]>1e-35?ge=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ge=-.09289852307936758:t[116]>1e-35?ge=-.09686573010015055:t[8]>804.5000000000001?ge=.03812547148215318:ge=.005162744968176633:t[9]>43.50000000000001?ge=-.059246106396159376:ge=.050370113808135275:ge=.000794041852811028;let Se;t[3]>7.500000000000001?Se=.0004981426543104341:t[9]>114.50000000000001?Se=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Se=-.019061766497948867:Se=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Se=-.006044199577160493:Se=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Se=.11486607015912494:t[9]>16.500000000000004?Se=-.08686820858087294:Se=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Se=-.022230207980026437:Se=.1056683690528792:Se=-.05859530800943035:Se=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Se=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Se=-.05177544573528314:Se=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Se=.15159657923771555:Se=-.0060542654587671055:t[9]>5.500000000000001?Se=-.042808028205051786:t[1]>48.50000000000001?Se=-.010449538258110742:Se=.10026907521968294:Se=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Se=-.02272452389409874:Se=-.11202691218244319:t[5]>1809.5000000000002?Se=-.04460413584255906:Se=.08196329474205256:t[10]>69.50000000000001?Se=.10221481166238167:Se=.0004063052701699382:t[243]>1e-35?Se=-.07563941678849846:t[18]>1e-35?Se=.02563513231103432:Se=-.004740081147303786;let lt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?lt=.057446442918106:lt=-.04404018270156349:lt=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?lt=-.05930486238817954:t[1]>29.500000000000004?lt=.06955866121256543:t[8]>597.5000000000001?lt=-.06538593556505168:lt=.06212512595497445:lt=.00021102929959182257:t[9]>90.50000000000001?lt=.0958061289119631:t[102]>1e-35?lt=.07172059675638813:t[1]>47.50000000000001?lt=-.03879798603977766:t[297]>1e-35?lt=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?lt=.003805910996312012:lt=.09304295674749524:t[11]>1e-35?t[18]>1e-35?lt=.11252376801858695:t[288]>1e-35?lt=-.10293901912180432:lt=.014669268837893872:t[1]>42.50000000000001?lt=-.05988274123836837:t[145]>1e-35?lt=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?lt=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?lt=-.03366718308159971:lt=.11936550608549797:t[1]>31.500000000000004?lt=-.07454716789539667:lt=.027859650621164217:t[10]>10.500000000000002?lt=-.11806374092321247:lt=-.03506042229223101:lt=-.0007080765837654515:t[10]>6.500000000000001?lt=-.028077713664996503:t[2]>7.500000000000001?lt=.15803724124216814:lt=.0351381284833169:lt=-.07877953381054767;let wt;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?wt=.14144941521975005:wt=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?wt=.10514088112381886:t[7]>18.500000000000004?wt=-.10370643555956745:wt=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?wt=-.0508129468802936:t[224]>1e-35?wt=-.037816066368733595:t[10]>43.50000000000001?wt=.07793408602607932:wt=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?wt=.036972453794202324:wt=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?wt=.09475302525132188:wt=-.03580104945898193:wt=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?wt=-.1282448778804823:wt=-.014395808269207212:wt=-.008940927190750592:wt=-.1459118815453748:t[0]>4897.500000000001?wt=-.09733068457286576:t[1]>57.50000000000001?wt=.06575271409540207:wt=-.019556422817450115:wt=-.10623959222984136:t[18]>1e-35?wt=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?wt=.008125645893104896:wt=-.11084368630465868:wt=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?wt=-.05854904579626861:t[4]>5.500000000000001?wt=.02985784951394175:wt=-.03247600140149334:wt=-.11152899295304973:wt=-.00035424577714215764;let zt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?zt=-.06563670567578264:zt=.067656954313663:zt=-.10388217548685377:t[8]>2302.5000000000005?zt=.07190621943790435:t[4]>67.50000000000001?zt=.060020507643618604:t[4]>38.50000000000001?zt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?zt=-.06568134366461277:t[8]>1075.5000000000002?zt=-.004768057709758692:zt=.11785959165999467:zt=-.05080221682879267:zt=.14814206127494542:zt=-.07241946332311736:t[253]>1e-35?zt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?zt=-.02471195342450034:zt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?zt=-.10741850739482771:zt=.010051635824944:zt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?zt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?zt=-.08992396138178163:zt=.010944365997007212:zt=.06221307021813793:zt=.1286024087559141:t[127]>1e-35?zt=.06568148624531012:t[10]>40.50000000000001?zt=-.07567979134643352:t[5]>5647.500000000001?zt=.07594672895572069:zt=-.018158016446439187:t[6]>55.50000000000001?zt=.009293422430111872:t[4]>45.50000000000001?zt=-.017749818406964022:t[2]>46.50000000000001?zt=.01714136511113982:zt=-724762291423549e-19;let Zt;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?Zt=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?Zt=.07084726276890757:Zt=-.11232323677722932:Zt=.04812773089510436:Zt=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?Zt=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?Zt=.0879462816013881:Zt=-.002966662093626573:t[306]>1e-35?Zt=-.04588085188342676:Zt=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?Zt=-.006600332774461143:Zt=.1272481351557754:Zt=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?Zt=.011884312066620044:Zt=.11678751052403374:t[4]>8.500000000000002?Zt=.03627129613273813:Zt=-.12132783497902287:Zt=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Zt=-.06830131718398992:t[0]>5147.500000000001?Zt=.062360406249609306:t[4]>4.500000000000001?Zt=-.013162203864592055:Zt=-.07153029184927609:Zt=.07628618062271557:Zt=-.12085065687320373:t[190]>1e-35?Zt=-.045816889524231186:t[137]>1e-35?Zt=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?Zt=.025895337822752502:Zt=-.06503949350616421:t[10]>227.50000000000003?Zt=-.09989456525790491:t[10]>130.50000000000003?Zt=.08616651057030683:Zt=.0001234981796706021;let Yt;t[8]>1014.5000000000001?t[9]>137.50000000000003?Yt=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Yt=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Yt=-.141732381961068:Yt=-.0317152307496497:Yt=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Yt=.12191801556691254:Yt=-.0003444689085397977:Yt=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Yt=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Yt=-.05676033995381961:Yt=.10933961076803381:t[4]>26.500000000000004?Yt=-.11667582544549814:t[8]>1765.5000000000002?Yt=.032174455312047705:Yt=-.0755016390126608:t[293]>1e-35?Yt=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Yt=.026571311956824436:t[15]>1e-35?Yt=.06175459479851121:Yt=-.018778084411148754:t[9]>40.50000000000001?Yt=-.09420232889965811:Yt=-.004578248021263184:t[2]>1.5000000000000002?Yt=.005453714644971445:Yt=-.03907138175699279:Yt=-.055296364182154736:t[23]>1e-35?Yt=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Yt=-.09358146510580179:Yt=.060524657996178094:Yt=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Yt=-.12698331085931538:Yt=.006059605604079918:t[2]>196.50000000000003?Yt=-.09451315810804783:Yt=.0011390147031687425;let xt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?xt=.05517359070460923:xt=-.04758751221404857:xt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?xt=.1040436595565776:t[9]>21.500000000000004?xt=.04032250517675179:t[107]>1e-35?xt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?xt=.1192453009230486:t[1]>51.50000000000001?xt=.0443376336292195:xt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?xt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?xt=-.08999822408398037:xt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?xt=-.061850439226075:xt=.08849196353361093:xt=.10536348167793089:t[92]>1e-35?xt=.04894947712119185:t[9]>16.500000000000004?xt=.05900227903883853:t[9]>5.500000000000001?xt=-.11946594348916476:xt=-.03652096348071964:t[1]>41.50000000000001?xt=-.07411603110840567:xt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?xt=.08493634342741495:t[11]>1e-35?xt=-.10899097825564363:xt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?xt=.08356655906359918:t[7]>25.500000000000004?xt=-.09475076526194888:t[10]>5.500000000000001?xt=-.01999406228763778:xt=.06696212545889428:t[6]>20.500000000000004?xt=.14713592661393468:xt=.0459917279002218:xt=.00027445928493734093;let mr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?mr=-.06904501553217077:mr=.05696231672035904:mr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?mr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?mr=-.011419256378538392:t[0]>3830.5000000000005?mr=.140315841503076:mr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?mr=-.04027822909411164:mr=.03176085103667189:mr=.06779515865838849:t[4]>15.500000000000002?mr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?mr=.06124039747298539:mr=-.04312732764434027:mr=.09161522761808062:mr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?mr=.11211681010488772:t[13]>1e-35?mr=.06725735814960367:mr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?mr=.11743605068905603:mr=-.011309033539148687:mr=-.07896094707523052:mr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?mr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?mr=.02836295848998302:mr=.12210680366745175:mr=-.058302317470509096:t[5]>4144.500000000001?mr=.06123341960495106:mr=-.03840046906926525:mr=-.05221474543453495:mr=.03988215485860711:mr=-.00033074684693083496;let si=z7t(e+r+n+i+o+a+c+l+u+f+p+h+m+g+A+y+E+b+_+S+P+B+F+Y+ee+V+H+U+X+K+j+W+J+ie+ae+te+pe+Ae+Oe+Te+Je+Fe+ct+St+vt+mt+ue+Ue+ye+We+se+le+qe+Be+xe+je+et+pt+Lt+Kt+Ft+Qr+Sr+rn+ve+Ge+ft+It+rr+Xt+xr+ar+er+sr+tr+kr+Ur+Jr+hn+Zn+bn+Jn+Xr+Gn+Pe+z+Ce+Ie+M+D+Z+ge+Se+lt+wt+zt+Zt+Yt+xt+mr);return[1-si,si]}s(nje,"multilineModelPredict");function z7t(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(z7t,"sigmoid");var Y7t={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},ije={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function oje(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Y7t[r]??[]).some(c=>o.includes(c))}s(oje,"hasComment");var aK=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=oje(e,-2,r),this.rstripSecondToLastLineHasComment=oje(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},AAe=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new aK(e,n),this.suffixFeatures=new aK(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(ije).length+1).fill(0);r[ije[this.language]??0]=1;let n=new Array(Object.keys(Uv).length+1).fill(0);n[Uv[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(Uv).length+1).fill(0);i[Uv[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(Uv).length+1).fill(0);o[Uv[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(Uv).length+1).fill(0);return a[Uv[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function K7t(t,e){return new AAe(t.prefix,t.suffix,e)}s(K7t,"constructMultilineFeatures");function sje(t,e){let r=K7t(t,e).constructFeatures();return nje(r)[1]}s(sje,"requestMultilineScore");d();d();d();d();async function*qv(t,e){for await(let r of t)yield e(r)}s(qv,"asyncIterableMap");async function*aje(t,e){for await(let r of t)await e(r)&&(yield r)}s(aje,"asyncIterableFilter");async function*EF(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(EF,"asyncIterableMapFilter");async function*cje(...t){for(let e of t)yield*e}s(cje,"asyncIterableConcat");d();async function xF(t,e,r,n){let i=Fr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Ot).updateExPValuesAndAssignments(n,i)}s(xF,"createTelemetryWithExpWithId");function xc(t,{turn:e,conversation:r}={},n){return xF(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(xc,"createTelemetryWithExpWithTurn");function bF(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(J7t(c))),a=a.extendedBy(u,f),a}s(bF,"extendUserMessageTelemetryData");function J7t(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(J7t,"mapSkillResolutionsForTelemetry");function lje(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),cK(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(lje,"createUserMessageTelemetryData");function uje(t,e,r,n,i,o,a,c){let l=Z7t(n);return cK(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:n.length,numCodeBlocks:l.length,numTokens:i},c).properties.messageId}s(uje,"createModelMessageTelemetryData");function dje(t,e,r,n,i,o,a){cK(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(dje,"createOffTopicMessageTelemetryData");function fje(t,e,r,n,i,o,a,c,l){let u=cK(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return X7t(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(fje,"createSuggestionMessageTelemetryData");var pje={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function hje(t,e,r){let n=await xc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";nf(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(hje,"telemetryIndexCodesearch");function cK(t,e,r,n,i,o,a){let c=a??Fr.createAndMarkAsIssued(),l={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in c.properties)){let h=gr();i.messageId=h,l.messageId=h}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=c.extendedBy(i,o),f=c.extendedBy(l),p=Wl(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,f,1),u}s(cK,"telemetryMessage");function mje(t,e,r,n){nf(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(mje,"createSuggestionShownTelemetryData");function X7t(t,e,r,n,i,o,a,c){nf(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(X7t,"createSuggestionSelectedTelemetryData");function nf(t,e,r,n,i,o){let a=o??Fr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Bt(t,i,c),c}s(nf,"telemetryUserAction");function K3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(K3,"logEngineMessages");function Wl(t){switch(t){case"conversationInline":return"inlineConversation";case"conversationPanel":case"agentPanel":case"editsPanel":default:return"conversation"}}s(Wl,"telemetryPrefixForUiKind");function Z7t(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(Z7t,"getCodeBlocks");function gje(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(gje,"uiKindToIntent");function YI(t){return t==="inline"?"conversationInline":"conversationPanel"}s(YI,"conversationSourceToUiKind");function Aje(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};Cje(t,"round",i.extendedBy(o,a))}s(Aje,"createAgentRoundTelemetryData");function yje(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};Cje(t,"toolCall",c.extendedBy(l,u))}s(yje,"createToolInvocationTelemetryData");function Cje(t,e,r){return Bt(t,`${Wl("agentPanel")}.${e}`,r)}s(Cje,"logAgenticEvent");function eQt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(eQt,"truncateContentIfNeeded");function vje(t,e,r,n,i,o,a){let c=`${Wl(e)}.${a}`,l=o.extendedBy(r,n);Bt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=eQt(i.currentFileContent));let f=o.extendedBy(u,n);Bt(t,`${c}.restricted`,f,1)}s(vje,"telemetryEditSurvivalTracking");d();d();function Hv(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(Hv,"toString");var mp=new _t("streamChoices"),yAe=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new EAe;this.tool_calls=[];this.function_call=new vAe;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new CAe),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function tQt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(tQt,"splitChunk");var CAe=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},vAe=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},EAe=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},KI=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=Q2(this.response);this.stats=new xAe;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),mp.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),mp.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;mp.debug(this.ctx,"chunk",a.toString());let[c,l]=tQt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{mp.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&rQt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?mp.error(this.ctx,"Error in response:",p.error.message):mp.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let h=0;h<p.choices?.length;h++){let m=p.choices[h];mp.debug(this.ctx,"choice",m),this.stats.add(m.index),m.index in this.solutions||(this.solutions[m.index]=new yAe);let g=this.solutions[m.index];if(g==null)continue;g.append(m);let A=this.asSolutionDecision(),y=m.text?.indexOf(`
`)>-1||m.delta?.content?.indexOf(`
`)>-1;if(m.finish_reason||y){let b=g.text.join("");if(A=this.asSolutionDecision(await e(b,{text:b,index:m.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>IF(g),"getAPIJsonData"),finished:!!m.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(m.finish_reason&&g.function_call.name!==void 0){n=m.finish_reason;continue}if(m.finish_reason&&(A.yieldSolution=!0,A.continueStreaming=!1),!A.yieldSolution)continue;let E=m.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:E,engineName:i??"",engineChoiceSource:SI(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(m.finish_reason)?this.solutions[m.index]=null:g.yielded||(this.stats.markYielded(m.index),yield{solution:g,finishOffset:A.finishOffset,reason:m.finish_reason,requestId:this.requestId,index:m.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;A.continueStreaming||(this.solutions[m.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&mp.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{mp.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>IF(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(mp.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function lK(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(mp.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),mp.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),mp.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=IF(e.solution);return uK(t,n,o,e.index,e.requestId,i,r)}s(lK,"prepareSolutionForReturn");function IF(t){let e=t.text.join(""),r=nQt(t),n=iQt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(IF,"convertToAPIJsonData");function rQt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(rQt,"isCopilotConfirmation");function Eje(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${Hv(n)}. Input: '${t}'`)}}s(Eje,"parseCallArguments");function nQt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=Eje(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(nQt,"extractToolCalls");function iQt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=Eje(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(iQt,"extractFunctionCall");var xAe=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new bAe,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},bAe=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function dK(t,e){return t!==null&&typeof t=="object"&&e in t}s(dK,"hasKey");function of(t,e){return dK(t,e)?t[e]:void 0}s(of,"getKey");var bje=Me(pi());var Fa=new _t("fetchCompletions");function Q2(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(Q2,"getRequestId");function J3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(J3,"getProcessingTime");function Ije(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(Ije,"uiKindToIntent");var t0=class{static{s(this,"OpenAIFetcher")}};function oQt(t,e,r,n){return Ry(t,e,"proxy","v1/engines",r,n)}s(oQt,"getProxyEngineUrl");function fK(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(fK,"sanitizeRequestOptionTelemetry");async function xje(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(yo),h=oQt(t,a,r,n),m=l.extendedBy({endpoint:n,engineName:r,uiKind:c},aP(e));fK(o,m,["prompt","suffix"],["context"]),m.properties.headerRequestId=i,Bt(t,"request.sent",m);let g=Ca(),A=Ije(c);return N_(t,h,a.token,A,i,o,u,f).then(y=>{let E=Q2(y);m.extendWithRequestId(E);let b=Ca()-g;return m.measurements.totalTimeMs=b,Fa.info(t,`Request ${i} at <${h}> finished with ${y.status} status after ${b}ms`),m.properties.status=String(y.status),Fa.debug(t,"request.response properties",m.properties),Fa.debug(t,"request.response measurements",m.measurements),Fa.debug(t,"prompt:",e),Bt(t,"request.response",m),y}).catch(y=>{if(td(y))throw Bt(t,"request.cancel",m),y;p.setWarning(of(y,"message")??"");let E=m.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),m.properties.message=String(of(y,"name")??""),m.properties.code=String(of(y,"code")??""),m.properties.errno=String(of(y,"errno")??""),m.properties.type=String(of(y,"type")??"");let b=Ca()-g;throw m.measurements.totalTimeMs=b,Fa.info(t,`Request ${i} at <${h}> rejected with ${String(y)} after ${b}ms`),Fa.debug(t,"request.error properties",m.properties),Fa.debug(t,"request.error measurements",m.measurements),Bt(t,"request.error",m),y}).finally(()=>{gNe(t,e,m)})}s(xje,"fetchWithInstrumentation");async function sQt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});fK(o,f,["messages"]),f.properties.headerRequestId=i,Bt(t,"request.sent",f);let p=Ca(),h=Ije(c),m={...II(t)};try{let g=await N_(t,n,a.token,h,i,o,u,m),A=Q2(g);f.extendWithRequestId(A);let y=Ca()-p;return f.measurements.totalTimeMs=y,Fa.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${y}ms`),Fa.debug(t,"request.response properties",f.properties),Fa.debug(t,"request.response measurements",f.measurements),Fa.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",f),g}catch(g){if(td(g))throw Bt(t,"request.cancel",f),g;let A=f.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",A),f.properties.message=String(of(g,"name")??""),f.properties.code=String(of(g,"code")??""),f.properties.errno=String(of(g,"errno")??""),f.properties.type=String(of(g,"type")??"");let y=Ca()-p;throw f.measurements.totalTimeMs=y,Fa.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${y}ms`),Fa.debug(t,"request.error properties",f.properties),Fa.debug(t,"request.error measurements",f.measurements),Bt(t,"request.error",f),g}finally{K3(t,e,f)}}s(sQt,"fetchChatWithInstrumentation");function IAe(t){return aje(t,e=>e.completionText.trim().length>0)}s(IAe,"postProcessChoices");var aQt="github.copilot.completions.quotaExceeded",TF=class extends t0{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(yo),c="completions",l=await e.get(Gr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let m=u.body();try{m&&"destroy"in m&&typeof m.destroy=="function"?m.destroy():m instanceof ReadableStream&&m.cancel()}catch(g){Fa.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let m=this.createTelemetryData(c,e,r);return this.handleError(e,a,m,u,l)}let p=KI.create(e,r.count,u,n,[],o).processSSE(i),h=qv(p,m=>lK(e,m,n));return{type:"success",choices:IAe(h),getProcessingTime:s(()=>J3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},h=n.extendedBy({endpoint:f,model:c.name}),m=e.get(yo),g=await e.get(Gr).getToken(),A=await sQt(e,r,c.id,f,o,p,g,i,h,u);if(u?.isCancellationRequested){let _=A.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(S){Fa.exception(e,S,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(A.status!==200){let _=Fr.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,m,_,A,g)}let E=KI.create(e,1,A,h,[],bje.CancellationToken.None).processSSE(),b=qv(E,_=>lK(e,_,n));return{type:"success",choices:IAe(b),getProcessingTime:s(()=>J3(A),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(yo),c="speculation",l=await e.get(Gr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:gr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(A){Fa.exception(e,A,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let h=KI.create(e,1,f,n,[],o).processSSE(i),m=qv(h,g=>lK(e,g,n));return{type:"success",choices:IAe(m),getProcessingTime:s(()=>J3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return Fr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await tC(0),a?.isCancellationRequested?"not-sent":await xje(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Ot).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:hK(e),temperature:X3(e,n.count),top_p:pK(e),n:n.count,stop:Tje(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=Pv(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await tC(0),a?.isCancellationRequested?"not-sent":await xje(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:aQt,title:"Learn More"});let l=ha(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Fa.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Fa.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Fa.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Gr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Fa.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Fa.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Fa.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function uK(t,e,r,n,i,o,a){return mNe(t,e,r,i,n),{completionText:e,meanLogProb:cQt(t,r),meanAlternativeLogProb:lQt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:gr(),finishReason:r.finish_reason}}s(uK,"convertToAPIChoice");function cQt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){An.exception(t,r,"Error calculating mean prob")}}s(cQt,"calculateMeanLogProb");function lQt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){An.exception(t,r,"Error calculating mean prob")}}s(lQt,"calculateMeanAlternativeLogProb");function X3(t,e){return cg(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(X3,"getTemperatureForSamples");var uQt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function Tje(t,e){return uQt[e??""]??[`


`,"\n```"]}s(Tje,"getStops");function pK(t){return 1}s(pK,"getTopP");function hK(t){return PM}s(hK,"getMaxSolutionTokens");var TAe=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},mK=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new TAe(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new sK(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=uK(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let h={...p};return h.start_offset-=i,h.stop_offset-=i,a||(h.stop_offset=Math.min(h.stop_offset,e.completionText.length)),h});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var Kh=class{constructor(){this.cache=new Or(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var gK=new _t("getCompletions");function AK(t,e,r){t.get(Kh).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=Z3(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(AK,"telemetryShown");function wje(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(wje,"telemetryAccepted");function _je(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(_je,"telemetryRejected");function JI(t,e={}){return{...e,telemetryBlob:t}}s(JI,"mkCanceledResultTelemetry");function za(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(za,"mkBasicResultTelemetry");function Sje(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Ca()-e.telemetryBlob.issuedTime,n=Z3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return gK.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),lde(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(gK.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}lde(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(Sje,"handleGhostTextResultTelemetry");function Z3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(Z3,"resultTypeToString");d();d();d();d();d();d();var $l=class{constructor(e=()=>new wAe){this.createStatistics=e;this.statistics=new Or(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},wAe=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let h=e.find(m=>m.source===u);h===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:h.expectedTokens>0&&h.expectedTokens===h.actualTokens?"full":h.actualTokens>0?"partial":"none",expectedTokens:h.expectedTokens,actualTokens:h.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function Rje(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(Rje,"componentStatisticsToPromptMatcher");d();var kje=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),Pje=I.Intersect([I.Object({name:I.String(),value:I.String()}),kje]),Dje=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),kje]),dQt=[Pje,Dje],fQt=I.Union(dQt),pQt=new Map([["Trait",Gs.Compile(Pje)],["CodeSnippet",Gs.Compile(Dje)]]),hQt=s(t=>t,"ensureTypesAreEqual");hQt(!0);var mQt=I.Object({contextItems:I.Array(fQt)}),gQt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),_Ae=I.Object({id:I.String()}),AQt=I.Intersect([_Ae,gQt]),yQt=I.Intersect([_Ae,mQt]),Bje=I.Object({providers:I.Array(AQt)}),Nje=I.Object({providers:I.Array(_Ae)}),SAe=I.Object({providers:I.Array(yQt),updating:I.Optional(I.Array(I.String()))}),yK=I.Intersect([wNe,I.Object({contextItems:I.Optional(SAe)})]);function CK(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(CK,"filterContextItemsByType");function Lje(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of pQt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(Lje,"filterSupportedContextItems");function CQt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(CQt,"validateContextItemId");function Mje(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??gr();if(!CQt(o)){let a=gr();An.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=gr();An.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(Mje,"addOrValidateContextItemsIDs");var vQt="content_excluded";async function Fje(t,e,r,n){let i=CK(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(h=>o.add(h)),{providerId:f.providerId,data:p}))),c=t.get(vr),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get($l).getStatisticsForCompletion(e);return a.filter(f=>{let h=[f.data.uri,...f.data.additionalUris??[]].every(m=>l.get(m)?.status==="valid");return h?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,vQt]]),h}).map(f=>f.data)}s(Fje,"getCodeSnippetsFromContextItems");function Oje(t,e){let r=t.get(vr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(Oje,"addRelativePathToCodeSnippets");d();function Ya(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Ya,"Text");function XI(t){return t.children}s(XI,"Chunk");d();function $r(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s($r,"functionComponentFunction");function Vg(t){return{type:"f",children:t}}s(Vg,"fragmentFunction");Vg.isFragmentFunction=!0;var vK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(r0,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=Oje(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(h=>h.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(h=>h.snippet),importance:Math.max(...p.map(h=>h.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push($r(Ya,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,h)=>{f.push($r(Ya,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&h<u.chunkElements.length-1&&f.push($r(Ya,{children:"---"}))}),$r(XI,{children:f})})},"CodeSnippets");d();function RAe(t){return t.children}s(RAe,"CompletionsContext");function kAe(t){return t.children}s(kAe,"StableCompletionsContext");function PAe(t){return t.children}s(PAe,"AdditionalCompletionsContext");function EK(t){return t.name===RAe.name||t.name===kAe.name||t.name===PAe.name}s(EK,"isContextNode");d();d();d();function xK(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(xK,"findEditDistanceScore");var wF=50;function DAe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(DAe,"approximateMaxCharacters");function _F(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(r0,m=>{let g=m.document;(m.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),m.position!==i&&o(m.position),m.suffixMatchThreshold!==l&&u(m.suffixMatchThreshold),m.maxPromptTokens!==a&&c(m.maxPromptTokens),m.tokenizer!==f&&p(m.tokenizer)});let h=DAe(a);return $r(Vg,{children:[$r(U2,{document:r,position:i,maxCharacters:h}),$r(bK,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:h,tokenizer:f})]})}s(_F,"CurrentFile");function U2(t){if(t.document===void 0||t.position===void 0)return $r(Ya,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),$r(Ya,{children:e})}s(U2,"BeforeCursor");function bK(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return $r(Ya,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return $r(Ya,{});if(r===o)return $r(Ya,{children:r});let a=o;if(r!==""){let c=vo(t.tokenizer),l=c.takeFirstTokens(o,wF);l.tokens.length>0&&100*xK(l.tokens,c.takeFirstTokens(r,wF).tokens)?.score<(t.suffixMatchThreshold??m3)*l.tokens.length&&(a=r)}return a!==r&&n(a),$r(Ya,{children:a})}s(bK,"AfterCursor");function Qje(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(r0,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=DAe(a);return $r(U2,{document:r,position:i,maxCharacters:l})}s(Qje,"DocumentPrefix");function Uje(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(r0,m=>{let g=m.document;(m.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),m.position!==i&&o(m.position),m.suffixMatchThreshold!==l&&u(m.suffixMatchThreshold),m.maxPromptTokens!==a&&c(m.maxPromptTokens),m.tokenizer!==f&&p(m.tokenizer)});let h=DAe(a);return $r(bK,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:h,tokenizer:f})}s(Uje,"DocumentSuffix");d();var IK=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(h=>h!=="").map(h=>{let m=r.tokenLength(h);return l+=m,n+=m,{line:h,componentPath:a.componentPath,tokens:m}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(m=>m.componentPath===f.componentPath&&m.line!=="").map(m=>m.line).join(""),h=f.tokens;return p!==f.value&&(h=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:h}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function qje(t){return t.map(e=>e.elidedValue).join("")}s(qje,"makePrompt");function Hje(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(Hje,"makePrefixPrompt");function Wje(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(Wje,"makeContextPrompt");d();var tD=class{constructor(e,r=BAe()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function BAe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===XI.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(BAe,"defaultTransformers");d();var SF={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},NAe={};for(let[t,e]of Object.entries(SF))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)NAe[r]=t;else NAe[t]=t;function jje(t){return NAe[t]}s(jje,"mdCodeBlockLangToLanguageId");var EQt={start:"//",end:""},xQt=["php","plaintext"],LAe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function Gje(t){return Object.values(LAe).includes(t.trim())}s(Gje,"isShebangLine");function bQt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(bQt,"hasLanguageMarker");function IQt(t,e){let r=SF[e]?SF[e].lineComment:EQt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(IQt,"comment");function rC(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>IQt(o,e)).join(`
`);return r?i+`
`:i}s(rC,"commentBlockAsSingles");function TK(t){let{languageId:e}=t;return xQt.indexOf(e)===-1&&!bQt(t)?e in LAe?LAe[e]:`Language: ${e}`:""}s(TK,"getLanguageMarker");function wK(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(wK,"getPathMarker");function RF(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(RF,"newLineEnded");function Vje(t){return $je(typeof t=="string"?t:"plaintext")}s(Vje,"getLanguage");function $je(t){return SF[t]!==void 0?{languageId:t,...SF[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s($je,"_getLanguage");var TQt=5,rD=class{constructor(){this.renderId=0;this.formatPrefix=qje}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:h}=this.getPromptLimits(u,r),m=performance.now(),g=new IK,{blocks:[A,...y]}=g.elide(l,p,u,h,vo(c)),E=performance.now(),b=this.formatPrefix(y),_=this.formatContext?this.formatContext(y):void 0,S=A.elidedValue,P=y.reduce((B,F)=>B+F.elidedTokens,0);return f.push(...wQt([...y,A])),{prefix:b,prefixTokens:P,suffix:S,suffixTokens:A.elidedTokens,context:_,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:E-m,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((B,F)=>B+(F.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-TQt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new tD(e,MAe).walkSnapshot((f,p,h)=>{if(f===e||(f.name===_F.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let m=h.chunks;if(h.type==="suffix")o.push({value:kF(f.value),type:"suffix",weight:h.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:m,source:h.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,A=g;h.type==="prefix"?A=f.value:Gje(f.value)?A=g:A=rC(g,n),i.push({type:h.type==="prefix"?"prefix":"context",value:kF(A),weight:h.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:m,source:h.source})}return!0}),!c)throw new Error(`Node of type ${_F.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},MAe=[...BAe(),(t,e,r)=>EK(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===U2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===bK.name?{...r,type:"suffix"}:r];function wQt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(wQt,"computeComponentStatistics");function kF(t){return t.replace(/\r\n?/g,`
`)}s(kF,"normalizeLineEndings");d();var _K=s((t,e)=>{let[r,n]=e.useState();if(e.useData(r0,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(vr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?$r(_Qt,{docInfo:a}):$r(SQt,{docInfo:a})}},"DocumentMarker"),_Qt=s(t=>$r(Ya,{children:wK(t.docInfo)}),"PathMarker"),SQt=s(t=>$r(Ya,{children:TK(t.docInfo)}),"LanguageMarker");d();d();d();d();function PF(t,e="Unreachable"){throw new Error(e)}s(PF,"assertNever");function jl(t,e="unexpected state"){if(!t)throw new gn(`Assertion Failed: ${e}`)}s(jl,"assert");function zg(t){if(!t()){debugger;t(),Q3(new gn("Assertion Failed"))}}s(zg,"assertFn");function q2(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(q2,"checkAdjacentItems");d();d();d();d();d();var Wv=s((t,e)=>t===e,"strictEquals");d();d();var ea=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},DF=class{constructor(){this._first=ea.Undefined;this._last=ea.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===ea.Undefined}clear(){let e=this._first;for(;e!==ea.Undefined;){let r=e.next;e.prev=ea.Undefined,e.next=ea.Undefined,e=r}this._first=ea.Undefined,this._last=ea.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new ea(e);if(this._first===ea.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==ea.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ea.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ea.Undefined&&e.next!==ea.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===ea.Undefined&&e.next===ea.Undefined?(this._first=ea.Undefined,this._last=ea.Undefined):e.next===ea.Undefined?(this._last=this._last.prev,this._last.next=ea.Undefined):e.prev===ea.Undefined&&(this._first=this._first.next,this._first.prev=ea.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ea.Undefined;)yield e.element,e=e.next}};d();var RQt=globalThis.performance&&typeof globalThis.performance.now=="function",nD=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=RQt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var zje=!1,kQt=!1,H2;(K=>{K.None=s(()=>Es.None,"None");function e(j){if(kQt){let{onDidAddListener:W}=j,J=BF.create(),ie=0;j.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),J.print()),W?.()}}}s(e,"_addLeakageTraceLogic");function r(j,W){return m(j,()=>{},0,void 0,!0,void 0,W)}K.defer=r,s(r,"defer");function n(j){return(W,J=null,ie)=>{let ae=!1,te;return te=j(pe=>{if(!ae)return te?te.dispose():ae=!0,W.call(J,pe)},null,ie),ae&&te.dispose(),te}}K.once=n,s(n,"once");function i(j,W){return K.once(K.filter(j,W))}K.onceIf=i,s(i,"onceIf");function o(j,W,J){return p((ie,ae=null,te)=>j(pe=>ie.call(ae,W(pe)),null,te),J)}K.map=o,s(o,"map");function a(j,W,J){return p((ie,ae=null,te)=>j(pe=>{W(pe),ie.call(ae,pe)},null,te),J)}K.forEach=a,s(a,"forEach");function c(j,W,J){return p((ie,ae=null,te)=>j(pe=>W(pe)&&ie.call(ae,pe),null,te),J)}K.filter=c,s(c,"filter");function l(j){return j}K.signal=l,s(l,"signal");function u(...j){return(W,J=null,ie)=>{let ae=yWe(...j.map(te=>te(pe=>W.call(J,pe))));return h(ae,ie)}}K.any=u,s(u,"any");function f(j,W,J,ie){let ae=J;return o(j,te=>(ae=W(ae,te),ae),ie)}K.reduce=f,s(f,"reduce");function p(j,W){let J,ie={onWillAddFirstListener(){J=j(ae.fire,ae)},onDidRemoveLastListener(){J?.dispose()}};W||e(ie);let ae=new gp(ie);return W?.add(ae),ae.event}s(p,"snapshot");function h(j,W){return W instanceof Array?W.push(j):W&&W.add(j),j}s(h,"addAndReturnDisposable");function m(j,W,J=100,ie=!1,ae=!1,te,pe){let Ae,Oe,Te,Je=0,Fe,ct={leakWarningThreshold:te,onWillAddFirstListener(){Ae=j(vt=>{Je++,Oe=W(Oe,vt),ie&&!Te&&(St.fire(Oe),Oe=void 0),Fe=s(()=>{let mt=Oe;Oe=void 0,Te=void 0,(!ie||Je>1)&&St.fire(mt),Je=0},"doFire"),typeof J=="number"?(clearTimeout(Te),Te=setTimeout(Fe,J)):Te===void 0&&(Te=0,queueMicrotask(Fe))})},onWillRemoveListener(){ae&&Je>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,Ae.dispose()}};pe||e(ct);let St=new gp(ct);return pe?.add(St),St.event}K.debounce=m,s(m,"debounce");function g(j,W=0,J){return K.debounce(j,(ie,ae)=>ie?(ie.push(ae),ie):[ae],W,void 0,!0,void 0,J)}K.accumulate=g,s(g,"accumulate");function A(j,W=(ie,ae)=>ie===ae,J){let ie=!0,ae;return c(j,te=>{let pe=ie||!W(te,ae);return ie=!1,ae=te,pe},J)}K.latch=A,s(A,"latch");function y(j,W,J){return[K.filter(j,W,J),K.filter(j,ie=>!W(ie),J)]}K.split=y,s(y,"split");function E(j,W=!1,J=[],ie){let ae=J.slice(),te=j(Oe=>{ae?ae.push(Oe):Ae.fire(Oe)});ie&&ie.add(te);let pe=s(()=>{ae?.forEach(Oe=>Ae.fire(Oe)),ae=null},"flush"),Ae=new gp({onWillAddFirstListener(){te||(te=j(Oe=>Ae.fire(Oe)),ie&&ie.add(te))},onDidAddFirstListener(){ae&&(W?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ie&&ie.add(Ae),Ae.event}K.buffer=E,s(E,"buffer");function b(j,W){return s((ie,ae,te)=>{let pe=W(new S);return j(function(Ae){let Oe=pe.evaluate(Ae);Oe!==_&&ie.call(ae,Oe)},void 0,te)},"fn")}K.chain=b,s(b,"chain");let _=Symbol("HaltChainable");class S{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(J=>(W(J),J)),this}filter(W){return this.steps.push(J=>W(J)?J:_),this}reduce(W,J){let ie=J;return this.steps.push(ae=>(ie=W(ie,ae),ie)),this}latch(W=(J,ie)=>J===ie){let J=!0,ie;return this.steps.push(ae=>{let te=J||!W(ae,ie);return J=!1,ie=ae,te?ae:_}),this}evaluate(W){for(let J of this.steps)if(W=J(W),W===_)break;return W}}function P(j,W,J=ie=>ie){let ie=s((...Ae)=>pe.fire(J(...Ae)),"fn"),ae=s(()=>j.on(W,ie),"onFirstListenerAdd"),te=s(()=>j.removeListener(W,ie),"onLastListenerRemove"),pe=new gp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}K.fromNodeEventEmitter=P,s(P,"fromNodeEventEmitter");function B(j,W,J=ie=>ie){let ie=s((...Ae)=>pe.fire(J(...Ae)),"fn"),ae=s(()=>j.addEventListener(W,ie),"onFirstListenerAdd"),te=s(()=>j.removeEventListener(W,ie),"onLastListenerRemove"),pe=new gp({onWillAddFirstListener:ae,onDidRemoveLastListener:te});return pe.event}K.fromDOMEventEmitter=B,s(B,"fromDOMEventEmitter");function F(j,W){return new Promise(J=>n(j)(J,null,W))}K.toPromise=F,s(F,"toPromise");function Y(j){let W=new gp;return j.then(J=>{W.fire(J)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}K.fromPromise=Y,s(Y,"fromPromise");function ee(j,W){return j(J=>W.fire(J))}K.forward=ee,s(ee,"forward");function V(j,W,J){return W(J),j(ie=>W(ie))}K.runAndSubscribe=V,s(V,"runAndSubscribe");class H{constructor(W,J){this._observable=W;this._counter=0;this._hasChanged=!1;let ie={onWillAddFirstListener:s(()=>{W.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{W.removeObserver(this)},"onDidRemoveLastListener")};J||e(ie),this.emitter=new gp(ie),J&&J.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,J){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function U(j,W){return new H(j,W).emitter.event}K.fromObservable=U,s(U,"fromObservable");function X(j){return(W,J,ie)=>{let ae=0,te=!1,pe={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(j.reportChanges(),te&&(te=!1,W.call(J)))},handlePossibleChange(){},handleChange(){te=!0}};j.addObserver(pe),j.reportChanges();let Ae={dispose(){j.removeObserver(pe)}};return ie instanceof Du?ie.add(Ae):Array.isArray(ie)&&ie.push(Ae),Ae}}K.fromObservableLight=X,s(X,"fromObservableLight")})(H2||={});var FAe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new nD,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},Yje=-1;var OAe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new QAe(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},BF=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},QAe=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},UAe=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},PQt=0,iD=class{constructor(e){this.value=e;this.id=PQt++}static{s(this,"UniqueContainer")}},DQt=2,BQt=s((t,e)=>{if(t instanceof iD)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),gp=class{constructor(e){this._size=0;this._options=e,this._leakageMon=Yje>0||this._options?.leakWarningThreshold?new OAe(e?.onListenerError??Q3,this._options?.leakWarningThreshold??Yje):void 0,this._perfMon=this._options?._profName?new FAe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(zje){let e=this._listeners;queueMicrotask(()=>{BQt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new UAe(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||Q3)(f),Es.None}if(this._disposed)return Es.None;r&&(e=e.bind(r));let i=new iD(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=BF.create(),o=this._leakageMon.check(i.stack,this._size+1)),zje&&(i.stack=a??BF.create()),this._listeners?this._listeners instanceof iD?(this._deliveryQueue??=new qAe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=vc(()=>{o?.(),this._removeListener(i)});return n instanceof Du?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*DQt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||Q3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof iD)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var qAe=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var sf=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return Zje(e,this)}},Kje=new Map,HAe=new WeakMap;function Zje(t,e){let r=HAe.get(t);if(r)return r;let n=NQt(t,e);if(n){let i=Kje.get(n)??0;i++,Kje.set(n,i);let o=i===1?n:`${n}#${i}`;return HAe.set(t,o),o}}s(Zje,"getDebugName");function NQt(t,e){let r=HAe.get(t);if(r)return r;let n=e.owner?MQt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=SK(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=LQt(e.owner,t);if(c!==void 0)return n+c}}s(NQt,"computeDebugName");function LQt(t,e){for(let r in t)if(t[r]===e)return r}s(LQt,"findKey");var Jje=new Map,Xje=new WeakMap;function MQt(t){let e=Xje.get(t);if(e)return e;let r=FQt(t),n=Jje.get(r)??0;n++,Jje.set(r,n);let i=n===1?r:`${r}#${n}`;return Xje.set(t,i),i}s(MQt,"formatOwner");function FQt(t){let e=t.constructor;return e?e.name:"Object"}s(FQt,"getClassName");function SK(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(SK,"getFunctionName");d();var W2;function kK(t){W2?W2 instanceof RK?W2.loggers.push(t):W2=new RK([W2,t]):W2=t}s(kK,"addLogger");function Ea(){return W2}s(Ea,"getLogger");var WAe;function eGe(t){WAe=t}s(eGe,"setLogObservableFn");function tGe(t){WAe&&WAe(t)}s(tGe,"logObservable");var RK=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var rGe;function nGe(t){rGe=t}s(nGe,"_setRecomputeInitiallyAndOnChange");var iGe;function oGe(t){iGe=t}s(oGe,"_setKeepObserved");var $Ae;function sGe(t){$Ae=t}s(sGe,"_setDerivedOpts");var PK=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return $Ae({owner:n,debugName:s(()=>{let o=SK(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return $Ae({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(rGe(this,r)),this}keepObserved(e){return e.add(iGe(this)),this}get debugValue(){return this.get()}},ZI=class extends PK{constructor(){super();this.observers=new Set;Ea()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Ea()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Ea()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Ea();return tGe(this),r||Ea()?.handleObservableCreated(this),this}};function BK(t,e){let r=new oD(t,e);try{t(r)}finally{r.finish()}}s(BK,"transaction");function jAe(t,e,r){t?e(t):BK(e,r)}s(jAe,"subtransaction");var oD=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Ea()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():SK(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Ea()?.handleEndTransaction(this)}};function Yg(t,e){let r;return typeof t=="string"?r=new sf(void 0,t,void 0):r=new sf(t,void 0,void 0),new DK(r,e,Wv)}s(Yg,"observableValue");var DK=class extends ZI{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,Ea()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new oD(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),Ea()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function $2(t){return new sD(new sf(void 0,void 0,t),t,void 0,void 0)}s($2,"autorun");function GAe(t,e){return new sD(new sf(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(GAe,"autorunOpts");function NK(t,e){return new sD(new sf(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(NK,"autorunHandleChanges");function VAe(t,e){let r=new Du,n=NK({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return vc(()=>{n.dispose(),r.dispose()})}s(VAe,"autorunWithStoreHandleChanges");function zAe(t){let e=new Du,r=GAe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return vc(()=>{r.dispose(),e.dispose()})}s(zAe,"autorunWithStore");var sD=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Ea()?.handleAutorunCreated(this),this._runIfNeeded(),q3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ea()?.handleAutorunDisposed(this),H3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Ea()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){L2(n)}finally{this._isRunning=!1}}}finally{this.disposed||Ea()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}zg(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Ea()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){L2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new gn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=sD)($2||={});d();function LK(t,e){return new j2(new sf(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??Wv)}s(LK,"derivedOpts");sGe(LK);var j2=class extends ZI{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Ea()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Ea()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){L2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new gn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}zg(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Ea()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){L2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new gn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function YAe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new eT(new sf(e,void 0,n),r,n,()=>eT.globalTransaction,Wv)}s(YAe,"observableFromEvent");var eT=class extends ZI{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,jAe(this._getTransaction(),c=>{Ea()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||Ea()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=eT;function e(n,i){let o=!1;eT.globalTransaction===void 0&&(eT.globalTransaction=n,o=!0);try{i()}finally{o&&(eT.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(YAe||={});function cGe(t){let e=new MK(!1,void 0);return t.addObserver(e),vc(()=>{t.removeObserver(e)})}s(cGe,"keepObserved");oGe(cGe);function lGe(t,e){let r=new MK(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),vc(()=>{t.removeObserver(r)})}s(lGe,"recomputeInitiallyAndOnChange");nGe(lGe);var MK=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Jh(t,e,r,n){let i=new FK(r,n);return LK({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new FK(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Jh,"mapObservableArrayCached");var FK=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new Du;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function KAe(t,e){let r;return VAe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(KAe,"runOnChange");d();d();d();var uGe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),OK;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof aD?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:H2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:uGe})})(OK||={});var aD=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?uGe:(this._emitter||(this._emitter=new gp),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},$v=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new aD),this._token}cancel(){this._token?this._token instanceof aD&&this._token.cancel():this._token=OK.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof aD&&this._token.dispose():this._token=OK.None}};d();var QK;function dGe(t){QK||(QK=new LF,kK(QK)),QK.addFilteredObj(t)}s(dGe,"logObservableToConsole");var LF=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return OQt([cD(qQt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[cD(" "),Xh(NF(e.oldValue,70),{color:"red",strikeThrough:!0}),cD(" "),Xh(NF(e.newValue,60),{color:"green"})]:[cD(" (unchanged)")]:[cD(" "),Xh(NF(e.newValue,60),{color:"green"}),cD(" (initial)")]}handleObservableCreated(e){if(e instanceof j2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof j2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([lD("observable value changed"),Xh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Xh(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([lD("derived recomputed"),Xh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([lD("derived cleared"),Xh(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([lD("observable from event triggered"),Xh(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([lD("autorun"),Xh(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([lD("transaction"),Xh(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function OQt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(OQt,"consoleTextToArgs");function cD(t){return Xh(t,{color:"black"})}s(cD,"normalText");function lD(t){return Xh(HQt(`${t}: `,10),{color:"black",bold:!0})}s(lD,"formatKind");function Xh(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Xh,"styled");function NF(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?QQt(t,e):UQt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(NF,"formatValue");function QQt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${NF(i,e-r.length)}`}return r+=" ]",r}s(QQt,"formatArray");function UQt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${NF(o,e-r.length)}`}return r+=" }",r}s(UQt,"formatObject");function qQt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(qQt,"repeat");function HQt(t,e){for(;t.length<e;)t+=" ";return t}s(HQt,"padStr");eGe(dGe);var WQt=!1;WQt&&kK(new LF);d();var G2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(G2||={});d();d();d();function fGe(t){return t}s(fGe,"identity");var UK=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=fGe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},jv=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=fGe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var Zh=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function V2(t){return t<0?0:t>4294967295?4294967295:t|0}s(V2,"toUint32");function JAe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(JAe,"escapeRegExpCharacters");function em(t){return t.split(/\r\n|\r|\n/)}s(em,"splitLines");function tT(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(tT,"commonPrefixLength");function Gv(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(Gv,"commonSuffixLength");var jQt=/^[\t\n\r\x20-\x7E]*$/;function XAe(t){return jQt.test(t)}s(XAe,"isBasicASCII");var FUn=String.fromCharCode(65279);var pGe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=GQt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function GQt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(GQt,"getGraphemeBreakRawData");var hGe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Zh(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new UK({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let h=0;h<f.length;h+=2)p.set(f[h],f[h+1]);return p}s(r,"arrayToMap");function n(f,p){let h=new Map(f);for(let[m,g]of p)h.set(m,g);return h}s(n,"mergeMaps");function i(f,p){if(!f)return p;let h=new Map;for(let[m,g]of f)p.has(m)&&h.set(m,g);return h}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Zh(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},mGe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Gt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new gn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new gn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new gn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new gn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var cn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var Ar=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new cn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new cn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,h=r.endColumn|0;return p-h}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var tn=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new HK(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new HK(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new gn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new gn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new Ar(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new Ar(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Gt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},HK=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=O3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=$g(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=Lge(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=Lge(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new tn(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=O3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=$g(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new tn(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new tn(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Gl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new Ar(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new Ar(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new Ar(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return tn.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new cn(e.lineNumber,e.column+this.columnCount):new cn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return Ar.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Vl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new ZAe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return em(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},ZAe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=$g(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new cn(n,i)}getRange(e){return Ar.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Gl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Gl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Kg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var WK=class extends Es{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=Yg(this,n),this.selection=Yg(this,i),this.languageId=Yg(this,o),this._register(vc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function Vv(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return NK({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(Vv,"autorunWithChanges");d();var nC=class extends Es{static{s(this,"RecentEditsProvider")}};function VQt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(VQt,"editIsTooCloseToCursor");var $K=s((t,e)=>{let[r,n]=e.useState();return e.useData(r0,async i=>{if(!i.document)return;let o=t.ctx.get(nC);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(vr),f=[];for(let h=c.length-1;h>=0&&!(f.length>=a.maxEdits);h--){let m=c[h];if(!await u.getTextDocument({uri:m.file}))continue;let g=!l.has(m.file);if(l.size+(g?1:0)>a.maxFiles)break;let y=m.file===i.document?.uri,E=y?i.position.line:void 0;if(VQt(m,y,E,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(m);if(_){l.add(m.file);let S=u.getRelativePath({uri:m.file});f.unshift(RF(`File: ${S}`)+RF(_))}}if(f.length===0){n(void 0);return}let p=RF("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+RF("End of recent edits");n(p)}),r?$r(XI,{children:$r(Ya,{children:r})}):void 0},"RecentEdits");d();d();d();d();d();d();var zQt={tokenizerName:"o200k_base"};function YQt(t){return{...zQt,...t}}s(YQt,"cursorContextOptions");function MF(t,e={}){let r=YQt(e),n=vo(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(MF,"getCursorContext");d();d();var KQt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function gGe(t){let e=KQt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(gGe,"announceSnippet");var eye=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var tye=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=eUt.get(e.languageId)??ZQt}tokenize(e){return new Set(JQt(e).filter(r=>!this.stopsForLanguage.has(r)))}},AGe=new eye(20),uD=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new tye(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=AGe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(A=>A.forEach(y=>g.add(y),g)),a.push(g)}let h=a[u],m=this.similarityScore(h,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<m&&(n[n.length-1].score=m,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:m,startLine:f,endLine:p})}return c&&AGe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function JQt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(JQt,"splitIntoWords");var XQt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),ZQt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...XQt]),eUt=new Map([]);d();function jK(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(jK,"getBasicWindowDelineations");var GK=class t extends uD{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return jK(this.windowLength,e)}_getCursorContextInfo(e){return MF(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return tUt(e,r)}};function tUt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(tUt,"computeScore");d();var VK=class t extends uD{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return jK(this.windowLength,e)}_getCursorContextInfo(e){return MF(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):MF(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return rUt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await Dv(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function rUt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(rUt,"computeScore");var nUt=0,iUt=60,oUt=4,sUt=1,aUt=20,cUt=1e4,yGe={snippetLength:iUt,threshold:nUt,maxTopSnippets:oUt,maxCharPerFile:cUt,maxNumberOfFiles:aUt,maxSnippetsPerFile:sUt,useSubsetMatching:!1};var rye={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function lUt(t,e){return(e.useSubsetMatching?VK.FACTORY(e.snippetLength):GK.FACTORY(e.snippetLength)).to(t)}s(lUt,"getMatcher");async function CGe(t,e,r){let n=lUt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(CGe,"getSimilarSnippets");function vGe(t,e){return{...rye,useSubsetMatching:nye(t,e)}}s(vGe,"getCppSimilarFilesOptions");function EGe(t){return rye.maxTopSnippets}s(EGe,"getCppNumberOfSnippets");var uUt=new Map([["cpp",vGe]]);function zK(t,e,r){let n=uUt.get(r);return n?n(t,e):{...yGe,useSubsetMatching:nye(t,e)}}s(zK,"getSimilarFilesOptions");var dUt=new Map([["cpp",EGe]]);function xGe(t,e){let r=dUt.get(e);return r?r(t):sUe}s(xGe,"getNumberOfSnippets");function nye(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Ao(t,Qt.UseSubsetMatching))??!1}s(nye,"useSubsetMatching");d();d();d();var YK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(r0,a=>{a.traits!==r&&n(a.traits);let c=DM(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return $r(Vg,{children:[$r(Ya,{children:`Consider this related information:
`}),...r.map(a=>$r(Ya,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function bGe(t,e){return Ao(t,Qt.UseSplitContextPrompt)??t.get(Ot).enablePromptContextProxyField(e)}s(bGe,"shouldUseSplitContextPrompt");function IGe(t){return $r(Vg,{children:[$r(kAe,{children:[$r(_K,{ctx:t,weight:.7}),$r(YK,{weight:.6}),$r(vK,{ctx:t,weight:.9}),$r(KK,{ctx:t,weight:.8})]}),$r(Uje,{weight:1}),$r(PAe,{children:$r($K,{ctx:t,weight:.99})}),$r(Qje,{weight:1})]})}s(IGe,"splitContextCompletionsPrompt");d();d();d();var iye=new Or;function TGe(t){return[...t].sort((e,r)=>{let n=iye.get(e.uri)??0;return(iye.get(r.uri)??0)-n})}s(TGe,"sortByAccessTimes");var wGe=s(t=>t.get(vr).onDidFocusTextDocument(e=>{e&&iye.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var JK=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>z2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&XK(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(TGe(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function _Ge(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(_Ge,"shortCircuit");d();function pUt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(pUt,"defaultHash");function oye(t,e={}){let{hash:r=pUt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(oye,"memoize");var SGe={entries:[],traits:[]},ZK={entries:new Map,traits:[]},sye=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},yl=new _t("relatedFiles"),hUt=1e3,eJ=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},Y2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{yl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){yl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){yl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){yl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(bo).readFileString(e)}catch(r){yl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Yc).evaluate(e,r)).isBlocked}catch(n){yl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},mUt=3,RGe=new sye(hUt);async function kGe(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){yl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(RGe.bumpRetryCount(e.uri)>=mUt?a=ZK:a=void 0);let c=performance.now()-o;if(yl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new eJ;return a}s(kGe,"getRelatedFiles");var aye=oye(kGe,{cache:RGe,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});aye=_Ge(aye,200,ZK);async function tJ(t,e,r,n,i,o=!1){let a=t.get(Y2),c=ZK;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await kGe(t,l,r,n,a):await aye(t,l,r,n,a)}catch(l){c=ZK,l instanceof eJ&&Bt(t,"getRelatedFilesList",r)}return yl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(tJ,"getRelatedFilesAndTraits");function XK(t,e){return DM(t)===DM(e)}s(XK,"considerNeighborFile");var z2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(vr);t.instance===void 0&&(t.instance=new JK(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(gUt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return yl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return yl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let h=await tJ(e,f,i,o,a,c);return h.entries.size===0?(yl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...h.traits),u):(h.entries.forEach((m,g)=>{let A=[];m.forEach((y,E)=>{let b=t.getRelativePath(E,p.uri);if(!b||u.docs.has(E))return;let _={relativePath:b,uri:E,source:y};A.unshift(_),u.docs.set(E,_)}),A.length>0&&u.neighborSource.set(g,A.map(y=>y.uri.toString()))}),u.traits.push(...h.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function gUt(t,e){return t.get(Ot).excludeRelatedFiles(e)||Ao(t,Qt.ExcludeRelatedFiles)}s(gUt,"isExcludeRelatedFilesActive");function PGe(t,e){return t.get(Ot).includeNeighboringFiles(e)||Ao(t,Qt.IncludeNeighboringFiles)}s(PGe,"isIncludeNeighborFilesActive");var rJ=10,nJ={type:"contextTooShort"},iJ={type:"copilotContentExclusion"},dD={type:"promptError"},iC={type:"promptCancelled"},DGe={type:"promptTimeout"};function rT(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(rT,"trimLastLine");function fD(t,e,r,n,i,o={}){let c=t.get(vr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=yUt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=bGe(t,n);return t.get(zv).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(fD,"extractPrompt");function AUt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:rC(n,e)}s(AUt,"addNeighboringCellsToPrompt");function yUt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&XK(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>AUt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(yUt,"applyEditsForNotebook");function pD(t,e,r){let i=t.get(Ot).maxPromptCompletionTokens(e)-hK(t),o=xGe(e,r),a=zK(t,e,r),c=t.get(Ot).suffixPercent(e),l=t.get(Ot).suffixMatchThreshold(e),u=t.get(Ot).workspaceContextPercent(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`workspaceContextPercent must be between 0 and 100, but was ${u}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l,workspaceContextPercent:u}}s(pD,"getPromptOptions");var KK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(r0,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=z2.defaultEmptyResult();l.turnOffSimilarFiles||(u=await z2.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let h=pD(t.ctx,l,u.detectedLanguageId);return(await c(h,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,A)=>g.score-A.score).map(g=>({...gGe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,h){let m=l.similarFilesOptions||zK(t.ctx,u,f.detectedLanguageId),A=t.ctx.get(vr).getRelativePath(f),y={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:A,languageId:f.detectedLanguageId};return await CGe(y,Array.from(h.docs.values()),m)}return s(c,"findSimilarSnippets"),$r(Vg,{children:[...i.map((l,u)=>$r(CUt,{snippet:l}))]})},"SimilarFiles"),CUt=s((t,e)=>$r(XI,{children:[$r(Ya,{children:t.snippet.headline}),$r(Ya,{children:t.snippet.snippet})]}),"SimilarFile");d();var BGe=0;function vUt(){BGe=0}s(vUt,"resetContextIndex");function EUt(){return BGe++}s(EUt,"getNextContextIndex");var oJ=class extends rD{constructor(){super(...arguments);this.formatPrefix=Hje;this.formatContext=Wje}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(vUt(),new tD(r,xUt).walkSnapshot((f,p,h)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===U2.name&&(c=!0),f.value===void 0||f.value===""))return!0;let m=h.chunks,g=h.type;if(g==="suffix")o.push({value:kF(f.value),type:"suffix",weight:h.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:m,source:h.source});else{let A=g==="prefix",y=A||f.value.endsWith(n)?f.value:f.value+n;i.push({type:A?"prefix":"context",value:kF(y),weight:h.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:m,source:h.source,index:A?void 0:h.index})}return!0}),!c)throw new Error(`Node of type ${U2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},xUt=[...MAe,(t,e,r)=>EK(t)?{...r,index:EUt()}:r];d();d();async function bUt(t){if(t.isCancellationRequested)return;let e=new Yh,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(bUt,"cancellationTokenToPromise");async function NGe(t,e){if(e){let r=bUt(e);await Promise.race([t,r])}else await t}s(NGe,"raceCancellation");function cye(t){return Array.isArray(t)}s(cye,"isArrayOfT");async function LGe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await IUt(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(LGe,"resolveAll");async function IUt(t,e){let r;return t instanceof Promise?r=await TUt(t,e):r=await wUt(t,e),r}s(IUt,"resolve");async function TUt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:cye(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await NGe(i,e),n.resolutionTime=performance.now()-r,n}s(TUt,"resolvePromise");async function wUt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await NGe(i,e),n.resolutionTime=performance.now()-r,n}s(wUt,"resolveIterable");d();var _Ut={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},SUt="ms-vscode.cpptools",RUt="CppCompletionContextProvider";function MGe(t,e,r,n){(e.includes(RUt)||e.length===1&&e[0]==="*")&&OGe(t,r,n)}s(MGe,"fillInCppVSActiveExperiments");function FGe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(SUt))&&OGe(t,r,n)}s(FGe,"fillInCppVSCodeActiveExperiments");function OGe(t,e,r){try{let n=_Ut,i=t.get(Ot).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){An.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){An.exception(t,n,"fillInCppActiveExperiments")}}s(OGe,"addActiveExperiments");d();function sJ(t,e,r){try{let n=t.get(Ot).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return An.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(sJ,"fillInCSharpActiveExperiments");d();var nT="fallbackContextProvider",aJ={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function QGe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(nT))&&kUt(t,r,n)}s(QGe,"fillInMultiLanguageActiveExperiments");function kUt(t,e,r){try{let n=PUt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){An.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(kUt,"addActiveExperiments");function PUt(t,e){let r=aJ,n=t.get(Ot).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){An.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(PUt,"getMultiLanguageContextProviderParamsFromExp");function UGe(t){let e={...aJ};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(UGe,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var DUt="typescript-ai-context-provider";function qGe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(DUt)))return!1;try{let i=t.get(Ot).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return An.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(qGe,"fillInTsActiveExperiments");var HGe=Me(pi());var bc=class{static{s(this,"ContextProviderRegistry")}},oC=class{static{s(this,"DefaultContextProviders")}},hD=class extends oC{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},lye=class extends bc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return An.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;sJ(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(S=>S[1]>0);if(f.filter(S=>S[1]<=0).forEach(([S,P])=>{let B={providerId:S.id,matchScore:P,resolution:"none",resolutionTimeMs:0,data:[]};u.push(B)}),p.length===0)return u;if(a?.isCancellationRequested)return An.debug(this.ctx,"Resolving context providers cancelled"),[];FGe(this.ctx,p.map(S=>S[0].id),l,o),QGe(this.ctx,p.map(S=>S[0].id),l,o),qGe(this.ctx,p.map(S=>S[0].id),l,o);let m=new HGe.CancellationTokenSource;if(a){let S=a.onCancellationRequested(P=>{m.cancel(),S.dispose()})}let g=G9(this.ctx)&&!nW(this.ctx)?0:BUt(this.ctx,o),A=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,y;g>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},g));let E=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:A,data:c};for(let[S]of p){let P=this.ctx.get($l).getPreviousStatisticsForCompletion(r)?.get(S.id);P&&(b.previousUsageStatistics=P);let B=S.resolver.resolve(b,m.token);E.set(S.id,B)}let _=await LGe(E,m.token);y&&clearTimeout(y);for(let[S,P]of p){let B=_.get(S.id);if(B){if(B.status==="error")ez(B.reason)||An.error(this.ctx,`Error resolving context from ${S.id}: `,B.reason),u.push({providerId:S.id,matchScore:P,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let F=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(An.info(this.ctx,`Context provider ${S.id} exceeded time budget of ${g}ms`),S.resolver.resolveOnTimeout))try{let U=S.resolver.resolveOnTimeout(b);cye(U)?F.push(...U):U&&F.push(U),F.length>0&&(B.status="partial")}catch(U){An.error(this.ctx,`Error in fallback logic for context provider ${S.id}: `,U)}let[Y,ee]=Lje(F);ee&&An.error(this.ctx,`Dropped ${ee} context items from ${S.id} due to invalid schema`);let V=Mje(this.ctx,Y),H={providerId:S.id,matchScore:P,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:V};u.push(H)}this.ctx.get($l).getStatisticsForCompletion(r).setLastResolution(S.id,B.status)}else An.error(this.ctx,`Context provider ${S.id} not found in results`)}return u.sort((S,P)=>P.matchScore-S.matchScore)}async matchProviders(r,n){let i=lJ(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},uye=class extends bc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Or(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function cJ(t,e){return new uye(new lye(t,e))}s(cJ,"getContextProviderRegistry");function WGe(t,e,r){let n=t.get($l).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),h=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(h="none");let m={providerId:a,resolution:c,resolutionTimeMs:l,usage:h,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="full"||y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0,A=p?.usageDetails!==void 0?p?.usageDetails.filter(y=>y.usage==="partial"||y.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(m.numUsedItems=g),A!==void 0&&(m.numPartiallyUsedItems=A),m})}s(WGe,"telemetrizeContextItems");function $Ge(t){return t.matchScore>0&&t.resolution!=="error"}s($Ge,"matchContextItems");function lJ(t,e){let r=dye(t,e),n=Ao(t,Qt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(oC).getIds();return Array.from(new Set([...i,...r,...n]))}s(lJ,"getActiveContextProviders");function dye(t,e){return G9(t)?["*"]:t.get(Ot).contextProviders(e)}s(dye,"getExpContextProviders");function fye(t,e){return lJ(t,e).length>0}s(fye,"useContextProviderAPI");function BUt(t,e){let r=Ao(t,Qt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Ot).contextProviderTimeBudget(e)}s(BUt,"getContextProviderTimeBudget");d();function jGe(t,e,r){let n=CK(r,"Trait");for(let o of n)NUt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(jGe,"getTraitsFromContextItems");function NUt(t,e,r,n){let i=t.get($l).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(NUt,"setupExpectationsForTraits");var LUt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function GGe(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=LUt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Bt(e,t,c)}}s(GGe,"ReportTraitsTelemetry");d();d();d();var uJ=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},dJ=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var fJ=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(MUt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new hye(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((h,m)=>this.virtualizeElement(h,a,m)).flat().filter(h=>h!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new pye([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},pye=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},hye=class{constructor(e){this.lifecycleData=e;this.stateHook=new uJ(e.state),this.dataHook=new dJ(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function MUt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(MUt,"isFragmentFunction");var FF=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new fJ(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function r0(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(r0,"isCompletionRequestData");var mye={default:{promptFunction:VGe,renderer:rD},splitContext:{promptFunction:IGe,renderer:oJ}};function VGe(t){return $r(Vg,{children:[$r(RAe,{children:[$r(_K,{ctx:t,weight:.7}),$r(YK,{weight:.6}),$r(vK,{ctx:t,weight:.9}),$r(KK,{ctx:t,weight:.8}),$r($K,{ctx:t,weight:.99})]}),$r(_F,{weight:1})]})}s(VGe,"defaultCompletionsPrompt");var pJ=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new FF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=pD(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let f=i?.separateContext?"splitContext":"default";this.setPromptOrdering(f);let p=performance.now(),{traits:h,codeSnippets:m,turnOffSimilarFiles:g,resolvedContextItems:A}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,h,m,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return iC;let y=this.virtualPrompt.snapshot(o),E=y.status;if(E==="cancelled")return iC;if(E==="error")return this.errorPrompt(y.error);let b=this.renderer.render(y.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return iC;if(b.status==="error")return this.errorPrompt(b.error);let[_,S]=rT(b.prefix),P={...b,prefix:_},B;if(fye(this.ctx,n)){let Y=Rje(b.metadata.componentStatistics);this.ctx.get($l).getStatisticsForCompletion(e).computeMatch(Y),B=WGe(this.ctx,e,A),An.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(B)}'`)}let F=performance.now();return this.resetIfEmpty(b),this.successPrompt(P,F,p,S,B)}async updateComponentData(e,r,n,i,o,a,c,l,u={},f,p){let h=this.createRequestData(e,r,o,l,u,c,n,i,a,f,p);await this.pipe.pump(h)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(fye(this.ctx,n)){a=await this.ctx.get(tm).resolution(e);let{textDocument:f}=r,p=a.filter($Ge);OUt(this.ctx,f.detectedLanguageId,p,n)||(u=!0),c=jGe(this.ctx,e,p),GGe("contextProvider.traits",this.ctx,c,f.detectedLanguageId,f.detectedLanguageId,n),l=await Fje(this.ctx,e,p,f.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return iC;if((await this.ctx.get(Yc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return iJ;if((n>0?e.getText().length:e.offsetAt(r))<rJ)return nJ}createRequestData(e,r,n,i,o,a,c,l,u,f,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:f,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return Na(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),dD}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new FF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(mye[this.promptOrdering]?.promptFunction??VGe)(this.ctx)}getRenderer(){let e=mye[this.promptOrdering]??mye.default;return new e.renderer}};function OUt(t,e,r,n){let i=["cpp","c"];return PGe(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(OUt,"similarFilesEnabled");d();d();d();var QUt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function UUt(t){return QUt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(UUt,"isOomError");function iT(t,e,r,n=An){if(!td(e)){if(e instanceof Error){let i=e;UUt(i)?t.get(yo).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(yo).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(yo).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(yo).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(yo).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(iT,"handleException");function zGe(t){process.addListener("uncaughtException",r=>{iT(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,iT(t,r,"unhandledRejection")}finally{e=!1}})}s(zGe,"registerDefaultHandlers");d();d();d();var K2="[...]",qUt=0,sC=-1;function aC(){return qUt++}s(aC,"getAvailableNodeId");function YGe(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(YGe,"elideChildren");function KGe(t,e=K2){return r=>t.tokenLength(YGe(r,e))}s(KGe,"getTokenizerCostFunction");function JGe(t=K2){return e=>YGe(e,t).length-(e.elisionMarker??t).length}s(JGe,"getBasicCostFunction");d();var mD=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){let r=this.heap[e],n=this.heap.length-1;for(;e<n;){let i=e,o=2*e+1,a=o+1;if(o<=n&&this.heap[o].priority>this.heap[i].priority&&(i=o),a<=n&&this.heap[a].priority>this.heap[i].priority&&(i=a),i===e)break;this.heap[e]=this.heap[i],e=i}this.heap[e]=r}};var OF=class{constructor(e,r,n,i,o=0,a=!1,c=K2){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.cost=Math.max(i,1),this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/this.cost}render(e=void 0,r=[],n){let i=new Set(Array.isArray(r)?r:[r]);if((e??this.cost)<this.cost||i.has(this.id))return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length};if(e===void 0){let f=s(m=>i.has(m.id),"elider"),p=[];this.recursivelyRender(p,f);let h=p.join("");return{rendered:h,cost:n?n(h):h.length}}let o=new Set,a=[],c=[],l=new mD([{item:this,priority:this.value}]),u=e;for(;u>0&&l.size>0;){let{item:f}=l.pop();if(!i.has(f.id)&&f.cost<=u){u-=f.cost,o.add(f.id),a.push(f);for(let p of f.children)l.insert(p,p.value);f.requireRenderedChild&&c.push(f)}}for(let f=c.length-1;f>=0;f--){let p=c[f];p.children.some(h=>o.has(h.id))||o.delete(p.id)}for(;o.size>0;){let f=[],p=s(g=>!o.has(g.id),"elider");this.recursivelyRender(f,p);let h=f.join("");if(n===void 0)return{rendered:h,cost:h.length};let m=n(h);if(m<=e)return{rendered:h,cost:m};for(;a.length>0&&m>e;){let g=a.pop();m-=g.cost,o.delete(g.id)}if(a.length===0)return{rendered:this.elisionMarker,cost:n(this.elisionMarker)}}return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length}}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRender(e,r,n=!1){if(r(this))return e.length>=2&&(n||e[e.length-2]===this.elisionMarker&&e[e.length-1].trim().length===0)?(e.pop(),!0):(e.push(this.elisionMarker),!0);let i=!1;for(let[o,a]of this.children.entries())e.push(this.text[o]??""),i=a.recursivelyRender(e,r,a.canMerge&&i);return e.push(this.text[this.text.length-1]??""),!1}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new mD([]);let i=new mD(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.requireRenderedChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.requireRenderedChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}findNode(e){if(this.id===e)return this;for(let r of this.children){let n=r.findNode(e);if(n!==void 0)return n}}};function gye(t,e,r=K2,n){if(n?.has(t.id))return n.get(t.id);let i=t.children.map(c=>gye(c,e,r));r=t.elisionMarker??r;let o=e(t),a=new OF(t.id,t.text,i,o,0,t.canMerge,r);return n?.set(a.id,a),a}s(gye,"snapshot");d();d();d();function QF(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(QF,"setDefault");function HUt(t){return t.id!==void 0}s(HUt,"isNodeItem");function WUt(t){return!("uri"in t)&&!("id"in t)}s(WUt,"isNullItem");var $Ut={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},oT="64f5ff7d-e507-4558-81cf-3bdacc3c5c00",gD=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==sC),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},hJ=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=$Ut;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new gD([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new gD(r.items):new gD([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=.5**(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(sC);if(c!==void 0&&c>0){o.delete(sC);let l=0;for(let u of o.values())l+=u;if(l<=0){let u=a.getAllIds(),f=c/u.length;for(let p of u)o.set(p,f)}else for(let[u,f]of[...o.entries()])o.set(u,f+c*(f/l))}}this.prevItems=this.truncateAndNormalize(e),this.weights=new gD(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{if(WUt(r))return{weight:r.weight,uri:oT,id:sC};let n=HUt(r)?r.id:sC,i=r.uri??this.activeContext.getUri(n)??oT;return i===oT&&(n=sC),{weight:r.weight,uri:i,id:n}})}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0)continue;let l=QF(r,o,()=>new Map),u=sC;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map,i=0;for(let[l,u]of e.entries()){let f=l!==oT?this.activeContext.normalizeUri(l)??oT:oT;for(let[p,h]of u.entries())l===oT||p===sC?n.set(f,(n.get(f)??0)+h):r.push({uri:f,id:p,weight:h}),i+=h}if(i<=0)return[];n.delete(oT),r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let o=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:sC,weight:u}));return r.slice(0,this.config.MaxActiveNodes).concat(o).sort((l,u)=>u.weight-l.weight).map(l=>({...l,weight:l.weight/i}))}};d();d();var Ap=class{static{s(this,"FileSearch")}};d();d();var mJ=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*ZGe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},jUt=6,gJ=class{constructor(e,r,n,i){this.textDocument=e;this.parser=r;this.minSize=n;this.updateId=aC();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(i??2*this.minSize,this.minSize+1),this._syntaxRoot=this.parser.parse(e,!0),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.textDocument.uri}get version(){return this.updateId}get document(){return this.textDocument}get rootId(){return this._root.id}get root(){return this._root}get syntaxRoot(){return this._syntaxRoot}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this._root,i=n;for(;i;)n=i,i=n.findChild(e,r??e);return n}update(e){if(this.uri!==e.uri)throw new Error("Can't update ContextDocument using mismatched URI");this.textDocument=e,this._syntaxRoot=this.parser.parse(e,!0),this.recursivelyRemapNodes(this.root,()=>{}),this._root=this.buildTree(),this.updateId=aC()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:f}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:f})}let o=i[0].root.parent,a=e.parts[0].root.parent;if((o&&this.canMergeChildren(o))!==(a&&this.canMergeChildren(a)))return this.invalidateNode(e),!1;let c=XGe(i,this.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e),!1;let l=new mJ(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=XGe(e,this.document),i=new mJ(aC(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}buildTree(){let e=this.buildRecursively(this._syntaxRoot);return this.createNode([{root:this._syntaxRoot,children:e}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(this.canMergeChildren(e)){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);this.canBeNode(o)&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((h,m)=>h.root.startOffset-m.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let h of e){let m=h.root.endOffset-h.root.startOffset;for(let g of h.children){let A=g.endOffset-g.startOffset;m-=A,r-=A}n.push(m)}if(r<this.minSize)return e.flatMap(h=>h.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let h=0;h<e.length;h++){let m=e[h];if(o+=n[h]+m.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:m.root.range.start.line-u,size:m.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=h)}l=m.root.endOffset,u=m.root.range.end.line,o>=this.maxSize&&(a=a??h,i.push(a+1),h=a,o=0,a=null,c={line:-1,size:-1},l=e[h+1]?.root.startOffset,u=e[h+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let f=[],p=!1;for(let h=0;h<i.length-1;h++){let m=e.slice(i[h],i[h+1]);f.push(this.createNode(m,p)),p=!0}return f}canMergeChildren(e){return this.parser.labeler.canMergeChildren?.(e)??e.children.length>jUt}canBeNode(e){return this.parser.labeler.canBeNode?.(e)??!0}};function XGe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(XGe,"buildText");function*ZGe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*ZGe(r,e))}s(ZGe,"walk");d();d();d();var AJ=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.source="indentation";this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let h={line:o,character:0};this.startOffset=a.offsetAt(h),this.endOffset=this.startOffset,this.range={start:h,end:h};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)}}static{s(this,"IndentationNode")}get type(){return this.raw.type}};function Aye(t,e,r){let n=t.subs.map(l=>({subtree:l,node:Aye(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=Aye(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new AJ(aC(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(Aye,"recursivelyBuildNode");function eVe(t){let e=g2(t.getText(),t.detectedLanguageId);return Aye(e,t.lineCount,t)??new AJ(aC(),e,[],0,t.lineCount-1,t)}s(eVe,"parse");var tVe={source:"indentation",parse:eVe,update(t,e){return{root:eVe(e),remapper:s(()=>{},"remapper")}},dispose:s(()=>{},"dispose"),labeler:{isIdentifier:s(t=>!1,"isIdentifier"),isText:s(t=>!0,"isText")}};d();d();var nVe=Me(YV());function rVe(t){return{line:t.row,character:t.column}}s(rVe,"asPosition");var yye=class{constructor(e,r){this._parser=e;this._tree=r;this.didDispose=!1}static{s(this,"CachedTreeSitterParse")}get parser(){if(this.didDispose)throw new Error("Cannot access parser after dispose");return this._parser}get tree(){if(this.didDispose)throw new Error("Cannot access tree after dispose");return this._tree}dispose(){this.didDispose||(this.didDispose=!0,this._parser.delete(),this._tree.delete())}},cC=class{constructor(e,r,n,i){this.nodeList=e;this.mergeList=r;this.identifierList=n;this.textList=i}static{s(this,"BasicNodeLabeler")}canBeNode(e){return this.nodeList.has(e.type)}canMergeChildren(e){return this.mergeList.has(e.type)}isIdentifier(e){return this.identifierList.has(e.type)}isText(e){return this.textList.has(e.type)}},GUt=50,sT=class{constructor(e,r,n={}){this.language=e;this.source=r;this.labeler=n;this.cache=new f4(GUt)}static{s(this,"TreeSitterParser")}dispose(){this.cache.clear()}parse(e,r=!0){let n=new nVe.default;n.setLanguage(this.language);let i=n.parse(e.getText());return r&&this.cache.set(e.uri,new yye(n,i)),this.snapshot(i.rootNode,null)}update(e,r){return{root:this.parse(r,!1),remapper:s(()=>{},"remapper")}}snapshot(e,r){let n={id:e.id,source:this.source,type:e.type,startOffset:e.startIndex,endOffset:e.endIndex,range:{start:rVe(e.startPosition),end:rVe(e.endPosition)},parent:r,children:[]};return n.children=e.namedChildren.map(i=>this.snapshot(i,n)),n}};var VUt=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),zUt=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),YUt=new Set(["identifier"]),KUt=new Set(["string","comment"]),iVe=new cC(VUt,zUt,YUt,KUt);d();var JUt=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),XUt=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),ZUt=new Set(["identifier"]),eqt=new Set(["string_literal","line_comment","block_comment"]),oVe=new cC(JUt,XUt,ZUt,eqt);d();var tqt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),rqt=new Set(["module","block","parameters","dictionary","list"]),nqt=new Set(["identifier"]),iqt=new Set(["string","comment"]),sVe=new cC(tqt,rqt,nqt,iqt);d();var oqt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),sqt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),aqt=new Set(["identifier"]),cqt=new Set(["string","comment"]),aVe=new cC(oqt,sqt,aqt,cqt);var cVe=Me(YV());async function lVe(t){await cVe.default.init();try{let e=await Zhe(t);switch(t){case"python":return new sT(e,"tree-sitter-python",sVe);case"typescript":return new sT(e,"tree-sitter-typescript",aVe);case"java":return new sT(e,"tree-sitter-java",oVe);case"cpp":return new sT(e,"tree-sitter-cpp",iVe);default:return new sT(e,"tree-sitter-generic")}}catch{return tVe}}s(lVe,"getParser");var lqt=new _t("WorkspaceContextManager"),Cye=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},yJ=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},uVe=5e3,CJ=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Or(uVe);this.allowedExtensions=new Set(u2);this.invalidDocumentCache=new L_(uVe,this.config.InvalidCacheTime),this.cachedDocuments=new f4(this.config.MaxActiveFiles)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(vr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}setAllowedLanguages(e){this.allowedExtensions=new Set(e.flatMap(r=>Bv[r]?.extensions??[]))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){let r,n=this.uriCache.get(e);if(n!==null){if(n!==void 0)r=n;else try{if(D$(e),r=fl(e),!(this.ctx.get(vr).getWorkspaceFolder({uri:r})!==void 0)){this.uriCache.set(e,null);return}this.uriCache.set(e,r)}catch{this.uriCache.set(e,null);return}if(!(!this.allowedExtensions.has(zNe(r))||this.invalidDocumentCache.has(r)))return r}}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.parsers.values())e.dispose();this.parsers.clear(),this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new Cye(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new yJ(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Yh;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&this.isStarted()&&(this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new yJ(n,i=>this.disposeDocument(i))))),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let a=new Set(r.getAllIds());r.update(n);let c=new Set(r.getAllIds()),l=[...c].filter(f=>!a.has(f)),u=[...a].filter(f=>!c.has(f));return this.recordDocumentChanges(e,{created:l,invalidated:u}),r}let o=new gJ(n,i,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:o.getAllIds(),invalidated:[]}),o}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()})}recordDocumentChanges(e,r){let n=QF(this.createdNodes,e,()=>new Set),i=QF(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await lVe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e)||this.normalizeUri(e)===void 0)return;let r=this.ctx.get(vr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(Ap).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){lqt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,60*60*1e3);return}let o=await this.ctx.get(Cn).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};d();var vJ=class{constructor(e){this.ctx=e;this.documents=new Map;this.elisionMarker=K2;this.nodeCache=new Or(1e4);this.costFunction=JGe(this.elisionMarker),this.root=this.createRootNode()}static{s(this,"WorkspacePromptComponent")}getRoot(){return this.root}setCostFunction(e){this.costFunction=e}snapshot(e,r){this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=gye(o,this.costFunction,this.elisionMarker,this.nodeCache);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new OF(aC(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:aC(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(vr).getRelativePath({uri:e});return rC(`Related portions of ${i??e}:
`,r)}};var dVe=Me(require("events"));var uqt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10,MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},rm=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Yh;this.config=uqt;this.emitter=new dVe.default;this.flushUpdatesPromise=void 0;this.emitter.setMaxListeners(27),this.contextManager=new CJ(e,this.config),this.coordinator=new hJ(this.contextManager,this.config),this.promptComponent=new vJ(e),this.tokenEventDisposable=ha(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Ao(this.ctx,Qt.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Ot).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return Ao(this.ctx,Qt.UseWorkspaceContextCoordinator)??this.ctx.get(Ot).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.promptComponent.setCostFunction(KGe(vo())),this.deferredStart.resolve(),this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}getPromptComponent(){return this.promptComponent.getRoot()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),Sn.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),Sn.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}setContextLanguages(e){this.contextManager.setAllowedLanguages(e)}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights();this.promptComponent.snapshot(e,this.contextManager);let r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),this.flushUpdatesPromise=this.contextManager.flushUpdates(),await this.flushUpdatesPromise,this.isActive()){this.promptComponent.snapshot(e,this.contextManager);let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await tC(n)}}}catch(e){iT(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};var EJ=class{constructor(e){this.ctx=e;this.renderId=0;this.cachedSuffix=""}static{s(this,"WorkspaceContextPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionState:e,telemetryData:r,promptOpts:n},i){this.renderId++;let{maxPromptLength:o,suffixPercent:a,suffixMatchThreshold:c,workspaceContextPercent:l}=pD(this.ctx,r,e.textDocument.detectedLanguageId),u=await this.failFastPrompt(e.textDocument,e.position,a,i);if(u)return u;let f=performance.now(),{beforeCursor:p,afterCursor:h}=this.getBeforeAfterCursor(e),m=this.getPathMarker(e),g=this.checkSuffixCache(h,c,n),A=this.producePrompt(o,a,l,m,p,g,e.textDocument.detectedLanguageId,n);if(A.status==="cancelled")return iC;if(A.status==="error")return this.errorPrompt(A.error);let[y,E]=rT(A.prefix),b={...A,prefix:y},_=performance.now();return this.successPrompt(b,_,f,E)}producePrompt(e,r,n,i,o,a,c,l){let u=performance.now(),f=vo(l?.tokenizer);a.length==0&&(r=0);let p=f.tokenLength(i),h=Math.floor(e*r/100),m=Math.floor(e*n/100),g=e-h-m-p;if(g<=0)throw new Error(`Prefix tokens must be positive, was ${g}`);let A=performance.now(),E=this.ctx.get(rm).getPromptComponent(),{rendered:b,cost:_}=E.render(m,void 0,H=>f.tokenLength(H)),S=performance.now()-A,P=f.takeFirstTokens(a,h),B=Math.max(h-P.tokens.length,0),F=f.takeLastLinesTokens(o,g+B),Y=l?.separateContext?F:rC(b.trim(),c)+`

`+F,ee=f.tokenLength(F),V=P.tokens.length;return{status:"ok",prefix:i+`
`+Y,prefixTokens:p+_+ee,suffix:P.text,suffixTokens:V,context:l?.separateContext?[b.trim()]:void 0,metadata:{renderId:this.renderId,rendererName:"w",tokenizer:l?.tokenizer??"o200k_base",elisionTimeMs:S,renderTimeMs:performance.now()-u,updateDataTimeMs:0,componentStatistics:[{componentPath:"workspace",actualTokens:_},{componentPath:"prefix",actualTokens:p+ee},{componentPath:"suffix",actualTokens:V}]}}}getBeforeAfterCursor(e){let r=e.textDocument.getText({start:{line:0,character:0},end:e.position}),n=e.textDocument.getText({start:e.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});return{beforeCursor:r,afterCursor:n}}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(vr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?rC(wK(o),o.languageId):rC(TK(o),o.languageId)}checkSuffixCache(e,r,n){let i=e.replace(/^.*/,"").trimStart();if(i==="")return"";if(this.cachedSuffix===i)return this.cachedSuffix;let o=i;if(this.cachedSuffix!==""){let a=vo(n?.tokenizer),c=a.takeFirstTokens(i,wF);c.tokens.length>0&&100*xK(c.tokens,a.takeFirstTokens(this.cachedSuffix,wF).tokens)?.score<(r??m3)*c.tokens.length&&(o=this.cachedSuffix)}return o!==this.cachedSuffix&&(this.cachedSuffix=o),o}successPrompt(e,r,n,i){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return iC;if((await this.ctx.get(Yc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return iJ;if((n>0?e.getText().length:e.offsetAt(r))<rJ)return nJ}errorPrompt(e){return Na(this.ctx,e,"WorkspaceContextPromptFactory"),dD}};var fVe=Me(pi());var zv=class{static{s(this,"CompletionsPromptFactory")}};function xJ(t,e,r){return new vye(new Eye(new xye(t,new pJ(t,e,r),new EJ(t),bye)))}s(xJ,"createCompletionsPromptFactory");var vye=class extends zv{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return iC;try{return await this.delegate.prompt(r,n)}catch{return dD}}},dqt=1200,Eye=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new fVe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(DGe)},dqt)})])}},xye=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function bye(t,e){let r=t.get(rm);return r.isEnabled(e)&&r.isActive()}s(bye,"workspaceContextEnabledAndActive");var tm=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Or(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){if(bye(this.ctx,i))return;let c=this.ctx.get(bc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:h}=e,m=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:h.length>0?h:void 0},i,o,a?.data);this.scheduledResolutions.set(r,m)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var bJ=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await Dv(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},IJ=class extends bJ{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=hVe(r,n),this.isBlockStart(fqt(r,n))&&this.isBlockBodyEmpty(r,n)}};function fqt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(fqt,"getLineAtOffset");function hVe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(hVe,"rewindToNearestNonWs");function pVe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(pVe,"indent");function pqt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=pVe(t,r),i=pVe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(pqt,"outdented");var lC=class extends bJ{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&uUe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=hVe(r,n);let i=await Dv(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&pqt(f,p,r)?!0:!f.children.find(m=>m.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(m=>this.startKeywords.includes(m.type)),h=f.find(m=>m.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(h=f.find(A=>A.hasError())?.children.find(A=>A.type=="block"));let m,g=0;for(let A of a.children){if(A.type==":"&&g==0){m=A;break}A.type=="("&&(g+=1),A.type==")"&&(g-=1)}if(m&&p.endIndex<=m.startIndex&&m.nextSibling){if(p.type=="def"){let A=m.nextSibling;if(A.type=='"'||A.type=="'"||A.type=="ERROR"&&(A.text=='"""'||A.text=="'''"))return!0}return!1}break}case"javascript":{let m=f.find(y=>y.type=="formal_parameters");if(p.type=="class"&&m)return!0;let g=f.find(y=>y.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let m=f.find(A=>A.type=="{");if(m&&m.startIndex>p.endIndex&&m.nextSibling!=null||f.find(A=>A.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return h&&h.startIndex>p.endIndex?this.isBlockEmpty(h,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(h=>h.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let h=this.nodeTypesWithBlockOrStmtChild.get(l.type),m=h==""?l.children[0]:l.childForFieldName(h);if(m&&m.type!=this.blockNodeType&&m.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},hqt={python:new lC("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new lC("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new lC("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new lC("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new IJ("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new IJ("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new lC("csharp",{},new Map([]),[],"block",null,!0),java:new lC("java",{},new Map([]),[],"block",null,!0),php:new lC("php",{},new Map([]),[],"block",null,!0),cpp:new lC("cpp",{},new Map([]),[],"block",null,!0)};function Iye(t){if(!cp(t))throw new Error(`Language ${t} is not supported`);return hqt[JV(t)]}s(Iye,"getBlockParser");async function mVe(t,e,r){return cp(t)?Iye(t).isEmptyBlockStart(e,r):!1}s(mVe,"isEmptyBlockStart");async function gVe(t,e,r,n){if(cp(t))return Iye(t).isBlockBodyFinished(e,r,n)}s(gVe,"isBlockBodyFinished");async function AVe(t,e,r){if(cp(t))return Iye(t).getNodeStart(e,r)}s(AVe,"getNodeStart");var uKn=new _t("parseBlock");function UF(t,e,r){let n=e.getText(us.range(us.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>gVe(o,n,a,i)}s(UF,"parsingBlockFinished");function wJ(t,e){return mVe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(wJ,"isEmptyBlockStartUtil");async function yVe(t,e,r,n){let o=e.getText(us.range(us.position(0,0),r))+n,a=await AVe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(yVe,"getNodeStartUtil");var mqt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),gqt=new RegExp(`^(${mqt.join("|")})`);function Aqt(t){return gqt.test(t.trimLeft().toLowerCase())}s(Aqt,"isContinuationLine");function TJ(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(TJ,"indentationOfLine");function _J(t,e){let r=t.getText(),n=t.offsetAt(e);return Tye(r,n,t.detectedLanguageId)}s(_J,"contextIndentation");function Tye(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,h){let m=p,g,A;for(;g===void 0&&m>=0&&m<f.length;)g=TJ(f[m]),A=m,m+=h;if(r==="python"&&h===-1){m++;let y=f[m].trim();if(y.endsWith('"""')){if(!(y.startsWith('"""')&&y!=='"""'))for(m--;m>=0&&!f[m].trim().startsWith('"""');)m--;if(m>=0)for(g=void 0,m--;g===void 0&&m>=0;)g=TJ(f[m]),A=m,m--}}return[g,A]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=TJ(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(Tye,"contextIndentationFromText");var yqt=!1;function Cqt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&yqt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=TJ(u);if(f!==void 0&&(f<c||f===c&&!Aqt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(Cqt,"completionCutOrContinue");function CVe(t,e){return async r=>{let n=Cqt(r,t,e);return n==="continue"?void 0:n}}s(CVe,"indentationBlockFinished");d();d();var vVe=2.98410452738298,EVe=-.838732736843507,xVe=1.50314646255716,bVe=-.237798634012662,SJ={python:.314368072478742},IVe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var vqt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function Eqt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(Eqt,"linearInterpolation");var AD=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},wye=class{constructor(e,r,n){this.link=vqt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return Eqt(n,this.logitsToQuantiles)}},TVe=new wye(vVe,[new AD("compCharLen",EVe,t=>Math.log(1+t)),new AD("meanLogProb",xVe),new AD("meanAlternativeLogProb",bVe)].concat(Object.entries(SJ).map(t=>new AD(t[0],t[1]))),IVe);function wVe(t,e){let r={...e.measurements};return Object.keys(SJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),TVe.predict(t,r)}s(wVe,"ghostTextScoreConfidence");function _Ve(t,e){let r={...e.measurements};return Object.keys(SJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),TVe.quantile(t,r)}s(_Ve,"ghostTextScoreQuantile");d();d();var xqt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function RJ(t){let e=t.slice();return e.reverse(),SVe(e)||SVe(e.filter(r=>r.trim().length>0))}s(RJ,"isRepetitive");function SVe(t){let e=bqt(t);for(let r of xqt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(SVe,"isRepeatedPattern");function bqt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(bqt,"kmp_prefix_function");function Iqt(t,e,r,n){let i="}";try{i=lUe(e.detectedLanguageId)??"}"}catch{}return Tqt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(Iqt,"maybeSnipCompletion");function Tqt(t,e,r,n){let i=wqt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let A=e.line+1+f+l;if(p=A>=t.getLineCount()?void 0:t.getLineText(A),p!==void 0&&p.trim()==="")l++;else break}let h,m;for(;h=a+f+u,m=h>=o.length?void 0:o[h],m!==void 0&&m.trim()==="";)u++;let g=h===o.length-1;if(!m||!(p&&(g?p.startsWith(m)||m.startsWith(p):p===m&&m.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(Tqt,"maybeSnipCompletionImpl");function wqt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(wqt,"splitByNewLine");function _qt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(_qt,"matchesNextLine");function qF(t,e,r,n,i,o){if(RJ(n.tokens)){let c=Fr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(_qt(e,r,a.completionText,!i)){let c=Fr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",c),Bt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=Iqt(t,e,r,a.completionText),a.completionText?a:void 0}s(qF,"postProcessChoiceInContext");function RVe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(RVe,"checkSuffix");var BVe=Me(Ib());var rs=new _t("ghostText");var Rqt=200,kVe=20;async function NVe(t,e,r,n,i,o,a){rs.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=X3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:mUe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l,code_annotations:!1},p=Ao(t,Qt.ModelAlwaysTerminatesSingleline)??t.get(Ot).modelAlwaysTerminatesSingleline(r),h=e.blockMode==="moremultiline"&&zI.isSupported(e.languageId)&&!p;!e.multiline&&!h?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let m=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let A={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},y=await t.get(t0).fetchAndStreamCompletions(t,A,r,i,n);return y.type==="failed"?{type:"failed",reason:y.reason,telemetryData:za(r)}:y.type==="canceled"?(rs.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:y.reason,telemetryData:JI(r)}):a(m,y.getProcessingTime(),y.choices)}catch(A){if(td(A))return{type:"canceled",reason:"network request aborted",telemetryData:JI(r,{cancelledNetworkRequest:!0})};if(rs.exception(t,A,"Error on ghost text request"),t.get(qd).notifyUser(t,A),p4(t))throw A;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:za(r)}}}s(NVe,"genericGetCompletionsFromNetwork");function _ye(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(_ye,"postProcessChoices");async function kqt(t,e,r,n,i){return NVe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return rs.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:za(r)};if(n?.isCancellationRequested)return rs.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:JI(r)};let f=u.value;if(f===void 0)return rs.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:za(r)};MVe(t,"performance",f,o,a),rs.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=_ye(f,e);p&&(kJ(t,e,p),rs.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let h=(async()=>{let m=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;rs.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let A=_ye(g,e,m);A&&(m.push(A),kJ(t,e,A))}})();return cg(t)&&await h,p?{type:"success",value:[Sye(p,{forceSingleLine:!1}),h],telemetryData:za(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:za(r)}})}s(kqt,"getCompletionsFromNetwork");async function Pqt(t,e,r,n,i){return NVe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return rs.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:JI(r)};let f=_ye(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)kJ(t,e,u);MVe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:za(r),telemetryBlob:r,resultType:3}})}s(Pqt,"getAllCompletionsFromNetwork");function Sye(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(Sye,"makeGhostAPIChoice");function PVe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(PVe,"takeNLines");async function Dqt(t,e,r,n,i,o,a,c){let l=t.get(Ot).multilineAfterAcceptLines(c),u=t.get(Og).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:PVe(l),stop:[`

`],maxTokens:kVe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(f=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let f;try{f=await qqt(t,u,e.textDocument,e.position,o,a,n)}catch{f={requestMultiline:!1}}if(!a&&f.requestMultiline&&t.get(Ot).singleLineUnlessAccepted(c)&&(f.requestMultiline=!1),f.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=us.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...DVe(t,u,e.textDocument,p,f.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:PVe(l),stop:[`

`],maxTokens:kVe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...DVe(t,u,e.textDocument,e.position,f.blockPosition,r,!1,n.prompt,c)}}}}s(Dqt,"getGhostTextStrategy");function DVe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&zI.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Ot).longLookaheadSize(l):t.get(Ot).shortLookaheadSize(l);return{finishedCb:new mK(t,o,r.detectedLanguageId,!1,u,(p,h)=>{let m={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};kJ(t,m,h)}).getFinishedCallback(),maxTokens:Rqt}}return{finishedCb:a?UF(t,r,n):u=>{}}}s(DVe,"buildFinishedCallback");var Bqt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function Nqt(t,e,r){let n=Ao(t,Qt.CompletionsDebounce)??t.get(Ot).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=Ca()-r.issuedTime;return Math.max(0,n-i)}s(Nqt,"getRemainingDebounceMs");function HF(t,e,r){return r?.isCancellationRequested||e!==t.get(n0).currentRequestId}s(HF,"inlineCompletionRequestCancelled");async function Lqt(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(y){let E=Ca();c.push([y,E-a]),a=E}s(l,"recordPerformance"),l("telemetry");let u=t.get(Ot);if(HF(t,r,i))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:za(n)};let f=Fqt(e.textDocument,e.position);if(f===void 0)return rs.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:za(n)};let p=SI(t,n),h={...Bqt,...o,tokenizer:p.tokenizer},m=await fD(t,r,e,n,void 0,h);if(l("prompt"),m.type==="copilotContentExclusion")return rs.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:za(n)};if(m.type==="contextTooShort")return rs.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:za(n)};if(m.type==="promptError")return rs.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:za(n)};if(h.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:m};if(m.type==="promptCancelled")return rs.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:za(n)};if(m.type==="promptTimeout")return rs.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:za(n)};if(m.prompt.prefix.length===0&&m.prompt.suffix.length===0)return rs.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:za(n)};let g=Nqt(t,h,n);return g>0&&(rs.debug(t,`Debouncing ghost text request for ${g}ms`),await tC(g),HF(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:za(n)}:t.get(yo).withProgress(async()=>{let[y]=rT(e.textDocument.getText(us.range(us.position(0,0),e.position))),E=t.get(n0).hasAcceptedCurrentCompletion(y,m.prompt.suffix),b=m.prompt,_=await Dqt(t,e,y,m,h.isCycling,f,E,n);l("strategy");let S=Mqt(t,y,b,_.requestMultiline);l("cache");let P=RI(t,e.textDocument.uri),B={blockMode:_.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:P,engineModelId:p.modelId,ourRequestId:r,prefix:y,prompt:m.prompt,multiline:_.requestMultiline,indentation:_J(e.textDocument,e.position),isCycling:h.isCycling,headers:p.headers,stop:_.stop,maxTokens:_.maxTokens,afterAccept:E};B.headers={...B.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":h.isSpeculative?"true":"false"};let F=Gqt(t,e.textDocument,B,e.position,m,n,p,h);if(S===void 0&&!h.isCycling&&t.get(e0).shouldWaitForAsyncCompletions(y,m.prompt)){let W=await t.get(e0).getFirstMatchingRequestWithTimeout(r,y,m.prompt,h.isSpeculative,F);if(l("asyncWait"),W){let J=!_.requestMultiline;S=[[Sye(W[0],{forceSingleLine:J})],4]}if(HF(t,r,i))return rs.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:za(F)}}let Y=_.blockMode==="moremultiline"&&zI.isSupported(e.textDocument.detectedLanguageId);if(S!==void 0&&(S[0]=S[0].map(W=>qF(t,e.textDocument,e.position,W,Y,rs)).filter(W=>W!==void 0)),S!==void 0&&S[0].length===0)return rs.debug(t,`Found empty inline suggestions locally via ${Z3(S[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:za(F)};if(S!==void 0&&S[0].length>0&&(!h.isCycling||S[0].length>1))rs.debug(t,`Found inline suggestions locally via ${Z3(S[1])}`);else{if(h.isCycling){let W=await Pqt(t,B,F,i,_.finishedCb);if(W.type==="success"){let J=S?.[0]??[];W.value[0].forEach(ie=>{J.findIndex(ae=>ae.completionText.trim()===ie.completionText.trim())===-1&&J.push(ie)}),S=[J,3]}else if(S===void 0)return W}else{let W=s((te,pe)=>(t.get(e0).updateCompletion(r,te),_.finishedCb(te,pe)),"finishedCb"),J=new Sn.CancellationTokenSource,ie=kqt(t,B,F,J.token,W);t.get(e0).queueCompletionRequest(r,y,m.prompt,J,ie);let ae=await t.get(e0).getFirstMatchingRequest(r,y,m.prompt,h.isSpeculative);if(ae===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:za(F)};S=[[ae[0]],4]}l("network")}if(S===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:za(F)};let[ee,V]=S,H=ee.map(W=>qF(t,e.textDocument,e.position,W,Y,rs)).filter(W=>W!==void 0),U=Ao(t,Qt.CompletionsDelay)??u.completionsDelay(n),X=Ca()-n.issuedTime,K=Math.max(U-X,0);if(V!==2&&!h.isCycling&&K>0&&(rs.debug(t,`Waiting ${K}ms before returning completion`),await tC(K),HF(t,r,i)))return rs.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:JI(F)};let j=[];for(let W of H){let J=jqt(t,e.textDocument,B,W,F),ie=f?RVe(e.textDocument,e.position,W):0,te={completion:Hqt(W.choiceIndex,W.completionText,m.trailingWs),telemetry:J,isMiddleOfTheLine:f,suffixCoverage:ie,copilotAnnotations:W.copilotAnnotations,clientCompletionId:W.clientCompletionId};j.push(te)}return F.properties.clientCompletionId=j[0]?.clientCompletionId,F.measurements.foundOffset=j?.[0]?.telemetry?.measurements?.foundOffset??-1,rs.debug(t,`Produced ${j.length} results from ${Z3(V)} at ${F.measurements.foundOffset} offset`),HF(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:JI(F)}:(h.isSpeculative||t.get(n0).setGhostText(y,m.prompt.suffix,H,V),l("complete"),{type:"success",value:[j,V],telemetryData:za(F),telemetryBlob:F,resultType:V,performanceMetrics:c})})}s(Lqt,"getGhostTextWithoutAbortHandling");async function Rye(t,e,r,n){let i=gr();t.get(n0).currentRequestId=i;let o=await $qt(t,e.textDocument,i,n);await a2.catch(()=>{});try{return t.get(tm).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(eC).notifyRequest(e,i,o,r,n),await Lqt(t,e,i,o,r,n)}catch(a){if(td(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:JI(o,{cancelledNetworkRequest:!0})};throw a}}s(Rye,"getGhostText");function Mqt(t,e,r,n){let i=t.get(n0).getCompletionsForUserTyping(e,r.suffix),o=Wqt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(Mqt,"getLocalInlineSuggestion");function Fqt(t,e){let r=Oqt(e,t),n=Qqt(e,t);return r&&!n?void 0:r&&n}s(Fqt,"isInlineSuggestion");function Oqt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(Oqt,"isMiddleOfTheLine");function Qqt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(Qqt,"isValidMiddleOfTheLinePosition");function Uqt(t,e){return e.lineAt(t).text.trim().length===0}s(Uqt,"isNewLine");var Yv=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function qqt(t,e,r,n,i,o,a){if(t.get(Yv).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",Fr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&zI.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await rje(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&Uqt(n,r))return{requestMultiline:!0};let l=!1;return!i&&cp(r.detectedLanguageId)?l=await wJ(r,n):i&&cp(r.detectedLanguageId)&&(l=await wJ(r,n)||await wJ(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=sje(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(qqt,"shouldRequestMultiline");function kJ(t,e,r){t.get(Gg).append(e.prefix,e.prompt.suffix,r)}s(kJ,"appendToCache");function Hqt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(Hqt,"adjustLeadingWhitespace");function Wqt(t,e,r,n){let i=t.get(Gg).findAll(e,r);return i.length===0?(rs.debug(t,"Found no completions in cache"),[]):(rs.debug(t,`Found ${i.length} completions in cache`),i.map(o=>Sye(o,{forceSingleLine:!n})))}s(Wqt,"getCompletionsFromCache");async function $qt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=Fr.createAndMarkAsIssued(i);return await t.get(Ot).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s($qt,"createTelemetryWithExp");function jqt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,LVe(l,e),l.extendWithRequestId(o),l.measurements.confidence=wVe(t,l),l.measurements.quantile=_Ve(t,l),rs.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(jqt,"telemetryWithAddData");function Gqt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);LVe(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),h=e.getText(us.range(p.range.start,n)),m=e.getText(us.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(_=>(0,BVe.SHA256)(_).toString())]),A={beforeCursorWhitespace:JSON.stringify(h.trim()===""),afterCursorWhitespace:JSON.stringify(m.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},y={...aP(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(A.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(A.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let E=u.extendedBy(A,y);return Bt(t,"ghostText.issued",E),u}s(Gqt,"telemetryIssued");function LVe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(LVe,"addDocumentTelemetry");function MVe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,c)}s(MVe,"telemetryPerformance");var n0=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&FVe(this.choices[0].completionText,n))return Vqt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function Vqt(t,e){return t.filter(r=>FVe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(Vqt,"adjustChoicesStart");function FVe(t,e){return t.startsWith(e)&&t.length>e.length}s(FVe,"startsWithAndExceeds");d();d();d();var J2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(vr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var kye=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??Sn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let h={range:c,newText:l,positionAfterEdit:Sn.Position.create(i.line,i.character)};r&&(h.source="selectedCompletionInfo"),a.push(h);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:Sn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function uC(t,e){return new kye(t,e)}s(uC,"createCompletionState");d();d();d();d();d();d();var OVe="code-referencing";var i0=new _t(OVe);var zqt=3e3,Pye=2,QVe=256,UVe=Math.log(QVe)/Math.log(Pye)/Pye,Jg={connection:"disabled",maxAttempts:UVe,retryAttempts:0,initialWait:!1},PJ,DJ=[];function Yqt(){if(PJ)return PJ;function t(E){return DJ.push(E),()=>{let b=DJ.indexOf(E);b!==-1&&DJ.splice(b,1)}}s(t,"subscribe");function e(){for(let E of DJ)E()}s(e,"afterUpdateConnection");function r(E){Jg.connection!==E&&(Jg.connection=E,e())}s(r,"updateConnection");function n(){return Jg.connection==="connected"}s(n,"isConnected");function i(){return Jg.connection==="disconnected"}s(i,"isDisconnected");function o(){return Jg.connection==="retry"}s(o,"isRetrying");function a(){return Jg.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function f(){r("disabled")}s(f,"setDisabled");function p(E){Jg.initialWait!==E&&(Jg.initialWait=E)}s(p,"setInitialWait");function h(E,b=zqt){o()||(u(),p(!0),g(E,b))}s(h,"enableRetry");function m(){return Jg.initialWait}s(m,"isInitialWait");async function g(E,b){i0.info(E,`Attempting to reconnect in ${b}ms.`),await A(b),p(!1);let _=E.get(zn);async function S(P,B){if(P>QVe){i0.info(B,"Max retry time reached, disabling."),f();return}let F=s(async()=>{Jg.retryAttempts=Math.min(Jg.retryAttempts+1,UVe);try{i0.info(B,`Pinging service after ${P} second(s)`);let Y=await _.fetch(new URL("_ping",lP(B)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(Y.status!==200||!Y.ok)await S(P**2,B);else{i0.info(B,"Successfully reconnected."),c();return}}catch{await S(P**2,B)}},"tryAgain");setTimeout(()=>void F(),P*1e3)}s(S,"succeedOrRetry"),i0.info(E,"Attempting to reconnect."),await S(Pye,E)}s(g,"attemptToPing");let A=s(E=>new Promise(b=>setTimeout(b,E)),"timeout");function y(E){return{dispose:t(E)}}return s(y,"listen"),PJ={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:f,enableRetry:h,listen:y,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:m},PJ}s(Yqt,"registerConnectionState");var X2=Yqt();d();var zl={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},WF={[zl.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[zl.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[zl.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function Dye(t){return t===401?zl.Unauthorized:t===400?zl.BadArguments:t===404?zl.NotFound:t===429?zl.RateLimit:t>=500&&t<600?zl.InternalError:t>=600?zl.ConnectionError:zl.Unknown}s(Dye,"getErrorType");function dC(t,e,r={}){return{kind:"failure",reason:Dye(Number(t)),code:Number(t),msg:e,meta:r}}s(dC,"createErrorResponse");d();var Kqt=/^[1-6][0-9][0-9]$/,Jqt=/([A-Z][a-z]+)/,Xqt="code_referencing",$F=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[Xqt,this.baseKey,...e].join(".")}},Bye=class extends $F{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Fr.createAndMarkAsIssued();Bt(e,r,n)}handleFocus({context:e}){let r=Fr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Bt(e,n,r)}handleWrite({context:e}){let r=Fr.createAndMarkAsIssued(),n=this.buildKey("write","count");Bt(e,n,r)}},iXn=new Bye,Nye=class extends $F{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Fr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Bt(e,i,n)}handleDismiss({context:e,actor:r}){let n=Fr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Bt(e,i,n)}},oXn=new Nye,Lye=class extends $F{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=Fr.createAndMarkAsIssued({origin:r,reason:n});Ig(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=Fr.createAndMarkAsIssued({origin:r,reason:n});Ig(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(Kqt)){i0.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(Jqt).filter(c=>!!c).join("_").toLowerCase(),a=Fr.createAndMarkAsIssued({message:i});Ig(e,this.buildKey(o,r),a)}},BJ=new Lye;var Zqt="twirp/github.snippy.v1.SnippyAPI";async function Mye(t,e,r,n){let i;try{i=await t.get(Gr).getToken()}catch{return X2.setDisconnected(),dC(401,WF[zl.Unauthorized])}if(i0.info(t,`Calling ${e}`),X2.isRetrying())return dC(600,"Attempting to reconnect to the public code matching service.");if(X2.isDisconnected())return dC(601,"The public code matching service is offline.");let o;try{o=await t.get(zn).fetch(Ry(t,i,"origin-tracker",`${Zqt}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...F0(t)},signal:n})}catch{return X2.enableRetry(t),dC(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let A=g.message;throw BJ.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:A}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:f}=c,p=Number(l),h=Dye(p),m=u||"unknown error";switch(h){case zl.Unauthorized:return dC(l,WF[zl.Unauthorized],f);case zl.BadArguments:return dC(l,m,f);case zl.RateLimit:return X2.enableRetry(t,60*1e3),dC(l,WF.RateLimitError,f);case zl.InternalError:return X2.enableRetry(t),dC(l,WF[zl.InternalError],f);default:return dC(l,m,f)}}s(Mye,"call");d();var NJ=I.Object({kind:I.Literal("failure"),reason:I.String(),code:I.Number(),msg:I.String(),meta:I.Optional(I.Any())}),tHt=I.Object({matched_source:I.String(),occurrences:I.String(),capped:I.Boolean(),cursor:I.String(),github_url:I.String()}),qVe=I.Object({source:I.String()}),rHt=I.Object({snippets:I.Array(tHt)}),HVe=I.Union([rHt,NJ]),WVe=I.Object({cursor:I.String()}),nHt=I.Object({commit_id:I.String(),license:I.String(),nwo:I.String(),path:I.String(),url:I.String()}),iHt=I.Object({has_next_page:I.Boolean(),cursor:I.String()}),oHt=I.Object({count:I.Record(I.String(),I.String())}),sHt=I.Object({file_matches:I.Array(nHt),page_info:iHt,license_stats:oHt}),$Ve=I.Union([sHt,NJ]);async function jVe(t,e,r){let n=await Mye(t,"Match",{method:"POST",body:O2(qVe,{source:e})},r);return O2(HVe,n)}s(jVe,"Match");async function GVe(t,{cursor:e},r){let n=await Mye(t,"FilesForMatch",{method:"POST",body:O2(WVe,{cursor:e})},r);return O2($Ve,n)}s(GVe,"FilesForMatch");d();var jF=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),LJ=65;function lHt(t){let e=0,r;jF.lastIndex=0;do if(r=jF.exec(t),r&&(e+=1),e>=LJ)break;while(r);return e}s(lHt,"lexemeLength");function uHt(t,e){let r=0,n;jF.lastIndex=0;do if(n=jF.exec(t),n&&(r+=1,r>=e))return jF.lastIndex;while(n);return t.length}s(uHt,"offsetFirstLexemes");function VVe(t,e){let r=t.split("").reverse().join(""),n=uHt(r,e);return r.length-n}s(VVe,"offsetLastLexemes");function GF(t){return lHt(t)>=LJ}s(GF,"hasMinLexemeLength");function fHt(t){return Yy.Check(NJ,t)}s(fHt,"isError");async function zVe(t,e){let r=await e();if(fHt(r)){BJ.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s(zVe,"snippyRequest");function YVe(t){return"kind"in t&&t.kind==="failure"}s(YVe,"isMatchError");async function KVe(t,e,r,n){let o=await t.get(vr).getTextDocument({uri:e});if(!o){i0.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!GF(a)||!GF(a))return;let c=r;if(!GF(r)){let m=a.slice(0,n),g=VVe(m,LJ);c=a.slice(g,n+r.length)}if(!GF(c))return;let l=await zVe(t,()=>jVe(t,c));if(!l||YVe(l)||!l.snippets.length){i0.info(t,"No match found");return}i0.info(t,"Match found");let{snippets:u}=l,f=u.map(async m=>{let g=await zVe(t,()=>GVe(t,{cursor:m.cursor}));if(!g||YVe(g))return;let A=g.file_matches,y=g.license_stats;return{match:m,files:A,licenseStats:y}}),h=(await Promise.all(f)).filter(m=>m!==void 0);if(h.length)for(let m of h){let g=new Set(Object.keys(m.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let A=Array.from(g).sort(),y=n,E=n+m.match.matched_source.length,b=o.positionAt(y),_=o.positionAt(E);await t.get(rf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:y,offsetEnd:E,version:o.version,location:{start:b,end:_},matchingText:c,details:A.map(S=>({license:S,url:m.match.github_url}))})}}s(KVe,"fetchCitations");d();function Fye(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let h=1+o[p],m=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(m,h,g),n[p]===g?i[p]=a[p-1]:n[p]===h?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(Fye,"editDistance");function pHt(){return new Map}s(pHt,"emptyLexDictionary");function hHt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(hHt,"reverseLexDictionary");function*mHt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(mHt,"lexGeneratorWords");function JVe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(JVe,"lexicalAnalyzer");function XVe(t){return t!==" "}s(XVe,"notSingleSpace");function ZVe(t,e,r=mHt){let[n,i]=JVe(t,pHt(),r,XVe),[o,a]=JVe(e,i,r,XVe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=hHt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(A,y,E,b){if(b===0||b===l-1){let _=c[n[E][0]];return b==0&&_.endsWith(u)||b==l-1&&_.startsWith(f)?0:1}else return A===y?0:1}s(p,"compare");let h=Fye(n.map(A=>A[0]),o.map(A=>A[0]),p),m=n[h.startOffset][1],g=h.endOffset<n.length?n[h.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:h.distance,startOffset:m,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(ZVe,"lexEditDistance");d();function Z2(t){if(t.length===0)return[];let e=[],r=/\r\n|\r|\n/g,n;for(;(n=r.exec(t))!==null;)e.push({start:n.index,end:n.index+n[0].length,newline:n[0]});return e}s(Z2,"countLines");function eze(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(eze,"computeCompletionText");var aT=new _t("postInsertion"),tze=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],rze=50,gHt=1500,AHt=.5,yHt=500,Oye={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function nze(t,e,r,n,i){let o=await t.get(Cn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return aT.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await fD(t,r.properties.headerRequestId,uC(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let h=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:h,terminationOffset:0}}else{let h=c.substring(n),m=Tye(l,n,a.detectedLanguageId),A=await CVe(m,void 0)(h),y=Math.min(c.length,n+(A?A*2:yHt)),E=c.substring(n,y);return{prompt:p,capturedCode:E,terminationOffset:A??-1}}}s(nze,"captureCode");function MJ(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{aT.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),_je(t,e,u)});let o=new J2(t,n,r-1),a=new J2(t,n,r),c=s(async l=>{aT.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:h}=await nze(t,n,u,o.offset+1,a.offset),m={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...m,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:h});aT.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");tze.filter(l=>l.captureRejection).map(l=>o.push(ud(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(MJ,"postRejectionTasks");function VF(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});aT.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),wje(t,e,l);let u=r;r=eze(r,a);let f=r.trim(),p=new J2(t,i,n),h=new J2(t,i,n+r.length),m=s(async g=>{await xHt(t,e,f,n,i,g,l,p,h)},"stillInCodeCheck");if(Oye.triggerPostInsertionSynchroneously&&cg(t)){let g=m({seconds:0,captureCode:Oye.captureCode,captureRejection:Oye.captureRejection});t.get(fc).register(g)}else tze.map(g=>p.push(ud(t,()=>m(g),"postInsertionTasks"),g.seconds*1e3));ud(t,CHt,"post insertion citation check")(t,i,u,r,n,c)}s(VF,"postInsertionTasks");async function CHt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(S$(t)?.getTokenValue("sn")==="1")return;await KVe(t,e,n,i);return}let a=await t.get(vr).getTextDocument({uri:e});if(a){let c=Qye(a.getText(),n,rze,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=vHt(r.length,n.length,c.start_offset);if(l===void 0){aT.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+EHt(r.length,n.length,c.stop_offset),h=a?.positionAt(p),m=f&&h?a?.getText({start:f,end:h}):"<unknown>";await t.get(rf).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&h?{start:f,end:h}:void 0,matchingText:m,details:c.details.citations})}}s(CHt,"citationCheck");function vHt(t,e,r){if(!(e<t&&r>e))return r}s(vHt,"computeCitationStart");function EHt(t,e,r){return e<t?Math.min(r,e):r}s(EHt,"computeCitationEnd");function Qye(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=ZVe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=Fye(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=AHt?1:0}}s(Qye,"find");async function xHt(t,e,r,n,i,o,a,c,l){let u=await t.get(Cn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),h=Qye(p,r,rze,c.offset);h.stillInCodeHeuristic||(h=Qye(p,r,gHt,c.offset)),aT.debug(t,`stillInCode: ${h.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${h.relativeLexEditDistance}. Char edit distance was ${h.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${h.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let m=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},h);if(Bt(t,e+".stillInCode",m),o.captureCode){let{prompt:g,capturedCode:A,terminationOffset:y}=await nze(t,i,m,c.offset,l.offset),E={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...E,capturedCodeJson:JSON.stringify(A)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});aT.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,m),Bt(t,e+".capturedAfterAccepted",b,1)}}}s(xHt,"checkStillInCode");var IHt=new _t("ghostText"),Nu=class{constructor(){this.#i=[];this.linesAccepted=0}static{s(this,"LastGhostText")}#e;#t;#i;get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};function THt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(THt,"computeRejectedCompletions");function Uye(t,e){let r=t.get(Nu);if(!r.position||!r.uri)return;let n=THt(r);n.length>0&&MJ(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(Uye,"rejectLastShown");function ize(t,e,r,n){let i=t.get(Nu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&Uye(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(ize,"setLastShown");function oze(t,e){let r=t.get(Nu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;IHt.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,AK(t,"ghostText",e)}}s(oze,"handleGhostTextShown");function wHt(t,e,r){let n=t.get(Nu);n.linesLeft===void 0&&(n.linesLeft=Z2(e.displayText));let i=Z2(e.displayText);n.linesLeft.length>i.length&&(n.linesAccepted+=n.linesLeft.length-i.length,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=i),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}s(wHt,"handleLineAcceptance");function yD(t,e,r="ghostText"){let n=t.get(Nu),i;return n.partiallyAcceptedLength?i={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft?.length??0)}:i={compType:"full",acceptedLength:e.displayText.length,acceptedLines:Z2(e.displayText).length},n.resetState(),VF(t,r,e.displayText,e.offset,e.uri,e.telemetry,i,e.copilotAnnotations)}s(yD,"handleGhostTextPostInsert");function FJ(t,e,r,n=0,i="ghostText",o="line"){let a=t.get(Nu),c;return o==="cumulative"?(_Ht(t,e,r),c={compType:a.totalLength!=null?"full":"partial",acceptedLength:a.totalLength??(a.partiallyAcceptedLength||0),acceptedLines:a.linesAccepted},c.compType==="full"&&a.resetState()):(wHt(t,e,r),c={compType:"partial",acceptedLength:a.partiallyAcceptedLength||0,acceptedLines:a.linesAccepted}),VF(t,i,e.displayText,e.offset,e.uri,e.telemetry,c,e.copilotAnnotations)}s(FJ,"handlePartialGhostTextPostInsert");function _Ht(t,e,r){let n=t.get(Nu);n.partiallyAcceptedLength=(n.partiallyAcceptedLength||0)+r,n.linesAccepted=Z2(e.insertText.substring(0,n.partiallyAcceptedLength)).length,n.partiallyAcceptedLength>=e.insertText.length&&(n.totalLength=n.partiallyAcceptedLength)}s(_Ht,"handleCumulativeAcceptance");function sze(t){let e=new W3;return e.set(vu,t),e.set(ky,new ky),e.set(ho,new ho),e.set(Gg,new Gg),e.set(Tg,new Tg),e.set(Ot,new Ot(e)),e.set(gy,new gy),e.set(hu,new hu(e)),e.set(Fl,new Fl),e.set(qd,new qd),e.set(t0,new TF),e.set(Og,new A3),e.set(_g,new _6),e.set(fc,new fc),e.set(eC,new eC(e)),e.set(Cn,new Cn(e)),e.set(rm,new rm(e)),e.set(zv,xJ(e)),e.set(Nu,new Nu),e.set(n0,new n0),e.set(Yv,Yv.default),e.set(Ov,new Ov(e)),e.set(Bh,new Bh(e)),e.set(Ql,new Ql),e.set(e0,new e0(e)),e.set(vs,new vs),e.set(Gh,new Gh(e)),e.set(Kh,new Kh),e}s(sze,"createCommonContext");d();d();var OJ=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var CD=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var pei=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),zF=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Ot).updateExPValuesAndAssignments(),a=await this.ctx.get(t0).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new OJ(a.reason);case"failed":throw new CD(a.reason)}}};d();d();var aze=Me(require("node:util"));function cze(t,...e){return`[${t}] ${SHt(e)}`}s(cze,"formatLogMessage");function SHt(t){return aze.default.formatWithOptions({maxStringLength:1/0},...t)}s(SHt,"format");function QJ(t){return ake(t)}s(QJ,"verboseLogging");var UJ=class extends Oc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||QJ(r))&&this.console.warn(`[${i}]`,...o)}};d();var lze=require("node:util");var vD=class extends Sy{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){Ig(e,"log",Fr.createAndMarkAsIssued({context:r,level:Z_[1],message:RHt(...n)}),1)}sendException(e,r,n){Na(e,r,n)}};function RHt(...t){return t.map(e=>(0,lze.inspect)(e)).join(" ")}s(RHt,"telemetryMessage");d();var Tit=Me(require("crypto")),wit=Me(require("fs")),yee=Me(bit()),_it=require("tls"),Sit=Me(Iit());var RB=new _t("certificates"),Zc=class{static{s(this,"RootCertificateReader")}};function Cee(t,e=process.platform){return new dxe(t,[new fxe,new pxe,Dor(t,e)])}s(Cee,"getRootCertificateReader");function Dor(t,e){switch(e){case"linux":return new hxe(t);case"darwin":return new mxe(t);case"win32":return new gxe(t);default:return new Axe}}s(Dor,"createPlatformReader");var uxe=class extends Zc{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return RB.warn(this.ctx,"Failed to read root certificates:",r),[]}}},dxe=class extends Zc{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new uxe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new Tit.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return RB.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&RB.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},fxe=class extends Zc{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return _it.rootCertificates}},pxe=class extends Zc{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await Rit(e):[]}},hxe=class extends Zc{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await Rit(n);RB.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},mxe=class extends Zc{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=yee.get({excludeBundled:!1,format:yee.Format.pem});return RB.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},gxe=class extends Zc{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=Sit.all();return RB.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},Axe=class extends Zc{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function Rit(t){let e;try{e=await wit.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(Rit,"readCertsFromFile");d();var qit=Me(require("http"));var nsr=407,Qu=new _t("proxySocketFactory"),BC=class{static{s(this,"ProxySocketFactory")}},DR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function vee(t){return new vxe(t,new Exe(t))}s(vee,"getProxySocketFactory");var vxe=class extends BC{constructor(r,n,i=new p7,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Or(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(Qu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof DR&&i.code===`ProxyStatusCode${nsr}`){Qu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return Qu.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(Qu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(Qu.debug(this.ctx,"Proxy authorization successful, received token"),i)return Qu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){Qu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);Qu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);Qu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Qu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return Qu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return Qu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},Exe=class extends BC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(ho).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{Qu.debug(this.ctx,"Attempting to establish connection to proxy");let c=qit.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{Qu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new DR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new DR(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Qu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{Qu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new DR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{Qu.debug(this.ctx,"Proxy socket connection timeout"),a(new DR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},p7=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Me(Uit()))}};d();var jit=require("node:os");var isr=new _t("repository"),BR="\\\\",Git="(?:[#;].*)",DB=`(?:[^"${BR}]|${BR}.)`,osr="[0-9A-Za-z-]",Hit=`[A-Za-z]${osr}*`,Vit=`\\s*${Git}?$`,zit=`(?:[^"${BR};#]|${BR}.)`,ssr=`(?:"${DB}*"|"${DB}*(?<strCont>${BR})$)`,asr=`(?:${zit}|${ssr})+`,csr=`(?:(?<cont>${BR})$)`,Yit=`(?<value>${asr})${csr}?${Vit}`,Wit=new RegExp(`^${Yit}`),lsr=new RegExp(`^(?<value>${DB}*(?:(?<strCont>${BR})$|(?<quote>")))`),usr=new RegExp(`^\\s*(?:(?<key>${Hit})\\s*=\\s*${Yit}|(?<soloKey>${Hit})${Vit})`),dsr=new RegExp(`(?<value>${zit}+)|"(?<string>${DB}*)"`,"g"),$it="[-.0-9A-Za-z]+",fsr=`\\s+"(?<ext>${DB}*)"`,psr=`\\s+"(?<extOnly>${DB}*)"`,hsr=new RegExp(`^\\s*\\[(?:(?<simple>${$it})${fsr}|${psr}|(?<simpleOnly>${$it}))\\]`),msr=new RegExp(`^\\s*${Git}$`),xxe=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(hsr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(usr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(lsr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Wit),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Wit),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(dsr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){msr.test(this.line)&&(this.line="")}},Eee=class extends jg{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await Ov.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new F2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new xxe(i),a=new F2;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(bo).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&isr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=qo(this.xdgConfigUri(),"git","config"),o=qo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Ui(r).toLowerCase()!=="config.worktree")return;let n=dd(r),i=qo(n,"commondir");try{let o=(await e.get(bo).readFileString(i)).trimEnd();return qo(tS(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?dl(process.env.XDG_CONFIG_HOME):qo(this.homeUri(),".config")}homeUri(){return dl((0,jit.homedir)())}};d();var Kit=require("child_process");var xee=class extends jg{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Kit.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){T$e.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=ys(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new F2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var Xit=Me(require("node:events"));var Jit="onWorkspaceChanged",Sp=class{constructor(){this.emitter=new Xit.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(Jit,e)}emit(e){this.emitter.emit(Jit,e)}};function Zit(t){let e=sze(t);return gsr(e),e.set(Zc,Cee(e)),e.set(BC,vee(e)),e.set(jg,new KY([new xee,new Eee])),e.set(Sp,new Sp),e.set(zF,new zF(e)),e}s(Zit,"createProductionContext");function gsr(t){t.set(ah,ah.fromEnvironment(!1)),t.set(Sy,new vD),t.set(Oc,new UJ(console))}s(gsr,"setupRudimentaryLogging");var Xci=new _t("context");d();d();var Vr=new _t("chat");d();d();var vl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(vl||{});function sn(t){return t?(t=Rp(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(sn,"getTextPart");var eot=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),tot=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function QT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(QT,"parseToolCallArguments");function rot(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(rot,"toOpenAIToolCall");function not(t,e,r,n,i,o,a,c){let l=JSON.parse(JSON.stringify(e));return r.tool_calls&&(l.tool_calls=r.tool_calls),K3(t,[l],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c}}s(not,"convertToChatCompletion");function h7(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(h7,"isChatCompletionContentPartArray");function bee(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(bee,"isChatMessageArray");function Rp(t){if(typeof t=="string")return t;if(h7(t))return t;if(bee(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(Rp,"resolveAsChatMessageContent");function m7(t,e){return(typeof t=="string"||h7(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(m7,"appendChatMessageContent");function bxe(t,e){if(t){if(typeof t=="string"||h7(t))return[{role:"assistant",content:t}];if(bee(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(bxe,"resolveResponseAsChatMessages");d();var Ixe=new _t("streamMessages");function iot(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Ixe.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Ixe.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Ixe.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=IF(e.solution),a={role:"assistant",content:n};return not(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(iot,"prepareChatCompletionForReturn");var Am=new _t("fetchChat"),Iee=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let c=a.body();try{c.destroy()}catch(l){Am.exception(e,l,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let c=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,c,a)}if(e.get(Gh).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let c=await a.text(),l=JSON.parse(c),u=l.choices!=null?l.choices[0].message:{role:"assistant",content:""},f=a.headers.get("X-Request-ID")??gr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:sn(u.content).split(" "),requestId:{headerRequestId:f,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},h=sn(u.content);return await i(h,{text:h,copilotReferences:l.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>J3(a),"getProcessingTime")}}else{let l=KI.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:qv(l,f=>iot(e,f,n)),getProcessingTime:s(()=>J3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return Fr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:X3(e,n.count),top_p:pK(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=Pv(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await Asr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Am.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Gr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Am.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Am.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Gr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Am.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function Asr(t,e,r,n,i,o,a,c,l,u,f,p){let h=qo(r,n,i);if(!c)throw new Error(`Failed to send request to ${h} due to missing key`);let m=u.extendedBy({endpoint:i,engineName:n,uiKind:l});fK(a,m,["messages"]),m.properties.headerRequestId=o,Bt(t,"request.sent",m);let g=Ca(),A=gje(l),y={...II(t),...f.toCapiHeaders()};return a.messages?.some(E=>Array.isArray(E.content)?E.content.some(b=>"image_url"in b):!1)&&(y["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(E=>{ysr(E)&&E.tool_calls&&(E.tool_calls=E.tool_calls.map(b=>rot(b)))}),N_(t,h,c,A,o,a,p,y).then(E=>{let b=Q2(E);m.extendWithRequestId(b);let _=Ca()-g;return m.measurements.totalTimeMs=_,Am.info(t,`Request ${o} at <${h}> finished with ${E.status} status after ${_}ms`),Am.debug(t,"request.response properties",m.properties),Am.debug(t,"request.response measurements",m.measurements),Am.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",m),E}).catch(E=>{if(td(E))throw E;let b=m.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",b),m.properties.message=String(of(E,"name")??""),m.properties.code=String(of(E,"code")??""),m.properties.errno=String(of(E,"errno")??""),m.properties.type=String(of(E,"type")??"");let _=Ca()-g;throw m.measurements.totalTimeMs=_,Am.info(t,`Request ${o} at <${h}> rejected with ${String(E)} after ${_}ms`),Am.debug(t,"request.error properties",m.properties),Am.debug(t,"request.error measurements",m.measurements),Bt(t,"request.error",m),E}).finally(()=>{K3(t,e,m)})}s(Asr,"fetchWithInstrumentation");function ysr(t){return"tool_calls"in t}s(ysr,"isChatMessageWithToolCalls");var Ua=class{constructor(e){this.ctx=e;this.fetcher=new Iee}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=gr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(Gr).getToken(),u=Ry(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions",p=e.authToken??l.token,h={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return c&&(h.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(h.tools=e.tools,h.tool_choice=e.tool_choice??"auto"),await this.fetch(h,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=EF(r.chatCompletions,l=>this.postProcess(l,i));Vr.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Vr.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:sn(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:sn(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>sn(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return RJ(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Vr.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return td(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Vr.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var NC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var UT=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var Csr=".github/copilot-instructions.md",vsr=".github/git-commit-instructions.md",Esr="global-copilot-instructions",xsr="global-git-commit-instructions",LC=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Esr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:xsr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=qo(r.uri,n),l=(await e.get(bo).readFileString(c)).trim();if(!l)return;(await Qv(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,Csr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,vsr,void 0,i,0)),c});return await Promise.all(o),i}};d();var Uu=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},Tee=class extends Uu{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};d();d();d();function wee(){return gr()}s(wee,"uuidV4");d();var qT=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var MC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var g7="filepath:",El="...existing code...",Txe="copilot-edited-file";d();function BB(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(BB,"getFenceForCodeBlock");var kp=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=BB(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${g7} ${$a(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var wxe=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},A7=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=sn(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=sn(a.content).endsWith(`
`)?sn(a.content):`${sn(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${Txe}>.
</SYSTEM>


`}return o+sn(a.content)},"")+`


The resulting document:
<${Txe}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${El}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new kp({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new wxe({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new kp({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var hE=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Cn).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var FC=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Gt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=$g(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new cn(n,i)}getRange(e){return Ar.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Gl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Gl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var _xe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new cn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new Ar(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new FC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new Ar(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return em(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var _ee=class extends _xe{constructor(r){super();this.value=r;this._t=new FC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();var y7=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new gn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),h=c.replaceRange.start-(u.replaceRange.start+l);if(h>0){let y=u.slice(Gt.emptyAt(p),new Gt(0,h));o.push(y)}if(!f)throw new gn("Invariant violation: lastIntersecting is undefined");let m=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(m>0){let y=f.slice(Gt.ofStartAndLength(f.replaceRange.endExclusive,0),new Gt(f.getNewLength()-m,f.getNewLength()));i.unshift(y),a-=y.getNewLength()-y.replaceRange.length}let g=new Gt(p,c.replaceRange.endExclusive-a),A=c.slice(g,new Gt(0,c.getNewLength()));o.push(A)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Gt(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return aWe(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}},See=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Gt(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Gt(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},oot=class t extends y7{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var Ree=class extends y7{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(pf.replace(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new Pp(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new pf(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new pf(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new Pp(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new Pp(r)}normalizeEOL(e){return new Pp(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=pf.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?Pp.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new _ee(this.apply(e.value))}mapData(e){return new Sxe(this.replacements.map(r=>new NB(r.replaceRange,r.newText,e(r))))}},kee=class extends See{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=tT(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,Gv(n,this.newText)),a=new Gt(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new pf(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new pf(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=tT(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Gt(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=Gv(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Gt(0,this.newText.length-i))}toEdit(){return new Pp([this])}},Pp=class t extends Ree{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new pf(e,r)])}static insert(e,r){return new t([new pf(Gt.emptyAt(e),r)])}static delete(e){return new t([new pf(e,"")])}static fromJson(e){return new t(e.map(pf.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},pf=class t extends kee{static{s(this,"StringReplacement")}static insert(e,r){return new t(Gt.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var Sxe=class t extends Ree{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new NB(e,r,n)])}static insert(e,r,n){return new t([new NB(Gt.emptyAt(e),r,n)])}static delete(e,r){return new t([new NB(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new Pp(this.replacements.map(e=>new pf(e.replaceRange,e.newText)))}},NB=class t extends kee{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Gt.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};var LB=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=Pp.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=bsr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),h=f.newText,m=a[u],g=this._text.substring(m.start,m.endExclusive),A=Rxe(g,h),y=Rxe(h,p),E=Rxe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${h}"->"${g}" | 4gram:${A.toFixed(2)} noRevert:(${y.toFixed(2)},${E.toFixed(2)})`),y!==1){let b=1-Math.max(E-y,0)/(1-y);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*A,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function Rxe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(Rxe,"compute4GramTextSimilarity");function bsr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(bsr,"applyEditsToRanges");d();d();var C7=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new cn(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function Pee(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new C7(t),a=new C7(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),h=e.substring(f,p),m=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),A=new Gt(m,g);c.push(new pf(A,h))}return new Pp(c)}s(Pee,"stringEditFromDiff");d();d();var sot=require("worker_threads");var kxe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function Isr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(Isr,"createRpcProxy");var Dee=class{constructor(e,r,n){this.responseHandler=new kxe;this.worker=new sot.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=Isr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();d();d();var Nee=!1,Lee=!1,Bee=!1,Tsr=!1,wsr=!1,aot=!1,_sr=!1,Ssr=!1,Rsr=!1,ksr=!1;var mE,gE=globalThis,ym;typeof gE.vscode<"u"&&typeof gE.vscode.process<"u"?ym=gE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ym=process);var cot=typeof ym?.versions?.electron=="string",Psr=cot&&ym?.type==="renderer";typeof ym=="object"?(Nee=ym.platform==="win32",Lee=ym.platform==="darwin",Bee=ym.platform==="linux",Tsr=Bee&&!!ym.env.SNAP&&!!ym.env.SNAP_REVISION,_sr=cot,Rsr=!!ym.env.CI||!!ym.env.BUILD_ARTIFACTSTAGINGDIRECTORY,wsr=!0):typeof navigator=="object"&&!Psr?(mE=navigator.userAgent,Nee=mE.indexOf("Windows")>=0,Lee=mE.indexOf("Macintosh")>=0,Ssr=(mE.indexOf("Macintosh")>=0||mE.indexOf("iPad")>=0||mE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Bee=mE.indexOf("Linux")>=0,ksr=mE?.indexOf("Mobi")>=0,aot=!0):console.error("Unable to resolve platform.");var Pxe=0;Lee?Pxe=1:Nee?Pxe=3:Bee&&(Pxe=2);var NR=Nee,lot=Lee;var Dsr=aot&&typeof gE.importScripts=="function",ufi=Dsr?gE.origin:void 0;var OC=mE;var Bsr=typeof gE.postMessage=="function"&&!gE.importScripts,dfi=(()=>{if(Bsr){let t=[];gE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),gE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var Nsr=!!(OC&&OC.indexOf("Chrome")>=0),ffi=!!(OC&&OC.indexOf("Firefox")>=0),pfi=!!(!Nsr&&OC&&OC.indexOf("Safari")>=0),hfi=!!(OC&&OC.indexOf("Edg/")>=0),mfi=!!(OC&&OC.indexOf("Android")>=0);var LR,Dxe=globalThis.vscode;if(typeof Dxe<"u"&&typeof Dxe.process<"u"){let t=Dxe.process;LR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?LR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:LR={get platform(){return NR?"win32":lot?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var v7=LR.cwd,uot=LR.env,dot=LR.platform,Efi=LR.arch;var Msr=65,Fsr=97,Osr=90,Qsr=122,$T=46,tu=47,h0=92,HT=58,Usr=63,Mee=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function qsr(t,e){if(t===null||typeof t!="object")throw new Mee(e,"Object",t)}s(qsr,"validateObject");function Za(t,e){if(typeof t!="string")throw new Mee(e,"string",t)}s(Za,"validateString");var m0=dot==="win32";function vi(t){return t===tu||t===h0}s(vi,"isPathSeparator");function Bxe(t){return t===tu}s(Bxe,"isPosixPathSeparator");function WT(t){return t>=Msr&&t<=Osr||t>=Fsr&&t<=Qsr}s(WT,"isWindowsDeviceRoot");function Fee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=tu}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==$T||i.charCodeAt(i.length-2)!==$T){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===$T&&c!==-1?++c:c=-1}return i}s(Fee,"normalizeString");function Hsr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(Hsr,"formatExt");function fot(t,e){qsr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${Hsr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(fot,"_format");var ec={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Za(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=v7():(o=uot[`=${e}`]||v7(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===h0)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)vi(f)&&(c=1,u=!0);else if(vi(f))if(u=!0,vi(o.charCodeAt(1))){let p=2,h=p;for(;p<a&&!vi(o.charCodeAt(p));)p++;if(p<a&&p!==h){let m=o.slice(h,p);for(h=p;p<a&&vi(o.charCodeAt(p));)p++;if(p<a&&p!==h){for(h=p;p<a&&!vi(o.charCodeAt(p));)p++;(p===a||p!==h)&&(l=`\\\\${m}\\${o.slice(h,p)}`,c=p)}}}else c=1;else WT(f)&&o.charCodeAt(1)===HT&&(l=o.slice(0,2),c=2,a>2&&vi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Fee(r,!n,"\\",vi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Za(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Bxe(o)?"\\":t;if(vi(o))if(i=!0,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else WT(o)&&t.charCodeAt(1)===HT&&(n=t.slice(0,2),r=2,e>2&&vi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Fee(t.slice(r),!i,"\\",vi):"";return a.length===0&&!i&&(a="."),a.length>0&&vi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Za(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return vi(r)||e>2&&WT(r)&&t.charCodeAt(1)===HT&&vi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];Za(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&vi(r.charCodeAt(0))){++i;let o=r.length;o>1&&vi(r.charCodeAt(1))&&(++i,o>2&&(vi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&vi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ec.normalize(e)},relative(t,e){if(Za(t,"from"),Za(e,"to"),t===e)return"";let r=ec.resolve(t),n=ec.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===h0;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===h0;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===h0;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===h0;)l--;let u=l-c,f=a<u?a:u,p=-1,h=0;for(;h<f;h++){let g=t.charCodeAt(i+h);if(g!==e.charCodeAt(c+h))break;g===h0&&(p=h)}if(h!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+h)===h0)return n.slice(c+h+1);if(h===2)return n.slice(c+h)}a>f&&(t.charCodeAt(i+h)===h0?p=h:h===2&&(p=3)),p===-1&&(p=0)}let m="";for(h=i+p+1;h<=o;++h)(h===o||t.charCodeAt(h)===h0)&&(m+=m.length===0?"..":"\\..");return c+=p,m.length>0?`${m}${n.slice(c,l)}`:(n.charCodeAt(c)===h0&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ec.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===h0){if(e.charCodeAt(1)===h0){let r=e.charCodeAt(2);if(r!==Usr&&r!==$T)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(WT(e.charCodeAt(0))&&e.charCodeAt(1)===HT&&e.charCodeAt(2)===h0)return`\\\\?\\${e}`;return t},dirname(t){Za(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return vi(i)?t:".";if(vi(i)){if(r=n=1,vi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&vi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!vi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else WT(i)&&t.charCodeAt(1)===HT&&(r=e>2&&vi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(vi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Za(e,"suffix"),Za(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&WT(t.charCodeAt(0))&&t.charCodeAt(1)===HT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(vi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(vi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Za(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===HT&&WT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(vi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===$T?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:fot.bind(null,"\\"),parse(t){Za(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return vi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(vi(i)){if(n=1,vi(t.charCodeAt(1))){let p=2,h=p;for(;p<r&&!vi(t.charCodeAt(p));)p++;if(p<r&&p!==h){for(h=p;p<r&&vi(t.charCodeAt(p));)p++;if(p<r&&p!==h){for(h=p;p<r&&!vi(t.charCodeAt(p));)p++;p===r?n=p:p!==h&&(n=p+1)}}}}else if(WT(i)&&t.charCodeAt(1)===HT){if(r<=2)return e.root=e.dir=t,e;if(n=2,vi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),vi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===$T?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Wsr=(()=>{if(m0){let t=/\\/g;return()=>{let e=v7().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>v7()})(),wc={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Wsr();Za(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===tu)}return e=Fee(e,!r,"/",Bxe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Za(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===tu,r=t.charCodeAt(t.length-1)===tu;return t=Fee(t,!e,"/",Bxe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Za(t,"path"),t.length>0&&t.charCodeAt(0)===tu},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Za(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":wc.normalize(e)},relative(t,e){if(Za(t,"from"),Za(e,"to"),t===e||(t=wc.resolve(t),e=wc.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===tu&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===tu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===tu?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===tu)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Za(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===tu,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===tu){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Za(e,"ext"),Za(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===tu){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===tu){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Za(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===tu){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===$T?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:fot.bind(null,"/"),parse(t){Za(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===tu,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===tu){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===$T?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};wc.win32=ec.win32=ec;wc.posix=ec.posix=wc;var bfi=m0?ec.normalize:wc.normalize,Ifi=m0?ec.isAbsolute:wc.isAbsolute,Nxe=m0?ec.join:wc.join,Tfi=m0?ec.resolve:wc.resolve,wfi=m0?ec.relative:wc.relative,_fi=m0?ec.dirname:wc.dirname,pot=m0?ec.basename:wc.basename,hot=m0?ec.extname:wc.extname,Sfi=m0?ec.format:wc.format,Rfi=m0?ec.parse:wc.parse,kfi=m0?ec.toNamespacedPath:wc.toNamespacedPath,Pfi=m0?ec.sep:wc.sep,Dfi=m0?ec.delimiter:wc.delimiter;d();var Oee=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();d();var Lxe=class t{constructor(e){this.edits=e;zg(()=>q2(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new QC(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new QC(e,r)])}static insert(e,r){return new t([new QC(Ar.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new QC(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Gl.ofText(o.text);if(e.isBefore(c)){let u=new cn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return Qee(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new cn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof cn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof cn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return Qee(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new cn(1,1);for(let o of this.edits){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=Qee(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=Qee(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new Fxe(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new QC(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=Gl.ofText(o.text),c=cn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new gn;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let c=this.edits[o+1],l=Ar.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new QC(Ar.fromPositions(r,n),i)}equals(e){return fF(this.edits,e.edits,(r,n)=>r.equals(n))}},QC=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new gn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=Ar.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(Ar.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Lxe([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(Ar.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(Ar.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new Ar(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=tT(r,n),o=Gl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=Ar.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=tT(r,n);r=r.substring(i),n=n.substring(i);let o=Gv(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function Qee(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return Ar.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new gn("start must be before end");return new Ar(t.lineNumber,t.column,e.lineNumber,e.column)}s(Qee,"rangeFromPositions");var Mxe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new cn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new Ar(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new FC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new Ar(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return em(e)}};var Fxe=class extends Mxe{constructor(r){super();this.value=r;this._t=new FC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};var E7=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new tn(o,l.original.startLineNumber),new tn(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new tn(o,r+1),new tn(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new UC(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new gn("not a valid diff");return new UC(new Ar(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Ar(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new UC(new Ar(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new Ar(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(got(this.original.endLineNumberExclusive,e)&&got(this.modified.endLineNumberExclusive,r))return new UC(new Ar(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Ar(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new UC(Ar.fromPositions(new cn(this.original.startLineNumber,1),MB(new cn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Ar.fromPositions(new cn(this.modified.startLineNumber,1),MB(new cn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new UC(Ar.fromPositions(MB(new cn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),MB(new cn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Ar.fromPositions(MB(new cn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),MB(new cn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new gn}};function MB(t,e){if(t.lineNumber<1)return new cn(1,1);if(t.lineNumber>e.length)return new cn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new cn(t.lineNumber,r.length+1):t}s(MB,"normalizePosition");function got(t,e){return t>=1&&t<=e.length}s(got,"isValidLineNumber");var Uee=class t extends E7{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=tn.join(e.map(i=>tn.fromRangeInclusive(i.originalRange))),n=tn.join(e.map(i=>tn.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},UC=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new gn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new gn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new QC(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var yot=require("fs");var g0=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new Zh(()=>{let e=$sr([Nxe(__dirname,"diffWorker.js"),Nxe(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new Dee(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:Aot(i.changes),moves:i.moves.map(a=>new Oee(new E7(new tn(a[0],a[1]),new tn(a[2],a[3])),Aot(a[4])))}}};function Aot(t){return t.map(e=>new Uee(new tn(e[0],e[1]),new tn(e[2],e[3]),e[4]?.map(r=>new UC(new Ar(r[0],r[1],r[2],r[3]),new Ar(r[4],r[5],r[6],r[7])))))}s(Aot,"toLineRangeMappings");function $sr(t){for(let e of t)if((0,yot.existsSync)(e))return e}s($sr,"firstExistingPath");d();d();var jsr=Symbol("MicrotaskDelay");function Gsr(t){let e=new $v,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Zy)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(Gsr,"createCancelablePromise");function AE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Zy)})}):Gsr(r=>AE(t,r))}s(AE,"timeout");var FB=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new gn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new gn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var x7=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Zy)}},Vsr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Vsr||={});var b7=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new gp,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await H2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var qee=class{constructor(e){this._deferred=new x7;this._asyncIterable=new b7(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};d();var Wee=new _t("repository"),yE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},Cm=class{static{s(this,"GitBranchLoader")}},Hee=class extends Cm{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var $ee=new _t("editSurvivalReporter"),Oxe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new Du;this._editSurvivalTracker=new LB(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs);this._sendTelemetryEvent(r)}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=dd(this._document.uri),r=this.ctx.get(Cm);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){$ee.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=dd(this._document.uri),n=await this.ctx.get(Cm).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return $ee.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i){let o=e.computeTrackedEditsSurvivalScore(),a=await this.checkBranchChange();return{fourGram:o.fourGram,noRevert:o.noRevert,timeDelayMs:r,didBranchChange:a,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(Cn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new gn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await Pee(r,n,e.get(g0)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var jee=class extends Oxe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c)}scheduleReport(e,r){let n=new FB(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{$ee.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new LB(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new LB(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw $ee.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var Cot=new _t("editSurvivalTrackerService"),qC=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){Cot.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await Pee(r,n,this.ctx.get(g0));i=new jee(this.ctx,e,r,n,a,o)}catch(a){Cot.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${Hv(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var _c=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var zsr=1e3,Ysr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:yn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},OB=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new _t("codeMapper")}async mapCode(e,r,n,i,o,a=!1){if(!e.resource)throw new MC("No uri found in code block");if(i.isCancellationRequested)throw new qT;e.code.includes(El)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let c=await this.ctx.get(Cn).getOrReadTextDocument({uri:e.resource});if(c.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(c.status==="invalid"){let b=`Failed to find file ${e.resource} with status ${c.status} and reason ${c.reason}`,_=new MC(b);throw this.logger.error(this.ctx,b,_),_}let l=c.document.getText();if(l.length===0&&!e.code.includes(El))return o&&await this.reportCodeBlock(e,o),{code:e.code};let u=new A7({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new hE(this.ctx)}),f=this.ctx.get(qC),p=await u.render();p=u.transformToFastApplyMessage(p),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ui(e.resource),editDescription:e.markdownBeforeBlock});let h=await this.ctx.get(Ot).updateExPValuesAndAssignments(),m=wee(),g=[],A=0,y=0,E=l.length+e.code.length+zsr;for(;;){let b={copilotApiProvider:"proxy",modelConfiguration:Ysr,messages:p,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${m} in iteration ${y} with params: ${JSON.stringify(b,null,2)}`);let S=await this.ctx.get(Ua).fetchResponse(b,i,h);if(this.logger.debug(this.ctx,`Received map code response ${m} in iteration ${y} with result: ${JSON.stringify(S,null,2)}`),A=this.calculateResponseLength(S,g,A),S.type==="length"){if(A>E)throw new MC(`Code mapper might be in a loop: Rewritten length: ${A}, Document length: ${l.length}, Code block length ${e.code.length}`);p=await new A7({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new hE(this.ctx),inProgressRewriteContent:S.truncatedValue}).render()}else if(S.type==="success"){let P=g.join("");if(P){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ui(e.resource),partialText:P,languageId:c.document.detectedLanguageId,markdownCodeFence:BB(P)});let B=f.initialize(c.document,l,P);return{code:P,editSurvivalTrackingSession:B,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:S.requestId}}}else{let B=`No valid completion found for uri ${e.resource}`;throw new MC(B)}}else{if(S.type==="canceled")throw new _c;{let P=`Failed to map code for uri ${e.resource} with result type ${S.type}`;throw this.logger.error(this.ctx,P,S),new MC(P)}}y+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ui(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ui(e.resource)})}};d();var xd=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var jT=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var Gee=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var GT=class{constructor(e,r){this.request=e;this.id=gr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},Qxe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},Vee=class{constructor(e=[],r="panel",n="en"){this._id=gr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new Qxe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new Gee(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var zee=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new xd({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:$b,type:"user"},new xd({message:$b});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new xd({message:jT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new xd({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new xd({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new xd({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new xd({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new xd({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new xd({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new xd({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new xd({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*Eot(t){yield t}s(Eot,"stringToAsyncIterable");d();d();var HC=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(LC),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),c=[...o,...a];return this.processInstructions(c,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};d();var CE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||dl(r)}static uriToPath(e){let r=ys(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var Yee=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await HC.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(CE.posixFilePathToUri(e))}getFilePath(e){return CE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${g7} ${this.exampleFilePath}`,`// ${El}`,"{ changed code }",`// ${El}`,"{ changed code }",`// ${El}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${g7} ${this.tsExampleFilePath}`,"class Person {",`   // ${El}`,"   age: number;",`   // ${El}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new kp({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${El}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var Kee=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var Uxe="<file>",I7="```",w7="###",Jsr=/^(`+)([^ \n]*)/,T7="filepath:";async function*bot(t,e){let r=new Kee(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let A=await r.peek(Math.max(I7.length,Uxe.length,w7.length));if(A.startsWith(Uxe)||A.startsWith(I7))break;if(A.startsWith(w7)){let y=await r.readLineIncludingLF(),E=y.substring(w7.length).trim();await e(E)?n.length=0:n.push(y)}else await xot(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(Uxe);for(;!r.endOfStream&&!i.startsWith(I7);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Jsr),c=a?a[2]:void 0,l=Vje(c?jje(c):void 0),u=[`${l.lineComment.start} ${T7}`,`:: ${T7}`,`<!-- ${T7}`,`// ${T7}`,`# ${T7}`],f=Math.max(...u.map(A=>A.length)),p=l.lineComment.end??"",h="</file>",m,g=[];for(;!r.endOfStream;){let A=await r.peek(Math.max(I7.length,f));if(A.startsWith(I7)){let y=await r.readLineIncludingLF();if(!o)break;if(await r.peek(h.length)===h){await r.readLineIncludingLF();break}else{g.push(y);continue}}if(!m&&u.some(y=>A.startsWith(y))){let y=await r.readLineIncludingLF(),E=u.reduce((b,_)=>A.startsWith(_)?y.substring(_.length):b,y);E=E.split("-->")[0].trim(),E.endsWith(p)&&(E=E.substring(0,E.length-p.length)),E=E.trim(),m=await e(E);continue}await xot(r,g)}yield{resource:m,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(bot,"getCodeBlocksFromResponse");async function xot(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(xot,"pipeOneLine");function Iot(t){if(t.startsWith(`${w7} `))return"";let e=t.indexOf(`
${w7} `);return e===-1?"":t.substring(0,e)+`
`}s(Iot,"parseOverallDescription");d();d();var Jee=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Xsr=new _t("CopilotEditsConversations"),el=class{constructor(e){this.editConversations=new Or(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new Vee([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Xsr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new Jee(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};d();d();var qa=class{static{s(this,"ModelConfigurationProvider")}},Xee=class extends qa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Vr.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Jd).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Jd).getMetadata(),i=ear(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===yn.Gpt35turbo||r===yn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Hxe(6144,i),maxResponseTokens:qxe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===yn.Gpt4||r===yn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:Hxe(10240,i),maxResponseTokens:qxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===yn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await Zsr(this.ctx,i),maxResponseTokens:qxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case IV.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function Zsr(t,e){let r=t.get(Ot),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),Hxe(i,e)}s(Zsr,"getExpRequestTokens");function Hxe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Hxe,"getRequestTokens");function qxe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(qxe,"getResponseTokens");function ear(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(ear,"filterModelsByCapabilities");var $o=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(qa).getBestChatModelConfig([n]);if(e.get(Gh).quotaExhausted&&!(await e.get(Gr).getToken()).userInfo?.isFreeUser){let o=await e.get(Jd).getFallbackModel();if(o)return e.get(qa).getBestChatModelConfig([o?.id])}return e.get(qa).getBestChatModelConfig(Ph(r),i)}static transformMessages(e,r){return r===yn.O1Ga||r===yn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var vE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new Ua(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=zee.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof qT)await this.reportEnd(e,{message:$b});else if(n instanceof xd)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Ot).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await $o.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=$o.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await $o.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new Yee({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new hE(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:$b,type:"user"},new qT;this.ctx.get(el).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Eot(r),o=new OB(this.ctx),a=s(async u=>CE.pathToUri(e,u),"createUri"),c=[],l=Iot(r);l&&await this.ctx.get(Uu).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),await this.abortIfCancelled(e,n);for await(let u of bot(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async f=>{await this.ctx.get(Uu).reportTurn(e,f)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof MC||i instanceof CD)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof qT)e.currentTurn.status="cancelled",e.currentTurn.response={message:$b,type:"user"},await this.reportEnd(e,{message:$b});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(Uu).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(Uu).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(Uu).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};d();var QB=class extends Hd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Gr).resetToken(),r.get(Qf).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Gb({serverUrl:B$(r,n.serverUrl),apiUrl:B$(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var egi=new _t("exp");function Tot(t){let e=t.get(Ot);e.registerStaticFilters(nar(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Ao(t,Qt.DebugOverrideEngine)||Ao(t,Qt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>k$()?"copilot-web":t.get(ln).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Wxe(!t.get(ho).isProduction()&&t.get(ln).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(ln).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>tar(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(ln).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Wxe(t.get(ln).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>rar(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(ln).getRelatedPluginInfo()){let i=sh+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(q9).includes(i)){mH(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=Wxe(n.version)}return r})}s(Tot,"setupExperimentationService");function tar(t){let e=t.get(ln).getEditorPluginInfo();return e.name==="copilot"&&_y(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(tar,"getPluginRelease");function rar(t){let e=t.get(ln).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(rar,"getTargetPopulation");function nar(t){return iar(t)}s(nar,"createAllFilters");function iar(t){let e=t.get(Ts);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(ho).isProduction()?J_(t):"1.999.0"}}s(iar,"createDefaultFilters");function Wxe(t){return t.split("-")[0]}s(Wxe,"trimVersionSuffix");d();var _7=(r=>(r.enabled="enabled",r.disabled="disabled",r))(_7||{}),EE=Symbol("onMCPToolsListChanged"),vm=class{static{s(this,"McpManager")}};d();var dA=class{static{s(this,"McpRuntimeNotifier")}},Zee=class extends dA{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var UB=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var $xe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},ete=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new $xe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let h=Math.exp(-p/6e5),m=f.kind==="rejected"?1.5:.8;l*=1+(m-1)*h}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var is;(n=>{function t(i){return new jxe(i)}n.ok=t,s(t,"ok");function e(i){return new Gxe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(is||={});var jxe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Gxe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();d();var wot=-1;function qB(){return wot!==-1?wot:Date.now()}s(qB,"now");function _ot(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(_ot,"lineRangeDistance");d();d();var Em=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new gn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(tl.fromJson))}static from(e){let r=e.map(i=>new tl(Gt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new tl(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new tl(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return oar(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new tl(Gt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Gt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new tl(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new tl(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Gt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Gt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},tl=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Gt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=tT(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,Gv(r,this.newText)),o=new Gt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function oar(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new tl(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new tl(Gt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let h=u+o.newText,m=new Gt(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new tl(m,h))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Em(n).normalize()}s(oar,"joinEdits");var ia=class t{constructor(e){this.edits=e;jl(q2(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Ia.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Ia.replace(e,r)])}static insert(e,r){return new t([Ia.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Ia.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Em(this.edits.map(e=>new tl(e.range,e.newText)))}compose(e){return sar(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Ia.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Ia.replace(Gt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ia.replaceWithData(Gt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new tte(i)}if(this.edits.length!==e.arrayLength)throw dF(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=Ia.replaceWithData(Gt.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new tte(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Gt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Ia.replace(Gt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(Ia.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(Ia.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function sar(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(Ia.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(Ia.replaceWithData(Gt.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let h=Ia.replaceWithData(Gt.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(h),i-=h.newText.length-h.range.length}let p=new Gt(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Ia.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return ia.create(n).normalize()}s(sar,"joinEdits");var Ia=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Gt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Gt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Gt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return ia.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=aar(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=car(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function aar(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(aar,"commonPrefixLength");function car(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(car,"commonSuffixLength");var bd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return zg(()=>null.base.equals(this.base.apply(e))),zg(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return $C.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},tte=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return ia.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new WC(this.edits.map(e=>e.toEdit()))}},WC=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return ia.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=ia.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>ia.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=os.fromEdit(new bd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();var HB=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new xE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Ia.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return ia.create(r)}mapEdits(e){return new t(this.edits.map(e))}},xE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new gn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=Ar.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(Ar.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(Ar.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(Ar.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new Ar(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Ia.replace(n,this.newText)}};var os=class t{constructor(e){this.edits=e;jl(q2(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>fA.deserialize(r)))}static fromEdit(e){let r=HB.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=xE.joinEdits(o,r);o.length=0;let f=fA.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(WI(n=>n.lineRange.startLineNumber,$I)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return ia.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(tn.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new tn(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new fA(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let h=c===-1?"   ":c.toString().padStart(3," "),m=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${h} ${m} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of pF(this.edits,(l,u)=>_ot(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let h=Math.max(1,l);h<u.lineRange.startLineNumber;h++)n(h,h+o,"unmodified",e[h-1]);let f=u.lineRange,p=u.newLines;for(let h of f.mapToLineArray(m=>m)){let m=e[h-1];n(h,-1,"deleted",m)}for(let h=0;h<p.length;h++){let m=p[h];n(-1,f.startLineNumber+o+h,"added",m)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new fA(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},fA=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(tn.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=em(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(Ar.fromPositions(new cn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(Ar.fromPositions(e.range.getEndPosition(),new cn(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new tn(i,a),n)}toLineEdit(){return new os([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new cn(o,a)}else n=new cn(1,1);let i=r.addToPosition(new cn(1,1));return new xE(Ar.fromPositions(n,i),"")}else return new xE(new Ar(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new xE(Ar.fromPositions(new cn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new Ar(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new xE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Ia.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new tn(r,n),this.newLines.slice(i,this.newLines.length-o))}},lar;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(lar||={});var $C=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=os.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new bd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new os(r))}};d();var rte=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw dF(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw dF(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var H7=Me(gA());function Wst(t){return t.map(pcr).join(`
`)}s(Wst,"stringifyChatMessages");function pcr({role:t,content:e}){if(t!==H7.Raw.ChatRole.User&&t!==H7.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===H7.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==H7.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(pcr,"stringifyMessage");d();d();var hcr=/^\w[\w\d+.-]*$/,mcr=/^\//,gcr=/^\/\//;function Acr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!hcr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!mcr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(gcr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Acr,"_validateUri");function ycr(t,e){return!t&&!e?"file":t}s(ycr,"_schemeFix");function Ccr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==yA&&(e=yA+e):e=yA;break}return e}s(Ccr,"_referenceResolution");var Is="",yA="/",vcr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,nw=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Is,this.authority=e.authority||Is,this.path=e.path||Is,this.query=e.query||Is,this.fragment=e.fragment||Is):(this.scheme=ycr(e,a),this.authority=r||Is,this.path=Ccr(this.scheme,n||Is),this.query=i||Is,this.fragment=o||Is,Acr(this,a))}get fsPath(){return Qbe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Is),n===void 0?n=this.authority:n===null&&(n=Is),i===void 0?i=this.path:i===null&&(i=Is),o===void 0?o=this.query:o===null&&(o=Is),a===void 0?a=this.fragment:a===null&&(a=Is),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new rw(r,n,i,o,a)}static parse(e,r=!1){let n=vcr.exec(e);return n?new rw(n[2]||Is,kte(n[4]||Is),kte(n[5]||Is),kte(n[7]||Is),kte(n[9]||Is),r):new rw(Is,Is,Is,Is,Is)}static file(e){let r=Is;if(NR&&(e=e.replace(/\\/g,yA)),e[0]===yA&&e[1]===yA){let n=e.indexOf(yA,2);n===-1?(r=e.substring(2),e=yA):(r=e.substring(2,n),e=e.substring(n)||yA)}return new rw("file",r,e,Is,Is)}static from(e,r){return new rw(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return NR&&e.scheme==="file"?n=t.file(ec.join(Qbe(e,!0),...r)).path:n=wc.join(e.path,...r),e.with({path:n})}toString(e=!1){return Ube(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new rw(e);return r._formatted=e.external??null,r._fsPath=e._sep===Gst?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var Gst=NR?1:void 0,rw=class extends nw{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=Qbe(this,!1)),this._fsPath}toString(r=!1){return r?Ube(this,!0):(this._formatted||(this._formatted=Ube(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=Gst),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Vst={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function $st(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Vst[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s($st,"encodeURIComponentFast");function Ecr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Vst[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Ecr,"encodeURIComponentMinimal");function Qbe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,NR&&(r=r.replace(/\//g,"\\")),r}s(Qbe,"uriToFsPath");function Ube(t,e){let r=e?Ecr:$st,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=yA,n+=yA),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:$st(l,!1,!1)),n}s(Ube,"_asFormatted");function zst(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+zst(t.substr(3)):t}}s(zst,"decodeURIComponentGraceful");var jst=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function kte(t){return t.match(jst)?t.replace(jst,e=>zst(e)):t}s(kte,"percentDecode");d();var CA=class t{constructor(e){this.uri=e;this._uri=nw.parse(fl(this.uri))}static{s(this,"DocumentId")}static{this._cache=new jv({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return pot(this.uri)}get extension(){return hot(this.uri)}toUri(){return this._uri}};var W7=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},Pte=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new $v;this.liveDependentants=0;this.fetchIssued=!1;this._result=new x7;jl(r.length>0),jl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>$7.deserialize(r)),e.activeDocumentIdx,[],W7.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},$7=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,h,m=i.length,g=new tn(1,i.length+1),A=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=h;this.lineCountBeforeClipping=m;this.clippingRange=g;this.lastSelectionInAfterEdit=A;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:tn.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Vl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(CA.create(e.id),e.workspaceRoot?nw.parse(e.workspaceRoot):void 0,G2.create(e.languageId),e.documentLinesBeforeEdit,os.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?Ar.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Vl(e.documentBeforeEdits),WC.deserialize(e.recentEdits),new Vl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,tn.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var $i=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=is.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=is.ok(e),i=r.build(n);return new t(n,i)}},iw=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?Wst(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:PF(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,jl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function xcr(t,...e){let r=t;for(let n of e)r=n(r);return r}s(xcr,"chainStatelessNextEditProviders");var YB=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=xcr(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},KB=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new $i(is.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=rte.createSortPermutation(a,WI(u=>u.lineRange.startLineNumber,$I)),l=new os(c.apply(a));return new $i(is.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},JB=class extends KB{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},XB=class extends KB{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var bcr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),Icr=new Map(Object.entries(bcr).map(([t,e])=>[t,{languageId:t,...e}]));function Kst(t){return qbe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(Kst,"getLanguage");function qbe(t){return Icr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(qbe,"_getLanguage");d();var ZB=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?C0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new C0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new C0(new Yo(0,0),new Yo(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!C0.isRange(e))throw ow("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw ow("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw ow("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Yo=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw ow("line must be non-negative");if(r<0)throw ow("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw ow();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw ow();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},C0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Yo.isPosition(e.start)&&Yo.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new Yo(e,r),a=new Yo(n,i)):Yo.isPosition(e)&&Yo.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Yo.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=Yo.Max(e.start,this._start),n=Yo.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=Yo.Min(e.start,this._start),n=Yo.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw ow();let n;return e?Yo.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return Tcr(this)}};function ow(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(ow,"illegalArgument");function Tcr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(Tcr,"getDebugDescriptionOfRange");d();function Jst(t){let r=t.split(/\r?\n/).map(wcr),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(Jst,"looksLikeCode");function wcr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),XAe(t)||(e+=1);{XAe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(wcr,"guessLineType");var eN;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(eN||={});function _cr(t){return t.replace(/^\s+/g,"")}s(_cr,"trimLeadingWhitespace");function Hbe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(Hbe,"isImportStatement");var Scr=new jv(t=>{let e=Kst(t),{start:r,end:n}=e.lineComment,i=`(?:${JAe(r)})`,o=n?`(?:${JAe(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function Wbe(t,e){let r=t.match(Scr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=_cr(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(Wbe,"extractEndLineComment");function Bte(t,e){let r=Wbe(t,e);if(!(r&&r.content.trim().length>0&&Jst(r.commentWithoutTokens)))return r}s(Bte,"extractExplicativeEndLineComment");var tN=class t extends KB{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>Hbe(i,r))||Rcr(e,n).some(i=>Hbe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function Rcr(t,e){return oWe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(Rcr,"getOldLines");d();var jbe=Me(gA());d();d();d();var vA;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(vA||={});var zC=v0("instantiationService");function kcr(t,e,r){e[vA.DI_TARGET]===e?e[vA.DI_DEPENDENCIES].push({id:t,index:r}):(e[vA.DI_DEPENDENCIES]=[{id:t,index:r}],e[vA.DI_TARGET]=e)}s(kcr,"storeServiceDependency");function v0(t){if(vA.serviceIds.has(t))return vA.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");kcr(e,r,i)},"id");return e.toString=()=>t,vA.serviceIds.set(t,e),e}s(v0,"createDecorator");d();d();var Np=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var $be=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},j7=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new $be(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var WR=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Pcr=!1,Nte=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Lte=class t{constructor(e=new WR,r=!1,n,i=Pcr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(zC,this),this._globalGraph=i?n?._globalGraph??new j7(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,UY(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)AWe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=G7.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw nWe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof Np?(n=G7.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=G7.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=vA.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof Np)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Np?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new j7(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new Nte(i);for(let u of vA.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof Np){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new Nte(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Np){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof Np)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var G7=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let h=n(o+1,p);h&&c.push(h)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Mte=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new WR(...e):e??new WR}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Lte(this._collection,!0)}};var Ote=v0("ITelemetrySender"),EA=v0("IChatMLFetcher");var Fte=class{constructor(){this._stream=new qee;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Qte=v0("IEndpointProvider");d();var SE=v0("IParserService");d();var rN=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},V7=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},z7=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},sw=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},aw=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var Ute=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new rN(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},Y7=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(sw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new rN(e,0,n,i-n+1)]):e<=r?(sw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new rN(e,r-e+1,n,0)]):(sw.Assert(e===r+1,"originalStart should only be one more than originalEnd"),sw.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,h,m,g,A,y,E){let b=null,_=null,S=new Ute,P=r,B=n,F=m[0]-y[0]-i,Y=-1073741824,ee=this.m_forwardHistory.length-1;do{let V=F+e;V===P||V<B&&u[V-1]<u[V+1]?(p=u[V+1],g=p-F-i,p<Y&&S.MarkNextChange(),Y=p,S.AddModifiedElement(p+1,g),F=V+1-e):(p=u[V-1]+1,g=p-F-i,p<Y&&S.MarkNextChange(),Y=p-1,S.AddOriginalElement(p,g+1),F=V-1-e),ee>=0&&(u=this.m_forwardHistory[ee],e=u[0],P=1,B=u.length-1)}while(--ee>=-1);b=S.getReverseChanges(),S=new Ute,P=a,B=c,F=m[0]-y[0]-l,Y=1073741824,ee=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=F+o;V===P||V<B&&f[V-1]>=f[V+1]?(p=f[V+1]-1,g=p-F-l,p>Y&&S.MarkNextChange(),Y=p+1,S.AddOriginalElement(p+1,g+1),F=V+1-o):(p=f[V-1],g=p-F-l,p>Y&&S.MarkNextChange(),Y=p,S.AddModifiedElement(p+1,g+1),F=V-1-o),ee>=0&&(f=this.m_reverseHistory[ee],o=f[0],P=1,B=f.length-1)}while(--ee>=-1);return _=S.getChanges(),this.ConcatenateChanges(b,_)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,h=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let m=r-e+(i-n),g=m+1,A=new Int32Array(g),y=new Int32Array(g),E=i-n,b=r-e,_=e-n,S=r-i,B=(b-E)%2===0;A[E]=e,y[b]=r;for(let F=1;F<=m/2+1;F++){let Y=0,ee=0;u=this.ClipDiagonalBound(E-F,F,E,g),f=this.ClipDiagonalBound(E+F,F,E,g);for(let V=u;V<=f;V+=2){V===u||V<f&&A[V-1]<A[V+1]?c=A[V+1]:c=A[V-1]+1,l=c-(V-E)-_;let H=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(A[V]=c,c+l>Y+ee&&(Y=c,ee=l),!B&&Math.abs(V-b)<=F-1&&c>=y[V])return o[0]=c,a[0]=l,H<=y[V]&&F<=1448?this.WALKTRACE(E,u,f,_,b,p,h,S,A,y,c,r,o,l,i,a,B):null}p=this.ClipDiagonalBound(b-F,F,b,g),h=this.ClipDiagonalBound(b+F,F,b,g);for(let V=p;V<=h;V+=2){V===p||V<h&&y[V-1]>=y[V+1]?c=y[V+1]-1:c=y[V-1],l=c-(V-b)-S;let H=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(y[V]=c,B&&Math.abs(V-E)<=F&&c<=A[V])return o[0]=c,a[0]=l,H>=A[V]&&F<=1448?this.WALKTRACE(E,u,f,_,b,p,h,S,A,y,c,r,o,l,i,a,B):null}if(F<=1447){let V=new Int32Array(f-u+2);V[0]=E-u+1,aw.Copy2(A,u,V,1,f-u+1),this.m_forwardHistory.push(V),V=new Int32Array(h-p+2),V[0]=b-p+1,aw.Copy2(y,p,V,1,h-p+1),this.m_reverseHistory.push(V)}}return this.WALKTRACE(E,u,f,_,b,p,h,S,A,y,c,r,o,l,i,a,B)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return aw.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],aw.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return aw.Copy(e,0,i,0,e.length),aw.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(sw.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),sw.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new rN(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();d();function Xst(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(Xst,"isObject");function qte(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(qte,"assertType");function Zst(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(Xst(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(Zst,"safeStringify");var Hte=!1,zbe=!0,Dcr=200,K7=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new iw(e),i=e.getActiveDocument(),o=$R(i);if(!o||!o.isEmpty())return $i.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let _ of e.documents)_.id!==i.id&&(l.push(`RELATED DOC: ${_.getDisplayPath()}`),l.push("```patch"),l.push(...Fcr(_)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new tn(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,h;if(p>0&&p>=f.endLineNumberExclusive){let _=p<c.length;l.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),_&&(l.push(u),h={editRange:new tn(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let m=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),m,r);if(r.isCancellationRequested)return $i.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?$i.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):$i.noEdit({kind:"fetchFailure",error:new Error(Zst(g.err))},n);let{result:A,ttft:y}=g.val;if(y!==void 0&&n.setTtft(y),A.trim().length===0)return $i.noEdit({kind:"noSuggestions"},n);let E=Wte(i.languageId,c,f,void 0,A,h),b=await Jbe(this._parserService,E,i,{requireEditWithinNLines:5});if(b){let _=new os([b]);return $i.edit({edit:_},n)}else return $i.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};K7=Fd([pa(1,SE)],K7);var nN=class extends K7{constructor(r,n){super(nN.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return is.error({kind:"cancel"});let o=await Ybe(this.ID,this._chatMLFetcher,[{role:jbe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:jbe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),is.ok({ignored:a,result:c,ttft:l})}};nN=Fd([pa(0,SE),pa(1,EA)],nN);async function Ybe(t,e,r,n,i){let o=new Fte,a=!1,c,l=o.stream.map(A=>({choices:[{index:0,finish_reason:null,logprobs:null,text:A.delta.text}]})),u=Ncr(l,n),f=e.fetchOne(r,async(A,y,E)=>(typeof c>"u"&&(c=Date.now()),o.update(A,E),a?A.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:h,shouldCancelRequest:m}=await u;m&&(a=!0);let g=await f;return g.type!=="success"?is.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):is.ok({ttft:c,ignored:p,result:h})}s(Ybe,"fetchUntilConvergence");function $R(t){let e=new Gt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:Bcr(t)}s($R,"getOrDeduceSelectionFromLastEdit");function Bcr(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new Ar(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=Gv(a,o),l=o.length-c+1;return new Ar(i,l,i,l)}s(Bcr,"deduceSelectionFromLastEdit");async function Ncr(t,e){let r=Lcr(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(h=>{let m=l[0];return{ignored:c[0]??"",result:m.substring(0,m.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let h of r){if(h.kind==="ignore"){c[h.index]=(c[h.index]??"")+h.text;continue}let m=h.text;if(l[h.index]=l[h.index]??"",l[h.index]+=m,f[h.index]=f[h.index]??"",f[h.index]+=m.replace(/\s/g,""),u[h.index]=u[h.index]??0,u[h.index]+=m.split(`
`).length-1,m.indexOf(`
`)===-1||h.index!==0)continue;if(u[h.index]>i)return p(`too many lines: ${u[h.index]}`);let g=l[h.index];if(n.startsWith(g))continue;let A=g.split(`
`).slice(-4,-1);if(A.length<3||n.indexOf(A.join(`
`)+`
`)<=0)continue;let E=f[h.index].substring(f[h.index].length-o);if(a.indexOf(E)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(Ncr,"fetchCompletionUntilConvergence");function Lcr(t,e){let r=[],n=[];return new b7(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(Lcr,"getTextAfterFirstPattern");function Mcr(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new fA(new tn(n,i),o)}s(Mcr,"createReducedLineEdit");var iN=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Mcr(r,n,i);let o=new os([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,h,m)=>p.map(g=>{let A=h.lines.slice(g.originalStart,g.originalStart+g.originalLength),y=m.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),E=A.join(`
`),b=y.join(`
`),{editDistance:_}=f(E,b);return new Gbe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let h=0;for(let m of p)h+=m.editDistance;return{editDistance:h}},"computeDiffMetrics"),n=!1,i=new V7(this.oldLines,n),o=new V7(this.newLines,n),a=new Y7(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let h of c)u=u.concat(this.oldLines.slice(p,h.originalStart)),u=u.concat(this.newLines.slice(h.modifiedStart,h.modifiedStart+h.modifiedLength)),p=h.originalStart+h.originalLength;u=u.concat(this.oldLines.slice(p))}if(fF(this.newLines,u))return new Vbe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return tat(this.languageId,this.oldLines,u);function f(p,h){let m=new z7(p),g=new z7(h),y=new Y7(m,g).ComputeDiff(),E=0,b=0;for(let B of y)E+=B.originalLength,b+=B.modifiedLength;let _=p.length,S=h.length,P=E+b;return{aChanged:E,bChanged:b,aLength:_,bLength:S,editDistance:P}}}},Gbe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Vbe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new os([this.edit]);{let r=this.groupInHunks();return new os(r.map(n=>{let i=n[0],o=n[n.length-1];return new fA(new tn(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!zbe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>Dcr&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!Kbe(new tn(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new os([this.edit]),i=r(n);this.parseErrorCount=await J7(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=Bte(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>Bte(l,this.languageId)),i=r.map(l=>Bte(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return tat(this.languageId,this.oldLines,e)}};function Kbe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Kbe,"editIsInsideEditWindow");function tat(t,e,r){let i=e.length+1,o=r.slice(0);return new iN(t,e,new tn(1,i),o).resolveDiff()}s(tat,"createPossibleEditFromLines");function Wte(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=eN.fromString(i.trimEnd()),c=o?a.some(y=>y.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((y,E)=>{l.push(new iN(t,e,y,E))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let E=new tn(r.endLineNumberExclusive,e.length+1);E.length>a.length+5||u(E,a)}s(p,"generateEditAllDoc");function h(){for(let y=1;y<a.length;y++){let b=a.slice(a.length-y).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let P=e.slice(_,_+y).join(`
`);b===P&&u(new tn(r.endLineNumberExclusive,_+1),a.slice(0,a.length-y))}}}s(h,"generateEditsUsingOverlappingLines");function m(){if(!o||!c)return;let y=[];for(let E of a){if(E.indexOf(o.omittedMessage)>=0){u(o.editRange,y.map(b=>b));return}y.push(E)}}if(s(m,"generateEditWhenReplyContainsOmittedMessage"),f(),m(),p(),h(),!i.endsWith(`
`)){let y=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...Wte(t,e,r,n,y,o))}return g(l);function g(y){return A(y,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function A(y,E){let b=new Set,_=[];for(let S of y){let P=E(S);b.has(P)||(b.add(P),_.push(S))}return _}}s(Wte,"generatePossibleEdits");async function Jbe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Hte?await J7(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Hte){let p=s(h=>{let m=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(h).apply(m.value)},"applyToDocumentNoShortening");await Promise.all(a.map(h=>h.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,h)=>p.parseErrorCount===h.parseErrorCount?0:p.parseErrorCount==="unknown"?1:h.parseErrorCount==="unknown"?-1:p.parseErrorCount-h.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,h)=>f(p)-f(h)),u.length>0?u[0].edit:null}s(Jbe,"selectBestEdit");function Fcr(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(Fcr,"summariseDocDiff");function rat(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(rat,"summarizeEditsAsUnifiedDiff");async function J7(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(J7,"getParseErrorCount");d();var RE=Me(gA());d();var X7=v0("ITokenizerProvider");var cw=class extends RE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(X7);return new cw(n,i,o,c,r,a.get(EA))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===RE.Raw.ChatRole.System&&f.role===RE.Raw.ChatRole.System){let p=f.content.at(-1),h=u.content.at(0);p&&h&&p.type===RE.Raw.ChatCompletionContentPartKind.Text&&h.type===RE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+h.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:RE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==RE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};cw=Fd([pa(3,X7),pa(4,zC),pa(5,EA)],cw);d();var nat=Me(gA());var $te=class extends nat.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var Xbe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Gt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new C0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},xA=class extends Xbe{constructor(r){super();this.value=r;this._transformer=new FC(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new cn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Ocr(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(Qcr(r))}_validatePosition(r){if(r.line<0)return new Yo(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new Yo(n-1,o)}if(r.character<0)return new Yo(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new Yo(r.line,i):r}};function Ocr(t){return new Yo(t.lineNumber-1,t.column-1)}s(Ocr,"corePositionToVSCodePosition");function Qcr(t){return new cn(t.line+1,t.character+1)}s(Qcr,"vsCodePositionToCorePosition");d();d();function iat(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(iat,"min");d();function Zbe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>Zbe(n,e))}}s(Zbe,"toAstNode");function oat(t,e){let r=O3(e,a=>a.endExclusive>=t.start),n=$g(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Gt(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Gt(o,t.endExclusive)),i}s(oat,"subtractRange");d();d();d();var jte=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=V2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=V2(e),r=V2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=V2(e),r=V2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=V2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new eIe(i,e-a)}};var eIe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var Z7=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=em(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new jte(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=em(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Yo(r.index,Math.min(r.remainder,n))}toRange(e){return new C0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Gt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new ZB(this.validateRange(n.range),n.newText));return new Em(r.map(n=>new tl(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new ZB(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof Yo))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Yo(r,n):e}validateRange(e){return new C0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Gte=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Zh(()=>new Z7(this.text));this._originalPositionOffsetTransformer=new Zh(()=>new Z7(this.originalText));this._text=new Zh(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var tIe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},GR=class extends Gte{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function zte(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),h=f?l.rangeToOffsetRange(f):void 0,m=sat(u,l),g=rIe.fromRootNode(m,p),A=nIe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);h&&A.visitAll(F=>F.node.range.intersectsOrTouches(h)?(F.node.children.length===0&&F.markAsSurviving(),!0):!1),n.push(A),i.push(A.getTextFragment());let y=s(F=>h?F.range.endExclusive<h.start?h.start-F.range.endExclusive:F.range.start>h.endExclusive?3*(F.range.start-h.endExclusive):0:0,"distanceScoreToSelection"),E=new jv(F=>h?F.children.length===0?F.range.intersectsOrTouches(h)?0:Number.MAX_SAFE_INTEGER:iat(F.children.map(Y=>E.get(Y)))+1:0),b=new jv(F=>{let Y=F.parent?b.get(F.parent):Number.MAX_SAFE_INTEGER,ee=E.get(F);return Math.min(Y,ee)}),_=!!e.tryPreserveTypeChecking,S=s(F=>_&&F.node?.kind==="import_statement"?0:100*b.get(F)+F.depth+10*(y(F)/p.length),"costFn"),P=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(P!==void 0){let F=S;S=s(Y=>{let ee=F(Y);return ee===!1?!1:Y.node?P(Y.node,ee,l):ee},"costFn")}let B=A.getDescendantsAndSelf();for(let F of B){if(!F.node.node)continue;let Y=S(F.node);Y!==!1&&o.push({idx:c,node:F,cost:Y})}}o.sort(WI(c=>c.cost,$I));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new GR(u,l.toTextEditFromOriginal(u.getText().length)),p=f,h=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:oat(Gt.ofLength(f.originalText.length),f.edits.edits.map(m=>m.replaceRange)).map(m=>({range:[m.start,m.endExclusive],color:"lime"}))},root:Zbe(h,m=>({label:(m.node.node?.kind||"unknown")+` (${o.find(g=>g.node===m)?.cost})`,range:m.node.range,children:m.childNodes,isMarked:m._surviving}))}),a.push(f)}return a}s(zte,"summarizeDocumentsSyncImpl");function sat(t,e,r=void 0){let n=new Gt(t.startIndex,t.endIndex),i=[],o=new tIe(r,t,n,i,e);for(let a of t.children)i.push(sat(a,e,o));return o}s(sat,"createRemovableNodeFromOverlayNode");var rIe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Gt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Gt(0,e.range.start),o=new Gt(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Gt(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Gt(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return Ucr(this.document,this.range)}getTrailingWs(){return qcr(this.document,this.range)}};function Ucr(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(Ucr,"getLeadingWs");function qcr(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(qcr,"getTrailingWs");var nIe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new lw(this.node.range,this.node.document);if(!this._surviving)return new jR("");let e=Array.from(pF(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof lw&&c.fragment instanceof lw){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new jR(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new jR(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)Hcr(r,i.fragment);return Vte.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},eQ=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new tl(new Gt(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof Vte)for(let l of c.fragments)a(l);else c instanceof jR?i+=c.text:c instanceof lw&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new Em(r)}},jR=class extends eQ{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},lw=class t extends eQ{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Gt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Gt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Gt(this.range.start,r.range.endExclusive),this.originalText):null}},Vte=class t extends eQ{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new jR(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Hcr(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof lw&&e instanceof lw){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(Hcr,"pushFragment");d();var Yte=Me(gA());function tQ(t){if(Array.isArray(t))return t.map(r=>tQ(r));let e=(0,Yte.toMode)(Yte.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(tQ,"rawMessageToCAPI");d();d();var Kte=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new gn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new gn("Invalid child startIndex");if(a.endIndex>r)throw new gn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function cat(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Wcr(o,e),[c]=lat(t,a,void 0);return c.adjust(t,uat(e)),c.toOverlayNode(t,!0)}catch{return new Jte(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(cat,"getStructureUsingIndentation");function lat(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=lat(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new gn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new gn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Jte(n,i,o),r]}s(lat,"createFoldingRangeTree");var Jte=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new gn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=iIe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=iIe(e,o,o,"LINE",[]);a&&n.push(a)}return iIe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function iIe(t,e,r,n,i){let o=t.getOffsetAtPosition(new Yo(e-1,0)),a=r<t.getLineCount()?new Yo(r,0):new Yo(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new Kte(o,c,n,i)}s(iIe,"createOverlayNode");function Wcr(t,e){return $cr(t,uat(e))}s(Wcr,"generateFoldingRegions");function uat(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(uat,"isOffSide");function $cr(t,e){let r=t.getOptions().tabSize,n=new oIe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Gcr(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s($cr,"_computeRanges");var jcr=65535,VR=16777215,aat=4278190080,oIe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>VR||r>VR)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new sIe(e,r)}};function Gcr(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Gcr,"computeIndentLevel");var sIe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>VR||a>VR)throw new Error("startLineNumber or endLineNumber must not exceed "+VR);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&VR}getEndLineNumber(e){return this._endIndexes[e]&VR}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&aat)>>>24)+((this._endIndexes[e]&aat)>>>16);return r===jcr?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function zR(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(zR,"fromUnknown");var xl=Me(gA());var Xte="current-version",Lp="next-version",fat=2,pat=10,hat=.7,Vcr=/```[^\n]*\n/,uw=class extends YB{constructor(r,n,i){super(uw.ID,[o=>new tN(o),o=>new JB(o),o=>new XB(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new ete}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=$R(a),u=l?aIe(a,l):null,f=$R(c),p=f?aIe(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(fat,pat)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new iw(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return $i.noEdit({kind:"unexpected",error:zR(l)},i)}let c=o.getArtificalDelay();return c>0&&await AE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):$i.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return $i.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return $i.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let S={kind:"gotCancelled",message:"afterDebounce"};return $i.noEdit(S,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:h,completionRange:m,convergence:g,activeDocument:A,activeDocumentLines:y}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let E=await Ybe(this.ID,this.fetcher,tQ(p),{convergence:g,ignoreReplyTextBefore:Vcr,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(E.isOk()?"success":E.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),E.isOk()&&typeof E.val.ttft=="number"&&o.setTtft(E.val.ttft),i.isCancellationRequested)return $i.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(E.isError())return E.err.kind==="cancel"?$i.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):$i.noEdit({kind:"fetchFailure",error:zR(E.err.err)},o);let b=E.val.result;if(b.length===0){let S=`<${Lp}>
`,P=E.val.ignored.indexOf(S);P>=0&&(b=E.val.ignored.substring(P+S.length))}if(b=zcr(b),b.trim().length===0)return $i.noEdit({kind:"noSuggestions"},o);let _;if(c&&l&&u){let S=Ycr(A,c,l,b);if(!S||S.edits.length===0)return $i.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let P=Kcr(c,S);if(P.edits.length===0)return $i.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Hte){let Y=await J7(this._parserService,A.languageId,A.documentAfterEditsNoShortening.value),ee=P.apply(A.documentAfterEditsNoShortening.value);if(await J7(this._parserService,A.languageId,ee)>Y)return $i.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=Jcr(A,P);let B=_.edits[0].lineRange.startLineNumber,F=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Kbe(new tn(B,F),u))return $i.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let S=Wte(A.languageId,y,h,m,b,void 0),P=await Jbe(this._parserService,S,A,{requireEditWithinNLines:100});if(!P)return $i.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new os([P])}return Xcr(A,_)?$i.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Zcr(A,_)?$i.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):elr(A,_)?$i.noEdit({kind:"filteredOut",message:"uncategorized"},o):tlr(A,_)?$i.noEdit({kind:"filteredOut",message:"uncategorized"},o):$i.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await AE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=$R(i);if(l===null)return;let u=aIe(i,l),f=new xA(i.documentAfterEditsNoShortening.value),p=await ilr(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:h,lastEditableLineInShortenedDocument:m,editWindow:g}=function(){let ee=rlr(i.documentAfterEditsLines,l.startLineNumber),V=Math.max(1,Math.min(ee,l.startLineNumber-fat)),H=l.startLineNumber-V,U=Math.min(c.length,l.endLineNumber+pat),X=U-l.endLineNumber,K=u.line-H,j=u.line+X,W=new C0(K,0,j,f.getLineLength(j));return{firstEditableLineInShortenedDocument:V,lastEditableLineInShortenedDocument:U,editWindow:W}}(),A=zte(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],y=new tn(1,h),E=new tn(h,m+1),b=A.text,{messages:_,prediction:S,editWindowIsInPrompt:P}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),B=b.split(/\r\n|\r|\n/).length,F=A.projectRange(g),Y=A.positionOffsetTransformer.toOffsetRange(F);return{summarizedEditWindow:A,editWindowAllowedEditLineRange:new tn(F.start.line+1,F.end.line+2),allowedEditLineRange:new tn(h,m+1),messages:_,prediction:S,editWindowIsInPrompt:P,activeDocument:i,activeDocumentLines:c,completionPrefixRange:y,completionRange:E,convergence:b,expectedConvergencePrefix:Y.start,maxCompletionLineCount:B+20}}async _renderPrompt(r,n){let o=await cw.create(this._instantiationService,lIe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(nre)?.prediction,c=!!o.metadata.get(ere);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};uw=Fd([pa(0,EA),pa(1,SE),pa(2,zC)],uw);function zcr(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${Lp}>`,`
`),t=e(t,`\`\`\`
</${Lp}>`,`
`),t=e(t,`</${Lp}>`,`
`),t}s(zcr,"removeSuffixFromReply");function aIe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new xA(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(aIe,"getCursorPositionInOuterDocument");function Ycr(t,e,r,n){let i=eN.fromString(e.text),o=eN.fromString(n.trimEnd()),c=new iN(t.languageId,i,new tn(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=zbe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Ycr,"generateSummarizedEditWindowEdit");function Kcr(t,e){let r=e.toEdit(new Vl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Kcr,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Jcr(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ia.replace(new Gt(a,a+i.replaceRange.length),i.newText)}),n=new bd(t.documentAfterEdits,ia.create(r));return os.fromEdit(n)}s(Jcr,"convertOuterDocumentEditToProjectedEdit");function Xcr(t,e){let r=e.toEdit(t.documentAfterEdits),n=mat(t.documentAfterEdits.value,r),i=new Zte,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(mat(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Xcr,"editWouldUndo");function Zcr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!vat(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Zcr,"editWouldDeleteWhatWasJustInserted");function elr(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!vat(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(Wbe(i,t.languageId))return!0}return!1}s(elr,"editWouldDeleteAComment");function tlr(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return cIe(o,i)/i.size>.8}s(tlr,"editWouldDuplicateExistingLines");function vat(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(vat,"editIsDeletion");function rlr(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(rlr,"findLineNumberAboveWithContent");var Zte=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Aat(this.inserted,e.inserted),Aat(this.deleted,e.deleted))}isUndoneBy(e){let r=yat(e.inserted,e.deleted),n=yat(e.deleted,e.inserted),i=cIe(n,this.inserted),o=cIe(r,this.deleted);return n.size>6&&i/n.size>hat||r.size>6&&o/r.size>hat}};function mat(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of gat(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of gat(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(nlr(c.newText,l.newText)))}return new Zte(r,n)}s(mat,"getInformationDelta");function nlr(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(nlr,"trimOverlap");function gat(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(gat,"to4grams");function Aat(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Aat,"setUnion");function yat(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(yat,"setMinus");function cIe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(cIe,"setIntersectionCount");async function ilr(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||cat(new xA(e.getText()),e.languageId,void 0)}s(ilr,"getStructure");var lIe=class extends xl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${Lp}>`,`\`\`\`${o}`,`${i}`,"```",`</${Lp}>`].join(`
`),c=(0,xl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new nre(a)}),vscpp(xl.SystemMessage,{priority:1e3},vscpp($te,null),this._getInstructions()),vscpp(xl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp(tre,{doc:l}))):vscpp(xl.Chunk,{priority:100+u},vscpp(tre,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp(rre,{doc:l}))):vscpp(xl.Chunk,{priority:200+u},vscpp(rre,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new ere}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Xte,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Xte,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Xte,"> and </",Xte,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",Lp,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",Lp,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",Lp,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",Lp,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",Lp,">IDENTICAL</",Lp,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",Lp,">.")}}},ere=class extends xl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},tre=class extends xl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},rre=class extends xl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...rat(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},nre=class extends xl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function Eat(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(Eat,"findIndexes");function olr(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=Eat(r,e[o]).slice(0,n);for(let p of a){let h=!1,m=o;for(;m>=0&&p>=0;){let g=e[m],A=r[p];if(g===A)m--,p--;else if(A.trim()==="")p--;else{h=!0;break}}if(!h&&p===-1&&m!==e.length-1){e=e.slice(0,m+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=Eat(t,e[c]).slice(-n).reverse();for(let p of f){let h=!1,m=c;for(;m<e.length&&p<t.length;){let g=e[m],A=t[p];if(g===A)m++,p++;else if(A.trim()==="")p++;else{h=!0;break}}if(!h&&p===t.length&&m!==0){e=e.slice(m);break}else e=[...l]}return e}s(olr,"deduplicateEditRegion");function xat(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:olr(i,r.split(/\r?\n/),o).join(`
`)}}s(xat,"postProcessUpdatedEditWindow");d();var ire=Me(gA());function bat(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===ire.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===ire.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(bat,"getTextPart");function slr(t){return{type:ire.Raw.ChatCompletionContentPartKind.Text,text:t}}s(slr,"toTextPart");function uIe(t){return[slr(t)]}s(uIe,"toTextParts");d();var ore=v0("IDiffService");var mIe=Me(gA());d();var sre="<|cursor|>",YR="<|code_to_edit|>",oN="<|/code_to_edit|>",Tat="<|area_around_code_to_edit|>",wat="<|/area_around_code_to_edit|>",alr="<|current_file_content|>",clr="<|/current_file_content|>",llr="<|edit_diff_history|>",ulr="<|/edit_diff_history|>",dlr="<|recently_viewed_code_snippets|>",flr="<|/recently_viewed_code_snippets|>",plr="<|recently_viewed_code_snippet|>",hlr="<|/recently_viewed_code_snippet|>",_at=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${YR} and ${oN} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${sre}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${YR} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${YR} and ${oN} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${YR} or ${oN} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Sat(t,e,r,n){let i=t.getActiveDocument(),o=Alr(t,n),a=mlr(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${dlr}
${o}
${flr}

${alr}
current_file_path: ${c}
${e}
${clr}

${llr}
${a}
${ulr}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${sre}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${YR}\` and \`${oN}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Sat,"getUserPrompt");function mlr(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=glr(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(mlr,"getEditDiffHistory");function glr(t){let e=[],r=os.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(glr,"generateDocDiff");function Iat(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[plr,n,e,hlr].join(`
`)}s(Iat,"formatCodeSnippet");function Alr(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((y,E)=>`${E+1}|${y}`));let h=p.map(y=>e(y)+1),m=e(Iat(f.path,"",!0)),g=h.reduce((y,E)=>y+E,0)+m,A=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=h.pop()||0,A=!0;p.length>0&&(l+=g,c.push(Iat(f.path,p.join(`
`),A)))}return c.join(`

`)}s(Alr,"getRecentCodeSnippets");function dIe(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(dIe,"truncateCode");var Rat=2,kat=10,fIe=15,pIe=1e3,hIe=2e3;var bm=class extends YB{constructor(r,n,i){super(bm.ID,[o=>new tN(o),o=>new JB(o),o=>new XB(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new iw(r);try{if(r.xtabEditHistory.length===0)return $i.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new $i(o,i.build(o))}catch(o){return $i.noEdit({kind:"unexpected",error:zR(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=$R(o);if(a===null)return is.error({kind:"uncategorized",error:zR(new Error("NoSelection"))});let c=s(ae=>Math.floor(ae.length/4),"computeTokens"),l=new cn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+sre+f.substring(u),h=l.lineNumber-1,m=p.split(/\r?\n/),g=Math.max(0,h-fIe),A=Math.min(m.length,h+fIe+1),y=Rat,E=kat,b=Math.max(0,h-y),_=Math.min(m.length,h+E+1),S=o.documentAfterEdits.getTransformer().getOffsetRange(new Ar(b,0,_,0)),P;P=f.split(/\r?\n/).slice(b,_);let B=[b,_],F=m.slice(b,_),Y=[Tat,...m.slice(g,b),YR,...F,oN,...m.slice(_,A),wat].join(`
`),ee=Y,V;{let ae=c(Y),te=0;if(ae>=hIe)V=Y,te=g;else{let pe=Math.floor((hIe-ae)/2),[Ae]=dIe(m.slice(0,g),!0,pe),[,Oe]=dIe(m.slice(A),!1,pe);te=Math.max(Ae,h-pIe);let Te=Math.min(Oe+A,h+pIe+1);V=[...m.slice(te,g),Y,...m.slice(A,Te)].join(`
`)}}let H=Sat(r,V,ee,c),U=[{role:mIe.Raw.ChatRole.System,content:uIe(_at)},{role:mIe.Raw.ChatRole.User,content:uIe(H)}];if(i.setPrompt(U),await this.debounce(i),n.isCancellationRequested)return is.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let X=new nD;i.setFetchStartedAt();let K,j=await this._endpointProvider.getEndpointInfo(this.ID),W=await this._chatMLFetcher.fetchOne(tQ(U),async(ae,te,pe)=>{K===void 0&&(K=X.elapsed())},{id:j.id,name:j.name},{temperature:0},n);if(W.type==="canceled")return is.error({kind:"gotCancelled",message:"afterFetchCall"});if(W.type==="quotaExceeded")return is.error({kind:"quotaExceeded"});if(W.type!=="success")return is.error({kind:"fetchFailure",error:zR(W)});K&&i.setTtft(K),i.setResponse(W.value);let J=bm.getBacktickSection(W.value);return await this.generateReturnEditFormat(o,S,P.join(`
`),J,B,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=xat(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(h=>new fA(new tn(a[0]+h.original.startLineNumber,a[0]+h.original.endLineNumberExclusive),f.slice(h.modified.startLineNumber-1,h.modified.endLineNumberExclusive-1)));return p.length<1?is.error({kind:"noSuggestions"}):is.ok({editWindow:n,edit:new os(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,bm.DEBOUNCE_MS-n);r.setDebounceTime(i),await AE(i)}};bm=Fd([pa(0,ore),pa(1,EA),pa(2,Qte)],bm);d();var are=class t extends Es{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new DF,Jh(this,r.openDocuments,(i,o)=>{o.add(Vv(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;jl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new bd(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,h=os.fromEdit(p),m=os.fromEdit(f);if(!m.isEmpty()&&!h.isEmpty()&&h.edits[0].lineRange.startLineNumber===m.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),A=new bd(p.base,g);this.pushToHistory(i.id,A)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var gIe=Me(require("crypto"));var rQ=gIe.randomUUID.bind(gIe);var Qat=Me(gA()),EIe=Me(S7());d();var cre=v0("ISnippyService");d();d();var nQ=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),lre=65;function Clr(t){let e=0,r;nQ.lastIndex=0;do if(r=nQ.exec(t),r&&(e+=1),e>=lre)break;while(r);return e}s(Clr,"lexemeLength");function vlr(t,e){let r=0,n;nQ.lastIndex=0;do if(n=nQ.exec(t),n&&(r+=1,r>=e))return nQ.lastIndex;while(n);return t.length}s(vlr,"offsetFirstLexemes");function Pat(t,e){let r=t.split("").reverse().join(""),n=vlr(r,e);return r.length-n}s(Pat,"offsetLastLexemes");function AIe(t){return Clr(t)>=lre}s(AIe,"hasMinLexemeLength");d();d();var Dat;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Dat||={});var yIe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(yIe||={});var Bat;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Dat.is)}e.is=t,s(t,"is")})(Bat||={});var CIe;(e=>{function t(r){if(yIe.is(r))return is.error(r);if(Bat.is(r))return is.ok(r)}e.to=t,s(t,"to")})(CIe||={});var Nat;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Nat||={});var Lat;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Lat||={});var Mat;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Mat||={});var Fat;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Nat.is)&&"page_info"in r&&Lat.is(r.page_info)&&"license_stats"in r&&Mat.is(r.license_stats)}e.is=t,s(t,"is")})(Fat||={});var vIe;(e=>{function t(r){if(yIe.is(r))return is.error(r);if(Fat.is(r))return is.ok(r)}e.to=t,s(t,"to")})(vIe||={});var ure=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,CIe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,vIe.to)}async fetch(e,r,n){let i=this.ctx.get(zn),o=await this.ctx.get(Gr).getToken(),a=Ry(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...F0(this.ctx),"X-GitHub-Api-Version":hy},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var Oat=new _t("[CODE REFERENCING]"),sN=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(ure,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(vr).getTextDocument({uri:e.toString()});if(!a){Oat.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(m){throw m}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async m=>{let g=await this.fetcher.fetchFilesForMatch(m.cursor);if(!g||g.isError())return;let{file_matches:A,license_stats:y}=g.val;return{match:m,files:A,licenseStats:y}}),h=(await Promise.all(f)).filter(m=>!!m);if(h.length===0){Oat.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let m of h){let g=new Set(Object.keys(m.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let A=Array.from(g).sort(),y=`${m.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,E={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:y,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:A.map(b=>({license:b,url:`${m.match.github_url}`}))};await this.ctx.get(rf).handleIPCodeCitation(this.ctx,E)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=ia.single(r),o=n.getNewRanges().reduce((h,m)=>h.join(m)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!AIe(l)){let h=a.value.slice(0,o.start),m=Pat(h,lre);c=m,l=a.value.slice(m,o.start+r.newText.length)}if(!AIe(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};sN=Fd([pa(1,zC)],sN);async function Uat(t){let e=new Mte;return e.define(Ote,new xIe(t)),e.define(ore,new g0),e.define(SE,new Np(bIe,[!0])),e.define(cre,new Np(sN,[t])),e.define(EA,await TIe.Create(t)),e.define(X7,new Np(wIe)),e.define(Qte,new IIe(t)),e.seal()}s(Uat,"createInstantiationService");var xIe=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=Fr.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},bIe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},IIe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==bm.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Ot).updateExPValuesAndAssignments();return{id:this.ctx.get(Ot).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},TIe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await $o.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=rQ(),l=await this.ctx.get(t0).fetchAndStreamChat(this.ctx,a,wy.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:bat(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},wIe=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new dre("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new dre(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},dre=class{constructor(e){this.mode=Qat.OutputMode.Raw;this.tokenizer=vo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===EIe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===EIe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var fre=class extends Es{constructor(r){super();this.workspace=r;this._garbageCollector=new RIe(20);this._documentCaches=new Map;Jh(this,r.openDocuments,(n,i)=>{let o=new _Ie(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(Vv(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(vc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},_Ie=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new SIe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},SIe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},RIe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var iQ=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},pre=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new iQ("",null),this._tail=new iQ("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new iQ(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var hre=class extends Es{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new pre(50);Jh(this,r.openDocuments,(n,i)=>{let o=new kIe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(Vv(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(vc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},kIe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var mre=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},aN=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:h,activeDocumentLanguageId:m,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:y,isShown:E,acceptance:b,logProbThreshold:_,documentsCount:S,editsCount:P,activeDocumentEditsCount:B,promptLineCount:F,promptCharCount:Y,isDefaultEndpoint:ee,hadLowLogProbSuggestion:V,nonTerminatingError:H,nEditsSuggested:U,kthEditPicked:X,lineDistanceToMostRecentEdit:K,debounceTime:j,hasNextEdit:W,nextEditLogprob:J,maxLinesPerEdit:ie,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchTime:Oe,fetchResult:Te,fetchError:Je,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:h,activeDocumentLanguageId:m,acceptance:b,nonTerminatingError:H,noNextEditReasonKind:ae,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:Ae,fetchResult:Te,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(ee),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:A,wasPreviouslyRejected:this._boolToNum(y),isShown:this._boolToNum(E),logProbThreshold:_,documentsCount:S,editsCount:P,activeDocumentEditsCount:B,promptLineCount:F,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(V),nEditsSuggested:U,kthEditPicked:X,lineDistanceToMostRecentEdit:K,debounceTime:j,fetchStartedAfterMs:Fe,fetchTime:Oe,hasNextEdit:this._boolToNum(W),nextEditLogprob:J,maxLinesPerEdit:ie})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};aN=Fd([pa(0,Ote)],aN);d();var cN=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var KR=!1,qat=300,lN=class extends Es{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new fre(this._workspace);this._nextEditCache=new hre(this._workspace);this._recentlyShownCache=new BIe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Jh(this,this._workspace.openDocuments,(u,f)=>{f.add(KAe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(aN)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new mre(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??rQ());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,h,m;if(l)f=l[0],m=l[1],p=a,c.setHeaderRequestId(m.headerRequestId),c.setIsFromCache(),await AE(qat);else if(u)f=u.edit,m=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(m.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await AE(qat);else{m=new DIe,c.setHeaderRequestId(m.headerRequestId);let y=o.value.get();p=y;let E=await this.fetchNextEdit(m,r,c,i),b=y.value!==o.value.get().value;if(E.isError())switch(E.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":h=E.err.error;break;default:PF(E.err)}else if(!b){let _=E.val;_.isEmpty()||(f=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,m))}}if(c.markEndTime(),h)throw this._telemetrySender.sendTelemetry(c),h;if(!f)return this._telemetrySender.sendTelemetry(c),new cN(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new cN(void 0);jl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",A=new cN({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(A,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,m]),A}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=ia.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=PIe(r.lastEdits.swap(c)),f=l.compose(),p=new GR(new xA(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),h=new Vl(o.text),g=$C.fromEdit(new bd(h,f)).removeCommonSuffixPrefixLines(),A=l.edits.at(-1)?.getNewRanges().at(0),y;A&&(y=new Vl(p.text).getTransformer().getRange(A));let E=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),_=s(F=>{let ee=new $C(new Vl(p.text),F).toEdit();return Hat(ee,p)},"toEditOnDocumentAfterEditsNoShortening"),S=s(F=>p.projectBack(F),"toOffsetOnDocumentAfterEditsNoShortening"),P=s(F=>p.project(F),"toProjectedOffset"),B=new $7(r.docId,b,r.languageId,g.base.getLines(),g.edit,y,h,l,i,_,S,P,r.lastEdit.base.getTextLength().lineCount,a,E);return{recentEdit:r.lastEdit,nextEditDoc:B,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return is.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=PIe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(F=>this._shortenDocument(F,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),h=new Pte(r.headerRequestId,u.map(F=>F.nextEditDoc),c.idx,p,this.nextEditOptions),m=this._findExistingPendingRequest(h),g,A;if(m){g=m,KR&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(m.id),i.setIsFromCache(),i.setRequest(g);let F=this._hookupCancellation(g,o);try{A=await g.result}finally{F.dispose()}}else{g=h,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let F=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let Y=this._hookupCancellation(g,o);try{A=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(A)}catch(ee){throw g.setResultError(ee),ee}finally{Y.dispose(),F()}}i.setStatelessNextEditTelemetry(A.telemetry);let y=A.nextEdit;if(y.isError())return y;let E=y.val.edit;if(E.edits.length===0)return is.error({kind:"noSuggestions"});let _=new $C(new Vl(f.projectedDocument.text),E).toEdit(),S=Hat(_,f.projectedDocument),P=_.edits.length===S.edits.length?y.val.permutation:void 0,B=S.decompose(P);return is.ok(B)}_hookupCancellation(r,n){let i=new Du,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new FB);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){KR&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){KR&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){KR&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}KR&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(vc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){qte(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new GR(new xA(r.base.value),new Em([])),clippedRange:new tn(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Gt(0,0)),o=tn.fromRange(i);function a(p,h){return new tn(p.startLineNumber-h,p.endLineNumberExclusive+h)}s(a,"extendRange");let c=new tn(1,n.textLength.lineCount+1),l=PIe(c.intersect(a(o,100))),u=tn.subtract(c,l);return{document:new GR(new xA(r.base.value),new Em(u.map(p=>tl.delete(n.getOffsetRange(new Ar(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new W7("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await Ilr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new xA(n.base.value),a=n.edit.edits.at(0)?.range??new Gt(0,0),c;if(n.edit.edits.length!==0){let m=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Gt(m.range.start,g.range.endExclusive))}let l=Wat(o.offsetRangeToRange(a)),u=zte(200*50,{costFnOverride:s((m,g,A)=>{let y=Wat(A.offsetRangeToRange(m.range)),E=blr(l,y);return E>100?!1:E},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,h=new tn(p,p+u.lineCount);return{document:u,clippedRange:h}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};lN=Fd([pa(4,SE),pa(5,zC),pa(6,cre)],lN);function Hat(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return ia.fromOffsetEdit(r)}s(Hat,"projectBackEdit");function Wat(t){return new tn(t.start.line+1,t.end.line+1)}s(Wat,"lineRangeFromVSCodeRange");function blr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(blr,"lineRangeDist");async function Ilr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(Ilr,"getStructure");function PIe(t){if(!t)throw new gn("expected value to be defined, but it was not");return t}s(PIe,"assertDefined");var DIe=class{constructor(){this.headerRequestId=rQ()}static{s(this,"NextEditFetchRequest")}},BIe=class{constructor(){this._cache=new OY(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};d();d();d();d();var JR=0;function gre(t){return t===0}s(gre,"lengthIsZero");var Mp=2**26;function uN(t,e){return t*Mp+e}s(uN,"toLength");function kE(t){let e=t,r=Math.floor(e/Mp),n=e-r*Mp;return new Gl(r,n)}s(kE,"lengthToObj");function oQ(t,e){let r=t+e;return e>=Mp&&(r=r-t%Mp),r}s(oQ,"lengthAdd");function $at(t,e){return t.reduce((r,n)=>oQ(r,e(n)),JR)}s($at,"sumLengths");function NIe(t,e){return t===e}s(NIe,"lengthEquals");function sQ(t,e){let r=t,n=e;if(n-r<=0)return JR;let o=Math.floor(r/Mp),a=Math.floor(n/Mp),c=n-a*Mp;if(o===a){let l=r-o*Mp;return uN(0,c-l)}else return uN(a-o,c)}s(sQ,"lengthDiffNonNegative");function jat(t,e){let r=t,n=Math.floor(r/Mp),i=r-n*Mp,o=e,a=Math.floor(o/Mp),c=o-a*Mp;return new Ar(n+1,i+1,a+1,c+1)}s(jat,"lengthsToRange");d();var dN=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${kE(this.startOffset)}...${kE(this.endOffset)}) -> ${kE(this.newLength)}`}};function Vat(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new MY(Gat(t)),n=Gat(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(h=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!gre(u);){let[p,h]=i.splitAt(u);f.push(p),u=sQ(p.lengthAfter,u),i=h??r.dequeue()}return gre(u)||f.push(new aQ(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&NIe(a[a.length-1].endOffset,u)){let h=a[a.length-1];a[a.length-1]=new dN(h.startOffset,f,oQ(h.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=JR;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=$at(f,m=>m.lengthBefore),h=oQ(l,p);c(l,h,u.lengthAfter),l=h}else for(let p of f){let h=l;l=oQ(l,p.lengthBefore),p.modified&&c(h,l,p.lengthAfter)}}return a}s(Vat,"combineTextEditInfos");var aQ=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=sQ(e,this.lengthAfter);return NIe(r,JR)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,JR,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${kE(this.lengthBefore)} -> ${kE(this.lengthAfter)}`}};function Gat(t){let e=[],r=JR;for(let n of t){let i=sQ(r,n.startOffset);gre(i)||e.push(new aQ(!1,i,i));let o=sQ(n.startOffset,n.endOffset);e.push(new aQ(!0,o,n.newLength)),r=n.endOffset}return e}s(Gat,"toLengthMapping");var cQ=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Are(n.range,Gl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=kE(n.newLength);return new Are(jat(n.startOffset,n.endOffset),new Gl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new dN(uN(e.range.startLineNumber-1,e.range.startColumn-1),uN(e.range.endLineNumber-1,e.range.endColumn-1),uN(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=Vat(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return Ar.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Are=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var yre=class{constructor(e){this.documents=e;jl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Cre=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new bd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var vre=class extends Es{constructor(){super();this.branch=Yg("branchName",void 0);this._register(zAe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var xre=class extends Es{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new MIe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new vre;this._register($2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=qB(),this._documentState.forEach(o=>o.applyAllEdits()))})),Jh(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new LIe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(Vv(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(vc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new yre(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=qB()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},LIe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Vl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=HB.fromEdit(e,this._currentValue),i=cQ.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return Ere(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&Tlr(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=qB(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:qB()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new WC(this._edits.map(o=>o.edit));return{history:new Cre(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=ia.empty,o=cQ.empty,a,c=0,l=ia.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(qB()-u.instant>10*60*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();qte(p,"we only compose non-empty Edits");let h=p.endLineNumber-p.startLineNumber;if(r>0&&h>r)break;let m=Ere(u.textLengthEdit.edits,P=>P.range.endLineNumber-P.range.startLineNumber+P.newLength.lineCount);if(m>t.MAX_EDITED_LINES_PER_EDIT||Ere(u.edit.edits,P=>P.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Ere(u.edit.edits,P=>P.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let P=ia.trySwap(u.edit,l);if(P)l=P.e1;else{if(m>=2)break;l=u.edit.compose(l)}}let y=u.edit.inverseOnString(n.value);n=n.apply(y);let E=u.edit.compose(i),b=os.fromEdit(new bd(n,E)),S=new $C(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(S>e)break;c=S,i=E,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new WC(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Ere(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Ere,"sum");function Tlr(t,e){let r=e.getNewRanges();return t.edits.every(n=>wlr(n.range,r))}s(Tlr,"editExtends");function wlr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(wlr,"doesTouch");var MIe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var zat=10,bA=class{constructor(e){this.lastResultsById=new Or(zat);this.lastResultsByUri=new Or(zat);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=CA.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(vr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=gr(),h={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,h),this.lastResultsByUri.set(e,h),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Uat(this.ctx),r=!1;try{let a=await this.ctx.get(Ot).updateExPValuesAndAssignments();r=_lr(this.ctx,a)}catch(a){console.error("Error updating ExP values and assignments:",a)}let n=e.createInstance(r?bm:uw),i=this.ctx.get(Kg),o=new xre(i);return await a2.catch(()=>{}),e.createInstance(lN,i,n,o,new are(i))}};function _lr(t,e){let r=Ao(t,Qt.NESXTab);return r!==void 0?r:t.get(Ot).enableNESXTab(e)}s(_lr,"shouldUseXTab");d();var Yat=Me(pi());var bre=class extends Kg{constructor(r){super();this._openDocuments=Yg(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(vr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=CA.create(r);return this.addDocument({id:o,initialValue:i,languageId:G2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=CA.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=CA.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=CA.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new FIe(r.id,new Vl(r.initialValue??""),[],r.languageId??G2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(vr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},FIe=class extends WK{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new cn(e.lineNumber+1,e.column+1));this.updateSelection([new Gt(r,r)])}editFromLspContentChanges(e){return new WC(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(Yat.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new cn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new cn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new gn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return ia.replace(new Gt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var Kat=require("crypto"),YC=Me(require("fs/promises")),Jat=require("os"),PE=Me(require("path"));var DE=class{constructor(e){this.ctx=e;this.logger=new _t("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=PE.extname(__filename)===".ts"?PE.resolve(__dirname,"../../../packages/ripgrep/bin"):PE.resolve(__dirname,"./bin"),o=PE.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await YC.readFile(o),c=(0,Kat.createHash)("sha256").update(a).digest("hex"),l=PE.join((0,Jat.homedir)(),".cache/pkg",c);await YC.mkdir(l,{recursive:!0});let u=Ui(dl(o)),f=PE.join(l,u);try{await YC.stat(f)}catch{await YC.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await YC.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var Xat=require("child_process"),OIe=require("perf_hooks");var BE=new _t("ripgrepProcessManager"),IA=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,BE.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){BE.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){BE.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){BE.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){BE.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}BE.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:wee(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);BE.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=OIe.performance.now();BE.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,Xat.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=OIe.performance.now()-r;BE.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var fN=class extends nC{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var Zat=100,ect=1e3*60*5;function tct(t){let e=new QIe(t);t.get(bc).registerContextProvider(e),t.get(oC).add(e.id)}s(tct,"registerRelatedFilesShim");var QIe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new L_(Zat,ect);this.relatedFilesCache=new L_(Zat,ect);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Ot).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await tJ(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){iT(this.ctx,o,"relatedFilesShim")}}};d();d();d();var rct=Me(require("node:events"));var Ire="onWorkspaceWatcherChanged";var Tre=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new rct.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Ire,ud(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Ire,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Ire,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Ire,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var Td=class{constructor(e){this.ctx=e;this.watchers=new Or(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Vr.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var pN=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},Slr="workspaceLifecycleManager",wd=new _t(Slr),KC=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ha(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?wd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(wd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):wd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);wd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(Sp).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(vr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){wd.debug(r,"No workspaces to add.");return}wd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];wd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));wd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));wd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));wd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){wd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(Td).terminateWatching(c);for(let u of this.activeListeners)wd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.onWorkspaceRemoved(c)}for(let c of o){if(!c.uri)continue;wd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(Td);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){wd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.onWorkspaceSubfoldersTerminated(c,u)}for(let f of this.activeListeners)wd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.onFileChange.bind(f))}}for(let c of this.activeListeners)for(let l of o)wd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.onWorkspaceAdded(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(Td).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function wre(t){t.set(KC,new KC(t))}s(wre,"setupWorkspaceLifecycleListener");d();var ict=require("child_process");var _re=class extends Cm{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,ict.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){Wee.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=ys(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?yE.branch(o):yE.detachedHead()}}extraArgs(){return[]}};d();var Sre=class extends Cm{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(bo),i=qo(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;Wee.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return yE.branch(r)}else return this.isCommitSha(e)?yE.detachedHead():yE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};d();d();var Rre=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var Rlr=64;var fw={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},JC={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},UIe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,Rlr)}},dw=class extends UIe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ni=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},XR=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},ZR=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var uo=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},oct=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),kre=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(kre||{}),sct=I.Object({result:I.Enum(kre)});var Im=class extends dw{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:fw,type:"shared"})}};d();var klr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),Plr=new Map;for(let[t,e]of klr)Plr.set(e,t);d();function hN(t){return`[${Ui(t)}](${t})`}s(hN,"formatUriForFileWidget");function XC(t){let e=Dlr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(XC,"resolvePathInput");function Dlr(t){if(t.startsWith("/")||cct()&&Nlr(t)||cct()&&t.startsWith("\\\\"))return dl(t)}s(Dlr,"resolveFsUri");function cct(){return process.platform==="win32"}s(cct,"isWindows");function Blr(t){return t>=65&&t<=90||t>=97&&t<=122}s(Blr,"isWindowsDriveLetter");function Nlr(t){return Blr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(Nlr,"hasDriveLetter");function lQ(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Ni?r.value:r instanceof ZR?"":r instanceof XR?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(lQ,"parseToolResultToString");function Pre(t){let{content:e}=t;return{message:lQ(e)}}s(Pre,"formatToolErrorResult");function lct(t){let{content:e}=t;return{data:e.map(r=>r instanceof Ni?{type:"text",value:r.value}:r instanceof ZR?{type:"text",value:"<unsupported>"}:r instanceof XR?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(lct,"formatToolSuccessResult");var Dre=class extends Im{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new uo([new Ni(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=XC(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new OB(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.turn.resolvedModelConfiguration?.modelFamily??r.turn.userRequestedModel},n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(_d).getToolByNameAndProvider("insert_edit_into_file",JC);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(_d).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;if(i){let f=await xc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,o)})}let a=lQ(n.content),c=x3({uri:XC(r.input.filePath),languageId:"UNKNOWN"}),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new kp({code:a,languageId:c,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new uo([new Ni(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i){vje(e.ctx,"agentPanel",{requestSource:i?.requestSource??"",chatRequestModel:i?.chatRequestModel??"",mapper:i?.mapper??"",headerRequestId:i?.headerRequestId??""},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=XC(n.filePath);return{progressMessage:`Editing ${hN(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var uct=new _t("findFilesTool"),Bre=class t extends Im{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new uo([new Ni("Cancelled")],"cancelled");i=await e.ctx.get(DE).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new uo([new Ni("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(IA),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{uct.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let A=await l.execute(i,["--files","-g",o],n,{cwd:$a(g.uri)},t.timeOutInSeconds*1e3);uct.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${A}`),u[g.uri.toString()]=A.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>`${$a(qo(g.uri,y))}`)}catch(A){let y=A instanceof Error?A.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${y}`)}});try{await Promise.all(f)}catch(g){let A=g instanceof Error?g.message:"An unknown error occurred";return new uo([new Ni(A)],"error")}let p=[],h=a;for(;h>0;){let g=!1;for(let A in u)u[A].length>0&&h>0&&(p.push(u[A].shift()),h--,g=!0);if(!g)break}let m=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new uo([new Ni(m)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new uo([new Ni(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var dct=new _t("findTextInFilesTool"),Nre=class t extends Im{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new uo([new Ni("Cancelled")],"cancelled");i=await e.ctx.get(DE).resolvePath()}catch(y){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(y)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new uo([new Ni("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(IA),p={},h=u.map(async y=>{if(n.isCancellationRequested)throw new Error("Canceled");try{dct.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${y.uri.toString()}`);let E=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",$a(y.uri)],b=await f.execute(i,E,n,{cwd:$a(y.uri)},t.timeOutInSeconds*1e3);dct.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${y.uri.toString()} with results: ${b}`),p[y.uri.toString()]=b.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(E){let b=E instanceof Error?E.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${y.uri.toString()}: ${b}`)}});try{await Promise.all(h)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";return new uo([new Ni(E)],"error")}let m=[],g=l;for(;g>0;){let y=!1;for(let E in p)p[E].length>0&&g>0&&(m.push(p[E].shift()),g--,y=!0);if(!y)break}let A=m.length===0?`Searched text for ${o}, no results`:m.length===1?`Searched text for: ${o}, 1 result
${m[0]}`:`Searched text for: ${o}, ${m.length} results
${m.join(`
`)}`;return new uo([new Ni(A)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new uo([new Ni(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var Lre=class extends Im{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=XC(i),c=await e.ctx.get(bo).readDirectory(o.toString());return c.length===0?new uo([new Ni("Folder is empty")],"success"):new uo([new Ni(c.map(([l,u])=>`${l}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=XC(e.input.path);return{progressMessage:`Reading directory ${hN(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var Mre=class extends Im{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=XC(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(Cn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new kp({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new uo([new Ni(f.renderAsString(`
`))],"success")}else return new uo([new Ni(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new uo([new Ni(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=XC(n.filePath);return{progressMessage:`Reading file ${hN(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function fct(){return[new Lre,new Mre,new Dre,new Bre,new Nre]}s(fct,"getAllClsTools");var _d=class{constructor(e){this.ctx=e;this._toolRegistry=new Rre;for(let r of fct())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new _c;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new uo([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new _c;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(fw.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(fw.id)?.splice(e.get(fw.id)?.indexOf(r)??0,1);let n=e.get(JC.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(JC.id)?.splice(e.get(JC.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(JC.id)??[],a=e.get(fw.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==fw.id&&l!==JC.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var e5=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var mct=require("crypto"),qIe=require("fs"),HIe=Me(require("path"));var pct="symbolDatabaseLookup",hct="multiLanguageContextProviderDocumentSymbols",t5=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(pct,e);return r||(r=await this.createDBFile(e)),HIe.default.join(this.persistenceManager.directory,hct,r)}async init(){let e=HIe.default.join(this.persistenceManager.directory,hct);await this.createIfNotExists(e)}async dirExists(e){try{return await qIe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await qIe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,mct.randomUUID)()}.db`;return await this.persistenceManager.update(pct,e,r),r}async deleteDBFile(e){}};d();d();var uQ=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var Fre=Me(require("path")),gct=require("worker_threads");function Act(t,e){return new gct.Worker(Fre.default.resolve(Fre.default.extname(__filename)!==".ts"?__dirname:Fre.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(Act,"createWorker");d();var Ore=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var yct=Me(pi());var Qre="main.js",Ure=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=Act(Qre,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new Ore(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new Lz(this.id++),yct.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new Dz(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new Bz(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new Nz(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new kz(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new Pz(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new Rz(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(Qre+"'")&&(r=new Error(`Failed to load ${Qre}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${Qre} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var dQ=Me(pi());var Fp=new _t(nT),r5=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){Fp.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,dQ.CancellationToken.None);return}Fp.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new Ure(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{Fp.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await Mlr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,dQ.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Fp.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Fp.debug(this.ctx,`indexing workspace ${e}`);let r=yme.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${yme.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(Ap),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,dQ.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));Fp.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),Fp.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Fp.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,dQ.CancellationToken.None)}catch(n){Fp.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return IUe(e)}};async function Mlr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(Mlr,"createIndexableWorkspaceFolder");d();d();var Cct=100,Flr=5e3,qre=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new Sn.CancellationTokenSource,h=s(()=>p.cancel(),"cancel"),m=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,m,h),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),m}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>Cct)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>Flr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>Cct&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:gr(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Hre=class{constructor(e){this.id=nT;this.selector=Array.from(mz.keys()).map(e=>({language:e}));try{this.documentManager=e.get(vr),this.resolver=new WIe(this.documentManager,e)}catch(r){throw Fp.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},WIe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new qre}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(e5).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=uC(o,a);l=l.applyEdits(c);let u=UGe(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return Fp.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(ez(o))return[];throw Fp.error(this.ctx,"Failed to get context",o),o}}};var fQ=class extends pN{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(KC).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(bc).providers.some(r=>r.id===nT)){let r=this.ctx.get(t5);this.fileWatcher=new $Ie([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new r5(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new jIe(this.ctx),this.ctx.set(uQ,this.fileWatcher),this.ctx.set(Ap,this.fileSearch),this.ctx.set(r5,this.multiLanguageContextIndexWatcher),this.ctx.get(bc).registerContextProvider(new Hre(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Ot).updateExPValuesAndAssignments(),n=lJ(this.ctx,r);return n.includes(nT)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},$Ie=class extends uQ{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},jIe=class extends Ap{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(Td).getWatchedFiles(n)).map(a=>this.ctx.get(vr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var GIe=class extends e5{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new fQ(e),e.set(fQ,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function vct(t){let e=t.get(ku),r=new t5(e);t.set(t5,r),t.set(e5,new GIe(t))}s(vct,"setupMultiLanguageContextProviderFeature");d();d();d();async function Ect(t){try{await a2}catch(e){iT(t,e,"initializeTokenizers")}}s(Ect,"waitForTokenizers");d();var ZC=new Map;ZC.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});ZC.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});ZC.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});ZC.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});ZC.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});ZC.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var Qlr=new _t("sdk");function Wre(t,e){ZC.has(t.get(ln).getEditorPluginInfo().name)||Qlr.warn(t,...e)}s(Wre,"deprecationWarning");var Cpt=Me(ZP()),NA=Me(qg());d();d();d();var pn={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var qu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(xct(e))}};function ut(t,e){let r=Gs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=xct(r.Errors(o));return[null,{code:pn.InvalidParams,message:a}]}return e(n,i,o)}}s(ut,"addMethodHandlerValidation");function xct(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(xct,"createErrorMessage");d();var VIe=Me(pi());d();var e1=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var $re="github.copilot.finishDeviceFlow",zIe=class extends e1{constructor(){super(...arguments);this.name=$re;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(Fn).pendingSignIn;if(!i)throw new VIe.ResponseError(pn.InvalidRequest,"No pending sign in");try{await this.ctx.get(Eu).open(i.verificationUri)}catch(o){z0.warn(this.ctx,"Failed to open",i.verificationUri),z0.exception(this.ctx,o,$re)}try{return await i.status}catch(o){throw new VIe.ResponseError(pn.DeviceFlowFailed,String(o))}finally{this.ctx.get(Fn).pendingSignIn=void 0}}},bct=[zIe];d();d();var Ms=class extends Or{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var pQ="github.copilot.didAcceptCompletionItem",YIe=class extends e1{constructor(){super(...arguments);this.name=pQ;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(Ms).get(n);return o?(yD(this.ctx,o),!0):!1}},Ict=[YIe];d();var Ulr="github.copilot.didAcceptNextEditSuggestionItem",KIe=class extends e1{constructor(){super(...arguments);this.name=Ulr;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(bA).handleAcceptance(n),!0}},Tct=[KIe];d();var XIe="github.copilot.didAcceptPanelCompletionItem",JIe=class extends e1{constructor(){super(...arguments);this.name=XIe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(Ms).get(i);return a?(VF(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full",acceptedLength:a.displayText.length,acceptedLines:Z2(a.displayText).length},a.copilotAnnotations),!0):!1}},wct=[JIe];var qlr=[...bct,...Ict,...Tct,...wct];function _ct(t,e){let r=new Map;for(let n of qlr){let i=new n(t),o=Gs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=LE(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new qu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(_ct,"registerCommands");d();var Sct=Me(require("node:events"));var TA=class extends l2{constructor(r){super(new y3,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${Hlr(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(Qt[n],this.env[o]),this.setConfig(Qt[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new Sct.default),this.emitters.get(r)?.on("change",n)}};function Hlr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(Hlr,"camelCaseToSnakeCaseAllCaps");var Wlr="unknown-editor",Rct="unknown-editor-plugin",jre=class extends ln{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:Wlr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:Rct,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function kct(t){return t.getEditorPluginInfo().name!==Rct}s(kct,"hasValidInfo");d();var Dct=require("node:events");var Pct="initialize",ME=class{constructor(){this.emitter=new Dct.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(Pct,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(Pct)}};d();var FE=Me(qg());var $lr=new Map([[4,FE.MessageType.Log],[3,FE.MessageType.Info],[2,FE.MessageType.Warning],[1,FE.MessageType.Error]]),Gre=class extends Oc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!QJ(e)&&n!=="console")return;let o={type:$lr.get(r),message:cze(n,...i)},a=e.get(Rr).connection;try{a.sendNotification(new FE.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof FE.ConnectionError)return;throw c}}};d();var Bct=Me(zc());var Vre=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(Rr).connection.sendNotification(new Bct.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function Nct(t){let e=t.get(Fl),r=e.deactivate();e.setReporter(new Vre(t)),e.setRestrictedReporter(new Vre(t,!0)),await r}s(Nct,"setupRedirectingTelemetryReporters");d();d();var zre=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var hQ=Me(ZP());var gN=class extends zre{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(ln).getEditorPluginInfo();return await e.get(ku).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(ku).listSettings()).length>0}async markInstalled(e){let r=e.get(ln).getEditorPluginInfo();await e.get(ku).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(ln).getEditorPluginInfo(),n=await e.get(ku).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,hQ.gt)((0,hQ.coerce)(r.version),(0,hQ.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(ln).getEditorPluginInfo();await e.get(ku).delete("versions",r.name),(await e.get(ku).listKeys("versions")).length===0&&await e.get(ku).deleteSetting("versions")}};d();var Lct=require("events"),eTe=Me(require("path")),Yre=Me(zc());var ZIe="didChangeWatchedFiles",jlr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},wA=class t{constructor(e){this.ctx=e;this.emitter=new Lct.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new Yre.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Rr).connection}init(){this.ctx.get(vs).getCapabilities().watchedFiles&&this.connection.onNotification(Yre.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(vs).getCapabilities().watchedFiles)return jlr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=eTe.extname(l).toLowerCase();if(!u2.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}onDidChangeWatchedFiles(e){this.emitter.on(ZIe,e)}offDidChangeWatchedFiles(e){this.emitter.off(ZIe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=eTe.extname(o.uri).toLowerCase();if(!u2.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.emitter.emit(ZIe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(Cn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var Glr=I.Object({uri:I.String({minLength:1})});async function Vlr(t,e,r){let n=await t.get(Cn).getOrReadTextDocument(r);return[{status:Zs(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Vlr,"handleCheckFileStatusChecked");var Mct=ut(Glr,Vlr);d();var zlr=I.Object({});function Fct(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Fct,"calculatePercentRemaining");async function Ylr(t,e,r){let n=await t.get(Fn).getSession();if(n){let i=await wde(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Fct(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Fct(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:pn.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:pn.InternalError,message:"Not signed in"}]}s(Ylr,"handleCheckQuotaChecked");var Oct=ut(zlr,Ylr);d();var Klr=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Jlr(t,e,r){return[await t.get(Fn).checkAndUpdateStatus(r.options),null]}s(Jlr,"handleCheckStatusChecked");var Qct=ut(Klr,Jlr);d();d();d();d();d();d();function Uct(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Uct,"filterUnsupportedReferences");function qct(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(qct,"convertToCopilotReferences");var Hct=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var pw=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Uct(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var rl=class{static{s(this,"ConversationInspector")}};d();var tTe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var sa=class{constructor(e){this.ctx=e;this.progressEntries=new Or(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Vr.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var t1=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Fn).getSession({authAuthority:n});if(!i&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${r}`,i?.apiUrl||`https://api.${n}`).href;return this.ctx.get(zn).fetch(a,{method:"GET",headers:o})}};d();d();d();var $ct=Me(Op());var r1=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Ut([(0,$ct.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Ut(u.filter(([p,h])=>!AN(p)||h===1).map(([p,h])=>{let m;return e.addLineNumbers?m=this.addLineNumbers(p):m=this.doc.getText(p),[h==1?m:lp(m),h]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||AN(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Ut([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function AN(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(AN,"isEmptyRange");var jct=Me(require("path"));var Gct=I.Object({uri:I.String(),visibleRange:I.Optional(gc),selection:I.Optional(gc)}),rTe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Cn),n=await r.getOrReadTextDocument(e),i=Zs(n);if(await this.turnContext.collectFile(Sd,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new r1(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Ut([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),h=p.start.line+1;if(AN(p))u=[[`The user is selecting line ${h}, which is empty.`,1]];else{let m=p.end.line+1;u=[["The user is selecting"+(h==m?` line ${h}:`:` lines ${h} to ${m} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Ut([...l,...u])}else if(n.status==="invalid")return new Ut([`The currently open file \`${jct.basename(e.uri)}\` is content excluded.`])}},Sd="current-editor",Kre=class{constructor(e){this._resolver=e;this.id=Sd;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new rTe(e)}};d();d();var bl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},nTe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},iTe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},nu=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new nTe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new iTe(this._processor(e),this.id)}};var Vct=I.Object({name:I.String(),url:I.String()}),zct=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(Vct)})),remotes:I.Optional(I.Array(Vct))}),oTe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(n1,"git repository information");let r=[];return r.push([new Ut(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Ut([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Ut([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Ut(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Ut([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Ut(r)}},n1="git-metadata",Jre=class extends nu{static{s(this,"GitMetadataSkill")}constructor(e){super(n1,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new oTe(r))}};async function Yct(t){let e=await t.skillResolver.resolve(Sd);if(e){let a=e.uri,c=RI(t.ctx,a);if(nUe(c))return{repoInfo:c,skillUsed:Sd}}let r=await t.skillResolver.resolve(n1);if(!r||!r.remotes||r.remotes.length===0){Vr.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Vhe(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:n1}}s(Yct,"extractRepoInfo");async function Kct(t){let e=[];return await Xlr(t,e),await Zlr(t,e),await eur(t,e),e}s(Kct,"skillsToReference");async function Xlr(t,e){let r=await tur(t);r&&e.push(r)}s(Xlr,"addRepositoryReference");async function Zlr(t,e){let r=await rur(t);r&&e.push(r)}s(Zlr,"addSelectionReference");async function eur(t,e){let r=[],n=await iur(t);n&&r.push(n),r.push(...await our(t)),r.length>0&&e.push(...r)}s(eur,"addFileReferences");async function tur(t){let e=await Yct(t);if(e){let r=t.ctx.get(t1),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(tur,"gitMetadataToReference");async function rur(t){let e=await t.skillResolver.resolve(Sd);if(e&&e.selection){let n=await t.ctx.get(Cn).getOrReadTextDocument(e),i=Zs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return nur(e,n.document)}}s(rur,"currentEditorToSelectionReference");function nur(t,e){if(t.selection&&!AN(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(nur,"extractSelection");async function iur(t){let e=await t.skillResolver.resolve(Sd);if(e){let n=await t.ctx.get(Cn).getOrReadTextDocument(e),i=Zs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(iur,"currentEditorToFileReference");async function our(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(Cn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=Zs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(our,"fileReferenceToPlatformFileReference");d();d();d();d();var ilt=Me(ene()),lTe=Me(require("path"));var olt=500,mur=Math.floor(.25*olt),tne=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=lTe.default.extname(__filename)===".ts"?lTe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await ilt.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let h=await require(l).getTokenizerAsync(c),m=h.tokenize(o),g=m.length,A=[],y=0;for(;y<g;){let E=y+u>=g,b=E?g:y+u,_=m.slice(y,b),S=h.detokenize(_),P=o.indexOf(S);A.push({id:`${a.toString()}#${y}`,chunk:S,tokenCount:_.length,range:{start:P,end:P+S.length}}),y=E?b:b-f}return A},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:olt,overlap:mur}}),n}};var gur="fixedSize",Aur=new Map([["fixedSize",tne]]);function slt(t){let e=t==="default"?gur:t,r=Aur.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(slt,"getChunkingAlgorithm");d();d();var rne=Me(Ib()),i1=Me(require("fs")),alt=require("os"),Tm=Me(require("path")),yN=require("process");var uTe=5e4,yur=new _t("workspaceChunks"),nne=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Ui(r.uri),i=(0,rne.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Tm.join(Cur(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,rne.SHA256)(e).toString().substring(0,this.pathHashLength),n=Tm.basename(e);return Tm.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await i1.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await i1.promises.mkdir(Tm.dirname(n),{recursive:!0}),await i1.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){yur.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await i1.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await i1.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=Tm.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(Tm.join(this.cacheRootPath,n))}}async getFileHash(e){let r=ys(e),n="";return r&&(n=await i1.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,rne.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=ys(e);if(!i)return;async function o(p){try{return(await i1.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=dl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=ys(e);if(!r)return[];let n;try{n=await i1.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=dl(Tm.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await i1.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function Cur(){return yN.env.XDG_CACHE_HOME&&Tm.isAbsolute(yN.env.XDG_CACHE_HOME)?yN.env.XDG_CACHE_HOME+"/github-copilot":(0,alt.platform)()==="win32"?yN.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":yN.env.HOME+"/.cache/github-copilot"}s(Cur,"getXdgCachePath");var dTe=1e4;var ine=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new pTe;this.status="notStarted",this.workspaceChunks=new nne(e,r),this.cancellationToken=new fTe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(Td).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>dTe&&(this._fileCountExceeded=!0,n=n.slice(0,dTe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Na(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>uTe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Na(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>uTe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>dTe&&(this._fileCountExceeded=!0),cje(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await $o.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},fTe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},pTe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var rc=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=slt(r),i=new n;return new ine(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=Fr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=Fr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function sne(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(sne,"toChatModeEnum");var hw=class{constructor(e,r){this.request=e;this.telemetryId=gr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}getResolvedModelId(){return this.resolvedModelConfiguration?.modelId}getChatModeWithDefault(){return this.chatMode??"Ask"}},one=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=gr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var clt={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},llt="Alright, This response contains a code citation.";d();var ult=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var dlt=Me(require("fs")),hf=Me(require("path"));var hTe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],mTe="test_",AQ={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},yQ=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Ui(e),n=hf.extname(r).replace(".",""),i=AQ[n]??{location:"sameFolder",prefix:mTe,suffix:hTe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=ys(dd(e)),c===void 0)return}else{let u=ys(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=hf.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=dl(c);if(await this.fileExists(l))return qo(l,o[0])}parseTestFilePath(e){try{return dl(e)}catch(r){An.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Ui(e),n=hf.extname(r).replace(".",""),i=AQ[n]??{location:"sameFolder",prefix:mTe,suffix:hTe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=dd(e):c=this.determineImplFolder(e);for(let l of o){let u=qo(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=ys(e);if(r===void 0)return;let n=hf.extname(Ui(e)).replace(".",""),i,o=AQ[n]?.location??"sameFolder";o==="sameFolder"?i=hf.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,AQ[n]);if(a.length>0)return dl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${hf.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return dlt.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&ys(this.baseUri))??"",i=hf.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(hf.sep)}getRelativeTestFolder(e,r,n,i){let o=hf.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=hf.extname(Ui(e)).replace(".",""),n=dd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function CQ(t){let e=Ui(t),r=hf.extname(e),n=AQ[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(hTe.some(o=>e.endsWith(o+r))||e.startsWith(mTe))}s(CQ,"isTestFile");d();var flt=["indexed","indexing","not_indexed"],mw=class{constructor(){this._cache=new Or(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await yh(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=Pv(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function plt(t,e,r,n){let i=vo(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(Gr).getToken(),l=EV(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),h=await vur(t,l,u,e.modelId,p,n);a.push(...h||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(plt,"fetchEmbeddings");async function vur(t,e,r,n,i,o){let a=gr(),c=i.map(u=>u.text),l=await N_(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,II(t));if(l.status!==200||o.isCancellationRequested){Na(t,new OE(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(vur,"sendEmbeddingsRequest");d();d();var ane=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var Eur="cosine",xur=new Map([["cosine",ane]]);function hlt(t){let e=t==="default"?Eur:t,r=xur.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(hlt,"getScoringAlgorithm");d();var Qp=class{constructor(){this.workspaceScoringProviders=new Or(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=hlt(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var mlt={modelFamily:IV.textEmbedding3Small,scoringType:"default",dimensions:null};async function glt(t,e,r,n,i,o,a,c=mlt){let l={...mlt,...c},u=Iur(t,e,r,n);Vr.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(qa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),h=await plt(t,f,u,o),m=performance.now();if(a.embeddingsTimeMs=Math.floor(m-p),h===void 0||h.length===0)return[];let g=h.findIndex(P=>P.id==="userQuery");if(g===void 0)return[];let A=h.splice(g,1)[0];if(o.isCancellationRequested)return[];let y=performance.now(),E=Tur(t,e,h,A,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-y);let _=E.slice(0,i);return Vr.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(P=>u.find(B=>B.id===P.id).id)}s(glt,"rerankSnippets");function Iur(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(Iur,"formatEmbeddingsInput");function Tur(t,e,r,n,i){let o=t.get(Qp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(Tur,"scoreEmbeddings");d();d();d();var ATe=Me(ene());var wur=.75,_ur=1.2,Sur=47,cne=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await lne();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,Sur),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(rc).getChunks(this.workspaceFolder),n=qv(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=qv(n,o=>o.chunk);return await Rur(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(rc).getChunks(this.workspaceFolder),a=new gTe(i);for await(let c of o){let l=await kur({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function Rur(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=ATe.job(({snippet:f,keywords:p})=>p.map(m=>f.includes(m)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(Rur,"calculateIDFValues");async function kur(t,e,r,n){return{score:await ATe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let h=0;for(let m of o){let g=u[m],A=(a.match(new RegExp(m,"g"))||[]).length,y=g*(A*(f+1)),E=A+f*(1-p+p*c/l);h+=y/E}return h},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:_ur,b:wur}}),...t}}s(kur,"calculateBM25Score");var gTe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var Dur="bm25",Bur=new Map([["bm25",cne]]);function Alt(t){let e=t==="default"?Dur:t,r=Bur.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(Alt,"getRankingAlgorithm");var Hu=class{constructor(){this.workspaceRankingProviders=new Or(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=Alt(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function ylt(t,e){let r=t.ctx,n=await $o.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(Wu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new Ua(r),l=await xc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(Vr.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";Na(r,new OE(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(ylt,"parseUserQuery");var Clt=Me(Op());var OE=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},une=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(rc),o=i.status(e.turn.workspaceFolder),a=n.get(Hu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(rc).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await ylt(e,e.cancelationToken)}catch(g){let A=new OE(g);Na(i,A,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(Hu),p=[],h=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let A=new OE(g);Na(i,A,"LocalSnippetProvider.rankingQuery")}let m=performance.now();return r.rankingTimeMs=Math.floor(m-h),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=sn(e.turn.request.message),c=[];try{c=await glt(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new OE(f);Na(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(Cn);for(let f of c){let p=f.split("#")[0],h=await u.getOrReadTextDocument({uri:p}),m=r.find(g=>g.id===f);if(h.status==="valid"){let g=h.document.positionAt(m.range.start),A=h.document.positionAt(m.range.end),y=us.range(g,A);l.push({uri:h.document.uri,range:y,snippet:m.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...pje},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Vr.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(rc).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return Clt.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var Elt=Me(vlt()),pne=Me(ene()),xlt=Me(require("os")),blt=Me(Op());var Mur=Math.min(Math.max(Math.ceil(xlt.cpus().length/2),1),10),vQ=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new Elt.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await pne.start({maxWorkers:Mur})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await pne.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},lne=vQ.startWorkerPool.bind(vQ);var JNi=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),vTe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(CN);return}let r=[],n=this.turnContext.ctx.get(Cn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new r1(u.document,l,l),p=new Ut([c]),m=CQ(a)?.5:.8;r.push([`Code excerpt from file \`${ys(a)}\`:`,1],[f.wrapInTicks(p,m),1]),await this.turnContext.collectFile(vN,a,Zs(u),l)}}if(r.length>0)return r.unshift([new Ut(["The user wants you to consider the following snippets when computing your answer."]),1]),new Ut(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},CN="collect-project-context",dne=class extends pN{constructor(r,n=[new une]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(KC).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await lne(),!r.uri))return;let n=this.ctx.get(rc),i=this.ctx.get(Td),o=this.ctx.get(Hu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(rc);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Hu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Hu).terminateRanking(this.ctx,r),this.ctx.get(Qp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await vQ.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(rc),o=this.ctx.get(Hu),a=this.ctx.get(Qp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await lne();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(rc),c=this.ctx.get(Hu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(CN,"Collecting relevant project context"),await r.info(blt.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of flt){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await hje(r,a.providerType,l),c.length===0){await r.steps.error(CN,"No project context found");return}return await r.steps.finish(CN),c}case"indexing":{await r.steps.error(CN,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(CN,"No project context available");return}}}},vN="project-context",fne=class extends nu{static{s(this,"ProjectContextSkill")}constructor(e){super(vN,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new vTe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var Ilt=I.Object({labels:I.Array(I.String())}),ETe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Ut(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Ut([`- ${n}`]),.9]),this.turnContext.collectLabel(_A,n)}),new Ut(r)}},_A="project-labels",hne=class{constructor(e){this._resolver=e;this.id=_A;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new ETe(e)}};d();var mne=Me(Op());var wlt={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},_lt=mne.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Slt=mne.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,Fur=mne.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,xTe=`

`,Tlt=_lt+xTe+Slt;function Rlt(t){let e=1;if(t.length===0)return{reply:Tlt,vulnerabilities:e};if(t==="0")return{reply:Tlt,vulnerabilities:0};if(t==="help")return{reply:Fur,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=_lt+xTe:i==="c"&&(n+=Slt+xTe);return{reply:n.trimEnd(),vulnerabilities:e}}s(Rlt,"parseVulnerabilitiesInstructions");var klt=Me(Op());var Our="Oops, your response got filtered. Vote down if you think this shouldn't have happened",Qur="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",bTe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},Uur=new bTe,ITe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new iu(Qur,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},qur=new ITe,TTe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new iu("Alright, I'm producing a notification",void 0,[],o)}},Hur=new TTe,wTe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new iu(Our,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},Wur=new wTe,_Te=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new iu(await Dlt(e))}},$ur=new _Te,STe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[_A,Sd]}instructions(e,r){return"Create a function that prints a christmas tree"}},jur=new STe,RTe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new iu(sn(e.turn.request.message))}},Gur=new RTe,kTe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(ou).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=klt.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new iu(i)}return new iu("No prompt available")}},Vur=new kTe,PTe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new iu(await Blt(e,n,i))}},zur=new PTe,DTe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=Rlt(r);for(let o=0;o<i;o++)e.turn.annotations.push(wlt);return new iu(n,void 0,e.turn.annotations)}},Yur=new DTe,BTe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(clt),new iu(llt,void 0,e.turn.annotations)}},Kur=new BTe,NTe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new iu(ult)}},Jur=new NTe,LTe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Xur=new LTe,MTe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[vN]}},Zur=new MTe,FTe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new iu("Alright, I'm producing a notification",void 0,[],[],[],e)}},edr=new FTe;function Plt(){return[Uur,qur,Hur,Wur,jur,$ur,Gur,Vur,zur,Yur,Kur,edr,Jur,Xur,Zur]}s(Plt,"getDebugTemplates");d();d();function Aw(t,e){if(t.length==0)return new Ut([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Ut(r)}s(Aw,"weighElidableList");var Nlt=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:gc}))}),OTe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Cn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(yw,e.uri,Zs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(yw,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(yw,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Ut([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),Aw(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Ut([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Ut([["```"+c,1],[lp(a),.8],["```",1]]))}return new Ut(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await $o.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},yw="problems-in-active-document",gne=class extends nu{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(yw,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new OTe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var Ane=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(vr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new yQ(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=CQ(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!CQ(e))return;let n=this.turnContext.ctx.get(vr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new yQ(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${tdr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${rdr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Ut([[`${ndr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Ut([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(Cn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(SA,e,Zs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[lp(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(bo).stat(e),!0}catch{return!1}}}},tdr="Code excerpt from the implementation source file",rdr="Code excerpt from the test file",ndr="Code excerpt from an example test file";var Llt=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),UTe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(Cn),n=new Ane(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(SA,e.testFileUri,Zs(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(SA,e.sourceFileUri,Zs(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(SA,e.sourceFileUri,Zs(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(SA,e.testFileUri,Zs(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},SA="test-context",yne=class extends nu{static{s(this,"TestContextSkill")}constructor(e){super(SA,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new UTe(r))}};d();var Mlt=Me(Op());var Flt=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:gc}))}),qTe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(o5,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Ut(["The latest test run produced the following failures and errors:"]);return new Ut([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(Cn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(o5,o,Zs(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Ut(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Ut([Mlt.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Ut(n)}appendCode(e,r,n){let i=[new Ut([`
The code of file \`${r}\` is:
`]),.6],o=[new Ut([["```"+n.detectedLanguageId,1],[lp(n.getText()),.9],["```",1]]),.7];return new Ut([[e,1],i,o])}},o5="test-failures",Cne=class extends nu{static{s(this,"TestFailuresSkill")}constructor(e){super(o5,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new qTe(r))}};var wm=Me(Op());var iu=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},s5=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},idr=new s5("tests","Generate unit tests","Generate Tests",wm.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[SA,o5],["chat-panel","editor"]),odr=new s5("simplify","Simplify the code","Simplify This",wm.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],wm.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),sdr=new s5("fix","Fix problems and compile errors","Fix This",wm.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[yw],["editor","chat-panel","inline"],wm.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),adr=new s5("explain","Explain how the code works","Explain This",wm.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],wm.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),cdr=new s5("doc","Document the current selection of code","Generate Docs",wm.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],wm.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),HTe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=jTe(e.conversation),n=wm.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new iu(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new iu(n)}},ldr=new HTe,WTe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=$Te(e.ctx).filter(i=>i!=this),n=wm.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new iu(n)}},udr=new WTe;function EQ(){return[idr,odr,sdr,adr,cdr,ldr,udr,...Plt()]}s(EQ,"getPromptTemplates");function $Te(t){let e=EQ();return!G9(t)&&!cg(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s($Te,"getUserFacingPromptTemplates");var GTe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},ji=class{constructor(e){this.ctx=e;this.conversations=new Or(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new one([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(bl).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new GTe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&sn(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(sn(r.request.message),"@");(await s1(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(sn(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(sn(r.request.message),"/"),o=EQ().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(bl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function Zlt(t){return typeof t>"u"||t===null}s(Zlt,"isNothing");function ddr(t){return typeof t=="object"&&t!==null}s(ddr,"isObject");function fdr(t){return Array.isArray(t)?t:Zlt(t)?[]:[t]}s(fdr,"toArray");function pdr(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(pdr,"extend");function hdr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(hdr,"repeat");function mdr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(mdr,"isNegativeZero");var gdr=Zlt,Adr=ddr,ydr=fdr,Cdr=hdr,vdr=mdr,Edr=pdr,Il={isNothing:gdr,isObject:Adr,toArray:ydr,repeat:Cdr,isNegativeZero:vdr,extend:Edr};function eut(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(eut,"formatError");function bQ(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=eut(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(bQ,"YAMLException$1");bQ.prototype=Object.create(Error.prototype);bQ.prototype.constructor=bQ;bQ.prototype.toString=s(function(e){return this.name+": "+eut(this,e)},"toString");var E0=bQ;function VTe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(VTe,"getLine");function zTe(t,e){return Il.repeat(" ",e-t.length)+t}s(zTe,"padStart");function xdr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=VTe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=Il.repeat(" ",e.indent)+zTe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=VTe(t.buffer,n[a],i[a],t.position,p),c+=Il.repeat(" ",e.indent)+zTe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=Il.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=VTe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=Il.repeat(" ",e.indent)+zTe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(xdr,"makeSnippet");var bdr=xdr,Idr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Tdr=["scalar","sequence","mapping"];function wdr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(wdr,"compileStyleAliases");function _dr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Idr.indexOf(r)===-1)throw new E0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=wdr(e.styleAliases||null),Tdr.indexOf(this.kind)===-1)throw new E0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(_dr,"Type$1");var Rd=_dr;function Olt(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(Olt,"compileList");function Sdr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(Sdr,"compileMap");function KTe(t){return this.extend(t)}s(KTe,"Schema$1");KTe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof Rd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new E0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Rd))throw new E0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new E0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new E0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Rd))throw new E0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(KTe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Olt(i,"implicit"),i.compiledExplicit=Olt(i,"explicit"),i.compiledTypeMap=Sdr(i.compiledImplicit,i.compiledExplicit),i},"extend");var Rdr=KTe,kdr=new Rd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),Pdr=new Rd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),Ddr=new Rd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),Bdr=new Rdr({explicit:[kdr,Pdr,Ddr]});function Ndr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(Ndr,"resolveYamlNull");function Ldr(){return null}s(Ldr,"constructYamlNull");function Mdr(t){return t===null}s(Mdr,"isNull");var Fdr=new Rd("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ndr,construct:Ldr,predicate:Mdr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function Odr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(Odr,"resolveYamlBoolean");function Qdr(t){return t==="true"||t==="True"||t==="TRUE"}s(Qdr,"constructYamlBoolean");function Udr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(Udr,"isBoolean");var qdr=new Rd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Odr,construct:Qdr,predicate:Udr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Hdr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(Hdr,"isHexCode");function Wdr(t){return 48<=t&&t<=55}s(Wdr,"isOctCode");function $dr(t){return 48<=t&&t<=57}s($dr,"isDecCode");function jdr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Hdr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Wdr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!$dr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(jdr,"resolveYamlInteger");function Gdr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(Gdr,"constructYamlInteger");function Vdr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Il.isNegativeZero(t)}s(Vdr,"isInteger");var zdr=new Rd("tag:yaml.org,2002:int",{kind:"scalar",resolve:jdr,construct:Gdr,predicate:Vdr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ydr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Kdr(t){return!(t===null||!Ydr.test(t)||t[t.length-1]==="_")}s(Kdr,"resolveYamlFloat");function Jdr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Jdr,"constructYamlFloat");var Xdr=/^[-+]?[0-9]+e/;function Zdr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Il.isNegativeZero(t))return"-0.0";return r=t.toString(10),Xdr.test(r)?r.replace("e",".e"):r}s(Zdr,"representYamlFloat");function efr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Il.isNegativeZero(t))}s(efr,"isFloat");var tfr=new Rd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Kdr,construct:Jdr,predicate:efr,represent:Zdr,defaultStyle:"lowercase"}),rfr=Bdr.extend({implicit:[Fdr,qdr,zdr,tfr]}),nfr=rfr,tut=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),rut=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ifr(t){return t===null?!1:tut.exec(t)!==null||rut.exec(t)!==null}s(ifr,"resolveYamlTimestamp");function ofr(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,h;if(e=tut.exec(t),e===null&&(e=rut.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&h.setTime(h.getTime()-u),h}s(ofr,"constructYamlTimestamp");function sfr(t){return t.toISOString()}s(sfr,"representYamlTimestamp");var afr=new Rd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ifr,construct:ofr,instanceOf:Date,represent:sfr});function cfr(t){return t==="<<"||t===null}s(cfr,"resolveYamlMerge");var lfr=new Rd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:cfr}),twe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ufr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=twe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(ufr,"resolveYamlBinary");function dfr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=twe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(dfr,"constructYamlBinary");function ffr(t){var e="",r=0,n,i,o=t.length,a=twe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(ffr,"representYamlBinary");function pfr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(pfr,"isBinary");var hfr=new Rd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ufr,construct:dfr,predicate:pfr,represent:ffr}),mfr=Object.prototype.hasOwnProperty,gfr=Object.prototype.toString;function Afr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,gfr.call(i)!=="[object Object]")return!1;for(o in i)if(mfr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(Afr,"resolveYamlOmap");function yfr(t){return t!==null?t:[]}s(yfr,"constructYamlOmap");var Cfr=new Rd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Afr,construct:yfr}),vfr=Object.prototype.toString;function Efr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],vfr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(Efr,"resolveYamlPairs");function xfr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(xfr,"constructYamlPairs");var bfr=new Rd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Efr,construct:xfr}),Ifr=Object.prototype.hasOwnProperty;function Tfr(t){if(t===null)return!0;var e,r=t;for(e in r)if(Ifr.call(r,e)&&r[e]!==null)return!1;return!0}s(Tfr,"resolveYamlSet");function wfr(t){return t!==null?t:{}}s(wfr,"constructYamlSet");var _fr=new Rd("tag:yaml.org,2002:set",{kind:"mapping",resolve:Tfr,construct:wfr}),nut=nfr.extend({implicit:[afr,lfr],explicit:[hfr,Cfr,bfr,_fr]}),vw=Object.prototype.hasOwnProperty,vne=1,iut=2,sut=3,Ene=4,YTe=1,Sfr=2,Qlt=3,Rfr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kfr=/[\x85\u2028\u2029]/,Pfr=/[,\[\]\{\}]/,aut=/^(?:!|!!|![a-z\-]+!)$/i,cut=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ult(t){return Object.prototype.toString.call(t)}s(Ult,"_class");function a1(t){return t===10||t===13}s(a1,"is_EOL");function c5(t){return t===9||t===32}s(c5,"is_WHITE_SPACE");function x0(t){return t===9||t===32||t===10||t===13}s(x0,"is_WS_OR_EOL");function xN(t){return t===44||t===91||t===93||t===123||t===125}s(xN,"is_FLOW_INDICATOR");function Dfr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(Dfr,"fromHexCode");function Bfr(t){return t===120?2:t===117?4:t===85?8:0}s(Bfr,"escapedHexLen");function Nfr(t){return 48<=t&&t<=57?t-48:-1}s(Nfr,"fromDecimalCode");function qlt(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(qlt,"simpleEscapeSequence");function Lfr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(Lfr,"charFromCodepoint");var lut=new Array(256),uut=new Array(256);for(a5=0;a5<256;a5++)lut[a5]=qlt(a5)?1:0,uut[a5]=qlt(a5);var a5;function Mfr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||nut,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(Mfr,"State$1");function dut(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=bdr(r),new E0(e,r)}s(dut,"generateError");function an(t,e){throw dut(t,e)}s(an,"throwError");function xne(t,e){t.onWarning&&t.onWarning.call(null,dut(t,e))}s(xne,"throwWarning");var Hlt={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&an(e,"duplication of %YAML directive"),n.length!==1&&an(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&an(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&an(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&xne(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&an(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],aut.test(i)||an(e,"ill-formed tag handle (first argument) of the TAG directive"),vw.call(e.tagMap,i)&&an(e,'there is a previously declared suffix for "'+i+'" tag handle'),cut.test(o)||an(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{an(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Cw(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||an(t,"expected valid JSON character");else Rfr.test(c)&&an(t,"the stream contains non-printable characters");t.result+=c}}s(Cw,"captureSegment");function Wlt(t,e,r,n){var i,o,a,c;for(Il.isObject(r)||an(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],vw.call(e,o)||(e[o]=r[o],n[o]=!0)}s(Wlt,"mergeMappings");function bN(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&an(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ult(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Ult(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)Wlt(t,e,o[u],r);else Wlt(t,e,o,r);else!t.json&&!vw.call(r,i)&&vw.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,an(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(bN,"storeMappingPair");function rwe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):an(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(rwe,"readLineBreak");function nl(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;c5(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(a1(i))for(rwe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&xne(t,"deficient indentation"),n}s(nl,"skipSeparationSpace");function Tne(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||x0(r)))}s(Tne,"testDocumentSeparator");function nwe(t,e){e===1?t.result+=" ":e>1&&(t.result+=Il.repeat(`
`,e-1))}s(nwe,"writeFoldedLines");function Ffr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,h=t.result,m;if(m=t.input.charCodeAt(t.position),x0(m)||xN(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=t.input.charCodeAt(t.position+1),x0(i)||r&&xN(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;m!==0;){if(m===58){if(i=t.input.charCodeAt(t.position+1),x0(i)||r&&xN(i))break}else if(m===35){if(n=t.input.charCodeAt(t.position-1),x0(n))break}else{if(t.position===t.lineStart&&Tne(t)||r&&xN(m))break;if(a1(m))if(l=t.line,u=t.lineStart,f=t.lineIndent,nl(t,!1,-1),t.lineIndent>=e){c=!0,m=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(Cw(t,o,a,!1),nwe(t,t.line-l),o=a=t.position,c=!1),c5(m)||(a=t.position+1),m=t.input.charCodeAt(++t.position)}return Cw(t,o,a,!1),t.result?!0:(t.kind=p,t.result=h,!1)}s(Ffr,"readPlainScalar");function Ofr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Cw(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else a1(r)?(Cw(t,n,i,!0),nwe(t,nl(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Tne(t)?an(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);an(t,"unexpected end of the stream within a single quoted scalar")}s(Ofr,"readSingleQuotedScalar");function Qfr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return Cw(t,r,t.position,!0),t.position++,!0;if(c===92){if(Cw(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),a1(c))nl(t,!1,e);else if(c<256&&lut[c])t.result+=uut[c],t.position++;else if((a=Bfr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=Dfr(c))>=0?o=(o<<4)+a:an(t,"expected hexadecimal character");t.result+=Lfr(o),t.position++}else an(t,"unknown escape sequence");r=n=t.position}else a1(c)?(Cw(t,r,n,!0),nwe(t,nl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Tne(t)?an(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}an(t,"unexpected end of the stream within a double quoted scalar")}s(Qfr,"readDoubleQuotedScalar");function Ufr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,h,m,g=Object.create(null),A,y,E,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,m=!1,c=[];else if(b===123)f=125,m=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(nl(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=m?"mapping":"sequence",t.result=c,!0;r?b===44&&an(t,"expected the node content, but found ','"):an(t,"missed comma between flow collection entries"),y=A=E=null,p=h=!1,b===63&&(u=t.input.charCodeAt(t.position+1),x0(u)&&(p=h=!0,t.position++,nl(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,IN(t,e,vne,!1,!0),y=t.tag,A=t.result,nl(t,!0,e),b=t.input.charCodeAt(t.position),(h||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),nl(t,!0,e),IN(t,e,vne,!1,!0),E=t.result),m?bN(t,c,g,y,A,E,n,i,o):p?c.push(bN(t,null,g,y,A,E,n,i,o)):c.push(A),nl(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}an(t,"unexpected end of the stream within a flow collection")}s(Ufr,"readFlowCollection");function qfr(t,e){var r,n,i=YTe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)YTe===i?i=p===43?Qlt:Sfr:an(t,"repeat of a chomping mode identifier");else if((f=Nfr(p))>=0)f===0?an(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?an(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(c5(p)){do p=t.input.charCodeAt(++t.position);while(c5(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!a1(p)&&p!==0)}for(;p!==0;){for(rwe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),a1(p)){l++;continue}if(t.lineIndent<c){i===Qlt?t.result+=Il.repeat(`
`,o?1+l:l):i===YTe&&o&&(t.result+=`
`);break}for(n?c5(p)?(u=!0,t.result+=Il.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=Il.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=Il.repeat(`
`,l):t.result+=Il.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!a1(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Cw(t,r,t.position,!1)}return!0}s(qfr,"readBlockScalar");function $lt(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,an(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!x0(a))));){if(c=!0,t.position++,nl(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,IN(t,e,sut,!1,!0),o.push(t.result),nl(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)an(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s($lt,"readBlockSequence");function Hfr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},h=Object.create(null),m=null,g=null,A=null,y=!1,E=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,an(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&x0(n))b===63?(y&&(bN(t,p,h,m,g,null,a,c,l),m=g=A=null),E=!0,y=!0,i=!0):y?(y=!1,i=!0):an(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!IN(t,r,iut,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);c5(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),x0(b)||an(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(bN(t,p,h,m,g,null,a,c,l),m=g=A=null),E=!0,y=!1,i=!1,m=t.tag,g=t.result;else if(E)an(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(E)an(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(y&&(a=t.line,c=t.lineStart,l=t.position),IN(t,e,Ene,!0,i)&&(y?g=t.result:A=t.result),y||(bN(t,p,h,m,g,A,a,c,l),m=g=A=null),nl(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)an(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&bN(t,p,h,m,g,null,a,c,l),E&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),E}s(Hfr,"readBlockMapping");function Wfr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&an(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):an(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!x0(a);)a===33&&(n?an(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),aut.test(i)||an(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Pfr.test(o)&&an(t,"tag suffix cannot contain flow indicator characters")}o&&!cut.test(o)&&an(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{an(t,"tag name is malformed: "+o)}return r?t.tag=o:vw.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:an(t,'undeclared tag handle "'+i+'"'),!0}s(Wfr,"readTagProperty");function $fr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&an(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!x0(r)&&!xN(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&an(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s($fr,"readAnchorProperty");function jfr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!x0(n)&&!xN(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&an(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),vw.call(t.anchorMap,r)||an(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],nl(t,!0,-1),!0}s(jfr,"readAlias");function IN(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,h,m,g,A,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=Ene===r||sut===r,n&&nl(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Wfr(t)||$fr(t);)nl(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||Ene===r)&&(vne===r||iut===r?A=e:A=e+1,y=t.position-t.lineStart,l===1?c&&($lt(t,y)||Hfr(t,y,A))||Ufr(t,A)?f=!0:(a&&qfr(t,A)||Ofr(t,A)||Qfr(t,A)?f=!0:jfr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&an(t,"alias node should not have any properties")):Ffr(t,A,vne===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&$lt(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&an(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,h=t.implicitTypes.length;p<h;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(vw.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,m=t.typeMap.multi[t.kind||"fallback"],p=0,h=m.length;p<h;p+=1)if(t.tag.slice(0,m[p].tag.length)===m[p].tag){g=m[p];break}g||an(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&an(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):an(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(IN,"composeNode");function Gfr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(nl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!x0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&an(t,"directive name must not be less than one character in length");a!==0;){for(;c5(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!a1(a));break}if(a1(a))break;for(r=t.position;a!==0&&!x0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&rwe(t),vw.call(Hlt,n)?Hlt[n](t,n,i):xne(t,'unknown document directive "'+n+'"')}if(nl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,nl(t,!0,-1)):o&&an(t,"directives end mark is expected"),IN(t,t.lineIndent-1,Ene,!1,!0),nl(t,!0,-1),t.checkLineBreaks&&kfr.test(t.input.slice(e,t.position))&&xne(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Tne(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,nl(t,!0,-1));return}if(t.position<t.length-1)an(t,"end of the stream or a document separator is expected");else return}s(Gfr,"readDocument");function fut(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Mfr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,an(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Gfr(r);return r.documents}s(fut,"loadDocuments");function Vfr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=fut(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(Vfr,"loadAll$1");function zfr(t,e){var r=fut(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new E0("expected a single document in the stream, but found more")}}s(zfr,"load$1");var Yfr=Vfr,Kfr=zfr,put={loadAll:Yfr,load:Kfr},hut=Object.prototype.toString,mut=Object.prototype.hasOwnProperty,iwe=65279,Jfr=9,IQ=10,Xfr=13,Zfr=32,e0r=33,t0r=34,JTe=35,r0r=37,n0r=38,i0r=39,o0r=42,gut=44,s0r=45,bne=58,a0r=61,c0r=62,l0r=63,u0r=64,Aut=91,yut=93,d0r=96,Cut=123,f0r=124,vut=125,kd={};kd[0]="\\0";kd[7]="\\a";kd[8]="\\b";kd[9]="\\t";kd[10]="\\n";kd[11]="\\v";kd[12]="\\f";kd[13]="\\r";kd[27]="\\e";kd[34]='\\"';kd[92]="\\\\";kd[133]="\\N";kd[160]="\\_";kd[8232]="\\L";kd[8233]="\\P";var p0r=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],h0r=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function m0r(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&mut.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(m0r,"compileStyleMap");function g0r(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new E0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Il.repeat("0",n-e.length)+e}s(g0r,"encodeHex");var A0r=1,TQ=2;function y0r(t){this.schema=t.schema||nut,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Il.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=m0r(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?TQ:A0r,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(y0r,"State");function jlt(t,e){for(var r=Il.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(jlt,"indentString");function XTe(t,e){return`
`+Il.repeat(" ",t.indent*e)}s(XTe,"generateNextLine");function C0r(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(C0r,"testImplicitResolving");function Ine(t){return t===Zfr||t===Jfr}s(Ine,"isWhitespace");function wQ(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==iwe||65536<=t&&t<=1114111}s(wQ,"isPrintable");function Glt(t){return wQ(t)&&t!==iwe&&t!==Xfr&&t!==IQ}s(Glt,"isNsCharOrWhitespace");function Vlt(t,e,r){var n=Glt(t),i=n&&!Ine(t);return(r?n:n&&t!==gut&&t!==Aut&&t!==yut&&t!==Cut&&t!==vut)&&t!==JTe&&!(e===bne&&!i)||Glt(e)&&!Ine(e)&&t===JTe||e===bne&&i}s(Vlt,"isPlainSafe");function v0r(t){return wQ(t)&&t!==iwe&&!Ine(t)&&t!==s0r&&t!==l0r&&t!==bne&&t!==gut&&t!==Aut&&t!==yut&&t!==Cut&&t!==vut&&t!==JTe&&t!==n0r&&t!==o0r&&t!==e0r&&t!==f0r&&t!==a0r&&t!==c0r&&t!==i0r&&t!==t0r&&t!==r0r&&t!==u0r&&t!==d0r}s(v0r,"isPlainSafeFirst");function E0r(t){return!Ine(t)&&t!==bne}s(E0r,"isPlainSafeLast");function xQ(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(xQ,"codePointAt");function Eut(t){var e=/^\n* /;return e.test(t)}s(Eut,"needIndentIndicator");var xut=1,ZTe=2,but=3,Iut=4,EN=5;function x0r(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,h=!1,m=n!==-1,g=-1,A=v0r(xQ(t,0))&&E0r(xQ(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=xQ(t,l),!wQ(u))return EN;A=A&&Vlt(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=xQ(t,l),u===IQ)p=!0,m&&(h=h||l-g-1>n&&t[g+1]!==" ",g=l);else if(!wQ(u))return EN;A=A&&Vlt(u,f,c),f=u}h=h||m&&l-g-1>n&&t[g+1]!==" "}return!p&&!h?A&&!a&&!i(t)?xut:o===TQ?EN:ZTe:r>9&&Eut(t)?EN:a?o===TQ?EN:ZTe:h?Iut:but}s(x0r,"chooseScalarStyle");function b0r(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===TQ?'""':"''";if(!t.noCompatMode&&(p0r.indexOf(e)!==-1||h0r.test(e)))return t.quotingType===TQ?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return C0r(t,u)}switch(s(l,"testAmbiguity"),x0r(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case xut:return e;case ZTe:return"'"+e.replace(/'/g,"''")+"'";case but:return"|"+zlt(e,t.indent)+Ylt(jlt(e,o));case Iut:return">"+zlt(e,t.indent)+Ylt(jlt(I0r(e,a),o));case EN:return'"'+T0r(e)+'"';default:throw new E0("impossible error: invalid scalar style")}}()}s(b0r,"writeScalar");function zlt(t,e){var r=Eut(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(zlt,"blockHeader");function Ylt(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Ylt,"dropEndingNewline");function I0r(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Klt(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+Klt(l,e),i=o}return n}s(I0r,"foldString");function Klt(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(Klt,"foldLine");function T0r(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=xQ(t,i),n=kd[r],!n&&wQ(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||g0r(r);return e}s(T0r,"escapeString");function w0r(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(UE(t,e,c,!1,!1)||typeof c>"u"&&UE(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(w0r,"writeFlowSequence");function Jlt(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(UE(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&UE(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=XTe(t,e)),t.dump&&IQ===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(Jlt,"writeBlockSequence");function _0r(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),UE(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),UE(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(_0r,"writeFlowMapping");function S0r(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,h;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new E0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)h="",(!n||i!=="")&&(h+=XTe(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),UE(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&IQ===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,p&&(h+=XTe(t,e)),UE(t,e+1,f,!0,p)&&(t.dump&&IQ===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=o,t.dump=i||"{}"}s(S0r,"writeBlockMapping");function Xlt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,hut.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(mut.call(c.represent,l))n=c.represent[l](e,l);else throw new E0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(Xlt,"detectType");function UE(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Xlt(t,r,!1)||Xlt(t,r,!0);var c=hut.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,h;if(f&&(p=t.duplicates.indexOf(r),h=p!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&h&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(S0r(t,e,t.dump,i),h&&(t.dump="&ref_"+p+t.dump)):(_0r(t,e,t.dump),h&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Jlt(t,e-1,t.dump,i):Jlt(t,e,t.dump,i),h&&(t.dump="&ref_"+p+t.dump)):(w0r(t,e,t.dump),h&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&b0r(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new E0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(UE,"writeNode");function R0r(t,e){var r=[],n=[],i,o;for(ewe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(R0r,"getDuplicateReferences");function ewe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)ewe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)ewe(t[n[i]],e,r)}s(ewe,"inspectNode");function k0r(t,e){e=e||{};var r=new y0r(e);r.noRefs||R0r(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),UE(r,0,n,!0,!0)?r.dump+`
`:""}s(k0r,"dump$1");var P0r=k0r,D0r={dump:P0r};function owe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(owe,"renamed");var $9i=put.load,j9i=put.loadAll,swe=D0r.dump;var G9i=owe("safeLoad","load"),V9i=owe("safeLoadAll","loadAll"),z9i=owe("safeDump","dump");var l5=Me(Op());var awe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},ou=class{constructor(){this.dump=new Or(25);this.promptsDump=new Or(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new awe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function Tut(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(Tut,"filterConversationTurns");function jTe(t){return Tut(t).getLastTurn()?.id}s(jTe,"getLastTurnId");async function Dlt(t){let e=Tut(t.conversation),r=jTe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(ou).getDump(r),o=L0r(i,e.turns);An.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await M0r(i,t.ctx);return l5.default`
        ${N0r(t.conversation,r)}
        ${B0r(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Dlt,"getConversationDump");function B0r(t){let e=t.get(ln);return l5.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(B0r,"getEditorInfoDumpMessage");function N0r(t,e){return l5.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(N0r,"getInfoDumpMessage");async function Blt(t,e,r){let n=t.ctx.get(bl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(ji).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&sn(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${sn(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=l5.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=l5.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${swe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=l5.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Blt,"getSkillsDump");function L0r(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:sn(n.request.message)};return n.response&&(o.response=sn(n.response.message)),o})};return swe(r)}s(L0r,"toSimulationFormat");async function M0r(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(Cn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();An.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(M0r,"fileDump");d();function cwe(t,e){let r=vo(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(sn(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(cwe,"countMessagesTokens");d();function wut(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(wut,"chatBasePrompt");d();d();d();d();d();function _ut(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([lp(i.join(`
`)),1]),i=[],r.push([new Ut([o]),1])):r.push([new Ut([o]),1]),n=!n):n?i.push(o):r.push([new Ut([o]),.8]);return n&&(r.push([lp(i.join(`
`)),1]),r.push([new Ut(["```"]),1])),new Ut(r)}s(_ut,"fromMessage");function TN(t){let e=lwe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=Sut(i.request,n+1),a=i.response&&i.response?.type!=="meta"?Sut(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(_ut(c))}return r.length>0?new Ut([[new Ut(["Consider the following conversation history:"]),1],[Aw(r,"inverseLinear"),1]]):null}s(TN,"fromHistory");var F0r=5;function lwe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&sn(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,F0r).reverse()}s(lwe,"filterTurns");function Sut(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=sn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${sn(t.message)}`}s(Sut,"formatTurnMessage");d();d();d();var O0r=4,uwe={skillIds:[]},wne=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await $o.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(Wu).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let h=await this.chatFetcher.fetchResponse(p,n,f);return h.type!=="success"&&(Vr.error(this.ctx,"Failed to fetch prompt context, trying again..."),h=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(rl).inspectFetchResult(h),this.handleResult(h,f,sn(a),o,u.toolConfig)}else return uwe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),uwe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,O0r);else return Vr.error(this.ctx,"Missing tool call in meta prompt response"),uwe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Bt(this.ctx,`${Wl(i)}.metaPrompt`,l,0),Bt(this.ctx,`${Wl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var _ne=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return he(e,r,"org.springframework.boot","Spring Boot"),he(e,r,"jakarta.jakartaee-api","Jakarta EE"),he(e,r,"javax:javaee-api","Java EE"),he(e,r,"org.apache.struts:struts2-core","Apache Struts"),he(e,r,"org.hibernate:hibernate-core","Hibernate"),he(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),he(e,r,"javax.faces:jsf-api","JSF"),he(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return he(e,r,"com.google.guava","Google Guava"),he(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),he(e,r,"org.apache.commons:commons-io","Apache Commons IO"),he(e,r,"joda-time:joda-time","Joda-Time"),he(e,r,"com.google.code.gson:gson","Google Gson"),he(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),he(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),he(e,r,"org.apache.commons:commons-net","Apache Commons Net"),he(e,r,"org.apache.poi:poi","Apache POI"),he(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),he(e,r,"junit:junit","JUnit"),he(e,r,"org.testng:testng","TestNG"),he(e,r,"org.spockframework:spock-core","Spock"),he(e,r,"io.cucumber:cucumber-java","Cucumber"),he(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return he(e,r,"org.mockito","Mockito"),he(e,r,"org.assertj","AssertJ"),he(e,r,"org.hamcrest","Hamcrest"),he(e,r,"org.powermock","PowerMock"),he(e,r,"org.jmock","JMock"),he(e,r,"org.easymock","EasyMock"),he(e,r,"org.jmockit:jmockit","JMockit"),he(e,r,"com.github.tomakehurst:wiremock","WireMock"),he(e,r,"org.dbunit:dbunit","DBUnit"),he(e,r,"com.icegreen:greenmail","GreenMail"),he(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),he(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),he(e,r,"io.rest-assured:rest-assured","Rest-Assured"),he(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),he(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},Sne=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"@types/node","Node.js"),he(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||he(e,r,"react","React"),he(e,r,"angular","Angular"),he(e,r,"vue","Vue.js"),he(e,r,"ember","Ember.js"),he(e,r,"backbone","Backbone.js"),he(e,r,"meteor","Meteor"),he(e,r,"polymer","Polymer"),he(e,r,"aurelia","Aurelia"),he(e,r,"knockout","Knockout.js"),he(e,r,"dojo","Dojo Toolkit"),he(e,r,"mithril","Mithril.js"),he(e,r,"marionette","Marionette.js"),he(e,r,"marko","Marko.js"),he(e,r,"svelte","Svelte"),he(e,r,"hyperapp","Hyperapp"),he(e,r,"inferno","Inferno.js"),he(e,r,"preact","Preact"),he(e,r,"riot","Riot.js"),he(e,r,"moon","Moon.js"),he(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return he(e,r,"lodash","Lodash"),he(e,r,"moment","Moment.js"),he(e,r,"axios","Axios"),he(e,r,"redux","Redux"),he(e,r,"recoil","Recoil"),he(e,r,"jquery","jQuery"),he(e,r,"d3","D3.js"),he(e,r,"underscore","Underscore.js"),he(e,r,"ramda","Ramda"),he(e,r,"immutable","Immutable.js"),he(e,r,"rxjs","RxJS"),he(e,r,"three","Three.js"),he(e,r,"socket.io","Socket.IO"),he(e,r,"express","Express.js"),he(e,r,"next","Next.js"),he(e,r,"puppeteer","Puppeteer"),he(e,r,"cheerio","Cheerio"),he(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"jest","Jest"),he(e,r,"mocha","Mocha"),he(e,r,"jasmine","Jasmine"),he(e,r,"ava","AVA"),he(e,r,"qunit","QUnit"),he(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return he(e,r,"chai","Chai"),he(e,r,"sinon","Sinon"),he(e,r,"enzyme","Enzyme"),he(e,r,"protractor","Protractor"),he(e,r,"supertest","Supertest"),he(e,r,"nock","Nock"),he(e,r,"cypress","Cypress"),he(e,r,"@testing-library/react","React Testing Library"),r}},Rne=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"github.com/gorilla/mux","Gorilla Mux"),he(e,r,"github.com/go-chi/chi","Chi"),he(e,r,"github.com/gin-gonic/gin","Gin"),he(e,r,"github.com/labstack/echo","Echo"),he(e,r,"github.com/revel/revel","Revel"),he(e,r,"github.com/astaxie/beego","Beego"),he(e,r,"github.com/go-martini/martini","Martini"),he(e,r,"github.com/gobuffalo/buffalo","Buffalo"),he(e,r,"github.com/goji/goji","Goji"),he(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return he(e,r,"net/http","net/http"),he(e,r,"fmt","fmt"),he(e,r,"io","io"),he(e,r,"time","time"),he(e,r,"math","math"),he(e,r,"strconv","strconv"),he(e,r,"strings","strings"),he(e,r,"sort","sort"),he(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"github.com/onsi/ginkgo","ginkgo"),he(e,r,"github.com/onsi/gomega","gomega"),he(e,r,"github.com/stretchr/testify","testify"),he(e,r,"gopkg.in/check.v1","gocheck"),he(e,r,"github.com/franela/goblin","goblin"),he(e,r,"github.com/DATA-DOG/godog","godog"),he(e,r,"github.com/stesla/gospec","gospec"),he(e,r,"github.com/rjeczalik/gotest","gotest"),he(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return he(e,r,"github.com/stretchr/testify","Testify"),he(e,r,"github.com/smartystreets/goconvey","GoConvey"),he(e,r,"github.com/onsi/ginkgo","Ginkgo"),he(e,r,"github.com/golang/mock","GoMock"),he(e,r,"gopkg.in/check.v1","GoCheck"),he(e,r,"github.com/franela/goblin","Goblin"),he(e,r,"github.com/DATA-DOG/godog","GoDog"),he(e,r,"github.com/onsi/gomega","Gomega"),he(e,r,"github.com/stesla/gospec","GoSpec"),he(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},kne=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flask","Flask"),he(e,r,"django","Django"),he(e,r,"pyramid","Pyramid"),he(e,r,"tornado","Tornado"),he(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return he(e,r,"requests","requests"),he(e,r,"numpy","numpy"),he(e,r,"pandas","pandas"),he(e,r,"scipy","scipy"),he(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"pytest","Pytest"),he(e,r,"unittest","Unittest"),he(e,r,"doctest","Doctest"),he(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mock","Mock"),he(e,r,"hypothesis","Hypothesis"),he(e,r,"behave","Behave"),he(e,r,"lettuce","Lettuce"),he(e,r,"testify","Testify"),he(e,r,"pyhamcrest","PyHamcrest"),r}},Pne=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"laravel/framework","Laravel"),he(e,r,"symfony/symfony","Symfony"),he(e,r,"slim/slim","Slim"),he(e,r,"cakephp/cakephp","CakePHP"),he(e,r,"yiisoft/yii2","Yii"),he(e,r,"zendframework/zendframework","Zend Framework"),he(e,r,"phalcon/cphalcon","Phalcon"),he(e,r,"bcosca/fatfree","Fat-Free"),he(e,r,"fuel/fuel","FuelPHP"),he(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return he(e,r,"monolog/monolog","Monolog"),he(e,r,"vlucas/phpdotenv","PHP dotenv"),he(e,r,"symfony/console","Symfony Console"),he(e,r,"guzzlehttp/guzzle","GuzzleHttp"),he(e,r,"ramsey/uuid","Ramsey UUID"),he(e,r,"doctrine/orm","Doctrine ORM"),he(e,r,"php-di/php-di","PHP-DI"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"symfony/finder","Symfony Finder"),he(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"phpunit/phpunit","PHPUnit"),he(e,r,"behat/behat","Behat"),he(e,r,"phpspec/phpspec","PHPSpec"),he(e,r,"codeception/codeception","Codeception"),he(e,r,"atoum/atoum","Atoum"),he(e,r,"pestphp/pest","PestPHP"),he(e,r,"kahlan/kahlan","Kahlan"),he(e,r,"peridot-php/peridot","Peridot"),he(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockery/mockery","Mockery"),he(e,r,"php-mock/php-mock","PHP-Mock"),he(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),he(e,r,"padraic/mockery","Padraic Mockery"),he(e,r,"phpspec/prophecy","PHPSpec Prophecy"),he(e,r,"phpunit/php-invoker","PHPUnit Invoker"),he(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),he(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),he(e,r,"phpunit/php-timer","PHPUnit Timer"),he(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},Dne=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"Microsoft.NETCore.App",".NET Core"),he(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return he(e,r,"EntityFramework","Entity Framework"),he(e,r,"Newtonsoft.Json","Newtonsoft.Json"),he(e,r,"AutoMapper","AutoMapper"),he(e,r,"Serilog","Serilog"),he(e,r,"Dapper","Dapper"),he(e,r,"Polly","Polly"),he(e,r,"FluentValidation","FluentValidation"),he(e,r,"MediatR","MediatR"),he(e,r,"Hangfire","Hangfire"),he(e,r,"RabbitMQ.Client","RabbitMQ.Client"),he(e,r,"MassTransit","MassTransit"),he(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),he(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),he(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),he(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"xunit","xUnit"),he(e,r,"NUnit","NUnit"),he(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return he(e,r,"Moq","Moq"),he(e,r,"FluentAssertions","FluentAssertions"),he(e,r,"Bogus","Bogus"),he(e,r,"RestSharp","RestSharp"),he(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},Bne=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"flutter","Flutter"),he(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return he(e,r,"dartx","dartx"),he(e,r,"provider","Provider"),he(e,r,"rxdart","RxDart"),he(e,r,"dio","Dio"),he(e,r,"json_serializable","json_serializable"),he(e,r,"freezed","Freezed"),he(e,r,"moor","Moor"),he(e,r,"hive","Hive"),he(e,r,"http","http"),he(e,r,"path","path"),he(e,r,"intl","intl"),he(e,r,"equatable","equatable"),he(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test","test"),he(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockito","mockito"),he(e,r,"bloc_test","bloc_test"),r}},Nne=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"rails","Rails"),he(e,r,"sinatra","Sinatra"),he(e,r,"hanami","Hanami"),he(e,r,"grape","Grape"),he(e,r,"roda","Roda"),he(e,r,"padrino","Padrino"),he(e,r,"cuba","Cuba"),he(e,r,"ramaze","Ramaze"),he(e,r,"nyara","Nyara"),he(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return he(e,r,"active_record","ActiveRecord"),he(e,r,"sequel","Sequel"),he(e,r,"rom","ROM"),he(e,r,"datamapper","DataMapper"),he(e,r,"mongoid","Mongoid"),he(e,r,"neo4j","Neo4j"),he(e,r,"redis","Redis"),he(e,r,"cassandra","Cassandra"),he(e,r,"couchrest","CouchRest"),he(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"rspec","RSpec"),he(e,r,"minitest","Minitest"),he(e,r,"cucumber","Cucumber"),he(e,r,"spinach","Spinach"),he(e,r,"turnip","Turnip"),he(e,r,"bacon","Bacon"),he(e,r,"shoulda","Shoulda"),he(e,r,"test-unit","Test::Unit"),he(e,r,"wrong","Wrong"),he(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return he(e,r,"factory_bot","FactoryBot"),he(e,r,"faker","Faker"),he(e,r,"ffaker","FFaker"),he(e,r,"fabrication","Fabrication"),he(e,r,"machinist","Machinist"),he(e,r,"mocha","Mocha"),he(e,r,"flexmock","FlexMock"),he(e,r,"rr","RR"),he(e,r,"bourne","Bourne"),he(e,r,"not_a_mock","NotAMock"),r}},Lne=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return he(e,r,"tokio","tokio"),he(e,r,"async-std","async-std"),he(e,r,"hyper","hyper"),he(e,r,"actix-web","actix-web"),he(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return he(e,r,"serde","serde"),he(e,r,"regex","regex"),he(e,r,"rand","rand"),he(e,r,"log","log"),he(e,r,"lazy_static","lazy_static"),he(e,r,"libc","libc"),he(e,r,"futures","futures"),he(e,r,"rayon","rayon"),he(e,r,"reqwest","reqwest"),he(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return he(e,r,"test-case","test-case"),he(e,r,"proptest","proptest"),he(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return he(e,r,"mockall","mockall"),he(e,r,"double","double"),he(e,r,"rstest","rstest"),he(e,r,"mockiato","mockiato"),he(e,r,"mock_derive","mock_derive"),he(e,r,"mocktopus","mocktopus"),he(e,r,"mockers","mockers"),he(e,r,"mock_it","mock_it"),r}},Mne=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function he(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(he,"addFromLibraries");var Fne=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function kut(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(kut,"determineProgrammingLanguage");var Rut=[new _ne,new Sne,new Rne,new kne,new Pne,new Dne,new Bne,new Nne,new Lne,new Mne];function Put(t){let e=Rut.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new Fne(t,Rut);return new dwe(e)}s(Put,"getMetadataLookup");var dwe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Dut=I.Object({name:I.String(),version:I.Optional(I.String())}),But=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(Dut),buildTools:I.Array(Dut)}),fwe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Ut([`The user is working on a project with the following characteristics:
`]),1]);let n=Put(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Ut(r)}addProgrammingLanguage(e,r){let n=kut(e);this.turnContext.collectLabel(c1,n),r.push([new Ut([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(c1,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Ut([`${r}
${i}`]),1])}}},c1="project-metadata",One=class{constructor(e){this._resolver=e;this.id=c1;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new fwe(e)}};d();var Nut=Me(require("path"));var pwe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(Cn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Ut(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Ut(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=Zs(n);if(await this.turnContext.collectFile(Une,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new r1(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Ut([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Ut([`The referenced file \`${Nut.basename(r.uri)}\` is content excluded.`]),1]]}},hwe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Une="references",Qne=class{constructor(){this.id=Une;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new hwe}processor(e){return new pwe(e)}};var u5=s(()=>[c1,_A,Une,Sd],"mandatorySkills"),qne=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new wne(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!u5().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!u5().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!u5().includes(u)))}return c.push(...u5()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(ji).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(ji).getSupportedSkills(r.id),a=e.get(bl).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await s1(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...u5(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var Hne=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Vr.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Vr.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var Wne=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Vr.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var Q0r="X-Initiator",U0r="X-Interaction-ID",q0r="X-Interaction-Type";var $ne=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},mwe=class extends $ne{static{s(this,"User")}static id(){return"user"}},gwe=class extends $ne{static{s(this,"Agent")}static id(){return"agent"}},Awe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[Q0r]:this.initiator,[U0r]:this.interactionId,[q0r]:this.interactionType.toString()}}},b0=class t extends Awe{static{s(this,"LlmInteraction")}static user(e,r){return new t(mwe,e,r)}static agent(e,r){return new t(gwe,e,r)}};var Ew=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new ywe(this),this.steps=new Wne(e,r,n,e.get(sa)),this.collector=new Cwe(r,n,e.get(sa)),this.agentToolCalls=new Hne(e,r,n,e.get(sa))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.turn.resolvedModelConfiguration=e}toLlmInteraction(){if(this.conversation.source==="inline")return b0.user("conversation-inline",this.turn.telemetryId);{let e=this.turn.chatMode==="Agent"?"conversation-agent":"conversation-panel";return this.agentToolCalls.rounds.length?b0.agent(e,this.turn.telemetryId):b0.user(e,this.turn.telemetryId)}}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(sa).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},jne=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},_Q=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},ywe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(ji).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(ou).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new jne(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(bl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(ou).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof jne||i instanceof _Q)throw i;Vr.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},Cwe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function Lut(t,e){let[r,n,i]=await W0r(t,e);return i.push(...G0r(t)),r.length>0||n.length>0?[new Ut([[new Ut(["Consider the additional context:"]),1],[Aw(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(Lut,"fromSkills");async function W0r(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await V0r(t,a.skillId,e?.languageId??""))continue;let[c,l]=await $0r(t,a.skillId);c&&(u5().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(W0r,"handleSkillsInReverse");async function $0r(t,e){let n=t.ctx.get(bl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await j0r(t,n,c,u,a,f):[void 0,await Vne(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await Vne(t,n,"unresolvable",void 0,a)]}catch(i){if(Vr.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof _Q)throw i;return[void 0,await Vne(t,n,"failed")]}}s($0r,"safelyProcessSkill");async function j0r(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Ut([[n,1]]):a=n,[[a,r?.value()||0],await Vne(t,e,"resolved",a,i,o)]}s(j0r,"handleProcessedSkill");async function Vne(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(qa).getBestChatModelConfig(Ph("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=vo(u.tokenizer).tokenLength(f)}return t.ctx.get(ou).addResolution(t.turn.id,l),l}s(Vne,"determineResolution");function G0r(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(G0r,"handleIgnoredSkills");async function V0r(t,e,r){if(e!==c1&&e!==_A)return!0;let n=t.ctx.get(Ot),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===c1:e===_A}s(V0r,"includeSkill");var Mut=Me(Op());var d5=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=TN(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Ut(n),a]}async elidableSkills(e,r){return await Lut(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await HC.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=Rp(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[c,l]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:c},{role:"system",content:this.suffix(e)},{role:"user",content:a}],l]}},zne=class extends d5{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Mut.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var Fut=Me(Op());var Yne=class extends d5{static{s(this,"InlineUserPromptStrategy")}suffix(e){return Fut.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var vwe=Me(Op());var Kne=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=TN(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return vwe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=eot(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:QT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:vwe.default`
                    This is the user's question: 
                    ${sn(i).trim()} 
                `.trim()}],[]]}};d();var Out=Me(Op());var Jne=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=QT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Out.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=TN(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Ut(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var z0r=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Xne=class extends d5{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=Rp(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:z0r,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=QT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!dK(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!dK(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var Ewe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function SQ(t,e,r){return new Ewe(t,e,r)}s(SQ,"descriptor");var Qut=[SQ("user",Ph("user"),()=>new zne),SQ("inline",Ph("inline"),()=>new Yne),SQ("meta",Ph("meta"),()=>new Kne),SQ("suggestions",Ph("suggestions"),()=>new Jne),SQ("synonyms",Ph("synonyms"),()=>new Xne)],Zne=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=Qut.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return Qut}};var qut=require("console");var Wu=class{constructor(e,r=new Zne){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Fn).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(rl).inspectPrompt({type:r.promptType,prompt:Uut(c),tokens:l}),this.ctx.get(ou).addPrompt(e.turn.id,Uut(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,qut.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:Y0r(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,cwe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),cwe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(ln).getEditorInfo().readableName??this.ctx.get(ln).getEditorInfo().name,i=K0r(process.platform);return wut(this.ctx,n,r?.login,i,e)}};function Y0r(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(Y0r,"processResultOfElidableText");function Uut(t){return t.map(e=>sn(e.content)).join(`

`)}s(Uut,"debugChatMessages");function K0r(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(K0r,"mapPlatformToOs");var wN=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await $o.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(Wu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(Vr.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){Vr.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:h,suggestedTitle:m}=c.toolConfig.extractArguments(p);if(!h||!m){Vr.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:h.trim(),suggestedTitle:m.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){Vr.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){Vr.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Vr.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var _N=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(lje(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(rc).workspaceCount})),await this.turnContext.ctx.get(rl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:sn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:jT.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},uje(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:sn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new wN(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Vr.debug(this.turnContext.ctx,"Computed followup",c),Vr.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:gr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return mje(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",dje(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var eie=I.Union([I.String(),I.Number()]),f5=I.Union([I.String(),I.Number()]),J0r=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),tie=I.Object({uri:I.String(),position:I.Optional(Ol)}),RQ=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(gc),selection:I.Optional(gc),status:I.Optional(J0r),range:I.Optional(gc)}),X0r=I.Object({type:I.Literal("directory"),uri:I.String()}),SN=I.Union([RQ,X0r,Hct]),_m=I.Union([I.Literal("panel"),I.Literal("inline")]),Z0r=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),xwe=I.Union([I.String(),I.Array(Z0r)]),Hut=I.Object({request:xwe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(f5),model:I.Optional(I.String())});function rie(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(rie,"convertToMessageContent");function nie(t,e){if(t=Rp(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(nie,"appendToMessage");var iie=I.Union([I.Literal("Ask"),I.Literal("Agent")]),epr=I.Object({type:I.String(),description:I.String()}),Wut=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),epr),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),oie=I.Object({uri:I.String(),name:I.String()});var bwe="generate-response",sie=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},kQ=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(sa),this.chatFetcher=this.chatFetcher??new Ua(r.ctx),this.postProcessor=new _N(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Vr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof sie?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await xc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(rl).inspectPrompt(c),await n.steps.start(bwe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:Rp(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return gr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return lwe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:Rp(r.request.message)}),r.response&&r.response.type==="model"){let i=qct(r.response.references);n.push({role:"assistant",content:Rp(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Kct(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new pw((p,h,m,g,A)=>{let y=A?{...A,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:h,references:m,notifications:g.map(E=>({message:E.message,severity:"warning"})),confirmationRequest:y}),this.turn.response?(this.turn.response.message=nie(this.turn.response.message,p),this.turn.response.references.push(...m)):this.turn.response={message:p,type:"model",references:m},this.turn.annotations.push(...h??[]),y&&(this.turn.confirmationRequest=y)}),l=await this.turnContext.ctx.get(Gr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:sn(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,h)=>c.isFinishedAfter(p,h));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),sn(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new sie("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return bF(this.conversation,"conversationPanel",sn(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(bwe,e.error.message):await r.steps.finish(bwe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var PQ=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new kQ(this,e)}},aie=class extends PQ{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new kQ(this,e)}};d();var tpr="github",RA=class{static{s(this,"RemoteAgentRegistry")}},cie=class extends RA{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await s2(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(An.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||An.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||An.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==tpr).map(i=>new PQ(i.id,i.slug,i.name,i.description,i.avatar_url))}};var Iwe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[vN]}};async function s1(t){let e=[];return e.push(new aie),e.push(...await t.get(RA).agents()),e.push(new Iwe),e}s(s1,"getAgents");var rpr=I.Object({});async function npr(t,e,r){return[(await s1(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(npr,"handleConversationAgentsChecked");var $ut=ut(rpr,npr);d();d();var DQ=Me(zc());function ipr(t,e,r){let n=Fr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(ipr,"telemetryVersionMismatch");async function kA(t,e,r){let i=t.get(vr).getTextDocumentUnsafe(e);if(!i)throw new DQ.ResponseError(pn.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await Qv(t,e,i.getText());if(o.status==="invalid")throw t.get(yo).setInactive(o.reason),new DQ.ResponseError(pn.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(ipr(t,i,e.version),$u.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new DQ.ResponseError(pn.ContentModified,"Document Version Mismatch");return i}s(kA,"getTextDocument");async function l1(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await kA(t,n,r)}catch(i){if(i instanceof DQ.ResponseError&&i.code===pn.CopilotNotAvailable)return;throw i}}s(l1,"getTextDocumentIfAvailable");var opr=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),spr=I.Object({turnId:f5,codeBlockIndex:I.Number(),source:opr,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(tie),textDocument:I.Optional(Of),position:I.Optional(Ol),conversationSource:I.Optional(_m)});async function apr(t,e,r){let n=await l1(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=YI(r.conversationSource),c=t.get(ji).findByTurnId(r.turnId),l=await xc(t,c,{languageId:n?.detectedLanguageId??""});return nf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,mode:c?.turn.getChatModeWithDefault().toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Wl(a)}.acceptedCopy`,l),["OK",null]}s(apr,"handleConversationCodeCopyChecked");var jut=ut(spr,apr);d();var cpr=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),lpr=I.Object({turnId:f5,source:cpr,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(tie),textDocument:I.Optional(Of),position:I.Optional(Ol),conversationSource:I.Optional(_m)});async function upr(t,e,r){let n=await l1(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=YI(r.conversationSource),c=t.get(ji).findByTurnId(r.turnId),l=await xc(t,c,{languageId:n?.detectedLanguageId??""});return nf(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full",mode:c?.turn.getChatModeWithDefault().toLowerCase()??"unknown",modelId:c?.turn.getResolvedModelId()??"unknown"},i,`${Wl(a)}.acceptedInsert`,l),["OK",null]}s(upr,"handleConversationCodeInsertChecked");var Gut=ut(lpr,upr);d();d();var lie=I.Array(gc);function uie(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(uie,"resolveAsActiveEditor");d();var Vut=Me(zc());var die=new Vut.ProgressType,Twe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(Rr).connection.sendProgress(die,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(Rr).connection.sendProgress(die,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(Rr).connection.sendProgress(die,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(Rr).connection.sendProgress(die,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function RN(t){return new Twe(t.workDoneToken)}s(RN,"createProgressHandler");d();d();d();var ju=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var qE=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var kN=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var zut="```",BQ=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,dpr=String.raw`${zut}[\w]*?\n(?<codeblock>[\s\S]*?)\n${zut}`,fpr=new RegExp(BQ+`
`+dpr,"gs"),wwe=["replace","delete"];function _we(t,e){let r=t.matchAll(fpr),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!wwe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((A,y)=>{f[y]=A.slice(p.length)});let h={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},m=Swe([h],e);if(!m)continue;let g={text:m,uri:e.uri};i.push({...h,updatedDocument:g})}return i}s(_we,"extractEditsFromTaggedCodeblocks");function Swe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(Swe,"applyEditsToDocument");d();d();d();d();var HE=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new kp({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var ppr=new _t("activeEditorPrompt");async function Yut(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new _c;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&hpr(n.selection)){let o=new HE(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ui(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new HE(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new HE(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Ui(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new HE(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else ppr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Yut,"processActiveEditor");function hpr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(hpr,"notEmptySelection");d();d();function Kut(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Kut,"partsLength");async function Xut(t,e=1/0,r){let n=Jut(0,t,e),i=e-Kut(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return mpr();let u=Jut(c.level+1,l,i-1);u.length&&(o=!0,i-=Kut(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(Xut,"visualFileTree");function Jut(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Jut,"toParts");var mpr=s(()=>({tree:"",files:[]}),"emptyTree");var gpr=new _t("fileReferencesPrompt");async function Zut(t,e,r,n){let i=await edt(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=BB(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(Zut,"generateWorkspaceStructurePrompt");async function edt(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await Xut(await tdt(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(edt,"generateWorkspaceStructure");async function tdt(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(bo).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=qo(e,o);return r.excludeDotFiles&&o.startsWith(".")||Cpr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>tdt(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(tdt,"buildFileList");var Apr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],ypr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function Cpr(t){return!!(ypr.includes(Ui(t).toLowerCase())||ys(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>Apr.includes(r)))}s(Cpr,"shouldAlwaysIgnoreFile");async function fie(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Ui(a.uri)})),i=await edt(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${$a(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return gpr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(fie,"processDirectoryReferences");var vpr=new _t("fileReferencesPrompt");async function rdt(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let h=p.uri.toLowerCase();return!i.some(m=>h.endsWith(`.${m}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new _c;let h=[],m=await t.textDocumentProvider.getByUri(p.uri);if(m.status==="valid"){let g=new HE(m,void 0,[]);g&&h.push(...g.render())}else vpr.warn(t.context,`Failed to read file ${p.uri} with status ${m.status} and reason ${m.status==="notfound"?m.message:m.reason}`);return h})),Yut(t,e),fie(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(rdt,"processFileReferences");var ndt=new _t("editAgentPrompt"),pie=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=bxe(this.currentTurn.response?.message,!0),o=await HC.appendToUserMessage(this.ctx,this.props.workspaceFolders,sn(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return h7(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(c=>c.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:Rp(n.request.message)}),n.response){let i=bxe(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):ndt.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=m7(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+lQ(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(bee(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){ndt.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=m7(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${El}`),o.push("changed code"),o.push(`// ${El}`),o.push("changed code"),o.push(`// ${El}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${El}`),o.push("	age: number;"),o.push(`	// ${El}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await rdt({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${El}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${ys(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await Zut(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var idt=15,odt=128,PN=new _t("toolCallingLoop"),hie=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(sa),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(_d),this.prompt=new pie(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new hE(this.turnContext.ctx)}),this.requestId=gr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(Aje(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new pw((u,f,p,h)=>{let m=u.trim().match(BQ)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:f,references:p,hideText:m,notifications:h.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...f??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),PN.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,f)=>o.isFinishedAfter(u,f));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),PN.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new ju({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new _c;case"failed":throw this.turn.status="error",new ju({message:jT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new ju({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new ju({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new ju({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new ju({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new ju({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new ju({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new ju({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new ju({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=QT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let h=lct(p);await this.turnContext.agentToolCalls.result(n,e.id,h)}else if(p.status==="error"){let h=Pre(p);await this.turnContext.agentToolCalls.error(n,e.id,h.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof qE||l instanceof _c)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new uo([new Ni("")],"cancelled"),e.id),new qE(l.message);{PN.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${Hv(l)}`,l),c="error";let u=new uo([new Ni(Hv(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let f=Pre(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;yje(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;PN.error(this.turnContext.ctx,a);let c=new uo([new Ni(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=Pre(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new _c}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new qE("Cancelled by user");case"accept":return Promise.resolve();default:throw new qE(`Invalid confirmation result ${u.result}`)}}else PN.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>idt)throw PN.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${idt} for turn ${this.turn.id}`),new kN}checkChatPayload(e){if(e.messages.length===0)throw new ju({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>odt)throw new ju({message:`You may not include more than ${odt} tools in your request.`,responseIsFiltered:!1})}};var mie=new _t("agenticTurnProcessor"),gie=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(sa),this.chatFetcher=this.chatFetcher??new Ua(e.ctx),this.turnSuggestions=new wN(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Vr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(c),await this.endProgress({error:{message:c,code:tTe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await xc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{mie.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let l=await $o.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(l),await new hie(this.turnContext,this.chatFetcher,l,c).run(r);let f={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(r,c.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(f.suggestedTitle=p)}await this.endProgress(f)}catch(l){if(l instanceof qE)mie.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,l),this.turn.status="cancelled",await this.cancelProgress();else if(l instanceof _c)mie.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,l),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(l instanceof kN)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:{message:l.message,code:tTe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(l instanceof ju)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:l.conversationError});else throw mie.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,l),l}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Vr.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=m7(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var Rwe="collect-context",kwe="generate-response",Aie=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(sa),this.chatFetcher=this.chatFetcher??new Ua(e.ctx),this.postProcessor=new _N(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Vr.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:c,type:"meta"},await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await xc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(c=c.extendedBy({mode:this.turn.getChatModeWithDefault().toLowerCase(),...this.turn.userRequestedModel&&{modelId:this.turn.userRequestedModel}}),r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let l=EQ().find(h=>h.id===this.turn.template?.templateId);if(l?.response){await this.handleTemplateResponse(l,this.turn.template.userQuestion,r);return}let u=(await s1(this.turnContext.ctx)).find(h=>h.slug===this.turn.agent?.agentSlug);if(u){let h=await this.checkAgentPreconditions(u);if(h){await this.endProgress(h);return}}await n.steps.start(Rwe,"Collecting context"),await this.collectContext(n,r,c,this.strategy.uiKind,l,u);let f=a?(await this.turnContext.ctx.get(qa).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,f);if(!p)await n.steps.error(Rwe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(Rwe),await n.steps.start(kwe,"Generating response");let h=this.augmentTelemetry(p,c,l,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let m=await this.fetchConversationResponse(p.messages,r,c.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),h,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(m,n),await this.endProgress({error:m.error,followUp:m.followup,suggestedTitle:m.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Vr.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new qne(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let c="",l=0,u=new pw((g,A,y,E)=>{let b=g.trim().match(BQ)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:g,annotations:A,references:y,hideText:b,notifications:E.map(_=>({severity:"warning",message:_.message}))}),this.turn.response?this.turn.response.message=nie(this.turn.response.message,g):this.turn.response={message:g,type:"model"},this.turn.annotations.push(...A??[]),c+=g,this.strategy.currentDocument){let _=this.strategy.extractEditsFromResponse(c,this.strategy.currentDocument);_&&_.length>0&&(c="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:_}),l+=_.length)}}),f=await $o.getModelConfiguration(this.turnContext.ctx,"user",a);e=$o.transformMessages(e,f.modelFamily),this.turnContext.setResolvedModelConfiguration(f);let p=this.turn.getResolvedModelId();p&&(i=i.extendedBy({modelId:p}));let h={modelConfiguration:f,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:sn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(h,r,n,(g,A)=>u.isFinishedAfter(g,A));return i=i.extendedBy(void 0,{numCodeEdits:l}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,sn(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",fje(this.turnContext.ctx,this.conversation,this.strategy.uiKind,sn(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=bF(this.conversation,this.strategy.uiKind,sn(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=bF(this.conversation,this.strategy.uiKind,sn(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(kwe,e.error.message):await r.steps.finish(kwe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var yie=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await $o.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(Wu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},Cie=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(qa).getBestChatModelConfig(Ph(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(Wu).toPrompt(e,l)}async processResponse(e){let r=[],n=sn(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(Sd);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(Cn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=_we(e,r).filter(a=>wwe.includes(a.mode)),o=Swe(i,r);if(o)return await this.ctx.get(rl).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return _we(e,r)}};d();d();var sdt=Me(zc()),adt=Me(qg());var mf=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new sdt.ProtocolRequestType("conversation/context");this.typeCheck=Gs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(Rr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new adt.ResponseError(c.code,c.message,c.data);Vr.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Vr.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new qu(this.typeCheck.Errors(i));return i}}};var Pwe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},WE=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new Pwe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},vie=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(sa)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Vr.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(ji).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new mf(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await tC(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:gr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var $E=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(WE).get(r);if(i)return new vie(e,i);let a=(await s1(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new Cie(e.ctx):c=new yie(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new gie(e,c):new Aie(e,c)}};d();var cdt=Me(zc());var DN=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new cdt.ResponseError(pn.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function Eie(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ui(t.uri)}]}s(Eie,"resolveAsWorkspaceFolders");d();d();var Epr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),I0=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?Epr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var gf=class{constructor(){this.tokens=new Or(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new Sn.CancellationTokenSource,i=new I0([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var xpr=I.Object({conversationId:I.Optional(eie),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(Hut,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(Of),textDocument:I.Optional(Of),selection:I.Optional(gc),visibleRanges:I.Optional(lie),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(SN)),source:I.Optional(_m),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(oie)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(iie),needToolCallConfirmation:I.Optional(I.Boolean())});async function bpr(t,e,r){DN.validate(r.workspaceFolders);let n=await l1(t,r,e),i=t.get(ji).create(r);await Ipr(t,i,r,n);let o=i.turns[i.turns.length-1],a=RN(r),c=t.get(gf).add(a.progressToken,e),l=new Ew(t,i,o,c);return await(await t.get($E).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(bpr,"handleConversationCreateChecked");async function Ipr(t,e,r,n){for(let i of r.turns){let o=rie(i.request),a=new hw({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=sne(r.chatMode),a.userRequestedModel=i.model??r.model,a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Eie(c),u=uie({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(ji).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(Ipr,"addTurns");var ldt=ut(xpr,bpr);d();var Tpr=I.Object({conversationId:I.String()});function wpr(t,e,r){return t.get(ji).destroy(r.conversationId),["OK",null]}s(wpr,"handleConversationDestroyChecked");var udt=ut(Tpr,wpr);d();var _pr=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),Spr=new _t("conversationNotifyCodeAcceptance");async function Rpr(t,e,r){let n=t.get(ji).findByTurnId(r.turnId);if(!n)return Spr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await xc(t,n,{languageId:""});return nf(t,void 0,{},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Wl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(Rpr,"handleConversationNotifyCodeAcceptanceChecked");var ddt=ut(_pr,Rpr);d();var kpr=I.Object({});function Ppr(t,e,r){return[{path:t.get(ku).directory},null]}s(Ppr,"handleConversationPersistenceChecked");var fdt=ut(kpr,Ppr);d();d();var hdt=Me(require("node:events"));var Dwe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Fn).getSession(),n=e.get(Ql);return r&&r.githubAppId&&r.githubAppId!==wg?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},Bwe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Gr).getToken()).envelope.chat_enabled?"ok":"failed"}}},Dpr=[new Dwe,new Bwe],pdt="onPreconditionsChanged",Sm=class{constructor(e,r=Dpr){this.ctx=e;this.checks=r;this.emitter=new hdt.default;ha(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(pdt,e)}emit(e){this.emitter.emit(pdt,e)}};var Bpr=I.Object({forceCheck:I.Optional(I.Boolean())});async function Npr(t,e,r){let n=r.forceCheck??!1;return[await t.get(Sm).check(n),null]}s(Npr,"handleConversationPreconditionsChecked");var mdt=ut(Bpr,Npr);d();var Lpr=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(Of),textDocument:I.Optional(Of),source:I.Optional(_m)});async function Mpr(t,e,r){let n=await l1(t,r,e),i=YI(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await xc(t,t.get(ji).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return nf(t,n,{rating:o,uiKind:i},{},`${Wl(i)}.messageRating`,a),["OK",null]}s(Mpr,"handleConversationRatingChecked");var gdt=ut(Lpr,Mpr);d();d();var xie=class extends dw{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:JC,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(UT).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new _c;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(NC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Fpr=I.Object({tools:I.Array(Wut)});function Opr(t,e,r){return r.tools.forEach(n=>{t.get(_d).registerTool(new xie({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(Opr,"conversationRegisterToolsChecked");var Adt=ut(Fpr,Opr);d();var Qpr=I.Object({});function Upr(t,e,r){return[$Te(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(Upr,"handleConversationTemplatesChecked");var ydt=ut(Qpr,Upr);d();var qpr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:eie,turnId:I.Optional(f5),message:xwe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(Of),textDocument:I.Optional(Of),selection:I.Optional(gc),visibleRanges:I.Optional(lie),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(SN)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(oie)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:tot,model:I.Optional(I.String()),chatMode:I.Optional(iie),needToolCallConfirmation:I.Optional(I.Boolean())});async function Hpr(t,e,r){DN.validate(r.workspaceFolders);let n=await l1(t,r,e),i=t.get(ji),o=i.get(r.conversationId),a=rie(r.message),c=new hw({message:a,type:"user"},r.turnId);c.chatMode=sne(r.chatMode),c.userRequestedModel=r.model,c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:Eie(l),f=uie({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=RN(r),h=t.get(gf).add(p.progressToken,e),m=new Ew(t,o,c,h);return await(await t.get($E).createProcessor(m,p.progressToken,r.computeSuggestions)).process(p,h,r.followUp,n,r.model),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model},null]}s(Hpr,"handleConversationTurnChecked");var Cdt=ut(qpr,Hpr);d();var Wpr=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(_m)});async function $pr(t,e,r){t.get(ji).deleteTurn(r.conversationId,r.turnId);let i=YI(r.source),o=await xc(t,t.get(ji).findByTurnId(r.turnId),{languageId:""});return nf(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Wl(i)}.messageDelete`,o),["OK",null]}s($pr,"handleConversationTurnDeleteChecked");var vdt=ut(Wpr,$pr);d();var jpr=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function Gpr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(Gpr,"buildSystemMessage");function Vpr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Vpr,"buildUserMessage");function zpr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,h]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let m=parseInt(l)-1;if(m<0||m>=n.length)continue;let g=n[m],A=Math.max(g.search(/\S/),0),y=g.trimEnd().length,E={uri:t.uri,range:{start:{line:m,character:A},end:{line:m,character:y}},message:h.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(E)}return r}s(zpr,"parseReviewComments");async function Ypr(t,e,r){if(!r.document.text)return[null,{code:pn.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:pn.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:pn.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:pn.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:pn.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(Ua),o=await $o.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:Gpr()},{role:"user",content:Vpr(r)}],c=await t.get(Ot).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:b0.user("code-review",gr())},e,c);if(l.type!=="success")return[null,{code:pn.InternalError,message:"Failed to generate code review"}];let u=zpr(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(Ypr,"handleCopilotCodeReviewChecked");var Edt=ut(jpr,Ypr);d();d();var xw=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,CE.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return b0.user("conversation-edits",this.editTurnId)}};d();async function bie(t,e,r,n){let o=t.get(el).create("panel","en"),a=new GT({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new xw(t,o,a,n,yn.Gpt4o),u=t.get(Uu);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(bie,"streamMockedResult");d();var Kpr=I.Object({enableMock:I.Boolean()}),u1=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Jpr(t,e,r){return t.get(u1).setMockEnabled(r.enableMock),["OK",null]}s(Jpr,"handleTestingSetCopilotEditsResponseChecked");var xdt=ut(Kpr,Jpr);var Xpr=I.Object({request:I.String(),response:I.Optional(I.String())}),Zpr=I.Union([I.Literal("panel")]),ehr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(Xpr,{minItems:1}),workingSet:I.Optional(I.Array(RQ)),source:I.Optional(Zpr),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function thr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new GT({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(thr,"buildEditConversation");async function rhr(t,e,r){if(t.get(u1).isMockEnabled())return await bie(t,gr(),gr(),r.partialResultToken),[[],null];let n=thr(t.get(el),r),i=n.getLastTurn(),o=new xw(t,n,i,r.partialResultToken,r.model),a=t.get(gf).add(r.partialResultToken,e);return[await t.get(vE).createOrContinueEditConversation(o,a),null]}s(rhr,"handleEditConversationCreateChecked");var bdt=ut(ehr,rhr);d();var nhr=I.Object({editConversationId:I.String()});function ihr(t,e,r){return t.get(el).destroy(r.editConversationId),["OK",null]}s(ihr,"handleEditConversationDestroyChecked");var Idt=ut(nhr,ihr);d();var ohr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(RQ)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function shr(t,e,r){let n=t.get(e),i=new GT({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(shr,"buildEditConversation");async function ahr(t,e,r){if(t.get(u1).isMockEnabled())return await bie(t,r.editConversationId,gr(),r.partialResultToken),[[],null];let n=t.get(el),i=shr(n,r.editConversationId,r),o=i.getLastTurn(),a=new xw(t,i,o,r.partialResultToken,r.model),c=t.get(gf).add(r.partialResultToken,e);return[await t.get(vE).createOrContinueEditConversation(a,c),null]}s(ahr,"handleEditConversationTurnChecked");var Tdt=ut(ohr,ahr);d();var chr=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(_m)});async function lhr(t,e,r){t.get(el).deleteTurn(r.editConversationId,r.editTurnId);let i=await xF(t,r.editTurnId,r.editConversationId,{languageId:""});return nf(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Wl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(lhr,"handleEditConversationTurnDeleteChecked");var wdt=ut(chr,lhr);d();var uhr=I.Object({}),dhr=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(_7)}))}))});function fhr(t,e,r){return[t.get(vm).getAllTools(),null]}s(fhr,"handleGetMCPToolsChecked");function phr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(vm).updateMCPToolStatus(i,a,c);return[t.get(vm).getAllTools(),null]}s(phr,"handleUpdateMCPToolsStatusChecked");var _dt=ut(uhr,fhr),Sdt=ut(dhr,phr);d();var hhr=I.Object({});async function mhr(t,e,r){let n=await t.get(Gr).getToken();return[ghr(await t.get(Jd).getMetadata(),n),null]}s(mhr,"handleCopilotModelsChecked");function ghr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=Bh.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!Z7e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(ghr,"filterModels");var Rdt=ut(hhr,mhr);d();var Ahr=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function yhr(t,e,r){return r.model&&r.status==="enabled"?await t.get(Jd).acceptModelPolicy(r.model)?["OK",null]:[null,{code:pn.InternalError,message:"Failed to accept model policy"}]:[null,{code:pn.InvalidRequest,message:"Invalid model or status"}]}s(yhr,"handleCopilotModelsPolicyChecked");var kdt=ut(Ahr,yhr);d();d();d();d();function Chr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(Chr,"panelPositionForDocument");async function*Pdt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Pdt,"trimChoices");var BN=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=Chr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function Nwe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await Nwe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(Nwe,"reportSolutions");async function Lwe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:Lwe(t,e)}}s(Lwe,"generateSolutionsStream");function Iie(t){return t.replace(/\s+/g,"")}s(Iie,"normalizeCompletionText");async function Ddt(t,e,r,n,i){let o=e.targetPosition,a=e.textDocument,c=RI(t,a.uri),l=gr(),u=Fr.createAndMarkAsIssued({headerRequestId:l,languageId:a.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Ot).updateExPValuesAndAssignments({uri:a.uri,languageId:a.detectedLanguageId},u),i&&(e.savedTelemetryData=e.savedTelemetryData.extendedBy({engineName:i}));let f=await fD(t,l,uC(a,o),e.savedTelemetryData);if(f.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(f.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(f.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(f.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(f.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let p=f.prompt,h=f.trailingWs;return h.length>0&&(e.startPosition=us.position(e.startPosition.line,e.startPosition.character-h.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...aP(p),solutionCount:e.solutionCountTarget,promptEndPos:a.offsetAt(o)}),n.debug(t,"prompt:",p),Bt(t,"solution.requested",e.savedTelemetryData),{prompt:p,trailingWs:h,telemetryData:e.savedTelemetryData,repoInfo:c,ourRequestId:l}}s(Ddt,"setupPromptAndTelemetry");function Bdt(t,e,r,n,i,o){let a=t.get(Og).forLanguage(t,e.detectedLanguageId,o),c=cp(e.detectedLanguageId),l=_J(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=SI(t,o),h;switch(a){case"server":h=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":h=c?UF(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:h=c?UF(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:h,engineInfo:p}}s(Bdt,"setupCompletionParams");var Mwe=new _t("solutions");async function vhr(t,e){let r=e.targetPosition,n=e.textDocument,i=await Ddt(t,e,"open copilot",Mwe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:h,engineInfo:m}=Bdt(t,n,r,o,e,c),g=e.cancellationToken,A={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:m.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:m.headers,extra:f},y=await t.get(t0).fetchAndStreamCompletions(t,A,c.extendedBy(),h,g);if(y.type==="failed"||y.type==="canceled")return{status:"FinishedWithError",error:`${y.type}: ${y.reason}`};let E=y.choices;E=Pdt(E),E=EF(E,S=>qF(t,n,r,S,!1,Mwe));let b=EF(E,async S=>{let P=S.completionText;Mwe.info(t,`Open Copilot completion: [${S.completionText}]`);let B=await yVe(t,n,r,S.completionText)??us.position(r.line,0),[F]=rT(n.getText(us.range(B,r)));P=F+P;let Y=S.completionText;a.length>0&&Y.startsWith(a)&&(Y=Y.substring(a.length));let ee=S.meanLogProb,V=ee!==void 0?Math.exp(ee):0,H=c.extendedBy({choiceIndex:S.choiceIndex.toString()});return{completionText:Y,insertText:P,range:us.range(B,r),meanProb:V,meanLogProb:ee||0,requestId:S.requestId,choiceIndex:S.choiceIndex,telemetryData:H,copilotAnnotations:S.copilotAnnotations}});return Lwe(g,b[Symbol.asyncIterator]())}s(vhr,"launchSolutions");async function Tie(t,e,r){return t.get(yo).withProgress(async()=>{let i=vhr(t,e);return await Nwe(i,r)})}s(Tie,"runSolutions");var Ldt=Me(Ib()),LQ=Me(zc());d();d();function wie(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(wie,"parseChallengeDoc");var Ehr=I.Object({text:I.String(),score:I.Number()}),xhr=I.Object({documents:I.Array(Ehr),options:I.Optional(I.Object({}))});async function _ie(t,e,r){let n=gr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=wie(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,h)=>p+h.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:wy.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(_ie,"runTestSolutions");var PA=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function bhr(t,e,r){return t.forceSet(PA,new PA(r.documents)),["OK",null]}s(bhr,"handleTestingSetPanelCompletionDocumentsChecked");var Ndt=ut(xhr,bhr);var Mdt=_$.type;function Ihr(t,e,r,n,i){let o=Iie(n.completionText),a=(0,Ldt.SHA256)(o).toString();return t.get(Ms).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:XIe,title:`Accept completion ${i}`,arguments:[a]}}}s(Ihr,"makeCompletion");function Owe(t,e){return`${t}/${e}`}s(Owe,"progressMessage");var Fwe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Rr)}async onSolution(e){this.count+=1;let r=Ihr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(LQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Owe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return Thr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(LQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function Thr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(LQ.WorkDoneProgress.type,t,{kind:"end",message:Owe(r,10)})}s(Thr,"reportDone");var NQ;async function whr(t,e,r){let n=await kA(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(Rr).connection.sendProgress(LQ.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Owe(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(Rr).connection.sendProgress(_$.partialResult,c,{items:[f]})},"onCompletion"));let l=new Fwe(t,r,a),u=t.get(PA);if(u.documents){let f=u.documents;await _ie(i,f,l)}else{l.offset=n.offsetAt(i);let f=new BN(n,i,e,10);await Tie(t,f,l)}return l.error!==void 0?[null,{code:pn.InternalError,message:l.error}]:[{items:o},null]}s(whr,"handleChecked");async function _hr(t,e,r){NQ&&(NQ.cancel(),NQ.dispose()),NQ=new Sn.CancellationTokenSource;let n=NQ.token,i=new I0([e,n]);try{return await whr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:pn.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(_hr,"handleCheckedWithAbort");var Fdt=ut(NNe,_hr);d();d();d();function Rhr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(Hd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(Rhr,"urlsToCheck");async function Odt(t,e,r=lP(t),n,i){let o=Rhr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await khr(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(Odt,"checkReachability");async function khr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(khr,"determineReachability");var Up=Me(require("os")),NN=Me(require("tls"));async function Udt(t,e){let r=await t.get(zn).getImplementation(),n=await t.get(Gr).getGitHubSession(),i=await t.get(Gr).getToken().catch(()=>{});return{sections:[Dhr(t),Phr(t,n),Bhr(t,r),await Nhr(t,r,i?.endpoints,n,e)]}}s(Udt,"collectDiagnostics");function qdt(t){return t.sections.map(Lhr).join(Up.EOL+Up.EOL)+Up.EOL}s(qdt,"formatDiagnosticsAsMarkdown");function Phr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:J_(t),"GitHub Account":n,"Session ID":t.get(Ts).sessionId,"Send Restricted Telemetry":cP(t)?"enabled":"disabled","Content Exclusion":t.get(Yc).enabled?"enabled":"unavailable"}}}s(Phr,"collectCopilotSection");function Dhr(t){let e={Plugin:Fhr(t),Editor:Mhr(t),"Operating System":`${Up.type()} ${Up.release()} (${Up.arch()})`};return d1(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(Dhr,"collectEnvironmentSection");function Bhr(t,e){let r=t.get(vu).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":NN.rootCertificates.length,"TLS Default Min Version":NN.DEFAULT_MIN_VERSION,"TLS Default Max Version":NN.DEFAULT_MAX_VERSION};return d1(n,"http_proxy"),d1(n,"https_proxy"),d1(n,"no_proxy"),d1(n,"SSL_CERT_FILE"),d1(n,"SSL_CERT_DIR"),d1(n,"OPENSSL_CONF"),d1(n,"NODE_EXTRA_CA_CERTS"),d1(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(Bhr,"collectNetworkConfigSection");async function Nhr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Odt(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(Nhr,"collectReachabilitySection");function Qdt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(Qdt,"quoteCode");function d1(t,e){let r=process.env[e];r&&(t[Qdt(e)]=Qdt(r)),r!==process.env[e.toUpperCase()]&&d1(t,e.toUpperCase())}s(d1,"addEnvironmentVariable");function Lhr(t){return`## ${t.name}`+Up.EOL+Up.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Up.EOL)}s(Lhr,"formatSectionAsMarkdown");function Mhr(t){let e=t.get(ln).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(Mhr,"getEditorDisplayVersion");function Fhr(t){let e=t.get(ln).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(Fhr,"getPluginDisplayVersion");var Ohr=I.Object({});async function Qhr(t,e){return[{report:qdt(await Udt(t,e))},null]}s(Qhr,"handleDiagnosticsChecked");var Hdt=ut(Ohr,Qhr);d();d();d();d();function Wdt(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,h=>" ".repeat((Math.floor(h/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(Wdt,"normalizeIndentCharacter");function $dt(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=us.range(us.position(i.line,0),us.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=Wdt(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let m=us.range(f.start,i);p=n.getText(m)+u.completion.displayText}return{uuid:gr(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s($dt,"completionsFromGhostTextResults");async function Qwe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await Rye(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=ize(t,e.textDocument,e.position,c),u=$dt(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};if(c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let p={isSpeculative:!0,opportunityId:n.opportunityId},h=s(()=>Rye(t,e,void 0,p),"fn");t.get(Kh).set(u[0].clientCompletionId,h)}let f=u.map(p=>{let{start:h,end:m}=p.range,g=Sn.Range.create(h,Sn.Position.create(m.line,m.character-i));return{...p,range:g}});return{...o,value:f}}s(Qwe,"getInlineCompletionsResult");async function Sie(t,e,r,n,i={}){Uhr(t,e,r);let o=await Qwe(t,uC(e,r),n,i);return Sje(t,o)}s(Sie,"getInlineCompletions");function Uhr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});gK.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(Uhr,"logCompletionLocation");var Kdt=Me(zc());d();var jdt=require("crypto");var LN=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new qwe(e,this.id)}},qwe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(Rr),o=(0,jdt.randomUUID)(),a=i.connection.onProgress(I$.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(I$.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function MN(t,e,r){try{let n=t.get(bc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof LN&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof LN&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){An.error(t,"Failed to set context items on context providers",n)}}s(MN,"setContextItems");var Uwe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function Gdt(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Ec(r.uri,i,Uwe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Ec(r.uri,i.scheme||"",Uwe)),"pattern"in i&&(o&&=Ec(r.uri,i.pattern||"",Uwe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Gdt,"match");d();var qhr=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Iw=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function Hhr(t,e,r){return t.forceSet(Iw,new Iw(r.documents,r.basename||"")),["OK",null]}s(Hhr,"handleTestingSetCompletionDocumentsChecked");var Vdt=new _t("setCompletionDocuments"),Ydt=ut(qhr,Hhr);function Rie(t,e,r,n){let i=t.get(Iw);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Vdt.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=Whr(i,r);return a&&a.length>0?zdt(a,o,e):void 0}else return Vdt.debug(t,"Returning completions for all pre-set documents"),zdt(i.documents,o,e)}}s(Rie,"getTestCompletions");function zdt(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=wie(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(zdt,"sliceAndMapCompletions");function Whr(t,e){return t.basename===Ui(e)?t.documents||[]:[]}s(Whr,"getFilteredDocs");var Jdt=I.Object({doc:I.Object({position:Ol,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:E6,version:I.Number()}),contextItems:I.Optional(SAe)}),MQ;async function Xdt(t,e,r,n){MQ&&(MQ.cancel(),MQ.dispose()),MQ=new Sn.CancellationTokenSource;let i=new I0([e,MQ.token]);r.contextItems&&MN(t,r.contextItems);let o=Rie(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(h=>({uuid:gr(),text:h.insertText,displayText:h.insertText,position:r.doc.position,range:h.range,docVersion:r.doc.version}))},null];let a;try{a=await kA(t,r.doc,i)}catch(p){if(!(p instanceof Kdt.ResponseError))throw p;switch(p.code){case pn.CopilotNotAvailable:case pn.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await Sie(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(Ms);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Xdt,"handleGetCompletionsHelper");var Zdt=ut(Jdt,(t,e,r)=>Xdt(t,e,r,!1)),eft=ut(Jdt,(t,e,r)=>Xdt(t,e,r,!0));d();var tft=Me(Ib()),FN=Me(zc());var $hr=I.Object({doc:I.Object({position:Ol,uri:E6,version:I.Number()}),panelId:I.String()});function jhr(t,e,r,n,i){let o=Iie(i.completionText),a=(0,tft.SHA256)(o).toString();return t.get(Ms).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(jhr,"makeSolution");var Hwe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Rr)}onSolution(e){return this.service.connection.sendNotification(new FN.NotificationType("PanelSolution"),jhr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return rft(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new FN.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function rft(t,e){return e.connection.sendNotification(new FN.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(rft,"reportDone");var FQ;async function Ghr(t,e,r){FQ&&(FQ.cancel(),FQ.dispose()),FQ=new Sn.CancellationTokenSource;let n=new I0([e,FQ.token]),i=r.doc.position,o=us.range(i,i),a=new Hwe(t,r,o),c=t.get(PA);if(c.documents){let l=c.documents;_ie(i,l,a)}else{let l;try{l=await kA(t,r.doc,n)}catch(f){if(!(f instanceof FN.ResponseError))throw f;switch(f.code){case pn.CopilotNotAvailable:case pn.ContentModified:return Vhr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new BN(l,i,n,10);Tie(t,u,a)}return[{solutionCountTarget:10},null]}s(Ghr,"handleGetPanelCompletionsChecked");async function Vhr(t,e){return await rft(e.panelId,t.get(Rr)),[{solutionCountTarget:0},null]}s(Vhr,"produceEmptySolutions");var nft=ut($hr,Ghr);d();var zhr=I.Object({});function Yhr(t,e,r){return[{version:t.get(ho).getDisplayVersion(),buildType:_y(t),runtimeVersion:`node/${process.versions.node}`},null]}s(Yhr,"handleGetVersionChecked");var ift=ut(zhr,Yhr);d();var Khr=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function Jhr(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(Jhr,"buildSystemMessage");function Xhr(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(Xhr,"buildUserMessage");async function Zhr(t,e,r){if(r.changes.length===0)return[null,{code:pn.InvalidRequest,message:"No changes provided"}];let n=new Ua(t),i=await $o.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:dl(process.cwd())}],a=await HC.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),c=t.get(ji),l=c.create({capabilities:{skills:[n1]}}),u=new hw({message:"",type:"user"});await c.addTurn(l.id,u);let f=RN({workDoneToken:gr()});await t.get(sa).begin(l,u,f);let m=(await new Ew(t,l,u,e).skillResolver.resolve(n1))?.head?.name,g=[{role:"system",content:await Jhr(r.userLanguage,m)},{role:"user",content:Xhr(r,a)}],A=await t.get(Ot).updateExPValuesAndAssignments(),y=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:b0.user("git-commit",gr())},e,A);if(y.type!=="success")return[null,{code:pn.InternalError,message:"Failed to generate commit message"}];let E=y.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:E?E[1].trim():y.value.trim()},null]}s(Zhr,"handleGitCommitGenerateChecked");var oft=ut(Khr,Zhr);d();var aft=hde.type,OQ;function sft(t){return{title:"Completion Accepted",command:pQ,arguments:[t]}}s(sft,"makeCommand");async function emr(t,e,r){OQ&&(OQ.cancel(),OQ.dispose());let n=r.context.triggerKind===1;OQ=new Sn.CancellationTokenSource;let i=OQ.token,o=new I0([e,i]);r.contextItems&&MN(t,r.contextItems,r.data);let a=Rie(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(m=>({command:sft(gr()),...m}))},null];let c=await kA(t,r.textDocument,o),l=r.position,u=await Sie(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:pn.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:pn.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get(Ms);for(let h of u)f.set(h.uuid,{...h,triggerCategory:"ghostText"});return[{items:u.map(h=>({command:sft(h.uuid),insertText:h.insertText,range:h.range}))},null]}s(emr,"handleChecked");var cft=ut(yK,(t,e,r)=>emr(t,e,r));d();var lft=Ade.type,QQ;async function rmr(t,e,r){QQ&&(QQ.cancel(),QQ.dispose());let n=r.context.triggerKind===1;QQ=new Sn.CancellationTokenSource;let i=QQ.token,o=new I0([e,i]);r.contextItems&&MN(t,r.contextItems);let a=await kA(t,r.textDocument,o),c=await Qwe(t,uC(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(rmr,"handleChecked");var uft=ut(yK,(t,e,r)=>rmr(t,e,r));d();d();function Wwe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return ON(i)}s(Wwe,"asReadableCert");function ON(t){return t.replace(/\s/g,"")}s(ON,"normalizeNewlines");var imr=I.Object({});async function omr(t){return[{certificates:(await t.get(Zc).getAllRootCAs()).map(ON)},null]}s(omr,"handleListCertificatesChecked");var dft=ut(imr,omr);d();async function smr(t,e,r){let n=t.get(bA);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=fl(r.textDocument.uri);t.get(Kg).onUserPositionChange(i,new cn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:pQ,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(smr,"handleChecked");var fft=ut(DNe,smr);d();var cmr=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function lmr(t,e,r){let n=t.get(Ms),i=n.get(r.uuid);return i&&(umr(r,i)==="full"?(n.delete(r.uuid),yD(t,i,i.triggerCategory)):FJ(t,i,r.acceptedLength,0,i.triggerCategory,"cumulative")),["OK",null]}s(lmr,"notifyAcceptedChecked");function umr(t,e){return t.acceptedLength===void 0?"full":t.acceptedLength<e.insertText.length?"partial":"full"}s(umr,"getCompletionType");var pft=ut(cmr,lmr);d();var dmr=I.Object({uuids:I.Array(I.String())});function fmr(t,e,r){let n=t.get(Ms),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));MJ(t,"ghostText",o.offset,o.uri,a),t.get(Nu).resetState()}return["OK",null]}s(fmr,"notifyRejectedChecked");var hft=ut(dmr,fmr);d();var pmr=I.Object({uuid:I.String({minLength:1})});function hmr(t,e,r){let i=t.get(Ms).get(r.uuid);return i&&AK(t,i.triggerCategory,i),["OK",null]}s(hmr,"notifyShownChecked");var mft=ut(pmr,hmr);d();var mmr=Bje;function gmr(t,e,r){let n=t.get(bc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new LN(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(gmr,"registerContextProviders");var gft=ut(mmr,gmr);d();d();var Amr=I.Object({uri:I.Optional(I.String())}),ymr=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),yft=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[YRe]:I.Optional(Amr),http:I.Optional(dUe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),jwe=Object.keys(yft.properties).filter(t=>t!=="github"),Cmr=I.Intersect([yft,ymr]),vmr=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),Aft=Gs.Compile(vmr),$we=Gs.Compile(Cmr);async function Cft(t,e){if(!Aft.Check(e))throw new qu(Aft.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&Gwe(t,r),await UQ(t,r)}s(Cft,"notifyChangeConfiguration");function Gwe(t,e){for(let i of $we.Errors(e)){let o=i.path.split("/")?.[1];$u.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!$we.Check(e))throw new qu($we.Errors(e));let r=t.get(TA);r.setConfig(Qt.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(Qt.DelayCompletions,e.delayCompletions),r.setConfig(Qt.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(Qt.FilterCompletions,e.filterCompletions),e.http&&Vwe(t,e.http);let n=e["github-enterprise"];n&&YNe(t,n.uri),e.github?.copilot&&Emr(t,e.github.copilot)}s(Gwe,"applySettingsToConfiguration");function Emr(t,e){let r=t.get(TA);for(let n of Object.values(Qt)){let i=gUe(e,n);r.setConfig(n,i)}typeof e.mcp=="string"&&Imr(t,e.mcp),xmr(t,e.globalCopilotInstructions||""),bmr(t,e.globalGitCommitInstructions||"")}s(Emr,"applyCopilotConfiguration");function xmr(t,e){try{t.get(LC).setGlobalCopilotInstructions(e)}catch(r){$u.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(xmr,"applyGlobalCopilotInstructionsConfiguration");function bmr(t,e){try{t.get(LC).setGlobalGitCommitInstructions(e)}catch(r){$u.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(bmr,"applyGlobalGitCommitInstructionsConfiguration");function Vwe(t,e){let r=t.get(TA);e.proxy===void 0&&(e=fUe(r.env));try{r.setHttpSettings(qM(e))}catch(n){if(!(n instanceof TypeError))throw n;$u.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(Vwe,"applyHttpConfiguration");async function Imr(t,e){try{let r=JSON.parse(e||"{}");await t.get(vm).updateMCPServers(r)}catch(r){$u.error(t,"Failed to apply MCP configuration",r)}}s(Imr,"applyMCPConfiguration");async function UQ(t,e){if(!t.get(vs).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Qf).initialize(r)}await t.get(Gr).primeToken()}s(UQ,"initializePostConfigurationDependencies");var vft=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),Tmr=I.Object({editorInfo:vft,editorPluginInfo:vft,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function wmr(t,e,r){return t.get(ln).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Wre(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&Gwe(t,r.editorConfiguration),await UQ(t,r.editorConfiguration),["OK",null]}s(wmr,"handleSetEditorInfoChecked");var Eft=ut(Tmr,wmr);d();var _mr=I.Object({options:I.Optional(I.Object({}))});async function Smr(t,e,r){let n=t.get(Fn).pendingSignIn?.status;if(n===void 0)return[null,{code:pn.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:pn.DeviceFlowFailed,message:String(o)}]}finally{t.get(Fn).pendingSignIn=void 0}}s(Smr,"handleSignInConfirmChecked");var xft=ut(_mr,Smr);d();var Rmr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function kmr(t,e,r){try{let n=t.get(Fn),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(Ql).findAppIdToAuthenticate(),a=await t.get(N2).getToken(t,o,n.getConfiguredUrls()),c=a.waitForAuth.then(async l=>(t.get(Ql).githubAppId=o,await t.get(Fn).setPersistedSession(l),await t.get(Fn).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Fn).pendingSignIn={verificationUri:a.verification_uri,status:c},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:$re,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof qs))throw n;return[null,{code:pn.DeviceFlowFailed,message:n.message}]}}s(kmr,"handleSignInInitiateChecked");var zwe=ut(Rmr,kmr);d();var Pmr=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function Dmr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(Fn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(Fn).checkAndUpdateStatus(),null]}s(Dmr,"handleSignInWithGithubTokenChecked");var bft=ut(Pmr,Dmr);d();var Bmr=I.Object({options:I.Optional(I.Object({}))});async function Nmr(t,e,r){return await t.get(Fn).deletePersistedSession(),[await t.get(Fn).checkAndUpdateStatus(),null]}s(Nmr,"handleSignOutChecked");var Ift=ut(Bmr,Nmr);d();var Lmr=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Ywe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function Mmr(t,e,r){let n=t.get(ho),i=t.get(ln).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&ZC.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:Nce(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},ZC.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new Ywe(r.stacktrace??"N/A",i.name);return c.stack=void 0,Na(t,c,void 0,o,a),["OK",null]}s(Mmr,"handleTelemetryExceptionChecked");var Tft=ut(Lmr,Mmr);d();d();function wft(t={}){return{accessToken:gr(),login:"test login",...t,...Gb(t)}}s(wft,"testGitHubSession");var kie=class extends Fn{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},QN=class extends Fn{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};d();function Fmr(t){return new nS({token:`test token ${gr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(Fmr,"createTestCopilotToken");var qQ=class extends Gr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=wft()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>Fmr(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},Pie=class extends qQ{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},UN=class extends Pie{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var Omr=I.Object({options:I.Optional(I.Object({}))});async function Qmr(t,e,r){let n=new UN("tid=valid-copilot-token");return t.forceSet(Fn,new QN(t,"",n)),t.get(Gr).resetToken(),t.get(yo).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(Qmr,"handleTestingAlwaysAuthChecked");var _ft=ut(Omr,Qmr);d();var Umr=I.Object({messages:I.Array(I.Object({role:I.Enum(vl),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(yn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function qmr(t,e,r){let n=new Ua(t),i=await t.get(qa).getBestChatModelConfig([r.modelFamily??yn.CopilotBase]),o=await xF(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:b0.user("test",gr())},e,o),null]}s(qmr,"handleChatMLChecked");var Sft=ut(Umr,qmr);d();d();d();var jN=Me(D0t(),1),yto={ALPN_HTTP2:jN.default.ALPN_HTTP2,ALPN_HTTP2C:jN.default.ALPN_HTTP2C,ALPN_HTTP1_1:jN.default.ALPN_HTTP1_1,ALPN_HTTP1_0:jN.default.ALPN_HTTP1_0},{fetch:Cto,context:B0t,reset:vto,noCache:Eto,h1:xto,keepAlive:bto,h1NoCache:Ito,keepAliveNoCache:Tto,cacheStats:wto,clearCache:_to,offPush:Sto,onPush:Rto,createUrl:kto,timeoutSignal:Pto,Body:Dto,Headers:N0t,Request:Bto,Response:Nto,AbortController:Lto,AbortError:zie,AbortSignal:Mto,FetchBaseError:Fto,FetchError:Oto,ALPN_HTTP2:Qto,ALPN_HTTP2C:Uto,ALPN_HTTP1_1:qto,ALPN_HTTP1_0:Hto}=jN.default;var M0t=require("crypto"),F0t=require("http"),O0t=require("stream"),Q0t=require("util"),VN=Me(qg());var lyr=9e4,uyr=new VN.ProtocolRequestType("copilot/fetch"),dyr=new VN.ProtocolRequestType("copilot/fetchCancel"),fyr=new VN.ProgressType,pyr=new VN.ProtocolRequestType("copilot/fetchDisconnectAll"),f1=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},GN=class extends zn{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(ho).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Rr).connection.sendRequest(pyr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(Rr).connection,a=(0,M0t.randomUUID)(),c=new Sn.CancellationTokenSource,l=new O0t.PassThrough,u=s(()=>{o.sendRequest(dyr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new zie("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new f1("EditorFetcher received unexpected abort signal");if(i.aborted)throw new zie("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(fyr,a,h=>{h.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),h.error&&l.emit("error",new f1(h.error)),l.end()):h.kind==="report"&&l.write(h.chunk)});let p=await new Promise((h,m)=>{let g=setTimeout(()=>{m(new f1("Request timed out from lsp server"))},n.timeout??lyr),A=s(()=>{m(new zie("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",A),o.sendRequest(uyr,myr(r,a,n),c.token).then(h).catch(y=>{let E="EditorFetcher request failed";y&&typeof y=="object"&&"message"in y&&(E+=`: ${String(y.message)}`),y&&typeof y=="object"&&"data"in y&&(E+=`: ${(0,Q0t.inspect)(y.data)}`),m(new f1(E))}).finally(()=>{i?.removeEventListener("abort",A),clearTimeout(g)})});if(!p.status)throw new f1("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new Eb(p.status,F0t.STATUS_CODES[p.status]??"",new N0t(p.headers),()=>hyr(l),()=>l)}};function hyr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(hyr,"consumeStream");function myr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(myr,"convertOptionsToParams");var gyr=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function Ayr(t,e,r){let n=new GN(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let h;try{h=await p}catch(A){return[{error:`Fetch stream error: ${A instanceof f1?A.message:String(A)}`},null]}let{status:m}=h,g=Object.fromEntries(Array.from(h.headers));try{if(u){let y=h.body();for await(let E of y){let b=E.toString();return i.abort(),[{status:m,headers:g,body:b},null]}}let A=await h.text();return[{status:m,headers:g,body:A},null]}catch(A){return[{error:`Fetch stream error: ${A instanceof f1?A.message:String(A)}`},null]}}s(Ayr,"handleTestingFetchChecked");var U0t=ut(gyr,Ayr);d();var yyr=I.Object({});async function Cyr(t,e,r){return await t.get(fc).flush(),["OK",null]}s(Cyr,"handleTestingFlushPromiseQueueChecked");var q0t=ut(yyr,Cyr);d();var vyr=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function Eyr(t,e,r){try{await t.get(KC).start();let n=t.get(r5),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,aJ,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(Eyr,"handleTestingGetContextChecked");var H0t=ut(vyr,Eyr);d();var xyr=I.Object({uri:I.String()});async function byr(t,e,r){let i=await t.get(vr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(byr,"handleGetDocumentChecked");var W0t=ut(xyr,byr);d();var Iyr=I.Object({options:I.Optional(I.Object({}))});async function Tyr(t,e,r){t.forceSet(Fn,new kie(t)),t.get(Gr).resetToken();try{await t.get(Gr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(Tyr,"handleTestingNeverAuthChecked");var $0t=ut(Iyr,Tyr);d();d();d();var I_e=class extends Zc{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},j0t=s(t=>new I_e(t),"createTestCertificateReader");function w_e(t,e,r){let n=new T_e;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new Eb(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(w_e,"createFakeResponse");function G0t(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),w_e(t,n,Object.assign({"content-type":"application/json"},r))}s(G0t,"createFakeJsonResponse");var YQ=class extends zn{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Yie=class extends YQ{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var T_e=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var __e=class extends YQ{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(G0t(200,this.fullConfig)):Promise.resolve(w_e(404,""))}},Kie=class extends __e{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var wyr=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function _yr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(zn,new Kie(n,t.get(zn)))}return["OK",null]}s(_yr,"handleTestingOverrideExpFlagsChecked");var V0t=ut(wyr,_yr);d();var Syr=I.Object({rules:hAe});function Ryr(t,e,r){let n=t.get(Yc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:pn.InternalError,message:"Could not set content exclusion rules"}]}s(Ryr,"handleTestingSetContentExclusionRulesChecked");var z0t=ut(Syr,Ryr);d();var kyr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(SN)),options:I.Optional(I.Object({}))});function Pyr(t,e,r){return t.get(WE).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(Pyr,"handleTestingSetSyntheticTurnsChecked");var Y0t=ut(kyr,Pyr);d();var Dyr=I.Object({});async function Byr(t,e,r){let n=t.get(Qc),i=t.get(Oc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(Byr,"handleTriggerShowMessageChecked");var K0t=ut(Dyr,Byr);d();d();d();d();var J0t=Me(require("tls"));var Jie=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(Zc)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=J0t.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var zN=class extends zn{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new Jie(r),this.proxySocketFactory=r.get(BC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(vu).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(vu).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(ho),o=this.proxySocketTimeoutForTesting;return B0t({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new H9(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new Eb(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var KQ=require("fs"),X0t=require("path");var YN=class extends bo{static{s(this,"LocalFileSystem")}async readFileString(e){return(await KQ.promises.readFile($a(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink($a(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=$a(e),n=await KQ.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,X0t.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await KQ.promises.lstat(e);if(r.isSymbolicLink())try{let n=await KQ.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var Xie=class extends RA{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var Zie=class extends rl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();var eoe=class extends Ap{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}addAllowedFiles(r){this.allowedFiles.push(...r)}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};d();function Nyr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(Nyr,"fakeChatModelConfiguration");function Lyr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(Lyr,"fakeEmbeddingModelConfiguration");var toe=class extends qa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(Nyr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(Lyr(e))}};d();var roe=class extends Eu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Yh}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},noe=class extends Qc{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};d();function Z0t(t,e,r,n){return Fv.create(D$(t),e,r,n,e)}s(Z0t,"createTextDocument");var S_e=class extends vr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Ui(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=Z0t(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=Z0t(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},ioe=class extends S_e{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var R_e=class extends Oc{static{s(this,"NullLog")}logIt(...e){}};function Myr(t){let e=new W3;return e.set(vu,t),e.set(l2,t),e.set(ho,new ho),e.set(ah,new ah({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(Zc,j0t([])),e.set(BC,vee(e)),e.set(ky,new ky),e.set(_g,new Q$),e.set(Tg,new Tg),e.set(gy,new gy),e.set(hu,new hu(e,"tid=test",!0)),e.set(Fl,new Fl),e.set(Qc,new noe),e.set(Eu,new roe),e.set(Sy,new vD),e.set(Oc,new R_e),e.set(qd,new qd),e.set(Ts,new Ts("test-session","test-machine")),e.set(Hd,new QB(e)),e.set(Qf,new Qf(e,"copilot-test")),e.set(Ot,new Ot(e)),e.set(Gg,new Gg),e.set(Og,new A3),e.set(Gr,new UN("tid=test")),e.set(yo,new F$),e.set(fc,new fc),e.set(eC,new eC(e)),e.set(Ap,new eoe),e.set(rm,new rm(e)),e.set(zv,xJ(e)),e.set(Nu,new Nu),e.set(n0,new n0),e.set(Yv,Yv.default),e.set(Sp,new Sp),e.set(Bh,new Bh(e,!1)),e.set(Ql,new Ql),e.set(Cn,new Cn(e)),e.set(rf,new NY),e.set($l,new $l),e.set(bc,cJ(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(tm,new tm(e)),Fyr(e),e.set(e0,new e0(e)),e.set(vs,new vs),e.set(nC,new fN),e.set(Kh,new Kh),e.set(g0,new g0),e.set(qC,new qC(e)),e}s(Myr,"_createBaselineContext");function Fyr(t){t.set(ji,new ji(t)),t.set(sa,new sa(t)),t.set(Wu,new Wu(t)),t.set(bl,new bl),t.set(ou,new ou),t.set(rl,new Zie),t.set(Sm,new Sm(t,[])),t.set(qa,new toe),t.set(RA,new Xie),t.set(t1,new t1(t)),t.set(mw,new mw),t.set(rc,new rc(t)),t.set(Hu,new Hu),t.set(Qp,new Qp)}s(Fyr,"registerConversation");function ept(){let t=Myr(new l2(new y3,new Map));return t.set(zn,new Yie),t.set(ln,new k_e),t.set(vr,new ioe(t)),t.set(bo,new YN),t.set(Yc,new Yc(t)),t.set(el,new el(t)),t.set(Uu,new Tee(t)),t.set(Gh,new Gh(t)),t.set(oC,new hD),t.set(dA,new Zee),wre(t),t}s(ept,"createLibTestingContext");var k_e=class extends ln{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var rpt=Me(require("fs"));var tpt=`${process.env.HOME}/.copilot-testing-gh-token`,ooe,soe;function npt(t){let e=new qQ(Oyr);t.forceSet(Gr,e)}s(npt,"setIntegrationTokenManager");var Oyr=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(soe)return soe;let e=t||process.env.GITHUB_COPILOT_TOKEN||await Qyr(),r=ept(),n=new zN(r);return r.forceSet(zn,n),soe=N$(r,{...Gb({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new qs('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),soe},"getEnvelope");async function Qyr(){try{ooe??=(await rpt.promises.readFile(tpt)).toString().trim()}catch{ooe??=process.env.GITHUB_TOKEN??""}if(!ooe)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${tpt}. Run "npm run get_token" to get one.`);return ooe}s(Qyr,"getTestingGitHubToken");var Uyr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function qyr(t,e,r){return npt(t),t.forceSet(Fn,new QN(t,r.githubAppId)),["OK",null]}s(qyr,"handleTestingUseTestingTokenChecked");var ipt=ut(Uyr,qyr);d();var Hyr=I.Object({});async function Wyr(t,e,r){return await new gN().uninstall(t),["OK",null]}s(Wyr,"handleUninstallChecked");var opt=ut(Hyr,Wyr);d();var $yr=Nje;function jyr(t,e,r){let n=t.get(bc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(jyr,"unregisterContextProviders");var spt=ut($yr,jyr);d();var P_e=Me(require("os"));var Gyr=I.Object({expectedCertificate:I.String()});async function Vyr(t,e,r){let i=(await Cee(t).getAllRootCAs()).map(ON),o=ON(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Wwe(o)}. Only found those installed on the system:${P_e.EOL}${i.map(a=>"- "+Wwe(a)).join(P_e.EOL)}`},null]}s(Vyr,"handleVerifyCertificateChecked");var apt=ut(Gyr,Vyr);d();var zyr=I.Object({});async function Yyr(){return[{status:!!await new p7().load()},null]}s(Yyr,"handleVerifyKerberosChecked");var cpt=ut(zyr,Yyr);d();var Kyr=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function Jyr(t,e,r){let i=await t.get(vr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(Jyr,"handleVerifyStateChecked");var lpt=ut(Kyr,Jyr);d();var Xyr=I.Object({});function Zyr(t,e,r){return[t.get(vr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(Zyr,"handleVerifyWorkspaceStateChecked");var upt=ut(Xyr,Zyr);var A5=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function dpt(){let t=new Map;return t.set(aft.method,cft),t.set(lft.method,uft),t.set("getCompletions",Zdt),t.set("getCompletionsCycling",eft),t.set("getPanelCompletions",nft),t.set(Mdt.method,Fdt),t.set("getVersion",ift),t.set("setEditorInfo",Eft),t.set("checkStatus",Qct),t.set("checkQuota",Oct),t.set("checkFileStatus",Mct),t.set("signInInitiate",zwe),t.set("signIn",zwe),t.set("signInConfirm",xft),t.set("signInWithGithubToken",bft),t.set("signOut",Ift),t.set("notifyShown",mft),t.set("notifyAccepted",pft),t.set("notifyRejected",hft),t.set("telemetry/exception",Tft),t.set("textDocument/copilotInlineEdit",fft),t.set("testing/overrideExpFlags",V0t),t.set("testing/alwaysAuth",_ft),t.set("testing/neverAuth",$0t),t.set("testing/useTestingToken",ipt),t.set("testing/setCompletionDocuments",Ydt),t.set("testing/setPanelCompletionDocuments",Ndt),t.set("testing/triggerShowMessageRequest",K0t),t.set("testing/flushPromiseQueue",q0t),t.set("testing/getDocument",W0t),t.set("testing/chatml",Sft),t.set("testing/setSyntheticTurns",Y0t),t.set("testing/fetch",U0t),t.set("testing/setContentExclusionRules",z0t),t.set("testing/setCopilotEditsResponse",xdt),t.set("testing/getContext",H0t),t.set("uninstall",opt),t.set("debug/diagnostics",Hdt),t.set("debug/listCertificates",dft),t.set("debug/verifyState",lpt),t.set("debug/verifyCertificate",apt),t.set("debug/verifyKerberos",cpt),t.set("debug/verifyWorkspaceState",upt),t.set("context/registerProviders",gft),t.set("context/unregisterProviders",spt),t.set("conversation/preconditions",mdt),t.set("conversation/persistence",fdt),t.set("conversation/create",ldt),t.set("conversation/turn",Cdt),t.set("conversation/turnDelete",vdt),t.set("conversation/destroy",udt),t.set("conversation/rating",gdt),t.set("conversation/copyCode",jut),t.set("conversation/insertCode",Gut),t.set("conversation/templates",ydt),t.set("conversation/agents",$ut),t.set("conversation/registerTools",Adt),t.set("conversation/notifyCodeAcceptance",ddt),t.set("copilot/models",Rdt),t.set("copilot/setModelPolicy",kdt),t.set("copilot/codeReview",Edt),t.set("git/commitGenerate",oft),t.set("editConversation/create",bdt),t.set("editConversation/turn",Tdt),t.set("editConversation/turnDelete",wdt),t.set("editConversation/destroy",Idt),t.set("mcp/getTools",_dt),t.set("mcp/updateToolsStatus",Sdt),new A5(t)}s(dpt,"getAllMethods");d();d();d();var fpt=Me(qg());var p1=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new fpt.NotificationType(this.name)}};var D_e=class extends p1{constructor(){super(...arguments);this.name=ude.method;this.params=vNe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Fn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},ppt=[D_e];d();var B_e=class extends p1{constructor(){super(...arguments);this.name=mde.method;this.params=SNe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(Ms).get(n);o&&oze(this.ctx,o)}},N_e=class extends p1{constructor(){super(...arguments);this.name=yde.method;this.params=BNe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(bA).handleShown(n)}},L_e=class extends p1{constructor(){super(...arguments);this.name=gde.method;this.params=RNe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(Ms),a=o.get(n);a&&(i>=a.insertText.length?(o.delete(n),yD(this.ctx,a)):FJ(this.ctx,a,i,void 0,void 0,"cumulative"))}},hpt=[B_e,N_e,L_e];d();var aoe=class extends p1{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(gf).cancel(r.token)}};var eCr=[...ppt,...hpt,aoe];function mpt(t,e){for(let r of eCr){let n=new r(t),i=Gs.Compile(n.params);e.onNotification(n.type,ud(t,async o=>{LE(o),i.Check(o)?await n.handle(o):$u.error(t,`Notification ${n.name}:`,new qu(i.Errors(o)))},`Notification ${n.name}`))}}s(mpt,"registerNotifications");d();var Apt=Me(require("events")),coe=Me(zc());var gpt=new _t("AgentTextDocumentConfiguration"),M_e=class{constructor(e){this.ctx=e;this.emitter=new Apt.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return Fv.create(e,r,n,i)}catch(o){throw gpt.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(coe.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),Fv.withChanges(e,r,n)}catch(i){throw gpt.exception(this.ctx,i,".update"),i}}},_w=class extends vr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(pde.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(c=>void c.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new M_e(r),this._notebookDocuments=new coe.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(Rr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(fl(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=fl(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=fl(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(fl(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var ypt=Gs.Compile(TNe);function LE(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=LE(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=LE(e[r])}return t}}s(LE,"purgeNulls");var Rr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Oc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),mpt(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(ho).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async l=>{try{if(i&&l&&typeof l=="object"&&!("settings"in l)){let u=await r.workspace.getConfiguration(["github.copilot",...jwe].map(p=>({section:p}))),f={github:{copilot:u.shift()}};for(let p of jwe)f[p]=u.shift();l.settings=f}return Cft(e,LE(l))}catch(u){$u.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(l){try{e.get(_w).didChangeWorkspaceFolders(l),e.get(Sp).emit(l)}catch(u){$u.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:l,uri:u})=>a({added:[{uri:u,name:l??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:l,uri:u})=>a({added:[],removed:[{uri:u,name:l??u}]})),r.onInitialize(async l=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=l.capabilities;let u=l.capabilities.copilot,f=LE(l.initializationOptions);if(f){if(!ypt.Check(f))throw new qu(ypt.Errors(f));let g=f,A=e.get(ln);g.editorPluginInfo?A.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):$u.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&A.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Ql).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await Ect(e)}let p=l.capabilities.workspace?.workspaceFolders??!1;e.get(_w).init(l.workspaceFolders??[]),wGe(this.ctx),e.get(Sp).emit({added:l.workspaceFolders??[],removed:[]}),i=l.capabilities.workspace?.configuration,u&&(e.get(vs).setCapabilities(u),"openURL"in u&&Wre(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let m=s(async()=>{this.initialized||(this.initialized=!0,$u.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await UQ(e),this.installationTelemetryTimer=setTimeout(()=>{new gN().startup(e).catch(()=>{})},1e3),e.get(ME).emit())},"onInitialized");return r.onInitialized(ud(e,m,"onInitialized")),e.get(wA).init(),u?.token&&e.get(Fn).setTransientSession(null),u?.redirectedTelemetry&&await Nct(e),Cpt.lt(process.versions.node,"20.8.0")&&$u.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:NA.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:_ct(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(ud(e,o,"onDidChangeConfiguration")),r.listen();let c=new Gre;this.ctx.forceSet(Oc,c)}async messageHandler(e,r,n){let i=this.ctx.get(A5).handlers.get(e);if(!i)return new NA.ResponseError(pn.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new NA.ResponseError(pn.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new NA.ResponseError(pn.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!kct(this.ctx.get(ln)))throw new NA.ResponseError(pn.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),LE(r);try{let[o,a]=await i(this.ctx,n,r);return a?new NA.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new NA.ResponseError(pn.RequestCancelled,"Request was canceled");if(o instanceof qs)return new NA.ResponseError(pn.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof NA.ResponseError||$u.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(IA).dispose()}catch(e){$u.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Oc,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),Uye(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(fc).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Fl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},$u=new _t("lsp");var loe=class t extends Y2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Rr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),yl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){yl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(vs).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return yl.debug(this.context,"`copilot/related` not supported"),SGe;try{let a=await this.service.connection.sendRequest(Cde.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){yl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){yl.exception(r,o,"copilotRelated")}}};d();var vpt=Me(zc());var uoe=new _t("copilotTokenManager"),F_e=class t extends dP{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new vpt.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(Rr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw uoe.debug(this.ctx,"Envelope missing from copilot/token response"),new Ch({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:c}=r;if(uoe.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new qs("Expired token in copilot/token response");if(i&&n){let u;if(c!==void 0){try{let f=new URL(c);f.protocol==="https:"&&f.hostname.startsWith("api.")?u=f.origin:uoe.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}catch{uoe.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}this.ctx.get(Hd).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Fn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Ch({reason:"NotSignedIn"});let l=new nS(a,void 0);return b6(this.ctx,l),l}catch(r){throw r instanceof Error?new qs(r.message,r):r}}},JQ=class extends Gr{constructor(r,n=new dP(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new F_e(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(vs).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};d();var tCr=new _t("Public Code References"),doe=class extends rf{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");tCr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(vs).getCapabilities().ipCodeCitation===!0&&await e.get(Rr).connection.sendNotification(dde.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function Ept(t){rCr(t)}s(Ept,"activateExtensibilityPlatformFeature");function rCr(t){t.set(RA,new cie(t)),t.set(t1,new t1(t))}s(rCr,"registerContextDependencies");d();var xpt=I.String(),O_e=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(poe,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},poe="build-logs",foe=class extends nu{static{s(this,"BuildLogsSkill")}constructor(e){super(poe,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new O_e(r))}};d();var Q_e=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await fie(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Ut(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Ut([o]),1]);return new Ut(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},U_e=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},nCr="directory-references",hoe=class{constructor(){this.id=nCr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new U_e}processor(e){return new Q_e(e)}};d();var iCr=I.Object({uri:I.String(),visibleRange:I.Optional(gc),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),bpt=I.Object({files:I.Array(iCr)}),oCr=3,q_e=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=Aw(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(Cn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=Zs(a);if(await this.turnContext.collectFile(goe,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===oCr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(Cn).getRelativePath(n),a=new r1(n,void 0,i.visibleRange);return new Ut([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await $o.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Ut([n])}},goe="recent-files",moe=class extends nu{static{s(this,"RecentFilesSkill")}constructor(e){super(goe,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new q_e(r))}};d();var Ipt=I.String(),H_e=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(yoe,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},yoe="runtime-logs",Aoe=class extends nu{static{s(this,"RuntimeLogsSkill")}constructor(e){super(yoe,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new H_e(r))}};d();var Coe=Me(qg());var voe=class extends rl{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return nW(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Rr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new Coe.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new Coe.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new Coe.NotificationType("conversation/documentDiff"),r)}};d();var Tpt=Me(zc());var XQ=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Sm).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Rr).connection.sendNotification(new Tpt.NotificationType(this.notificationEndpoint),e)}};function wpt(t){sCr(t),aCr(t),Ept(t)}s(wpt,"activateConversationFeature");function sCr(t){t.set(ji,new ji(t)),t.set(ou,new ou),t.set(Wu,new Wu(t)),t.set(qa,new Xee(t)),t.set(WE,new WE),t.set(sa,new sa(t)),t.set(Sm,new Sm(t)),t.set(XQ,new XQ(t)),t.set(Jd,new bV(t,new xV(t))),t.set($E,new $E),t.set(mw,new mw),t.set(rl,new voe(t)),t.set(rc,new rc(t)),t.set(Hu,new Hu),t.set(Qp,new Qp)}s(sCr,"registerContextDependencies");function aCr(t){let e=new bl;e.registerSkill(new fne(new dne(t))),e.registerSkill(new One(new mf(t,c1,But))),e.registerSkill(new hne(new mf(t,_A,Ilt))),e.registerSkill(new Kre(new mf(t,Sd,Gct))),e.registerSkill(new Qne),e.registerSkill(new hoe),e.registerSkill(new moe(new mf(t,goe,bpt))),e.registerSkill(new Jre(new mf(t,n1,zct))),e.registerSkill(new gne(new mf(t,yw,Nlt))),e.registerSkill(new Aoe(new mf(t,yoe,Ipt))),e.registerSkill(new foe(new mf(t,poe,xpt))),e.registerSkill(new yne(new mf(t,SA,Llt))),e.registerSkill(new Cne(new mf(t,o5,Flt))),t.set(bl,e)}s(aCr,"registerSkills");d();var _pt=Me(pi());var Eoe=class extends Uu{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(Rr).connection.sendProgress(new _pt.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var Spt=Me(zc()),Rpt=Me(qg());var xoe=class extends NC{constructor(){super(...arguments);this.requestType=new Spt.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Gs.Compile(sct)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(Rr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Rpt.ResponseError(l.code,l.message,l.data);throw Vr.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new qu(this.typeCheck.Errors(o));return o}};d();var kpt=Me(zc()),Ppt=Me(qg());var boe=class extends UT{constructor(){super(...arguments);this.requestType=new kpt.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Gs.Compile(oct)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(Rr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Ppt.ResponseError(l.code,l.message,l.data);throw Vr.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new qu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Ni(i.value):new ZR(i.value));return new uo(n,r.status??"success")}};d();d();function Dpt(t,e,r){try{let n=t.get(Ot).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return An.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(Dpt,"fillInJavaActiveExperiments");var W_e=Me(qg());var cCr={type:new W_e.NotificationType("featureFlagsNotification")},lCr={type:new W_e.NotificationType("copilot/didChangeFeatureFlags")},ZQ=class{constructor(e){this.ctx=e;ha(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Ot).updateExPValuesAndAssignments(),o={};r.get(Ot).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=dye(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;MGe(r,a,c,i),sJ(r,c,i),Dpt(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(vs),u=r.get(Rr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(lCr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.getTokenValue("agent_mode")==="0"&&(f.agent_mode=!1),e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(cCr.type,f)}}};d();var Ioe=class extends yo{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(Rr).connection.sendNotification(vde.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(Rr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var Bpt=new YN;d();d();d();d();var ps=new _t("CopilotMCP");async function $_e(t,e){await t.get(dA).notifyLog(e)}s($_e,"notifyMCPRuntimeLog");async function h1(t,e){await $_e(t,{...e,level:"error"})}s(h1,"notifyMCPRuntimeError");async function y5(t,e){await $_e(t,{...e,level:"warning"})}s(y5,"notifyMCPRuntimeWarning");async function Pd(t,e){await $_e(t,{...e,level:"info"})}s(Pd,"notifyMCPRuntimeInfo");d();var j_e=/[^a-z0-9_-]/gi;var uCr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Npt(){let t={};for(let e of uCr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Npt,"getDefaultEnvironment");async function Lpt(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;ps.warn(t,n),await y5(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(j_e.lastIndex=0,j_e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;ps.warn(t,n),await y5(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(j_e,"_")}else e._nameForModel=e.name;return e}s(Lpt,"normalizeTool");var Toe=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();d();d();var _o;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(_o||(_o={}));var V_e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(V_e||(V_e={}));var Ir=_o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),KE=s(t=>{switch(typeof t){case"undefined":return Ir.undefined;case"string":return Ir.string;case"number":return isNaN(t)?Ir.nan:Ir.number;case"boolean":return Ir.boolean;case"function":return Ir.function;case"bigint":return Ir.bigint;case"symbol":return Ir.symbol;case"object":return Array.isArray(t)?Ir.array:t===null?Ir.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ir.promise:typeof Map<"u"&&t instanceof Map?Ir.map:typeof Set<"u"&&t instanceof Set?Ir.set:typeof Date<"u"&&t instanceof Date?Ir.date:Ir.object;default:return Ir.unknown}},"getParsedType"),Mt=_o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),dCr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),qp=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_o.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};qp.create=t=>new qp(t);var XN=s((t,e)=>{let r;switch(t.code){case Mt.invalid_type:t.received===Ir.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Mt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_o.jsonStringifyReplacer)}`;break;case Mt.unrecognized_keys:r=`Unrecognized key(s) in object: ${_o.joinValues(t.keys,", ")}`;break;case Mt.invalid_union:r="Invalid input";break;case Mt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_o.joinValues(t.options)}`;break;case Mt.invalid_enum_value:r=`Invalid enum value. Expected ${_o.joinValues(t.options)}, received '${t.received}'`;break;case Mt.invalid_arguments:r="Invalid function arguments";break;case Mt.invalid_return_type:r="Invalid function return type";break;case Mt.invalid_date:r="Invalid date";break;case Mt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_o.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Mt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Mt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Mt.custom:r="Invalid input";break;case Mt.invalid_intersection_types:r="Intersection results could not be merged";break;case Mt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Mt.not_finite:r="Number must be finite";break;default:r=e.defaultError,_o.assertNever(t)}return{message:r}},"errorMap"),Qpt=XN;function fCr(t){Qpt=t}s(fCr,"setErrorMap");function woe(){return Qpt}s(woe,"getErrorMap");var _oe=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),pCr=[];function dr(t,e){let r=woe(),n=_oe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===XN?void 0:XN].filter(i=>!!i)});t.common.issues.push(n)}s(dr,"addIssueToContext");var Dd=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return jn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return jn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},jn=Object.freeze({status:"aborted"}),JN=s(t=>({status:"dirty",value:t}),"DIRTY"),Af=s(t=>({status:"valid",value:t}),"OK"),z_e=s(t=>t.status==="aborted","isAborted"),Y_e=s(t=>t.status==="dirty","isDirty"),C5=s(t=>t.status==="valid","isValid"),rU=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Soe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(Soe,"__classPrivateFieldGet");function Upt(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Upt,"__classPrivateFieldSet");var jr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(jr||(jr={}));var eU,tU,Pm=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Mpt=s((t,e)=>{if(C5(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new qp(t.common.issues);return this._error=r,this._error}}},"handleResult");function hi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(hi,"processCreateParams");var mi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return KE(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:KE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Dd,ctx:{common:e.parent.common,data:e.data,parsedType:KE(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(rU(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:KE(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Mpt(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:KE(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return C5(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>C5(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:KE(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(rU(i)?i:Promise.resolve(i));return Mpt(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Mt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Hp({schema:this,typeName:Un.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return km.create(this,this._def)}nullable(){return g1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return XE.create(this)}promise(){return kw.create(this,this._def)}or(e){return w5.create([this,e],this._def)}and(e){return _5.create(this,e,this._def)}transform(e){return new Hp({...hi(this._def),schema:this,typeName:Un.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new D5({...hi(this._def),innerType:this,defaultValue:r,typeName:Un.ZodDefault})}brand(){return new nU({typeName:Un.ZodBranded,type:this,...hi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new B5({...hi(this._def),innerType:this,catchValue:r,typeName:Un.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return iU.create(this,e)}readonly(){return N5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},hCr=/^c[^\s-]{8,}$/i,mCr=/^[0-9a-z]+$/,gCr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ACr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yCr=/^[a-z0-9_-]{21}$/i,CCr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vCr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ECr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xCr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",G_e,bCr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ICr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TCr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,wCr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_Cr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SCr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qpt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RCr=new RegExp(`^${qpt}$`);function Hpt(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Hpt,"timeRegexSource");function kCr(t){return new RegExp(`^${Hpt(t)}$`)}s(kCr,"timeRegex");function Wpt(t){let e=`${qpt}T${Hpt(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(Wpt,"datetimeRegex");function PCr(t,e){return!!((e==="v4"||!e)&&bCr.test(t)||(e==="v6"||!e)&&TCr.test(t))}s(PCr,"isValidIP");function DCr(t,e){if(!CCr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(DCr,"isValidJWT");function BCr(t,e){return!!((e==="v4"||!e)&&ICr.test(t)||(e==="v6"||!e)&&wCr.test(t))}s(BCr,"isValidCidr");var Sw=class t extends mi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ir.string){let o=this._getOrReturnCtx(e);return dr(o,{code:Mt.invalid_type,expected:Ir.string,received:o.parsedType}),jn}let n=new Dd,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?dr(i,{code:Mt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&dr(i,{code:Mt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")ECr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"email",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")G_e||(G_e=new RegExp(xCr,"u")),G_e.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"emoji",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")ACr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"uuid",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")yCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"nanoid",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")hCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"cuid",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")mCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"cuid2",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")gCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"ulid",code:Mt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),dr(i,{validation:"url",code:Mt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"regex",code:Mt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Wpt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?RCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?kCr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?vCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"duration",code:Mt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?PCr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"ip",code:Mt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?DCr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"jwt",code:Mt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?BCr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"cidr",code:Mt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?_Cr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"base64",code:Mt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?SCr.test(e.data)||(i=this._getOrReturnCtx(e,i),dr(i,{validation:"base64url",code:Mt.invalid_string,message:o.message}),n.dirty()):_o.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Mt.invalid_string,...jr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...jr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...jr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...jr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...jr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...jr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...jr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...jr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...jr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...jr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...jr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...jr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...jr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...jr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...jr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...jr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...jr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...jr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...jr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...jr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...jr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...jr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...jr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...jr.errToObj(r)})}nonempty(e){return this.min(1,jr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Sw.create=t=>{var e;return new Sw({checks:[],typeName:Un.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...hi(t)})};function NCr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(NCr,"floatSafeRemainder");var v5=class t extends mi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ir.number){let o=this._getOrReturnCtx(e);return dr(o,{code:Mt.invalid_type,expected:Ir.number,received:o.parsedType}),jn}let n,i=new Dd;for(let o of this._def.checks)o.kind==="int"?_o.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?NCr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.not_finite,message:o.message}),i.dirty()):_o.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,jr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:jr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:jr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:jr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:jr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:jr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:jr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:jr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:jr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:jr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_o.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};v5.create=t=>new v5({checks:[],typeName:Un.ZodNumber,coerce:t?.coerce||!1,...hi(t)});var E5=class t extends mi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ir.bigint)return this._getInvalidInput(e);let n,i=new Dd;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),dr(n,{code:Mt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):_o.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return dr(r,{code:Mt.invalid_type,expected:Ir.bigint,received:r.parsedType}),jn}gte(e,r){return this.setLimit("min",e,!0,jr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,jr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,jr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,jr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:jr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:jr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:jr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:jr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:jr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:jr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};E5.create=t=>{var e;return new E5({checks:[],typeName:Un.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...hi(t)})};var x5=class extends mi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ir.boolean){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.boolean,received:n.parsedType}),jn}return Af(e.data)}};x5.create=t=>new x5({typeName:Un.ZodBoolean,coerce:t?.coerce||!1,...hi(t)});var b5=class t extends mi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ir.date){let o=this._getOrReturnCtx(e);return dr(o,{code:Mt.invalid_type,expected:Ir.date,received:o.parsedType}),jn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return dr(o,{code:Mt.invalid_date}),jn}let n=new Dd,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),dr(i,{code:Mt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):_o.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:jr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:jr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};b5.create=t=>new b5({checks:[],coerce:t?.coerce||!1,typeName:Un.ZodDate,...hi(t)});var ZN=class extends mi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==Ir.symbol){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.symbol,received:n.parsedType}),jn}return Af(e.data)}};ZN.create=t=>new ZN({typeName:Un.ZodSymbol,...hi(t)});var I5=class extends mi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==Ir.undefined){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.undefined,received:n.parsedType}),jn}return Af(e.data)}};I5.create=t=>new I5({typeName:Un.ZodUndefined,...hi(t)});var T5=class extends mi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==Ir.null){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.null,received:n.parsedType}),jn}return Af(e.data)}};T5.create=t=>new T5({typeName:Un.ZodNull,...hi(t)});var Rw=class extends mi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Af(e.data)}};Rw.create=t=>new Rw({typeName:Un.ZodAny,...hi(t)});var JE=class extends mi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Af(e.data)}};JE.create=t=>new JE({typeName:Un.ZodUnknown,...hi(t)});var LA=class extends mi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return dr(r,{code:Mt.invalid_type,expected:Ir.never,received:r.parsedType}),jn}};LA.create=t=>new LA({typeName:Un.ZodNever,...hi(t)});var e8=class extends mi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==Ir.undefined){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.void,received:n.parsedType}),jn}return Af(e.data)}};e8.create=t=>new e8({typeName:Un.ZodVoid,...hi(t)});var XE=class t extends mi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Ir.array)return dr(r,{code:Mt.invalid_type,expected:Ir.array,received:r.parsedType}),jn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(dr(r,{code:a?Mt.too_big:Mt.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(dr(r,{code:Mt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(dr(r,{code:Mt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new Pm(r,a,r.path,c)))).then(a=>Dd.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new Pm(r,a,r.path,c)));return Dd.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:jr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:jr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:jr.toString(r)}})}nonempty(e){return this.min(1,e)}};XE.create=(t,e)=>new XE({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Un.ZodArray,...hi(e)});function KN(t){if(t instanceof T0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=km.create(KN(n))}return new T0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof XE?new XE({...t._def,type:KN(t.element)}):t instanceof km?km.create(KN(t.unwrap())):t instanceof g1?g1.create(KN(t.unwrap())):t instanceof m1?m1.create(t.items.map(e=>KN(e))):t}s(KN,"deepPartialify");var T0=class t extends mi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=_o.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Ir.object){let u=this._getOrReturnCtx(e);return dr(u,{code:Mt.invalid_type,expected:Ir.object,received:u.parsedType}),jn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof LA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new Pm(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof LA){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(dr(i,{code:Mt.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new Pm(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,h=await f.value;u.push({key:p,value:h,alwaysSet:f.alwaysSet})}return u}).then(u=>Dd.mergeObjectSync(n,u)):Dd.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return jr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=jr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Un.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return _o.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return _o.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return KN(this)}partial(e){let r={};return _o.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return _o.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof km;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return $pt(_o.objectKeys(this.shape))}};T0.create=(t,e)=>new T0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:LA.create(),typeName:Un.ZodObject,...hi(e)});T0.strictCreate=(t,e)=>new T0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:LA.create(),typeName:Un.ZodObject,...hi(e)});T0.lazycreate=(t,e)=>new T0({shape:t,unknownKeys:"strip",catchall:LA.create(),typeName:Un.ZodObject,...hi(e)});var w5=class extends mi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new qp(c.ctx.common.issues));return dr(r,{code:Mt.invalid_union,unionErrors:a}),jn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new qp(l));return dr(r,{code:Mt.invalid_union,unionErrors:c}),jn}}get options(){return this._def.options}};w5.create=(t,e)=>new w5({options:t,typeName:Un.ZodUnion,...hi(e)});var YE=s(t=>t instanceof S5?YE(t.schema):t instanceof Hp?YE(t.innerType()):t instanceof R5?[t.value]:t instanceof k5?t.options:t instanceof P5?_o.objectValues(t.enum):t instanceof D5?YE(t._def.innerType):t instanceof I5?[void 0]:t instanceof T5?[null]:t instanceof km?[void 0,...YE(t.unwrap())]:t instanceof g1?[null,...YE(t.unwrap())]:t instanceof nU||t instanceof N5?YE(t.unwrap()):t instanceof B5?YE(t._def.innerType):[],"getDiscriminator"),Roe=class t extends mi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ir.object)return dr(r,{code:Mt.invalid_type,expected:Ir.object,received:r.parsedType}),jn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(dr(r,{code:Mt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),jn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=YE(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:Un.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...hi(n)})}};function K_e(t,e){let r=KE(t),n=KE(e);if(t===e)return{valid:!0,data:t};if(r===Ir.object&&n===Ir.object){let i=_o.objectKeys(e),o=_o.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=K_e(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===Ir.array&&n===Ir.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=K_e(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Ir.date&&n===Ir.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(K_e,"mergeValues");var _5=class extends mi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(z_e(o)||z_e(a))return jn;let c=K_e(o.value,a.value);return c.valid?((Y_e(o)||Y_e(a))&&r.dirty(),{status:r.value,value:c.data}):(dr(n,{code:Mt.invalid_intersection_types}),jn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};_5.create=(t,e,r)=>new _5({left:t,right:e,typeName:Un.ZodIntersection,...hi(r)});var m1=class t extends mi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ir.array)return dr(n,{code:Mt.invalid_type,expected:Ir.array,received:n.parsedType}),jn;if(n.data.length<this._def.items.length)return dr(n,{code:Mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jn;!this._def.rest&&n.data.length>this._def.items.length&&(dr(n,{code:Mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new Pm(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Dd.mergeArray(r,a)):Dd.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};m1.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new m1({items:t,typeName:Un.ZodTuple,rest:null,...hi(e)})};var koe=class t extends mi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ir.object)return dr(n,{code:Mt.invalid_type,expected:Ir.object,received:n.parsedType}),jn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new Pm(n,c,n.path,c)),value:a._parse(new Pm(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?Dd.mergeObjectAsync(r,i):Dd.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof mi?new t({keyType:e,valueType:r,typeName:Un.ZodRecord,...hi(n)}):new t({keyType:Sw.create(),valueType:e,typeName:Un.ZodRecord,...hi(r)})}},t8=class extends mi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ir.map)return dr(n,{code:Mt.invalid_type,expected:Ir.map,received:n.parsedType}),jn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new Pm(n,c,n.path,[u,"key"])),value:o._parse(new Pm(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return jn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return jn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};t8.create=(t,e,r)=>new t8({valueType:e,keyType:t,typeName:Un.ZodMap,...hi(r)});var r8=class t extends mi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ir.set)return dr(n,{code:Mt.invalid_type,expected:Ir.set,received:n.parsedType}),jn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(dr(n,{code:Mt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(dr(n,{code:Mt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return jn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new Pm(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:jr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:jr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};r8.create=(t,e)=>new r8({valueType:t,minSize:null,maxSize:null,typeName:Un.ZodSet,...hi(e)});var Poe=class t extends mi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ir.function)return dr(r,{code:Mt.invalid_type,expected:Ir.function,received:r.parsedType}),jn;function n(c,l){return _oe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,woe(),XN].filter(u=>!!u),issueData:{code:Mt.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return _oe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,woe(),XN].filter(u=>!!u),issueData:{code:Mt.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof kw){let c=this;return Af(async function(...l){let u=new qp([]),f=await c._def.args.parseAsync(l,o).catch(m=>{throw u.addIssue(n(l,m)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(m=>{throw u.addIssue(i(p,m)),u})})}else{let c=this;return Af(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new qp([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new qp([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:m1.create(e).rest(JE.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||m1.create([]).rest(JE.create()),returns:r||JE.create(),typeName:Un.ZodFunction,...hi(n)})}},S5=class extends mi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};S5.create=(t,e)=>new S5({getter:t,typeName:Un.ZodLazy,...hi(e)});var R5=class extends mi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return dr(r,{received:r.data,code:Mt.invalid_literal,expected:this._def.value}),jn}return{status:"valid",value:e.data}}get value(){return this._def.value}};R5.create=(t,e)=>new R5({value:t,typeName:Un.ZodLiteral,...hi(e)});function $pt(t,e){return new k5({values:t,typeName:Un.ZodEnum,...hi(e)})}s($pt,"createZodEnum");var k5=class t extends mi{static{s(this,"ZodEnum")}constructor(){super(...arguments),eU.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return dr(r,{expected:_o.joinValues(n),received:r.parsedType,code:Mt.invalid_type}),jn}if(Soe(this,eU,"f")||Upt(this,eU,new Set(this._def.values),"f"),!Soe(this,eU,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return dr(r,{received:r.data,code:Mt.invalid_enum_value,options:n}),jn}return Af(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};eU=new WeakMap;k5.create=$pt;var P5=class extends mi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),tU.set(this,void 0)}_parse(e){let r=_o.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ir.string&&n.parsedType!==Ir.number){let i=_o.objectValues(r);return dr(n,{expected:_o.joinValues(i),received:n.parsedType,code:Mt.invalid_type}),jn}if(Soe(this,tU,"f")||Upt(this,tU,new Set(_o.getValidEnumValues(this._def.values)),"f"),!Soe(this,tU,"f").has(e.data)){let i=_o.objectValues(r);return dr(n,{received:n.data,code:Mt.invalid_enum_value,options:i}),jn}return Af(e.data)}get enum(){return this._def.values}};tU=new WeakMap;P5.create=(t,e)=>new P5({values:t,typeName:Un.ZodNativeEnum,...hi(e)});var kw=class extends mi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Ir.promise&&r.common.async===!1)return dr(r,{code:Mt.invalid_type,expected:Ir.promise,received:r.parsedType}),jn;let n=r.parsedType===Ir.promise?r.data:Promise.resolve(r.data);return Af(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};kw.create=(t,e)=>new kw({type:t,typeName:Un.ZodPromise,...hi(e)});var Hp=class extends mi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Un.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{dr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return jn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?jn:l.status==="dirty"||r.value==="dirty"?JN(l.value):l});{if(r.value==="aborted")return jn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?jn:c.status==="dirty"||r.value==="dirty"?JN(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?jn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?jn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!C5(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>C5(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);_o.assertNever(i)}};Hp.create=(t,e,r)=>new Hp({schema:t,typeName:Un.ZodEffects,effect:e,...hi(r)});Hp.createWithPreprocess=(t,e,r)=>new Hp({schema:e,effect:{type:"preprocess",transform:t},typeName:Un.ZodEffects,...hi(r)});var km=class extends mi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===Ir.undefined?Af(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};km.create=(t,e)=>new km({innerType:t,typeName:Un.ZodOptional,...hi(e)});var g1=class extends mi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===Ir.null?Af(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};g1.create=(t,e)=>new g1({innerType:t,typeName:Un.ZodNullable,...hi(e)});var D5=class extends mi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Ir.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};D5.create=(t,e)=>new D5({innerType:t,typeName:Un.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...hi(e)});var B5=class extends mi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return rU(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new qp(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};B5.create=(t,e)=>new B5({innerType:t,typeName:Un.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...hi(e)});var n8=class extends mi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==Ir.nan){let n=this._getOrReturnCtx(e);return dr(n,{code:Mt.invalid_type,expected:Ir.nan,received:n.parsedType}),jn}return{status:"valid",value:e.data}}};n8.create=t=>new n8({typeName:Un.ZodNaN,...hi(t)});var LCr=Symbol("zod_brand"),nU=class extends mi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},iU=class t extends mi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?jn:o.status==="dirty"?(r.dirty(),JN(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?jn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Un.ZodPipeline})}},N5=class extends mi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(C5(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return rU(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};N5.create=(t,e)=>new N5({innerType:t,typeName:Un.ZodReadonly,...hi(e)});function Fpt(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Fpt,"cleanParams");function jpt(t,e={},r){return t?Rw.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=Fpt(e,n),h=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:h})}});if(!c){let l=Fpt(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):Rw.create()}s(jpt,"custom");var MCr={object:T0.lazycreate},Un;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Un||(Un={}));var FCr=s((t,e={message:`Input not instance of ${t.name}`})=>jpt(r=>r instanceof t,e),"instanceOfType"),Gpt=Sw.create,Vpt=v5.create,OCr=n8.create,QCr=E5.create,zpt=x5.create,UCr=b5.create,qCr=ZN.create,HCr=I5.create,WCr=T5.create,$Cr=Rw.create,jCr=JE.create,GCr=LA.create,VCr=e8.create,zCr=XE.create,YCr=T0.create,KCr=T0.strictCreate,JCr=w5.create,XCr=Roe.create,ZCr=_5.create,e1r=m1.create,t1r=koe.create,r1r=t8.create,n1r=r8.create,i1r=Poe.create,o1r=S5.create,s1r=R5.create,a1r=k5.create,c1r=P5.create,l1r=kw.create,Opt=Hp.create,u1r=km.create,d1r=g1.create,f1r=Hp.createWithPreprocess,p1r=iU.create,h1r=s(()=>Gpt().optional(),"ostring"),m1r=s(()=>Vpt().optional(),"onumber"),g1r=s(()=>zpt().optional(),"oboolean"),A1r={string:s(t=>Sw.create({...t,coerce:!0}),"string"),number:s(t=>v5.create({...t,coerce:!0}),"number"),boolean:s(t=>x5.create({...t,coerce:!0}),"boolean"),bigint:s(t=>E5.create({...t,coerce:!0}),"bigint"),date:s(t=>b5.create({...t,coerce:!0}),"date")},y1r=jn,O=Object.freeze({__proto__:null,defaultErrorMap:XN,setErrorMap:fCr,getErrorMap:woe,makeIssue:_oe,EMPTY_PATH:pCr,addIssueToContext:dr,ParseStatus:Dd,INVALID:jn,DIRTY:JN,OK:Af,isAborted:z_e,isDirty:Y_e,isValid:C5,isAsync:rU,get util(){return _o},get objectUtil(){return V_e},ZodParsedType:Ir,getParsedType:KE,ZodType:mi,datetimeRegex:Wpt,ZodString:Sw,ZodNumber:v5,ZodBigInt:E5,ZodBoolean:x5,ZodDate:b5,ZodSymbol:ZN,ZodUndefined:I5,ZodNull:T5,ZodAny:Rw,ZodUnknown:JE,ZodNever:LA,ZodVoid:e8,ZodArray:XE,ZodObject:T0,ZodUnion:w5,ZodDiscriminatedUnion:Roe,ZodIntersection:_5,ZodTuple:m1,ZodRecord:koe,ZodMap:t8,ZodSet:r8,ZodFunction:Poe,ZodLazy:S5,ZodLiteral:R5,ZodEnum:k5,ZodNativeEnum:P5,ZodPromise:kw,ZodEffects:Hp,ZodTransformer:Hp,ZodOptional:km,ZodNullable:g1,ZodDefault:D5,ZodCatch:B5,ZodNaN:n8,BRAND:LCr,ZodBranded:nU,ZodPipeline:iU,ZodReadonly:N5,custom:jpt,Schema:mi,ZodSchema:mi,late:MCr,get ZodFirstPartyTypeKind(){return Un},coerce:A1r,any:$Cr,array:zCr,bigint:QCr,boolean:zpt,date:UCr,discriminatedUnion:XCr,effect:Opt,enum:a1r,function:i1r,instanceof:FCr,intersection:ZCr,lazy:o1r,literal:s1r,map:r1r,nan:OCr,nativeEnum:c1r,never:GCr,null:WCr,nullable:d1r,number:Vpt,object:YCr,oboolean:g1r,onumber:m1r,optional:u1r,ostring:h1r,pipeline:p1r,preprocess:f1r,promise:l1r,record:t1r,set:n1r,strictObject:KCr,string:Gpt,symbol:qCr,transformer:Opt,tuple:e1r,undefined:HCr,union:JCr,unknown:jCr,void:VCr,NEVER:y1r,ZodIssueCode:Mt,quotelessJson:dCr,ZodError:qp});var i8="2025-06-18";var Ypt=[i8,"2025-03-26","2024-11-05","2024-10-07"],Doe="2.0",Kpt=O.union([O.string(),O.number().int()]),Jpt=O.string(),C1r=O.object({progressToken:O.optional(Kpt)}).passthrough(),Nm=O.object({_meta:O.optional(C1r)}).passthrough(),w0=O.object({method:O.string(),params:O.optional(Nm)}),oU=O.object({_meta:O.optional(O.object({}).passthrough())}).passthrough(),A1=O.object({method:O.string(),params:O.optional(oU)}),Lm=O.object({_meta:O.optional(O.object({}).passthrough())}).passthrough(),Boe=O.union([O.string(),O.number().int()]),Xpt=O.object({jsonrpc:O.literal(Doe),id:Boe}).merge(w0).strict(),Noe=s(t=>Xpt.safeParse(t).success,"isJSONRPCRequest"),Zpt=O.object({jsonrpc:O.literal(Doe)}).merge(A1).strict(),eht=s(t=>Zpt.safeParse(t).success,"isJSONRPCNotification"),tht=O.object({jsonrpc:O.literal(Doe),id:Boe,result:Lm}).strict(),sU=s(t=>tht.safeParse(t).success,"isJSONRPCResponse"),Dm;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Dm||(Dm={}));var rht=O.object({jsonrpc:O.literal(Doe),id:Boe,error:O.object({code:O.number().int(),message:O.string(),data:O.optional(O.unknown())})}).strict(),nht=s(t=>rht.safeParse(t).success,"isJSONRPCError"),Pw=O.union([Xpt,Zpt,tht,rht]),L5=Lm.strict(),Loe=A1.extend({method:O.literal("notifications/cancelled"),params:oU.extend({requestId:Boe,reason:O.string().optional()})}),aU=O.object({name:O.string(),title:O.optional(O.string())}).passthrough(),iht=aU.extend({version:O.string()}),v1r=O.object({experimental:O.optional(O.object({}).passthrough()),sampling:O.optional(O.object({}).passthrough()),elicitation:O.optional(O.object({}).passthrough()),roots:O.optional(O.object({listChanged:O.optional(O.boolean())}).passthrough())}).passthrough(),E1r=w0.extend({method:O.literal("initialize"),params:Nm.extend({protocolVersion:O.string(),capabilities:v1r,clientInfo:iht})});var x1r=O.object({experimental:O.optional(O.object({}).passthrough()),logging:O.optional(O.object({}).passthrough()),completions:O.optional(O.object({}).passthrough()),prompts:O.optional(O.object({listChanged:O.optional(O.boolean())}).passthrough()),resources:O.optional(O.object({subscribe:O.optional(O.boolean()),listChanged:O.optional(O.boolean())}).passthrough()),tools:O.optional(O.object({listChanged:O.optional(O.boolean())}).passthrough())}).passthrough(),J_e=Lm.extend({protocolVersion:O.string(),capabilities:x1r,serverInfo:iht,instructions:O.optional(O.string())}),oht=A1.extend({method:O.literal("notifications/initialized")}),sht=s(t=>oht.safeParse(t).success,"isInitializedNotification"),Moe=w0.extend({method:O.literal("ping")}),b1r=O.object({progress:O.number(),total:O.optional(O.number()),message:O.optional(O.string())}).passthrough(),Foe=A1.extend({method:O.literal("notifications/progress"),params:oU.merge(b1r).extend({progressToken:Kpt})}),Ooe=w0.extend({params:Nm.extend({cursor:O.optional(Jpt)}).optional()}),Qoe=Lm.extend({nextCursor:O.optional(Jpt)}),aht=O.object({uri:O.string(),mimeType:O.optional(O.string()),_meta:O.optional(O.object({}).passthrough())}).passthrough(),cht=aht.extend({text:O.string()}),X_e=O.string().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),lht=aht.extend({blob:X_e}),uht=aU.extend({uri:O.string(),description:O.optional(O.string()),mimeType:O.optional(O.string()),_meta:O.optional(O.object({}).passthrough())}),I1r=aU.extend({uriTemplate:O.string(),description:O.optional(O.string()),mimeType:O.optional(O.string()),_meta:O.optional(O.object({}).passthrough())}),T1r=Ooe.extend({method:O.literal("resources/list")}),Z_e=Qoe.extend({resources:O.array(uht)}),w1r=Ooe.extend({method:O.literal("resources/templates/list")}),eSe=Qoe.extend({resourceTemplates:O.array(I1r)}),_1r=w0.extend({method:O.literal("resources/read"),params:Nm.extend({uri:O.string()})}),tSe=Lm.extend({contents:O.array(O.union([cht,lht]))}),S1r=A1.extend({method:O.literal("notifications/resources/list_changed")}),R1r=w0.extend({method:O.literal("resources/subscribe"),params:Nm.extend({uri:O.string()})}),k1r=w0.extend({method:O.literal("resources/unsubscribe"),params:Nm.extend({uri:O.string()})}),P1r=A1.extend({method:O.literal("notifications/resources/updated"),params:oU.extend({uri:O.string()})}),D1r=O.object({name:O.string(),description:O.optional(O.string()),required:O.optional(O.boolean())}).passthrough(),B1r=aU.extend({description:O.optional(O.string()),arguments:O.optional(O.array(D1r)),_meta:O.optional(O.object({}).passthrough())}),N1r=Ooe.extend({method:O.literal("prompts/list")}),rSe=Qoe.extend({prompts:O.array(B1r)}),L1r=w0.extend({method:O.literal("prompts/get"),params:Nm.extend({name:O.string(),arguments:O.optional(O.record(O.string()))})}),nSe=O.object({type:O.literal("text"),text:O.string(),_meta:O.optional(O.object({}).passthrough())}).passthrough(),iSe=O.object({type:O.literal("image"),data:X_e,mimeType:O.string(),_meta:O.optional(O.object({}).passthrough())}).passthrough(),oSe=O.object({type:O.literal("audio"),data:X_e,mimeType:O.string(),_meta:O.optional(O.object({}).passthrough())}).passthrough(),M1r=O.object({type:O.literal("resource"),resource:O.union([cht,lht]),_meta:O.optional(O.object({}).passthrough())}).passthrough(),F1r=uht.extend({type:O.literal("resource_link")}),dht=O.union([nSe,iSe,oSe,F1r,M1r]),O1r=O.object({role:O.enum(["user","assistant"]),content:dht}).passthrough(),sSe=Lm.extend({description:O.optional(O.string()),messages:O.array(O1r)}),cU=A1.extend({method:O.literal("notifications/prompts/list_changed")}),Q1r=O.object({title:O.optional(O.string()),readOnlyHint:O.optional(O.boolean()),destructiveHint:O.optional(O.boolean()),idempotentHint:O.optional(O.boolean()),openWorldHint:O.optional(O.boolean())}).passthrough(),U1r=aU.extend({description:O.optional(O.string()),inputSchema:O.object({type:O.literal("object"),properties:O.optional(O.object({}).passthrough()),required:O.optional(O.array(O.string()))}).passthrough(),outputSchema:O.optional(O.object({type:O.literal("object"),properties:O.optional(O.object({}).passthrough()),required:O.optional(O.array(O.string()))}).passthrough()),annotations:O.optional(Q1r),_meta:O.optional(O.object({}).passthrough())}),q1r=Ooe.extend({method:O.literal("tools/list")}),aSe=Qoe.extend({tools:O.array(U1r)}),Uoe=Lm.extend({content:O.array(dht).default([]),structuredContent:O.object({}).passthrough().optional(),isError:O.optional(O.boolean())}),rpo=Uoe.or(Lm.extend({toolResult:O.unknown()})),H1r=w0.extend({method:O.literal("tools/call"),params:Nm.extend({name:O.string(),arguments:O.optional(O.record(O.unknown()))})}),lU=A1.extend({method:O.literal("notifications/tools/list_changed")}),fht=O.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),W1r=w0.extend({method:O.literal("logging/setLevel"),params:Nm.extend({level:fht})}),cSe=A1.extend({method:O.literal("notifications/message"),params:oU.extend({level:fht,logger:O.optional(O.string()),data:O.unknown()})}),$1r=O.object({name:O.string().optional()}).passthrough(),j1r=O.object({hints:O.optional(O.array($1r)),costPriority:O.optional(O.number().min(0).max(1)),speedPriority:O.optional(O.number().min(0).max(1)),intelligencePriority:O.optional(O.number().min(0).max(1))}).passthrough(),G1r=O.object({role:O.enum(["user","assistant"]),content:O.union([nSe,iSe,oSe])}).passthrough(),V1r=w0.extend({method:O.literal("sampling/createMessage"),params:Nm.extend({messages:O.array(G1r),systemPrompt:O.optional(O.string()),includeContext:O.optional(O.enum(["none","thisServer","allServers"])),temperature:O.optional(O.number()),maxTokens:O.number().int(),stopSequences:O.optional(O.array(O.string())),metadata:O.optional(O.object({}).passthrough()),modelPreferences:O.optional(j1r)})}),z1r=Lm.extend({model:O.string(),stopReason:O.optional(O.enum(["endTurn","stopSequence","maxTokens"]).or(O.string())),role:O.enum(["user","assistant"]),content:O.discriminatedUnion("type",[nSe,iSe,oSe])}),Y1r=O.object({type:O.literal("boolean"),title:O.optional(O.string()),description:O.optional(O.string()),default:O.optional(O.boolean())}).passthrough(),K1r=O.object({type:O.literal("string"),title:O.optional(O.string()),description:O.optional(O.string()),minLength:O.optional(O.number()),maxLength:O.optional(O.number()),format:O.optional(O.enum(["email","uri","date","date-time"]))}).passthrough(),J1r=O.object({type:O.enum(["number","integer"]),title:O.optional(O.string()),description:O.optional(O.string()),minimum:O.optional(O.number()),maximum:O.optional(O.number())}).passthrough(),X1r=O.object({type:O.literal("string"),title:O.optional(O.string()),description:O.optional(O.string()),enum:O.array(O.string()),enumNames:O.optional(O.array(O.string()))}).passthrough(),Z1r=O.union([Y1r,K1r,J1r,X1r]),evr=w0.extend({method:O.literal("elicitation/create"),params:Nm.extend({message:O.string(),requestedSchema:O.object({type:O.literal("object"),properties:O.record(O.string(),Z1r),required:O.optional(O.array(O.string()))}).passthrough()})}),tvr=Lm.extend({action:O.enum(["accept","decline","cancel"]),content:O.optional(O.record(O.string(),O.unknown()))}),rvr=O.object({type:O.literal("ref/resource"),uri:O.string()}).passthrough();var nvr=O.object({type:O.literal("ref/prompt"),name:O.string()}).passthrough(),ivr=w0.extend({method:O.literal("completion/complete"),params:Nm.extend({ref:O.union([nvr,rvr]),argument:O.object({name:O.string(),value:O.string()}).passthrough(),context:O.optional(O.object({arguments:O.optional(O.record(O.string(),O.string()))}))})}),lSe=Lm.extend({completion:O.object({values:O.array(O.string()).max(100),total:O.optional(O.number().int()),hasMore:O.optional(O.boolean())}).passthrough()}),ovr=O.object({uri:O.string().startsWith("file://"),name:O.optional(O.string()),_meta:O.optional(O.object({}).passthrough())}).passthrough(),svr=w0.extend({method:O.literal("roots/list")}),avr=Lm.extend({roots:O.array(ovr)}),cvr=A1.extend({method:O.literal("notifications/roots/list_changed")}),npo=O.union([Moe,E1r,ivr,W1r,L1r,N1r,T1r,w1r,_1r,R1r,k1r,H1r,q1r]),ipo=O.union([Loe,Foe,oht,cvr]),opo=O.union([L5,z1r,tvr,avr]),spo=O.union([Moe,V1r,evr,svr]),apo=O.union([Loe,Foe,cSe,P1r,S1r,lU,cU]),cpo=O.union([L5,J_e,lSe,sSe,rSe,Z_e,eSe,tSe,Uoe,aSe]),Bm=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var lvr=6e4,qoe=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Loe,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(Foe,r=>{this._onprogress(r)}),this.setRequestHandler(Moe,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Bm(Dm.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,n,i;this._transport=e;let o=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let a=(n=this.transport)===null||n===void 0?void 0:n.onerror;this._transport.onerror=l=>{a?.(l),this._onerror(l)};let c=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,u)=>{c?.(l,u),sU(l)||nht(l)?this._onresponse(l):Noe(l)?this._onrequest(l,u):eht(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new Bm(Dm.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Dm.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,h)=>this.request(f,p,{...h,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,h;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:Dm.InternalError,message:(h=f.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),sU(e))n(e);else{let i=new Bm(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,h,m,g;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let A=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:A};n?.onprogress&&(this._progressHandlers.set(A,n.onprogress),y.params={...e.params,_meta:{...((p=e.params)===null||p===void 0?void 0:p._meta)||{},progressToken:A}});let E=s(S=>{var P;this._responseHandlers.delete(A),this._progressHandlers.delete(A),this._cleanupTimeout(A),(P=this._transport)===null||P===void 0||P.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:A,reason:String(S)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),l(S)},"cancel");this._responseHandlers.set(A,S=>{var P;if(!(!((P=n?.signal)===null||P===void 0)&&P.aborted)){if(S instanceof Error)return l(S);try{let B=r.parse(S.result);c(B)}catch(B){l(B)}}}),(h=n?.signal)===null||h===void 0||h.addEventListener("abort",()=>{var S;E((S=n?.signal)===null||S===void 0?void 0:S.reason)});let b=(m=n?.timeout)!==null&&m!==void 0?m:lvr,_=s(()=>E(new Bm(Dm.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(A,b,n?.maxTotalTimeout,_,(g=n?.resetTimeoutOnProgress)!==null&&g!==void 0?g:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(S=>{this._cleanupTimeout(A),l(S)})})}async notification(e,r){var n,i;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((i=(n=this._options)===null||n===void 0?void 0:n.debouncedNotificationMethods)!==null&&i!==void 0?i:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var l;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let u={...e,jsonrpc:"2.0"};(l=this._transport)===null||l===void 0||l.send(u,r).catch(f=>this._onerror(f))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function pht(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(pht,"mergeCapabilities");var mgt=Me(hgt(),1);var sse=class extends qoe{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{},this._ajv=new mgt.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=pht(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:i8,capabilities:this._capabilities,clientInfo:this._clientInfo}},J_e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!Ypt.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},L5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},lSe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},L5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},sSe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},rSe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},Z_e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},eSe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},tSe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},L5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},L5,r)}async callTool(e,r=Uoe,n){let i=await this.request({method:"tools/call",params:e},r,n),o=this.getToolOutputValidator(e.name);if(o){if(!i.structuredContent&&!i.isError)throw new Bm(Dm.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(i.structuredContent)try{if(!o(i.structuredContent))throw new Bm(Dm.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(o.errors)}`)}catch(a){throw a instanceof Bm?a:new Bm(Dm.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return i}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let r of e)if(r.outputSchema)try{let n=this._ajv.compile(r.outputSchema);this._cachedToolOutputValidators.set(r.name,n)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,r){let n=await this.request({method:"tools/list",params:e},aSe,r);return this.cacheToolOutputSchemas(n.tools),n}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var ggt=Me(require("events"));var Lw=class{constructor(e,r,n){this.transport=null;this.emitter=new ggt.default;this.ctx=e,this.mcp=new sse({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw ps.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw ps.error(this.ctx,"Connection failed:",r),await h1(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Lpt(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;Pd(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new uo([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);ps.error(this.ctx,o),await h1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ni(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);ps.error(this.ctx,o),await h1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ni(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));ps.error(this.ctx,o),await h1(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ni(o))}return n}addListeners(){this.mcp.onclose=()=>{ps.info(this.ctx,`MCP server ${this.name} connection closed.`),Pd(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{ps.error(this.ctx,`MCP server ${this.name} error:`,e),h1(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(cSe,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":ps.info(this.ctx,`MCP server ${this.name} log:`,r),Pd(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":ps.warn(this.ctx,`MCP server ${this.name} log:`,r),y5(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":ps.error(this.ctx,`MCP server ${this.name} log:`,r),h1(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:ps.info(this.ctx,`MCP server ${this.name} log:`,r),Pd(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new uo([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Ni(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new XR({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();d();d();var ase=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function NSe(t){}s(NSe,"noop");function cse(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=NSe,onError:r=NSe,onRetry:n=NSe,onComment:i}=t,o="",a=!0,c,l="",u="";function f(A){let y=a?A.replace(/^\xEF\xBB\xBF/,""):A,[E,b]=HEr(`${o}${y}`);for(let _ of E)p(_);o=b,a=!1}s(f,"feed");function p(A){if(A===""){m();return}if(A.startsWith(":")){i&&i(A.slice(A.startsWith(": ")?2:1));return}let y=A.indexOf(":");if(y!==-1){let E=A.slice(0,y),b=A[y+1]===" "?2:1,_=A.slice(y+b);h(E,_,A);return}h(A,"",A)}s(p,"parseLine");function h(A,y,E){switch(A){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":c=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new ase(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:E}));break;default:r(new ase(`Unknown field "${A.length>20?`${A.slice(0,20)}\u2026`:A}"`,{type:"unknown-field",field:A,value:y,line:E}));break}}s(h,"processField");function m(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(m,"dispatchEvent");function g(A={}){o&&A.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(cse,"createParser");function HEr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(HEr,"splitLines");var use=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(Agt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(Agt(this),r)}};function WEr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(WEr,"syntaxError");function LSe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(LSe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${LSe(t.cause)}`:t.message:`${t}`}s(LSe,"flattenError");function Agt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(Agt,"inspectableError");var Cgt=s(t=>{throw TypeError(t)},"__typeError"),WSe=s((t,e,r)=>e.has(t)||Cgt("Cannot "+r),"__accessCheck"),Gi=s((t,e,r)=>(WSe(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Tl=s((t,e,r)=>e.has(t)?Cgt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Ta=s((t,e,r,n)=>(WSe(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),ZE=s((t,e,r)=>(WSe(t,e,"access private method"),r),"__privateMethod"),_0,O5,o8,lse,dse,pU,c8,hU,Mw,s8,l8,a8,dU,MA,MSe,FSe,OSe,ygt,QSe,USe,fU,qSe,HSe,Q5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),Tl(this,MA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,Tl(this,_0),Tl(this,O5),Tl(this,o8),Tl(this,lse),Tl(this,dse),Tl(this,pU),Tl(this,c8),Tl(this,hU,null),Tl(this,Mw),Tl(this,s8),Tl(this,l8,null),Tl(this,a8,null),Tl(this,dU,null),Tl(this,FSe,async o=>{var a;Gi(this,s8).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){ZE(this,MA,fU).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?Ta(this,o8,new URL(o.url)):Ta(this,o8,void 0),u!==200){ZE(this,MA,fU).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){ZE(this,MA,fU).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Gi(this,_0)===this.CLOSED)return;Ta(this,_0,this.OPEN);let p=new Event("open");if((a=Gi(this,dU))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){ZE(this,MA,fU).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let h=new TextDecoder,m=c.getReader(),g=!0;do{let{done:A,value:y}=await m.read();y&&Gi(this,s8).feed(h.decode(y,{stream:!A})),A&&(g=!1,Gi(this,s8).reset(),ZE(this,MA,qSe).call(this))}while(g)}),Tl(this,OSe,o=>{Ta(this,Mw,void 0),!(o.name==="AbortError"||o.type==="aborted")&&ZE(this,MA,qSe).call(this,LSe(o))}),Tl(this,QSe,o=>{typeof o.id=="string"&&Ta(this,hU,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Gi(this,o8)?Gi(this,o8).origin:Gi(this,O5).origin,lastEventId:o.id||""});Gi(this,a8)&&(!o.event||o.event==="message")&&Gi(this,a8).call(this,a),this.dispatchEvent(a)}),Tl(this,USe,o=>{Ta(this,pU,o)}),Tl(this,HSe,()=>{Ta(this,c8,void 0),Gi(this,_0)===this.CONNECTING&&ZE(this,MA,MSe).call(this)});try{if(e instanceof URL)Ta(this,O5,e);else if(typeof e=="string")Ta(this,O5,new URL(e,$Er()));else throw new Error("Invalid URL")}catch{throw WEr("An invalid or illegal string was specified")}Ta(this,s8,cse({onEvent:Gi(this,QSe),onRetry:Gi(this,USe)})),Ta(this,_0,this.CONNECTING),Ta(this,pU,3e3),Ta(this,dse,(n=r?.fetch)!=null?n:globalThis.fetch),Ta(this,lse,(i=r?.withCredentials)!=null?i:!1),ZE(this,MA,MSe).call(this)}get readyState(){return Gi(this,_0)}get url(){return Gi(this,O5).href}get withCredentials(){return Gi(this,lse)}get onerror(){return Gi(this,l8)}set onerror(e){Ta(this,l8,e)}get onmessage(){return Gi(this,a8)}set onmessage(e){Ta(this,a8,e)}get onopen(){return Gi(this,dU)}set onopen(e){Ta(this,dU,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Gi(this,c8)&&clearTimeout(Gi(this,c8)),Gi(this,_0)!==this.CLOSED&&(Gi(this,Mw)&&Gi(this,Mw).abort(),Ta(this,_0,this.CLOSED),Ta(this,Mw,void 0))}};_0=new WeakMap,O5=new WeakMap,o8=new WeakMap,lse=new WeakMap,dse=new WeakMap,pU=new WeakMap,c8=new WeakMap,hU=new WeakMap,Mw=new WeakMap,s8=new WeakMap,l8=new WeakMap,a8=new WeakMap,dU=new WeakMap,MA=new WeakSet,MSe=s(function(){Ta(this,_0,this.CONNECTING),Ta(this,Mw,new AbortController),Gi(this,dse)(Gi(this,O5),ZE(this,MA,ygt).call(this)).then(Gi(this,FSe)).catch(Gi(this,OSe))},"connect_fn"),FSe=new WeakMap,OSe=new WeakMap,ygt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Gi(this,hU)?{"Last-Event-ID":Gi(this,hU)}:void 0},cache:"no-store",signal:(t=Gi(this,Mw))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),QSe=new WeakMap,USe=new WeakMap,fU=s(function(t,e){var r;Gi(this,_0)!==this.CLOSED&&Ta(this,_0,this.CLOSED);let n=new use("error",{code:e,message:t});(r=Gi(this,l8))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),qSe=s(function(t,e){var r;if(Gi(this,_0)===this.CLOSED)return;Ta(this,_0,this.CONNECTING);let n=new use("error",{code:e,message:t});(r=Gi(this,l8))==null||r.call(this,n),this.dispatchEvent(n),Ta(this,c8,setTimeout(Gi(this,HSe),Gi(this,pU)))},"scheduleReconnect_fn"),HSe=new WeakMap,Q5.CONNECTING=0,Q5.OPEN=1,Q5.CLOSED=2;function $Er(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s($Er,"getBaseURL");d();d();var $Se;$Se=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function jEr(t){return(await $Se).getRandomValues(new Uint8Array(t))}s(jEr,"getRandomValues");async function GEr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await jEr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(GEr,"random");async function VEr(t){return await GEr(t)}s(VEr,"generateVerifier");async function zEr(t){let e=await(await $Se).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(zEr,"generateChallenge");async function jSe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await VEr(t),r=await zEr(e);return{code_verifier:e,code_challenge:r}}s(jSe,"pkceChallenge");d();var vgt=O.object({resource:O.string().url(),authorization_servers:O.array(O.string().url()).optional(),jwks_uri:O.string().url().optional(),scopes_supported:O.array(O.string()).optional(),bearer_methods_supported:O.array(O.string()).optional(),resource_signing_alg_values_supported:O.array(O.string()).optional(),resource_name:O.string().optional(),resource_documentation:O.string().optional(),resource_policy_uri:O.string().url().optional(),resource_tos_uri:O.string().url().optional(),tls_client_certificate_bound_access_tokens:O.boolean().optional(),authorization_details_types_supported:O.array(O.string()).optional(),dpop_signing_alg_values_supported:O.array(O.string()).optional(),dpop_bound_access_tokens_required:O.boolean().optional()}).passthrough(),GSe=O.object({issuer:O.string(),authorization_endpoint:O.string(),token_endpoint:O.string(),registration_endpoint:O.string().optional(),scopes_supported:O.array(O.string()).optional(),response_types_supported:O.array(O.string()),response_modes_supported:O.array(O.string()).optional(),grant_types_supported:O.array(O.string()).optional(),token_endpoint_auth_methods_supported:O.array(O.string()).optional(),token_endpoint_auth_signing_alg_values_supported:O.array(O.string()).optional(),service_documentation:O.string().optional(),revocation_endpoint:O.string().optional(),revocation_endpoint_auth_methods_supported:O.array(O.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:O.array(O.string()).optional(),introspection_endpoint:O.string().optional(),introspection_endpoint_auth_methods_supported:O.array(O.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:O.array(O.string()).optional(),code_challenge_methods_supported:O.array(O.string()).optional()}).passthrough(),YEr=O.object({issuer:O.string(),authorization_endpoint:O.string(),token_endpoint:O.string(),userinfo_endpoint:O.string().optional(),jwks_uri:O.string(),registration_endpoint:O.string().optional(),scopes_supported:O.array(O.string()).optional(),response_types_supported:O.array(O.string()),response_modes_supported:O.array(O.string()).optional(),grant_types_supported:O.array(O.string()).optional(),acr_values_supported:O.array(O.string()).optional(),subject_types_supported:O.array(O.string()),id_token_signing_alg_values_supported:O.array(O.string()),id_token_encryption_alg_values_supported:O.array(O.string()).optional(),id_token_encryption_enc_values_supported:O.array(O.string()).optional(),userinfo_signing_alg_values_supported:O.array(O.string()).optional(),userinfo_encryption_alg_values_supported:O.array(O.string()).optional(),userinfo_encryption_enc_values_supported:O.array(O.string()).optional(),request_object_signing_alg_values_supported:O.array(O.string()).optional(),request_object_encryption_alg_values_supported:O.array(O.string()).optional(),request_object_encryption_enc_values_supported:O.array(O.string()).optional(),token_endpoint_auth_methods_supported:O.array(O.string()).optional(),token_endpoint_auth_signing_alg_values_supported:O.array(O.string()).optional(),display_values_supported:O.array(O.string()).optional(),claim_types_supported:O.array(O.string()).optional(),claims_supported:O.array(O.string()).optional(),service_documentation:O.string().optional(),claims_locales_supported:O.array(O.string()).optional(),ui_locales_supported:O.array(O.string()).optional(),claims_parameter_supported:O.boolean().optional(),request_parameter_supported:O.boolean().optional(),request_uri_parameter_supported:O.boolean().optional(),require_request_uri_registration:O.boolean().optional(),op_policy_uri:O.string().optional(),op_tos_uri:O.string().optional()}).passthrough(),Egt=YEr.merge(GSe.pick({code_challenge_methods_supported:!0})),VSe=O.object({access_token:O.string(),id_token:O.string().optional(),token_type:O.string(),expires_in:O.number().optional(),scope:O.string().optional(),refresh_token:O.string().optional()}).strip(),xgt=O.object({error:O.string(),error_description:O.string().optional(),error_uri:O.string().optional()}),KEr=O.object({redirect_uris:O.array(O.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:O.string().optional(),grant_types:O.array(O.string()).optional(),response_types:O.array(O.string()).optional(),client_name:O.string().optional(),client_uri:O.string().optional(),logo_uri:O.string().optional(),scope:O.string().optional(),contacts:O.array(O.string()).optional(),tos_uri:O.string().optional(),policy_uri:O.string().optional(),jwks_uri:O.string().optional(),jwks:O.any().optional(),software_id:O.string().optional(),software_version:O.string().optional(),software_statement:O.string().optional()}).strip(),JEr=O.object({client_id:O.string(),client_secret:O.string().optional(),client_id_issued_at:O.number().optional(),client_secret_expires_at:O.number().optional()}).strip(),bgt=KEr.merge(JEr),fgo=O.object({error:O.string(),error_description:O.string().optional()}).strip(),pgo=O.object({token:O.string(),token_type_hint:O.string().optional()}).strip();d();function Igt(t){let e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}s(Igt,"resourceUrlFromServerUrl");function Tgt({requestedResource:t,configuredResource:e}){let r=typeof t=="string"?new URL(t):new URL(t.href),n=typeof e=="string"?new URL(e):new URL(e.href);if(r.origin!==n.origin||r.pathname.length<n.pathname.length)return!1;let i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=n.pathname.endsWith("/")?n.pathname:n.pathname+"/";return i.startsWith(o)}s(Tgt,"checkResourceAllowed");d();var il=class extends Error{static{s(this,"OAuthError")}constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},mU=class extends il{static{s(this,"InvalidRequestError")}};mU.errorCode="invalid_request";var U5=class extends il{static{s(this,"InvalidClientError")}};U5.errorCode="invalid_client";var q5=class extends il{static{s(this,"InvalidGrantError")}};q5.errorCode="invalid_grant";var H5=class extends il{static{s(this,"UnauthorizedClientError")}};H5.errorCode="unauthorized_client";var gU=class extends il{static{s(this,"UnsupportedGrantTypeError")}};gU.errorCode="unsupported_grant_type";var AU=class extends il{static{s(this,"InvalidScopeError")}};AU.errorCode="invalid_scope";var yU=class extends il{static{s(this,"AccessDeniedError")}};yU.errorCode="access_denied";var ex=class extends il{static{s(this,"ServerError")}};ex.errorCode="server_error";var CU=class extends il{static{s(this,"TemporarilyUnavailableError")}};CU.errorCode="temporarily_unavailable";var vU=class extends il{static{s(this,"UnsupportedResponseTypeError")}};vU.errorCode="unsupported_response_type";var EU=class extends il{static{s(this,"UnsupportedTokenTypeError")}};EU.errorCode="unsupported_token_type";var xU=class extends il{static{s(this,"InvalidTokenError")}};xU.errorCode="invalid_token";var bU=class extends il{static{s(this,"MethodNotAllowedError")}};bU.errorCode="method_not_allowed";var IU=class extends il{static{s(this,"TooManyRequestsError")}};IU.errorCode="too_many_requests";var TU=class extends il{static{s(this,"InvalidClientMetadataError")}};TU.errorCode="invalid_client_metadata";var wU=class extends il{static{s(this,"InsufficientScopeError")}};wU.errorCode="insufficient_scope";var wgt={[mU.errorCode]:mU,[U5.errorCode]:U5,[q5.errorCode]:q5,[H5.errorCode]:H5,[gU.errorCode]:gU,[AU.errorCode]:AU,[yU.errorCode]:yU,[ex.errorCode]:ex,[CU.errorCode]:CU,[vU.errorCode]:vU,[EU.errorCode]:EU,[xU.errorCode]:xU,[bU.errorCode]:bU,[IU.errorCode]:IU,[TU.errorCode]:TU,[wU.errorCode]:wU};var S0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};function Sgt(t,e){let r=t.client_secret!==void 0;return e.length===0?r?"client_secret_post":"none":r&&e.includes("client_secret_basic")?"client_secret_basic":r&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":r?"client_secret_post":"none"}s(Sgt,"selectClientAuthMethod");function Rgt(t,e,r,n){let{client_id:i,client_secret:o}=e;switch(t){case"client_secret_basic":XEr(i,o,r);return;case"client_secret_post":ZEr(i,o,n);return;case"none":exr(i,n);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}s(Rgt,"applyClientAuthentication");function XEr(t,e,r){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let n=btoa(`${t}:${e}`);r.set("Authorization",`Basic ${n}`)}s(XEr,"applyBasicAuth");function ZEr(t,e,r){r.set("client_id",t),e&&r.set("client_secret",e)}s(ZEr,"applyPostAuth");function exr(t,e){e.set("client_id",t)}s(exr,"applyPublicAuth");async function YSe(t){let e=t instanceof Response?t.status:void 0,r=t instanceof Response?await t.text():t;try{let n=xgt.parse(JSON.parse(r)),{error:i,error_description:o,error_uri:a}=n,c=wgt[i]||ex;return new c(o||"",a)}catch(n){let i=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${n}. Raw body: ${r}`;return new ex(i)}}s(YSe,"parseErrorResponse");async function Fw(t,e){var r,n;try{return await zSe(t,e)}catch(i){if(i instanceof U5||i instanceof H5)return await((r=t.invalidateCredentials)===null||r===void 0?void 0:r.call(t,"all")),await zSe(t,e);if(i instanceof q5)return await((n=t.invalidateCredentials)===null||n===void 0?void 0:n.call(t,"tokens")),await zSe(t,e);throw i}}s(Fw,"auth");async function zSe(t,{serverUrl:e,authorizationCode:r,scope:n,resourceMetadataUrl:i,fetchFn:o}){let a,c;try{a=await rxr(e,{resourceMetadataUrl:i},o),a.authorization_servers&&a.authorization_servers.length>0&&(c=a.authorization_servers[0])}catch{}c||(c=e);let l=await txr(e,t,a),u=await axr(c,{fetchFn:o}),f=await Promise.resolve(t.clientInformation());if(!f){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let A=await dxr(c,{metadata:u,clientMetadata:t.clientMetadata});await t.saveClientInformation(A),f=A}if(r!==void 0){let A=await t.codeVerifier(),y=await lxr(c,{metadata:u,clientInformation:f,authorizationCode:r,codeVerifier:A,redirectUri:t.redirectUrl,resource:l,addClientAuthentication:t.addClientAuthentication,fetchFn:o});return await t.saveTokens(y),"AUTHORIZED"}let p=await t.tokens();if(p?.refresh_token)try{let A=await uxr(c,{metadata:u,clientInformation:f,refreshToken:p.refresh_token,resource:l,addClientAuthentication:t.addClientAuthentication});return await t.saveTokens(A),"AUTHORIZED"}catch(A){if(!(!(A instanceof il)||A instanceof ex))throw A}let h=t.state?await t.state():void 0,{authorizationUrl:m,codeVerifier:g}=await cxr(c,{metadata:u,clientInformation:f,state:h,redirectUrl:t.redirectUrl,scope:n||t.clientMetadata.scope,resource:l});return await t.saveCodeVerifier(g),await t.redirectToAuthorization(m),"REDIRECT"}s(zSe,"authInternal");async function txr(t,e,r){let n=Igt(t);if(e.validateResourceURL)return await e.validateResourceURL(n,r?.resource);if(r){if(!Tgt({requestedResource:n,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${n} (or origin)`);return new URL(r.resource)}}s(txr,"selectResourceURL");function _U(t){let e=t.headers.get("WWW-Authenticate");if(!e)return;let[r,n]=e.split(" ");if(r.toLowerCase()!=="bearer"||!n)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}s(_U,"extractResourceMetadataUrl");async function rxr(t,e,r=fetch){let n=await oxr(t,"oauth-protected-resource",r,{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!n||n.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!n.ok)throw new Error(`HTTP ${n.status} trying to load well-known OAuth protected resource metadata.`);return vgt.parse(await n.json())}s(rxr,"discoverOAuthProtectedResourceMetadata");async function KSe(t,e,r=fetch){try{return await r(t,{headers:e})}catch(n){if(n instanceof TypeError)return e?KSe(t,void 0,r):void 0;throw n}}s(KSe,"fetchWithCorsRetry");function nxr(t,e="",r={}){return e.endsWith("/")&&(e=e.slice(0,-1)),r.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}s(nxr,"buildWellKnownPath");async function _gt(t,e,r=fetch){return await KSe(t,{"MCP-Protocol-Version":e},r)}s(_gt,"tryMetadataDiscovery");function ixr(t,e){return!t||t.status===404&&e!=="/"}s(ixr,"shouldAttemptFallback");async function oxr(t,e,r,n){var i,o;let a=new URL(t),c=(i=n?.protocolVersion)!==null&&i!==void 0?i:i8,l;if(n?.metadataUrl)l=new URL(n.metadataUrl);else{let f=nxr(e,a.pathname);l=new URL(f,(o=n?.metadataServerUrl)!==null&&o!==void 0?o:a),l.search=a.search}let u=await _gt(l,c,r);if(!n?.metadataUrl&&ixr(u,a.pathname)){let f=new URL(`/.well-known/${e}`,a);u=await _gt(f,c,r)}return u}s(oxr,"discoverMetadataWithFallback");function sxr(t){let e=typeof t=="string"?new URL(t):t,r=e.pathname!=="/",n=[];if(!r)return n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),n;let i=e.pathname;return i.endsWith("/")&&(i=i.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${i}`,e.origin),type:"oauth"}),n.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${i}`,e.origin),type:"oidc"}),n.push({url:new URL(`${i}/.well-known/openid-configuration`,e.origin),type:"oidc"}),n}s(sxr,"buildDiscoveryUrls");async function axr(t,{fetchFn:e=fetch,protocolVersion:r=i8}={}){var n;let i={"MCP-Protocol-Version":r},o=sxr(t);for(let{url:a,type:c}of o){let l=await KSe(a,i,e);if(!l)throw new Error(`CORS error trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`);if(!l.ok){if(l.status>=400&&l.status<500)continue;throw new Error(`HTTP ${l.status} trying to load ${c==="oauth"?"OAuth":"OpenID provider"} metadata from ${a}`)}if(c==="oauth")return GSe.parse(await l.json());{let u=Egt.parse(await l.json());if(!(!((n=u.code_challenge_methods_supported)===null||n===void 0)&&n.includes("S256")))throw new Error(`Incompatible OIDC provider at ${a}: does not support S256 code challenge method required by MCP specification`);return u}}}s(axr,"discoverAuthorizationServerMetadata");async function cxr(t,{metadata:e,clientInformation:r,redirectUrl:n,scope:i,state:o,resource:a}){let c="code",l="S256",u;if(e){if(u=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else u=new URL("/authorize",t);let f=await jSe(),p=f.code_verifier,h=f.code_challenge;return u.searchParams.set("response_type",c),u.searchParams.set("client_id",r.client_id),u.searchParams.set("code_challenge",h),u.searchParams.set("code_challenge_method",l),u.searchParams.set("redirect_uri",String(n)),o&&u.searchParams.set("state",o),i&&u.searchParams.set("scope",i),i?.includes("offline_access")&&u.searchParams.append("prompt","consent"),a&&u.searchParams.set("resource",a.href),{authorizationUrl:u,codeVerifier:p}}s(cxr,"startAuthorization");async function lxr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o,resource:a,addClientAuthentication:c,fetchFn:l}){var u;let f="authorization_code",p=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",t);if(e?.grant_types_supported&&!e.grant_types_supported.includes(f))throw new Error(`Incompatible auth server: does not support grant type ${f}`);let h=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}),m=new URLSearchParams({grant_type:f,code:n,code_verifier:i,redirect_uri:String(o)});if(c)c(h,m,t,e);else{let A=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=Sgt(r,A);Rgt(y,r,h,m)}a&&m.set("resource",a.href);let g=await(l??fetch)(p,{method:"POST",headers:h,body:m});if(!g.ok)throw await YSe(g);return VSe.parse(await g.json())}s(lxr,"exchangeAuthorization");async function uxr(t,{metadata:e,clientInformation:r,refreshToken:n,resource:i,addClientAuthentication:o,fetchFn:a}){var c;let l="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(l))throw new Error(`Incompatible auth server: does not support grant type ${l}`)}else u=new URL("/token",t);let f=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:l,refresh_token:n});if(o)o(f,p,t,e);else{let m=(c=e?.token_endpoint_auth_methods_supported)!==null&&c!==void 0?c:[],g=Sgt(r,m);Rgt(g,r,f,p)}i&&p.set("resource",i.href);let h=await(a??fetch)(u,{method:"POST",headers:f,body:p});if(!h.ok)throw await YSe(h);return VSe.parse({refresh_token:n,...await h.json()})}s(uxr,"refreshAuthorization");async function dxr(t,{metadata:e,clientMetadata:r,fetchFn:n}){let i;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");i=new URL(e.registration_endpoint)}else i=new URL("/register",t);let o=await(n??fetch)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw await YSe(o);return bgt.parse(await o.json())}s(dxr,"registerClient");var JSe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},fse=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._resourceMetadataUrl=void 0,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch}async _authThenStart(){var e;if(!this._authProvider)throw new S0("No auth provider");let r;try{r=await Fw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new S0;return await this._startOrAuth()}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}_startOrAuth(){var e,r,n;let i=(n=(r=(e=this===null||this===void 0?void 0:this._eventSourceInit)===null||e===void 0?void 0:e.fetch)!==null&&r!==void 0?r:this._fetch)!==null&&n!==void 0?n:fetch;return new Promise((o,a)=>{this._eventSource=new Q5(this._url.href,{...this._eventSourceInit,fetch:s(async(c,l)=>{let u=await this._commonHeaders();u.set("Accept","text/event-stream");let f=await i(c,{...l,headers:u});return f.status===401&&f.headers.has("www-authenticate")&&(this._resourceMetadataUrl=_U(f)),f},"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=c=>{var l;if(c.code===401&&this._authProvider){this._authThenStart().then(o,a);return}let u=new JSe(c.code,c.message,c);a(u),(l=this.onerror)===null||l===void 0||l.call(this,u)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",c=>{var l;let u=c;try{if(this._endpoint=new URL(u.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(f){a(f),(l=this.onerror)===null||l===void 0||l.call(this,f),this.close();return}o()}),this._eventSource.onmessage=c=>{var l,u;let f=c,p;try{p=Pw.parse(JSON.parse(f.data))}catch(h){(l=this.onerror)===null||l===void 0||l.call(this,h);return}(u=this.onmessage)===null||u===void 0||u.call(this,p)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new S0("No auth provider");if(await Fw(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new S0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders();o.set("content-type","application/json");let a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await((n=this._fetch)!==null&&n!==void 0?n:fetch)(this._endpoint,a);if(!c.ok){if(c.status===401&&this._authProvider){if(this._resourceMetadataUrl=_U(c),await Fw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new S0;return this.send(e)}let l=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${l}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}setProtocolVersion(e){this._protocolVersion=e}};var pse=class extends Lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new fse(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(lU,r=>{ps.info(this.ctx,"Tool list changed, refreshing tools..."),Pd(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(EE)}),this.mcp.setNotificationHandler(cU,r=>{ps.info(this.ctx,"Prompts list changed, refreshing tools..."),Pd(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(EE)})}};d();d();var CAt=Me(AAt(),1),SU=Me(require("node:process"),1),vAt=require("node:stream");d();var mse=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),Oxr(r)}clear(){this._buffer=void 0}};function Oxr(t){return Pw.parse(JSON.parse(t))}s(Oxr,"deserializeMessage");function yAt(t){return JSON.stringify(t)+`
`}s(yAt,"serializeMessage");var Qxr=SU.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Uxr(){let t={};for(let e of Qxr){let r=SU.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Uxr,"getDefaultEnvironment");var gse=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new mse,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new vAt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c;this._process=(0,CAt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:{...Uxr(),...this._serverParams.env},stdio:["pipe","pipe",(i=this._serverParams.stderr)!==null&&i!==void 0?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:SU.default.platform==="win32"&&qxr(),cwd:this._serverParams.cwd}),this._process.on("error",l=>{var u,f;if(l.name==="AbortError"){(u=this.onclose)===null||u===void 0||u.call(this);return}r(l),(f=this.onerror)===null||f===void 0||f.call(this,l)}),this._process.on("spawn",()=>{e()}),this._process.on("close",l=>{var u;this._process=void 0,(u=this.onclose)===null||u===void 0||u.call(this)}),(o=this._process.stdin)===null||o===void 0||o.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),(a=this._process.stdout)===null||a===void 0||a.on("data",l=>{this._readBuffer.append(l),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",l=>{var u;(u=this.onerror)===null||u===void 0||u.call(this,l)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}get pid(){var e,r;return(r=(e=this._process)===null||e===void 0?void 0:e.pid)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=yAt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function qxr(){return"type"in SU.default}s(qxr,"isElectron");var Ase=class extends Lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Npt(),...r.env||{}},r.stderr="pipe",new gse(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{y5(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};d();d();d();var yse=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=cse({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var Hxr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},RU=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Cse=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._fetch=r?.fetch,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:Hxr}async _authThenStart(){var e;if(!this._authProvider)throw new S0("No auth provider");let r;try{r=await Fw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new S0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let i=await this._authProvider.tokens();i&&(r.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(r["mcp-session-id"]=this._sessionId),this._protocolVersion&&(r["mcp-protocol-version"]=this._protocolVersion);let n=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers({...r,...n})}async _startOrAuthSse(e){var r,n,i;let{resumptionToken:o}=e;try{let a=await this._commonHeaders();a.set("Accept","text/event-stream"),o&&a.set("last-event-id",o);let c=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,{method:"GET",headers:a,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!c.ok){if(c.status===401&&this._authProvider)return await this._authThenStart();if(c.status===405)return;throw new RU(c.status,`Failed to open SSE stream: ${c.statusText}`)}this._handleSseStream(c.body,e,!0)}catch(a){throw(i=this.onerror)===null||i===void 0||i.call(this,a),a}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r,n){if(!e)return;let{onresumptiontoken:i,replayMessageId:o}=r,a;s(async()=>{var l,u,f,p;try{let h=e.pipeThrough(new TextDecoderStream).pipeThrough(new yse).getReader();for(;;){let{value:m,done:g}=await h.read();if(g)break;if(m.id&&(a=m.id,i?.(m.id)),!m.event||m.event==="message")try{let A=Pw.parse(JSON.parse(m.data));o!==void 0&&sU(A)&&(A.id=o),(l=this.onmessage)===null||l===void 0||l.call(this,A)}catch(A){(u=this.onerror)===null||u===void 0||u.call(this,A)}}}catch(h){if((f=this.onerror)===null||f===void 0||f.call(this,new Error(`SSE stream disconnected: ${h}`)),n&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:i,replayMessageId:o},0)}catch(m){(p=this.onerror)===null||p===void 0||p.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new S0("No auth provider");if(await Fw(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new S0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o,a;try{let{resumptionToken:c,onresumptiontoken:l}=r||{};if(c){this._startOrAuthSse({resumptionToken:c,replayMessageId:Noe(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let u=await this._commonHeaders();u.set("content-type","application/json"),u.set("accept","application/json, text/event-stream");let f={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},p=await((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,f),h=p.headers.get("mcp-session-id");if(h&&(this._sessionId=h),!p.ok){if(p.status===401&&this._authProvider){if(this._resourceMetadataUrl=_U(p),await Fw(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,fetchFn:this._fetch})!=="AUTHORIZED")throw new S0;return this.send(e)}let y=await p.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${p.status}): ${y}`)}if(p.status===202){sht(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let g=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,A=p.headers.get("content-type");if(g)if(A?.includes("text/event-stream"))this._handleSseStream(p.body,{onresumptiontoken:l},!1);else if(A?.includes("application/json")){let y=await p.json(),E=Array.isArray(y)?y.map(b=>Pw.parse(b)):[Pw.parse(y)];for(let b of E)(o=this.onmessage)===null||o===void 0||o.call(this,b)}else throw new RU(-1,`Unexpected content type: ${A}`)}catch(c){throw(a=this.onerror)===null||a===void 0||a.call(this,c),c}}get sessionId(){return this._sessionId}async terminateSession(){var e,r,n;if(this._sessionId)try{let i=await this._commonHeaders(),o={...this._requestInit,method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},a=await((r=this._fetch)!==null&&r!==void 0?r:fetch)(this._url,o);if(!a.ok&&a.status!==405)throw new RU(a.status,`Failed to terminate session: ${a.statusText}`);this._sessionId=void 0}catch(i){throw(n=this.onerror)===null||n===void 0||n.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};var vse=class extends Lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new Cse(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(lU,r=>{ps.info(this.ctx,"Tool list changed, refreshing tools..."),Pd(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(EE)}),this.mcp.setNotificationHandler(cU,r=>{ps.info(this.ctx,"Prompts list changed, refreshing tools..."),Pd(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(EE)})}};d();var Ese=class extends dw{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new _c;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(NC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var EAt=Me(zc());var xse=class t extends vm{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new Toe;this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new EAt.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){ps.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(_d).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));ps.error(this.ctx,a),await h1(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await Pd(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new pse(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new vse(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Ase(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(EE,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await Pd(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(ps.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;ps.info(this.ctx,c),Pd(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await h1(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(Qc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(Rr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;ps.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(_d).registerTool(new Ese({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},p=>(ps.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(_d).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await Pd(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(EE),await i.cleanup())}this.MCPServersMap.clear()}};d();var xAt=Me(zc());var bse=class t extends dA{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new xAt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Rr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var Tse=Me(zc());var Wxr=new Tse.ProtocolRequestType("copilot/showPanelMessageRequest"),$xr=new Tse.ProtocolNotificationType("copilot/showPanelMessage"),Ise=class extends UB{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(Rr).connection.sendNotification($xr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(Rr).connection,i;try{i=await n.sendRequest(Wxr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${Hv(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var jxr=new _t("fetcher"),Gxr="https://default.exp-tas.com/",wse=class extends zn{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(td(i)||`${r}/`.startsWith(Gxr))throw i;jxr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var bAt=new _t("fetcher"),_se=class extends zn{constructor(r,n=new zN(r),i=new GN(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new wse(r,n,i,()=>{bAt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(ME).once(()=>{this.updateFetcher()}),r.get(TA).onConfigChange(Qt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Ao(r,Qt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(vs).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=Ao(this.ctx,Qt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(bAt.debug(this.ctx,n),this.currentFetcher=r)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var Sse=class extends Qc{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Rr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};d();d();var IAt=Me(require("crypto")),TAt=require("os");var Vxr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function zxr(t){let e=t.replace(/-/g,":").toLowerCase();return!Vxr.has(e)}s(zxr,"validateMacAddress");function Yxr(){let t=(0,TAt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(zxr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(Yxr,"getMac");var a2e;function Kxr(){try{let t=Yxr();return IAt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(Kxr,"getMacMachineId");function wAt(){return a2e||(a2e=Kxr()||gr()),a2e}s(wAt,"getMachineId");var Jxr=gr()+Date.now(),_At=new Ts(Jxr,wAt());d();yV();var Rse=class extends Eu{constructor(r,n=new c2e){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(Rr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},c2e=class extends Eu{static{s(this,"SpawnUrlOpener")}async open(e){await hM(e)}};d();d();var kse=class extends Tre{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(wA).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(wA).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(wA).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var Pse=class extends Td{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new kse(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(vs).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function SAt(t){let e=new TA(process.env),r=Zit(e);r.set(TA,e),r.set(ME,new ME),r.set(zn,new _se(r)),r.set(Ua,new Ua(r)),Vwe(r,{});let n=CUe();r.set(ku,n);let i=new JQ(r);r.set(Gr,i),r.set(JQ,i);let o=new iS(r,n);r.set(iS,o),r.set(Fn,new Fn(r,process.env)),r.set(N2,new N2),r.set(Qf,new Qf(r,"agent")),r.set(Ts,_At),r.set(ln,new jre),r.set(A5,dpt()),r.set(Ms,new Ms),r.set(bo,Bpt),r.set(Y2,new loe(r)),r.set(Td,new Pse(r)),r.set(wA,new wA(r)),r.set($l,new $l),r.set(bc,cJ(r,Gdt)),r.set(tm,new tm(r)),r.set(oC,new hD),tct(r),wre(r),vct(r),zGe(r),r.set(Rr,new Rr(r,t)),r.set(Qc,new Sse(r)),r.set(UB,new Ise(r)),r.set(Eu,new Rse(r)),r.set(yo,new Ioe(r)),r.set(ZQ,new ZQ(r));let a=new _w(r);return r.set(vr,a),r.set(_w,a),r.set(Hd,new QB(r,process.env)),r.set(Yc,new Yc(r)),wpt(r),Tot(r),r.set(gf,new gf),r.set(Iw,new Iw),r.set(PA,new PA),r.set(rf,new doe),r.set(u1,new u1),r.set(Kg,new bre(r)),r.set(nC,new fN),r.set(bA,new bA(r)),r.set(vE,new vE(r)),r.set(el,new el(r)),r.set(Uu,new Eoe(r)),r.set(UT,new boe(r)),r.set(NC,new xoe(r)),r.set(_d,new _d(r)),r.set(DE,new DE(r)),r.set(IA,new IA(r)),r.set(vm,new xse(r)),r.set(dA,new bse(r)),r.set(LC,new LC),r.set(g0,new g0),r.set(qC,new qC(r)),r.set(Cm,new Hee([new _re,new Sre])),r}s(SAt,"createLanguageServerContext");d();var l2e=require("events"),kU=Me(require("fs"));yV();var Bse=Me(zc());d();var kAt=Me(require("fs")),PAt=Me(require("http")),f8=Me(require("path"));var Dse=class{constructor(e,r){this.port=e;let n;this.server=PAt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{RAt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{RAt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;f8.basename(__dirname)!=="debug"&&(a=f8.dirname(__dirname)),n??=kAt.readFileSync(f8.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function RAt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(RAt,"writeData");var u2e=class extends Bse.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},d2e=class extends Bse.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function DAt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new l2e.EventEmitter;let c=new Dse(i,n).listen();i===0&&await hM(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=kU.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=kU.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&kU.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new l2e.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new d2e(e,n),r=new u2e(r,n)),[e,r]}s(DAt,"wrapTransports");async function LAt(){let t=JHe(process.argv.slice(2)).version(new ho().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Mm.IPCMessageReader(process),n=new Mm.IPCMessageWriter(process)):e.stdio?(r=new Mm.StreamMessageReader(process.stdin),n=new Mm.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await tx.mkdtemp(BAt.default.tmpdir()+"/github-copilot-"));try{let c=dme(),l=JSON.parse(await tx.readFile(PU.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await tx.readFile(PU.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let h=`${p}:${wg}`;u[h]||!l[p].user||!l[p].oauth_token||(u[h]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:wg},f=!0)}f&&await tx.writeFile(PU.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await tx.rm(PU.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,Mm.createConnection)(Mm.ProposedFeatures.all,...await DAt(process.env,r,n)),o=SAt(i);console=ZUe(o);let a=o.get(Rr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(LAt,"main");NAt.isMainThread?require.main===module&&LAt():JUe()&&XUe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
