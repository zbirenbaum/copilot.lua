"use strict";var OXe=Object.create;var M_=Object.defineProperty;var SAe=Object.getOwnPropertyDescriptor;var UXe=Object.getOwnPropertyNames;var qXe=Object.getPrototypeOf,WXe=Object.prototype.hasOwnProperty;var wAe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),_Ae=t=>{throw TypeError(t)};var s=(t,e)=>M_(t,"name",{value:e,configurable:!0});var GXe=(t,e)=>()=>(t&&(e=t(t=0)),e);var W=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),g1=(t,e)=>{for(var n in e)M_(t,n,{get:e[n],enumerable:!0})},RAe=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of UXe(e))!WXe.call(t,i)&&i!==n&&M_(t,i,{get:()=>e[i],enumerable:!(r=SAe(e,i))||r.enumerable});return t};var qe=(t,e,n)=>(n=t!=null?OXe(qXe(t)):{},RAe(e||!t||!t.__esModule?M_(n,"default",{value:t,enumerable:!0}):n,t)),HXe=t=>RAe(M_({},"__esModule",{value:!0}),t),xu=(t,e,n,r)=>{for(var i=r>1?void 0:r?SAe(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&M_(e,n,i),i},Ds=(t,e)=>(n,r)=>e(n,r,t);var mX=(t,e,n)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&_Ae("Object expected");var r,i;n&&(r=e[wAe("asyncDispose")]),r===void 0&&(r=e[wAe("dispose")],n&&(i=r)),typeof r!="function"&&_Ae("Object not disposable"),i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([n,r,e])}else n&&t.push([n]);return e},hX=(t,e,n)=>{var r=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=n?new r(a,e,"An error was suppressed during disposal"):(n=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(n)throw e};return o()};var importMetaUrlShim,f=GXe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var BAe=W(gX=>{f();var kAe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");gX.encode=function(t){if(0<=t&&t<kAe.length)return kAe[t];throw new TypeError("Must be between 0 and 63: "+t)};gX.decode=function(t){var e=65,n=90,r=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var CX=W(yX=>{f();var DAe=BAe(),AX=5,PAe=1<<AX,NAe=PAe-1,LAe=PAe;function jXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(jXe,"toVLQSigned");function VXe(t){var e=(t&1)===1,n=t>>1;return e?-n:n}s(VXe,"fromVLQSigned");yX.encode=s(function(e){var n="",r,i=jXe(e);do r=i&NAe,i>>>=AX,i>0&&(r|=LAe),n+=DAe.encode(r);while(i>0);return n},"base64VLQ_encode");yX.decode=s(function(e,n,r){var i=e.length,o=0,a=0,l,c;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=DAe.decode(e.charCodeAt(n++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));l=!!(c&LAe),c&=NAe,o=o+(c<<a),a+=AX}while(l);r.value=VXe(o),r.rest=n},"base64VLQ_decode")});var U_=W(Fc=>{f();function $Xe(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}s($Xe,"getArg");Fc.getArg=$Xe;var FAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,zXe=/^data:.+\,.+$/;function wB(t){var e=t.match(FAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(wB,"urlParse");Fc.urlParse=wB;function Q_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(Q_,"urlGenerate");Fc.urlGenerate=Q_;function xX(t){var e=t,n=wB(t);if(n){if(!n.path)return t;e=n.path}for(var r=Fc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,Q_(n)):e}s(xX,"normalize");Fc.normalize=xX;function MAe(t,e){t===""&&(t="."),e===""&&(e=".");var n=wB(e),r=wB(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),Q_(n);if(n||e.match(zXe))return e;if(r&&!r.host&&!r.path)return r.host=e,Q_(r);var i=e.charAt(0)==="/"?e:xX(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,Q_(r)):i}s(MAe,"join");Fc.join=MAe;Fc.isAbsolute=function(t){return t.charAt(0)==="/"||FAe.test(t)};function YXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}s(YXe,"relative");Fc.relative=YXe;var QAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function OAe(t){return t}s(OAe,"identity");function KXe(t){return UAe(t)?"$"+t:t}s(KXe,"toSetString");Fc.toSetString=QAe?OAe:KXe;function JXe(t){return UAe(t)?t.slice(1):t}s(JXe,"fromSetString");Fc.fromSetString=QAe?OAe:JXe;function UAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}s(UAe,"isProtoString");function XXe(t,e,n){var r=O_(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:O_(t.name,e.name)}s(XXe,"compareByOriginalPositions");Fc.compareByOriginalPositions=XXe;function ZXe(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=O_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:O_(t.name,e.name)}s(ZXe,"compareByGeneratedPositionsDeflated");Fc.compareByGeneratedPositionsDeflated=ZXe;function O_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(O_,"strcmp");function eZe(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=O_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:O_(t.name,e.name)}s(eZe,"compareByGeneratedPositionsInflated");Fc.compareByGeneratedPositionsInflated=eZe;function tZe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(tZe,"parseSourceMapInput");Fc.parseSourceMapInput=tZe;function nZe(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=wB(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=MAe(Q_(r),e)}return xX(e)}s(nZe,"computeSourceURL");Fc.computeSourceURL=nZe});var EX=W(qAe=>{f();var vX=U_(),bX=Object.prototype.hasOwnProperty,nI=typeof Map<"u";function A1(){this._array=[],this._set=nI?new Map:Object.create(null)}s(A1,"ArraySet");A1.fromArray=s(function(e,n){for(var r=new A1,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r},"ArraySet_fromArray");A1.prototype.size=s(function(){return nI?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");A1.prototype.add=s(function(e,n){var r=nI?e:vX.toSetString(e),i=nI?this.has(e):bX.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(nI?this._set.set(e,o):this._set[r]=o)},"ArraySet_add");A1.prototype.has=s(function(e){if(nI)return this._set.has(e);var n=vX.toSetString(e);return bX.call(this._set,n)},"ArraySet_has");A1.prototype.indexOf=s(function(e){if(nI){var n=this._set.get(e);if(n>=0)return n}else{var r=vX.toSetString(e);if(bX.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");A1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");A1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");qAe.ArraySet=A1});var HAe=W(GAe=>{f();var WAe=U_();function rZe(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||WAe.compareByGeneratedPositionsInflated(t,e)<=0}s(rZe,"generatedPositionAfter");function K7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(K7,"MappingList");K7.prototype.unsortedForEach=s(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");K7.prototype.add=s(function(e){rZe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");K7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(WAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");GAe.MappingList=K7});var IX=W(jAe=>{f();var _B=CX(),Wa=U_(),J7=EX().ArraySet,iZe=HAe().MappingList;function Af(t){t||(t={}),this._file=Wa.getArg(t,"file",null),this._sourceRoot=Wa.getArg(t,"sourceRoot",null),this._skipValidation=Wa.getArg(t,"skipValidation",!1),this._sources=new J7,this._names=new J7,this._mappings=new iZe,this._sourcesContents=null}s(Af,"SourceMapGenerator");Af.prototype._version=3;Af.fromSourceMap=s(function(e){var n=e.sourceRoot,r=new Af({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Wa.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Wa.relative(n,i)),r._sources.has(o)||r._sources.add(o);var a=e.sourceContentFor(i);a!=null&&r.setSourceContent(i,a)}),r},"SourceMapGenerator_fromSourceMap");Af.prototype.addMapping=s(function(e){var n=Wa.getArg(e,"generated"),r=Wa.getArg(e,"original",null),i=Wa.getArg(e,"source",null),o=Wa.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})},"SourceMapGenerator_addMapping");Af.prototype.setSourceContent=s(function(e,n){var r=e;this._sourceRoot!=null&&(r=Wa.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Wa.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Wa.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Af.prototype.applySourceMap=s(function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Wa.relative(o,i));var a=new J7,l=new J7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,r!=null&&(c.source=Wa.join(r,c.source)),o!=null&&(c.source=Wa.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(r!=null&&(c=Wa.join(r,c)),o!=null&&(c=Wa.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");Af.prototype._validateMapping=s(function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}},"SourceMapGenerator_validateMapping");Af.prototype._serializeMappings=s(function(){for(var e=0,n=1,r=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==n)for(e=0;u.generatedLine!==n;)c+=";",n++;else if(h>0){if(!Wa.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=_B.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=_B.encode(p-a),a=p,c+=_B.encode(u.originalLine-1-i),i=u.originalLine-1,c+=_B.encode(u.originalColumn-r),r=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=_B.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");Af.prototype._generateSourcesContent=s(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Wa.relative(n,r));var i=Wa.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Af.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Af.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");jAe.SourceMapGenerator=Af});var VAe=W(rI=>{f();rI.GREATEST_LOWER_BOUND=1;rI.LEAST_UPPER_BOUND=2;function TX(t,e,n,r,i,o){var a=Math.floor((e-t)/2)+t,l=i(n,r[a],!0);return l===0?a:l>0?e-a>1?TX(a,e,n,r,i,o):o==rI.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?TX(t,a,n,r,i,o):o==rI.LEAST_UPPER_BOUND?a:t<0?-1:t}s(TX,"recursiveSearch");rI.search=s(function(e,n,r,i){if(n.length===0)return-1;var o=TX(-1,n.length,e,n,r,i||rI.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o},"search")});var zAe=W($Ae=>{f();function wX(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}s(wX,"swap");function oZe(t,e){return Math.round(t+Math.random()*(e-t))}s(oZe,"randomIntInRange");function _X(t,e,n,r){if(n<r){var i=oZe(n,r),o=n-1;wX(t,i,r);for(var a=t[r],l=n;l<r;l++)e(t[l],a)<=0&&(o+=1,wX(t,o,l));wX(t,o+1,l);var c=o+1;_X(t,e,n,c-1),_X(t,e,c+1,r)}}s(_X,"doQuickSort");$Ae.quickSort=function(t,e){_X(t,e,0,t.length-1)}});var KAe=W(X7=>{f();var Sn=U_(),SX=VAe(),q_=EX().ArraySet,sZe=CX(),SB=zAe().quickSort;function ls(t,e){var n=t;return typeof t=="string"&&(n=Sn.parseSourceMapInput(t)),n.sections!=null?new em(n,e):new ac(n,e)}s(ls,"SourceMapConsumer");ls.fromSourceMap=function(t,e){return ac.fromSourceMap(t,e)};ls.prototype._version=3;ls.prototype.__generatedMappings=null;Object.defineProperty(ls.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});ls.prototype.__originalMappings=null;Object.defineProperty(ls.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});ls.prototype._charIsMappingSeparator=s(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");ls.prototype._parseMappings=s(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");ls.GENERATED_ORDER=1;ls.ORIGINAL_ORDER=2;ls.GREATEST_LOWER_BOUND=1;ls.LEAST_UPPER_BOUND=2;ls.prototype.eachMapping=s(function(e,n,r){var i=n||null,o=r||ls.GENERATED_ORDER,a;switch(o){case ls.GENERATED_ORDER:a=this._generatedMappings;break;case ls.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=Sn.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");ls.prototype.allGeneratedPositionsFor=s(function(e){var n=Sn.getArg(e,"line"),r={source:Sn.getArg(e,"source"),originalLine:n,originalColumn:Sn.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",Sn.compareByOriginalPositions,SX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:Sn.getArg(a,"generatedLine",null),column:Sn.getArg(a,"generatedColumn",null),lastColumn:Sn.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==c;)i.push({line:Sn.getArg(a,"generatedLine",null),column:Sn.getArg(a,"generatedColumn",null),lastColumn:Sn.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");X7.SourceMapConsumer=ls;function ac(t,e){var n=t;typeof t=="string"&&(n=Sn.parseSourceMapInput(t));var r=Sn.getArg(n,"version"),i=Sn.getArg(n,"sources"),o=Sn.getArg(n,"names",[]),a=Sn.getArg(n,"sourceRoot",null),l=Sn.getArg(n,"sourcesContent",null),c=Sn.getArg(n,"mappings"),u=Sn.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=Sn.normalize(a)),i=i.map(String).map(Sn.normalize).map(function(d){return a&&Sn.isAbsolute(a)&&Sn.isAbsolute(d)?Sn.relative(a,d):d}),this._names=q_.fromArray(o.map(String),!0),this._sources=q_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return Sn.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(ac,"BasicSourceMapConsumer");ac.prototype=Object.create(ls.prototype);ac.prototype.consumer=ls;ac.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Sn.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};ac.fromSourceMap=s(function(e,n){var r=Object.create(ac.prototype),i=r._names=q_.fromArray(e._names.toArray(),!0),o=r._sources=q_.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(h){return Sn.computeSourceURL(r.sourceRoot,h,n)});for(var a=e._mappings.toArray().slice(),l=r.__generatedMappings=[],c=r.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new YAe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return SB(r.__originalMappings,Sn.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");ac.prototype._version=3;Object.defineProperty(ac.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function YAe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(YAe,"Mapping");ac.prototype._parseMappings=s(function(e,n){for(var r=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")r++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new YAe,y.generatedLine=r,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)sZe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}SB(g,Sn.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,SB(h,Sn.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");ac.prototype._findMapping=s(function(e,n,r,i,o,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return SX.search(e,n,o,a)},"SourceMapConsumer_findMapping");ac.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");ac.prototype.originalPositionFor=s(function(e){var n={generatedLine:Sn.getArg(e,"line"),generatedColumn:Sn.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",Sn.compareByGeneratedPositionsDeflated,Sn.getArg(e,"bias",ls.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=Sn.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=Sn.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=Sn.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:Sn.getArg(i,"originalLine",null),column:Sn.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");ac.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");ac.prototype.sourceContentFor=s(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=Sn.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=Sn.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");ac.prototype.generatedPositionFor=s(function(e){var n=Sn.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:Sn.getArg(e,"line"),originalColumn:Sn.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",Sn.compareByOriginalPositions,Sn.getArg(e,"bias",ls.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:Sn.getArg(o,"generatedLine",null),column:Sn.getArg(o,"generatedColumn",null),lastColumn:Sn.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");X7.BasicSourceMapConsumer=ac;function em(t,e){var n=t;typeof t=="string"&&(n=Sn.parseSourceMapInput(t));var r=Sn.getArg(n,"version"),i=Sn.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new q_,this._names=new q_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=Sn.getArg(a,"offset"),c=Sn.getArg(l,"line"),u=Sn.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new ls(Sn.getArg(a,"map"),e)}})}s(em,"IndexedSourceMapConsumer");em.prototype=Object.create(ls.prototype);em.prototype.constructor=ls;em.prototype._version=3;Object.defineProperty(em.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});em.prototype.originalPositionFor=s(function(e){var n={generatedLine:Sn.getArg(e,"line"),generatedColumn:Sn.getArg(e,"column")},r=SX.search(n,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");em.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");em.prototype.sourceContentFor=s(function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");em.prototype.generatedPositionFor=s(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(Sn.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");em.prototype._parseMappings=s(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=Sn.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}SB(this.__generatedMappings,Sn.compareByGeneratedPositionsDeflated),SB(this.__originalMappings,Sn.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");X7.IndexedSourceMapConsumer=em});var XAe=W(JAe=>{f();var aZe=IX().SourceMapGenerator,Z7=U_(),lZe=/(\r?\n)/,cZe=10,W_="$$$isSourceNode$$$";function t0(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=i??null,this[W_]=!0,r!=null&&this.add(r)}s(t0,"SourceNode");t0.fromStringWithSourceMap=s(function(e,n,r){var i=new t0,o=e.split(lZe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return n.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),n.sources.forEach(function(m){var h=n.sourceContentFor(m);h!=null&&(r!=null&&(m=Z7.join(r,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=r?Z7.join(r,m.source):m.source;i.add(new t0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");t0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[W_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");t0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[W_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");t0.prototype.walk=s(function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[W_]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");t0.prototype.join=s(function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");t0.prototype.replaceRight=s(function(e,n){var r=this.children[this.children.length-1];return r[W_]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");t0.prototype.setSourceContent=s(function(e,n){this.sourceContents[Z7.toSetString(e)]=n},"SourceNode_setSourceContent");t0.prototype.walkSourceContents=s(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][W_]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(Z7.fromSetString(i[n]),this.sourceContents[i[n]])},"SourceNode_walkSourceContents");t0.prototype.toString=s(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");t0.prototype.toStringWithSourceMap=s(function(e){var n={code:"",line:1,column:0},r=new aZe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){n.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===cZe?(n.line++,n.column=0,p+1===m?(o=null,i=!1):i&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(u,d){r.setSourceContent(u,d)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");JAe.SourceNode=t0});var ZAe=W(eL=>{f();eL.SourceMapGenerator=IX().SourceMapGenerator;eL.SourceMapConsumer=KAe().SourceMapConsumer;eL.SourceNode=XAe().SourceNode});var t1e=W((hzt,e1e)=>{f();var uZe=Object.prototype.toString,RX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function dZe(t){return uZe.call(t).slice(8,-1)==="ArrayBuffer"}s(dZe,"isArrayBuffer");function fZe(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return RX?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}s(fZe,"fromArrayBuffer");function pZe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return RX?Buffer.from(t,e):new Buffer(t,e)}s(pZe,"fromString");function mZe(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return dZe(t)?fZe(t,e,n):typeof t=="string"?pZe(t,e):RX?Buffer.from(t):new Buffer(t)}s(mZe,"bufferFrom");e1e.exports=mZe});var c1e=W((oI,PX)=>{f();var hZe=ZAe().SourceMapConsumer,kX=require("path"),ng;try{ng=require("fs"),(!ng.existsSync||!ng.readFileSync)&&(ng=null)}catch{}var gZe=t1e();function n1e(t,e){return t.require(e)}s(n1e,"dynamicRequire");var r1e=!1,i1e=!1,BX=!1,RB="auto",iI={},kB={},AZe=/^data:application\/json[^,]+base64,/,xx=[],vx=[];function NX(){return RB==="browser"?!0:RB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(NX,"isInBrowser");function yZe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(yZe,"hasGlobalProcessEventEmitter");function CZe(){return typeof process=="object"&&process!==null?process.version:""}s(CZe,"globalProcessVersion");function xZe(){if(typeof process=="object"&&process!==null)return process.stderr}s(xZe,"globalProcessStderr");function vZe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(vZe,"globalProcessExit");function tL(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}s(tL,"handlerExec");var LX=tL(xx);xx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,i){return i?"":"/"})),t in iI)return iI[t];var e="";try{if(ng)ng.existsSync(t)&&(e=ng.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return iI[t]=e});function DX(t,e){if(!t)return e;var n=kX.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),i=r?r[0]:"",o=n.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+kX.resolve(n.slice(i.length),e).replace(/\\/g,"/")):i+kX.resolve(n.slice(i.length),e)}s(DX,"supportRelativeURL");function bZe(t){var e;if(NX())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=LX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(bZe,"retrieveSourceMapURL");var FX=tL(vx);vx.push(function(t){var e=bZe(t);if(!e)return null;var n;if(AZe.test(e)){var r=e.slice(e.indexOf(",")+1);n=gZe(r,"base64").toString(),e=t}else e=DX(t,e),n=LX(e);return n?{url:e,map:n}:null});function MX(t){var e=kB[t.source];if(!e){var n=FX(t.source);n?(e=kB[t.source]={url:n.url,map:new hZe(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=DX(e.url,i);iI[l]=a}})):e=kB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=DX(e.url,r.source),r}return t}s(MX,"mapSourcePosition");function s1e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=MX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+s1e(e[2])+")":t}s(s1e,"mapEvalOrigin");function EZe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(EZe,"CallSiteToString");function o1e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=EZe,e}s(o1e,"cloneCallSite");function a1e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(CZe())?0:62;r===1&&i>a&&!NX()&&!t.isEval()&&(i-=a);var l=MX({source:n,line:r,column:i});e.curPosition=l,t=o1e(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=s1e(u),t=o1e(t),t.getEvalOrigin=function(){return u}),t}s(a1e,"wrapCallSite");function IZe(t,e){BX&&(iI={},kB={});for(var n=t.name||"Error",r=t.message||"",i=n+": "+r,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+a1e(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(IZe,"prepareStackTrace");function l1e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],i=+e[3],o=iI[n];if(!o&&ng&&ng.existsSync(n))try{o=ng.readFileSync(n,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(l1e,"getErrorSource");function TZe(t){var e=l1e(t),n=xZe();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),vZe(1)}s(TZe,"printErrorAndExit");function wZe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return TZe(arguments[1])}return t.apply(this,arguments)}}s(wZe,"shimEmitUncaughtException");var _Ze=xx.slice(0),SZe=vx.slice(0);oI.wrapCallSite=a1e;oI.getErrorSource=l1e;oI.mapSourcePosition=MX;oI.retrieveSourceMap=FX;oI.install=function(t){if(t=t||{},t.environment&&(RB=t.environment,["node","browser","auto"].indexOf(RB)===-1))throw new Error("environment "+RB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(xx.length=0),xx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(vx.length=0),vx.unshift(t.retrieveSourceMap)),t.hookRequire&&!NX()){var e=n1e(PX,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(o,a){return iI[a]=o,kB[a]=void 0,n.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(BX||(BX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),r1e||(r1e=!0,Error.prepareStackTrace=IZe),!i1e){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=n1e(PX,"worker_threads");i.isMainThread===!1&&(r=!1)}catch{}r&&yZe()&&(i1e=!0,wZe())}};oI.resetRetrieveHandlers=function(){xx.length=0,vx.length=0,xx=_Ze.slice(0),vx=SZe.slice(0),FX=tL(vx),LX=tL(xx)}});var Pi=W((rL,f1e)=>{f();(function(t,e){typeof rL=="object"?f1e.exports=rL=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(rL,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof require=="function")try{r=require("crypto")}catch{}var i=s(function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=n?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,B=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<B;N++){var U=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=U<<24-(k+N)%4*8}else for(var re=0;re<B;re+=4)E[k+re>>>2]=_[re>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,B=_.sigBytes,N=this.blockSize,U=N*4,re=B/U;b?re=e.ceil(re):re=e.max((re|0)-this._minBufferSize,0);var me=re*N,ae=e.min(me*4,B);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=ae}return new u.init(E,ae)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var LB=W((iL,p1e)=>{f();(function(t,e){typeof iL=="object"?p1e.exports=iL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(iL,function(t){return function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=n.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var h1e=W((oL,m1e)=>{f();(function(t,e){typeof oL=="object"?m1e.exports=oL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(oL,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,o=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=r}}(),t.lib.WordArray})});var A1e=W((sL,g1e)=>{f();(function(t,e){typeof sL=="object"?g1e.exports=sL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(sL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return r.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return r.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Ex=W((aL,y1e)=>{f();(function(t,e){typeof aL=="object"?y1e.exports=aL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var x1e=W((lL,C1e)=>{f();(function(t,e){typeof lL=="object"?C1e.exports=lL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(lL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var Ix=W((cL,v1e)=>{f();(function(t,e){typeof cL=="object"?v1e.exports=cL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(cL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],B=h[g+2],N=h[g+3],U=h[g+4],re=h[g+5],me=h[g+6],ae=h[g+7],H=h[g+8],G=h[g+9],ue=h[g+10],ie=h[g+11],$=h[g+12],O=h[g+13],Y=h[g+14],K=h[g+15],le=E[0],te=E[1],pe=E[2],he=E[3];le=u(le,te,pe,he,_,7,l[0]),he=u(he,le,te,pe,k,12,l[1]),pe=u(pe,he,le,te,B,17,l[2]),te=u(te,pe,he,le,N,22,l[3]),le=u(le,te,pe,he,U,7,l[4]),he=u(he,le,te,pe,re,12,l[5]),pe=u(pe,he,le,te,me,17,l[6]),te=u(te,pe,he,le,ae,22,l[7]),le=u(le,te,pe,he,H,7,l[8]),he=u(he,le,te,pe,G,12,l[9]),pe=u(pe,he,le,te,ue,17,l[10]),te=u(te,pe,he,le,ie,22,l[11]),le=u(le,te,pe,he,$,7,l[12]),he=u(he,le,te,pe,O,12,l[13]),pe=u(pe,he,le,te,Y,17,l[14]),te=u(te,pe,he,le,K,22,l[15]),le=d(le,te,pe,he,k,5,l[16]),he=d(he,le,te,pe,me,9,l[17]),pe=d(pe,he,le,te,ie,14,l[18]),te=d(te,pe,he,le,_,20,l[19]),le=d(le,te,pe,he,re,5,l[20]),he=d(he,le,te,pe,ue,9,l[21]),pe=d(pe,he,le,te,K,14,l[22]),te=d(te,pe,he,le,U,20,l[23]),le=d(le,te,pe,he,G,5,l[24]),he=d(he,le,te,pe,Y,9,l[25]),pe=d(pe,he,le,te,N,14,l[26]),te=d(te,pe,he,le,H,20,l[27]),le=d(le,te,pe,he,O,5,l[28]),he=d(he,le,te,pe,B,9,l[29]),pe=d(pe,he,le,te,ae,14,l[30]),te=d(te,pe,he,le,$,20,l[31]),le=p(le,te,pe,he,re,4,l[32]),he=p(he,le,te,pe,H,11,l[33]),pe=p(pe,he,le,te,ie,16,l[34]),te=p(te,pe,he,le,Y,23,l[35]),le=p(le,te,pe,he,k,4,l[36]),he=p(he,le,te,pe,U,11,l[37]),pe=p(pe,he,le,te,ae,16,l[38]),te=p(te,pe,he,le,ue,23,l[39]),le=p(le,te,pe,he,O,4,l[40]),he=p(he,le,te,pe,_,11,l[41]),pe=p(pe,he,le,te,N,16,l[42]),te=p(te,pe,he,le,me,23,l[43]),le=p(le,te,pe,he,G,4,l[44]),he=p(he,le,te,pe,$,11,l[45]),pe=p(pe,he,le,te,K,16,l[46]),te=p(te,pe,he,le,B,23,l[47]),le=m(le,te,pe,he,_,6,l[48]),he=m(he,le,te,pe,ae,10,l[49]),pe=m(pe,he,le,te,Y,15,l[50]),te=m(te,pe,he,le,re,21,l[51]),le=m(le,te,pe,he,$,6,l[52]),he=m(he,le,te,pe,N,10,l[53]),pe=m(pe,he,le,te,ue,15,l[54]),te=m(te,pe,he,le,k,21,l[55]),le=m(le,te,pe,he,H,6,l[56]),he=m(he,le,te,pe,K,10,l[57]),pe=m(pe,he,le,te,me,15,l[58]),te=m(te,pe,he,le,O,21,l[59]),le=m(le,te,pe,he,U,6,l[60]),he=m(he,le,te,pe,ie,10,l[61]),pe=m(pe,he,le,te,B,15,l[62]),te=m(te,pe,he,le,G,21,l[63]),E[0]=E[0]+le|0,E[1]=E[1]+te|0,E[2]=E[2]+pe|0,E[3]=E[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,B=0;B<4;B++){var N=k[B];k[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var QX=W((uL,b1e)=>{f();(function(t,e){typeof uL=="object"?b1e.exports=uL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(uL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var fL=W((dL,E1e)=>{f();(function(t,e){typeof dL=="object"?E1e.exports=dL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(dL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],B=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var U=u[N-15],re=(U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3,me=u[N-2],ae=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=re+u[N-7]+ae+u[N-16]}var H=E&_^~E&k,G=g&y^g&v^y&v,ue=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),$=B+ie+H+c[N]+u[N],O=ue+G;B=k,k=_,_=E,E=b+$|0,b=v,v=y,y=g,g=$+O|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var T1e=W((pL,I1e)=>{f();(function(t,e,n){typeof pL=="object"?I1e.exports=pL=e(Pi(),fL()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(pL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var OX=W((mL,w1e)=>{f();(function(t,e,n){typeof mL=="object"?w1e.exports=mL=e(Pi(),LB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(mL,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=r.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],B=g[6],N=g[7],U=y.high,re=y.low,me=v.high,ae=v.low,H=b.high,G=b.low,ue=E.high,ie=E.low,$=_.high,O=_.low,Y=k.high,K=k.low,le=B.high,te=B.low,pe=N.high,he=N.low,Qe=U,ke=re,Ze=me,Fe=ae,ft=H,It=G,yt=ue,vt=ie,ce=$,Oe=O,ye=Y,tt=K,Z=le,ne=te,Ge=pe,Pe=he,be=0;be<80;be++){var ze,it,ht=d[be];if(be<16)it=ht.high=m[h+be*2]|0,ze=ht.low=m[h+be*2+1]|0;else{var Ot=d[be-15],cn=Ot.high,Lt=Ot.low,Hn=(cn>>>1|Lt<<31)^(cn>>>8|Lt<<24)^cn>>>7,Yn=(Lt>>>1|cn<<31)^(Lt>>>8|cn<<24)^(Lt>>>7|cn<<25),pr=d[be-2],Ae=pr.high,He=pr.low,ut=(Ae>>>19|He<<13)^(Ae<<3|He>>>29)^Ae>>>6,At=(He>>>19|Ae<<13)^(He<<3|Ae>>>29)^(He>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,yn=Xt.low,vn=d[be-16],jt=vn.high,nn=vn.low;ze=Yn+yn,it=Hn+Gt+(ze>>>0<Yn>>>0?1:0),ze=ze+At,it=it+ut+(ze>>>0<At>>>0?1:0),ze=ze+nn,it=it+jt+(ze>>>0<nn>>>0?1:0),ht.high=it,ht.low=ze}var Jt=ce&ye^~ce&Z,wn=Oe&tt^~Oe&ne,Mn=Qe&Ze^Qe&ft^Ze&ft,Kn=ke&Fe^ke&It^Fe&It,Ur=(Qe>>>28|ke<<4)^(Qe<<30|ke>>>2)^(Qe<<25|ke>>>7),Yr=(ke>>>28|Qe<<4)^(ke<<30|Qe>>>2)^(ke<<25|Qe>>>7),Fr=(ce>>>14|Oe<<18)^(ce>>>18|Oe<<14)^(ce<<23|Oe>>>9),jr=(Oe>>>14|ce<<18)^(Oe>>>18|ce<<14)^(Oe<<23|ce>>>9),nr=u[be],Vr=nr.high,_e=nr.low,q=Pe+jr,ge=Ge+Fr+(q>>>0<Pe>>>0?1:0),q=q+wn,ge=ge+Jt+(q>>>0<wn>>>0?1:0),q=q+_e,ge=ge+Vr+(q>>>0<_e>>>0?1:0),q=q+ze,ge=ge+it+(q>>>0<ze>>>0?1:0),ve=Yr+Kn,ee=Ur+Mn+(ve>>>0<Yr>>>0?1:0);Ge=Z,Pe=ne,Z=ye,ne=tt,ye=ce,tt=Oe,Oe=vt+q|0,ce=yt+ge+(Oe>>>0<vt>>>0?1:0)|0,yt=ft,vt=It,ft=Ze,It=Fe,Ze=Qe,Fe=ke,ke=q+ve|0,Qe=ge+ee+(ke>>>0<q>>>0?1:0)|0}re=y.low=re+ke,y.high=U+Qe+(re>>>0<ke>>>0?1:0),ae=v.low=ae+Fe,v.high=me+Ze+(ae>>>0<Fe>>>0?1:0),G=b.low=G+It,b.high=H+ft+(G>>>0<It>>>0?1:0),ie=E.low=ie+vt,E.high=ue+yt+(ie>>>0<vt>>>0?1:0),O=_.low=O+Oe,_.high=$+ce+(O>>>0<Oe>>>0?1:0),K=k.low=K+tt,k.high=Y+ye+(K>>>0<tt>>>0?1:0),te=B.low=te+ne,B.high=le+Z+(te>>>0<ne>>>0?1:0),he=N.low=he+Pe,N.high=pe+Ge+(he>>>0<Pe>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=r._createHelper(p),e.HmacSHA512=r._createHmacHelper(p)}(),t.SHA512})});var S1e=W((hL,_1e)=>{f();(function(t,e,n){typeof hL=="object"?_1e.exports=hL=e(Pi(),LB(),OX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(hL,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var k1e=W((gL,R1e)=>{f();(function(t,e,n){typeof gL=="object"?R1e.exports=gL=e(Pi(),LB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(gL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64,l=a.Word,c=n.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var B=0,N=0,U=0;U<7;U++){if(_&1){var re=(1<<U)-1;re<32?N^=1<<re:B^=1<<re-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(B,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var B=v[E];B.high^=k,B.low^=_}for(var N=0;N<24;N++){for(var U=0;U<5;U++){for(var re=0,me=0,ae=0;ae<5;ae++){var B=v[U+5*ae];re^=B.high,me^=B.low}var H=m[U];H.high=re,H.low=me}for(var U=0;U<5;U++)for(var G=m[(U+4)%5],ue=m[(U+1)%5],ie=ue.high,$=ue.low,re=G.high^(ie<<1|$>>>31),me=G.low^($<<1|ie>>>31),ae=0;ae<5;ae++){var B=v[U+5*ae];B.high^=re,B.low^=me}for(var O=1;O<25;O++){var re,me,B=v[O],Y=B.high,K=B.low,le=u[O];le<32?(re=Y<<le|K>>>32-le,me=K<<le|Y>>>32-le):(re=K<<le-32|Y>>>64-le,me=Y<<le-32|K>>>64-le);var te=m[d[O]];te.high=re,te.low=me}var pe=m[0],he=v[0];pe.high=he.high,pe.low=he.low;for(var U=0;U<5;U++)for(var ae=0;ae<5;ae++){var O=U+5*ae,B=v[O],Qe=m[O],ke=m[(U+1)%5+5*ae],Ze=m[(U+2)%5+5*ae];B.high=Qe.high^~ke.high&Ze.high,B.low=Qe.low^~ke.low&Ze.low}var B=v[0],Fe=p[N];B.high^=Fe.high,B.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,B=k/8,N=[],U=0;U<B;U++){var re=_[U],me=re.high,ae=re.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,ae=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,N.push(ae),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});n.SHA3=o._createHelper(h),n.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var D1e=W((AL,B1e)=>{f();(function(t,e){typeof AL=="object"?B1e.exports=AL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(AL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,B){for(var N=0;N<16;N++){var U=B+N,re=k[U];k[U]=(re<<8|re>>>24)&16711935|(re<<24|re>>>8)&4278255360}var me=this._hash.words,ae=p.words,H=m.words,G=l.words,ue=c.words,ie=u.words,$=d.words,O,Y,K,le,te,pe,he,Qe,ke,Ze;pe=O=me[0],he=Y=me[1],Qe=K=me[2],ke=le=me[3],Ze=te=me[4];for(var Fe,N=0;N<80;N+=1)Fe=O+k[B+G[N]]|0,N<16?Fe+=g(Y,K,le)+ae[0]:N<32?Fe+=y(Y,K,le)+ae[1]:N<48?Fe+=v(Y,K,le)+ae[2]:N<64?Fe+=b(Y,K,le)+ae[3]:Fe+=E(Y,K,le)+ae[4],Fe=Fe|0,Fe=_(Fe,ie[N]),Fe=Fe+te|0,O=te,te=le,le=_(K,10),K=Y,Y=Fe,Fe=pe+k[B+ue[N]]|0,N<16?Fe+=E(he,Qe,ke)+H[0]:N<32?Fe+=b(he,Qe,ke)+H[1]:N<48?Fe+=v(he,Qe,ke)+H[2]:N<64?Fe+=y(he,Qe,ke)+H[3]:Fe+=g(he,Qe,ke)+H[4],Fe=Fe|0,Fe=_(Fe,$[N]),Fe=Fe+Ze|0,pe=Ze,Ze=ke,ke=_(Qe,10),Qe=he,he=Fe;Fe=me[1]+K+ke|0,me[1]=me[2]+le+Ze|0,me[2]=me[3]+te+pe|0,me[3]=me[4]+O+he|0,me[4]=me[0]+Y+Qe|0,me[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,B=k.words,N=this._nDataBytes*8,U=k.sigBytes*8;B[U>>>5]|=128<<24-U%32,B[(U+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var re=this._hash,me=re.words,ae=0;ae<5;ae++){var H=me[ae];me[ae]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return re},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,B,N){return k^B^N}s(g,"f1");function y(k,B,N){return k&B|~k&N}s(y,"f2");function v(k,B,N){return(k|~B)^N}s(v,"f3");function b(k,B,N){return k&N|B&~N}s(b,"f4");function E(k,B,N){return k^(B|~N)}s(E,"f5");function _(k,B){return k<<B|k>>>32-B}s(_,"rotl"),n.RIPEMD160=o._createHelper(h),n.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var CL=W((yL,P1e)=>{f();(function(t,e){typeof yL=="object"?P1e.exports=yL=e(Pi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(yL,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=r.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var L1e=W((xL,N1e)=>{f();(function(t,e,n){typeof xL=="object"?N1e.exports=xL=e(Pi(),fL(),CL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(xL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,B=k.length,N=_,U=1;U<E;U++){N=m.finalize(N),m.reset();for(var re=N.words,me=0;me<B;me++)k[me]^=re[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var y1=W((vL,F1e)=>{f();(function(t,e,n){typeof vL=="object"?F1e.exports=vL=e(Pi(),QX(),CL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(vL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var dl=W((bL,M1e)=>{f();(function(t,e,n){typeof bL=="object"?M1e.exports=bL=e(Pi(),y1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(bL,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,l=n.enc,c=l.Utf8,u=l.Base64,d=n.algo,p=d.EvpKDF,m=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,G){return this.create(this._ENC_XFORM_MODE,H,G)},"createEncryptor"),createDecryptor:s(function(H,G){return this.create(this._DEC_XFORM_MODE,H,G)},"createDecryptor"),init:s(function(H,G,ue){this.cfg=this.cfg.extend(ue),this._xformMode=H,this._key=G,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var G=this._doFinalize();return G},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(G){return typeof G=="string"?ae:U}return s(H,"selectCipherStrategy"),function(G){return{encrypt:s(function(ue,ie,$){return H(ie).encrypt(G,ue,ie,$)},"encrypt"),decrypt:s(function(ue,ie,$){return H(ie).decrypt(G,ue,ie,$)},"decrypt")}}}()}),h=r.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=n.mode={},y=r.BlockCipherMode=i.extend({createEncryptor:s(function(H,G){return this.Encryptor.create(H,G)},"createEncryptor"),createDecryptor:s(function(H,G){return this.Decryptor.create(H,G)},"createDecryptor"),init:s(function(H,G){this._cipher=H,this._iv=G},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(ue,ie){var $=this._cipher,O=$.blockSize;G.call(this,ue,ie,O),$.encryptBlock(ue,ie),this._prevBlock=ue.slice(ie,ie+O)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(ue,ie){var $=this._cipher,O=$.blockSize,Y=ue.slice(ie,ie+O);$.decryptBlock(ue,ie),G.call(this,ue,ie,O),this._prevBlock=Y},"processBlock")});function G(ue,ie,$){var O,Y=this._iv;Y?(O=Y,this._iv=e):O=this._prevBlock;for(var K=0;K<$;K++)ue[ie+K]^=O[K]}return s(G,"xorBlock"),H}(),b=n.pad={},E=b.Pkcs7={pad:s(function(H,G){for(var ue=G*4,ie=ue-H.sigBytes%ue,$=ie<<24|ie<<16|ie<<8|ie,O=[],Y=0;Y<ie;Y+=4)O.push($);var K=o.create(O,ie);H.concat(K)},"pad"),unpad:s(function(H){var G=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=G},"unpad")},_=r.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var G=this.cfg,ue=G.iv,ie=G.mode;this._xformMode==this._ENC_XFORM_MODE?H=ie.createEncryptor:(H=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,ue&&ue.words):(this._mode=H.call(ie,this,ue&&ue.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,G){this._mode.processBlock(H,G)},"_doProcessBlock"),_doFinalize:s(function(){var H,G=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(G.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),G.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=r.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),B=n.format={},N=B.OpenSSL={stringify:s(function(H){var G,ue=H.ciphertext,ie=H.salt;return ie?G=o.create([1398893684,1701076831]).concat(ie).concat(ue):G=ue,G.toString(u)},"stringify"),parse:s(function(H){var G,ue=u.parse(H),ie=ue.words;return ie[0]==1398893684&&ie[1]==1701076831&&(G=o.create(ie.slice(2,4)),ie.splice(0,4),ue.sigBytes-=16),k.create({ciphertext:ue,salt:G})},"parse")},U=r.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,G,ue,ie){ie=this.cfg.extend(ie);var $=H.createEncryptor(ue,ie),O=$.finalize(G),Y=$.cfg;return k.create({ciphertext:O,key:ue,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(H,G,ue,ie){ie=this.cfg.extend(ie),G=this._parse(G,ie.format);var $=H.createDecryptor(ue,ie).finalize(G.ciphertext);return $},"decrypt"),_parse:s(function(H,G){return typeof H=="string"?G.parse(H,this):H},"_parse")}),re=n.kdf={},me=re.OpenSSL={execute:s(function(H,G,ue,ie,$){if(ie||(ie=o.random(64/8)),$)var O=p.create({keySize:G+ue,hasher:$}).compute(H,ie);else var O=p.create({keySize:G+ue}).compute(H,ie);var Y=o.create(O.words.slice(G),ue*4);return O.sigBytes=G*4,k.create({key:O,iv:Y,salt:ie})},"execute")},ae=r.PasswordBasedCipher=U.extend({cfg:U.cfg.extend({kdf:me}),encrypt:s(function(H,G,ue,ie){ie=this.cfg.extend(ie);var $=ie.kdf.execute(ue,H.keySize,H.ivSize,ie.salt,ie.hasher);ie.iv=$.iv;var O=U.encrypt.call(this,H,G,$.key,ie);return O.mixIn($),O},"encrypt"),decrypt:s(function(H,G,ue,ie){ie=this.cfg.extend(ie),G=this._parse(G,ie.format);var $=ie.kdf.execute(ue,H.keySize,H.ivSize,G.salt,ie.hasher);ie.iv=$.iv;var O=U.decrypt.call(this,H,G,$.key,ie);return O},"decrypt")})}()})});var O1e=W((EL,Q1e)=>{f();(function(t,e,n){typeof EL=="object"?Q1e.exports=EL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize;n.call(this,r,i,a,o),this._prevBlock=r.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=r.slice(i,i+a);n.call(this,r,i,a,o),this._prevBlock=l},"processBlock")});function n(r,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)r[i+u]^=l[u]}return s(n,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var q1e=W((IL,U1e)=>{f();(function(t,e,n){typeof IL=="object"?U1e.exports=IL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)r[i+d]^=u[d]},"processBlock")});return e.Decryptor=n,e}(),t.mode.CTR})});var G1e=W((TL,W1e)=>{f();(function(t,e,n){typeof TL=="object"?W1e.exports=TL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(n,"incWord");function r(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}s(r,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),r(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var j1e=W((wL,H1e)=>{f();(function(t,e,n){typeof wL=="object"?H1e.exports=wL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(wL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)r[i+u]^=c[u]},"processBlock")});return e.Decryptor=n,e}(),t.mode.OFB})});var $1e=W((_L,V1e)=>{f();(function(t,e,n){typeof _L=="object"?V1e.exports=_L=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(_L,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(n,r){this._cipher.encryptBlock(n,r)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,r){this._cipher.decryptBlock(n,r)},"processBlock")}),e}(),t.mode.ECB})});var Y1e=W((SL,z1e)=>{f();(function(t,e,n){typeof SL=="object"?z1e.exports=SL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(SL,function(t){return t.pad.AnsiX923={pad:s(function(e,n){var r=e.sigBytes,i=n*4,o=i-r%i,a=r+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Ansix923})});var J1e=W((RL,K1e)=>{f();(function(t,e,n){typeof RL=="object"?K1e.exports=RL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(RL,function(t){return t.pad.Iso10126={pad:s(function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Iso10126})});var Z1e=W((kL,X1e)=>{f();(function(t,e,n){typeof kL=="object"?X1e.exports=kL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(kL,function(t){return t.pad.Iso97971={pad:s(function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var tye=W((BL,eye)=>{f();(function(t,e,n){typeof BL=="object"?eye.exports=BL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(BL,function(t){return t.pad.ZeroPadding={pad:s(function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},"pad"),unpad:s(function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}},"unpad")},t.pad.ZeroPadding})});var rye=W((DL,nye)=>{f();(function(t,e,n){typeof DL=="object"?nye.exports=DL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(DL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var oye=W((PL,iye)=>{f();(function(t,e,n){typeof PL=="object"?iye.exports=PL=e(Pi(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(PL,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,o=n.enc,a=o.Hex,l=n.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var aye=W((NL,sye)=>{f();(function(t,e,n){typeof NL=="object"?sye.exports=NL=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(NL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var B=k^k<<1^k<<2^k<<3^k<<4;B=B>>>8^B&255^99,o[_]=B,a[B]=_;var N=b[_],U=b[N],re=b[U],me=b[B]*257^B*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=re*16843009^U*65537^N*257^_*16843008;p[B]=me<<24|me>>>8,m[B]=me<<16|me>>>16,h[B]=me<<8|me>>>24,g[B]=me,_?(_=N^b[b[b[re^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,B=this._nRounds=k+6,N=(B+1)*4,U=this._keySchedule=[],re=0;re<N;re++)re<k?U[re]=_[re]:(b=U[re-1],re%k?k>6&&re%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[re/k|0]<<24),U[re]=U[re-k]^b);for(var me=this._invKeySchedule=[],ae=0;ae<N;ae++){var re=N-ae;if(ae%4)var b=U[re];else var b=U[re-4];ae<4||re<=4?me[ae]=b:me[ae]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,B,N,U,re){for(var me=this._nRounds,ae=b[E]^_[0],H=b[E+1]^_[1],G=b[E+2]^_[2],ue=b[E+3]^_[3],ie=4,$=1;$<me;$++){var O=k[ae>>>24]^B[H>>>16&255]^N[G>>>8&255]^U[ue&255]^_[ie++],Y=k[H>>>24]^B[G>>>16&255]^N[ue>>>8&255]^U[ae&255]^_[ie++],K=k[G>>>24]^B[ue>>>16&255]^N[ae>>>8&255]^U[H&255]^_[ie++],le=k[ue>>>24]^B[ae>>>16&255]^N[H>>>8&255]^U[G&255]^_[ie++];ae=O,H=Y,G=K,ue=le}var O=(re[ae>>>24]<<24|re[H>>>16&255]<<16|re[G>>>8&255]<<8|re[ue&255])^_[ie++],Y=(re[H>>>24]<<24|re[G>>>16&255]<<16|re[ue>>>8&255]<<8|re[ae&255])^_[ie++],K=(re[G>>>24]<<24|re[ue>>>16&255]<<16|re[ae>>>8&255]<<8|re[H&255])^_[ie++],le=(re[ue>>>24]<<24|re[ae>>>16&255]<<16|re[H>>>8&255]<<8|re[G&255])^_[ie++];b[E]=O,b[E+1]=Y,b[E+2]=K,b[E+3]=le},"_doCryptBlock"),keySize:256/32});e.AES=r._createHelper(v)}(),t.AES})});var cye=W((LL,lye)=>{f();(function(t,e,n){typeof LL=="object"?lye.exports=LL=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(LL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],B=0;B<16;B++){for(var N=k[B]=[],U=c[B],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+U)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+U)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var re=this._invSubKeys=[],E=0;E<16;E++)re[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,B=this._rBlock,N=0,U=0;U<8;U++)N|=u[U][((B^_[U])&d[U])>>>0];this._lBlock=B,this._rBlock=k^N}var re=this._lBlock;this._lBlock=this._rBlock,this._rBlock=re,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(r.create(b)),this._des2=p.createEncryptor(r.create(E)),this._des3=p.createEncryptor(r.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var dye=W((FL,uye)=>{f();(function(t,e,n){typeof FL=="object"?uye.exports=FL=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(FL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=i.RC4=r.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=r._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=r._createHelper(l)}(),t.RC4})});var pye=W((ML,fye)=>{f();(function(t,e,n){typeof ML=="object"?fye.exports=ML=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(ML,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=r.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=B,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var hye=W((QL,mye)=>{f();(function(t,e,n){typeof QL=="object"?mye.exports=QL=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(QL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=r.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=B,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var Aye=W((OL,gye)=>{f();(function(t,e,n){typeof OL=="object"?gye.exports=OL=e(Pi(),Ex(),Ix(),y1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(OL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let B=0;B<4;B++){g.sbox[B]=[];for(let N=0;N<256;N++)g.sbox[B][N]=l[B][N]}let b=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let B=0;B<o+2;B+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[B]=E,g.pbox[B+1]=_;for(let B=0;B<4;B++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[B][N]=E,g.sbox[B][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=r.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(h)}(),t.Blowfish})});var Tx=W((UL,yye)=>{f();(function(t,e,n){typeof UL=="object"?yye.exports=UL=e(Pi(),LB(),h1e(),A1e(),Ex(),x1e(),Ix(),QX(),fL(),T1e(),OX(),S1e(),k1e(),D1e(),CL(),L1e(),y1(),dl(),O1e(),q1e(),G1e(),j1e(),$1e(),Y1e(),J1e(),Z1e(),tye(),rye(),oye(),aye(),cye(),dye(),pye(),hye(),Aye()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(UL,function(t){return t})});var yS=W(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.stringArray=Gc.array=Gc.func=Gc.error=Gc.number=Gc.string=Gc.boolean=void 0;function jst(t){return t===!0||t===!1}s(jst,"boolean");Gc.boolean=jst;function Xxe(t){return typeof t=="string"||t instanceof String}s(Xxe,"string");Gc.string=Xxe;function Vst(t){return typeof t=="number"||t instanceof Number}s(Vst,"number");Gc.number=Vst;function $st(t){return t instanceof Error}s($st,"error");Gc.error=$st;function zst(t){return typeof t=="function"}s(zst,"func");Gc.func=zst;function Zxe(t){return Array.isArray(t)}s(Zxe,"array");Gc.array=Zxe;function Yst(t){return Zxe(t)&&t.every(e=>Xxe(e))}s(Yst,"stringArray");Gc.stringArray=Yst});var dee=W(jn=>{"use strict";f();Object.defineProperty(jn,"__esModule",{value:!0});jn.Message=jn.NotificationType9=jn.NotificationType8=jn.NotificationType7=jn.NotificationType6=jn.NotificationType5=jn.NotificationType4=jn.NotificationType3=jn.NotificationType2=jn.NotificationType1=jn.NotificationType0=jn.NotificationType=jn.RequestType9=jn.RequestType8=jn.RequestType7=jn.RequestType6=jn.RequestType5=jn.RequestType4=jn.RequestType3=jn.RequestType2=jn.RequestType1=jn.RequestType=jn.RequestType0=jn.AbstractMessageSignature=jn.ParameterStructures=jn.ResponseError=jn.ErrorCodes=void 0;var CI=yS(),qZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(qZ||(jn.ErrorCodes=qZ={}));var WZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,n,r){super(n),this.code=CI.number(e)?e:qZ.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};jn.ResponseError=WZ;var ud=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};jn.ParameterStructures=ud;ud.auto=new ud("auto");ud.byPosition=new ud("byPosition");ud.byName=new ud("byName");var gs=class{static{s(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return ud.auto}};jn.AbstractMessageSignature=gs;var GZ=class extends gs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};jn.RequestType0=GZ;var HZ=class extends gs{static{s(this,"RequestType")}constructor(e,n=ud.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.RequestType=HZ;var jZ=class extends gs{static{s(this,"RequestType1")}constructor(e,n=ud.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.RequestType1=jZ;var VZ=class extends gs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};jn.RequestType2=VZ;var $Z=class extends gs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};jn.RequestType3=$Z;var zZ=class extends gs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};jn.RequestType4=zZ;var YZ=class extends gs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};jn.RequestType5=YZ;var KZ=class extends gs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};jn.RequestType6=KZ;var JZ=class extends gs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};jn.RequestType7=JZ;var XZ=class extends gs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};jn.RequestType8=XZ;var ZZ=class extends gs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};jn.RequestType9=ZZ;var eee=class extends gs{static{s(this,"NotificationType")}constructor(e,n=ud.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.NotificationType=eee;var tee=class extends gs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};jn.NotificationType0=tee;var nee=class extends gs{static{s(this,"NotificationType1")}constructor(e,n=ud.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};jn.NotificationType1=nee;var ree=class extends gs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};jn.NotificationType2=ree;var iee=class extends gs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};jn.NotificationType3=iee;var oee=class extends gs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};jn.NotificationType4=oee;var see=class extends gs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};jn.NotificationType5=see;var aee=class extends gs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};jn.NotificationType6=aee;var lee=class extends gs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};jn.NotificationType7=lee;var cee=class extends gs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};jn.NotificationType8=cee;var uee=class extends gs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};jn.NotificationType9=uee;var eve;(function(t){function e(i){let o=i;return o&&CI.string(o.method)&&(CI.string(o.id)||CI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function n(i){let o=i;return o&&CI.string(o.method)&&i.id===void 0}s(n,"isNotification"),t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(CI.string(o.id)||CI.number(o.id)||o.id===null)}s(r,"isResponse"),t.isResponse=r})(eve||(jn.Message=eve={}))});var pee=W(Fx=>{"use strict";f();var tve;Object.defineProperty(Fx,"__esModule",{value:!0});Fx.LRUCache=Fx.LinkedMap=Fx.Touch=void 0;var Hc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Hc||(Fx.Touch=Hc={}));var IF=class{static{s(this,"LinkedMap")}constructor(){this[tve]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Hc.None){let r=this._map.get(e);if(r)return n!==Hc.None&&this.touch(r,n),r.value}set(e,n,r=Hc.None){let i=this._map.get(e);if(i)i.value=n,r!==Hc.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Hc.None:this.addItemLast(i);break;case Hc.First:this.addItemFirst(i);break;case Hc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}[(tve=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Hc.First&&n!==Hc.Last)){if(n===Hc.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Hc.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Fx.LinkedMap=IF;var fee=class extends IF{static{s(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Hc.AsNew){return super.get(e,n)}peek(e){return super.get(e,Hc.None)}set(e,n){return super.set(e,n,Hc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Fx.LRUCache=fee});var rve=W(TF=>{"use strict";f();Object.defineProperty(TF,"__esModule",{value:!0});TF.Disposable=void 0;var nve;(function(t){function e(n){return{dispose:n}}s(e,"create"),t.create=e})(nve||(TF.Disposable=nve={}))});var Mx=W(gee=>{"use strict";f();Object.defineProperty(gee,"__esModule",{value:!0});var mee;function hee(){if(mee===void 0)throw new Error("No runtime abstraction layer installed");return mee}s(hee,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");mee=n}s(e,"install"),t.install=e})(hee||(hee={}));gee.default=hee});var xS=W(CS=>{"use strict";f();Object.defineProperty(CS,"__esModule",{value:!0});CS.Emitter=CS.Event=void 0;var Kst=Mx(),ive;(function(t){let e={dispose(){}};t.None=function(){return e}})(ive||(CS.Event=ive={}));var Aee=class{static{s(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:s(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++)try{n.push(r[o].apply(i[o],e))}catch(l){(0,Kst.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},wF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Aee),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};CS.Emitter=wF;wF._noop=function(){}});var RF=W(vS=>{"use strict";f();Object.defineProperty(vS,"__esModule",{value:!0});vS.CancellationTokenSource=vS.CancellationToken=void 0;var Jst=Mx(),Xst=yS(),yee=xS(),_F;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:yee.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:yee.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Xst.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}s(e,"is"),t.is=e})(_F||(vS.CancellationToken=_F={}));var Zst=Object.freeze(function(t,e){let n=(0,Jst.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),SF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Zst:(this._emitter||(this._emitter=new yee.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Cee=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new SF),this._token}cancel(){this._token?this._token.cancel():this._token=_F.Cancelled}dispose(){this._token?this._token instanceof SF&&this._token.dispose():this._token=_F.None}};vS.CancellationTokenSource=Cee});var ove=W(bS=>{"use strict";f();Object.defineProperty(bS,"__esModule",{value:!0});bS.SharedArrayReceiverStrategy=bS.SharedArraySenderStrategy=void 0;var eat=RF(),t8;(function(t){t.Continue=0,t.Cancelled=1})(t8||(t8={}));var xee=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=t8.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,t8.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};bS.SharedArraySenderStrategy=xee;var vee=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===t8.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},bee=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new vee(e)}cancel(){}dispose(){}},Eee=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new eat.CancellationTokenSource:new bee(n)}};bS.SharedArrayReceiverStrategy=Eee});var Tee=W(kF=>{"use strict";f();Object.defineProperty(kF,"__esModule",{value:!0});kF.Semaphore=void 0;var tat=Mx(),Iee=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,tat.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};kF.Semaphore=Iee});var ave=W(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.ReadableStreamMessageReader=Qx.AbstractMessageReader=Qx.MessageReader=void 0;var _ee=Mx(),ES=yS(),wee=xS(),nat=Tee(),sve;(function(t){function e(n){let r=n;return r&&ES.func(r.listen)&&ES.func(r.dispose)&&ES.func(r.onError)&&ES.func(r.onClose)&&ES.func(r.onPartialMessage)}s(e,"is"),t.is=e})(sve||(Qx.MessageReader=sve={}));var BF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new wee.Emitter,this.closeEmitter=new wee.Emitter,this.partialMessageEmitter=new wee.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${ES.string(e.message)?e.message:"unknown"}`)}};Qx.AbstractMessageReader=BF;var See;(function(t){function e(n){let r,i,o,a=new Map,l,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,a.set(o.name,o)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)a.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,c.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,_ee.default)().applicationJson.decoder,c.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(See||(See={}));var Ree=class extends BF{static{s(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=See.fromOptions(n),this.buffer=(0,_ee.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new nat.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,_ee.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Qx.ReadableStreamMessageReader=Ree});var fve=W(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.WriteableStreamMessageWriter=Ox.AbstractMessageWriter=Ox.MessageWriter=void 0;var lve=Mx(),n8=yS(),rat=Tee(),cve=xS(),iat="Content-Length: ",uve=`\r
`,dve;(function(t){function e(n){let r=n;return r&&n8.func(r.dispose)&&n8.func(r.onClose)&&n8.func(r.onError)&&n8.func(r.write)}s(e,"is"),t.is=e})(dve||(Ox.MessageWriter=dve={}));var DF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new cve.Emitter,this.closeEmitter=new cve.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${n8.string(e.message)?e.message:"unknown"}`)}};Ox.AbstractMessageWriter=DF;var kee;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,lve.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,lve.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(kee||(kee={}));var Bee=class extends DF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=kee.fromOptions(n),this.errorCount=0,this.writeSemaphore=new rat.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(iat,r.byteLength.toString(),uve),i.push(uve),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Ox.WriteableStreamMessageWriter=Bee});var pve=W(PF=>{"use strict";f();Object.defineProperty(PF,"__esModule",{value:!0});PF.AbstractMessageBuffer=void 0;var oat=13,sat=10,aat=`\r
`,Dee=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case oat:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case sat:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=u.byteLength,r++}if(n!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(aat);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);n.set(a,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};PF.AbstractMessageBuffer=Dee});var yve=W(Jr=>{"use strict";f();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.createMessageConnection=Jr.ConnectionOptions=Jr.MessageStrategy=Jr.CancellationStrategy=Jr.CancellationSenderStrategy=Jr.CancellationReceiverStrategy=Jr.RequestCancellationReceiverStrategy=Jr.IdCancellationReceiverStrategy=Jr.ConnectionStrategy=Jr.ConnectionError=Jr.ConnectionErrors=Jr.LogTraceNotification=Jr.SetTraceNotification=Jr.TraceFormat=Jr.TraceValues=Jr.Trace=Jr.NullLogger=Jr.ProgressType=Jr.ProgressToken=void 0;var mve=Mx(),Xs=yS(),_r=dee(),hve=pee(),r8=xS(),Pee=RF(),s8;(function(t){t.type=new _r.NotificationType("$/cancelRequest")})(s8||(s8={}));var Nee;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}s(e,"is"),t.is=e})(Nee||(Jr.ProgressToken=Nee={}));var i8;(function(t){t.type=new _r.NotificationType("$/progress")})(i8||(i8={}));var Lee=class{static{s(this,"ProgressType")}constructor(){}};Jr.ProgressType=Lee;var Fee;(function(t){function e(n){return Xs.func(n)}s(e,"is"),t.is=e})(Fee||(Fee={}));Jr.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Ao;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ao||(Jr.Trace=Ao={}));var gve;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(gve||(Jr.TraceValues=gve={}));(function(t){function e(r){if(!Xs.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(n,"toString"),t.toString=n})(Ao||(Jr.Trace=Ao={}));var u0;(function(t){t.Text="text",t.JSON="json"})(u0||(Jr.TraceFormat=u0={}));(function(t){function e(n){return Xs.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(u0||(Jr.TraceFormat=u0={}));var Mee;(function(t){t.type=new _r.NotificationType("$/setTrace")})(Mee||(Jr.SetTraceNotification=Mee={}));var NF;(function(t){t.type=new _r.NotificationType("$/logTrace")})(NF||(Jr.LogTraceNotification=NF={}));var o8;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(o8||(Jr.ConnectionErrors=o8={}));var IS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Jr.ConnectionError=IS;var Qee;(function(t){function e(n){let r=n;return r&&Xs.func(r.cancelUndispatched)}s(e,"is"),t.is=e})(Qee||(Jr.ConnectionStrategy=Qee={}));var LF;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Xs.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Xs.func(r.dispose))}s(e,"is"),t.is=e})(LF||(Jr.IdCancellationReceiverStrategy=LF={}));var Oee;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Xs.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Xs.func(r.dispose))}s(e,"is"),t.is=e})(Oee||(Jr.RequestCancellationReceiverStrategy=Oee={}));var FF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Pee.CancellationTokenSource}});function e(n){return LF.is(n)||Oee.is(n)}s(e,"is"),t.is=e})(FF||(Jr.CancellationReceiverStrategy=FF={}));var MF;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(s8.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Xs.func(r.sendCancellation)&&Xs.func(r.cleanup)}s(e,"is"),t.is=e})(MF||(Jr.CancellationSenderStrategy=MF={}));var QF;(function(t){t.Message=Object.freeze({receiver:FF.Message,sender:MF.Message});function e(n){let r=n;return r&&FF.is(r.receiver)&&MF.is(r.sender)}s(e,"is"),t.is=e})(QF||(Jr.CancellationStrategy=QF={}));var OF;(function(t){function e(n){let r=n;return r&&Xs.func(r.handleMessage)}s(e,"is"),t.is=e})(OF||(Jr.MessageStrategy=OF={}));var Ave;(function(t){function e(n){let r=n;return r&&(QF.is(r.cancellationStrategy)||Qee.is(r.connectionStrategy)||OF.is(r.messageStrategy))}s(e,"is"),t.is=e})(Ave||(Jr.ConnectionOptions=Ave={}));var gm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(gm||(gm={}));function lat(t,e,n,r){let i=n!==void 0?n:Jr.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new hve.LinkedMap,v=new Map,b=new Set,E=new Map,_=Ao.Off,k=u0.Text,B,N=gm.New,U=new r8.Emitter,re=new r8.Emitter,me=new r8.Emitter,ae=new r8.Emitter,H=new r8.Emitter,G=r&&r.cancellationStrategy?r.cancellationStrategy:QF.Message;function ue(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(ue,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function $(){return"not-"+(++a).toString()}s($,"createNotificationQueueKey");function O(Ae,He){_r.Message.isRequest(He)?Ae.set(ue(He.id),He):_r.Message.isResponse(He)?Ae.set(ie(He.id),He):Ae.set($(),He)}s(O,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function K(){return N===gm.Listening}s(K,"isListening");function le(){return N===gm.Closed}s(le,"isClosed");function te(){return N===gm.Disposed}s(te,"isDisposed");function pe(){(N===gm.New||N===gm.Listening)&&(N=gm.Closed,re.fire(void 0))}s(pe,"closeHandler");function he(Ae){U.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Qe(Ae){U.fire(Ae)}s(Qe,"writeErrorHandler"),t.onClose(pe),t.onError(he),e.onClose(pe),e.onError(Qe);function ke(){g||y.size===0||(g=(0,mve.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(ke,"triggerMessageQueue");function Ze(Ae){_r.Message.isRequest(Ae)?It(Ae):_r.Message.isNotification(Ae)?vt(Ae):_r.Message.isResponse(Ae)?yt(Ae):ce(Ae)}s(Ze,"handleMessage");function Fe(){if(y.size===0)return;let Ae=y.shift();try{let He=r?.messageStrategy;OF.is(He)?He.handleMessage(Ae,Ze):Ze(Ae)}finally{ke()}}s(Fe,"processMessageQueue");let ft=s(Ae=>{try{if(_r.Message.isNotification(Ae)&&Ae.method===s8.type.method){let He=Ae.params.id,ut=ue(He),At=y.get(ut);if(_r.Message.isRequest(At)){let Gt=r?.connectionStrategy,yn=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(At,Y):void 0;if(yn&&(yn.error!==void 0||yn.result!==void 0)){y.delete(ut),E.delete(He),yn.id=At.id,Z(yn,Ae.method,Date.now()),e.write(yn).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(He);if(Xt!==void 0){Xt.cancel(),Ge(Ae);return}else b.add(He)}O(y,Ae)}finally{ke()}},"callback");function It(Ae){if(te())return;function He(jt,nn,Jt){let wn={jsonrpc:c,id:Ae.id};jt instanceof _r.ResponseError?wn.error=jt.toJson():wn.result=jt===void 0?null:jt,Z(wn,nn,Jt),e.write(wn).catch(()=>i.error("Sending response failed."))}s(He,"reply");function ut(jt,nn,Jt){let wn={jsonrpc:c,id:Ae.id,error:jt.toJson()};Z(wn,nn,Jt),e.write(wn).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function At(jt,nn,Jt){jt===void 0&&(jt=null);let wn={jsonrpc:c,id:Ae.id,result:jt};Z(wn,nn,Jt),e.write(wn).catch(()=>i.error("Sending response failed."))}s(At,"replySuccess"),ne(Ae);let Xt=d.get(Ae.method),Gt,yn;Xt&&(Gt=Xt.type,yn=Xt.handler);let vn=Date.now();if(yn||u){let jt=Ae.id??String(Date.now()),nn=LF.is(G.receiver)?G.receiver.createCancellationTokenSource(jt):G.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&nn.cancel(),Ae.id!==null&&E.set(jt,nn);try{let Jt;if(yn)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,vn);return}Jt=yn(nn.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===_r.ParameterStructures.byName){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,vn);return}Jt=yn(...Ae.params,nn.token)}else{if(Gt!==void 0&&Gt.parameterStructures===_r.ParameterStructures.byPosition){ut(new _r.ResponseError(_r.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,vn);return}Jt=yn(Ae.params,nn.token)}else u&&(Jt=u(Ae.method,Ae.params,nn.token));let wn=Jt;Jt?wn.then?wn.then(Mn=>{E.delete(jt),He(Mn,Ae.method,vn)},Mn=>{E.delete(jt),Mn instanceof _r.ResponseError?ut(Mn,Ae.method,vn):Mn&&Xs.string(Mn.message)?ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Mn.message}`),Ae.method,vn):ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}):(E.delete(jt),He(Jt,Ae.method,vn)):(E.delete(jt),At(Jt,Ae.method,vn))}catch(Jt){E.delete(jt),Jt instanceof _r.ResponseError?He(Jt,Ae.method,vn):Jt&&Xs.string(Jt.message)?ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,vn):ut(new _r.ResponseError(_r.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}}else ut(new _r.ResponseError(_r.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,vn)}s(It,"handleRequest");function yt(Ae){if(!te())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let He=Ae.id,ut=v.get(He);if(Pe(Ae,ut),ut!==void 0){v.delete(He);try{if(Ae.error){let At=Ae.error;ut.reject(new _r.ResponseError(At.code,At.message,At.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(At){At.message?i.error(`Response handler '${ut.method}' failed with message: ${At.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(yt,"handleResponse");function vt(Ae){if(te())return;let He,ut;if(Ae.method===s8.type.method){let At=Ae.params.id;b.delete(At),Ge(Ae);return}else{let At=m.get(Ae.method);At&&(ut=At.handler,He=At.type)}if(ut||p)try{if(Ge(Ae),ut)if(Ae.params===void 0)He!==void 0&&He.numberOfParams!==0&&He.parameterStructures!==_r.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${He.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let At=Ae.params;Ae.method===i8.type.method&&At.length===2&&Nee.is(At[0])?ut({token:At[0],value:At[1]}):(He!==void 0&&(He.parameterStructures===_r.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),He.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${He.numberOfParams} params but received ${At.length} arguments`)),ut(...At))}else He!==void 0&&He.parameterStructures===_r.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(At){At.message?i.error(`Notification handler '${Ae.method}' failed with message: ${At.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(vt,"handleNotification");function ce(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let He=Ae;if(Xs.string(He.id)||Xs.number(He.id)){let ut=He.id,At=v.get(ut);At&&At.reject(new Error("The received response has neither a result nor an error property."))}}s(ce,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case Ao.Verbose:return JSON.stringify(Ae,null,4);case Ao.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(He=`Params: ${Oe(Ae.params)}

`),B.log(`Sending request '${Ae.method} - (${Ae.id})'.`,He)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?He=`Params: ${Oe(Ae.params)}

`:He=`No parameters provided.

`),B.log(`Sending notification '${Ae.method}'.`,He)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function Z(Ae,He,ut){if(!(_===Ao.Off||!B))if(k===u0.Text){let At;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?At=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?At=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(At=`No result returned.

`)),B.log(`Sending response '${He} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,At)}else be("send-response",Ae)}s(Z,"traceSendingResponse");function ne(Ae){if(!(_===Ao.Off||!B))if(k===u0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(He=`Params: ${Oe(Ae.params)}

`),B.log(`Received request '${Ae.method} - (${Ae.id})'.`,He)}else be("receive-request",Ae)}s(ne,"traceReceivedRequest");function Ge(Ae){if(!(_===Ao.Off||!B||Ae.method===NF.type.method))if(k===u0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?He=`Params: ${Oe(Ae.params)}

`:He=`No parameters provided.

`),B.log(`Received notification '${Ae.method}'.`,He)}else be("receive-notification",Ae)}s(Ge,"traceReceivedNotification");function Pe(Ae,He){if(!(_===Ao.Off||!B))if(k===u0.Text){let ut;if((_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),He){let At=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";B.log(`Received response '${He.method} - (${Ae.id})' in ${Date.now()-He.timerStart}ms.${At}`,ut)}else B.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(Pe,"traceReceivedResponse");function be(Ae,He){if(!B||_===Ao.Off)return;let ut={isLSPMessage:!0,type:Ae,message:He,timestamp:Date.now()};B.log(ut)}s(be,"logLSPMessage");function ze(){if(le())throw new IS(o8.Closed,"Connection is closed.");if(te())throw new IS(o8.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(K())throw new IS(o8.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function ht(){if(!K())throw new Error("Call listen() first.")}s(ht,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function cn(Ae){if(Ae!==null)return Ae}s(cn,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Hn(Ae,He){switch(Ae){case _r.ParameterStructures.auto:return Lt(He)?cn(He):[Ot(He)];case _r.ParameterStructures.byName:if(!Lt(He))throw new Error("Received parameters by name but param is not an object literal.");return cn(He);case _r.ParameterStructures.byPosition:return[Ot(He)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Hn,"computeSingleParam");function Yn(Ae,He){let ut,At=Ae.numberOfParams;switch(At){case 0:ut=void 0;break;case 1:ut=Hn(Ae.parameterStructures,He[0]);break;default:ut=[];for(let Xt=0;Xt<He.length&&Xt<At;Xt++)ut.push(Ot(He[Xt]));if(He.length<At)for(let Xt=He.length;Xt<At;Xt++)ut.push(null);break}return ut}s(Yn,"computeMessageParams");let pr={sendNotification:s((Ae,...He)=>{ze();let ut,At;if(Xs.string(Ae)){ut=Ae;let Gt=He[0],yn=0,vn=_r.ParameterStructures.auto;_r.ParameterStructures.is(Gt)&&(yn=1,vn=Gt);let jt=He.length,nn=jt-yn;switch(nn){case 0:At=void 0;break;case 1:At=Hn(vn,He[yn]);break;default:if(vn===_r.ParameterStructures.byName)throw new Error(`Received ${nn} parameters for 'by Name' notification parameter structure.`);At=He.slice(yn,jt).map(Jt=>Ot(Jt));break}}else{let Gt=He;ut=Ae.method,At=Yn(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:At};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,He)=>{ze();let ut;return Xs.func(Ae)?p=Ae:He&&(Xs.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:He})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:He}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,He,ut)=>{if(h.has(He))throw new Error(`Progress handler for token ${He} already registered`);return h.set(He,ut),{dispose:s(()=>{h.delete(He)},"dispose")}},"onProgress"),sendProgress:s((Ae,He,ut)=>pr.sendNotification(i8.type,{token:He,value:ut}),"sendProgress"),onUnhandledProgress:ae.event,sendRequest:s((Ae,...He)=>{ze(),ht();let ut,At,Xt;if(Xs.string(Ae)){ut=Ae;let jt=He[0],nn=He[He.length-1],Jt=0,wn=_r.ParameterStructures.auto;_r.ParameterStructures.is(jt)&&(Jt=1,wn=jt);let Mn=He.length;Pee.CancellationToken.is(nn)&&(Mn=Mn-1,Xt=nn);let Kn=Mn-Jt;switch(Kn){case 0:At=void 0;break;case 1:At=Hn(wn,He[Jt]);break;default:if(wn===_r.ParameterStructures.byName)throw new Error(`Received ${Kn} parameters for 'by Name' request parameter structure.`);At=He.slice(Jt,Mn).map(Ur=>Ot(Ur));break}}else{let jt=He;ut=Ae.method,At=Yn(Ae,jt);let nn=Ae.numberOfParams;Xt=Pee.CancellationToken.is(jt[nn])?jt[nn]:void 0}let Gt=o++,yn;Xt&&(yn=Xt.onCancellationRequested(()=>{let jt=G.sender.sendCancellation(pr,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let vn={jsonrpc:c,id:Gt,method:ut,params:At};return ye(vn),typeof G.sender.enableCancellation=="function"&&G.sender.enableCancellation(vn),new Promise(async(jt,nn)=>{let Jt=s(Kn=>{jt(Kn),G.sender.cleanup(Gt),yn?.dispose()},"resolveWithCleanup"),wn=s(Kn=>{nn(Kn),G.sender.cleanup(Gt),yn?.dispose()},"rejectWithCleanup"),Mn={method:ut,timerStart:Date.now(),resolve:Jt,reject:wn};try{await e.write(vn),v.set(Gt,Mn)}catch(Kn){throw i.error("Sending request failed."),Mn.reject(new _r.ResponseError(_r.ErrorCodes.MessageWriteError,Kn.message?Kn.message:"Unknown reason")),Kn}})},"sendRequest"),onRequest:s((Ae,He)=>{ze();let ut=null;return Fee.is(Ae)?(ut=void 0,u=Ae):Xs.string(Ae)?(ut=null,He!==void 0&&(ut=Ae,d.set(Ae,{handler:He,type:void 0}))):He!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:He})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,He,ut)=>{let At=!1,Xt=u0.Text;ut!==void 0&&(Xs.boolean(ut)?At=ut:(At=ut.sendNotification||!1,Xt=ut.traceFormat||u0.Text)),_=Ae,k=Xt,_===Ao.Off?B=void 0:B=He,At&&!le()&&!te()&&await pr.sendNotification(Mee.type,{value:Ao.toString(Ae)})},"trace"),onError:U.event,onClose:re.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(te())return;N=gm.Disposed,H.fire(void 0);let Ae=new _r.ResponseError(_r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let He of v.values())He.reject(Ae);v=new Map,E=new Map,b=new Set,y=new hve.LinkedMap,Xs.func(e.dispose)&&e.dispose(),Xs.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=gm.Listening,t.listen(ft)},"listen"),inspect:s(()=>{(0,mve.default)().console.log("inspect")},"inspect")};return pr.onNotification(NF.type,Ae=>{if(_===Ao.Off||!B)return;let He=_===Ao.Verbose||_===Ao.Compact;B.log(Ae.message,He?Ae.verbose:void 0)}),pr.onNotification(i8.type,Ae=>{let He=h.get(Ae.token);He?He(Ae.value):ae.fire(Ae)}),pr}s(lat,"createMessageConnection");Jr.createMessageConnection=lat});var UF=W(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Zo=dee();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Zo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Zo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Zo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Zo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Zo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Zo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Zo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Zo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Zo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Zo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Zo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Zo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Zo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Zo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Zo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Zo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Zo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Zo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Zo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Zo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Zo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Zo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Zo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Zo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Zo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Zo.ParameterStructures},"get")});var Uee=pee();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return Uee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return Uee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return Uee.Touch},"get")});var cat=rve();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return cat.Disposable},"get")});var Cve=xS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return Cve.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return Cve.Emitter},"get")});var xve=RF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return xve.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return xve.CancellationToken},"get")});var vve=ove();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return vve.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return vve.SharedArrayReceiverStrategy},"get")});var qee=ave();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return qee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return qee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return qee.ReadableStreamMessageReader},"get")});var Wee=fve();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return Wee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Wee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Wee.WriteableStreamMessageWriter},"get")});var uat=pve();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return uat.AbstractMessageBuffer},"get")});var pc=yve();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return pc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return pc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return pc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return pc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return pc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return pc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return pc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return pc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return pc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return pc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return pc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return pc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return pc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return pc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return pc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return pc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return pc.MessageStrategy},"get")});var dat=Mx();ct.RAL=dat.default});var Ive=W(Vee=>{"use strict";f();Object.defineProperty(Vee,"__esModule",{value:!0});var bve=require("util"),P1=UF(),qF=class t extends P1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new bve.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};qF.emptyBuffer=Buffer.allocUnsafe(0);var Gee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),P1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),P1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),P1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),P1.Disposable.create(()=>this.stream.off("data",e))}},Hee=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),P1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),P1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),P1.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s(a=>{a==null?r():i(a)},"callback");typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},Eve=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new qF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new bve.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Gee(t),"asReadableStream"),asWritableStream:s(t=>new Hee(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:s(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:s(()=>clearInterval(r),"dispose")}}})});function jee(){return Eve}s(jee,"RIL");(function(t){function e(){P1.RAL.install(Eve)}s(e,"install"),t.install=e})(jee||(jee={}));Vee.default=jee});var bI=W(Gi=>{"use strict";f();var fat=Gi&&Gi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),pat=Gi&&Gi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&fat(e,t,n)};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.createMessageConnection=Gi.createServerSocketTransport=Gi.createClientSocketTransport=Gi.createServerPipeTransport=Gi.createClientPipeTransport=Gi.generateRandomPipeName=Gi.StreamMessageWriter=Gi.StreamMessageReader=Gi.SocketMessageWriter=Gi.SocketMessageReader=Gi.PortMessageWriter=Gi.PortMessageReader=Gi.IPCMessageWriter=Gi.IPCMessageReader=void 0;var TS=Ive();TS.default.install();var Tve=require("path"),mat=require("os"),hat=require("crypto"),HF=require("net"),d0=UF();pat(UF(),Gi);var $ee=class extends d0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),d0.Disposable.create(()=>this.process.off("message",e))}};Gi.IPCMessageReader=$ee;var zee=class extends d0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Gi.IPCMessageWriter=zee;var Yee=class extends d0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new d0.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};Gi.PortMessageReader=Yee;var Kee=class extends d0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Gi.PortMessageWriter=Kee;var xI=class extends d0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,TS.default)().stream.asReadableStream(e),n)}};Gi.SocketMessageReader=xI;var vI=class extends d0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,n){super((0,TS.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Gi.SocketMessageWriter=vI;var WF=class extends d0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,n){super((0,TS.default)().stream.asReadableStream(e),n)}};Gi.StreamMessageReader=WF;var GF=class extends d0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,n){super((0,TS.default)().stream.asWritableStream(e),n)}};Gi.StreamMessageWriter=GF;var wve=process.env.XDG_RUNTIME_DIR,gat=new Map([["linux",107],["darwin",103]]);function Aat(){let t=(0,hat.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;wve?e=Tve.join(wve,`vscode-ipc-${t}.sock`):e=Tve.join(mat.tmpdir(),`vscode-${t}.sock`);let n=gat.get(process.platform);return n!==void 0&&e.length>n&&(0,TS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}s(Aat,"generateRandomPipeName");Gi.generateRandomPipeName=Aat;function yat(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,HF.createServer)(l=>{a.close(),n([new xI(l,e),new vI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(yat,"createClientPipeTransport");Gi.createClientPipeTransport=yat;function Cat(t,e="utf-8"){let n=(0,HF.createConnection)(t);return[new xI(n,e),new vI(n,e)]}s(Cat,"createServerPipeTransport");Gi.createServerPipeTransport=Cat;function xat(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,HF.createServer)(l=>{a.close(),n([new xI(l,e),new vI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(xat,"createClientSocketTransport");Gi.createClientSocketTransport=xat;function vat(t,e="utf-8"){let n=(0,HF.createConnection)(t,"127.0.0.1");return[new xI(n,e),new vI(n,e)]}s(vat,"createServerSocketTransport");Gi.createServerSocketTransport=vat;function bat(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(bat,"isReadableStream");function Eat(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Eat,"isWritableStream");function Iat(t,e,n,r){n||(n=d0.NullLogger);let i=bat(t)?new WF(t):t,o=Eat(e)?new GF(e):e;return d0.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,d0.createMessageConnection)(i,o,n,r)}s(Iat,"createMessageConnection");Gi.createMessageConnection=Iat});var Jee=W((Ipn,_ve)=>{"use strict";f();_ve.exports=bI()});var VF=W((Sve,jF)=>{f();(function(t){if(typeof jF=="object"&&typeof jF.exports=="object"){var e=t(require,Sve);e!==void 0&&(jF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(n||(e.DocumentUri=n={}));var r;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(r||(e.URI=r={}));var i;(function(q){q.MIN_VALUE=-2147483648,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(i||(e.integer=i={}));var o;(function(q){q.MIN_VALUE=0,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(o||(e.uinteger=o={}));var a;(function(q){function ge(ee,M){return ee===Number.MAX_VALUE&&(ee=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:ee,character:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),q.is=ve})(a||(e.Position=a={}));var l;(function(q){function ge(ee,M,Re,$e){if(_e.uinteger(ee)&&_e.uinteger(M)&&_e.uinteger(Re)&&_e.uinteger($e))return{start:a.create(ee,M),end:a.create(Re,$e)};if(a.is(ee)&&a.is(M))return{start:ee,end:M};throw new Error("Range#create called with invalid arguments[".concat(ee,", ").concat(M,", ").concat(Re,", ").concat($e,"]"))}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),q.is=ve})(l||(e.Range=l={}));var c;(function(q){function ge(ee,M){return{uri:ee,range:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),q.is=ve})(c||(e.Location=c={}));var u;(function(q){function ge(ee,M,Re,$e){return{targetUri:ee,targetRange:M,targetSelectionRange:Re,originSelectionRange:$e}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),q.is=ve})(u||(e.LocationLink=u={}));var d;(function(q){function ge(ee,M,Re,$e){return{red:ee,green:M,blue:Re,alpha:$e}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),q.is=ve})(d||(e.Color=d={}));var p;(function(q){function ge(ee,M){return{range:ee,color:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),q.is=ve})(p||(e.ColorInformation=p={}));var m;(function(q){function ge(ee,M,Re){return{label:ee,textEdit:M,additionalTextEdits:Re}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||B.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,B.is))}s(ve,"is"),q.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(q){q.Comment="comment",q.Imports="imports",q.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(q){function ge(ee,M,Re,$e,qt,Rn){var mn={startLine:ee,endLine:M};return _e.defined(Re)&&(mn.startCharacter=Re),_e.defined($e)&&(mn.endCharacter=$e),_e.defined(qt)&&(mn.kind=qt),_e.defined(Rn)&&(mn.collapsedText=Rn),mn}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),q.is=ve})(g||(e.FoldingRange=g={}));var y;(function(q){function ge(ee,M){return{location:ee,message:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),q.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(q){q.Error=1,q.Warning=2,q.Information=3,q.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(q){q.Unnecessary=1,q.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(q){function ge(ve){var ee=ve;return _e.objectLiteral(ee)&&_e.string(ee.href)}s(ge,"is"),q.is=ge})(E||(e.CodeDescription=E={}));var _;(function(q){function ge(ee,M,Re,$e,qt,Rn){var mn={range:ee,message:M};return _e.defined(Re)&&(mn.severity=Re),_e.defined($e)&&(mn.code=$e),_e.defined(qt)&&(mn.source=qt),_e.defined(Rn)&&(mn.relatedInformation=Rn),mn}s(ge,"create"),q.create=ge;function ve(ee){var M,Re=ee;return _e.defined(Re)&&l.is(Re.range)&&_e.string(Re.message)&&(_e.number(Re.severity)||_e.undefined(Re.severity))&&(_e.integer(Re.code)||_e.string(Re.code)||_e.undefined(Re.code))&&(_e.undefined(Re.codeDescription)||_e.string((M=Re.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(Re.source)||_e.undefined(Re.source))&&(_e.undefined(Re.relatedInformation)||_e.typedArray(Re.relatedInformation,y.is))}s(ve,"is"),q.is=ve})(_||(e.Diagnostic=_={}));var k;(function(q){function ge(ee,M){for(var Re=[],$e=2;$e<arguments.length;$e++)Re[$e-2]=arguments[$e];var qt={title:ee,command:M};return _e.defined(Re)&&Re.length>0&&(qt.arguments=Re),qt}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),q.is=ve})(k||(e.Command=k={}));var B;(function(q){function ge(Re,$e){return{range:Re,newText:$e}}s(ge,"replace"),q.replace=ge;function ve(Re,$e){return{range:{start:Re,end:Re},newText:$e}}s(ve,"insert"),q.insert=ve;function ee(Re){return{range:Re,newText:""}}s(ee,"del"),q.del=ee;function M(Re){var $e=Re;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),q.is=M})(B||(e.TextEdit=B={}));var N;(function(q){function ge(ee,M,Re){var $e={label:ee};return M!==void 0&&($e.needsConfirmation=M),Re!==void 0&&($e.description=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),q.is=ve})(N||(e.ChangeAnnotation=N={}));var U;(function(q){function ge(ve){var ee=ve;return _e.string(ee)}s(ge,"is"),q.is=ge})(U||(e.ChangeAnnotationIdentifier=U={}));var re;(function(q){function ge(Re,$e,qt){return{range:Re,newText:$e,annotationId:qt}}s(ge,"replace"),q.replace=ge;function ve(Re,$e,qt){return{range:{start:Re,end:Re},newText:$e,annotationId:qt}}s(ve,"insert"),q.insert=ve;function ee(Re,$e){return{range:Re,newText:"",annotationId:$e}}s(ee,"del"),q.del=ee;function M(Re){var $e=Re;return B.is($e)&&(N.is($e.annotationId)||U.is($e.annotationId))}s(M,"is"),q.is=M})(re||(e.AnnotatedTextEdit=re={}));var me;(function(q){function ge(ee,M){return{textDocument:ee,edits:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&le.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),q.is=ve})(me||(e.TextDocumentEdit=me={}));var ae;(function(q){function ge(ee,M,Re){var $e={kind:"create",uri:ee};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),Re!==void 0&&($e.annotationId=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(ae||(e.CreateFile=ae={}));var H;(function(q){function ge(ee,M,Re,$e){var qt={kind:"rename",oldUri:ee,newUri:M};return Re!==void 0&&(Re.overwrite!==void 0||Re.ignoreIfExists!==void 0)&&(qt.options=Re),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(H||(e.RenameFile=H={}));var G;(function(q){function ge(ee,M,Re){var $e={kind:"delete",uri:ee};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),Re!==void 0&&($e.annotationId=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(G||(e.DeleteFile=G={}));var ue;(function(q){function ge(ve){var ee=ve;return ee&&(ee.changes!==void 0||ee.documentChanges!==void 0)&&(ee.documentChanges===void 0||ee.documentChanges.every(function(M){return _e.string(M.kind)?ae.is(M)||H.is(M)||G.is(M):me.is(M)}))}s(ge,"is"),q.is=ge})(ue||(e.WorkspaceEdit=ue={}));var ie=function(){function q(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(q,"TextEditChangeImpl"),q.prototype.insert=function(ge,ve,ee){var M,Re;if(ee===void 0?M=B.insert(ge,ve):U.is(ee)?(Re=ee,M=re.insert(ge,ve,ee)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(ee),M=re.insert(ge,ve,Re)),this.edits.push(M),Re!==void 0)return Re},q.prototype.replace=function(ge,ve,ee){var M,Re;if(ee===void 0?M=B.replace(ge,ve):U.is(ee)?(Re=ee,M=re.replace(ge,ve,ee)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(ee),M=re.replace(ge,ve,Re)),this.edits.push(M),Re!==void 0)return Re},q.prototype.delete=function(ge,ve){var ee,M;if(ve===void 0?ee=B.del(ge):U.is(ve)?(M=ve,ee=re.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),ee=re.del(ge,M)),this.edits.push(ee),M!==void 0)return M},q.prototype.add=function(ge){this.edits.push(ge)},q.prototype.all=function(){return this.edits},q.prototype.clear=function(){this.edits.splice(0,this.edits.length)},q.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},q}(),$=function(){function q(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(q,"ChangeAnnotations"),q.prototype.all=function(){return this._annotations},Object.defineProperty(q.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),q.prototype.manage=function(ge,ve){var ee;if(U.is(ge)?ee=ge:(ee=this.nextId(),ve=ge),this._annotations[ee]!==void 0)throw new Error("Id ".concat(ee," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(ee));return this._annotations[ee]=ve,this._size++,ee},q.prototype.nextId=function(){return this._counter++,this._counter.toString()},q}(),O=function(){function q(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new $(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(ee){if(me.is(ee)){var M=new ie(ee.edits,ve._changeAnnotations);ve._textEditChanges[ee.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(ee){var M=new ie(ge.changes[ee]);ve._textEditChanges[ee]=M})):this._workspaceEdit={}}return s(q,"WorkspaceChange"),Object.defineProperty(q.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),q.prototype.getTextEditChange=function(ge){if(le.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},ee=this._textEditChanges[ve.uri];if(!ee){var M=[],Re={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(Re),ee=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=ee}return ee}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var ee=this._textEditChanges[ge];if(!ee){var M=[];this._workspaceEdit.changes[ge]=M,ee=new ie(M),this._textEditChanges[ge]=ee}return ee}},q.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new $,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},q.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},q.prototype.createFile=function(ge,ve,ee){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||U.is(ve)?M=ve:ee=ve;var Re,$e;if(M===void 0?Re=ae.create(ge,ee):($e=U.is(M)?M:this._changeAnnotations.manage(M),Re=ae.create(ge,ee,$e)),this._workspaceEdit.documentChanges.push(Re),$e!==void 0)return $e},q.prototype.renameFile=function(ge,ve,ee,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Re;N.is(ee)||U.is(ee)?Re=ee:M=ee;var $e,qt;if(Re===void 0?$e=H.create(ge,ve,M):(qt=U.is(Re)?Re:this._changeAnnotations.manage(Re),$e=H.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},q.prototype.deleteFile=function(ge,ve,ee){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||U.is(ve)?M=ve:ee=ve;var Re,$e;if(M===void 0?Re=G.create(ge,ee):($e=U.is(M)?M:this._changeAnnotations.manage(M),Re=G.create(ge,ee,$e)),this._workspaceEdit.documentChanges.push(Re),$e!==void 0)return $e},q}();e.WorkspaceChange=O;var Y;(function(q){function ge(ee){return{uri:ee}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),q.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var K;(function(q){function ge(ee,M){return{uri:ee,version:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),q.is=ve})(K||(e.VersionedTextDocumentIdentifier=K={}));var le;(function(q){function ge(ee,M){return{uri:ee,version:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),q.is=ve})(le||(e.OptionalVersionedTextDocumentIdentifier=le={}));var te;(function(q){function ge(ee,M,Re,$e){return{uri:ee,languageId:M,version:Re,text:$e}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(te||(e.TextDocumentItem=te={}));var pe;(function(q){q.PlainText="plaintext",q.Markdown="markdown";function ge(ve){var ee=ve;return ee===q.PlainText||ee===q.Markdown}s(ge,"is"),q.is=ge})(pe||(e.MarkupKind=pe={}));var he;(function(q){function ge(ve){var ee=ve;return _e.objectLiteral(ve)&&pe.is(ee.kind)&&_e.string(ee.value)}s(ge,"is"),q.is=ge})(he||(e.MarkupContent=he={}));var Qe;(function(q){q.Text=1,q.Method=2,q.Function=3,q.Constructor=4,q.Field=5,q.Variable=6,q.Class=7,q.Interface=8,q.Module=9,q.Property=10,q.Unit=11,q.Value=12,q.Enum=13,q.Keyword=14,q.Snippet=15,q.Color=16,q.File=17,q.Reference=18,q.Folder=19,q.EnumMember=20,q.Constant=21,q.Struct=22,q.Event=23,q.Operator=24,q.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var ke;(function(q){q.PlainText=1,q.Snippet=2})(ke||(e.InsertTextFormat=ke={}));var Ze;(function(q){q.Deprecated=1})(Ze||(e.CompletionItemTag=Ze={}));var Fe;(function(q){function ge(ee,M,Re){return{newText:ee,insert:M,replace:Re}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),q.is=ve})(Fe||(e.InsertReplaceEdit=Fe={}));var ft;(function(q){q.asIs=1,q.adjustIndentation=2})(ft||(e.InsertTextMode=ft={}));var It;(function(q){function ge(ve){var ee=ve;return ee&&(_e.string(ee.detail)||ee.detail===void 0)&&(_e.string(ee.description)||ee.description===void 0)}s(ge,"is"),q.is=ge})(It||(e.CompletionItemLabelDetails=It={}));var yt;(function(q){function ge(ve){return{label:ve}}s(ge,"create"),q.create=ge})(yt||(e.CompletionItem=yt={}));var vt;(function(q){function ge(ve,ee){return{items:ve||[],isIncomplete:!!ee}}s(ge,"create"),q.create=ge})(vt||(e.CompletionList=vt={}));var ce;(function(q){function ge(ee){return ee.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),q.fromPlainText=ge;function ve(ee){var M=ee;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),q.is=ve})(ce||(e.MarkedString=ce={}));var Oe;(function(q){function ge(ve){var ee=ve;return!!ee&&_e.objectLiteral(ee)&&(he.is(ee.contents)||ce.is(ee.contents)||_e.typedArray(ee.contents,ce.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),q.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(q){function ge(ve,ee){return ee?{label:ve,documentation:ee}:{label:ve}}s(ge,"create"),q.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(q){function ge(ve,ee){for(var M=[],Re=2;Re<arguments.length;Re++)M[Re-2]=arguments[Re];var $e={label:ve};return _e.defined(ee)&&($e.documentation=ee),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),q.create=ge})(tt||(e.SignatureInformation=tt={}));var Z;(function(q){q.Text=1,q.Read=2,q.Write=3})(Z||(e.DocumentHighlightKind=Z={}));var ne;(function(q){function ge(ve,ee){var M={range:ve};return _e.number(ee)&&(M.kind=ee),M}s(ge,"create"),q.create=ge})(ne||(e.DocumentHighlight=ne={}));var Ge;(function(q){q.File=1,q.Module=2,q.Namespace=3,q.Package=4,q.Class=5,q.Method=6,q.Property=7,q.Field=8,q.Constructor=9,q.Enum=10,q.Interface=11,q.Function=12,q.Variable=13,q.Constant=14,q.String=15,q.Number=16,q.Boolean=17,q.Array=18,q.Object=19,q.Key=20,q.Null=21,q.EnumMember=22,q.Struct=23,q.Event=24,q.Operator=25,q.TypeParameter=26})(Ge||(e.SymbolKind=Ge={}));var Pe;(function(q){q.Deprecated=1})(Pe||(e.SymbolTag=Pe={}));var be;(function(q){function ge(ve,ee,M,Re,$e){var qt={name:ve,kind:ee,location:{uri:Re,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),q.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(q){function ge(ve,ee,M,Re){return Re!==void 0?{name:ve,kind:ee,location:{uri:M,range:Re}}:{name:ve,kind:ee,location:{uri:M}}}s(ge,"create"),q.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(q){function ge(ee,M,Re,$e,qt,Rn){var mn={name:ee,detail:M,kind:Re,range:$e,selectionRange:qt};return Rn!==void 0&&(mn.children=Rn),mn}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),q.is=ve})(it||(e.DocumentSymbol=it={}));var ht;(function(q){q.Empty="",q.QuickFix="quickfix",q.Refactor="refactor",q.RefactorExtract="refactor.extract",q.RefactorInline="refactor.inline",q.RefactorRewrite="refactor.rewrite",q.Source="source",q.SourceOrganizeImports="source.organizeImports",q.SourceFixAll="source.fixAll"})(ht||(e.CodeActionKind=ht={}));var Ot;(function(q){q.Invoked=1,q.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var cn;(function(q){function ge(ee,M,Re){var $e={diagnostics:ee};return M!=null&&($e.only=M),Re!=null&&($e.triggerKind=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),q.is=ve})(cn||(e.CodeActionContext=cn={}));var Lt;(function(q){function ge(ee,M,Re){var $e={title:ee},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&Re!==void 0&&($e.kind=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||ue.is(M.edit))}s(ve,"is"),q.is=ve})(Lt||(e.CodeAction=Lt={}));var Hn;(function(q){function ge(ee,M){var Re={range:ee};return _e.defined(M)&&(Re.data=M),Re}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),q.is=ve})(Hn||(e.CodeLens=Hn={}));var Yn;(function(q){function ge(ee,M){return{tabSize:ee,insertSpaces:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),q.is=ve})(Yn||(e.FormattingOptions=Yn={}));var pr;(function(q){function ge(ee,M,Re){return{range:ee,target:M,data:Re}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),q.is=ve})(pr||(e.DocumentLink=pr={}));var Ae;(function(q){function ge(ee,M){return{range:ee,parent:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||q.is(M.parent))}s(ve,"is"),q.is=ve})(Ae||(e.SelectionRange=Ae={}));var He;(function(q){q.namespace="namespace",q.type="type",q.class="class",q.enum="enum",q.interface="interface",q.struct="struct",q.typeParameter="typeParameter",q.parameter="parameter",q.variable="variable",q.property="property",q.enumMember="enumMember",q.event="event",q.function="function",q.method="method",q.macro="macro",q.keyword="keyword",q.modifier="modifier",q.comment="comment",q.string="string",q.number="number",q.regexp="regexp",q.operator="operator",q.decorator="decorator"})(He||(e.SemanticTokenTypes=He={}));var ut;(function(q){q.declaration="declaration",q.definition="definition",q.readonly="readonly",q.static="static",q.deprecated="deprecated",q.abstract="abstract",q.async="async",q.modification="modification",q.documentation="documentation",q.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var At;(function(q){function ge(ve){var ee=ve;return _e.objectLiteral(ee)&&(ee.resultId===void 0||typeof ee.resultId=="string")&&Array.isArray(ee.data)&&(ee.data.length===0||typeof ee.data[0]=="number")}s(ge,"is"),q.is=ge})(At||(e.SemanticTokens=At={}));var Xt;(function(q){function ge(ee,M){return{range:ee,text:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(q){function ge(ee,M,Re){return{range:ee,variableName:M,caseSensitiveLookup:Re}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),q.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var yn;(function(q){function ge(ee,M){return{range:ee,expression:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),q.is=ve})(yn||(e.InlineValueEvaluatableExpression=yn={}));var vn;(function(q){function ge(ee,M){return{frameId:ee,stoppedLocation:M}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.defined(M)&&l.is(ee.stoppedLocation)}s(ve,"is"),q.is=ve})(vn||(e.InlineValueContext=vn={}));var jt;(function(q){q.Type=1,q.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),q.is=ge})(jt||(e.InlayHintKind=jt={}));var nn;(function(q){function ge(ee){return{value:ee}}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),q.is=ve})(nn||(e.InlayHintLabelPart=nn={}));var Jt;(function(q){function ge(ee,M,Re){var $e={position:ee,label:M};return Re!==void 0&&($e.kind=Re),$e}s(ge,"create"),q.create=ge;function ve(ee){var M=ee;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,nn.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,B.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),q.is=ve})(Jt||(e.InlayHint=Jt={}));var wn;(function(q){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),q.createSnippet=ge})(wn||(e.StringValue=wn={}));var Mn;(function(q){function ge(ve,ee,M,Re){return{insertText:ve,filterText:ee,range:M,command:Re}}s(ge,"create"),q.create=ge})(Mn||(e.InlineCompletionItem=Mn={}));var Kn;(function(q){function ge(ve){return{items:ve}}s(ge,"create"),q.create=ge})(Kn||(e.InlineCompletionList=Kn={}));var Ur;(function(q){q.Invoked=0,q.Automatic=1})(Ur||(e.InlineCompletionTriggerKind=Ur={}));var Yr;(function(q){function ge(ve,ee){return{range:ve,text:ee}}s(ge,"create"),q.create=ge})(Yr||(e.SelectedCompletionInfo=Yr={}));var Fr;(function(q){function ge(ve,ee){return{triggerKind:ve,selectedCompletionInfo:ee}}s(ge,"create"),q.create=ge})(Fr||(e.InlineCompletionContext=Fr={}));var jr;(function(q){function ge(ve){var ee=ve;return _e.objectLiteral(ee)&&r.is(ee.uri)&&_e.string(ee.name)}s(ge,"is"),q.is=ge})(jr||(e.WorkspaceFolder=jr={})),e.EOL=[`
`,`\r
`,"\r"];var nr;(function(q){function ge(Re,$e,qt,Rn){return new Vr(Re,$e,qt,Rn)}s(ge,"create"),q.create=ge;function ve(Re){var $e=Re;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),q.is=ve;function ee(Re,$e){for(var qt=Re.getText(),Rn=M($e,function(Mr,js){var Lp=Mr.range.start.line-js.range.start.line;return Lp===0?Mr.range.start.character-js.range.start.character:Lp}),mn=qt.length,ur=Rn.length-1;ur>=0;ur--){var mr=Rn[ur],bn=Re.offsetAt(mr.range.start),Ht=Re.offsetAt(mr.range.end);if(Ht<=mn)qt=qt.substring(0,bn)+mr.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");mn=bn}return qt}s(ee,"applyEdits"),q.applyEdits=ee;function M(Re,$e){if(Re.length<=1)return Re;var qt=Re.length/2|0,Rn=Re.slice(0,qt),mn=Re.slice(qt);M(Rn,$e),M(mn,$e);for(var ur=0,mr=0,bn=0;ur<Rn.length&&mr<mn.length;){var Ht=$e(Rn[ur],mn[mr]);Ht<=0?Re[bn++]=Rn[ur++]:Re[bn++]=mn[mr++]}for(;ur<Rn.length;)Re[bn++]=Rn[ur++];for(;mr<mn.length;)Re[bn++]=mn[mr++];return Re}s(M,"mergeSort")})(nr||(e.TextDocument=nr={}));var Vr=function(){function q(ge,ve,ee,M){this._uri=ge,this._languageId=ve,this._version=ee,this._content=M,this._lineOffsets=void 0}return s(q,"FullTextDocument"),Object.defineProperty(q.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),q.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),ee=this.offsetAt(ge.end);return this._content.substring(ve,ee)}return this._content},q.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},q.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,ee=!0,M=0;M<ve.length;M++){ee&&(ge.push(M),ee=!1);var Re=ve.charAt(M);ee=Re==="\r"||Re===`
`,Re==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}ee&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},q.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),ee=0,M=ve.length;if(M===0)return a.create(0,ge);for(;ee<M;){var Re=Math.floor((ee+M)/2);ve[Re]>ge?M=Re:ee=Re+1}var $e=ee-1;return a.create($e,ge-ve[$e])},q.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var ee=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(ee+ge.character,M),ee)},Object.defineProperty(q.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),q}(),_e;(function(q){var ge=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),q.defined=ve;function ee(Ht){return typeof Ht>"u"}s(ee,"undefined"),q.undefined=ee;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),q.boolean=M;function Re(Ht){return ge.call(Ht)==="[object String]"}s(Re,"string"),q.string=Re;function $e(Ht){return ge.call(Ht)==="[object Number]"}s($e,"number"),q.number=$e;function qt(Ht,Mr,js){return ge.call(Ht)==="[object Number]"&&Mr<=Ht&&Ht<=js}s(qt,"numberRange"),q.numberRange=qt;function Rn(Ht){return ge.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(Rn,"integer"),q.integer=Rn;function mn(Ht){return ge.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(mn,"uinteger"),q.uinteger=mn;function ur(Ht){return ge.call(Ht)==="[object Function]"}s(ur,"func"),q.func=ur;function mr(Ht){return Ht!==null&&typeof Ht=="object"}s(mr,"objectLiteral"),q.objectLiteral=mr;function bn(Ht,Mr){return Array.isArray(Ht)&&Ht.every(Mr)}s(bn,"typedArray"),q.typedArray=bn})(_e||(_e={}))})});var Ms=W(dd=>{"use strict";f();Object.defineProperty(dd,"__esModule",{value:!0});dd.ProtocolNotificationType=dd.ProtocolNotificationType0=dd.ProtocolRequestType=dd.ProtocolRequestType0=dd.RegistrationType=dd.MessageDirection=void 0;var wS=bI(),Rve;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Rve||(dd.MessageDirection=Rve={}));var Xee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};dd.RegistrationType=Xee;var Zee=class extends wS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};dd.ProtocolRequestType0=Zee;var ete=class extends wS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,wS.ParameterStructures.byName)}};dd.ProtocolRequestType=ete;var tte=class extends wS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};dd.ProtocolNotificationType0=tte;var nte=class extends wS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,wS.ParameterStructures.byName)}};dd.ProtocolNotificationType=nte});var $F=W(ja=>{"use strict";f();Object.defineProperty(ja,"__esModule",{value:!0});ja.objectLiteral=ja.typedArray=ja.stringArray=ja.array=ja.func=ja.error=ja.number=ja.string=ja.boolean=void 0;function Tat(t){return t===!0||t===!1}s(Tat,"boolean");ja.boolean=Tat;function kve(t){return typeof t=="string"||t instanceof String}s(kve,"string");ja.string=kve;function wat(t){return typeof t=="number"||t instanceof Number}s(wat,"number");ja.number=wat;function _at(t){return t instanceof Error}s(_at,"error");ja.error=_at;function Sat(t){return typeof t=="function"}s(Sat,"func");ja.func=Sat;function Bve(t){return Array.isArray(t)}s(Bve,"array");ja.array=Bve;function Rat(t){return Bve(t)&&t.every(e=>kve(e))}s(Rat,"stringArray");ja.stringArray=Rat;function kat(t,e){return Array.isArray(t)&&t.every(e)}s(kat,"typedArray");ja.typedArray=kat;function Bat(t){return t!==null&&typeof t=="object"}s(Bat,"objectLiteral");ja.objectLiteral=Bat});var Nve=W(zF=>{"use strict";f();Object.defineProperty(zF,"__esModule",{value:!0});zF.ImplementationRequest=void 0;var Dve=Ms(),Pve;(function(t){t.method="textDocument/implementation",t.messageDirection=Dve.MessageDirection.clientToServer,t.type=new Dve.ProtocolRequestType(t.method)})(Pve||(zF.ImplementationRequest=Pve={}))});var Mve=W(YF=>{"use strict";f();Object.defineProperty(YF,"__esModule",{value:!0});YF.TypeDefinitionRequest=void 0;var Lve=Ms(),Fve;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Lve.MessageDirection.clientToServer,t.type=new Lve.ProtocolRequestType(t.method)})(Fve||(YF.TypeDefinitionRequest=Fve={}))});var Uve=W(_S=>{"use strict";f();Object.defineProperty(_S,"__esModule",{value:!0});_S.DidChangeWorkspaceFoldersNotification=_S.WorkspaceFoldersRequest=void 0;var KF=Ms(),Qve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=KF.MessageDirection.serverToClient,t.type=new KF.ProtocolRequestType0(t.method)})(Qve||(_S.WorkspaceFoldersRequest=Qve={}));var Ove;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=KF.MessageDirection.clientToServer,t.type=new KF.ProtocolNotificationType(t.method)})(Ove||(_S.DidChangeWorkspaceFoldersNotification=Ove={}))});var Gve=W(JF=>{"use strict";f();Object.defineProperty(JF,"__esModule",{value:!0});JF.ConfigurationRequest=void 0;var qve=Ms(),Wve;(function(t){t.method="workspace/configuration",t.messageDirection=qve.MessageDirection.serverToClient,t.type=new qve.ProtocolRequestType(t.method)})(Wve||(JF.ConfigurationRequest=Wve={}))});var Vve=W(SS=>{"use strict";f();Object.defineProperty(SS,"__esModule",{value:!0});SS.ColorPresentationRequest=SS.DocumentColorRequest=void 0;var XF=Ms(),Hve;(function(t){t.method="textDocument/documentColor",t.messageDirection=XF.MessageDirection.clientToServer,t.type=new XF.ProtocolRequestType(t.method)})(Hve||(SS.DocumentColorRequest=Hve={}));var jve;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=XF.MessageDirection.clientToServer,t.type=new XF.ProtocolRequestType(t.method)})(jve||(SS.ColorPresentationRequest=jve={}))});var Yve=W(RS=>{"use strict";f();Object.defineProperty(RS,"__esModule",{value:!0});RS.FoldingRangeRefreshRequest=RS.FoldingRangeRequest=void 0;var ZF=Ms(),$ve;(function(t){t.method="textDocument/foldingRange",t.messageDirection=ZF.MessageDirection.clientToServer,t.type=new ZF.ProtocolRequestType(t.method)})($ve||(RS.FoldingRangeRequest=$ve={}));var zve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=ZF.MessageDirection.serverToClient,t.type=new ZF.ProtocolRequestType0(t.method)})(zve||(RS.FoldingRangeRefreshRequest=zve={}))});var Xve=W(eM=>{"use strict";f();Object.defineProperty(eM,"__esModule",{value:!0});eM.DeclarationRequest=void 0;var Kve=Ms(),Jve;(function(t){t.method="textDocument/declaration",t.messageDirection=Kve.MessageDirection.clientToServer,t.type=new Kve.ProtocolRequestType(t.method)})(Jve||(eM.DeclarationRequest=Jve={}))});var tbe=W(tM=>{"use strict";f();Object.defineProperty(tM,"__esModule",{value:!0});tM.SelectionRangeRequest=void 0;var Zve=Ms(),ebe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Zve.MessageDirection.clientToServer,t.type=new Zve.ProtocolRequestType(t.method)})(ebe||(tM.SelectionRangeRequest=ebe={}))});var obe=W(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.WorkDoneProgressCancelNotification=Ux.WorkDoneProgressCreateRequest=Ux.WorkDoneProgress=void 0;var Dat=bI(),nM=Ms(),nbe;(function(t){t.type=new Dat.ProgressType;function e(n){return n===t.type}s(e,"is"),t.is=e})(nbe||(Ux.WorkDoneProgress=nbe={}));var rbe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=nM.MessageDirection.serverToClient,t.type=new nM.ProtocolRequestType(t.method)})(rbe||(Ux.WorkDoneProgressCreateRequest=rbe={}));var ibe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=nM.MessageDirection.clientToServer,t.type=new nM.ProtocolNotificationType(t.method)})(ibe||(Ux.WorkDoneProgressCancelNotification=ibe={}))});var cbe=W(qx=>{"use strict";f();Object.defineProperty(qx,"__esModule",{value:!0});qx.CallHierarchyOutgoingCallsRequest=qx.CallHierarchyIncomingCallsRequest=qx.CallHierarchyPrepareRequest=void 0;var kS=Ms(),sbe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=kS.MessageDirection.clientToServer,t.type=new kS.ProtocolRequestType(t.method)})(sbe||(qx.CallHierarchyPrepareRequest=sbe={}));var abe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=kS.MessageDirection.clientToServer,t.type=new kS.ProtocolRequestType(t.method)})(abe||(qx.CallHierarchyIncomingCallsRequest=abe={}));var lbe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=kS.MessageDirection.clientToServer,t.type=new kS.ProtocolRequestType(t.method)})(lbe||(qx.CallHierarchyOutgoingCallsRequest=lbe={}))});var hbe=W(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.SemanticTokensRefreshRequest=fd.SemanticTokensRangeRequest=fd.SemanticTokensDeltaRequest=fd.SemanticTokensRequest=fd.SemanticTokensRegistrationType=fd.TokenFormat=void 0;var N1=Ms(),ube;(function(t){t.Relative="relative"})(ube||(fd.TokenFormat=ube={}));var a8;(function(t){t.method="textDocument/semanticTokens",t.type=new N1.RegistrationType(t.method)})(a8||(fd.SemanticTokensRegistrationType=a8={}));var dbe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=N1.MessageDirection.clientToServer,t.type=new N1.ProtocolRequestType(t.method),t.registrationMethod=a8.method})(dbe||(fd.SemanticTokensRequest=dbe={}));var fbe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=N1.MessageDirection.clientToServer,t.type=new N1.ProtocolRequestType(t.method),t.registrationMethod=a8.method})(fbe||(fd.SemanticTokensDeltaRequest=fbe={}));var pbe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=N1.MessageDirection.clientToServer,t.type=new N1.ProtocolRequestType(t.method),t.registrationMethod=a8.method})(pbe||(fd.SemanticTokensRangeRequest=pbe={}));var mbe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=N1.MessageDirection.serverToClient,t.type=new N1.ProtocolRequestType0(t.method)})(mbe||(fd.SemanticTokensRefreshRequest=mbe={}))});var ybe=W(rM=>{"use strict";f();Object.defineProperty(rM,"__esModule",{value:!0});rM.ShowDocumentRequest=void 0;var gbe=Ms(),Abe;(function(t){t.method="window/showDocument",t.messageDirection=gbe.MessageDirection.serverToClient,t.type=new gbe.ProtocolRequestType(t.method)})(Abe||(rM.ShowDocumentRequest=Abe={}))});var vbe=W(iM=>{"use strict";f();Object.defineProperty(iM,"__esModule",{value:!0});iM.LinkedEditingRangeRequest=void 0;var Cbe=Ms(),xbe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Cbe.MessageDirection.clientToServer,t.type=new Cbe.ProtocolRequestType(t.method)})(xbe||(iM.LinkedEditingRangeRequest=xbe={}))});var Rbe=W(jc=>{"use strict";f();Object.defineProperty(jc,"__esModule",{value:!0});jc.WillDeleteFilesRequest=jc.DidDeleteFilesNotification=jc.DidRenameFilesNotification=jc.WillRenameFilesRequest=jc.DidCreateFilesNotification=jc.WillCreateFilesRequest=jc.FileOperationPatternKind=void 0;var Rf=Ms(),bbe;(function(t){t.file="file",t.folder="folder"})(bbe||(jc.FileOperationPatternKind=bbe={}));var Ebe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolRequestType(t.method)})(Ebe||(jc.WillCreateFilesRequest=Ebe={}));var Ibe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolNotificationType(t.method)})(Ibe||(jc.DidCreateFilesNotification=Ibe={}));var Tbe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolRequestType(t.method)})(Tbe||(jc.WillRenameFilesRequest=Tbe={}));var wbe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolNotificationType(t.method)})(wbe||(jc.DidRenameFilesNotification=wbe={}));var _be;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolNotificationType(t.method)})(_be||(jc.DidDeleteFilesNotification=_be={}));var Sbe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Rf.MessageDirection.clientToServer,t.type=new Rf.ProtocolRequestType(t.method)})(Sbe||(jc.WillDeleteFilesRequest=Sbe={}))});var Nbe=W(Wx=>{"use strict";f();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.MonikerRequest=Wx.MonikerKind=Wx.UniquenessLevel=void 0;var kbe=Ms(),Bbe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Bbe||(Wx.UniquenessLevel=Bbe={}));var Dbe;(function(t){t.$import="import",t.$export="export",t.local="local"})(Dbe||(Wx.MonikerKind=Dbe={}));var Pbe;(function(t){t.method="textDocument/moniker",t.messageDirection=kbe.MessageDirection.clientToServer,t.type=new kbe.ProtocolRequestType(t.method)})(Pbe||(Wx.MonikerRequest=Pbe={}))});var Qbe=W(Gx=>{"use strict";f();Object.defineProperty(Gx,"__esModule",{value:!0});Gx.TypeHierarchySubtypesRequest=Gx.TypeHierarchySupertypesRequest=Gx.TypeHierarchyPrepareRequest=void 0;var BS=Ms(),Lbe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=BS.MessageDirection.clientToServer,t.type=new BS.ProtocolRequestType(t.method)})(Lbe||(Gx.TypeHierarchyPrepareRequest=Lbe={}));var Fbe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=BS.MessageDirection.clientToServer,t.type=new BS.ProtocolRequestType(t.method)})(Fbe||(Gx.TypeHierarchySupertypesRequest=Fbe={}));var Mbe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=BS.MessageDirection.clientToServer,t.type=new BS.ProtocolRequestType(t.method)})(Mbe||(Gx.TypeHierarchySubtypesRequest=Mbe={}))});var qbe=W(DS=>{"use strict";f();Object.defineProperty(DS,"__esModule",{value:!0});DS.InlineValueRefreshRequest=DS.InlineValueRequest=void 0;var oM=Ms(),Obe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=oM.MessageDirection.clientToServer,t.type=new oM.ProtocolRequestType(t.method)})(Obe||(DS.InlineValueRequest=Obe={}));var Ube;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=oM.MessageDirection.serverToClient,t.type=new oM.ProtocolRequestType0(t.method)})(Ube||(DS.InlineValueRefreshRequest=Ube={}))});var jbe=W(Hx=>{"use strict";f();Object.defineProperty(Hx,"__esModule",{value:!0});Hx.InlayHintRefreshRequest=Hx.InlayHintResolveRequest=Hx.InlayHintRequest=void 0;var PS=Ms(),Wbe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=PS.MessageDirection.clientToServer,t.type=new PS.ProtocolRequestType(t.method)})(Wbe||(Hx.InlayHintRequest=Wbe={}));var Gbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=PS.MessageDirection.clientToServer,t.type=new PS.ProtocolRequestType(t.method)})(Gbe||(Hx.InlayHintResolveRequest=Gbe={}));var Hbe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=PS.MessageDirection.serverToClient,t.type=new PS.ProtocolRequestType0(t.method)})(Hbe||(Hx.InlayHintRefreshRequest=Hbe={}))});var Xbe=W(kf=>{"use strict";f();Object.defineProperty(kf,"__esModule",{value:!0});kf.DiagnosticRefreshRequest=kf.WorkspaceDiagnosticRequest=kf.DocumentDiagnosticRequest=kf.DocumentDiagnosticReportKind=kf.DiagnosticServerCancellationData=void 0;var Jbe=bI(),Pat=$F(),NS=Ms(),Vbe;(function(t){function e(n){let r=n;return r&&Pat.boolean(r.retriggerRequest)}s(e,"is"),t.is=e})(Vbe||(kf.DiagnosticServerCancellationData=Vbe={}));var $be;(function(t){t.Full="full",t.Unchanged="unchanged"})($be||(kf.DocumentDiagnosticReportKind=$be={}));var zbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=NS.MessageDirection.clientToServer,t.type=new NS.ProtocolRequestType(t.method),t.partialResult=new Jbe.ProgressType})(zbe||(kf.DocumentDiagnosticRequest=zbe={}));var Ybe;(function(t){t.method="workspace/diagnostic",t.messageDirection=NS.MessageDirection.clientToServer,t.type=new NS.ProtocolRequestType(t.method),t.partialResult=new Jbe.ProgressType})(Ybe||(kf.WorkspaceDiagnosticRequest=Ybe={}));var Kbe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=NS.MessageDirection.serverToClient,t.type=new NS.ProtocolRequestType0(t.method)})(Kbe||(kf.DiagnosticRefreshRequest=Kbe={}))});var oEe=W(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var l8=VF(),Am=$F(),pg=Ms(),rte;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(rte||(sa.NotebookCellKind=rte={}));var ite;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function n(i){let o=i;return Am.objectLiteral(o)&&l8.uinteger.is(o.executionOrder)&&(o.success===void 0||Am.boolean(o.success))}s(n,"is"),t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(r,"equals"),t.equals=r})(ite||(sa.ExecutionSummary=ite={}));var sM;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function n(o){let a=o;return Am.objectLiteral(a)&&rte.is(a.kind)&&l8.DocumentUri.is(a.document)&&(a.metadata===void 0||Am.objectLiteral(a.metadata))}s(n,"is"),t.is=n;function r(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!ite.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(r,"diff"),t.diff=r;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Am.objectLiteral(o)&&Am.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(sM||(sa.NotebookCell=sM={}));var Zbe;(function(t){function e(r,i,o,a){return{uri:r,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Am.objectLiteral(i)&&Am.string(i.uri)&&l8.integer.is(i.version)&&Am.typedArray(i.cells,sM.is)}s(n,"is"),t.is=n})(Zbe||(sa.NotebookDocument=Zbe={}));var LS;(function(t){t.method="notebookDocument/sync",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.RegistrationType(t.method)})(LS||(sa.NotebookDocumentSyncRegistrationType=LS={}));var eEe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=LS.method})(eEe||(sa.DidOpenNotebookDocumentNotification=eEe={}));var tEe;(function(t){function e(r){let i=r;return Am.objectLiteral(i)&&l8.uinteger.is(i.start)&&l8.uinteger.is(i.deleteCount)&&(i.cells===void 0||Am.typedArray(i.cells,sM.is))}s(e,"is"),t.is=e;function n(r,i,o){let a={start:r,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(n,"create"),t.create=n})(tEe||(sa.NotebookCellArrayChange=tEe={}));var nEe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=LS.method})(nEe||(sa.DidChangeNotebookDocumentNotification=nEe={}));var rEe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=LS.method})(rEe||(sa.DidSaveNotebookDocumentNotification=rEe={}));var iEe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=LS.method})(iEe||(sa.DidCloseNotebookDocumentNotification=iEe={}))});var lEe=W(aM=>{"use strict";f();Object.defineProperty(aM,"__esModule",{value:!0});aM.InlineCompletionRequest=void 0;var sEe=Ms(),aEe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=sEe.MessageDirection.clientToServer,t.type=new sEe.ProtocolRequestType(t.method)})(aEe||(aM.InlineCompletionRequest=aEe={}))});var vIe=W(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Ms(),cEe=VF(),Nl=$F(),Nat=Nve();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return Nat.ImplementationRequest},"get")});var Lat=Mve();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Lat.TypeDefinitionRequest},"get")});var AIe=Uve();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return AIe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return AIe.DidChangeWorkspaceFoldersNotification},"get")});var Fat=Gve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Fat.ConfigurationRequest},"get")});var yIe=Vve();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return yIe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return yIe.ColorPresentationRequest},"get")});var CIe=Yve();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return CIe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return CIe.FoldingRangeRefreshRequest},"get")});var Mat=Xve();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return Mat.DeclarationRequest},"get")});var Qat=tbe();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Qat.SelectionRangeRequest},"get")});var cte=obe();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return cte.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return cte.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return cte.WorkDoneProgressCancelNotification},"get")});var ute=cbe();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return ute.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return ute.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return ute.CallHierarchyPrepareRequest},"get")});var MS=hbe();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return MS.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return MS.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return MS.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return MS.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return MS.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return MS.SemanticTokensRegistrationType},"get")});var Oat=ybe();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Oat.ShowDocumentRequest},"get")});var Uat=vbe();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return Uat.LinkedEditingRangeRequest},"get")});var EI=Rbe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return EI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return EI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return EI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return EI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return EI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return EI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return EI.WillDeleteFilesRequest},"get")});var dte=Nbe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return dte.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return dte.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return dte.MonikerRequest},"get")});var fte=Qbe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return fte.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return fte.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return fte.TypeHierarchySupertypesRequest},"get")});var xIe=qbe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return xIe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return xIe.InlineValueRefreshRequest},"get")});var pte=jbe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return pte.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return pte.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return pte.InlayHintRefreshRequest},"get")});var c8=Xbe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return c8.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return c8.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return c8.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return c8.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return c8.DiagnosticRefreshRequest},"get")});var mg=oEe();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return mg.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return mg.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return mg.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return mg.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return mg.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return mg.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidCloseNotebookDocumentNotification},"get")});var qat=lEe();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return qat.InlineCompletionRequest},"get")});var ote;(function(t){function e(n){let r=n;return Nl.string(r)||Nl.string(r.language)||Nl.string(r.scheme)||Nl.string(r.pattern)}s(e,"is"),t.is=e})(ote||(xe.TextDocumentFilter=ote={}));var ste;(function(t){function e(n){let r=n;return Nl.objectLiteral(r)&&(Nl.string(r.notebookType)||Nl.string(r.scheme)||Nl.string(r.pattern))}s(e,"is"),t.is=e})(ste||(xe.NotebookDocumentFilter=ste={}));var ate;(function(t){function e(n){let r=n;return Nl.objectLiteral(r)&&(Nl.string(r.notebook)||ste.is(r.notebook))&&(r.language===void 0||Nl.string(r.language))}s(e,"is"),t.is=e})(ate||(xe.NotebookCellTextDocumentFilter=ate={}));var lte;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Nl.string(r)&&!ote.is(r)&&!ate.is(r))return!1;return!0}s(e,"is"),t.is=e})(lte||(xe.DocumentSelector=lte={}));var uEe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(uEe||(xe.RegistrationRequest=uEe={}));var dEe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(dEe||(xe.UnregistrationRequest=dEe={}));var fEe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(fEe||(xe.ResourceOperationKind=fEe={}));var pEe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(pEe||(xe.FailureHandlingKind=pEe={}));var mEe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(mEe||(xe.PositionEncodingKind=mEe={}));var hEe;(function(t){function e(n){let r=n;return r&&Nl.string(r.id)&&r.id.length>0}s(e,"hasId"),t.hasId=e})(hEe||(xe.StaticRegistrationOptions=hEe={}));var gEe;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||lte.is(r.documentSelector))}s(e,"is"),t.is=e})(gEe||(xe.TextDocumentRegistrationOptions=gEe={}));var AEe;(function(t){function e(r){let i=r;return Nl.objectLiteral(i)&&(i.workDoneProgress===void 0||Nl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function n(r){let i=r;return i&&Nl.boolean(i.workDoneProgress)}s(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(AEe||(xe.WorkDoneProgressOptions=AEe={}));var yEe;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(yEe||(xe.InitializeRequest=yEe={}));var CEe;(function(t){t.unknownProtocolVersion=1})(CEe||(xe.InitializeErrorCodes=CEe={}));var xEe;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(xEe||(xe.InitializedNotification=xEe={}));var vEe;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(vEe||(xe.ShutdownRequest=vEe={}));var bEe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(bEe||(xe.ExitNotification=bEe={}));var EEe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(EEe||(xe.DidChangeConfigurationNotification=EEe={}));var IEe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(IEe||(xe.MessageType=IEe={}));var TEe;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(TEe||(xe.ShowMessageNotification=TEe={}));var wEe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.ShowMessageRequest=wEe={}));var _Ee;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(_Ee||(xe.LogMessageNotification=_Ee={}));var SEe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(SEe||(xe.TelemetryEventNotification=SEe={}));var REe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(REe||(xe.TextDocumentSyncKind=REe={}));var kEe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(kEe||(xe.DidOpenTextDocumentNotification=kEe={}));var BEe;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(n,"isFull"),t.isFull=n})(BEe||(xe.TextDocumentContentChangeEvent=BEe={}));var DEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(DEe||(xe.DidChangeTextDocumentNotification=DEe={}));var PEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(PEe||(xe.DidCloseTextDocumentNotification=PEe={}));var NEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(NEe||(xe.DidSaveTextDocumentNotification=NEe={}));var LEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(LEe||(xe.TextDocumentSaveReason=LEe={}));var FEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(FEe||(xe.WillSaveTextDocumentNotification=FEe={}));var MEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(MEe||(xe.WillSaveTextDocumentWaitUntilRequest=MEe={}));var QEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(QEe||(xe.DidChangeWatchedFilesNotification=QEe={}));var OEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(OEe||(xe.FileChangeType=OEe={}));var UEe;(function(t){function e(n){let r=n;return Nl.objectLiteral(r)&&(cEe.URI.is(r.baseUri)||cEe.WorkspaceFolder.is(r.baseUri))&&Nl.string(r.pattern)}s(e,"is"),t.is=e})(UEe||(xe.RelativePattern=UEe={}));var qEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(qEe||(xe.WatchKind=qEe={}));var WEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(WEe||(xe.PublishDiagnosticsNotification=WEe={}));var GEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(GEe||(xe.CompletionTriggerKind=GEe={}));var HEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(HEe||(xe.CompletionRequest=HEe={}));var jEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(jEe||(xe.CompletionResolveRequest=jEe={}));var VEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(VEe||(xe.HoverRequest=VEe={}));var $Ee;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})($Ee||(xe.SignatureHelpTriggerKind=$Ee={}));var zEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(zEe||(xe.SignatureHelpRequest=zEe={}));var YEe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(YEe||(xe.DefinitionRequest=YEe={}));var KEe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(KEe||(xe.ReferencesRequest=KEe={}));var JEe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(JEe||(xe.DocumentHighlightRequest=JEe={}));var XEe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(XEe||(xe.DocumentSymbolRequest=XEe={}));var ZEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(ZEe||(xe.CodeActionRequest=ZEe={}));var eIe;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(eIe||(xe.CodeActionResolveRequest=eIe={}));var tIe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(tIe||(xe.WorkspaceSymbolRequest=tIe={}));var nIe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(nIe||(xe.WorkspaceSymbolResolveRequest=nIe={}));var rIe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(rIe||(xe.CodeLensRequest=rIe={}));var iIe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(iIe||(xe.CodeLensResolveRequest=iIe={}));var oIe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(oIe||(xe.CodeLensRefreshRequest=oIe={}));var sIe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(sIe||(xe.DocumentLinkRequest=sIe={}));var aIe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(aIe||(xe.DocumentLinkResolveRequest=aIe={}));var lIe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(lIe||(xe.DocumentFormattingRequest=lIe={}));var cIe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(cIe||(xe.DocumentRangeFormattingRequest=cIe={}));var uIe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(uIe||(xe.DocumentRangesFormattingRequest=uIe={}));var dIe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(dIe||(xe.DocumentOnTypeFormattingRequest=dIe={}));var fIe;(function(t){t.Identifier=1})(fIe||(xe.PrepareSupportDefaultBehavior=fIe={}));var pIe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(pIe||(xe.RenameRequest=pIe={}));var mIe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(mIe||(xe.PrepareRenameRequest=mIe={}));var hIe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(hIe||(xe.ExecuteCommandRequest=hIe={}));var gIe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(gIe||(xe.ApplyWorkspaceEditRequest=gIe={}))});var EIe=W(lM=>{"use strict";f();Object.defineProperty(lM,"__esModule",{value:!0});lM.createProtocolConnection=void 0;var bIe=bI();function Wat(t,e,n,r){return bIe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,bIe.createMessageConnection)(t,e,n,r)}s(Wat,"createProtocolConnection");lM.createProtocolConnection=Wat});var TIe=W(pd=>{"use strict";f();var Gat=pd&&pd.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),cM=pd&&pd.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Gat(e,t,n)};Object.defineProperty(pd,"__esModule",{value:!0});pd.LSPErrorCodes=pd.createProtocolConnection=void 0;cM(bI(),pd);cM(VF(),pd);cM(Ms(),pd);cM(vIe(),pd);var Hat=EIe();Object.defineProperty(pd,"createProtocolConnection",{enumerable:!0,get:s(function(){return Hat.createProtocolConnection},"get")});var IIe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(IIe||(pd.LSPErrorCodes=IIe={}))});var ri=W(hg=>{"use strict";f();var jat=hg&&hg.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),wIe=hg&&hg.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&jat(e,t,n)};Object.defineProperty(hg,"__esModule",{value:!0});hg.createProtocolConnection=void 0;var Vat=Jee();wIe(Jee(),hg);wIe(TIe(),hg);function $at(t,e,n,r){return(0,Vat.createMessageConnection)(t,e,n,r)}s($at,"createProtocolConnection");hg.createProtocolConnection=$at});var A2e=W((bM,g2e)=>{f();(function(t,e){typeof bM=="object"&&typeof g2e<"u"?e(bM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(bM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function n(w,R){return w[R]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),B=n(k,c),N=e(Math),U=e(Array),re=n(U,c),me=n(re,"slice");function ae(w,R){try{return{v:w.apply(this,R)}}catch(D){return{e:D}}}s(ae,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function G(w){var R="[object "+w+"]";return function(D){return!!(D&&ue(D)===R)}}s(G,"_createObjIs");function ue(w){return _[b].call(w)}s(ue,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function $(w){return!Y(w)}s($,"isStrictUndefined");function O(w){return w===i||ie(w)}s(O,"isNullOrUndefined");function Y(w){return!!w||w!==r}s(Y,"isDefined");var K=H("string"),le=H(a);function te(w){return!w&&O(w)?!1:!!w&&typeof w===l}s(te,"isObject");var pe=n(U,"isArray"),he=G("Error"),Qe=n(E,"getOwnPropertyDescriptor");function ke(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(ke,"objHasOwnProperty");var Ze=e(n(E,"hasOwn"),Fe);function Fe(w,R){return ke(w,R)||!!Qe(w,R)}s(Fe,"polyObjHasOwn");function ft(w,R,D){if(w&&te(w)){for(var F in w)if(Ze(w,F)&&R[v](D||w,F,w[F])===-1)break}}s(ft,"objForEachKey");var It={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function yt(w){var R={};if(R[It.c]=!0,R[It.e]=!0,w.l){R.get=function(){return w.l.v};var D=Qe(w.l,"v");D&&D.set&&(R.set=function(F){w.l.v=F})}return ft(w,function(F,oe){R[It[F]]=$(oe)?R[It[F]]:oe}),R}s(yt,"_createProp");var vt=n(E,"defineProperty");function ce(w,R,D){return vt(w,R,yt(D))}s(ce,"objDefine");function Oe(w,R,D,F,oe){var Ee={};return ft(w,function(we,Me){ye(Ee,we,R?Me:we),ye(Ee,Me,D?Me:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,D,F){vt(w,R,{value:D,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),Z="[object Error]";function ne(w,R){var D=o,F=_[b][v](w);F===Z&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{D=JSON.stringify(w,i,R?typeof R=="number"?R:4:r),D=(D?D.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(oe){D=" - "+ne(oe,R)}return F+": "+D}s(ne,"dumpObj");function Ge(w){throw new Error(w)}s(Ge,"throwError");function Pe(w){throw new TypeError(w)}s(Pe,"throwTypeError");var be=n(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var ht=n(E,"assign"),Ot=n(E,"keys"),cn=e(be,ze),Lt=e(n(E,"getPrototypeOf"),it);function Hn(w){return Oe(w,1,0,cn)}s(Hn,"createEnum");function Yn(w){var R={};return ft(w,function(D,F){ye(R,D,F[1]),ye(R,F[0],F[1])}),cn(R)}s(Yn,"createSimpleMap");function pr(w){return Yn(w)}s(pr,"createTypeMap");var Ae="__tsUtils$gblCfg",He;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function At(){if(!He){var w=ae(ut).v||{};He=w[Ae]=w[Ae]||{}}return He}s(At,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,D){var F=R?R[w]:i;return function(oe){var Ee=(oe?oe[w]:i)||F;if(Ee||D){var we=arguments;return(Ee||D).apply(oe,Ee?me[v](we,1):we)}Pe('"'+tt(w)+'" not defined for '+ne(oe))}}s(Gt,"_unwrapFunctionWithPoly");var yn=n(N,"min"),vn=n(N,"max"),jt=Xt("slice",B),nn=Xt("substring",B),Jt=Gt("substr",B,wn);function wn(w,R,D){return O(w)&&Pe("Invalid "+ne(w)),D<0?o:(R=R||0,R<0&&(R=vn(R+w[g],0)),ie(D)?jt(w,R):jt(w,R,R+D))}s(wn,"polyStrSubstr");function Mn(w,R){return nn(w,0,R)}s(Mn,"strLeft");var Kn="_urid",Ur;function Yr(){if(!Ur){var w=At();Ur=w.gblSym=w.gblSym||{k:{},s:{}}}return Ur}s(Yr,"_globalSymbolRegistry");function Fr(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Fr,"polyNewSymbol");function jr(w){var R=Yr();if(!Ze(R.k,w)){var D=Fr(w),F=Ot(R.s).length;D[Kn]=function(){return F+"_"+D[b]()},R.k[w]=D,R.s[D[Kn]()]=tt(w)}return R.k[w]}s(jr,"polySymbolFor");var nr;function Vr(){nr=At()}s(Vr,"_initTestHooks");function _e(w){return vt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var q="window",ge;function ve(w,R){var D;return function(){return!nr&&Vr(),(!D||nr.lzy)&&(D=_e(ae(w,R).v)),D.v}}s(ve,"_getGlobalInstFn");function ee(w){return!nr&&Vr(),(!ge||w===!1||nr.lzy)&&(ge=_e(ae(ut).v||i)),ge.v}s(ee,"getGlobal");function M(w,R){var D;if(!ge||R===!1?D=ee(R):D=ge.v,D&&D[w])return D[w];if(w===q)try{return window}catch{}return i}s(M,"getInst");var Re=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[q]);function Rn(){return!!mn()}s(Rn,"hasNavigator");var mn=ve(M,["navigator"]),ur,mr;function bn(){return ur=_e(ae(M,[m]).v),ur}s(bn,"_initSymbol");function Ht(w){var R=(nr.lzy?0:ur)||bn();return R.v?R.v[w]:r}s(Ht,"_getSymbolKey");function Mr(w,R){!nr&&Vr();var D=(nr.lzy?0:ur)||bn();return D.v?D.v(w):R?i:Fr(w)}s(Mr,"newSymbol");function js(w){return!nr&&Vr(),mr=(nr.lzy?0:mr)||_e(ae(Ht,["for"]).v),(mr.v||jr)(w)}s(js,"symbolFor");function Lp(w,R,D){return w.apply(R,D)}s(Lp,"fnApply");function Il(w,R,D){if(w)for(var F=w[g]>>>0,oe=0;oe<F&&!(oe in w&&R[v](D||w,w[oe],oe,w)===-1);oe++);}s(Il,"arrForEach");var Fp=Xt("indexOf",re),tf=Xt("map",re),ia=Xt("reduce",re),Ih=e(n(E,"create"),iC);function iC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&Pe("Prototype must be an Object or function: "+ne(w));function D(){}return s(D,"tempFunc"),D[c]=w,new D}s(iC,"polyObjCreate");var r3;function Mp(w,R){var D=E.setPrototypeOf||function(F,oe){var Ee;!r3&&(r3=_e((Ee={},Ee[u]=[],Ee instanceof Array))),r3.v?F[u]=oe:ft(oe,function(we,Me){return F[we]=Me})};return D(w,R)}s(Mp,"objSetPrototypeOf");function PK(w,R,D){ae(ce,[R,y,{v:w,c:!0,e:!1}]),R=Mp(R,D);function F(){this[p]=R,ae(ce,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=D===i?Ih(D):(F[c]=D[c],new F),R}s(PK,"_createCustomError");function Th(w,R){R&&(w[y]=R)}s(Th,"_setName");function NK(w,R,D){var F=D||Error,oe=F[c][y],Ee=Error.captureStackTrace;return PK(w,function(){var we=this,Me=arguments;try{ae(Th,[F,w]);var Je=Lp(F,we,me[v](Me))||we;if(Je!==we){var pt=Lt(we);pt!==Lt(Je)&&Mp(Je,pt)}return Ee&&Ee(Je,we[p]),R&&R(Je,Me),Je}finally{ae(Th,[F,oe])}},F)}s(NK,"createCustomError");function GA(){return(Date.now||i3)()}s(GA,"utcNow");function i3(){return new Date().getTime()}s(i3,"polyUtcNow");function vw(w){return s(function(D){return O(D)&&Pe("strTrim called ["+ne(D)+"]"),D&&D.replace&&(D=D.replace(w,o)),D},"_doTrim")}s(vw,"_createTrimFn");var LK=vw(/^\s+|(?=\s)\s+$/g),Bc=Gt("trim",B,LK),wh=n(N,"floor"),iE,HA,oE;function _h(w){if(!w||typeof w!==l)return!1;oE||(oE=$e()?qt():!0);var R=!1;if(w!==oE){HA||(iE=Function[c][b],HA=iE[v](E));try{var D=Lt(w);R=!D,R||(ke(D,p)&&(D=D[p]),R=!!(D&&typeof D===a&&iE[v](D)===HA))}catch{}}return R}s(_h,"isPlainObject");var bw;function sE(){return!nr&&Vr(),(!bw||nr.lzy)&&(bw=_e(ae(M,["performance"]).v)),bw.v}s(sE,"getPerformance");var o3=n(N,"round"),oC=Gt("endsWith",B,sC);function sC(w,R,D){K(w)||Pe("'"+ne(w)+"' is not a string");var F=K(R)?R:tt(R),oe=!ie(D)&&D<w[g]?D:w[g];return nn(w,oe-F[g],oe)===F}s(sC,"polyStrEndsWith");var qn=Xt("indexOf",B),mu="ref",jA="unref",aC="hasRef",FK="enabled";function Sh(w,R,D){var F=!0,oe=w?R(i):i,Ee;function we(){return F=!1,oe&&oe[jA]&&oe[jA](),Ee}s(we,"_unref");function Me(){oe&&D(oe),oe=i}s(Me,"_cancel");function Je(){return oe=R(oe),F||we(),Ee}s(Je,"_refresh");function pt(on){!on&&oe&&Me(),on&&!oe&&Je()}return s(pt,"_setEnabled"),Ee={cancel:Me,refresh:Je},Ee[aC]=function(){return oe&&oe[aC]?oe[aC]():F},Ee[mu]=function(){return F=!0,oe&&oe[mu]&&oe[mu](),Ee},Ee[jA]=we,Ee=vt(Ee,FK,{get:s(function(){return!!oe},"get"),set:pt}),{h:Ee,dn:s(function(){oe=i},"dn")}}s(Sh,"_createTimerHandler");function MK(w,R,D){var F=pe(R),oe=F?R.length:0,Ee=(oe>0?R[0]:F?r:R)||setTimeout,we=(oe>1?R[1]:r)||clearTimeout,Me=D[0];D[0]=function(){Je.dn(),Lp(Me,r,me[v](arguments))};var Je=Sh(w,function(pt){if(pt){if(pt.refresh)return pt.refresh(),pt;Lp(we,r,[pt])}return Lp(Ee,r,D)},function(pt){Lp(we,r,[pt])});return Je.h}s(MK,"_createTimeoutWith");function s3(w,R){return MK(!0,r,me[v](arguments))}s(s3,"scheduleTimeout");var aE=Hn,QK=pr,lE="toLowerCase",Ma="length",Rh="warnToConsole",cE="throwInternal",gN="watch",OK="apply",ji="push",VA="splice",kh="logger",a3="cancel",uE="name",hu="unload",AN="version",yN="loggingLevelConsole",l3="messageId",$A="message",c3="diagLog",CN="userAgent",u3="split",lC="replace",Bh="type",xN="evtName",Ew="traceFlags",d3="getAttribute",Iw;function UK(w,R){Iw||(Iw=NK("AggregationError",function(F,oe){oe[Ma]>1&&(F.errors=oe[1])}));var D=w||"One or more errors occurred.";throw Il(R,function(F,oe){D+=`
`.concat(oe," > ").concat(ne(F))}),new Iw(D,R||[])}s(UK,"throwAggregationError");var qK="function",vN="object",WK="undefined",Qp="prototype",Tw=Object,f3=Tw[Qp];(ee()||{}).Symbol,(ee()||{}).Reflect;var ww="hasOwnProperty",GK=s(function(w){for(var R,D=1,F=arguments.length;D<F;D++){R=arguments[D];for(var oe in R)f3[ww].call(R,oe)&&(w[oe]=R[oe])}return w},"__objAssignFnImpl"),_w=ht||GK,Sw=s(function(w,R){return Sw=Tw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var oe in F)F[ww](oe)&&(D[oe]=F[oe])},Sw(w,R)},"extendStaticsFn");function Dh(w,R){typeof R!==qK&&R!==null&&Pe("Class extends value "+String(R)+" is not a constructor or null"),Sw(w,R);function D(){this.constructor=w}s(D,"__"),w[Qp]=R===null?Ih(R):(D[Qp]=R[Qp],new D)}s(Dh,"__extendsFn");var Rw,zA="constructor",Ku="prototype",Ju="function",YA="_dynInstFuncs",cC="_isDynProxy",Ph="_dynClass",uC="_dynCls$",p3="_dynInstChk",KA=p3,dC="_dfOpts",m3="_unknown_",kw="__proto__",fC="_dyn"+kw,dE="__dynProto$Gbl",Bw="_dynInstProto",pC="useBaseInst",mC="setInstFuncs",fE=Object,JA=fE.getPrototypeOf,hC=fE.getOwnPropertyNames,h3=ee(),Dw=h3[dE]||(h3[dE]={o:(Rw={},Rw[mC]=!0,Rw[pC]=!0,Rw),n:1e3});function gC(w){return w&&(w===fE[Ku]||w===Array[Ku])}s(gC,"_isObjectOrArrayPrototype");function AC(w){return gC(w)||w===Function[Ku]}s(AC,"_isObjectArrayOrFunctionPrototype");function Op(w){var R;if(w){if(JA)return JA(w);var D=w[kw]||w[Ku]||(w[zA]?w[zA][Ku]:null);R=w[fC]||D,ke(w,fC)||(delete w[Bw],R=w[fC]=w[Bw]||w[fC],w[Bw]=D)}return R}s(Op,"_getObjProto");function nf(w,R){var D=[];if(hC)D=hC(w);else for(var F in w)typeof F=="string"&&ke(w,F)&&D.push(F);if(D&&D.length>0)for(var oe=0;oe<D.length;oe++)R(D[oe])}s(nf,"_forEachProp");function yC(w,R,D){return R!==zA&&typeof w[R]===Ju&&(D||ke(w,R))&&R!==kw&&R!==Ku}s(yC,"_isDynamicCandidate");function CC(w){Pe("DynamicProto: "+w)}s(CC,"_throwTypeError");function Pw(w){var R=Ih(null);return nf(w,function(D){!R[D]&&yC(w,D,!1)&&(R[D]=w[D])}),R}s(Pw,"_getInstanceFuncs");function g3(w,R){for(var D=w.length-1;D>=0;D--)if(w[D]===R)return!0;return!1}s(g3,"_hasVisited");function A3(w,R,D,F){function oe(Je,pt,on){var Ir=pt[on];if(Ir[cC]&&F){var qr=Je[YA]||{};qr[KA]!==!1&&(Ir=(qr[pt[Ph]]||{})[on]||Ir)}return function(){return Ir.apply(Je,arguments)}}s(oe,"_instFuncProxy");var Ee=Ih(null);nf(D,function(Je){Ee[Je]=oe(R,D,Je)});for(var we=Op(w),Me=[];we&&!AC(we)&&!g3(Me,we);)nf(we,function(Je){!Ee[Je]&&yC(we,Je,!JA)&&(Ee[Je]=oe(R,we,Je))}),Me.push(we),we=Op(we);return Ee}s(A3,"_getBaseFuncs");function HK(w,R,D,F){var oe=null;if(w&&ke(D,Ph)){var Ee=w[YA]||Ih(null);if(oe=(Ee[D[Ph]]||Ih(null))[R],oe||CC("Missing ["+R+"] "+Ju),!oe[p3]&&Ee[KA]!==!1){for(var we=!ke(w,R),Me=Op(w),Je=[];we&&Me&&!AC(Me)&&!g3(Je,Me);){var pt=Me[R];if(pt){we=pt===F;break}Je.push(Me),Me=Op(Me)}try{we&&(w[R]=oe),oe[p3]=1}catch{Ee[KA]=!1}}}return oe}s(HK,"_getInstFunc");function jK(w,R,D){var F=R[w];return F===D&&(F=Op(R)[w]),typeof F!==Ju&&CC("["+w+"] is not a "+Ju),F}s(jK,"_getProtoFunc");function VK(w,R,D,F,oe){function Ee(Je,pt){var on=s(function(){var Ir=HK(this,pt,Je,on)||jK(pt,Je,on);return Ir.apply(this,arguments)},"dynProtoProxy");return on[cC]=1,on}if(s(Ee,"_createDynamicPrototype"),!gC(w)){var we=D[YA]=D[YA]||Ih(null);if(!gC(we)){var Me=we[R]=we[R]||Ih(null);we[KA]!==!1&&(we[KA]=!!oe),gC(Me)||nf(D,function(Je){yC(D,Je,!1)&&D[Je]!==F[Je]&&(Me[Je]=D[Je],delete D[Je],(!ke(w,Je)||w[Je]&&!w[Je][cC])&&(w[Je]=Ee(w,Je)))})}}}s(VK,"_populatePrototype");function $K(w,R){if(JA){for(var D=[],F=Op(R);F&&!AC(F)&&!g3(D,F);){if(F===w)return!0;D.push(F),F=Op(F)}return!1}return!0}s($K,"_checkPrototype");function y3(w,R){return ke(w,Ku)?w.name||R||m3:((w||{})[zA]||{}).name||R||m3}s(y3,"_getObjName");function pE(w,R,D,F){ke(w,Ku)||CC("theClass is an invalid class definition.");var oe=w[Ku];$K(oe,R)||CC("["+y3(w)+"] not in hierarchy of ["+y3(R)+"]");var Ee=null;ke(oe,Ph)?Ee=oe[Ph]:(Ee=uC+y3(w,"_")+"$"+Dw.n,Dw.n++,oe[Ph]=Ee);var we=pE[dC],Me=!!we[pC];Me&&F&&F[pC]!==void 0&&(Me=!!F[pC]);var Je=Pw(R),pt=A3(oe,R,Je,Me);D(R,pt);var on=!!JA&&!!we[mC];on&&F&&(on=!!F[mC]),VK(oe,Ee,R,Je,on!==!1)}s(pE,"dynamicProto"),pE[dC]=Dw.o;var nc=void 0,Vs="",bN="Not dynamic - ",EN=/-([a-z])/g,mE=/([^\w\d_$])/g,C3=/^(\d+[\w\d_$])/;function x3(w){return!O(w)}s(x3,"isNotNullOrUndefined");function Nw(w){var R=w;return R&&K(R)&&(R=R[lC](EN,function(D,F){return F.toUpperCase()}),R=R[lC](mE,"_"),R=R[lC](C3,function(D,F){return"_"+F})),R}s(Nw,"normalizeJsName");function IN(w,R){return w&&R?qn(w,R)!==-1:!1}s(IN,"strContains");function Up(w){return w&&w.toISOString()||""}s(Up,"toISOString");function Nh(w){return he(w)?w[uE]:Vs}s(Nh,"getExceptionName");function hE(w){return function(){function R(){var D=this;w&&ft(w,function(F,oe){D[F]=oe})}return s(R,"class_1"),R}()}s(hE,"createClassFromInterface");var TN="console",Lw="JSON",zK="crypto",Lh="msCrypto",xC="msie",$r="trident/",vC=null,XA=null,qp=null;function Fw(){return typeof console!==WK?console:M(TN)}s(Fw,"getConsole");function Vi(){return!!(typeof JSON===vN&&JSON||M(Lw)!==null)}s(Vi,"hasJSON");function bC(){return Vi()?JSON||M(Lw):null}s(bC,"getJSON");function Aa(){return M(zK)}s(Aa,"getCrypto");function EC(){return M(Lh)}s(EC,"getMsCrypto");function gE(){var w=mn();if(w&&(w[CN]!==XA||vC===null)){XA=w[CN];var R=(XA||Vs)[lE]();vC=IN(R,xC)||IN(R,$r)}return vC}s(gE,"isIE");function Fh(w){return(qp===null||w===!1)&&(qp=Rn()&&!!mn().sendBeacon),qp}s(Fh,"isBeaconsSupported");function AE(w,R){if(w)for(var D=0;D<w[Ma];D++){var F=w[D];if(F[uE]&&F[uE]===R)return F}return{}}s(AE,"_getNamedValue");function Mw(w){var R=Re();return R&&w?AE(R.querySelectorAll("meta"),w).content:null}s(Mw,"findMetaTag");function rf(w){var R,D=sE();if(D){var F=D.getEntriesByType("navigation")||[];R=AE((F[Ma]>0?F[0]:{}).serverTiming,w).description}return R}s(rf,"findNamedServerTiming");var IC=4294967296,zd=4294967295,TC=123456789,Mh=987654321,Tl=!1,wC=TC,of=Mh;function wN(w){w<0&&(w>>>=0),wC=TC+w&zd,of=Mh-w&zd,Tl=!0}s(wN,"_mwcSeed");function ZA(){try{var w=GA()&2147483647;wN((Math.random()*IC^w)+w)}catch{}}s(ZA,"_autoSeedMwc");function Qw(w){return w>0?wh(_C()/zd*(w+1))>>>0:0}s(Qw,"randomValue");function _C(w){var R=0,D=Aa()||EC();return D&&D.getRandomValues&&(R=D.getRandomValues(new Uint32Array(1))[0]&zd),R===0&&gE()&&(Tl||ZA(),R=_N()&zd),R===0&&(R=wh(IC*Math.random()|0)),w||(R>>>=0),R}s(_C,"random32");function _N(w){of=36969*(of&65535)+(of>>16)&zd,wC=18e3*(wC&65535)+(wC>>16)&zd;var R=(of<<16)+(wC&65535)>>>0&zd|0;return w||(R>>>=0),R}s(_N,"mwcRandom32");function e1(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=_C()>>>0,F=0,oe=Vs;oe[Ma]<w;)F++,oe+=R.charAt(D&63),D>>>=6,F===5&&(D=(_C()<<2&4294967295|D&3)>>>0,F=0);return oe}s(e1,"newId");var sf="3.3.6",Ow="."+e1(6),t1=0;function af(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(af,"_canAcceptData");function Uw(w,R){var D=R[w.id];if(!D){D={};try{af(R)&&ce(R,w.id,{e:!1,v:D})}catch{}}return D}s(Uw,"_getCache");function Wp(w,R){return R===void 0&&(R=!1),Nw(w+t1+++(R?"."+sf:Vs)+Ow)}s(Wp,"createUniqueNamespace");function lf(w){var R={id:Wp("_aiData-"+(w||Vs)+"."+sf),accept:s(function(D){return af(D)},"accept"),get:s(function(D,F,oe,Ee){var we=D[R.id];return we?we[Nw(F)]:(Ee&&(we=Uw(R,D),we[Nw(F)]=oe),oe)},"get"),kill:s(function(D,F){if(D&&D[F])try{delete D[F]}catch{}},"kill")};return R}s(lf,"createElmNodeData");function Qh(w){return w&&te(w)&&(w.isVal||w.fb||Ze(w,"v")||Ze(w,"mrg")||Ze(w,"ref")||w.set)}s(Qh,"_isConfigDefaults");function qw(w,R,D){var F,oe=D.dfVal||Y;if(R&&D.fb){var Ee=D.fb;pe(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Ma];we++){var Me=Ee[we],Je=R[Me];if(oe(Je)?F=Je:w&&(Je=w.cfg[Me],oe(Je)&&(F=Je),w.set(w.cfg,tt(Me),Je)),oe(F))break}}return!oe(F)&&oe(D.v)&&(F=D.v),F}s(qw,"_getDefault");function Oh(w,R,D){var F=D;if(D&&Qh(D)&&(F=qw(w,R,D)),F){Qh(F)&&(F=Oh(w,R,F));var oe;pe(F)?(oe=[],oe[Ma]=F[Ma]):_h(F)&&(oe={}),oe&&(ft(F,function(Ee,we){we&&Qh(we)&&(we=Oh(w,R,we)),oe[Ee]=we}),F=oe)}return F}s(Oh,"_resolveDefaultValue");function Uh(w,R,D,F){var oe,Ee,we,Me=F,Je,pt,on,Ir;Qh(Me)?(oe=Me.isVal,Ee=Me.set,on=Me.rdOnly,Ir=Me.blkVal,Je=Me.mrg,pt=Me.ref,!pt&&ie(pt)&&(pt=!!Je),we=qw(w,R,Me)):we=F,Ir&&w.blkVal(R,D);var qr,un=!0,En=R[D];(En||!O(En))&&(qr=En,un=!1,oe&&qr!==we&&!oe(qr)&&(qr=we,un=!0),Ee&&(qr=Ee(qr,we,R),un=qr===we)),un?we?qr=Oh(w,R,we):qr=we:(_h(qr)||pe(we))&&Je&&we&&(_h(we)||pe(we))&&ft(we,function(Qr,Tr){Uh(w,qr,Qr,Tr)}),w.set(R,D,qr),pt&&w.ref(R,D),on&&w.rdOnly(R,D)}s(Uh,"_applyDefaultValue");var rc=js("[[ai_dynCfg_1]]"),v3=js("[[ai_blkDynCfg_1]]"),yE=js("[[ai_frcDynCfg_1]]");function b3(w){if(w){var R;if(pe(w)?(R=[],R[Ma]=w[Ma]):_h(w)&&(R={}),R)return ft(w,function(D,F){R[D]=b3(F)}),R}return w}s(b3,"_cfgDeepCopy");function E3(w){if(w){var R=w[rc]||w;if(R.cfg&&(R.cfg===w||R.cfg[rc]===R))return R}return null}s(E3,"getDynamicConfigHandler");function SC(w){if(w&&(_h(w)||pe(w)))try{w[v3]=!0}catch{}return w}s(SC,"blockDynamicConversion");function qh(w,R,D){var F=!1;return D&&!w[R.blkVal]&&(F=D[yE],!F&&!D[v3]&&(F=_h(D)||pe(D))),F}s(qh,"_canMakeDynamic");function Yd(w){Pe("InvalidAccess:"+w)}s(Yd,"throwInvalidAccess");var SN=["push","pop","shift","unshift","splice"],Gp=s(function(w,R,D,F){w&&w[cE](3,108,"".concat(D," [").concat(R,"] failed - ")+ne(F))},"_throwDynamicError");function I3(w,R,D){pe(R)&&Il(SN,function(F){var oe=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Me=oe[OK](this,Ee);return n1(w,R,D,"Patching"),Me}})}s(I3,"_patchArray");function Hp(w,R){var D=Qe(w,R);return D&&D.get}s(Hp,"_getOwnPropGetter");function RN(w,R,D,F){var oe={n:D,h:[],trk:s(function(pt){pt&&pt.fn&&(Fp(oe.h,pt)===-1&&oe.h[ji](pt),w.trk(pt,oe))},"trk"),clr:s(function(pt){var on=Fp(oe.h,pt);on!==-1&&oe.h[VA](on,1)},"clr")},Ee=!0,we=!1;function Me(){Ee&&(we=we||qh(Me,w,F),F&&!F[rc]&&we&&(F=n1(w,F,D,"Converting")),Ee=!1);var pt=w.act;return pt&&oe.trk(pt),F}s(Me,"_getProperty"),Me[w.prop]={chng:s(function(){w.add(oe)},"chng")};function Je(pt){if(F!==pt){Me[w.ro]&&!w.upd&&Yd("["+D+"] is read-only:"+ne(R)),Ee&&(we=we||qh(Me,w,F),Ee=!1);var on=we&&Me[w.rf];if(we)if(on){ft(F,function(qr){F[qr]=pt?pt[qr]:nc});try{ft(pt,function(qr,un){RC(w,F,qr,un)}),pt=F}catch(qr){Gp((w.hdlr||{})[kh],D,"Assigning",qr),we=!1}}else F&&F[rc]&&ft(F,function(qr){var un=Hp(F,qr);if(un){var En=un[w.prop];En&&En.chng()}});if(pt!==F){var Ir=pt&&qh(Me,w,pt);!on&&Ir&&(pt=n1(w,pt,D,"Converting")),F=pt,we=Ir}w.add(oe)}}s(Je,"_setProperty"),ce(R,oe.n,{g:Me,s:Je})}s(RN,"_createDynamicProperty");function RC(w,R,D,F){if(R){var oe=Hp(R,D),Ee=oe&&!!oe[w.prop];Ee?R[D]=F:RN(w,R,D,F)}return R}s(RC,"_setDynamicProperty");function T3(w,R,D,F){if(R){var oe=Hp(R,D),Ee=oe&&!!oe[w.prop],we=F&&F[0],Me=F&&F[1],Je=F&&F[2];if(!Ee){if(Je)try{SC(R)}catch(pt){Gp((w.hdlr||{})[kh],D,"Blocking",pt)}try{RC(w,R,D,R[D]),oe=Hp(R,D)}catch(pt){Gp((w.hdlr||{})[kh],D,"State",pt)}}we&&(oe[w.rf]=we),Me&&(oe[w.ro]=Me),Je&&(oe[w.blkVal]=!0)}return R}s(T3,"_setDynamicPropertyState");function n1(w,R,D,F){try{ft(R,function(oe,Ee){RC(w,R,oe,Ee)}),R[rc]||(vt(R,rc,{get:s(function(){return w.hdlr},"get")}),I3(w,R,D))}catch(oe){Gp((w.hdlr||{})[kh],D,F,oe)}return R}s(n1,"_makeDynamicObject");var r1="[[ai_",Xu="]]";function kN(w){var R=Mr(r1+"get"+w.uid+Xu),D=Mr(r1+"ro"+w.uid+Xu),F=Mr(r1+"rf"+w.uid+Xu),oe=Mr(r1+"blkVal"+w.uid+Xu),Ee=Mr(r1+"dtl"+w.uid+Xu),we=null,Me=null,Je;function pt(un,En){var Qr=Je.act;try{Je.act=un,un&&un[Ee]&&(Il(un[Ee],function(hi){hi.clr(un)}),un[Ee]=[]),En({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(hi){var Tr=w[kh];throw Tr&&Tr[cE](1,107,ne(hi)),hi}finally{Je.act=Qr||null}}s(pt,"_useHandler");function on(){if(we){var un=we;we=null,Me&&Me[a3](),Me=null;var En=[];if(Il(un,function(Qr){if(Qr&&(Qr[Ee]&&(Il(Qr[Ee],function(Tr){Tr.clr(Qr)}),Qr[Ee]=null),Qr.fn))try{pt(Qr,Qr.fn)}catch(Tr){En[ji](Tr)}}),we)try{on()}catch(Qr){En[ji](Qr)}En[Ma]>0&&UK("Watcher error(s): ",En)}}s(on,"_notifyWatchers");function Ir(un){if(un&&un.h[Ma]>0){we||(we=[]),Me||(Me=s3(function(){Me=null,on()},0));for(var En=0;En<un.h[Ma];En++){var Qr=un.h[En];Qr&&Fp(we,Qr)===-1&&we[ji](Qr)}}}s(Ir,"_addWatcher");function qr(un,En){if(un){var Qr=un[Ee]=un[Ee]||[];Fp(Qr,En)===-1&&Qr[ji](En)}}return s(qr,"_trackHandler"),Je={prop:R,ro:D,rf:F,blkVal:oe,hdlr:w,add:Ir,notify:on,use:pt,trk:qr},Je}s(kN,"_createState");function YK(w,R){var D={fn:R,rm:s(function(){D.fn=null,w=null,R=null},"rm")};return ce(D,"toJSON",{v:s(function(){return"WatcherHandler"+(D.fn?"":"[X]")},"v")}),w.use(D,R),D}s(YK,"_createAndUseHandler");function BN(w,R,D){var F=E3(R);if(F)return F;var oe=Wp("dyncfg",!0),Ee=R&&D!==!1?R:b3(R),we;function Me(){we.notify()}s(Me,"_notifyWatchers");function Je(Tr,hi,oo){try{Tr=RC(we,Tr,hi,oo)}catch(Di){Gp(w,hi,"Setting value",Di)}return Tr[hi]}s(Je,"_setValue");function pt(Tr){return YK(we,Tr)}s(pt,"_watch");function on(Tr,hi){we.use(null,function(oo){var Di=we.upd;try{ie(hi)||(we.upd=hi),Tr(oo)}finally{we.upd=Di}})}s(on,"_block");function Ir(Tr,hi){var oo;return T3(we,Tr,hi,(oo={},oo[0]=!0,oo))[hi]}s(Ir,"_ref");function qr(Tr,hi){var oo;return T3(we,Tr,hi,(oo={},oo[1]=!0,oo))[hi]}s(qr,"_rdOnly");function un(Tr,hi){var oo;return T3(we,Tr,hi,(oo={},oo[2]=!0,oo))[hi]}s(un,"_blkPropValue");function En(Tr,hi){return hi&&ft(hi,function(oo,Di){Uh(Qr,Tr,oo,Di)}),Tr}s(En,"_applyDefaults");var Qr={uid:null,cfg:Ee,logger:w,notify:Me,set:Je,setDf:En,watch:pt,ref:Ir,rdOnly:qr,blkVal:un,_block:on};return ce(Qr,"uid",{c:!1,e:!1,w:!1,v:oe}),we=kN(Qr),n1(we,Ee,"config","Creating"),Qr}s(BN,"_createDynamicHandler");function DN(w,R){w?(w[Rh](R),w[cE](2,108,R)):Yd(R)}s(DN,"_logInvalidAccess");function CE(w,R,D,F){var oe=BN(D,w||{},F);return R&&oe.setDf(oe.cfg,R),oe}s(CE,"createDynamicConfig");function PN(w,R,D){var F=w[rc]||w;return F.cfg&&(F.cfg===w||F.cfg[rc]===F)?F[gN](R):(DN(D,bN+ne(w)),CE(w,null,D)[gN](R))}s(PN,"onConfigChange");var Ww=null;function NN(){var w=M("Microsoft");return w&&(Ww=w.ApplicationInsights),Ww}s(NN,"_getExtensionNamespace");function KK(w){var R=Ww;return!R&&w.disableDbgExt!==!0&&(R=Ww||NN()),R?R.ChromeDbgExt:null}s(KK,"getDebugExt");var kC,Gw="warnToConsole",LN="AI (Internal): ",FN="AI: ",JK="AITR_",XK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},MN=(kC={},kC[0]=null,kC[1]="errorToConsole",kC[2]=Gw,kC[3]="debugToConsole",kC);function QN(w){return w?'"'+w[lC](/\"/g,Vs)+'"':Vs}s(QN,"_sanitizeDiagnosticText");function Hw(w,R){var D=Fw();if(D){var F="log";D[w]&&(F=w),le(D[F])&&D[F](R)}}s(Hw,"_logToConsole");var jw=function(){function w(R,D,F,oe){F===void 0&&(F=!1);var Ee=this;Ee[l3]=R,Ee[$A]=(F?FN:LN)+R;var we=Vs;Vi()&&(we=bC().stringify(oe));var Me=(D?" message:"+QN(D):Vs)+(oe?" props:"+QN(we):Vs);Ee[$A]+=Me}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function ZK(w,R){return(w||{})[kh]||new Vw(R)}s(ZK,"safeGetLogger");var Vw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var D=0,F={},oe,Ee,we,Me,Je;pE(w,this,function(pt){Je=Ir(R||{}),pt.consoleLoggingLevel=function(){return oe},pt[cE]=function(En,Qr,Tr,hi,oo){oo===void 0&&(oo=!1);var Di=new jw(Qr,Tr,oo,hi);if(Me)throw ne(Di);var Qa=MN[En]||Gw;if(ie(Di[$A]))un("throw"+(En===1?"Critical":"Warning"),Di);else{if(oo){var ax=+Di[l3];!F[ax]&&oe>=En&&(pt[Qa](Di[$A]),F[ax]=!0)}else oe>=En&&pt[Qa](Di[$A]);on(En,Di)}},pt.debugToConsole=function(En){Hw("debug",En),un("warning",En)},pt[Rh]=function(En){Hw("warn",En),un("warning",En)},pt.errorToConsole=function(En){Hw("error",En),un("error",En)},pt.resetInternalMessageCount=function(){D=0,F={}},pt.logInternalMessage=on,pt[hu]=function(En){Je&&Je.rm(),Je=null};function on(En,Qr){if(!qr()){var Tr=!0,hi=JK+Qr[l3];if(F[hi]?Tr=!1:F[hi]=!0,Tr&&(En<=Ee&&(pt.queue[ji](Qr),D++,un(En===1?"error":"warn",Qr)),D===we)){var oo="Internal events throttle limit per PageView reached for this app.",Di=new jw(23,oo,!1);pt.queue[ji](Di),En===1?pt.errorToConsole(oo):pt[Rh](oo)}}}s(on,"_logInternalMessage");function Ir(En){return PN(CE(En,XK,pt).cfg,function(Qr){var Tr=Qr.cfg;oe=Tr[yN],Ee=Tr.loggingLevelTelemetry,we=Tr.maxMessageLimit,Me=Tr.enableDebug})}s(Ir,"_setDefaultsFromConfig");function qr(){return D>=we}s(qr,"_areInternalMessagesThrottled");function un(En,Qr){var Tr=KK(R||{});Tr&&Tr[c3]&&Tr[c3](En,Qr)}s(un,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function $w(w){return w||new Vw}s($w,"_getLogger");function gu(w,R,D,F,oe,Ee){Ee===void 0&&(Ee=!1),$w(w)[cE](R,D,F,oe,Ee)}s(gu,"_throwInternal");function zw(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Vs,D,F=0;F<4;F++)D=_C(),R+=w[D&15]+w[D>>4&15]+w[D>>8&15]+w[D>>12&15]+w[D>>16&15]+w[D>>20&15]+w[D>>24&15]+w[D>>28&15];var oe=w[8+(_C()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+oe+Jt(R,16,3)+Jt(R,19,12)}s(zw,"generateW3CId");var BC=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,w3="00",Zu="ff",mi="00000000000000000000000000000000",jp="0000000000000000",ya=1;function Kd(w,R,D){return w&&w[Ma]===R&&w!==D?!!w.match(/^[\da-f]*$/i):!1}s(Kd,"_isValid");function Yw(w,R,D){return Kd(w,R)?w:D}s(Yw,"_formatValue");function i1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Ma]<2;)R="0"+R;return R}s(i1,"_formatFlags");function DC(w,R,D,F){return{version:Kd(F,2,Zu)?F:w3,traceId:PC(w)?w:zw(),spanId:NC(R)?R:Mn(zw(),16),traceFlags:D>=0&&D<=255?D:1}}s(DC,"createTraceParent");function ed(w,R){if(!w||(pe(w)&&(w=w[0]||""),!w||!K(w)||w[Ma]>8192))return null;if(w.indexOf(",")!==-1){var D=w[u3](",");w=D[R>0&&D[Ma]>R?R:0]}var F=BC.exec(Bc(w));return!F||F[1]===Zu||F[2]===mi||F[3]===jp?null:{version:(F[1]||Vs)[lE](),traceId:(F[2]||Vs)[lE](),spanId:(F[3]||Vs)[lE](),traceFlags:parseInt(F[4],16)}}s(ed,"parseTraceParent");function PC(w){return Kd(w,32,mi)}s(PC,"isValidTraceId");function NC(w){return Kd(w,16,jp)}s(NC,"isValidSpanId");function LC(w){return!(!w||!Kd(w[AN],2,Zu)||!Kd(w.traceId,32,mi)||!Kd(w.spanId,16,jp)||!Kd(i1(w[Ew]),2))}s(LC,"isValidTraceParent");function Kw(w){return LC(w)?(w[Ew]&ya)===ya:!1}s(Kw,"isSampledFlag");function o1(w){if(w){var R=i1(w[Ew]);Kd(R,2)||(R="01");var D=w[AN]||w3;return D!=="00"&&D!=="ff"&&(D=w3),"".concat(D.toLowerCase(),"-").concat(Yw(w.traceId,32,mi).toLowerCase(),"-").concat(Yw(w.spanId,16,jp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(o1,"formatTraceParent");function _3(w){var R="traceparent",D=ed(Mw(R),w);return D||(D=ed(rf(R),w)),D}s(_3,"findW3cTraceParent");function S3(w){var R=w.getElementsByTagName("script"),D=[];return Il(R,function(F){var oe=F[d3]("src");if(oe){var Ee=F[d3]("crossorigin"),we=F.hasAttribute("async")===!0,Me=F.hasAttribute("defer")===!0,Je=F[d3]("referrerpolicy"),pt={url:oe};Ee&&(pt.crossOrigin=Ee),we&&(pt.async=we),Me&&(pt.defer=Me),Je&&(pt.referrerPolicy=Je),D[ji](pt)}}),D}s(S3,"findAllScripts");var Jw="on",xE="attachEvent",Xw="addEventListener",Zw="detachEvent",ON="removeEventListener",R3="events";Wp("aiEvtPageHide"),Wp("aiEvtPageShow");var eJ=/\.[\.]+/g,tJ=/[\.]+$/,e_=1,FC=lf("events"),wl=/^([^.]*)(?:\.(.+)|)/;function vE(w){return w&&w[lC]?w[lC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Vs):w}s(vE,"_normalizeNamespace");function ll(w,R){if(R){var D=Vs;pe(R)?(D=Vs,Il(R,function(oe){oe=vE(oe),oe&&(oe[0]!=="."&&(oe="."+oe),D+=oe)})):D=vE(R),D&&(D[0]!=="."&&(D="."+D),w=(w||Vs)+D)}var F=wl.exec(w||Vs)||[];return{type:F[1],ns:(F[2]||Vs).replace(eJ,".").replace(tJ,Vs)[u3](".").sort().join(".")}}s(ll,"_getEvtNamespace");function Wh(w,R,D){D===void 0&&(D=!0);var F=FC.get(w,R3,{},D),oe=F[R];return oe||(oe=F[R]=[]),oe}s(Wh,"_getRegisteredEvents");function UN(w,R,D,F){w&&R&&R[Bh]&&(w[ON]?w[ON](R[Bh],D,F):w[Zw]&&w[Zw](Jw+R[Bh],D))}s(UN,"_doDetach");function nJ(w,R,D,F){var oe=!1;return w&&R&&R[Bh]&&D&&(w[Xw]?(w[Xw](R[Bh],D,F),oe=!0):w[xE]&&(w[xE](Jw+R[Bh],D),oe=!0)),oe}s(nJ,"_doAttach");function bE(w,R,D,F){for(var oe=R[Ma];oe--;){var Ee=R[oe];Ee&&(!D.ns||D.ns===Ee[xN].ns)&&(!F||F(Ee))&&(UN(w,Ee[xN],Ee.handler,Ee.capture),R[VA](oe,1))}}s(bE,"_doUnregister");function k3(w,R,D){if(R[Bh])bE(w,Wh(w,R[Bh]),R,D);else{var F=FC.get(w,R3,{});ft(F,function(oe,Ee){bE(w,Ee,R,D)}),Ot(F)[Ma]===0&&FC.kill(w,R3)}}s(k3,"_unregisterEvents");function rJ(w,R){var D;return R?(pe(R)?D=[w].concat(R):D=[w,R],D=ll("xx",D).ns[u3](".")):D=w,D}s(rJ,"mergeEvtNamespace");function B3(w,R,D,F,oe){oe===void 0&&(oe=!1);var Ee=!1;if(w)try{var we=ll(R,F);if(Ee=nJ(w,we,D,oe),Ee&&FC.accept(w)){var Me={guid:e_++,evtName:we,handler:D,capture:oe};Wh(w,we.type)[ji](Me)}}catch{}return Ee}s(B3,"eventOn");function qN(w,R,D,F,oe){if(oe===void 0&&(oe=!1),w)try{var Ee=ll(R,F),we=!1;k3(w,Ee,function(Me){return Ee.ns&&!D||Me.handler===D?(we=!0,!0):!1}),we||UN(w,Ee,D,oe)}catch{}}s(qN,"eventOff");var t_="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",WN="sampleRate",n_="ProcessLegacy",GN="http.method",D3="https://dc.services.visualstudio.com",EE="/v2/track",cf="not_specified",P3="iKey",HN=QK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Gh="split",Er="length",MC="toLowerCase",s1="ingestionendpoint",a1="toString",N3="removeItem",IE="message",QC="count",r_="preTriggerDate",L3="getUTCDate",i_="stringify",OC="pathname",l1="match",F3="correlationHeaderExcludePatterns",td="name",UC="extensionConfig",uf="properties",Dc="measurements",qC="sizeInBytes",TE="typeName",WC="exceptions",wE="severityLevel",GC="problemGroup",Au="parsedStack",o_="hasFullStack",s_="assembly",Jd="fileName",HC="line",Hh="aiDataContract",_E="duration";function M3(w,R,D){var F=R[Er],oe=Q3(w,R);if(oe[Er]!==F){for(var Ee=0,we=oe;D[we]!==void 0;)Ee++,we=nn(oe,0,147)+jN(Ee);oe=we}return oe}s(M3,"dataSanitizeKeyAndAddUniqueness");function Q3(w,R){var D;return R&&(R=Bc(tt(R)),R[Er]>150&&(D=nn(R,0,150),gu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),D||R}s(Q3,"dataSanitizeKey");function cl(w,R,D){D===void 0&&(D=1024);var F;return R&&(D=D||1024,R=Bc(tt(R)),R[Er]>D&&(F=nn(R,0,D),gu(w,2,61,"string value is too long. It has been truncated to "+D+" characters.",{value:R},!0))),F||R}s(cl,"dataSanitizeString");function df(w,R){return U3(w,R,2048,66)}s(df,"dataSanitizeUrl");function a_(w,R){var D;return R&&R[Er]>32768&&(D=nn(R,0,32768),gu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),D||R}s(a_,"dataSanitizeMessage");function O3(w,R){var D;if(R){var F=""+R;F[Er]>32768&&(D=nn(F,0,32768),gu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return D||R}s(O3,"dataSanitizeException");function Vp(w,R){if(R){var D={};ft(R,function(F,oe){if(te(oe)&&Vi())try{oe=bC()[i_](oe)}catch(Ee){gu(w,2,49,"custom property is not valid",{exception:Ee},!0)}oe=cl(w,oe,8192),F=M3(w,F,D),D[F]=oe}),R=D}return R}s(Vp,"dataSanitizeProperties");function nd(w,R){if(R){var D={};ft(R,function(F,oe){F=M3(w,F,D),D[F]=oe}),R=D}return R}s(nd,"dataSanitizeMeasurements");function jC(w,R){return R&&U3(w,R,128,69)[a1]()}s(jC,"dataSanitizeId");function U3(w,R,D,F){var oe;return R&&(R=Bc(tt(R)),R[Er]>D&&(oe=nn(R,0,D),gu(w,2,F,"input is too long, it has been truncated to "+D+" characters.",{data:R},!0))),oe||R}s(U3,"dataSanitizeInput");function jN(w){var R="00"+w;return Jt(R,R[Er]-3)}s(jN,"dsPadNumber");var q3=Re()||{},VN=0,iJ=[null,null,null,null,null];function VC(w){var R=VN,D=iJ,F=D[R];return q3.createElement?D[R]||(F=D[R]=q3.createElement("a")):F={host:zN(w,!0)},F.href=w,R++,R>=D[Er]&&(R=0),VN=R,F}s(VC,"urlParseUrl");function oJ(w){var R,D=VC(w);return D&&(R=D.href),R}s(oJ,"urlGetAbsoluteUrl");function sJ(w){var R,D=VC(w);return D&&(R=D[OC]),R}s(sJ,"urlGetPathName");function $N(w,R){return w?w.toUpperCase()+" "+R:R}s($N,"urlGetCompleteUrl");function zN(w,R){var D=$p(w,R)||"";if(D){var F=D[l1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Er]>3&&K(F[2])&&F[2][Er]>0)return F[2]+(F[3]||"")}return D}s(zN,"urlParseHost");function $p(w,R){var D=null;if(w){var F=w[l1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Er]>2&&K(F[2])&&F[2][Er]>0&&(D=F[2]||"",R&&F[Er]>2)){var oe=(F[1]||"")[MC](),Ee=F[3]||"";(oe==="http"&&Ee===":80"||oe==="https"&&Ee===":443")&&(Ee=""),D+=Ee}}return D}s($p,"urlParseFullHost");var YN=[D3+EE,"https://breeze.aimon.applicationinsights.io"+EE,"https://dc-int.services.visualstudio.com"+EE],$C="cid-v1:";function KN(w){return Fp(YN,w[MC]())!==-1}s(KN,"isInternalApplicationInsightsEndpoint");function W3(w){$C=w}s(W3,"correlationIdSetPrefix");function G3(){return $C}s(G3,"correlationIdGetPrefix");function jh(w,R,D){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[F3]){for(var F=0;F<w.correlationHeaderExcludePatterns[Er];F++)if(w[F3][F].test(R))return!1}var oe=VC(R).host[MC]();if(oe&&(qn(oe,":443")!==-1||qn(oe,":80")!==-1)&&(oe=($p(R,!0)||"")[MC]()),(!w||!w.enableCorsCorrelation)&&oe&&oe!==D)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(Il(Ee,function(pt){var on=new RegExp(pt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||on.test(oe)}),!we)return!1}var Me=w&&w.correlationHeaderExcludedDomains;if(!Me||Me[Er]===0)return!0;for(var F=0;F<Me[Er];F++){var Je=new RegExp(Me[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Je.test(oe))return!1}return oe&&oe[Er]>0}s(jh,"correlationIdCanIncludeCorrelationHeader");function JN(w){if(w){var R=XN(w,HN[1]);if(R&&R!==$C)return R}}s(JN,"correlationIdGetCorrelationContext");function XN(w,R){if(w)for(var D=w[Gh](","),F=0;F<D[Er];++F){var oe=D[F][Gh]("=");if(oe[Er]===2&&oe[0]===R)return oe[1]}}s(XN,"correlationIdGetCorrelationContextValue");function ZN(w,R,D,F){var oe,Ee=F,we=F;if(R&&R[Er]>0){var Me=VC(R);if(oe=Me.host,!Ee)if(Me[OC]!=null){var Je=Me.pathname[Er]===0?"/":Me[OC];Je.charAt(0)!=="/"&&(Je="/"+Je),we=Me[OC],Ee=cl(w,D?D+" "+Je:Je)}else Ee=cl(w,R)}else oe=F,Ee=F;return{target:oe,name:Ee,data:we}}s(ZN,"AjaxHelperParseDependencyPath");function aJ(){var w=sE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return GA()}s(aJ,"dateTimeUtilsNow");function lJ(w,R){var D=null;return w!==0&&R!==0&&!O(w)&&!O(R)&&(D=R-w),D}s(lJ,"dateTimeUtilsDuration");function H3(w,R){var D=w||{};return{getName:s(function(){return D[td]},"getName"),setName:s(function(F){R&&R.setName(F),D[td]=F},"setName"),getTraceId:s(function(){return D.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),PC(F)&&(D.traceID=F)},"setTraceId"),getSpanId:s(function(){return D.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),NC(F)&&(D.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return D.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),D.traceFlags=F},"setTraceFlags")}}s(H3,"createDistributedTraceContextFromTrace");var zC=aE({LocalStorage:0,SessionStorage:1}),cJ=aE({AI:0,AI_AND_W3C:1,W3C:2}),SE=aE({Normal:1,Critical:2}),Vh=void 0,Xd=void 0,e7="";function YC(){return l_()?KC(zC.LocalStorage):null}s(YC,"_getLocalStorageObject");function KC(w){try{if(O(ee()))return null;var R=new Date()[a1](),D=M(w===zC.LocalStorage?"localStorage":"sessionStorage"),F=e7+R;D.setItem(F,R);var oe=D.getItem(F)!==R;if(D[N3](F),!oe)return D}catch{}return null}s(KC,"_getVerifiedStorageObject");function JC(){return zp()?KC(zC.SessionStorage):null}s(JC,"_getSessionStorageObject");function RE(){Vh=!1,Xd=!1}s(RE,"utlDisableStorage");function kE(w){e7=w||""}s(kE,"utlSetStoragePrefix");function uJ(){Vh=l_(!0),Xd=zp(!0)}s(uJ,"utlEnableStorage");function l_(w){return(w||Vh===void 0)&&(Vh=!!KC(zC.LocalStorage)),Vh}s(l_,"utlCanUseLocalStorage");function t7(w,R){var D=YC();if(D!==null)try{return D.getItem(R)}catch(F){Vh=!1,gu(w,2,1,"Browser failed read of local storage. "+Nh(F),{exception:ne(F)})}return null}s(t7,"utlGetLocalStorage");function n7(w,R,D){var F=YC();if(F!==null)try{return F.setItem(R,D),!0}catch(oe){Vh=!1,gu(w,2,3,"Browser failed write to local storage. "+Nh(oe),{exception:ne(oe)})}return!1}s(n7,"utlSetLocalStorage");function rd(w,R){var D=YC();if(D!==null)try{return D[N3](R),!0}catch(F){Vh=!1,gu(w,2,5,"Browser failed removal of local storage item. "+Nh(F),{exception:ne(F)})}return!1}s(rd,"utlRemoveStorage");function zp(w){return(w||Xd===void 0)&&(Xd=!!KC(zC.SessionStorage)),Xd}s(zp,"utlCanUseSessionStorage");function XC(){var w=[];return zp()&&ft(M("sessionStorage"),function(R){w.push(R)}),w}s(XC,"utlGetSessionStorageKeys");function r7(w,R){var D=JC();if(D!==null)try{return D.getItem(R)}catch(F){Xd=!1,gu(w,2,2,"Browser failed read of session storage. "+Nh(F),{exception:ne(F)})}return null}s(r7,"utlGetSessionStorage");function dJ(w,R,D){var F=JC();if(F!==null)try{return F.setItem(R,D),!0}catch(oe){Xd=!1,gu(w,2,4,"Browser failed write to session storage. "+Nh(oe),{exception:ne(oe)})}return!1}s(dJ,"utlSetSessionStorage");function i7(w,R){var D=JC();if(D!==null)try{return D[N3](R),!0}catch(F){Xd=!1,gu(w,2,6,"Browser failed removal of session storage item. "+Nh(F),{exception:ne(F)})}return!1}s(i7,"utlRemoveSessionStorage");var fJ="appInsightsThrottle",pJ=function(){function w(R,D){var F=this,oe,Ee,we,Me,Je,pt,on,Ir=!1,qr=!1;En(),F._getDbgPlgTargets=function(){return[on]},F.getConfig=function(){return we},F.canThrottle=function(Et){var Bn=iB(Et),rr=Qr(Et);return oo(rr,oe,Bn)},F.isTriggered=function(Et){return v7(Et)},F.isReady=function(){return Ir},F.flush=function(Et){try{var Bn=b7(Et);if(Bn&&Bn[Er]>0){var rr=Bn.slice(0);return on[Et]=[],Il(rr,function(Fo){un(Fo.msgID,Fo[IE],Fo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(on){var Et=!0;return ft(on,function(Bn){var rr=F.flush(parseInt(Bn));Et=Et&&rr}),Et}}catch{}return!1},F.onReadyState=function(Et,Bn){return Bn===void 0&&(Bn=!0),Ir=O(Et)?!0:Et,Ir&&Bn?F.flushAll():null},F.sendMessage=function(Et,Bn,rr){return un(Et,Bn,rr,!0)};function un(Et,Bn,rr,Fo){if(Ir){var Oa=BJ(Et);if(!Oa)return;var $s=Qr(Et),Ua=iB(Et),u1=oo($s,oe,Ua),Jh=!1,lx=0,E7=v7(Et);try{u1&&!E7?(lx=yn($s.limit.maxSendNumber,Ua[QC]+1),Ua[QC]=0,Jh=!0,Je[Et]=!0,Ua[r_]=new Date):(Je[Et]=u1,Ua[QC]+=1);var I7=Di(Et);rB(Ee,I7,Ua);for(var b_=0;b_<lx;b_++)x7(Et,Ee,Bn,rr)}catch{}return{isThrottled:Jh,throttleNum:lx}}else if(Fo){var DJ=b7(Et);DJ.push({msgID:Et,message:Bn,severity:rr})}return null}s(un,"_flushMessage");function En(){Ee=ZK(R),Je={},Me={},on={},we={},Tr(109),pt=x3(D)?D:"",R.addUnloadHook(PN(R.config,function(Et){var Bn=Et.cfg;oe=l_();var rr=Bn.throttleMgrCfg||{};ft(rr,function(Fo,Oa){Tr(parseInt(Fo),Oa)})}))}s(En,"_initConfig");function Qr(Et){return we[Et]||we[109]}s(Qr,"_getCfgByKey");function Tr(Et,Bn){var rr,Fo;try{var Oa=Bn||{},$s={};$s.disabled=!!Oa.disabled;var Ua=Oa.interval||{};qr=Ua?.daysOfMonth&&Ua?.daysOfMonth[Er]>0,$s.interval=hi(Ua);var u1={samplingRate:((rr=Oa.limit)===null||rr===void 0?void 0:rr.samplingRate)||100,maxSendNumber:((Fo=Oa.limit)===null||Fo===void 0?void 0:Fo.maxSendNumber)||1};$s.limit=u1,we[Et]=$s}catch{}}s(Tr,"_setCfgByKey");function hi(Et){Et=Et||{};var Bn=Et?.monthInterval,rr=Et?.dayInterval;return O(Bn)&&O(rr)&&(Et.monthInterval=3,qr||(Et.daysOfMonth=[28],qr=!0)),Et={monthInterval:Et?.monthInterval,dayInterval:Et?.dayInterval,daysOfMonth:Et?.daysOfMonth},Et}s(hi,"_getIntervalConfig");function oo(Et,Bn,rr){if(Et&&!Et.disabled&&Bn&&x3(rr)){var Fo=QE(),Oa=rr.date,$s=Et.interval,Ua=1;if($s?.monthInterval){var u1=(Fo.getUTCFullYear()-Oa.getUTCFullYear())*12+Fo.getUTCMonth()-Oa.getUTCMonth();Ua=v_($s.monthInterval,0,u1)}var Jh=1;if(qr)Jh=Fp($s.daysOfMonth,Fo[L3]());else if($s?.dayInterval){var lx=wh((Fo.getTime()-Oa.getTime())/864e5);Jh=v_($s.dayInterval,0,lx)}return Ua>=0&&Jh>=0}return!1}s(oo,"_canThrottle");function Di(Et,Bn){var rr=x3(Bn)?Bn:"";return Et?fJ+rr+"-"+Et:null}s(Di,"_getLocalStorageName");function Qa(Et){try{if(Et){var Bn=new Date;return Et.getUTCFullYear()===Bn.getUTCFullYear()&&Et.getUTCMonth()===Bn.getUTCMonth()&&Et[L3]()===Bn[L3]()}}catch{}return!1}s(Qa,"_isTriggeredOnCurDate");function ax(Et,Bn,rr){try{var Fo={date:QE(),count:0};if(Et){var Oa=JSON.parse(Et),$s={date:QE(Oa.date)||Fo.date,count:Oa[QC]||Fo[QC],preTriggerDate:Oa.preTriggerDate?QE(Oa[r_]):void 0};return $s}else return rB(Bn,rr,Fo),Fo}catch{}return null}s(ax,"_getLocalStorageObj");function QE(Et){try{if(Et){var Bn=new Date(Et);if(!isNaN(Bn.getDate()))return Bn}else return new Date}catch{}return null}s(QE,"_getThrottleDate");function rB(Et,Bn,rr){try{return n7(Et,Bn,Bc(JSON[i_](rr)))}catch{}return!1}s(rB,"_resetLocalStorage");function v_(Et,Bn,rr){return Et<=0?1:rr>=Bn&&(rr-Bn)%Et==0?wh((rr-Bn)/Et)+1:-1}s(v_,"_checkInterval");function x7(Et,Bn,rr,Fo){gu(Bn,Fo||1,Et,rr)}s(x7,"_sendMessage");function BJ(Et){try{var Bn=Qr(Et);return Qw(1e6)<=Bn.limit.samplingRate}catch{}return!1}s(BJ,"_canSampledIn");function iB(Et){try{var Bn=Me[Et];if(!Bn){var rr=Di(Et,pt);Bn=ax(t7(Ee,rr),Ee,rr),Me[Et]=Bn}return Me[Et]}catch{}return null}s(iB,"_getLocalStorageObjByKey");function v7(Et){var Bn=Je[Et];if(O(Bn)){Bn=!1;var rr=iB(Et);rr&&(Bn=Qa(rr[r_])),Je[Et]=Bn}return Je[Et]}s(v7,"_isTrigger");function b7(Et){return on=on||{},O(on[Et])&&(on[Et]=[]),on[Et]}s(b7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),j3=";",ff="=";function c_(w){if(!w)return{};var R=w[Gh](j3),D=ia(R,function(oe,Ee){var we=Ee[Gh](ff);if(we[Er]===2){var Me=we[0][MC](),Je=we[1];oe[Me]=Je}return oe},{});if(Ot(D)[Er]>0){if(D.endpointsuffix){var F=D.location?D.location+".":"";D[s1]=D[s1]||"https://"+F+"dc."+D.endpointsuffix}D[s1]=D[s1]||D3,oC(D[s1],"/")&&(D[s1]=D[s1].slice(0,-1))}return D}s(c_,"parseConnectionString");var u_={parse:c_},d_=function(){function w(R,D,F){var oe=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[td]=cl(R,F)||cf,Ee.data=D,Ee.time=Up(new Date),Ee[Hh]={time:1,iKey:1,name:1,sampleRate:s(function(){return oe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),mJ=function(){function w(R,D,F,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[td]=cl(R,D)||cf,Ee[uf]=Vp(R,F),Ee[Dc]=nd(R,oe)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),hJ=58,o7=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,gJ=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,ZC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,s7=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,AJ=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,yJ=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,CJ=/([^\(\s\n]+):([0-9]+)$/,a7="<no_method>",ex="error",yu="stack",BE="stackDetails",f_="errorSrc",DE="message",PE="description",V3=[{re:gJ,len:5,m:1,fn:2,ln:3,col:4},{chk:p_,pre:_n,re:ZC,len:4,m:1,fn:2,ln:3},{re:s7,len:3,m:1,fn:2,hdl:z3},{re:AJ,len:2,fn:1,hdl:z3}];function _n(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(_n,"_scrubAnonymous");function p_(w){return qn(w,"[native")<0}s(p_,"_ignoreNative");function NE(w,R){var D=w;return D&&!K(D)&&(JSON&&JSON[i_]?(D=JSON[i_](w),R&&(!D||D==="{}")&&(le(w[a1])?D=w[a1]():D=""+w)):D=""+w+" - (Missing JSON.stringify)"),D||""}s(NE,"_stringify");function $h(w,R){var D=w;return w&&(D&&!K(D)&&(D=w[DE]||w[PE]||D),D&&!K(D)&&(D=NE(D,!0)),w.filename&&(D=D+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&qn(D||"",R)===-1&&(D=R+": "+D),D||""}s($h,"_formatMessage");function l7(w){try{if(te(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(l7,"_isExceptionDetailsInternal");function c7(w){try{if(te(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(c7,"_isExceptionInternal");function m_(w){return w&&w.src&&K(w.src)&&w.obj&&pe(w.obj)}s(m_,"_isStackDetails");function Yp(w){var R=w||"";K(R)||(K(R[yu])?R=R[yu]:R=""+R);var D=R[Gh](`
`);return{src:R,obj:D}}s(Yp,"_convertStackObj");function u7(w){for(var R=[],D=w[Gh](`
`),F=0;F<D[Er];F++){var oe=D[F];D[F+1]&&(oe+="@"+D[F+1],F++),R.push(oe)}return{src:w,obj:R}}s(u7,"_getOperaStack");function h_(w){var R=null;if(w)try{if(w[yu])R=Yp(w[yu]);else if(w[ex]&&w[ex][yu])R=Yp(w[ex][yu]);else if(w.exception&&w.exception[yu])R=Yp(w.exception[yu]);else if(m_(w))R=w;else if(m_(w[BE]))R=w[BE];else if(qt()&&qt().opera&&w[DE])R=u7(w[IE]);else if(w.reason&&w.reason[yu])R=Yp(w.reason[yu]);else if(K(w))R=Yp(w);else{var D=w[DE]||w[PE]||"";K(w[f_])&&(D&&(D+=`
`),D+=" from "+w[f_]),D&&(R=Yp(D))}}catch(F){R=Yp(F)}return R||{src:"",obj:null}}s(h_,"_getStackFromErrorObj");function d7(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(d7,"_formatStackTrace");function g_(w){var R,D=w.obj;if(D&&D[Er]>0){R=[];var F=0,oe=!1,Ee=0;Il(D,function(Qr){if(oe||xJ(Qr)){var Tr=tt(Qr);oe=!0;var hi=vJ(Tr,F);hi&&(Ee+=hi[qC],R.push(hi),F++)}});var we=32*1024;if(Ee>we)for(var Me=0,Je=R[Er]-1,pt=0,on=Me,Ir=Je;Me<Je;){var qr=R[Me][qC],un=R[Je][qC];if(pt+=qr+un,pt>we){var En=Ir-on+1;R.splice(on,En);break}on=Me,Ir=Je,Me++,Je--}}return R}s(g_,"_parseStack");function tx(w){var R="";if(w&&(R=w.typeName||w[td]||"",!R))try{var D=/function (.{1,200})\(/,F=D.exec(w.constructor[a1]());R=F&&F[Er]>1?F[1]:""}catch{}return R}s(tx,"_getErrorType");function A_(w){if(w)try{if(!K(w)){var R=tx(w),D=NE(w,!1);return(!D||D==="{}")&&(w[ex]&&(w=w[ex],R=tx(w)),D=NE(w,!0)),qn(D,R)!==0&&R!=="String"?R+":"+D:D}}catch{}return""+(w||"")}s(A_,"_formatErrorCode");var pf=function(){function w(R,D,F,oe,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Me=this;Me.ver=2,c7(D)?(Me[WC]=D[WC]||[],Me[uf]=D[uf],Me[Dc]=D[Dc],D[wE]&&(Me[wE]=D[wE]),D.id&&(Me.id=D.id,D[uf].id=D.id),D[GC]&&(Me[GC]=D[GC]),O(D.isManual)||(Me.isManual=D.isManual)):(F||(F={}),we&&(F.id=we),Me[WC]=[m7(R,D,F)],Me[uf]=Vp(R,F),Me[Dc]=nd(R,oe),Ee&&(Me[wE]=Ee),we&&(Me.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,D,F,oe,Ee,we,Me,Je){var pt=tx(Ee||we||R);return{message:$h(R,pt),url:D,lineNumber:F,columnNumber:oe,error:A_(Ee||we||R),evt:A_(we||R),typeName:pt,stackDetails:h_(Me||Ee||we),errorSrc:Je}},w.CreateFromInterface=function(R,D,F,oe){var Ee=D[WC]&&tf(D[WC],function(Me){return $3(R,Me)}),we=new w(R,_w(_w({},D),{exceptions:Ee}),F,oe);return we},w.prototype.toInterface=function(){var R=this,D=R.exceptions,F=R.properties,oe=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Me=R.id,Je=R.isManual,pt=D instanceof Array&&tf(D,function(on){return on.toInterface()})||void 0;return{ver:"4.0",exceptions:pt,severityLevel:Ee,properties:F,measurements:oe,problemGroup:we,id:Me,isManual:Je}},w.CreateSimpleException=function(R,D,F,oe,Ee,we){var Me;return{exceptions:[(Me={},Me[o_]=!0,Me.message=R,Me.stack=Ee,Me.typeName=D,Me)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=A_,w}(),f7=cn({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function p7(){var w=this,R=pe(w[Au])&&tf(w[Au],function(F){return g7(F)}),D={id:w.id,outerId:w.outerId,typeName:w[TE],message:w[IE],hasFullStack:w[o_],stack:w[yu],parsedStack:R||void 0};return D}s(p7,"_toInterface");function m7(w,R,D){var F,oe,Ee,we,Me,Je,pt,on;if(l7(R))we=R[TE],Me=R[IE],pt=R[yu],on=R[Au]||[],Je=R[o_];else{var Ir=R,qr=Ir&&Ir.evt;he(Ir)||(Ir=Ir[ex]||qr||Ir),we=cl(w,tx(Ir))||cf,Me=a_(w,$h(R||Ir,we))||cf;var un=R[BE]||h_(R);on=g_(un),pe(on)&&tf(on,function(En){En[s_]=cl(w,En[s_]),En[Jd]=cl(w,En[Jd])}),pt=O3(w,d7(un)),Je=pe(on)&&on[Er]>0,D&&(D[TE]=D[TE]||we)}return F={},F[Hh]=f7,F.id=oe,F.outerId=Ee,F.typeName=we,F.message=Me,F[o_]=Je,F.stack=pt,F.parsedStack=on,F.toInterface=p7,F}s(m7,"_createExceptionDetails");function $3(w,R){var D=pe(R[Au])&&tf(R[Au],function(oe){return h7(oe)})||R[Au],F=m7(w,_w(_w({},R),{parsedStack:D}));return F}s($3,"_createExDetailsFromInterface");function LE(w,R){var D=R[l1](yJ);if(D&&D[Er]>=4)w[Jd]=D[1],w[HC]=parseInt(D[2]);else{var F=R[l1](CJ);F&&F[Er]>=3?(w[Jd]=F[1],w[HC]=parseInt(F[2])):w[Jd]=R}}s(LE,"_parseFilename");function z3(w,R,D){var F=w[Jd];R.fn&&D&&D[Er]>R.fn&&(R.ln&&D[Er]>R.ln?(F=Bc(D[R.fn]||""),w[HC]=parseInt(Bc(D[R.ln]||""))||0):F=Bc(D[R.fn]||"")),F&&LE(w,F)}s(z3,"_handleFilename");function xJ(w){var R=!1;if(w&&K(w)){var D=Bc(w);D&&(R=o7.test(D))}return R}s(xJ,"_isStackFrame");var Y3=cn({level:1,method:1,assembly:0,fileName:0,line:0});function vJ(w,R){var D,F;if(w&&K(w)&&Bc(w)){F=(D={},D[Hh]=Y3,D.level=R,D.assembly=Bc(w),D.method=a7,D.fileName="",D.line=0,D.sizeInBytes=0,D);for(var oe=0;oe<V3[Er];){var Ee=V3[oe];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[l1](Ee.re);if(we&&we[Er]>=Ee.len){Ee.m&&(F.method=Bc(we[Ee.m]||a7)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Jd]=Bc(we[Ee.fn]||""),F[HC]=parseInt(Bc(we[Ee.ln]||""))||0):LE(F,we[Ee.fn]||""));break}oe++}}return K3(F)}s(vJ,"_extractStackFrame");function h7(w){var R,D=(R={},R[Hh]=Y3,R.level=w.level,R.method=w.method,R.assembly=w[s_],R.fileName=w[Jd],R.line=w[HC],R.sizeInBytes=0,R);return K3(D)}s(h7,"_stackFrameFromInterface");function K3(w){var R=hJ;return w&&(R+=w.method[Er],R+=w.assembly[Er],R+=w.fileName[Er],R+=w.level.toString()[Er],R+=w.line.toString()[Er],w[qC]=R),w}s(K3,"_populateFrameSizeInBytes");function g7(w){return{level:w.level,method:w.method,assembly:w[s_],fileName:w[Jd],line:w[HC]}}s(g7,"_parsedFrameToInterface");var A7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),bJ=function(){function w(R,D,F,oe,Ee,we,Me,Je,pt){this.aiDataContract={ver:1,metrics:1,properties:0};var on=this;on.ver=2;var Ir=new A7;Ir[QC]=oe>0?oe:void 0,Ir.max=isNaN(we)||we===null?void 0:we,Ir.min=isNaN(Ee)||Ee===null?void 0:Ee,Ir[td]=cl(R,D)||cf,Ir.value=F,Ir.stdDev=isNaN(Me)||Me===null?void 0:Me,on.metrics=[Ir],on[uf]=Vp(R,Je),on[Dc]=nd(R,pt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),nx="";function EJ(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[MC]()==="true"}s(EJ,"stringToBoolOrDefault");function J3(w){(isNaN(w)||w<0)&&(w=0),w=o3(w);var R=nx+w%1e3,D=nx+wh(w/1e3)%60,F=nx+wh(w/(1e3*60))%60,oe=nx+wh(w/(1e3*60*60))%24,Ee=wh(w/(1e3*60*60*24));return R=R[Er]===1?"00"+R:R[Er]===2?"0"+R:R,D=D[Er]<2?"0"+D:D,F=F[Er]<2?"0"+F:F,oe=oe[Er]<2?"0"+oe:oe,(Ee>0?Ee+".":nx)+oe+":"+F+":"+D+"."+R}s(J3,"msToTimeSpan");function IJ(w,R){var D=null;return Il(w,function(F){if(F.identifier===R)return D=F,-1}),D}s(IJ,"getExtensionByName");function zh(w,R,D,F,oe){return!oe&&K(w)&&(w==="Script error."||w==="Script error")}s(zh,"isCrossOriginError");var TJ=function(){function w(R,D,F,oe,Ee,we,Me){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Je=this;Je.ver=2,Je.id=jC(R,Me),Je.url=df(R,F),Je[td]=cl(R,D)||cf,isNaN(oe)||(Je[_E]=J3(oe)),Je[uf]=Vp(R,Ee),Je[Dc]=nd(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),rx=function(){function w(R,D,F,oe,Ee,we,Me,Je,pt,on,Ir,qr){pt===void 0&&(pt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var un=this;un.ver=2,un.id=D,un[_E]=J3(Ee),un.success=we,un.resultCode=Me+"",un.type=cl(R,pt);var En=ZN(R,F,Je,oe);un.data=df(R,oe)||En.data,un.target=cl(R,En.target),on&&(un.target="".concat(un.target," | ").concat(on)),un[td]=cl(R,En[td]),un[uf]=Vp(R,Ir),un[Dc]=nd(R,qr)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),X3=function(){function w(R,D,F,oe,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,D=D||cf,we[IE]=a_(R,D),we[uf]=Vp(R,oe),we[Dc]=nd(R,Ee),F&&(we[wE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),FE=function(){function w(R,D,F,oe,Ee,we,Me){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Je=this;Je.ver=2,Je.url=df(R,F),Je[td]=cl(R,D)||cf,Je[uf]=Vp(R,Ee),Je[Dc]=nd(R,we),Me&&(Je.domProcessing=Me.domProcessing,Je[_E]=Me[_E],Je.networkConnect=Me.networkConnect,Je.perfTotal=Me.perfTotal,Je.receivedResponse=Me.receivedResponse,Je.sentRequest=Me.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),wJ=function(){function w(R,D){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=D}return s(w,"Data"),w}(),y_=aE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),_J=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,D,F,oe){oe===void 0&&(oe=!1);var Ee;return F&&R[UC]&&R[UC][F]&&!O(R[UC][F][D])?Ee=R[UC][F][D]:Ee=R[D],O(Ee)?oe:Ee},w}();function mf(w){var R="ai."+w+".";return function(D){return R+D}}s(mf,"_aiNameFunc");var ix=mf("application"),Ca=mf("device"),C_=mf("location"),ox=mf("operation"),x_=mf("session"),Yh=mf("user"),c1=mf("cloud"),ME=mf("internal"),Kh=function(w){Dh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(hE({applicationVersion:ix("ver"),applicationBuild:ix("build"),applicationTypeId:ix("typeId"),applicationId:ix("applicationId"),applicationLayer:ix("layer"),deviceId:Ca("id"),deviceIp:Ca("ip"),deviceLanguage:Ca("language"),deviceLocale:Ca("locale"),deviceModel:Ca("model"),deviceFriendlyName:Ca("friendlyName"),deviceNetwork:Ca("network"),deviceNetworkName:Ca("networkName"),deviceOEMName:Ca("oemName"),deviceOS:Ca("os"),deviceOSVersion:Ca("osVersion"),deviceRoleInstance:Ca("roleInstance"),deviceRoleName:Ca("roleName"),deviceScreenResolution:Ca("screenResolution"),deviceType:Ca("type"),deviceMachineName:Ca("machineName"),deviceVMName:Ca("vmName"),deviceBrowser:Ca("browser"),deviceBrowserVersion:Ca("browserVersion"),locationIp:C_("ip"),locationCountry:C_("country"),locationProvince:C_("province"),locationCity:C_("city"),operationId:ox("id"),operationName:ox("name"),operationParentId:ox("parentId"),operationRootId:ox("rootId"),operationSyntheticSource:ox("syntheticSource"),operationCorrelationVector:ox("correlationVector"),sessionId:x_("id"),sessionIsFirst:x_("isFirst"),sessionIsNew:x_("isNew"),userAccountAcquisitionDate:Yh("accountAcquisitionDate"),userAccountId:Yh("accountId"),userAgent:Yh("userAgent"),userId:Yh("id"),userStoreRegion:Yh("storeRegion"),userAuthUserId:Yh("authUserId"),userAnonymousUserAcquisitionDate:Yh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Yh("authUserAcquisitionDate"),cloudName:c1("name"),cloudRole:c1("role"),cloudRoleVer:c1("roleVer"),cloudRoleInstance:c1("roleInstance"),cloudEnvironment:c1("environment"),cloudLocation:c1("location"),cloudDeploymentUnit:c1("deploymentUnit"),internalNodeName:ME("nodeName"),internalSdkVersion:ME("sdkVersion"),internalAgentVersion:ME("agentVersion"),internalSnippet:ME("snippet"),internalSdkSrc:ME("sdkSrc")}));function Z3(w,R,D,F,oe,Ee){D=cl(F,D)||cf,(O(w)||O(R)||O(D))&&Ge("Input doesn't contain all required fields");var we="";w[P3]&&(we=w[P3],delete w[P3]);var Me={name:D,time:Up(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return O(oe)||ft(oe,function(Je,pt){Me.data[Je]=pt}),Me}s(Z3,"createTelemetryItem");var eB=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=Z3,w}(),SJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},RJ=new Kh;function y7(w){var R=null;if(le(Event))R=new Event(w);else{var D=Re();D&&D.createEvent&&(R=D.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(y7,"createDomEvent");function tB(w,R){qN(w,null,null,R)}s(tB,"_disableEvents");function C7(w){var R=Re(),D=mn(),F=!1,oe=[],Ee=1;D&&!O(D.onLine)&&!D.onLine&&(Ee=2);var we=0,Me=qr(),Je=rJ(Wp("OfflineListener"),w);try{if(on(qt())&&(F=!0),R){var pt=R.body||R;pt.ononline&&on(pt)&&(F=!0)}}catch{F=!1}function on(Di){var Qa=!1;return Di&&(Qa=B3(Di,"online",Qr,Je),Qa&&B3(Di,"offline",Tr,Je)),Qa}s(on,"_enableEvents");function Ir(){return Me}s(Ir,"_isOnline");function qr(){return!(we===2||Ee===2)}s(qr,"calCurrentState");function un(){var Di=qr();Me!==Di&&(Me=Di,Il(oe,function(Qa){var ax={isOnline:Me,rState:Ee,uState:we};try{Qa(ax)}catch{}}))}s(un,"listnerNoticeCheck");function En(Di){we=Di,un()}s(En,"setOnlineState");function Qr(){Ee=1,un()}s(Qr,"_setOnline");function Tr(){Ee=2,un()}s(Tr,"_setOffline");function hi(){var Di=qt();if(Di&&F){if(tB(Di,Je),R){var Qa=R.body||R;ie(Qa.ononline)||tB(Qa,Je)}F=!1}}s(hi,"_unload");function oo(Di){return oe.push(Di),{rm:s(function(){var Qa=oe.indexOf(Di);if(Qa>-1)return oe.splice(Qa,1)},"rm")}}return s(oo,"addListener"),{isOnline:Ir,isListening:s(function(){return F},"isListening"),unload:hi,addListener:oo,setOnlineState:En}}s(C7,"createOfflineListener");var kJ="AppInsightsPropertiesPlugin",nB="AppInsightsChannelPlugin",sx="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=sx,t.BreezeChannelIdentifier=nB,t.ConfigurationManager=_J,t.ConnectionStringParser=u_,t.ContextTagKeys=Kh,t.CtxTagKeys=RJ,t.DEFAULT_BREEZE_ENDPOINT=D3,t.DEFAULT_BREEZE_PATH=EE,t.Data=wJ,t.DisabledPropertyName=t_,t.DistributedTracingModes=cJ,t.Envelope=d_,t.Event=mJ,t.EventPersistence=SE,t.Exception=pf,t.Extensions=SJ,t.HttpMethod=GN,t.Metric=bJ,t.PageView=TJ,t.PageViewPerformance=FE,t.ProcessLegacy=n_,t.PropertiesPluginIdentifier=kJ,t.RemoteDependencyData=rx,t.RequestHeaders=HN,t.SampleRate=WN,t.SeverityLevel=y_,t.TelemetryItemCreator=eB,t.ThrottleMgr=pJ,t.Trace=X3,t.correlationIdCanIncludeCorrelationHeader=jh,t.correlationIdGetCorrelationContext=JN,t.correlationIdGetCorrelationContextValue=XN,t.correlationIdGetPrefix=G3,t.correlationIdSetPrefix=W3,t.createDistributedTraceContextFromTrace=H3,t.createDomEvent=y7,t.createOfflineListener=C7,t.createTelemetryItem=Z3,t.createTraceParent=DC,t.dataSanitizeException=O3,t.dataSanitizeId=jC,t.dataSanitizeInput=U3,t.dataSanitizeKey=Q3,t.dataSanitizeKeyAndAddUniqueness=M3,t.dataSanitizeMeasurements=nd,t.dataSanitizeMessage=a_,t.dataSanitizeProperties=Vp,t.dataSanitizeString=cl,t.dataSanitizeUrl=df,t.dateTimeUtilsDuration=lJ,t.dateTimeUtilsNow=aJ,t.dsPadNumber=jN,t.findAllScripts=S3,t.findW3cTraceParent=_3,t.formatTraceParent=o1,t.getExtensionByName=IJ,t.isBeaconApiSupported=Fh,t.isCrossOriginError=zh,t.isInternalApplicationInsightsEndpoint=KN,t.isSampledFlag=Kw,t.isValidSpanId=NC,t.isValidTraceId=PC,t.isValidTraceParent=LC,t.msToTimeSpan=J3,t.parseConnectionString=c_,t.parseTraceParent=ed,t.strNotSpecified=cf,t.stringToBoolOrDefault=EJ,t.urlGetAbsoluteUrl=oJ,t.urlGetCompleteUrl=$N,t.urlGetPathName=sJ,t.urlParseFullHost=$p,t.urlParseHost=zN,t.urlParseUrl=VC,t.utlCanUseLocalStorage=l_,t.utlCanUseSessionStorage=zp,t.utlDisableStorage=RE,t.utlEnableStorage=uJ,t.utlGetLocalStorage=t7,t.utlGetSessionStorage=r7,t.utlGetSessionStorageKeys=XC,t.utlRemoveSessionStorage=i7,t.utlRemoveStorage=rd,t.utlSetLocalStorage=n7,t.utlSetSessionStorage=dJ,t.utlSetStoragePrefix=kE})});var C2e=W((EM,y2e)=>{f();(function(t,e){typeof EM=="object"&&typeof y2e<"u"?e(EM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(EM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function n(A,x){return A[x]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),B=n(k,c),N=e(Math),U=e(Array),re=n(U,c),me=n(re,"slice");function ae(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(ae,"safe");function H(A,x){var T=ae(A);return T.e?x:T.v}s(H,"safeGet");var G;function ue(A){return function(x){return typeof x===A}}s(ue,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&$(T)===x)}}s(ie,"_createObjIs");function $(A){return _[b].call(A)}s($,"objToString");function O(A){return typeof A===d||A===d}s(O,"isUndefined");function Y(A){return!te(A)}s(Y,"isStrictUndefined");function K(A){return A===i||O(A)}s(K,"isNullOrUndefined");function le(A){return A===i||!te(A)}s(le,"isStrictNullOrUndefined");function te(A){return!!A||A!==r}s(te,"isDefined");function pe(A){return!G&&(G=["string","number","boolean",d,"symbol","bigint"]),A!==l&&G.indexOf(A)!==-1}s(pe,"isPrimitiveType");var he=ue("string"),Qe=ue(a);function ke(A){return!A&&K(A)?!1:!!A&&typeof A===l}s(ke,"isObject");var Ze=n(U,"isArray"),Fe=ie("Date"),ft=ue("number"),It=ue("boolean"),yt=ie("Error");function vt(A){return!!(A&&A.then&&Qe(A.then))}s(vt,"isPromiseLike");function ce(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(ce,"isTruthy");var Oe=n(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(n(E,"hasOwn"),Z);function Z(A,x){return ye(A,x)||!!Oe(A,x)}s(Z,"polyObjHasOwn");function ne(A,x,T){if(A&&ke(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(ne,"objForEachKey");var Ge={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Pe(A){var x={};if(x[Ge.c]=!0,x[Ge.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return ne(A,function(S,P){x[Ge[S]]=Y(P)?x[Ge[S]]:P}),x}s(Pe,"_createProp");var be=n(E,"defineProperty");function ze(A,x,T){return be(A,x,Pe(T))}s(ze,"objDefine");function it(A,x,T,S,P){var L={};return ne(A,function(Q,X){ht(L,Q,x?X:Q),ht(L,X,T?X:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function ht(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(ht,"_assignMapValue");var Ot=e(k),cn="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===cn&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:r),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(P){T=" - "+Lt(P,x)}return S+": "+T}s(Lt,"dumpObj");function Hn(A){throw new Error(A)}s(Hn,"throwError");function Yn(A){throw new TypeError(A)}s(Yn,"throwTypeError");var pr=n(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function He(A){return A[u]||i}s(He,"_getProto");var ut=n(E,"assign"),At=n(E,"keys");function Xt(A){return pr&&ne(A,function(x,T){(Ze(T)||ke(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(pr,Ae),yn=e(n(E,"getPrototypeOf"),He);function vn(A){return it(A,1,0,Gt)}s(vn,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function nn(A){var x={};return ne(A,function(T,S){ht(x,T,S[1]),ht(x,S[0],S[1])}),Gt(x)}s(nn,"createSimpleMap");function Jt(A){return nn(A)}s(Jt,"createTypeMap");var wn=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Mn="__tsUtils$gblCfg",Kn;function Ur(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(Ur,"_getGlobalValue");function Yr(){if(!Kn){var A=ae(Ur).v||{};Kn=A[Mn]=A[Mn]||{}}return Kn}s(Yr,"_getGlobalConfig");var Fr=jr;function jr(A,x,T){var S=x?x[A]:i;return function(P){var L=(P?P[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(P,L?me[v](Q,1):Q)}Yn('"'+Ot(A)+'" not defined for '+Lt(P))}}s(jr,"_unwrapFunctionWithPoly");function nr(A){return function(x){return x[A]}}s(nr,"_unwrapProp");var Vr=n(N,"min"),_e=n(N,"max"),q=Fr("slice",B),ge=Fr("substring",B),ve=jr("substr",B,ee);function ee(A,x,T){return K(A)&&Yn("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),O(T)?q(A,x):q(A,x,x+T))}s(ee,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var Re="_urid",$e;function qt(){if(!$e){var A=Yr();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var Rn;function mn(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(mn,"polyNewSymbol");function ur(A){var x=qt();if(!tt(x.k,A)){var T=mn(A),S=At(x.s).length;T[Re]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[Re]()]=Ot(A)}return x.k[A]}s(ur,"polySymbolFor");function mr(A){!Rn&&(Rn={});var x,T=wn[A];return T&&(x=Rn[T]=Rn[T]||mn(m+"."+T)),x}s(mr,"polyGetKnownSymbol");var bn;function Ht(){bn=Yr()}s(Ht,"_initTestHooks");function Mr(A){var x={};return!bn&&Ht(),x.b=bn.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return bn.lzy||be(x,"v",{value:T}),x.b=bn.lzy,T},"get")}),x}s(Mr,"getLazy");function js(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(js,"createCachedValue");var Lp="window",Il;function Fp(A,x){var T;return function(){return!bn&&Ht(),(!T||bn.lzy)&&(T=js(ae(A,x).v)),T.v}}s(Fp,"_getGlobalInstFn");function tf(A){return!bn&&Ht(),(!Il||A===!1||bn.lzy)&&(Il=js(ae(Ur).v||i)),Il.v}s(tf,"getGlobal");function ia(A,x){var T;if(!Il||x===!1?T=tf(x):T=Il.v,T&&T[A])return T[A];if(A===Lp)try{return window}catch{}return i}s(ia,"getInst");function Ih(){return!!iC()}s(Ih,"hasDocument");var iC=Fp(ia,["document"]);function r3(){return!!Mp()}s(r3,"hasWindow");var Mp=Fp(ia,[Lp]);function PK(){return!!Th()}s(PK,"hasNavigator");var Th=Fp(ia,["navigator"]),NK=Fp(function(){return!!ae(function(){return process&&(process.versions||{}).node}).v}),GA,i3;function vw(){return GA=js(ae(ia,[m]).v),GA}s(vw,"_initSymbol");function LK(A){var x=(bn.lzy?0:GA)||vw();return x.v?x.v[A]:r}s(LK,"_getSymbolKey");function Bc(){return!!wh()}s(Bc,"hasSymbol");function wh(){return!bn&&Ht(),((bn.lzy?0:GA)||vw()).v}s(wh,"getSymbol");function iE(A,x){var T=wn[A];!bn&&Ht();var S=(bn.lzy?0:GA)||vw();return S.v?S.v[T||A]:x?r:mr(A)}s(iE,"getKnownSymbol");function HA(A,x){!bn&&Ht();var T=(bn.lzy?0:GA)||vw();return T.v?T.v(A):x?i:mn(A)}s(HA,"newSymbol");function oE(A){return!bn&&Ht(),i3=(bn.lzy?0:i3)||js(ae(LK,["for"]).v),(i3.v||ur)(A)}s(oE,"symbolFor");function _h(A){return!!A&&Qe(A.next)}s(_h,"isIterator");function bw(A){return!le(A)&&Qe(A[iE(3)])}s(bw,"isIterable");var sE;function o3(A,x,T){if(A&&(_h(A)||(!sE&&(sE=js(iE(3))),A=A[sE.v]?A[sE.v]():i),_h(A))){var S=r,P=r;try{for(var L=0;!(P=A.next()).done&&x[v](T||A,P.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(P=i,A.throw(S))}finally{try{P&&!P.done&&A.return&&A.return(P)}finally{if(S)throw S.e}}}}s(o3,"iterForOf");function oC(A,x,T){return A.apply(x,T)}s(oC,"fnApply");function sC(A,x){return!O(x)&&A&&(Ze(x)?oC(A.push,A,x):_h(x)||bw(x)?o3(x,function(T){A.push(T)}):A.push(x)),A}s(sC,"arrAppend");function qn(A,x,T){if(A)for(var S=A[g]>>>0,P=0;P<S&&!(P in A&&x[v](T||A,A[P],P,A)===-1);P++);}s(qn,"arrForEach");var mu=Fr("indexOf",re),jA=Fr("map",re);function aC(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(aC,"arrSlice");var FK=Fr("reduce",re),Sh=e(n(E,"create"),MK);function MK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&Yn("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(MK,"polyObjCreate");var s3;function aE(A,x){var T=E.setPrototypeOf||function(S,P){var L;!s3&&(s3=js((L={},L[u]=[],L instanceof Array))),s3.v?S[u]=P:ne(P,function(Q,X){return S[Q]=X})};return T(A,x)}s(aE,"objSetPrototypeOf");function QK(A,x,T){ae(ze,[x,y,{v:A,c:!0,e:!1}]),x=aE(x,T);function S(){this[p]=x,ae(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?Sh(T):(S[c]=T[c],new S),x}s(QK,"_createCustomError");function lE(A,x){x&&(A[y]=x)}s(lE,"_setName");function Ma(A,x,T){var S=T||Error,P=S[c][y],L=Error.captureStackTrace;return QK(A,function(){var Q=this,X=arguments;try{ae(lE,[S,A]);var se=oC(S,Q,me[v](X))||Q;if(se!==Q){var Ce=yn(Q);Ce!==yn(se)&&aE(se,Ce)}return L&&L(se,Q[p]),x&&x(se,X),se}finally{ae(lE,[S,P])}},S)}s(Ma,"createCustomError");function Rh(){return(Date.now||cE)()}s(Rh,"utcNow");function cE(){return new Date().getTime()}s(cE,"polyUtcNow");function gN(A){return s(function(T){return K(T)&&Yn("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(gN,"_createTrimFn");var OK=gN(/^\s+|(?=\s)\s+$/g),ji=jr("trim",B,OK),VA=n(N,"floor"),kh,a3,uE;function hu(A){if(!A||typeof A!==l)return!1;uE||(uE=r3()?Mp():!0);var x=!1;if(A!==uE){a3||(kh=Function[c][b],a3=kh[v](E));try{var T=yn(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&kh[v](T)===a3))}catch{}}return x}s(hu,"isPlainObject");function AN(A){return A.value&&Ew(A),!0}s(AN,"_defaultDeepCopyHandler");var yN=[lC,Ew,xN,Bh];function l3(A,x,T,S){var P;return qn(A,function(L){if(L.k===x)return P=L,-1}),P||(P={k:x,v:x},A.push(P),S(P)),P.v}s(l3,"_getSetVisited");function $A(A,x,T,S){var P=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},X=typeof x,se=!1,Ce=x===i;Ce||(x&&X===l?se=hu(x):Ce=pe(X));var Te={type:X,isPrim:Ce,isPlain:se,value:x,result:x,path:L,origin:T.src,copy:s(function(Ne,Ye){return $A(A,Ne,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Ne,Ye){return c3(A,Ne,Ye,Q)},"copyTo")};return Te.isPrim?P&&P[v](T,Te)?Te.result:x:l3(A,x,L,function(Ne){ze(Te,"result",{g:s(function(){return Ne.v},"g"),s:s(function(je){Ne.v=je},"s")});for(var Ye=0,Le=P;!(Le||(Ye<yN.length?yN[Ye++]:AN))[v](T,Te);)Le=i})}s($A,"_deepCopy");function c3(A,x,T,S){if(!K(T))for(var P in T)x[P]=$A(A,T[P],S,P);return x}s(c3,"_copyProps");function CN(A,x,T){var S={handler:T,src:x,path:[]};return c3([],A,x,S)}s(CN,"objCopyProps");function u3(A,x){var T={handler:x,src:A};return $A([],A,T)}s(u3,"objDeepCopy");function lC(A){var x=A.value;if(Ze(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(lC,"arrayDeepCopyHandler");function Bh(A){var x=A.value;return Fe(x)?(A.result=new Date(x.getTime()),!0):!1}s(Bh,"dateDeepCopyHandler");function xN(A){return A.type===a}s(xN,"functionDeepCopyHandler");function Ew(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(Ew,"plainObjDeepCopyHandler");function d3(A,x){return qn(x,function(T){CN(A,T)}),A}s(d3,"_doExtend");function Iw(A,x,T,S,P,L,Q){return d3(u3(A)||{},me[v](arguments))}s(Iw,"deepExtend");var UK=nr(g),qK=n(N,"round"),vN=jr("endsWith",B,WK);function WK(A,x,T){he(A)||Yn("'"+Lt(A)+"' is not a string");var S=he(x)?x:Ot(x),P=!O(T)&&T<A[g]?T:A[g];return ge(A,P-S[g],P)===S}s(WK,"polyStrEndsWith");var Qp=Fr("indexOf",B),Tw="ref",f3="unref",ww="hasRef",GK="enabled";function _w(A,x,T){var S=!0,P=A?x(i):i,L;function Q(){return S=!1,P&&P[f3]&&P[f3](),L}s(Q,"_unref");function X(){P&&T(P),P=i}s(X,"_cancel");function se(){return P=x(P),S||Q(),L}s(se,"_refresh");function Ce(Te){!Te&&P&&X(),Te&&!P&&se()}return s(Ce,"_setEnabled"),L={cancel:X,refresh:se},L[ww]=function(){return P&&P[ww]?P[ww]():S},L[Tw]=function(){return S=!0,P&&P[Tw]&&P[Tw](),L},L[f3]=Q,L=be(L,GK,{get:s(function(){return!!P},"get"),set:Ce}),{h:L,dn:s(function(){P=i},"dn")}}s(_w,"_createTimerHandler");function Sw(A,x,T){var S=Ze(x),P=S?x.length:0,L=(P>0?x[0]:S?r:x)||setTimeout,Q=(P>1?x[1]:r)||clearTimeout,X=T[0];T[0]=function(){se.dn(),oC(X,r,me[v](arguments))};var se=_w(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;oC(Q,r,[Ce])}return oC(L,r,T)},function(Ce){oC(Q,r,[Ce])});return se.h}s(Sw,"_createTimeoutWith");function Dh(A,x){return Sw(!0,r,me[v](arguments))}s(Dh,"scheduleTimeout");function Rw(A,x){return Sw(!1,r,me[v](arguments))}s(Rw,"createTimeout");var zA,Ku="constructor",Ju="prototype",YA="function",cC="_dynInstFuncs",Ph="_isDynProxy",uC="_dynClass",p3="_dynCls$",KA="_dynInstChk",dC=KA,m3="_dfOpts",kw="_unknown_",fC="__proto__",dE="_dyn"+fC,Bw="__dynProto$Gbl",pC="_dynInstProto",mC="useBaseInst",fE="setInstFuncs",JA=Object,hC=JA.getPrototypeOf,h3=JA.getOwnPropertyNames,Dw=tf(),gC=Dw[Bw]||(Dw[Bw]={o:(zA={},zA[fE]=!0,zA[mC]=!0,zA),n:1e3});function AC(A){return A&&(A===JA[Ju]||A===Array[Ju])}s(AC,"_isObjectOrArrayPrototype");function Op(A){return AC(A)||A===Function[Ju]}s(Op,"_isObjectArrayOrFunctionPrototype");function nf(A){var x;if(A){if(hC)return hC(A);var T=A[fC]||A[Ju]||(A[Ku]?A[Ku][Ju]:null);x=A[dE]||T,ye(A,dE)||(delete A[pC],x=A[dE]=A[pC]||A[dE],A[pC]=T)}return x}s(nf,"_getObjProto");function yC(A,x){var T=[];if(h3)T=h3(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var P=0;P<T.length;P++)x(T[P])}s(yC,"_forEachProp");function CC(A,x,T){return x!==Ku&&typeof A[x]===YA&&(T||ye(A,x))&&x!==fC&&x!==Ju}s(CC,"_isDynamicCandidate");function Pw(A){Yn("DynamicProto: "+A)}s(Pw,"_throwTypeError");function g3(A){var x=Sh(null);return yC(A,function(T){!x[T]&&CC(A,T,!1)&&(x[T]=A[T])}),x}s(g3,"_getInstanceFuncs");function A3(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(A3,"_hasVisited");function HK(A,x,T,S){function P(se,Ce,Te){var Ne=Ce[Te];if(Ne[Ph]&&S){var Ye=se[cC]||{};Ye[dC]!==!1&&(Ne=(Ye[Ce[uC]]||{})[Te]||Ne)}return function(){return Ne.apply(se,arguments)}}s(P,"_instFuncProxy");var L=Sh(null);yC(T,function(se){L[se]=P(x,T,se)});for(var Q=nf(A),X=[];Q&&!Op(Q)&&!A3(X,Q);)yC(Q,function(se){!L[se]&&CC(Q,se,!hC)&&(L[se]=P(x,Q,se))}),X.push(Q),Q=nf(Q);return L}s(HK,"_getBaseFuncs");function jK(A,x,T,S){var P=null;if(A&&ye(T,uC)){var L=A[cC]||Sh(null);if(P=(L[T[uC]]||Sh(null))[x],P||Pw("Missing ["+x+"] "+YA),!P[KA]&&L[dC]!==!1){for(var Q=!ye(A,x),X=nf(A),se=[];Q&&X&&!Op(X)&&!A3(se,X);){var Ce=X[x];if(Ce){Q=Ce===S;break}se.push(X),X=nf(X)}try{Q&&(A[x]=P),P[KA]=1}catch{L[dC]=!1}}}return P}s(jK,"_getInstFunc");function VK(A,x,T){var S=x[A];return S===T&&(S=nf(x)[A]),typeof S!==YA&&Pw("["+A+"] is not a "+YA),S}s(VK,"_getProtoFunc");function $K(A,x,T,S,P){function L(se,Ce){var Te=s(function(){var Ne=jK(this,Ce,se,Te)||VK(Ce,se,Te);return Ne.apply(this,arguments)},"dynProtoProxy");return Te[Ph]=1,Te}if(s(L,"_createDynamicPrototype"),!AC(A)){var Q=T[cC]=T[cC]||Sh(null);if(!AC(Q)){var X=Q[x]=Q[x]||Sh(null);Q[dC]!==!1&&(Q[dC]=!!P),AC(X)||yC(T,function(se){CC(T,se,!1)&&T[se]!==S[se]&&(X[se]=T[se],delete T[se],(!ye(A,se)||A[se]&&!A[se][Ph])&&(A[se]=L(A,se)))})}}}s($K,"_populatePrototype");function y3(A,x){if(hC){for(var T=[],S=nf(x);S&&!Op(S)&&!A3(T,S);){if(S===A)return!0;T.push(S),S=nf(S)}return!1}return!0}s(y3,"_checkPrototype");function pE(A,x){return ye(A,Ju)?A.name||x||kw:((A||{})[Ku]||{}).name||x||kw}s(pE,"_getObjName");function nc(A,x,T,S){ye(A,Ju)||Pw("theClass is an invalid class definition.");var P=A[Ju];y3(P,x)||Pw("["+pE(A)+"] not in hierarchy of ["+pE(x)+"]");var L=null;ye(P,uC)?L=P[uC]:(L=p3+pE(A,"_")+"$"+gC.n,gC.n++,P[uC]=L);var Q=nc[m3],X=!!Q[mC];X&&S&&S[mC]!==void 0&&(X=!!S[mC]);var se=g3(x),Ce=HK(P,x,se,X);T(x,Ce);var Te=!!hC&&!!Q[fE];Te&&S&&(Te=!!S[fE]),$K(P,L,x,se,Te!==!1)}s(nc,"dynamicProto"),nc[m3]=gC.o;var Vs="function",bN="object",EN="undefined",mE="prototype",C3=Object,x3=C3[mE];(tf()||{}).Symbol,(tf()||{}).Reflect;var Nw="hasOwnProperty",IN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var P in x)x3[Nw].call(x,P)&&(A[P]=x[P])}return A},"__objAssignFnImpl"),Up=ut||IN,Nh=s(function(A,x){return Nh=C3.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)S[Nw](P)&&(T[P]=S[P])},Nh(A,x)},"extendStaticsFn");function hE(A,x){typeof x!==Vs&&x!==null&&Yn("Class extends value "+String(x)+" is not a constructor or null"),Nh(A,x);function T(){this.constructor=A}s(T,"__"),A[mE]=x===null?Sh(x):(T[mE]=x[mE],new T)}s(hE,"__extendsFn");function TN(A,x){for(var T=0,S=x.length,P=A.length;T<S;T++,P++)A[P]=x[T];return A}s(TN,"__spreadArrayFn");var Lw=vn,zK=Jt,Lh=Lw({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),xC="toLowerCase",$r="length",vC="warnToConsole",XA="throwInternal",qp="watch",Fw="apply",Vi="push",bC="splice",Aa="logger",EC="cancel",gE="initialize",Fh="identifier",AE="removeNotificationListener",Mw="addNotificationListener",rf="isInitialized",IC="value",zd="getNotifyMgr",TC="getPlugin",Mh="name",Tl="processNext",wC="getProcessTelContext",of="enabled",wN="stopPollingInternalLogs",ZA="unload",Qw="onComplete",_C="version",_N="loggingLevelConsole",e1="createNew",sf="teardown",Ow="messageId",t1="message",af="diagLog",Uw="_doTeardown",Wp="update",lf="getNext",Qh="setNextPlugin",qw="userAgent",Oh="split",Uh="replace",rc="type",v3="evtName",yE="status",b3="getAllResponseHeaders",E3="isChildEvt",SC="data",qh="getCtx",Yd="setCtx",SN="itemsReceived",Gp="urlString",I3="headers",Hp="timeout",RN="traceFlags",RC;function T3(A,x){RC||(RC=Ma("AggregationError",function(S,P){P[$r]>1&&(S.errors=P[1])}));var T=A||"One or more errors occurred.";throw qn(x,function(S,P){T+=`
`.concat(P," > ").concat(Lt(S))}),new RC(T,x||[])}s(T3,"throwAggregationError");var n1="Promise",r1="rejected";function Xu(A,x){return kN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:r1,rejected:!0,reason:T}):T})}s(Xu,"doAwaitResponse");function kN(A,x,T,S){var P=A;try{if(vt(A))(x||T)&&(P=A.then(x,T));else try{x&&(P=x(A))}catch(L){if(T)P=T(L);else throw L}}finally{S&&YK(P,S)}return P}s(kN,"doAwait");function YK(A,x){var T=A;return x&&(vt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(YK,"doFinally");var BN=["pending","resolving","resolved",r1],DN="dispatchEvent",CE;function PN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(PN,"_hasInitEventFn");function Ww(A,x,T,S){var P=iC();!CE&&(CE=js(!!ae(PN,[P]).v));var L=CE.v?P.createEvent("Event"):S?new Event(x):{};if(T&&T(L),CE.v&&L.initEvent(x,!1,!0),L&&A[DN])A[DN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var X=ia("console");X&&(X.error||X.log)(x,Lt(L))}}}s(Ww,"emitEvent");var NN="unhandledRejection",KK=NN.toLowerCase(),kC=10,Gw;function LN(A){return Qe(A)?A.toString():Lt(A)}s(LN,"dumpFnObj");function FN(A,x,T){var S=aC(arguments,3),P=0,L=!1,Q,X=[],se=!1,Ce=null,Te;function Ne(Vt,hn){try{se=!0,Ce&&Ce.cancel(),Ce=null;var Wr=A(function(xi,vi){X.push(function(){try{var ho=P===2?Vt:hn,dr=O(ho)?Q:Qe(ho)?ho(Q):ho;vt(dr)?dr.then(xi,vi):ho?xi(dr):P===3?vi(dr):xi(dr)}catch(Qn){vi(Qn)}}),L&&lt()},S);return Wr}finally{}}s(Ne,"_then");function Ye(Vt){return Ne(void 0,Vt)}s(Ye,"_catch");function Le(Vt){var hn=Vt,Wr=Vt;return Qe(Vt)&&(hn=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Wr=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Ne(hn,Wr)}s(Le,"_finally");function je(){return BN[P]}s(je,"_strState");function lt(){if(X.length>0){var Vt=X.slice();X=[],se=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,hn){return function(Wr){if(P===hn){if(Vt===2&&vt(Wr)){P=1,Wr.then(et(2,1),et(3,1));return}P=Vt,L=!0,Q=Wr,lt(),!se&&Vt===3&&!Ce&&(Ce=Dh(gt,kC))}}}s(et,"_createSettleIfFn");function gt(){if(!se)if(se=!0,NK())process.emit(NN,Q,Te);else{var Vt=Mp()||tf();!Gw&&(Gw=js(ae(ia,[n1+"RejectionEvent"]).v)),Ww(Vt,KK,function(hn){return ze(hn,"promise",{g:s(function(){return Te},"g")}),hn.reason=Q,hn},!!Gw.v)}}s(gt,"_notifyUnhandledRejection"),Te={then:Ne,catch:Ye,finally:Le},be(Te,"state",{get:je}),Bc()&&(Te[iE(11)]="IPromise");function Nt(){return"IPromise "+je()+(L?" - "+LN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Qe(T)||Yn(n1+": executor is not a function - "+LN(T));var hn=et(3,0);try{T.call(Te,et(2,0),hn)}catch(Wr){hn(Wr)}},"_initialize")(),Te}s(FN,"_createPromise");function JK(A){return function(x){var T=aC(arguments,1);return A(function(S,P){try{var L=[],Q=1;o3(x,function(X,se){X&&(Q++,kN(X,function(Ce){L[se]=Ce,--Q===0&&S(L)},P))}),Q--,Q===0&&S(L)}catch(X){P(X)}},T)}}s(JK,"_createAllPromise");function XK(A){return js(function(x){var T=aC(arguments,1);return A(function(S,P){var L=[],Q=1;function X(se,Ce){Q++,Xu(se,function(Te){Te.rejected?L[Ce]={status:r1,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(X,"processItem");try{Ze(x)?qn(x,X):bw(x)?o3(x,X):Yn("Input is not an iterable"),Q--,Q===0&&S(L)}catch(se){P(se)}},T)})}s(XK,"_createAllSettledPromise");function MN(A){qn(A,function(x){try{x()}catch{}})}s(MN,"syncItemProcessor");function QN(A){var x=ft(A)?A:0;return function(T){Dh(function(){MN(T)},x)}}s(QN,"timeoutItemProcessor");function Hw(A,x){return FN(Hw,QN(x),A,x)}s(Hw,"createAsyncPromise");var jw;function ZK(A,x){!jw&&(jw=js(ae(ia,[n1]).v||null));var T=jw.v;if(!T)return Hw(A);Qe(A)||Yn(n1+": executor is not a function - "+Lt(A));var S=0;function P(){return BN[S]}s(P,"_strState");var L=new T(function(Q,X){function se(Te){S=2,Q(Te)}s(se,"_resolve");function Ce(Te){S=3,X(Te)}s(Ce,"_reject"),A(se,Ce)});return be(L,"state",{get:P}),L}s(ZK,"createNativePromise");var Vw;function $w(A){return FN($w,MN,A)}s($w,"createSyncPromise");function gu(A,x){return!Vw&&(Vw=XK($w)),Vw.v(A,x)}s(gu,"createSyncAllSettledPromise");var zw;function BC(A,x){return!zw&&(zw=js(ZK)),zw.v.call(this,A,x)}s(BC,"createPromise");var w3=JK(BC),Zu=void 0,mi="",jp="channels",ya="core",Kd="createPerfMgr",Yw="disabled",i1="extensionConfig",DC="extensions",ed="processTelemetry",PC="priority",NC="eventsSent",LC="eventsDiscarded",Kw="eventsSendRequest",o1="perfEvent",_3="offlineEventsStored",S3="offlineBatchSent",Jw="offlineBatchDrop",xE="getPerfMgr",Xw="domain",Zw="path",ON="Not dynamic - ",R3=/-([a-z])/g,eJ=/([^\w\d_$])/g,tJ=/^(\d+[\w\d_$])/;function e_(A){return!K(A)}s(e_,"isNotNullOrUndefined");function FC(A){var x=A;return x&&he(x)&&(x=x[Uh](R3,function(T,S){return S.toUpperCase()}),x=x[Uh](eJ,"_"),x=x[Uh](tJ,function(T,S){return"_"+S})),x}s(FC,"normalizeJsName");function wl(A,x){return A&&x?Qp(A,x)!==-1:!1}s(wl,"strContains");function vE(A){return A&&A.toISOString()||""}s(vE,"toISOString");function ll(A){return yt(A)?A[Mh]:mi}s(ll,"getExceptionName");function Wh(A,x,T,S,P){var L=T;return A&&(L=A[x],L!==T&&(!P||P(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Wh,"setValue");function UN(A,x,T){var S;return A?(S=A[x],!S&&K(S)&&(S=O(T)?{}:T,A[x]=S)):S=O(T)?{}:T,S}s(UN,"getSetValue");function nJ(A,x){var T=null,S=null;return Qe(A)?T=A:S=A,function(){var P=arguments;if(T&&(S=T()),S)return S[x][Fw](S,P)}}s(nJ,"_createProxyFunction");function bE(A,x,T,S,P){A&&x&&T&&(P!==!1||O(A[x]))&&(A[x]=nJ(T,S))}s(bE,"proxyFunctionAs");function k3(A,x,T,S){return A&&x&&ke(A)&&Ze(T)&&qn(T,function(P){he(P)&&bE(A,P,x,P,S)}),A}s(k3,"proxyFunctions");function rJ(A){return function(){function x(){var T=this;A&&ne(A,function(S,P){T[S]=P})}return s(x,"class_1"),x}()}s(rJ,"createClassFromInterface");function B3(A){return A&&ut&&(A=C3(ut({},A))),A}s(B3,"optimizeObject");function qN(A,x,T,S,P,L){var Q=arguments,X=Q[0]||{},se=Q[$r],Ce=!1,Te=1;for(se>0&&It(X)&&(Ce=X,X=Q[Te]||{},Te++),ke(X)||(X={});Te<se;Te++){var Ne=Q[Te],Ye=Ze(Ne),Le=ke(Ne);for(var je in Ne){var lt=Ye&&je in Ne||Le&&tt(Ne,je);if(lt){var et=Ne[je],gt=void 0;if(Ce&&et&&((gt=Ze(et))||hu(et))){var Nt=X[je];gt?Ze(Nt)||(Nt=[]):hu(Nt)||(Nt={}),et=qN(Ce,Nt,et)}et!==void 0&&(X[je]=et)}}}return X}s(qN,"objExtend");function t_(A){try{return A.responseText}catch{}return null}s(t_,"getResponseText");function WN(A,x){return A?"XDomainRequest,Response:"+t_(A)||"":x}s(WN,"formatErrorMessageXdr");function n_(A,x){return A?"XMLHttpRequest,Status:"+A[yE]+",Response:"+t_(A)||A.response||"":x}s(n_,"formatErrorMessageXhr");function GN(A,x){return x&&(ft(x)?A=[x].concat(A):Ze(x)&&(A=x.concat(A))),A}s(GN,"prependTransports");var D3="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",EE="withCredentials",cf="timeout";function P3(A,x,T,S,P,L){S===void 0&&(S=!1),P===void 0&&(P=!1);function Q(se,Ce,Te){try{se[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var X=new XMLHttpRequest;return S&&Q(X,D3,S),T&&Q(X,EE,T),X.open(A,x,!P),T&&Q(X,EE,T),!P&&L&&Q(X,cf,L),X}s(P3,"openXhr");function HN(A){var x={};if(he(A)){var T=ji(A)[Oh](/[\r\n]+/);qn(T,function(S){if(S){var P=S.indexOf(": ");if(P!==-1){var L=ji(S.substring(0,P))[xC](),Q=ji(S.substring(P+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(HN,"convertAllHeadersToMap");function Gh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(Gh,"_appendHeader");var Er="kill-duration",MC="kill-duration-seconds",s1="time-delta-millis";function a1(A,x){var T={};return A[b3]?T=HN(A[b3]()):x&&(T=Gh(T,A,s1),T=Gh(T,A,Er),T=Gh(T,A,MC)),T}s(a1,"_getAllResponseHeaders");var N3="documentMode",IE="location",QC="console",r_="JSON",L3="crypto",i_="msCrypto",OC="msie",l1="trident/",F3="XMLHttpRequest",td=null,UC=null,uf=!1,Dc=null,qC=null;function TE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[mE];S&&(T=x in S)}}catch{}if(!T)try{var P=new A;T=!O(P[x])}catch{}}return T}s(TE,"_hasProperty");function WC(A){if(A&&uf){var x=ia("__mockLocation");if(x)return x}return typeof location===bN&&location?location:ia(IE)}s(WC,"getLocation");function wE(){return typeof console!==EN?console:ia(QC)}s(wE,"getConsole");function GC(){return!!(typeof JSON===bN&&JSON||ia(r_)!==null)}s(GC,"hasJSON");function Au(){return GC()?JSON||ia(r_):null}s(Au,"getJSON");function o_(){return ia(L3)}s(o_,"getCrypto");function s_(){return ia(i_)}s(s_,"getMsCrypto");function Jd(){var A=Th();if(A&&(A[qw]!==UC||td===null)){UC=A[qw];var x=(UC||mi)[xC]();td=wl(x,OC)||wl(x,l1)}return td}s(Jd,"isIE");function HC(A){if(A===void 0&&(A=null),!A){var x=Th()||{};A=x?(x.userAgent||mi)[xC]():mi}var T=(A||mi)[xC]();if(wl(T,OC)){var S=iC()||{};return _e(parseInt(T[Oh](OC)[1]),S[N3]||0)}else if(wl(T,l1)){var P=parseInt(T[Oh](l1)[1]);if(P)return P+4}return null}s(HC,"getIEVersion");function Hh(A){return(qC===null||A===!1)&&(qC=PK()&&!!Th().sendBeacon),qC}s(Hh,"isBeaconsSupported");function _E(A){var x=!1;try{x=!!ia("fetch");var T=ia("Request");x&&A&&T&&(x=TE(T,"keepalive"))}catch{}return x}s(_E,"isFetchSupported");function M3(){return Dc===null&&(Dc=typeof XDomainRequest!==EN,Dc&&Q3()&&(Dc=Dc&&!TE(ia(F3),"withCredentials"))),Dc}s(M3,"useXDomainRequest");function Q3(){var A=!1;try{var x=ia(F3);A=!!x}catch{}return A}s(Q3,"isXhrSupported");var cl=4294967296,df=4294967295,a_=123456789,O3=987654321,Vp=!1,nd=a_,jC=O3;function U3(A){A<0&&(A>>>=0),nd=a_+A&df,jC=O3-A&df,Vp=!0}s(U3,"_mwcSeed");function jN(){try{var A=Rh()&2147483647;U3((Math.random()*cl^A)+A)}catch{}}s(jN,"_autoSeedMwc");function q3(A){var x=0,T=o_()||s_();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&df),x===0&&Jd()&&(Vp||jN(),x=VN()&df),x===0&&(x=VA(cl*Math.random()|0)),A||(x>>>=0),x}s(q3,"random32");function VN(A){jC=36969*(jC&65535)+(jC>>16)&df,nd=18e3*(nd&65535)+(nd>>16)&df;var x=(jC<<16)+(nd&65535)>>>0&df|0;return A||(x>>>=0),x}s(VN,"mwcRandom32");function iJ(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=q3()>>>0,S=0,P=mi;P[$r]<A;)S++,P+=x.charAt(T&63),T>>>=6,S===5&&(T=(q3()<<2&4294967295|T&3)>>>0,S=0);return P}s(iJ,"newId");var VC="3.3.6",oJ="."+iJ(6),sJ=0;function $N(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s($N,"_canAcceptData");function zN(A,x){var T=x[A.id];if(!T){T={};try{$N(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(zN,"_getCache");function $p(A,x){return x===void 0&&(x=!1),FC(A+sJ+++(x?"."+VC:mi)+oJ)}s($p,"createUniqueNamespace");function YN(A){var x={id:$p("_aiData-"+(A||mi)+"."+VC),accept:s(function(T){return $N(T)},"accept"),get:s(function(T,S,P,L){var Q=T[x.id];return Q?Q[FC(S)]:(L&&(Q=zN(x,T),Q[FC(S)]=P),P)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(YN,"createElmNodeData");function $C(A){return A&&ke(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s($C,"_isConfigDefaults");function KN(A,x,T){var S,P=T.dfVal||te;if(x&&T.fb){var L=T.fb;Ze(L)||(L=[L]);for(var Q=0;Q<L[$r];Q++){var X=L[Q],se=x[X];if(P(se)?S=se:A&&(se=A.cfg[X],P(se)&&(S=se),A.set(A.cfg,Ot(X),se)),P(S))break}}return!P(S)&&P(T.v)&&(S=T.v),S}s(KN,"_getDefault");function W3(A,x,T){var S=T;if(T&&$C(T)&&(S=KN(A,x,T)),S){$C(S)&&(S=W3(A,x,S));var P;Ze(S)?(P=[],P[$r]=S[$r]):hu(S)&&(P={}),P&&(ne(S,function(L,Q){Q&&$C(Q)&&(Q=W3(A,x,Q)),P[L]=Q}),S=P)}return S}s(W3,"_resolveDefaultValue");function G3(A,x,T,S){var P,L,Q,X=S,se,Ce,Te,Ne;$C(X)?(P=X.isVal,L=X.set,Te=X.rdOnly,Ne=X.blkVal,se=X.mrg,Ce=X.ref,!Ce&&O(Ce)&&(Ce=!!se),Q=KN(A,x,X)):Q=S,Ne&&A.blkVal(x,T);var Ye,Le=!0,je=x[T];(je||!K(je))&&(Ye=je,Le=!1,P&&Ye!==Q&&!P(Ye)&&(Ye=Q,Le=!0),L&&(Ye=L(Ye,Q,x),Le=Ye===Q)),Le?Q?Ye=W3(A,x,Q):Ye=Q:(hu(Ye)||Ze(Q))&&se&&Q&&(hu(Q)||Ze(Q))&&ne(Q,function(lt,et){G3(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(G3,"_applyDefaultValue");var jh=oE("[[ai_dynCfg_1]]"),JN=oE("[[ai_blkDynCfg_1]]"),XN=oE("[[ai_frcDynCfg_1]]");function ZN(A){if(A){var x;if(Ze(A)?(x=[],x[$r]=A[$r]):hu(A)&&(x={}),x)return ne(A,function(T,S){x[T]=ZN(S)}),x}return A}s(ZN,"_cfgDeepCopy");function aJ(A){if(A){var x=A[jh]||A;if(x.cfg&&(x.cfg===A||x.cfg[jh]===x))return x}return null}s(aJ,"getDynamicConfigHandler");function lJ(A){if(A&&(hu(A)||Ze(A)))try{A[JN]=!0}catch{}return A}s(lJ,"blockDynamicConversion");function H3(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[XN],!S&&!T[JN]&&(S=hu(T)||Ze(T))),S}s(H3,"_canMakeDynamic");function zC(A){Yn("InvalidAccess:"+A)}s(zC,"throwInvalidAccess");var cJ=["push","pop","shift","unshift","splice"],SE=s(function(A,x,T,S){A&&A[XA](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Vh(A,x,T){Ze(x)&&qn(cJ,function(S){var P=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var X=P[Fw](this,L);return JC(A,x,T,"Patching"),X}})}s(Vh,"_patchArray");function Xd(A,x){var T=Oe(A,x);return T&&T.get}s(Xd,"_getOwnPropGetter");function e7(A,x,T,S){var P={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(mu(P.h,Ce)===-1&&P.h[Vi](Ce),A.trk(Ce,P))},"trk"),clr:s(function(Ce){var Te=mu(P.h,Ce);Te!==-1&&P.h[bC](Te,1)},"clr")},L=!0,Q=!1;function X(){L&&(Q=Q||H3(X,A,S),S&&!S[jh]&&Q&&(S=JC(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&P.trk(Ce),S}s(X,"_getProperty"),X[A.prop]={chng:s(function(){A.add(P)},"chng")};function se(Ce){if(S!==Ce){X[A.ro]&&!A.upd&&zC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||H3(X,A,S),L=!1);var Te=Q&&X[A.rf];if(Q)if(Te){ne(S,function(Ye){S[Ye]=Ce?Ce[Ye]:Zu});try{ne(Ce,function(Ye,Le){YC(A,S,Ye,Le)}),Ce=S}catch(Ye){SE((A.hdlr||{})[Aa],T,"Assigning",Ye),Q=!1}}else S&&S[jh]&&ne(S,function(Ye){var Le=Xd(S,Ye);if(Le){var je=Le[A.prop];je&&je.chng()}});if(Ce!==S){var Ne=Ce&&H3(X,A,Ce);!Te&&Ne&&(Ce=JC(A,Ce,T,"Converting")),S=Ce,Q=Ne}A.add(P)}}s(se,"_setProperty"),ze(x,P.n,{g:X,s:se})}s(e7,"_createDynamicProperty");function YC(A,x,T,S){if(x){var P=Xd(x,T),L=P&&!!P[A.prop];L?x[T]=S:e7(A,x,T,S)}return x}s(YC,"_setDynamicProperty");function KC(A,x,T,S){if(x){var P=Xd(x,T),L=P&&!!P[A.prop],Q=S&&S[0],X=S&&S[1],se=S&&S[2];if(!L){if(se)try{lJ(x)}catch(Ce){SE((A.hdlr||{})[Aa],T,"Blocking",Ce)}try{YC(A,x,T,x[T]),P=Xd(x,T)}catch(Ce){SE((A.hdlr||{})[Aa],T,"State",Ce)}}Q&&(P[A.rf]=Q),X&&(P[A.ro]=X),se&&(P[A.blkVal]=!0)}return x}s(KC,"_setDynamicPropertyState");function JC(A,x,T,S){try{ne(x,function(P,L){YC(A,x,P,L)}),x[jh]||(be(x,jh,{get:s(function(){return A.hdlr},"get")}),Vh(A,x,T))}catch(P){SE((A.hdlr||{})[Aa],T,S,P)}return x}s(JC,"_makeDynamicObject");var RE="[[ai_",kE="]]";function uJ(A){var x=HA(RE+"get"+A.uid+kE),T=HA(RE+"ro"+A.uid+kE),S=HA(RE+"rf"+A.uid+kE),P=HA(RE+"blkVal"+A.uid+kE),L=HA(RE+"dtl"+A.uid+kE),Q=null,X=null,se;function Ce(Le,je){var lt=se.act;try{se.act=Le,Le&&Le[L]&&(qn(Le[L],function(gt){gt.clr(Le)}),Le[L]=[]),je({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(gt){var et=A[Aa];throw et&&et[XA](1,107,Lt(gt)),gt}finally{se.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Le=Q;Q=null,X&&X[EC](),X=null;var je=[];if(qn(Le,function(lt){if(lt&&(lt[L]&&(qn(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){je[Vi](et)}}),Q)try{Te()}catch(lt){je[Vi](lt)}je[$r]>0&&T3("Watcher error(s): ",je)}}s(Te,"_notifyWatchers");function Ne(Le){if(Le&&Le.h[$r]>0){Q||(Q=[]),X||(X=Dh(function(){X=null,Te()},0));for(var je=0;je<Le.h[$r];je++){var lt=Le.h[je];lt&&mu(Q,lt)===-1&&Q[Vi](lt)}}}s(Ne,"_addWatcher");function Ye(Le,je){if(Le){var lt=Le[L]=Le[L]||[];mu(lt,je)===-1&&lt[Vi](je)}}return s(Ye,"_trackHandler"),se={prop:x,ro:T,rf:S,blkVal:P,hdlr:A,add:Ne,notify:Te,use:Ce,trk:Ye},se}s(uJ,"_createState");function l_(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(l_,"_createAndUseHandler");function t7(A,x,T){var S=aJ(x);if(S)return S;var P=$p("dyncfg",!0),L=x&&T!==!1?x:ZN(x),Q;function X(){Q.notify()}s(X,"_notifyWatchers");function se(et,gt,Nt){try{et=YC(Q,et,gt,Nt)}catch(Vt){SE(A,gt,"Setting value",Vt)}return et[gt]}s(se,"_setValue");function Ce(et){return l_(Q,et)}s(Ce,"_watch");function Te(et,gt){Q.use(null,function(Nt){var Vt=Q.upd;try{O(gt)||(Q.upd=gt),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Ne(et,gt){var Nt;return KC(Q,et,gt,(Nt={},Nt[0]=!0,Nt))[gt]}s(Ne,"_ref");function Ye(et,gt){var Nt;return KC(Q,et,gt,(Nt={},Nt[1]=!0,Nt))[gt]}s(Ye,"_rdOnly");function Le(et,gt){var Nt;return KC(Q,et,gt,(Nt={},Nt[2]=!0,Nt))[gt]}s(Le,"_blkPropValue");function je(et,gt){return gt&&ne(gt,function(Nt,Vt){G3(lt,et,Nt,Vt)}),et}s(je,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:X,set:se,setDf:je,watch:Ce,ref:Ne,rdOnly:Ye,blkVal:Le,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:P}),Q=uJ(lt),JC(Q,L,"config","Creating"),lt}s(t7,"_createDynamicHandler");function n7(A,x){A?(A[vC](x),A[XA](2,108,x)):zC(x)}s(n7,"_logInvalidAccess");function rd(A,x,T,S){var P=t7(T,A||{},S);return x&&P.setDf(P.cfg,x),P}s(rd,"createDynamicConfig");function zp(A,x,T){var S=A[jh]||A;return S.cfg&&(S.cfg===A||S.cfg[jh]===S)?S[qp](x):(n7(T,ON+Lt(A)),rd(A,null,T)[qp](x))}s(zp,"onConfigChange");function XC(A,x){if(A&&A[ZA])return A[ZA](x)}s(XC,"runTargetUnload");function r7(A,x,T){var S;return T||(S=BC(function(P){T=P})),A&&UK(A)>0?Xu(XC(A[0],x),function(){r7(aC(A,1),x,T)}):T(),S}s(r7,"doUnloadAll");var dJ=500,i7="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function fJ(A,x,T){return!A&&K(A)?x:It(A)?A:Ot(A)[xC]()==="true"}s(fJ,"_stringToBoolOrDefault");function pJ(A){return{mrg:!0,v:A}}s(pJ,"cfgDfMerge");function j3(A,x,T){return{fb:T,isVal:A,v:x}}s(j3,"cfgDfValidate");function ff(A,x){return{fb:x,set:fJ,v:!!A}}s(ff,"cfgDfBoolean");var c_=[NC,LC,Kw,o1],u_=null,d_;function mJ(A,x){return function(){var T=arguments,S=o7(x);if(S){var P=S.listener;P&&P[A]&&P[A][Fw](P,T)}}}s(mJ,"_listenerProxyFunc");function hJ(){var A=ia("Microsoft");return A&&(u_=A.ApplicationInsights),u_}s(hJ,"_getExtensionNamespace");function o7(A){var x=u_;return!x&&A.disableDbgExt!==!0&&(x=u_||hJ()),x?x.ChromeDbgExt:null}s(o7,"getDebugExt");function gJ(A){if(!d_){d_={};for(var x=0;x<c_[$r];x++)d_[c_[x]]=mJ(c_[x],A)}return d_}s(gJ,"getDebugListener");var ZC,s7="warnToConsole",AJ="AI (Internal): ",yJ="AI: ",CJ="AITR_",a7={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ex=(ZC={},ZC[0]=null,ZC[1]="errorToConsole",ZC[2]=s7,ZC[3]="debugToConsole",ZC);function yu(A){return A?'"'+A[Uh](/\"/g,mi)+'"':mi}s(yu,"_sanitizeDiagnosticText");function BE(A,x){var T=wE();if(T){var S="log";T[A]&&(S=A),Qe(T[S])&&T[S](x)}}s(BE,"_logToConsole");var f_=function(){function A(x,T,S,P){S===void 0&&(S=!1);var L=this;L[Ow]=x,L[t1]=(S?yJ:AJ)+x;var Q=mi;GC()&&(Q=Au().stringify(P));var X=(T?" message:"+yu(T):mi)+(P?" props:"+yu(Q):mi);L[t1]+=X}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function DE(A,x){return(A||{})[Aa]||new PE(x)}s(DE,"safeGetLogger");var PE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},P,L,Q,X,se;nc(A,this,function(Ce){se=Ne(x||{}),Ce.consoleLoggingLevel=function(){return P},Ce[XA]=function(je,lt,et,gt,Nt){Nt===void 0&&(Nt=!1);var Vt=new f_(lt,et,Nt,gt);if(X)throw Lt(Vt);var hn=ex[je]||s7;if(O(Vt[t1]))Le("throw"+(je===1?"Critical":"Warning"),Vt);else{if(Nt){var Wr=+Vt[Ow];!S[Wr]&&P>=je&&(Ce[hn](Vt[t1]),S[Wr]=!0)}else P>=je&&Ce[hn](Vt[t1]);Te(je,Vt)}},Ce.debugToConsole=function(je){BE("debug",je),Le("warning",je)},Ce[vC]=function(je){BE("warn",je),Le("warning",je)},Ce.errorToConsole=function(je){BE("error",je),Le("error",je)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[ZA]=function(je){se&&se.rm(),se=null};function Te(je,lt){if(!Ye()){var et=!0,gt=CJ+lt[Ow];if(S[gt]?et=!1:S[gt]=!0,et&&(je<=L&&(Ce.queue[Vi](lt),T++,Le(je===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new f_(23,Nt,!1);Ce.queue[Vi](Vt),je===1?Ce.errorToConsole(Nt):Ce[vC](Nt)}}}s(Te,"_logInternalMessage");function Ne(je){return zp(rd(je,a7,Ce).cfg,function(lt){var et=lt.cfg;P=et[_N],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,X=et.enableDebug})}s(Ne,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Le(je,lt){var et=o7(x||{});et&&et[af]&&et[af](je,lt)}s(Le,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function V3(A){return A||new PE}s(V3,"_getLogger");function _n(A,x,T,S,P,L){L===void 0&&(L=!1),V3(A)[XA](x,T,S,P,L)}s(_n,"_throwInternal");function p_(A,x){V3(A)[vC](x)}s(p_,"_warnToConsole");var NE,$h,l7="toGMTString",c7="toUTCString",m_="cookie",Yp="expires",u7="isCookieUseDisabled",h_="disableCookiesUsage",d7="_ckMgr",g_=null,tx=null,A_=null,pf,f7={},p7={},m7=(NE={cookieCfg:pJ(($h={},$h[Xw]={fb:"cookieDomain",dfVal:e_},$h.path={fb:"cookiePath",dfVal:e_},$h.enabled=Zu,$h.ignoreCookies=Zu,$h.blockedCookies=Zu,$h)),cookieDomain:Zu,cookiePath:Zu},NE[h_]=Zu,NE);function $3(){!pf&&(pf=Mr(function(){return iC()}))}s($3,"_getDoc");function LE(A){return A?A.isEnabled():!0}s(LE,"_isMgrEnabled");function z3(A,x){return x&&A&&Ze(A.ignoreCookies)?mu(A.ignoreCookies,x)!==-1:!1}s(z3,"_isIgnoredCookie");function xJ(A,x){return x&&A&&Ze(A.blockedCookies)&&mu(A.blockedCookies,x)!==-1?!0:z3(A,x)}s(xJ,"_isBlockedCookie");function Y3(A,x){var T=x[of];if(K(T)){var S=void 0;O(A[u7])||(S=!A[u7]),O(A[h_])||(S=!A[h_]),T=S}return T}s(Y3,"_isCfgEnabled");function vJ(A,x){var T,S,P,L,Q,X,se,Ce;A=rd(A||p7,null,x).cfg,L=zp(A,function(Ne){Ne.setDf(Ne.cfg,m7),T=Ne.ref(Ne.cfg,"cookieCfg"),S=T[Zw]||"/",P=T[Xw],Q=Y3(A,T)!==!1,X=T.getCookie||bJ,se=T.setCookie||nx,Ce=T.delCookie||nx},x);var Te={isEnabled:s(function(){var Ne=Y3(A,T)!==!1&&Q&&h7(x),Ye=p7[d7];return Ne&&Ye&&Te!==Ye&&(Ne=LE(Ye)),Ne},"isEnabled"),setEnabled:s(function(Ne){Q=Ne!==!1,T[of]=Ne},"setEnabled"),set:s(function(Ne,Ye,Le,je,lt){var et=!1;if(LE(Te)&&!xJ(T,Ne)){var gt={},Nt=ji(Ye||mi),Vt=Qp(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),gt=K3(ge(Ye,Vt+1))),Wh(gt,Xw,je||P,ce,O),!K(Le)){var hn=Jd();if(O(gt[Yp])){var Wr=Rh(),xi=Wr+Le*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Wh(gt,Yp,g7(vi,hn?l7:c7)||g7(vi,hn?l7:c7)||mi,ce)}}hn||Wh(gt,"max-age",mi+Le,null,O)}var ho=WC();ho&&ho.protocol==="https:"&&(Wh(gt,"secure",null,null,O),tx===null&&(tx=!EJ((Th()||{})[qw])),tx&&Wh(gt,"SameSite","None",null,O)),Wh(gt,Zw,lt||S,null,O),se(Ne,A7(Nt,gt)),et=!0}return et},"set"),get:s(function(Ne){var Ye=mi;return LE(Te)&&!z3(T,Ne)&&(Ye=X(Ne)),Ye},"get"),del:s(function(Ne,Ye){var Le=!1;return LE(Te)&&(Le=Te.purge(Ne,Ye)),Le},"del"),purge:s(function(Ne,Ye){var Le,je=!1;if(h7(x)){var lt=(Le={},Le[Zw]=Ye||"/",Le[Yp]="Thu, 01 Jan 1970 00:00:01 GMT",Le);Jd()||(lt["max-age"]="0"),Ce(Ne,A7(mi,lt)),je=!0}return je},"purge"),unload:s(function(Ne){L&&L.rm(),L=null},"unload")};return Te[d7]=Te,Te}s(vJ,"createCookieMgr");function h7(A){if(g_===null){g_=!1,!pf&&$3();try{var x=pf.v||{};g_=x[m_]!==void 0}catch(T){_n(A,2,68,"Cannot access document.cookie - "+ll(T),{exception:Lt(T)})}}return g_}s(h7,"areCookiesSupported");function K3(A){var x={};if(A&&A[$r]){var T=ji(A)[Oh](";");qn(T,function(S){if(S=ji(S||mi),S){var P=Qp(S,"=");P===-1?x[S]=null:x[ji(M(S,P))]=ji(ge(S,P+1))}})}return x}s(K3,"_extractParts");function g7(A,x){return Qe(A[x])?A[x]():null}s(g7,"_formatDate");function A7(A,x){var T=A||mi;return ne(x,function(S,P){T+="; "+S+(K(P)?mi:"="+P)}),T}s(A7,"_formatCookieValue");function bJ(A){var x=mi;if(!pf&&$3(),pf.v){var T=pf.v[m_]||mi;A_!==T&&(f7=K3(T),A_=T),x=ji(f7[A]||mi)}return x}s(bJ,"_getCookieValue");function nx(A,x){!pf&&$3(),pf.v&&(pf.v[m_]=A+"="+x)}s(nx,"_setCookieValue");function EJ(A){return he(A)?!!(wl(A,"CPU iPhone OS 12")||wl(A,"iPad; CPU OS 12")||wl(A,"Macintosh; Intel Mac OS X 10_14")&&wl(A,"Version/")&&wl(A,"Safari")||wl(A,"Macintosh; Intel Mac OS X 10_14")&&vN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||wl(A,"Chrome/5")||wl(A,"Chrome/6")||wl(A,"UnrealEngine")&&!wl(A,"Chrome")||wl(A,"UCBrowser/12")||wl(A,"UCBrowser/11")):!1}s(EJ,"uaDisallowsSameSiteNone");var J3={perfEvtsSendAll:!1};function IJ(A){A.h=null;var x=A.cb;A.cb=[],qn(x,function(T){ae(T.fn,[T.arg])})}s(IJ,"_runScheduledListeners");function zh(A,x,T,S){qn(A,function(P){P&&P[x]&&(T?(T.cb[Vi]({fn:S,arg:P}),T.h=T.h||Dh(IJ,0,T)):ae(S,[P]))})}s(zh,"_runListeners");var TJ=function(){function A(x){this.listeners=[];var T,S,P=[],L={h:null,cb:[]},Q=rd(x,J3);S=Q[qp](function(X){T=!!X.cfg.perfEvtsSendAll}),nc(A,this,function(X){ze(X,"listeners",{g:s(function(){return P},"g")}),X[Mw]=function(se){P[Vi](se)},X[AE]=function(se){for(var Ce=mu(P,se);Ce>-1;)P[bC](Ce,1),Ce=mu(P,se)},X[NC]=function(se){zh(P,NC,L,function(Ce){Ce[NC](se)})},X[LC]=function(se,Ce){zh(P,LC,L,function(Te){Te[LC](se,Ce)})},X[Kw]=function(se,Ce){zh(P,Kw,Ce?L:null,function(Te){Te[Kw](se,Ce)})},X[o1]=function(se){se&&(T||!se[E3]())&&zh(P,o1,null,function(Ce){se.isAsync?Dh(function(){return Ce[o1](se)},0):Ce[o1](se)})},X[_3]=function(se){se&&se[$r]&&zh(P,_3,L,function(Ce){Ce[_3](se)})},X[S3]=function(se){se&&se[SC]&&zh(P,S3,L,function(Ce){Ce[S3](se)})},X[Jw]=function(se,Ce){if(se>0){var Te=Ce||0;zh(P,Jw,L,function(Ne){Ne[Jw](se,Te)})}},X[ZA]=function(se){var Ce=s(function(){S&&S.rm(),S=null,P=[],L.h&&L.h[EC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(zh(P,"unload",null,function(Ne){var Ye=Ne[ZA](se);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return BC(function(Ne){return Xu(w3(Te),function(){Ce(),Ne()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),rx="ctx",X3="ParentContextKey",FE="ChildrenContextKey",wJ=null,y_=function(){function A(x,T,S){var P=this;if(P.start=Rh(),P[Mh]=x,P.isAsync=S,P[E3]=function(){return!1},Qe(T)){var L;ze(P,"payload",{g:s(function(){return!L&&Qe(T)&&(L=T(),T=null),L},"g")})}P[qh]=function(Q){return Q?Q===A[X3]||Q===A[FE]?P[Q]:(P[rx]||{})[Q]:null},P[Yd]=function(Q,X){if(Q)if(Q===A[X3])P[Q]||(P[E3]=function(){return!0}),P[Q]=X;else if(Q===A[FE])P[Q]=X;else{var se=P[rx]=P[rx]||{};se[Q]=X}},P.complete=function(){var Q=0,X=P[qh](A[FE]);if(Ze(X))for(var se=0;se<X[$r];se++){var Ce=X[se];Ce&&(Q+=Ce.time)}P.time=Rh()-P.start,P.exTime=P.time-Q,P.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),_J=function(){function A(x){this.ctx={},nc(A,this,function(T){T.create=function(S,P,L){return new y_(S,P,L)},T.fire=function(S){S&&(S.complete(),x&&Qe(x[o1])&&x[o1](S))},T[Yd]=function(S,P){if(S){var L=T[rx]=T[rx]||{};L[S]=P}},T[qh]=function(S){return(T[rx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),mf="CoreUtils.doPerf";function ix(A,x,T,S,P){if(A){var L=A;if(L[xE]&&(L=L[xE]()),L){var Q=void 0,X=L[qh](mf);try{if(Q=L.create(x(),S,P),Q){if(X&&Q[Yd]&&(Q[Yd](y_[X3],X),X[qh]&&X[Yd])){var se=X[qh](y_[FE]);se||(se=[],X[Yd](y_[FE],se)),se[Vi](Q)}return L[Yd](mf,Q),T(Q)}}catch(Ce){Q&&Q[Yd]&&Q[Yd]("exception",Ce)}finally{Q&&L.fire(Q),L[Yd](mf,X)}}}return T()}s(ix,"doPerf");function Ca(){return wJ}s(Ca,"getGblPerfMgr");var C_="00000000000000000000000000000000",ox="0000000000000000";function x_(A,x,T){return A&&A[$r]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(x_,"_isValid");function Yh(A){return x_(A,32,C_)}s(Yh,"isValidTraceId");function c1(A){return x_(A,16,ox)}s(c1,"isValidSpanId");var ME=YN("plugin");function Kh(A){return ME.get(A,"state",{},!0)}s(Kh,"_getPluginState");function Z3(A,x){for(var T=[],S=null,P=A[lf](),L;P;){var Q=P[TC]();if(Q){S&&S[Qh]&&Q[ed]&&S[Qh](Q),L=Kh(Q);var X=!!L[rf];Q[rf]&&(X=Q[rf]()),X||T[Vi](Q),S=Q,P=P[lf]()}}qn(T,function(se){var Ce=A[ya]();se[gE](A.getCfg(),Ce,x,A[lf]()),L=Kh(se),!se[ya]&&!L[ya]&&(L[ya]=Ce),L[rf]=!0,delete L[sf]})}s(Z3,"initializePlugins");function eB(A){return A.sort(function(x,T){var S=0;if(T){var P=T[ed];x[ed]?S=P?x[PC]-T[PC]:1:P&&(S=-1)}else S=x?1:-1;return S})}s(eB,"sortPlugins");function SJ(A){var x={};return{getName:s(function(){return x[Mh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Mh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),Yh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),c1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[RN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[RN]=T},"setTraceFlags")}}s(SJ,"createDistributedTraceContext");var RJ="TelemetryPluginChain",y7="_hasRun",tB="_getTelCtx",C7=0;function kJ(A,x,T){for(;A;){if(A[TC]()===T)return A;A=A[lf]()}return D([T],x.config||{},x)}s(kJ,"_getNextProxyStart");function nB(A,x,T,S){var P=null,L=[];x||(x=rd({},null,T[Aa])),S!==null&&(P=S?kJ(A,T,S):A);var Q={_next:se,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return DE(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Ne,hasNext:s(function(){return!!P},"hasNext"),getNext:s(function(){return P},"getNext"),setNext:s(function(Le){P=Le},"setNext"),iterate:Ye,onComplete:X}};function X(Le,je){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Le&&L[Vi]({func:Le,self:O(je)?Q.ctx:je,args:lt})}s(X,"_addOnComplete");function se(){var Le=P;if(P=Le?Le[lf]():null,!Le){var je=L;je&&je[$r]>0&&(qn(je,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){_n(T[Aa],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Le}s(se,"_moveNext");function Ce(Le,je){var lt=null,et=x.cfg;if(et&&Le){var gt=et[i1];!gt&&je&&(gt={}),et[i1]=gt,gt=x.ref(et,i1),gt&&(lt=gt[Le],!lt&&je&&(lt={}),gt[Le]=lt,lt=x.ref(gt,Le))}return lt}s(Ce,"_getExtCfg");function Te(Le,je){var lt=Ce(Le,!0);return je&&ne(je,function(et,gt){if(K(lt[et])){var Nt=x.cfg[et];(Nt||!K(Nt))&&(lt[et]=Nt)}G3(x,lt,et,gt)}),x.setDf(lt,je)}s(Te,"_resolveExtCfg");function Ne(Le,je,lt){lt===void 0&&(lt=!1);var et,gt=Ce(Le,!1),Nt=x.cfg;return gt&&(gt[je]||!K(gt[je]))?et=gt[je]:(Nt[je]||!K(Nt[je]))&&(et=Nt[je]),et||!K(et)?et:lt}s(Ne,"_getConfig");function Ye(Le){for(var je;je=Q._next();){var lt=je[TC]();lt&&Le(lt)}}return s(Ye,"_iterateChain"),Q}s(nB,"_createInternalContext");function sx(A,x,T,S){var P=rd(x),L=nB(A,P,T,S),Q=L.ctx;function X(Ce){var Te=L._next();return Te&&Te[ed](Ce,Q),!Te}s(X,"_processNext");function se(Ce,Te){return Ce===void 0&&(Ce=null),Ze(Ce)&&(Ce=D(Ce,P.cfg,T,Te)),sx(Ce||Q[lf](),P.cfg,T,Te)}return s(se,"_createNew"),Q[Tl]=X,Q[e1]=se,Q}s(sx,"createProcessTelemetryContext");function w(A,x,T){var S=rd(x.config),P=nB(A,S,x,T),L=P.ctx;function Q(se){var Ce=P._next();return Ce&&Ce[ZA](L,se),!Ce}s(Q,"_processNext");function X(se,Ce){return se===void 0&&(se=null),Ze(se)&&(se=D(se,S.cfg,x,Ce)),w(se||L[lf](),x,Ce)}return s(X,"_createNew"),L[Tl]=Q,L[e1]=X,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=rd(x.config),P=nB(A,S,x,T),L=P.ctx;function Q(se){return L.iterate(function(Ce){Qe(Ce[Wp])&&Ce[Wp](L,se)})}s(Q,"_processNext");function X(se,Ce){return se===void 0&&(se=null),Ze(se)&&(se=D(se,S.cfg,x,Ce)),R(se||L[lf](),x,Ce)}return s(X,"_createNew"),L[Tl]=Q,L[e1]=X,L}s(R,"createProcessTelemetryUpdateContext");function D(A,x,T,S){var P=null,L=!S;if(Ze(A)&&A[$r]>0){var Q=null;qn(A,function(X){if(!L&&S===X&&(L=!0),L&&X&&Qe(X[ed])){var se=F(X,x,T);P||(P=se),Q&&Q._setNext(se),Q=se}})}return S&&!P?D([S],x,T):P}s(D,"createTelemetryProxyChain");function F(A,x,T){var S=null,P=Qe(A[ed]),L=Qe(A[Qh]),Q;A?Q=A[Fh]+"-"+A[PC]+"-"+C7++:Q="Unknown-0-"+C7++;var X={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Ne,update:Ye,_id:Q,_setNext:s(function(Le){S=Le},"_setNext")};function se(){var Le;return A&&Qe(A[tB])&&(Le=A[tB]()),Le||(Le=sx(X,x,T)),Le}s(se,"_getTelCtx");function Ce(Le,je,lt,et,gt){var Nt=!1,Vt=A?A[Fh]:RJ,hn=Le[y7];return hn||(hn=Le[y7]={}),Le.setNext(S),A&&ix(Le[ya](),function(){return Vt+":"+lt},function(){hn[Q]=!0;try{var Wr=S?S._id:mi;Wr&&(hn[Wr]=!1),Nt=je(Le)}catch(vi){var xi=S?hn[S._id]:!0;xi&&(Nt=!0),(!S||!xi)&&_n(Le[af](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(hn))}},et,gt),Nt}s(Ce,"_processChain");function Te(Le,je){je=je||se();function lt(et){if(!A||!P)return!1;var gt=Kh(A);return gt[sf]||gt[Yw]?!1:(L&&A[Qh](S),A[ed](Le,et),!0)}s(lt,"_callProcessTelemetry"),Ce(je,lt,"processTelemetry",function(){return{item:Le}},!Le.sync)||je[Tl](Le)}s(Te,"_processTelemetry");function Ne(Le,je){function lt(){var et=!1;if(A){var gt=Kh(A),Nt=A[ya]||gt[ya];A&&(!Nt||Nt===Le.core())&&!gt[sf]&&(gt[ya]=null,gt[sf]=!0,gt[rf]=!1,A[sf]&&A[sf](Le,je)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Le,lt,"unload",function(){},je.isAsync)||Le[Tl](je)}s(Ne,"_unloadPlugin");function Ye(Le,je){function lt(){var et=!1;if(A){var gt=Kh(A),Nt=A[ya]||gt[ya];A&&(!Nt||Nt===Le.core())&&!gt[sf]&&A[Wp]&&A[Wp](Le,je)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Le,lt,"update",function(){},!1)||Le[Tl](je)}return s(Ye,"_updatePlugin"),Gt(X)}s(F,"createTelemetryPluginProxy");function oe(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,P){qn(A,function(L){try{L(S,P)}catch(Q){_n(S[af](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(oe,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var P=A;A=[],qn(P,function(L){try{(L.rm||L.remove).call(L)}catch(Q){_n(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&sC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Me="getPlugin",Je=(we={},we[i1]={isVal:e_,v:{}},we),pt=function(){function A(){var x=this,T,S,P,L,Q;Ce(),nc(A,x,function(Te){Te[gE]=function(Ne,Ye,Le,je){se(Ne,Ye,je),T=!0},Te[sf]=function(Ne,Ye){var Le=Te[ya];if(!Le||Ne&&Le!==Ne[ya]())return;var je,lt=!1,et=Ne||w(null,Le,P&&P[Me]?P[Me]():P),gt=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[af]()),je===!0&&et[Tl](gt),Ce())}return s(Nt,"_unloadCallback"),!Te[Uw]||Te[Uw](et,gt,Nt)!==!0?Nt():je=!0,je},Te[Wp]=function(Ne,Ye){var Le=Te[ya];if(!Le||Ne&&Le!==Ne[ya]())return;var je,lt=!1,et=Ne||R(null,Le,P&&P[Me]?P[Me]():P),gt=Ye||{reason:0};function Nt(){lt||(lt=!0,se(et.getCfg(),et.core(),et[lf]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,gt,Nt)!==!0?Nt():je=!0,je},bE(Te,"_addUnloadCb",function(){return L},"add"),bE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[af]=function(Te){return X(Te)[af]()},x[rf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Qh]=function(Te){P=Te},x[Tl]=function(Te,Ne){Ne?Ne[Tl](Te):P&&Qe(P[ed])&&P[ed](Te,null)},x._getTelCtx=X;function X(Te){Te===void 0&&(Te=null);var Ne=Te;if(!Ne){var Ye=S||sx(null,{},x[ya]);P&&P[Me]?Ne=Ye[e1](null,P[Me]):Ne=Ye[e1](null,P)}return Ne}s(X,"_getTelCtx");function se(Te,Ne,Ye){rd(Te,Je,DE(Ne)),!Ye&&Ne&&(Ye=Ne[wC]()[lf]());var Le=P;P&&P[Me]&&(Le=P[Me]()),x[ya]=Ne,S=sx(Ye,Te,Ne,Le)}s(se,"_setDefaults");function Ce(){T=!1,x[ya]=null,S=null,P=null,Q=Ee(),L=oe()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function on(A,x,T){var S={id:x,fn:T};sC(A,S);var P={remove:s(function(){qn(A,function(L,Q){if(L.id===S.id)return A[bC](Q,1),-1})},"remove")};return P}s(on,"_addInitializer");function Ir(A,x,T){for(var S=!1,P=A[$r],L=0;L<P;++L){var Q=A[L];if(Q)try{if(Q.fn[Fw](null,[x])===!1){S=!0;break}}catch(X){_n(T,2,64,"Telemetry initializer failed: "+ll(X),{exception:Lt(X)},!0)}}return!S}s(Ir,"_runInitializers");var qr=function(A){hE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,P;L(),nc(x,T,function(Q,X){Q.addTelemetryInitializer=function(se){return on(P,S++,se)},Q[ed]=function(se,Ce){Ir(P,se,Ce?Ce[af]():Q[af]())&&Q[Tl](se,Ce)},Q[Uw]=function(){L()}});function L(){S=0,P=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(pt),un,En="Plugins must provide initialize method",Qr="_notificationManager",Tr="SDK is still unloading...",hi="SDK is not initialized",oo=100,Di=5e4,Qa=Xt((un={cookieCfg:{}},un[DC]={rdOnly:!0,ref:!0,v:[]},un[jp]={rdOnly:!0,ref:!0,v:[]},un[i1]={ref:!0,v:{}},un[Kd]=Zu,un.loggingLevelConsole=0,un.diagnosticLogInterval=Zu,un));function ax(A,x){return new _J(x)}s(ax,"_createPerfManager");function QE(A,x,T){var S=[],P=[],L={};return qn(T,function(Q){(K(Q)||K(Q[gE]))&&Hn(En);var X=Q[PC],se=Q[Fh];Q&&X&&(K(L[X])?L[X]=se:p_(A,"Two extensions have same priority #"+X+" - "+L[X]+", "+se)),!X||X<x?S[Vi](Q):P[Vi](Q)}),{core:S,channels:P}}s(QE,"_validateExtensions");function rB(A,x){var T=!1;return qn(x,function(S){if(S===A)return T=!0,-1}),T}s(rB,"_isPluginPresent");function v_(A,x,T,S){T&&ne(T,function(P,L){S&&hu(L)&&hu(x[P])&&v_(A,x[P],L,S),S&&hu(L)&&hu(x[P])?v_(A,x[P],L,S):A.set(x,P,L)})}s(v_,"_deepMergeConfig");function x7(A,x){var T=null,S=-1;return qn(A,function(P,L){if(P.w===x)return T=P,S=L,-1}),{i:S,l:T}}s(x7,"_findWatcher");function BJ(A,x){var T=x7(A,x).l;return T||(T={w:x,rm:s(function(){var S=x7(A,x);S.i!==-1&&A[bC](S.i,1)},"rm")},A[Vi](T)),T}s(BJ,"_addDelayedCfgListener");function iB(A,x,T){qn(x,function(S){var P=zp(A,S.w,T);delete S.w,S.rm=function(){P.rm()}})}s(iB,"_registerDelayedCfgListener");function v7(A,x,T,S){return x.add(A[qp](function(P){var L=P.cfg.disableDbgExt;L===!0&&S&&(T[AE](S),S=null),T&&!S&&L!==!0&&(S=gJ(P.cfg),T[Mw](S))})),S}s(v7,"_initDebugListener");function b7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(b7,"_createUnloadHook");var Et=function(){function A(){var x,T,S,P,L,Q,X,se,Ce,Te,Ne,Ye,Le,je,lt,et,gt,Nt,Vt,hn,Wr,xi,vi,ho,dr,Qn,bi,ks,Uo,Ft,On,so;nc(A,this,function(bt){st(),bt._getDbgPlgTargets=function(){return[vi,P]},bt[rf]=function(){return T},bt.activeStatus=function(){return Qn},bt._setPendingStatus=function(){Qn=3},bt[gE]=function(dt,fn,Br,Dn){Le&&Hn(Tr),bt[rf]()&&Hn("Core cannot be initialized more than once"),x=rd(dt,Qa,Br||bt[Aa],!1),dt=x.cfg,oc(x[qp](function(To){var as=To.cfg,Lc=Qn===3;if(!Lc){ks=as.initInMemoMaxSize||oo;var id=as.instrumentationKey,Xp=as.endpointUrl;if(K(id)){Wr=null,Qn=Lh.INACTIVE;var Zp="Please provide instrumentation key";T?(_n(S,1,100,Zp),zs()):Hn(Zp);return}var N_=[];if(vt(id)?(N_[Vi](id),Wr=null):Wr=id,vt(Xp)?(N_[Vi](Xp),bi=null):bi=Xp,N_[$r]){Uo=!1,Qn=3;var IB=e_(as.initTimeOut)?as.initTimeOut:Di,cX=gu(N_);Dh(function(){Uo||wr()},IB),Xu(cX,function(yx){try{if(Uo)return;if(!yx.rejected){var Cx=yx[IC];if(Cx&&Cx[$r]){var V7=Cx[0];if(Wr=V7&&V7[IC],Cx[$r]>1){var $7=Cx[1];bi=$7&&$7[IC]}}Wr&&(dt.instrumentationKey=Wr,dt.endpointUrl=bi)}wr()}catch{Uo||wr()}})}else wr();var L_=To.ref(To.cfg,i1);ne(L_,function(yx){To.ref(L_,yx)})}})),L=Dn,Vt=v7(x,Nt,L&&bt[zd](),Vt),gx(),bt[Aa]=Br;var Dr=dt[DC];if(Te=[],Te[Vi].apply(Te,TN(TN([],fn,!1),Dr)),Ne=dt[jp],Ys(null),(!Ye||Ye[$r]===0)&&Hn("No "+jp+" available"),Ne&&Ne[$r]>1){var vo=bt[TC]("TeeChannelController");(!vo||!vo.plugin)&&_n(S,1,28,"TeeChannel required")}iB(dt,xi,S),xi=null,T=!0,Qn===Lh.ACTIVE&&zs()},bt.getChannels=function(){var dt=[];return Ye&&qn(Ye,function(fn){dt[Vi](fn)}),Gt(dt)},bt.track=function(dt){ix(bt[xE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(Bs(dt),Hn("Invalid telemetry item")),!dt[Mh]&&K(dt[Mh])&&(Bs(dt),Hn("telemetry name required")),dt.iKey=dt.iKey||Wr,dt.time=dt.time||vE(new Date),dt.ver=dt.ver||"4.0",!Le&&bt[rf]()&&Qn===Lh.ACTIVE?qa()[Tl](dt):Qn!==Lh.INACTIVE&&P[$r]<=ks&&P[Vi](dt)},function(){return{item:dt}},!dt.sync)},bt[wC]=qa,bt[zd]=function(){return L||(L=new TJ(x.cfg),bt[Qr]=L),L},bt[Mw]=function(dt){bt.getNotifyMgr()[Mw](dt)},bt[AE]=function(dt){L&&L[AE](dt)},bt.getCookieMgr=function(){return se||(se=vJ(x.cfg,bt[Aa])),se},bt.setCookieMgr=function(dt){se!==dt&&(XC(se,!1),se=dt)},bt[xE]=function(){return Q||X||Ca()},bt.setPerfMgr=function(dt){Q=dt},bt.eventCnt=function(){return P[$r]},bt.releaseQueue=function(){if(T&&P[$r]>0){var dt=P;P=[],Qn===2?qn(dt,function(fn){fn.iKey=fn.iKey||Wr,qa()[Tl](fn)}):_n(S,2,20,"core init status is not active")}},bt.pollInternalLogs=function(dt){return lt=dt||null,so=!1,Ft&&Ft[EC](),go(!0)};function wr(){Uo=!0,K(Wr)?(Qn=Lh.INACTIVE,_n(S,1,112,"ikey can't be resolved from promises")):Qn=Lh.ACTIVE,zs()}s(wr,"_setStatus");function zs(){T&&(bt.releaseQueue(),bt.pollInternalLogs())}s(zs,"_releaseQueues");function go(dt){if((!Ft||!Ft[of])&&!so){var fn=dt||S&&S.queue[$r]>0;fn&&(On||(On=!0,oc(x[qp](function(Br){var Dn=Br.cfg.diagnosticLogInterval;(!Dn||!(Dn>0))&&(Dn=1e4);var Dr=!1;Ft&&(Dr=Ft[of],Ft[EC]()),Ft=Rw(hx,Dn),Ft.unref(),Ft[of]=Dr}))),Ft[of]=!0)}return Ft}s(go,"_startLogPoller"),bt[wN]=function(){so=!0,Ft&&Ft[EC](),hx()},k3(bt,function(){return je},["addTelemetryInitializer"]),bt[ZA]=function(dt,fn,Br){dt===void 0&&(dt=!0),T||Hn(hi),Le&&Hn(Tr);var Dn={reason:50,isAsync:dt,flushComplete:!1},Dr;dt&&!fn&&(Dr=BC(function(as){fn=as}));var vo=w(gf(),bt);vo[Qw](function(){Nt.run(bt[Aa]),r7([se,L,S],dt,function(){st(),fn&&fn(Dn)})},bt);function To(as){Dn.flushComplete=as,Le=!0,gt.run(vo,Dn),bt[wN](),vo[Tl](Dn)}return s(To,"_doUnload"),hx(),Kp(dt,To,6,Br),Dr},bt[TC]=kl,bt.addPlugin=function(dt,fn,Br,Dn){if(!dt){Dn&&Dn(!1),Ax(En);return}var Dr=kl(dt[Fh]);if(Dr&&!fn){Dn&&Dn(!1),Ax("Plugin ["+dt[Fh]+"] is already loaded!");return}var vo={reason:16};function To(id){Te[Vi](dt),vo.added=[dt],Ys(vo),Dn&&Dn(!0)}if(s(To,"_addPlugin"),Dr){var as=[Dr.plugin],Lc={reason:2,isAsync:!!Br};Cu(as,Lc,function(id){id?(vo.removed=as,vo.reason|=32,To()):Dn&&Dn(!1)})}else To()},bt.updateCfg=function(dt,fn){fn===void 0&&(fn=!0);var Br;if(bt[rf]()){Br={reason:1,cfg:x.cfg,oldCfg:Iw({},x.cfg),newConfig:Iw({},dt),merge:fn},dt=Br.newConfig;var Dn=x.cfg;dt[DC]=Dn[DC],dt[jp]=Dn[jp]}x._block(function(Dr){var vo=Dr.cfg;v_(Dr,vo,dt,fn),fn||ne(vo,function(To){tt(dt,To)||Dr.set(vo,To,Zu)}),Dr.setDf(vo,Qa)},!0),x.notify(),Br&&Jp(Br)},bt.evtNamespace=function(){return et},bt.flush=Kp,bt.getTraceCtx=function(dt){return hn||(hn=SJ()),hn},bt.setTraceCtx=function(dt){hn=dt||null},bt.addUnloadHook=oc,bE(bt,"addUnloadCb",function(){return gt},"add"),bt.onCfgChange=function(dt){var fn;return T?fn=zp(x.cfg,dt,bt[Aa]):fn=BJ(xi,dt),b7(fn)},bt.getWParam=function(){return Ih()||x.cfg.enableWParam?0:-1};function Rl(){var dt={};ho=[];var fn=s(function(Br){Br&&qn(Br,function(Dn){if(Dn[Fh]&&Dn[_C]&&!dt[Dn.identifier]){var Dr=Dn[Fh]+"="+Dn[_C];ho[Vi](Dr),dt[Dn.identifier]=Dn}})},"_addPluginVersions");fn(Ye),Ne&&qn(Ne,function(Br){fn(Br)}),fn(Te)}s(Rl,"_setPluginVersions");function st(){T=!1,x=rd({},Qa,bt[Aa]),x.cfg[_N]=1,ze(bt,"config",{g:s(function(){return x.cfg},"g"),s:s(function(fn){bt.updateCfg(fn,!1)},"s")}),ze(bt,"pluginVersionStringArr",{g:s(function(){return ho||Rl(),ho},"g")}),ze(bt,"pluginVersionString",{g:s(function(){return dr||(ho||Rl(),dr=ho.join(";")),dr||mi},"g")}),ze(bt,"logger",{g:s(function(){return S||(S=new PE(x.cfg),x[Aa]=S),S},"g"),s:s(function(fn){x[Aa]=fn,S!==fn&&(XC(S,!1),S=fn)},"s")}),bt[Aa]=new PE(x.cfg),vi=[];var dt=bt.config[DC]||[];dt.splice(0,dt[$r]),sC(dt,vi),je=new qr,P=[],XC(L,!1),L=null,Q=null,X=null,XC(se,!1),se=null,Ce=null,Te=[],Ne=null,Ye=null,Le=!1,lt=null,et=$p("AIBaseCore",!0),gt=oe(),hn=null,Wr=null,Nt=Ee(),xi=[],dr=null,ho=null,so=!1,Ft=null,On=!1,Qn=0,bi=null,ks=null,Uo=!1}s(st,"_initDefaults");function qa(){var dt=sx(gf(),x.cfg,bt);return dt[Qw](go),dt}s(qa,"_createTelCtx");function Ys(dt){var fn=QE(bt[Aa],dJ,Te);Ce=null,dr=null,ho=null,Ye=(Ne||[])[0]||[],Ye=eB(sC(Ye,fn[jp]));var Br=sC(eB(fn[ya]),Ye);vi=Gt(Br);var Dn=bt.config[DC]||[];Dn.splice(0,Dn[$r]),sC(Dn,vi);var Dr=qa();Ye&&Ye[$r]>0&&Z3(Dr[e1](Ye),Br),Z3(Dr,Br),dt&&Jp(dt)}s(Ys,"_initPluginChain");function kl(dt){var fn=null,Br=null,Dn=[];return qn(vi,function(Dr){if(Dr[Fh]===dt&&Dr!==je)return Br=Dr,-1;Dr.getChannel&&Dn[Vi](Dr)}),!Br&&Dn[$r]>0&&qn(Dn,function(Dr){if(Br=Dr.getChannel(dt),!Br)return-1}),Br&&(fn={plugin:Br,setEnabled:s(function(Dr){Kh(Br)[Yw]=!Dr},"setEnabled"),isEnabled:s(function(){var Dr=Kh(Br);return!Dr[sf]&&!Dr[Yw]},"isEnabled"),remove:s(function(Dr,vo){Dr===void 0&&(Dr=!0);var To=[Br],as={reason:1,isAsync:Dr};Cu(To,as,function(Lc){Lc&&Ys({reason:32,removed:To}),vo&&vo(Lc)})},"remove")}),fn}s(kl,"_getPlugin");function gf(){if(!Ce){var dt=(vi||[]).slice();mu(dt,je)===-1&&dt[Vi](je),Ce=D(eB(dt),x.cfg,bt)}return Ce}s(gf,"_getPluginChain");function Cu(dt,fn,Br){if(dt&&dt[$r]>0){var Dn=D(dt,x.cfg,bt),Dr=w(Dn,bt);Dr[Qw](function(){var vo=!1,To=[];qn(Te,function(Lc,id){rB(Lc,dt)?vo=!0:To[Vi](Lc)}),Te=To,dr=null,ho=null;var as=[];Ne&&(qn(Ne,function(Lc,id){var Xp=[];qn(Lc,function(Zp){rB(Zp,dt)?vo=!0:Xp[Vi](Zp)}),as[Vi](Xp)}),Ne=as),Br&&Br(vo),go()}),Dr[Tl](fn)}else Br(!1)}s(Cu,"_removePlugins");function hx(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[$r]=0,qn(dt,function(fn){var Br={name:lt||"InternalMessageId: "+fn[Ow],iKey:Wr,time:vE(new Date),baseType:f_.dataType,baseData:{message:fn[t1]}};bt.track(Br)})}}s(hx,"_flushInternalLogs");function Kp(dt,fn,Br,Dn){var Dr=1,vo=!1,To=null;Dn=Dn||5e3;function as(){Dr--,vo&&Dr===0&&(To&&To[EC](),To=null,fn&&fn(vo),fn=null)}if(s(as,"doCallback"),Ye&&Ye[$r]>0){var Lc=qa()[e1](Ye);Lc.iterate(function(id){if(id.flush){Dr++;var Xp=!1;id.flush(dt,function(){Xp=!0,as()},Br)||Xp||(dt&&To==null?To=Dh(function(){To=null,as()},Dn):as())}})}return vo=!0,as(),!0}s(Kp,"_flushChannels");function gx(){var dt;oc(x[qp](function(fn){var Br=fn.cfg.enablePerfMgr;if(Br){var Dn=fn.cfg[Kd];(dt!==Dn||!dt)&&(Dn||(Dn=ax),UN(fn.cfg,Kd,Dn),dt=Dn,X=null),!Q&&!X&&Qe(Dn)&&(X=Dn(bt,bt[zd]()))}else X=null,dt=null}))}s(gx,"_initPerfManager");function Jp(dt){var fn=R(gf(),bt);fn[Qw](go),(!bt._updateHook||bt._updateHook(fn,dt)!==!0)&&fn[Tl](dt)}s(Jp,"_doUpdate");function Ax(dt){var fn=bt[Aa];fn?(_n(fn,2,73,dt),go()):Hn(dt)}s(Ax,"_logOrThrowError");function Bs(dt){var fn=bt[zd]();fn&&fn[LC]([dt],2)}s(Bs,"_notifyInvalidEvent");function oc(dt){Nt.add(dt)}s(oc,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Bn(A,x){try{if(A&&A!==""){var T=Au().parse(A);if(T&&T[SN]&&T[SN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[$r])return T}}catch(S){_n(x,1,43,"Cannot parse the response. "+(S[Mh]||Lt(S)),{response:A})}return null}s(Bn,"parseResponse");var rr="",Fo="NoResponseBody",Oa="&"+Fo+"=true",$s="POST",Ua=function(){function A(){var x=0,T,S,P,L,Q,X,se,Ce,Te,Ne,Ye,Le,je,lt;nc(A,this,function(et,gt){var Nt=!0;Uo(),et[gE]=function(Ft,On){P=On,S&&_n(P,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,X,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},X=!!Ft.disableCredentials,se=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Ne=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,je=!!Ft.addNoResponse,Le=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Qn},L||(Nt=!1),X){var On=WC();On&&On.protocol&&On.protocol[xC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,On){return Ft&&Ft[$r]?xi(Ft,On):null},et.getFallbackInst=function(){return Ce},et[Uw]=function(Ft,On){Uo()};function Vt(Ft,On){vi(On,200,{},Ft)}s(Vt,"_onSuccess");function hn(Ft,On){_n(P,2,26,"Failed to send telemetry.",{message:Ft}),vi(On,400,{})}s(hn,"_onError");function Wr(Ft){hn("No endpoint url is provided for the batch",Ft)}s(Wr,"_onNoPayloadUrl");function xi(Ft,On){for(var so=0,bt=null,wr=0;bt==null&&wr<Ft[$r];)so=Ft[wr],!Te&&so===1?M3()?bt=ks:Q3()&&(bt=Qn):so===2&&_E(On)&&(!On||!Le)?bt=bi:so===3&&Hh()&&(On?!Ye:!Ne)&&(bt=dr),wr++;return bt?{_transport:so,_isSync:On,sendPOST:bt}:null}s(xi,"_getSenderInterface");function vi(Ft,On,so,bt){try{Ft&&Ft(On,so,bt)}catch{}}s(vi,"_doOnComplete");function ho(Ft,On){var so=Th(),bt=Ft[Gp];if(!bt)return Wr(On),!0;bt=Ft[Gp]+(je?Oa:rr);var wr=Ft[SC],zs=L?wr:new Blob([wr],{type:"text/plain;charset=UTF-8"}),go=so.sendBeacon(bt,zs);return go}s(ho,"_doBeaconSend");function dr(Ft,On,so){var bt=Ft[SC];try{if(bt)if(ho(Ft,On))Vt(rr,On);else{var wr=Q&&Q.beaconOnRetry;wr&&Qe(wr)?wr(Ft,On,ho):(Ce&&Ce.sendPOST(Ft,On,!0),_n(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(zs){L&&p_(P,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(zs)),vi(On,L?0:400,{},rr)}}s(dr,"_beaconSender");function Qn(Ft,On,so){var bt,wr,zs,go=Ft[I3]||{};!so&&T&&(bt=BC(function(Ys,kl){wr=Ys,zs=kl})),L&&so&&Ft.disableXhrSync&&(so=!1);var Rl=Ft[Gp];if(!Rl){Wr(On),wr&&wr(!1);return}var st=P3($s,Rl,Nt,!0,so,Ft[Hp]);L||st.setRequestHeader("Content-type","application/json"),qn(At(go),function(Ys){st.setRequestHeader(Ys,go[Ys])}),st.onreadystatechange=function(){L||(qa(st),st.readyState===4&&wr&&wr(!0))},st.onload=function(){L&&qa(st)};function qa(Ys){var kl=Q&&Q.xhrOnComplete,gf=kl&&Qe(kl);if(gf)kl(Ys,On,Ft);else{var Cu=t_(Ys);vi(On,Ys[yE],a1(Ys,L),Cu)}}return s(qa,"_doOnReadyFunc"),st.onerror=function(Ys){vi(On,L?st[yE]:400,a1(st,L),L?rr:n_(st)),zs&&zs(Ys)},st.ontimeout=function(){vi(On,L?st[yE]:500,a1(st,L),L?rr:n_(st)),wr&&wr(!1)},st.send(Ft[SC]),bt}s(Qn,"_xhrSender");function bi(Ft,On,so){var bt,wr=Ft[Gp],zs=Ft[SC],go=L?zs:new Blob([zs],{type:"application/json"}),Rl,st,qa,Ys=new Headers,kl=zs[$r],gf=!1,Cu=!1,hx=Ft[I3]||{},Kp=(bt={method:$s,body:go},bt[i7]=!0,bt);Ft.headers&&At(Ft.headers)[$r]>0&&(qn(At(hx),function(Bs){Ys.append(Bs,hx[Bs])}),Kp[I3]=Ys),se?Kp.credentials=se:Nt&&L&&(Kp.credentials="include"),so&&(Kp.keepalive=!0,x+=kl,L?Ft._sendReason===2&&(gf=!0,je&&(wr+=Oa)):gf=!0);var gx=new Request(wr,Kp);try{gx[i7]=!0}catch{}if(!so&&T&&(Rl=BC(function(Bs,oc){st=Bs,qa=oc})),!wr){Wr(On),st&&st(!1);return}function Jp(Bs){vi(On,L?0:400,{},L?rr:Bs)}s(Jp,"_handleError");function Ax(Bs,oc,dt){var fn=Bs[yE],Br=Q.fetchOnComplete;Br&&Qe(Br)?Br(Bs,On,dt||rr,oc):vi(On,fn,{},dt||rr)}s(Ax,"_onFetchComplete");try{Xu(fetch(L?wr:gx,L?Kp:null),function(Bs){if(so&&(x-=kl,kl=0),!Cu)if(Cu=!0,Bs.rejected)Jp(Bs.reason&&Bs.reason[t1]),qa&&qa(Bs.reason);else{var oc=Bs[IC];try{!L&&!oc.ok?(Jp(oc.statusText),st&&st(!1)):L&&!oc.body?(Ax(oc,null,rr),st&&st(!0)):Xu(oc.text(),function(dt){Ax(oc,Ft,dt[IC]),st&&st(!0)})}catch(dt){Jp(Lt(dt)),qa&&qa(dt)}}})}catch(Bs){Cu||(Jp(Lt(Bs)),qa&&qa(Bs))}return gf&&!Cu&&(Cu=!0,vi(On,200,{}),st&&st(!0)),L&&!Cu&&Ft[Hp]>0&&lt&&lt.set(function(){Cu||(Cu=!0,vi(On,500,{}),st&&st(!0))},Ft[Hp]),Rl}s(bi,"_doFetchSender");function ks(Ft,On,so){var bt=Mp(),wr=new XDomainRequest,zs=Ft[SC];wr.onload=function(){var Ys=t_(wr),kl=Q&&Q.xdrOnComplete;kl&&Qe(kl)?kl(wr,On,Ft):vi(On,200,{},Ys)},wr.onerror=function(){vi(On,400,{},L?rr:WN(wr))},wr.ontimeout=function(){vi(On,500,{})},wr.onprogress=function(){};var go=bt&&bt.location&&bt.location.protocol||"",Rl=Ft[Gp];if(!Rl){Wr(On);return}if(!L&&Rl.lastIndexOf(go,0)!==0){var st="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";_n(P,2,40,". "+st),hn(st,On);return}var qa=L?Rl:Rl[Uh](/^(https?:)/,"");wr.open($s,qa),Ft[Hp]&&(wr[Hp]=Ft[Hp]),wr.send(zs),L&&so?lt&&lt.set(function(){wr.send(zs)},0):wr.send(zs)}s(ks,"_xdrSender");function Uo(){x=0,S=!1,T=!1,P=null,L=null,Q=null,X=null,se=null,Ce=null,Te=!1,Ne=!1,Ye=!1,Le=!1,je=!1,lt=null}s(Uo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),u1="on",Jh="attachEvent",lx="addEventListener",E7="detachEvent",I7="removeEventListener",b_="events";$p("aiEvtPageHide"),$p("aiEvtPageShow");var DJ=/\.[\.]+/g,_ge=/[\.]+$/,xJe=1,T7=YN("events"),vJe=/^([^.]*)(?:\.(.+)|)/;function Sge(A){return A&&A[Uh]?A[Uh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mi):A}s(Sge,"_normalizeNamespace");function PJ(A,x){if(x){var T=mi;Ze(x)?(T=mi,qn(x,function(P){P=Sge(P),P&&(P[0]!=="."&&(P="."+P),T+=P)})):T=Sge(x),T&&(T[0]!=="."&&(T="."+T),A=(A||mi)+T)}var S=vJe.exec(A||mi)||[];return{type:S[1],ns:(S[2]||mi).replace(DJ,".").replace(_ge,mi)[Oh](".").sort().join(".")}}s(PJ,"_getEvtNamespace");function Rge(A,x,T){T===void 0&&(T=!0);var S=T7.get(A,b_,{},T),P=S[x];return P||(P=S[x]=[]),P}s(Rge,"_getRegisteredEvents");function kge(A,x,T,S){A&&x&&x[rc]&&(A[I7]?A[I7](x[rc],T,S):A[E7]&&A[E7](u1+x[rc],T))}s(kge,"_doDetach");function bJe(A,x,T,S){var P=!1;return A&&x&&x[rc]&&T&&(A[lx]?(A[lx](x[rc],T,S),P=!0):A[Jh]&&(A[Jh](u1+x[rc],T),P=!0)),P}s(bJe,"_doAttach");function Bge(A,x,T,S){for(var P=x[$r];P--;){var L=x[P];L&&(!T.ns||T.ns===L[v3].ns)&&(!S||S(L))&&(kge(A,L[v3],L.handler,L.capture),x[bC](P,1))}}s(Bge,"_doUnregister");function EJe(A,x,T){if(x[rc])Bge(A,Rge(A,x[rc]),x,T);else{var S=T7.get(A,b_,{});ne(S,function(P,L){Bge(A,L,x,T)}),At(S)[$r]===0&&T7.kill(A,b_)}}s(EJe,"_unregisterEvents");function Dge(A,x){var T;return x?(Ze(x)?T=[A].concat(x):T=[A,x],T=PJ("xx",T).ns[Oh](".")):T=A,T}s(Dge,"mergeEvtNamespace");function Pge(A,x,T,S,P){P===void 0&&(P=!1);var L=!1;if(A)try{var Q=PJ(x,S);if(L=bJe(A,Q,T,P),L&&T7.accept(A)){var X={guid:xJe++,evtName:Q,handler:T,capture:P};Rge(A,Q.type)[Vi](X)}}catch{}return L}s(Pge,"eventOn");function IJe(A,x,T,S,P){if(P===void 0&&(P=!1),A)try{var L=PJ(x,S),Q=!1;EJe(A,L,function(X){return L.ns&&!T||X.handler===T?(Q=!0,!0):!1}),Q||kge(A,L,T,P)}catch{}}s(IJe,"eventOff");var Nge="sampleRate",NJ="ProcessLegacy",Lge="http.method",LJ="https://dc.services.visualstudio.com",E_="/v2/track",cx="not_specified",Fge=zK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),w7="split",fi="length",FJ="toLowerCase",OE="ingestionendpoint",oB="toString",Mge="removeItem",_7="message",TJe="count",MJ="stringify",QJ="pathname",sB="match",ux="name",Xh="properties",d1="measurements",S7="sizeInBytes",R7="typeName",aB="exceptions",lB="severityLevel",OJ="problemGroup",I_="parsedStack",k7="hasFullStack",B7="assembly",f1="fileName",T_="line",D7="aiDataContract",P7="duration";function Qge(A,x,T){var S=x[fi],P=wJe(A,x);if(P[fi]!==S){for(var L=0,Q=P;T[Q]!==void 0;)L++,Q=ge(P,0,147)+RJe(L);P=Q}return P}s(Qge,"dataSanitizeKeyAndAddUniqueness");function wJe(A,x){var T;return x&&(x=ji(Ot(x)),x[fi]>150&&(T=ge(x,0,150),_n(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(wJe,"dataSanitizeKey");function Pc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[fi]>T&&(S=ge(x,0,T),_n(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Pc,"dataSanitizeString");function UJ(A,x){return Uge(A,x,2048,66)}s(UJ,"dataSanitizeUrl");function Oge(A,x){var T;return x&&x[fi]>32768&&(T=ge(x,0,32768),_n(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(Oge,"dataSanitizeMessage");function _Je(A,x){var T;if(x){var S=""+x;S[fi]>32768&&(T=ge(S,0,32768),_n(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(_Je,"dataSanitizeException");function UE(A,x){if(x){var T={};ne(x,function(S,P){if(ke(P)&&GC())try{P=Au()[MJ](P)}catch(L){_n(A,2,49,"custom property is not valid",{exception:L},!0)}P=Pc(A,P,8192),S=Qge(A,S,T),T[S]=P}),x=T}return x}s(UE,"dataSanitizeProperties");function qE(A,x){if(x){var T={};ne(x,function(S,P){S=Qge(A,S,T),T[S]=P}),x=T}return x}s(qE,"dataSanitizeMeasurements");function SJe(A,x){return x&&Uge(A,x,128,69)[oB]()}s(SJe,"dataSanitizeId");function Uge(A,x,T,S){var P;return x&&(x=ji(Ot(x)),x[fi]>T&&(P=ge(x,0,T),_n(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),P||x}s(Uge,"dataSanitizeInput");function RJe(A){var x="00"+A;return ve(x,x[fi]-3)}s(RJe,"dsPadNumber");var qge=iC()||{},Wge=0,kJe=[null,null,null,null,null];function BJe(A){var x=Wge,T=kJe,S=T[x];return qge.createElement?T[x]||(S=T[x]=qge.createElement("a")):S={host:DJe(A,!0)},S.href=A,x++,x>=T[fi]&&(x=0),Wge=x,S}s(BJe,"urlParseUrl");function DJe(A,x){var T=PJe(A,x)||"";if(T){var S=T[sB](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>3&&he(S[2])&&S[2][fi]>0)return S[2]+(S[3]||"")}return T}s(DJe,"urlParseHost");function PJe(A,x){var T=null;if(A){var S=A[sB](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>2&&he(S[2])&&S[2][fi]>0&&(T=S[2]||"",x&&S[fi]>2)){var P=(S[1]||"")[FJ](),L=S[3]||"";(P==="http"&&L===":80"||P==="https"&&L===":443")&&(L=""),T+=L}}return T}s(PJe,"urlParseFullHost");var NJe=[LJ+E_,"https://breeze.aimon.applicationinsights.io"+E_,"https://dc-int.services.visualstudio.com"+E_];function Gge(A){return mu(NJe,A[FJ]())!==-1}s(Gge,"isInternalApplicationInsightsEndpoint");function LJe(A,x,T,S){var P,L=S,Q=S;if(x&&x[fi]>0){var X=BJe(x);if(P=X.host,!L)if(X[QJ]!=null){var se=X.pathname[fi]===0?"/":X[QJ];se.charAt(0)!=="/"&&(se="/"+se),Q=X[QJ],L=Pc(A,T?T+" "+se:se)}else L=Pc(A,x)}else P=S,L=S;return{target:P,name:L,data:Q}}s(LJe,"AjaxHelperParseDependencyPath");var qJ=Lw({LocalStorage:0,SessionStorage:1}),w_=void 0,Hge="";function jge(A){try{if(K(tf()))return null;var x=new Date()[oB](),T=ia(A===qJ.LocalStorage?"localStorage":"sessionStorage"),S=Hge+x;T.setItem(S,x);var P=T.getItem(S)!==x;if(T[Mge](S),!P)return T}catch{}return null}s(jge,"_getVerifiedStorageObject");function WJ(){return Vge()?jge(qJ.SessionStorage):null}s(WJ,"_getSessionStorageObject");function FJe(A){Hge=A||""}s(FJe,"utlSetStoragePrefix");function Vge(A){return(A||w_===void 0)&&(w_=!!jge(qJ.SessionStorage)),w_}s(Vge,"utlCanUseSessionStorage");function MJe(A,x){var T=WJ();if(T!==null)try{return T.getItem(x)}catch(S){w_=!1,_n(A,2,2,"Browser failed read of session storage. "+ll(S),{exception:Lt(S)})}return null}s(MJe,"utlGetSessionStorage");function QJe(A,x,T){var S=WJ();if(S!==null)try{return S.setItem(x,T),!0}catch(P){w_=!1,_n(A,2,4,"Browser failed write to session storage. "+ll(P),{exception:Lt(P)})}return!1}s(QJe,"utlSetSessionStorage");function OJe(A,x){var T=WJ();if(T!==null)try{return T[Mge](x),!0}catch(S){w_=!1,_n(A,2,6,"Browser failed removal of session storage item. "+ll(S),{exception:Lt(S)})}return!1}s(OJe,"utlRemoveSessionStorage");var UJe=";",qJe="=";function GJ(A){if(!A)return{};var x=A[w7](UJe),T=FK(x,function(P,L){var Q=L[w7](qJe);if(Q[fi]===2){var X=Q[0][FJ](),se=Q[1];P[X]=se}return P},{});if(At(T)[fi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[OE]=T[OE]||"https://"+S+"dc."+T.endpointsuffix}T[OE]=T[OE]||LJ,vN(T[OE],"/")&&(T[OE]=T[OE].slice(0,-1))}return T}s(GJ,"parseConnectionString");var WJe=function(){function A(x,T,S){var P=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[ux]=Pc(x,S)||cx,L.data=T,L.time=vE(new Date),L[D7]={time:1,iKey:1,name:1,sampleRate:s(function(){return P.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),__=function(){function A(x,T,S,P){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[ux]=Pc(x,T)||cx,L[Xh]=UE(x,S),L[d1]=qE(x,P)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),GJe=58,HJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,jJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,VJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,$Je=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,zJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,YJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,KJe=/([^\(\s\n]+):([0-9]+)$/,$ge="<no_method>",S_="error",hf="stack",HJ="stackDetails",zge="errorSrc",jJ="message",Yge="description",Kge=[{re:jJe,len:5,m:1,fn:2,ln:3,col:4},{chk:XJe,pre:JJe,re:VJe,len:4,m:1,fn:2,ln:3},{re:$Je,len:3,m:1,fn:2,hdl:nAe},{re:zJe,len:2,fn:1,hdl:nAe}];function JJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(JJe,"_scrubAnonymous");function XJe(A){return Qp(A,"[native")<0}s(XJe,"_ignoreNative");function VJ(A,x){var T=A;return T&&!he(T)&&(JSON&&JSON[MJ]?(T=JSON[MJ](A),x&&(!T||T==="{}")&&(Qe(A[oB])?T=A[oB]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(VJ,"_stringify");function Jge(A,x){var T=A;return A&&(T&&!he(T)&&(T=A[jJ]||A[Yge]||T),T&&!he(T)&&(T=VJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Qp(T||"",x)===-1&&(T=x+": "+T),T||""}s(Jge,"_formatMessage");function ZJe(A){try{if(ke(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(ZJe,"_isExceptionDetailsInternal");function eXe(A){try{if(ke(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(eXe,"_isExceptionInternal");function Xge(A){return A&&A.src&&he(A.src)&&A.obj&&Ze(A.obj)}s(Xge,"_isStackDetails");function WE(A){var x=A||"";he(x)||(he(x[hf])?x=x[hf]:x=""+x);var T=x[w7](`
`);return{src:x,obj:T}}s(WE,"_convertStackObj");function tXe(A){for(var x=[],T=A[w7](`
`),S=0;S<T[fi];S++){var P=T[S];T[S+1]&&(P+="@"+T[S+1],S++),x.push(P)}return{src:A,obj:x}}s(tXe,"_getOperaStack");function Zge(A){var x=null;if(A)try{if(A[hf])x=WE(A[hf]);else if(A[S_]&&A[S_][hf])x=WE(A[S_][hf]);else if(A.exception&&A.exception[hf])x=WE(A.exception[hf]);else if(Xge(A))x=A;else if(Xge(A[HJ]))x=A[HJ];else if(Mp()&&Mp().opera&&A[jJ])x=tXe(A[_7]);else if(A.reason&&A.reason[hf])x=WE(A.reason[hf]);else if(he(A))x=WE(A);else{var T=A[jJ]||A[Yge]||"";he(A[zge])&&(T&&(T+=`
`),T+=" from "+A[zge]),T&&(x=WE(T))}}catch(S){x=WE(S)}return x||{src:"",obj:null}}s(Zge,"_getStackFromErrorObj");function nXe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(nXe,"_formatStackTrace");function rXe(A){var x,T=A.obj;if(T&&T[fi]>0){x=[];var S=0,P=!1,L=0;qn(T,function(lt){if(P||aXe(lt)){var et=Ot(lt);P=!0;var gt=lXe(et,S);gt&&(L+=gt[S7],x.push(gt),S++)}});var Q=32*1024;if(L>Q)for(var X=0,se=x[fi]-1,Ce=0,Te=X,Ne=se;X<se;){var Ye=x[X][S7],Le=x[se][S7];if(Ce+=Ye+Le,Ce>Q){var je=Ne-Te+1;x.splice(Te,je);break}Te=X,Ne=se,X++,se--}}return x}s(rXe,"_parseStack");function N7(A){var x="";if(A&&(x=A.typeName||A[ux]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[oB]());x=S&&S[fi]>1?S[1]:""}catch{}return x}s(N7,"_getErrorType");function $J(A){if(A)try{if(!he(A)){var x=N7(A),T=VJ(A,!1);return(!T||T==="{}")&&(A[S_]&&(A=A[S_],x=N7(A)),T=VJ(A,!0)),Qp(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s($J,"_formatErrorCode");var L7=function(){function A(x,T,S,P,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var X=this;X.ver=2,eXe(T)?(X[aB]=T[aB]||[],X[Xh]=T[Xh],X[d1]=T[d1],T[lB]&&(X[lB]=T[lB]),T.id&&(X.id=T.id,T[Xh].id=T.id),T[OJ]&&(X[OJ]=T[OJ]),K(T.isManual)||(X.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),X[aB]=[eAe(x,T,S)],X[Xh]=UE(x,S),X[d1]=qE(x,P),L&&(X[lB]=L),Q&&(X.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,P,L,Q,X,se){var Ce=N7(L||Q||x);return{message:Jge(x,Ce),url:T,lineNumber:S,columnNumber:P,error:$J(L||Q||x),evt:$J(Q||x),typeName:Ce,stackDetails:Zge(X||L||Q),errorSrc:se}},A.CreateFromInterface=function(x,T,S,P){var L=T[aB]&&jA(T[aB],function(X){return sXe(x,X)}),Q=new A(x,Up(Up({},T),{exceptions:L}),S,P);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,P=x.measurements,L=x.severityLevel,Q=x.problemGroup,X=x.id,se=x.isManual,Ce=T instanceof Array&&jA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:P,problemGroup:Q,id:X,isManual:se}},A.CreateSimpleException=function(x,T,S,P,L,Q){var X;return{exceptions:[(X={},X[k7]=!0,X.message=x,X.stack=L,X.typeName=T,X)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=$J,A}(),iXe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function oXe(){var A=this,x=Ze(A[I_])&&jA(A[I_],function(S){return uXe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[R7],message:A[_7],hasFullStack:A[k7],stack:A[hf],parsedStack:x||void 0};return T}s(oXe,"_toInterface");function eAe(A,x,T){var S,P,L,Q,X,se,Ce,Te;if(ZJe(x))Q=x[R7],X=x[_7],Ce=x[hf],Te=x[I_]||[],se=x[k7];else{var Ne=x,Ye=Ne&&Ne.evt;yt(Ne)||(Ne=Ne[S_]||Ye||Ne),Q=Pc(A,N7(Ne))||cx,X=Oge(A,Jge(x||Ne,Q))||cx;var Le=x[HJ]||Zge(x);Te=rXe(Le),Ze(Te)&&jA(Te,function(je){je[B7]=Pc(A,je[B7]),je[f1]=Pc(A,je[f1])}),Ce=_Je(A,nXe(Le)),se=Ze(Te)&&Te[fi]>0,T&&(T[R7]=T[R7]||Q)}return S={},S[D7]=iXe,S.id=P,S.outerId=L,S.typeName=Q,S.message=X,S[k7]=se,S.stack=Ce,S.parsedStack=Te,S.toInterface=oXe,S}s(eAe,"_createExceptionDetails");function sXe(A,x){var T=Ze(x[I_])&&jA(x[I_],function(P){return cXe(P)})||x[I_],S=eAe(A,Up(Up({},x),{parsedStack:T}));return S}s(sXe,"_createExDetailsFromInterface");function tAe(A,x){var T=x[sB](YJe);if(T&&T[fi]>=4)A[f1]=T[1],A[T_]=parseInt(T[2]);else{var S=x[sB](KJe);S&&S[fi]>=3?(A[f1]=S[1],A[T_]=parseInt(S[2])):A[f1]=x}}s(tAe,"_parseFilename");function nAe(A,x,T){var S=A[f1];x.fn&&T&&T[fi]>x.fn&&(x.ln&&T[fi]>x.ln?(S=ji(T[x.fn]||""),A[T_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&tAe(A,S)}s(nAe,"_handleFilename");function aXe(A){var x=!1;if(A&&he(A)){var T=ji(A);T&&(x=HJe.test(T))}return x}s(aXe,"_isStackFrame");var rAe=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function lXe(A,x){var T,S;if(A&&he(A)&&ji(A)){S=(T={},T[D7]=rAe,T.level=x,T.assembly=ji(A),T.method=$ge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var P=0;P<Kge[fi];){var L=Kge[P];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[sB](L.re);if(Q&&Q[fi]>=L.len){L.m&&(S.method=ji(Q[L.m]||$ge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[f1]=ji(Q[L.fn]||""),S[T_]=parseInt(ji(Q[L.ln]||""))||0):tAe(S,Q[L.fn]||""));break}P++}}return iAe(S)}s(lXe,"_extractStackFrame");function cXe(A){var x,T=(x={},x[D7]=rAe,x.level=A.level,x.method=A.method,x.assembly=A[B7],x.fileName=A[f1],x.line=A[T_],x.sizeInBytes=0,x);return iAe(T)}s(cXe,"_stackFrameFromInterface");function iAe(A){var x=GJe;return A&&(x+=A.method[fi],x+=A.assembly[fi],x+=A.fileName[fi],x+=A.level.toString()[fi],x+=A.line.toString()[fi],A[S7]=x),A}s(iAe,"_populateFrameSizeInBytes");function uXe(A){return{level:A.level,method:A.method,assembly:A[B7],fileName:A[f1],line:A[T_]}}s(uXe,"_parsedFrameToInterface");var dXe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),cB=function(){function A(x,T,S,P,L,Q,X,se,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Ne=new dXe;Ne[TJe]=P>0?P:void 0,Ne.max=isNaN(Q)||Q===null?void 0:Q,Ne.min=isNaN(L)||L===null?void 0:L,Ne[ux]=Pc(x,T)||cx,Ne.value=S,Ne.stdDev=isNaN(X)||X===null?void 0:X,Te.metrics=[Ne],Te[Xh]=UE(x,se),Te[d1]=qE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),uB="";function oAe(A){(isNaN(A)||A<0)&&(A=0),A=qK(A);var x=uB+A%1e3,T=uB+VA(A/1e3)%60,S=uB+VA(A/(1e3*60))%60,P=uB+VA(A/(1e3*60*60))%24,L=VA(A/(1e3*60*60*24));return x=x[fi]===1?"00"+x:x[fi]===2?"0"+x:x,T=T[fi]<2?"0"+T:T,S=S[fi]<2?"0"+S:S,P=P[fi]<2?"0"+P:P,(L>0?L+".":uB)+P+":"+S+":"+T+"."+x}s(oAe,"msToTimeSpan");var F7=function(){function A(x,T,S,P,L,Q,X){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var se=this;se.ver=2,se.id=SJe(x,X),se.url=UJ(x,S),se[ux]=Pc(x,T)||cx,isNaN(P)||(se[P7]=oAe(P)),se[Xh]=UE(x,L),se[d1]=qE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),M7=function(){function A(x,T,S,P,L,Q,X,se,Ce,Te,Ne,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Le=this;Le.ver=2,Le.id=T,Le[P7]=oAe(L),Le.success=Q,Le.resultCode=X+"",Le.type=Pc(x,Ce);var je=LJe(x,S,se,P);Le.data=UJ(x,P)||je.data,Le.target=Pc(x,je.target),Te&&(Le.target="".concat(Le.target," | ").concat(Te)),Le[ux]=Pc(x,je[ux]),Le[Xh]=UE(x,Ne),Le[d1]=qE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),Q7=function(){function A(x,T,S,P,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||cx,Q[_7]=Oge(x,T),Q[Xh]=UE(x,P),Q[d1]=qE(x,L),S&&(Q[lB]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),O7=function(){function A(x,T,S,P,L,Q,X){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var se=this;se.ver=2,se.url=UJ(x,S),se[ux]=Pc(x,T)||cx,se[Xh]=UE(x,L),se[d1]=qE(x,Q),X&&(se.domProcessing=X.domProcessing,se[P7]=X[P7],se.networkConnect=X.networkConnect,se.perfTotal=X.perfTotal,se.receivedResponse=X.receivedResponse,se.sentRequest=X.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),GE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),fXe=Lw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function dx(A){var x="ai."+A+".";return function(T){return x+T}}s(dx,"_aiNameFunc");var dB=dx("application"),ul=dx("device"),U7=dx("location"),R_=dx("operation"),zJ=dx("session"),fx=dx("user"),HE=dx("cloud"),fB=dx("internal"),sAe=function(A){hE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(rJ({applicationVersion:dB("ver"),applicationBuild:dB("build"),applicationTypeId:dB("typeId"),applicationId:dB("applicationId"),applicationLayer:dB("layer"),deviceId:ul("id"),deviceIp:ul("ip"),deviceLanguage:ul("language"),deviceLocale:ul("locale"),deviceModel:ul("model"),deviceFriendlyName:ul("friendlyName"),deviceNetwork:ul("network"),deviceNetworkName:ul("networkName"),deviceOEMName:ul("oemName"),deviceOS:ul("os"),deviceOSVersion:ul("osVersion"),deviceRoleInstance:ul("roleInstance"),deviceRoleName:ul("roleName"),deviceScreenResolution:ul("screenResolution"),deviceType:ul("type"),deviceMachineName:ul("machineName"),deviceVMName:ul("vmName"),deviceBrowser:ul("browser"),deviceBrowserVersion:ul("browserVersion"),locationIp:U7("ip"),locationCountry:U7("country"),locationProvince:U7("province"),locationCity:U7("city"),operationId:R_("id"),operationName:R_("name"),operationParentId:R_("parentId"),operationRootId:R_("rootId"),operationSyntheticSource:R_("syntheticSource"),operationCorrelationVector:R_("correlationVector"),sessionId:zJ("id"),sessionIsFirst:zJ("isFirst"),sessionIsNew:zJ("isNew"),userAccountAcquisitionDate:fx("accountAcquisitionDate"),userAccountId:fx("accountId"),userAgent:fx("userAgent"),userId:fx("id"),userStoreRegion:fx("storeRegion"),userAuthUserId:fx("authUserId"),userAnonymousUserAcquisitionDate:fx("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:fx("authUserAcquisitionDate"),cloudName:HE("name"),cloudRole:HE("role"),cloudRoleVer:HE("roleVer"),cloudRoleInstance:HE("roleInstance"),cloudEnvironment:HE("environment"),cloudLocation:HE("location"),cloudDeploymentUnit:HE("deploymentUnit"),internalNodeName:fB("nodeName"),internalSdkVersion:fB("sdkVersion"),internalAgentVersion:fB("agentVersion"),internalSnippet:fB("snippet"),internalSdkSrc:fB("sdkSrc")})),_l=new sAe;function aAe(A,x){IJe(A,null,null,x)}s(aAe,"_disableEvents");function pXe(A){var x=iC(),T=Th(),S=!1,P=[],L=1;T&&!K(T.onLine)&&!T.onLine&&(L=2);var Q=0,X=Ye(),se=Dge($p("OfflineListener"),A);try{if(Te(Mp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var hn=!1;return Vt&&(hn=Pge(Vt,"online",lt,se),hn&&Pge(Vt,"offline",et,se)),hn}s(Te,"_enableEvents");function Ne(){return X}s(Ne,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Le(){var Vt=Ye();X!==Vt&&(X=Vt,qn(P,function(hn){var Wr={isOnline:X,rState:L,uState:Q};try{hn(Wr)}catch{}}))}s(Le,"listnerNoticeCheck");function je(Vt){Q=Vt,Le()}s(je,"setOnlineState");function lt(){L=1,Le()}s(lt,"_setOnline");function et(){L=2,Le()}s(et,"_setOffline");function gt(){var Vt=Mp();if(Vt&&S){if(aAe(Vt,se),x){var hn=x.body||x;O(hn.ononline)||aAe(hn,se)}S=!1}}s(gt,"_unload");function Nt(Vt){return P.push(Vt),{rm:s(function(){var hn=P.indexOf(Vt);if(hn>-1)return P.splice(hn,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Ne,isListening:s(function(){return S},"isListening"),unload:gt,addListener:Nt,setOnlineState:je}}s(pXe,"createOfflineListener");var mXe="AppInsightsChannelPlugin",jE="duration",ic="tags",YJ="deviceType",Zd="data",p1="name",pB="traceID",gi="length",mB="stringify",VE="measurements",Zh="dataType",$E="envelopeType",zE="toString",YE="enqueue",KE="count",m1="push",KJ="emitLineDelimitedJson",k_="clear",q7="markAsSent",hB="clearSent",JJ="bufferOverride",gB="BUFFER_KEY",px="SENT_BUFFER_KEY",B_="concat",AB="MAX_BUFFER_SIZE",yB="triggerSend",Nc="diagLog",XJ="initialize",CB="_sender",xB="endpointUrl",vB="instrumentationKey",ZJ="customHeaders",lAe="maxBatchSizeInBytes",eX="onunloadDisableBeacon",tX="isBeaconApiDisabled",cAe="alwaysUseXhrOverride",uAe="enableSessionStorageBuffer",eg="_buffer",dAe="onunloadDisableFetch",fAe="disableSendBeaconSplit",W7="getSenderInst",JE="_onError",nX="_onPartialSuccess",G7="_onSuccess",rX="itemsReceived",iX="itemsAccepted",oX="baseType",H7="sampleRate",hXe="getHashCodeScore",sX="baseType",Rs="baseData",Sl="properties",pAe="true";function xa(A,x,T){return Wh(A,x,T,ce)}s(xa,"_setValueIf");function gXe(A,x,T){var S=T[ic]=T[ic]||{},P=x.ext=x.ext||{},L=x[ic]=x[ic]||[],Q=P.user;Q&&(xa(S,_l.userAuthUserId,Q.authId),xa(S,_l.userId,Q.id||Q.localId));var X=P.app;X&&xa(S,_l.sessionId,X.sesId);var se=P.device;se&&(xa(S,_l.deviceId,se.id||se.localId),xa(S,_l[YJ],se.deviceClass),xa(S,_l.deviceIp,se.ip),xa(S,_l.deviceModel,se.model),xa(S,_l[YJ],se[YJ]));var Ce=x.ext.web;if(Ce){xa(S,_l.deviceLanguage,Ce.browserLang),xa(S,_l.deviceBrowserVersion,Ce.browserVer),xa(S,_l.deviceBrowser,Ce.browser);var Te=T[Zd]=T[Zd]||{},Ne=Te[Rs]=Te[Rs]||{},Ye=Ne[Sl]=Ne[Sl]||{};xa(Ye,"domain",Ce.domain),xa(Ye,"isManual",Ce.isManual?pAe:null),xa(Ye,"screenRes",Ce.screenRes),xa(Ye,"userConsent",Ce.userConsent?pAe:null)}var Le=P.os;Le&&(xa(S,_l.deviceOS,Le[p1]),xa(S,_l.deviceOSVersion,Le.osVer));var je=P.trace;je&&(xa(S,_l.operationParentId,je.parentID),xa(S,_l.operationName,Pc(A,je[p1])),xa(S,_l.operationId,je[pB]));for(var lt={},et=L[gi]-1;et>=0;et--){var gt=L[et];ne(gt,function(Vt,hn){lt[Vt]=hn}),L.splice(et,1)}ne(L,function(Vt,hn){lt[Vt]=hn});var Nt=Up(Up({},S),lt);Nt[_l.internalSdkVersion]||(Nt[_l.internalSdkVersion]=Pc(A,"javascript:".concat(AXe.Version),64)),T[ic]=B3(Nt)}s(gXe,"_extractPartAExtensions");function mx(A,x,T){K(A)||ne(A,function(S,P){ft(P)?T[S]=P:he(P)?x[S]=P:GC()&&(x[S]=Au()[mB](P))})}s(mx,"_extractPropsAndMeasurements");function XE(A,x){K(A)||ne(A,function(T,S){A[T]=S||x})}s(XE,"_convertPropsUndefinedToCustomDefinedValue");function ZE(A,x,T,S){var P=new WJe(A,S,x);xa(P,"sampleRate",T[Nge]),(T[Rs]||{}).startTime&&(P.time=vE(T[Rs].startTime)),P.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return P[p1]=P[p1].replace("{0}",L),gXe(A,T,P),T[ic]=T[ic]||[],B3(P)}s(ZE,"_createEnvelope");function eI(A,x){K(x[Rs])&&_n(A,1,46,"telemetryItem.baseData cannot be null.")}s(eI,"EnvelopeCreatorInit");var AXe={Version:"3.3.6"};function yXe(A,x,T){eI(A,x);var S=x[Rs][VE]||{},P=x[Rs][Sl]||{};mx(x[Zd],P,S),K(T)||XE(P,T);var L=x[Rs];if(K(L))return p_(A,"Invalid input for dependency data"),null;var Q=L[Sl]&&L[Sl][Lge]?L[Sl][Lge]:"GET",X=new M7(A,L.id,L.target,L[p1],L[jE],L.success,L.responseCode,Q,L.type,L.correlationContext,P,S),se=new GE(M7[Zh],X);return ZE(A,M7[$E],x,se)}s(yXe,"DependencyEnvelopeCreator");function mAe(A,x,T){eI(A,x);var S={},P={};x[sX]!==__[Zh]&&(S.baseTypeSource=x[sX]),x[sX]===__[Zh]?(S=x[Rs][Sl]||{},P=x[Rs][VE]||{}):x[Rs]&&mx(x[Rs],S,P),mx(x[Zd],S,P),K(T)||XE(S,T);var L=x[Rs][p1],Q=new __(A,L,S,P),X=new GE(__[Zh],Q);return ZE(A,__[$E],x,X)}s(mAe,"EventEnvelopeCreator");function CXe(A,x,T){eI(A,x);var S=x[Rs][VE]||{},P=x[Rs][Sl]||{};mx(x[Zd],P,S),K(T)||XE(P,T);var L=x[Rs],Q=L7.CreateFromInterface(A,L,P,S),X=new GE(L7[Zh],Q);return ZE(A,L7[$E],x,X)}s(CXe,"ExceptionEnvelopeCreator");function xXe(A,x,T){eI(A,x);var S=x[Rs],P=S[Sl]||{},L=S[VE]||{};mx(x[Zd],P,L),K(T)||XE(P,T);var Q=new cB(A,S[p1],S.average,S.sampleCount,S.min,S.max,S.stdDev,P,L),X=new GE(cB[Zh],Q);return ZE(A,cB[$E],x,X)}s(xXe,"MetricEnvelopeCreator");function vXe(A,x,T){eI(A,x);var S,P=x[Rs];!K(P)&&!K(P[Sl])&&!K(P[Sl][jE])?(S=P[Sl][jE],delete P[Sl][jE]):!K(x[Zd])&&!K(x[Zd][jE])&&(S=x[Zd][jE],delete x[Zd][jE]);var L=x[Rs],Q;((x.ext||{}).trace||{})[pB]&&(Q=x.ext.trace[pB]);var X=L.id||Q,se=L[p1],Ce=L.uri,Te=L[Sl]||{},Ne=L[VE]||{};if(K(L.refUri)||(Te.refUri=L.refUri),K(L.pageType)||(Te.pageType=L.pageType),K(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[zE]()),!K(L[Sl])){var Ye=L[Sl];ne(Ye,function(lt,et){Te[lt]=et})}mx(x[Zd],Te,Ne),K(T)||XE(Te,T);var Le=new F7(A,se,Ce,S,Te,Ne,X),je=new GE(F7[Zh],Le);return ZE(A,F7[$E],x,je)}s(vXe,"PageViewEnvelopeCreator");function bXe(A,x,T){eI(A,x);var S=x[Rs],P=S[p1],L=S.uri||S.url,Q=S[Sl]||{},X=S[VE]||{};mx(x[Zd],Q,X),K(T)||XE(Q,T);var se=new O7(A,P,L,void 0,Q,X,S),Ce=new GE(O7[Zh],se);return ZE(A,O7[$E],x,Ce)}s(bXe,"PageViewPerformanceEnvelopeCreator");function EXe(A,x,T){eI(A,x);var S=x[Rs].message,P=x[Rs].severityLevel,L=x[Rs][Sl]||{},Q=x[Rs][VE]||{};mx(x[Zd],L,Q),K(T)||XE(L,T);var X=new Q7(A,S,P,L,Q),se=new GE(Q7[Zh],X);return ZE(A,Q7[$E],x,se)}s(EXe,"TraceEnvelopeCreator");var hAe=function(){function A(x,T){var S=[],P=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},nc(A,this,function(Q){Q[YE]=function(X){if(Q[KE]()>=T.eventsLimitInMem){P||(_n(x,2,105,"Maximum in-memory buffer size reached: "+Q[KE](),!0),P=!0);return}X.cnt=X.cnt||0,!(!K(L)&&X.cnt>L)&&S[m1](X)},Q[KE]=function(){return S[gi]},Q.size=function(){for(var X=S[gi],se=0;se<S[gi];se++)X+=S[se].item[gi];return T[KJ]||(X+=2),X},Q[k_]=function(){S=[],P=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(X){if(X&&X[gi]>0){var se=[];qn(X,function(Te){se[m1](Te.item)});var Ce=T[KJ]?se.join(`
`):"["+se.join(",")+"]";return Ce}return null},Q.createNew=function(X,se,Ce){var Te=S.slice(0);X=X||x,se=se||{};var Ne=Ce?new gAe(X,se):new aX(X,se);return qn(Te,function(Ye){Ne[YE](Ye)}),Ne}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),aX=function(A){hE(x,A);function x(T,S){var P=A.call(this,T,S)||this;return nc(x,P,function(L,Q){L[q7]=function(X){Q[k_]()},L[hB]=function(X){}}),P}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(hAe),IXe=["AI_buffer","AI_sentBuffer"],gAe=function(A){hE(x,A);function x(S,P){var L=A.call(this,S,P)||this,Q=!1,X=P?.namePrefix,se=P[JJ]||{getItem:MJe,setItem:QJe},Ce=se.getItem,Te=se.setItem,Ne=P.maxRetryCnt;return nc(x,L,function(Ye,Le){var je=hn(x[gB]),lt=hn(x[px]),et=vi(),gt=lt[B_](et),Nt=Ye._set(je[B_](gt));Nt[gi]>x[AB]&&(Nt[gi]=x[AB]),xi(x[px],[]),xi(x[gB],Nt),Ye[YE]=function(dr){if(Ye[KE]()>=x[AB]){Q||(_n(S,2,67,"Maximum buffer size reached: "+Ye[KE](),!0),Q=!0);return}dr.cnt=dr.cnt||0,!(!K(Ne)&&dr.cnt>Ne)&&(Le[YE](dr),xi(x[gB],Ye._get()))},Ye[k_]=function(){Le[k_](),xi(x[gB],Ye._get()),xi(x[px],[]),Q=!1},Ye[q7]=function(dr){xi(x[gB],Ye._set(Vt(dr,Ye._get())));var Qn=hn(x[px]);Qn instanceof Array&&dr instanceof Array&&(Qn=Qn[B_](dr),Qn[gi]>x[AB]&&(_n(S,1,67,"Sent buffer reached its maximum size: "+Qn[gi],!0),Qn[gi]=x[AB]),xi(x[px],Qn))},Ye[hB]=function(dr){var Qn=hn(x[px]);Qn=Vt(dr,Qn),xi(x[px],Qn)},Ye.createNew=function(dr,Qn,bi){bi=!!bi;var ks=Ye._get().slice(0),Uo=hn(x[px]).slice(0);dr=dr||S,Qn=Qn||{},Ye[k_]();var Ft=bi?new x(dr,Qn):new aX(dr,Qn);return qn(ks,function(On){Ft[YE](On)}),bi&&Ft[q7](Uo),Ft};function Vt(dr,Qn){var bi=[],ks=[];return qn(dr,function(Uo){ks[m1](Uo.item)}),qn(Qn,function(Uo){!Qe(Uo)&&mu(ks,Uo.item)===-1&&bi[m1](Uo)}),bi}s(Vt,"_removePayloadsFromBuffer");function hn(dr){var Qn=dr;return Qn=X?X+"_"+Qn:Qn,Wr(Qn)}s(hn,"_getBuffer");function Wr(dr){try{var Qn=Ce(S,dr);if(Qn){var bi=Au().parse(Qn);if(he(bi)&&(bi=Au().parse(bi)),bi&&Ze(bi))return bi}}catch(ks){_n(S,1,42," storage key: "+dr+", "+ll(ks),{exception:Lt(ks)})}return[]}s(Wr,"_getBufferBase");function xi(dr,Qn){var bi=dr;try{bi=X?X+"_"+bi:bi;var ks=JSON[mB](Qn);Te(S,bi,ks)}catch(Uo){Te(S,bi,JSON[mB]([])),_n(S,2,41," storage key: "+bi+", "+ll(Uo)+". Buffer cleared",{exception:Lt(Uo)})}}s(xi,"_setBuffer");function vi(){var dr=[];try{return qn(IXe,function(Qn){var bi=ho(Qn);if(dr=dr[B_](bi),X){var ks=X+"_"+Qn,Uo=ho(ks);dr=dr[B_](Uo)}}),dr}catch(Qn){_n(S,2,41,"Transfer events from previous buffers: "+ll(Qn)+". previous Buffer items can not be removed",{exception:Lt(Qn)})}return[]}s(vi,"_getPreviousEvents");function ho(dr){try{var Qn=Wr(dr),bi=[];return qn(Qn,function(ks){var Uo={item:ks,cnt:0};bi[m1](Uo)}),OJe(S,dr),bi}catch{}return[]}s(ho,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(hAe),TXe=function(){function A(x){nc(A,this,function(T){T.serialize=function(Q){var X=S(Q,"root");try{return Au()[mB](X)}catch(se){_n(x,1,48,se&&Qe(se[zE])?se[zE]():"Error serializing object",null,!0)}};function S(Q,X){var se="__aiCircularRefCheck",Ce={};if(!Q)return _n(x,1,48,"cannot serialize object because it is null or undefined",{name:X},!0),Ce;if(Q[se])return _n(x,2,50,"Circular reference detected while serializing object",{name:X},!0),Ce;if(!Q.aiDataContract){if(X==="measurements")Ce=L(Q,"number",X);else if(X==="properties")Ce=L(Q,"string",X);else if(X==="tags")Ce=L(Q,"string",X);else if(Ze(Q))Ce=P(Q,X);else{_n(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:X},!0);try{Au()[mB](Q),Ce=Q}catch(Te){_n(x,1,48,Te&&Qe(Te[zE])?Te[zE]():"Error serializing object",null,!0)}}return Ce}return Q[se]=!0,ne(Q.aiDataContract,function(Te,Ne){var Ye=Qe(Ne)?Ne()&1:Ne&1,Le=Qe(Ne)?Ne()&4:Ne&4,je=Ne&2,lt=Q[Te]!==void 0,et=ke(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!je)_n(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:X});else if(!Le){var gt=void 0;et?je?gt=P(Q[Te],Te):gt=S(Q[Te],Te):gt=Q[Te],gt!==void 0&&(Ce[Te]=gt)}}),delete Q[se],Ce}s(S,"_serializeObject");function P(Q,X){var se;if(Q)if(!Ze(Q))_n(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:X},!0);else{se=[];for(var Ce=0;Ce<Q[gi];Ce++){var Te=Q[Ce],Ne=S(Te,X+"["+Ce+"]");se[m1](Ne)}}return se}s(P,"_serializeArray");function L(Q,X,se){var Ce;return Q&&(Ce={},ne(Q,function(Te,Ne){if(X==="string")Ne===void 0?Ce[Te]="undefined":Ne===null?Ce[Te]="null":Ne[zE]?Ce[Te]=Ne[zE]():Ce[Te]="invalid field: toString() is not defined.";else if(X==="number")if(Ne===void 0)Ce[Te]="undefined";else if(Ne===null)Ce[Te]="null";else{var Ye=parseFloat(Ne);Ce[Te]=Ye}else Ce[Te]="invalid field: "+se+" is of unknown type.",_n(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),wXe=8,_Xe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[gi]<wXe;)x=x[B_](x);for(var T=5381,S=0;S<x[gi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),SXe=function(){function A(){var x=this,T=new _Xe,S=new sAe;x.getSamplingScore=function(P){var L=0;return P[ic]&&P[ic][S.userId]?L=T.getHashCodeScore(P[ic][S.userId]):P.ext&&P.ext.user&&P.ext.user.id?L=T[hXe](P.ext.user.id):P[ic]&&P[ic][S.operationId]?L=T.getHashCodeScore(P[ic][S.operationId]):P.ext&&P.ext.telemetryTrace&&P.ext.telemetryTrace[pB]?L=T.getHashCodeScore(P.ext.telemetryTrace[pB]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),RXe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||DE(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[H7]=x,this.samplingScoreGenerator=new SXe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[H7],S=!1;return T==null||T>=100||x.baseType===cB[Zh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),ss,h1,tg=void 0,AAe="",kXe=65e3;function yAe(A){try{return A.responseText}catch{}return null}s(yAe,"_getResponseText");function BXe(A){return A&&A.sendPOST}s(BXe,"isOverrideFn");var CAe=Xt((ss={endpointUrl:j3(ce,LJ+E_)},ss[KJ]=ff(),ss.maxBatchInterval=15e3,ss[lAe]=102400,ss.disableTelemetry=ff(),ss[uAe]=ff(!0),ss.isRetryDisabled=ff(),ss[tX]=ff(!0),ss[fAe]=ff(!0),ss.disableXhr=ff(),ss[dAe]=ff(),ss[eX]=ff(),ss[vB]=tg,ss.namePrefix=tg,ss.samplingPercentage=j3(DXe,100),ss[ZJ]=tg,ss.convertUndefined=tg,ss.eventsLimitInMem=1e4,ss[JJ]=!1,ss.httpXHROverride={isVal:BXe,v:tg},ss[cAe]=ff(),ss.transports=tg,ss.retryCodes=tg,ss.maxRetryCnt={isVal:ft,v:10},ss));function DXe(A){return!isNaN(A)&&A>0&&A<=100}s(DXe,"_chkSampling");var PXe=(h1={},h1[__.dataType]=mAe,h1[Q7.dataType]=EXe,h1[F7.dataType]=vXe,h1[O7.dataType]=bXe,h1[L7.dataType]=CXe,h1[cB.dataType]=xXe,h1[M7.dataType]=yXe,h1),xAe=function(A){hE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=mXe;var S,P,L,Q,X,se,Ce,Te=0,Ne,Ye,Le,je,lt,et,gt,Nt,Vt,hn,Wr,xi,vi,ho,dr,Qn,bi,ks,Uo,Ft,On,so,bt,wr,zs,go,Rl;return nc(x,T,function(st,qa){bAe(),st.pause=function(){yx(),L=!0},st.resume=function(){L&&(L=!1,P=null,To(),L_())},st.flush=function(Ue,mt,Zt){if(Ue===void 0&&(Ue=!0),!L){yx();try{return st[yB](Ue,null,Zt||1)}catch(kn){_n(st[Nc](),1,22,"flush failed, telemetry will not be collected: "+ll(kn),{exception:Lt(kn)})}}},st.onunloadFlush=function(){if(!L)if(gt||Ft)try{return st[yB](!0,id,2)}catch(Ue){_n(st[Nc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ll(Ue),{exception:Lt(Ue)})}else st.flush(!1)},st.addHeader=function(Ue,mt){Ce[Ue]=mt},st[XJ]=function(Ue,mt,Zt,kn){st.isInitialized()&&_n(st[Nc](),1,28,"Sender is already initialized"),qa[XJ](Ue,mt,Zt,kn);var Pr=st.identifier;X=new TXe(mt.logger),S=0,P=null,st[CB]=null,se=0;var hr=st[Nc]();Le=Dge($p("Sender"),mt.evtNamespace&&mt.evtNamespace()),Ye=pXe(Le),st._addHook(zp(Ue,function($i){var va=$i.cfg;va.storagePrefix&&FJe(va.storagePrefix);var e0=sx(null,va,mt),li=e0.getExtCfg(Pr,CAe),EAe=li[xB];if(je&&EAe===je){var uX=va[xB];uX&&uX!==EAe&&(li[xB]=uX)}vt(li[vB])&&(li[vB]=va[vB]),ze(st,"_senderConfig",{g:s(function(){return li},"g")}),lt!==li[xB]&&(je=lt=li[xB]),mt.activeStatus()===Lh.PENDING?st.pause():mt.activeStatus()===Lh.ACTIVE&&st.resume(),hn&&hn!==li[ZJ]&&qn(hn,function(sc){delete Ce[sc.header]}),et=li[lAe],gt=(li[eX]===!1||li[tX]===!1)&&Hh(),Nt=li[eX]===!1&&Hh(),Vt=li[tX]===!1&&Hh(),Ft=li[cAe],On=!!li.disableXhr,Rl=li.retryCodes;var dX=li[JJ],F_=!!li[uAe]&&(!!dX||Vge()),IAe=li.namePrefix,MXe=F_!==Qn||F_&&ks!==IAe||F_&&bi!==dX;if(st[eg]){if(MXe)try{st[eg]=st[eg].createNew(hr,li,F_)}catch(sc){_n(st[Nc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+ll(sc),{exception:Lt(sc)})}To()}else st[eg]=F_?new gAe(hr,li):new aX(hr,li);ks=IAe,Qn=F_,bi=dX,so=!li[dAe]&&_E(!0),zs=!!li[fAe],st._sample=new RXe(li.samplingPercentage,hr),xi=li[vB],!vt(xi)&&!vAe(xi,va)&&_n(hr,1,100,"Invalid Instrumentation key "+xi),hn=li[ZJ],he(je)&&!Gge(je)&&hn&&hn[gi]>0?qn(hn,function(sc){T.addHeader(sc.header,sc.value)}):hn=null,Uo=li.enableSendPromise;var TAe=kl();go?go.SetConfig(TAe):(go=new Ua,go[XJ](TAe,hr));var z7=li.httpXHROverride,Y7=null,TB=null,QXe=GN([3,1,2],li.transports);Y7=go&&go[W7](QXe,!1);var fX=go&&go.getFallbackInst();bt=s(function(sc,tI){return Dn(fX,sc,tI)},"_xhrSend"),wr=s(function(sc,tI){return Dn(fX,sc,tI,!1)},"_fallbackSend"),Y7=Ft?z7:Y7||z7||fX,st[CB]=function(sc,tI){return Dn(Y7,sc,tI)},so&&(Ne=N_);var pX=GN([3,1],li.unloadTransports);so||(pX=pX.filter(function(sc){return sc!==2})),TB=go&&go[W7](pX,!0),TB=Ft?z7:TB||z7,(Ft||li.unloadTransports||!Ne)&&TB&&(Ne=s(function(sc,tI){return Dn(TB,sc,tI)},"_syncUnloadSender")),Ne||(Ne=bt),Wr=li.disableTelemetry,vi=li.convertUndefined||tg,ho=li.isRetryDisabled,dr=li.maxBatchInterval}))},st.processTelemetry=function(Ue,mt){mt=st._getTelCtx(mt);var Zt=mt[Nc]();try{var kn=Jp(Ue,Zt);if(!kn)return;var Pr=Ax(Ue,Zt);if(!Pr)return;var hr=X.serialize(Pr),$i=st[eg];To(hr);var va={item:hr,cnt:0};$i[YE](va),L_()}catch(e0){_n(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ll(e0),{exception:Lt(e0)})}st.processNext(Ue,mt)},st.isCompletelyIdle=function(){return!L&&Te===0&&st._buffer[KE]()===0},st.getOfflineListener=function(){return Ye},st._xhrReadyStateChange=function(Ue,mt,Zt){if(!Zp(mt))return gf(Ue,mt,Zt)},st[yB]=function(Ue,mt,Zt){Ue===void 0&&(Ue=!0);var kn;if(!L)try{var Pr=st[eg];if(Wr)Pr[k_]();else if(Pr[KE]()>0){var hr=Pr.getItems();$7(Zt||0,Ue),mt?kn=mt.call(st,hr,Ue):kn=st[CB](hr,Ue)}yx()}catch(va){var $i=HC();(!$i||$i>9)&&_n(st[Nc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+ll(va),{exception:Lt(va)})}return kn},st.getOfflineSupport=function(){return{getUrl:s(function(){return je},"getUrl"),createPayload:dt,serialize:Bs,batch:oc,shouldProcess:s(function(Ue){return!!Jp(Ue)},"shouldProcess")}},st._doTeardown=function(Ue,mt){st.onunloadFlush(),XC(Ye,!1),bAe()},st[JE]=function(Ue,mt,Zt){if(!Zp(Ue))return Cu(Ue,mt)},st[nX]=function(Ue,mt){if(!Zp(Ue))return hx(Ue,mt)},st[G7]=function(Ue,mt){if(!Zp(Ue))return Kp(Ue)},st._xdrOnLoad=function(Ue,mt){if(!Zp(mt))return Ys(Ue,mt)};function Ys(Ue,mt){var Zt=yAe(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,st[G7](mt,0);else{var kn=Bn(Zt);kn&&kn[rX]&&kn[rX]>kn[iX]&&!ho?st[nX](mt,kn):st[JE](mt,WN(Ue))}}s(Ys,"_xdrOnLoad");function kl(){try{var Ue={xdrOnComplete:s(function(Zt,kn,Pr){var hr=gx(Pr);if(hr)return Ys(Zt,hr)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,kn,Pr,hr){var $i=gx(hr);if($i)return as(Zt.status,$i,Zt.url,$i[gi],Zt.statusText,Pr||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,kn,Pr){var hr=gx(Pr);if(hr)return gf(Zt,hr,hr[gi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,kn,Pr){return Xp(Zt,kn,Pr)},"beaconOnRetry")},mt={enableSendPromise:Uo,isOneDs:!1,disableCredentials:!1,disableXhr:On,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return mt}catch{}return null}s(kl,"_getSendPostMgrConfig");function gf(Ue,mt,Zt){Ue.readyState===4&&as(Ue.status,mt,Ue.responseURL,Zt,n_(Ue),yAe(Ue)||Ue.response)}s(gf,"_xhrReadyStateChange");function Cu(Ue,mt,Zt){_n(st[Nc](),2,26,"Failed to send telemetry.",{message:mt}),st._buffer&&st._buffer[hB](Ue)}s(Cu,"_onError");function hx(Ue,mt){for(var Zt=[],kn=[],Pr=mt.errors.reverse(),hr=0,$i=Pr;hr<$i.length;hr++){var va=$i[hr],e0=Ue.splice(va.index,1)[0];Cx(va.statusCode)?kn[m1](e0):Zt[m1](e0)}Ue[gi]>0&&st[G7](Ue,mt[iX]),Zt[gi]>0&&st[JE](Zt,n_(null,["partial success",mt[iX],"of",mt.itemsReceived].join(" "))),kn[gi]>0&&(IB(kn),_n(st[Nc](),2,40,"Partial success. Delivered: "+Ue[gi]+", Failed: "+Zt[gi]+". Will retry to send "+kn[gi]+" our of "+mt[rX]+" items"))}s(hx,"_onPartialSuccess");function Kp(Ue,mt){st._buffer&&st._buffer[hB](Ue)}s(Kp,"_onSuccess");function gx(Ue){try{if(Ue){var mt=Ue,Zt=mt.oriPayload;return Zt&&Zt[gi]?Zt:null}}catch{}return null}s(gx,"_getPayloadArr");function Jp(Ue,mt){if(Wr)return!1;if(!Ue)return mt&&_n(mt,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[oX])return mt&&_n(mt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[oX]||(Ue[oX]="EventData"),!st[CB])return mt&&_n(mt,1,28,"Sender was not initialized"),!1;if(fn(Ue))Ue[Nge]=st._sample[H7];else return mt&&_n(mt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:st._sample[H7]}),!1;return!0}s(Jp,"_validate");function Ax(Ue,mt){var Zt=Ue.iKey||xi,kn=x.constructEnvelope(Ue,Zt,mt,vi);if(!kn){_n(mt,1,47,"Unable to create an AppInsights envelope");return}var Pr=!1;if(Ue[ic]&&Ue[ic][NJ]&&(qn(Ue[ic][NJ],function(hr){try{hr&&hr(kn)===!1&&(Pr=!0,p_(mt,"Telemetry processor check returns false"))}catch($i){_n(mt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ll($i),{exception:Lt($i)},!0)}}),delete Ue[ic][NJ]),!Pr)return kn}s(Ax,"_getEnvelope");function Bs(Ue){var mt=AAe,Zt=st[Nc]();try{var kn=Jp(Ue,Zt),Pr=null;kn&&(Pr=Ax(Ue,Zt)),Pr&&(mt=X.serialize(Pr))}catch{}return mt}s(Bs,"_serialize");function oc(Ue){var mt=AAe;return Ue&&Ue[gi]&&(mt="["+Ue.join(",")+"]"),mt}s(oc,"_batch");function dt(Ue){var mt=vo();return{urlString:je,data:Ue,headers:mt}}s(dt,"_createPayload");function fn(Ue){return st._sample.isSampledIn(Ue)}s(fn,"_isSampledIn");function Br(Ue,mt,Zt,kn){mt===200&&Ue?st._onSuccess(Ue,Ue[gi]):kn&&st[JE](Ue,kn)}s(Br,"_getOnComplete");function Dn(Ue,mt,Zt,kn){kn===void 0&&(kn=!0);var Pr=s(function(va,e0,li){return Br(mt,va,e0,li)},"onComplete"),hr=Dr(mt),$i=Ue&&Ue.sendPOST;return $i&&hr?(kn&&st._buffer[q7](mt),$i(hr,Pr,!Zt)):null}s(Dn,"_doSend");function Dr(Ue){if(Ze(Ue)&&Ue[gi]>0){var mt=st[eg].batchPayloads(Ue),Zt=vo(),kn={data:mt,urlString:je,headers:Zt,disableXhrSync:On,disableFetchKeepAlive:!so,oriPayload:Ue};return kn}return null}s(Dr,"_getPayload");function vo(){try{var Ue=Ce||{};return Gge(je)&&(Ue[Fge[6]]=Fge[7]),Ue}catch{}return null}s(vo,"_getHeaders");function To(Ue){var mt=Ue?Ue[gi]:0;return st[eg].size()+mt>et?((!Ye||Ye.isOnline())&&st[yB](!0,null,10),!0):!1}s(To,"_checkMaxSize");function as(Ue,mt,Zt,kn,Pr,hr){var $i=null;if(st._appId||($i=Bn(hr),$i&&$i.appId&&(st._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Lc(Zt)){st[JE](mt,Pr);return}if(Ye&&!Ye.isOnline()){if(!ho){var va=10;IB(mt,va),_n(st[Nc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(mt.length," items."))}return}!ho&&Cx(Ue)?(IB(mt),_n(st[Nc](),2,40,". Response code "+Ue+". Will retry to send "+mt[gi]+" items.")):st[JE](mt,Pr)}else Lc(Zt),Ue===206?($i||($i=Bn(hr)),$i&&!ho?st[nX](mt,$i):st[JE](mt,Pr)):(S=0,st[G7](mt,kn))}s(as,"_checkResponsStatus");function Lc(Ue){return se>=10?!1:!K(Ue)&&Ue!==""&&Ue!==je?(je=Ue,++se,!0):!1}s(Lc,"_checkAndUpdateEndPointUrl");function id(Ue,mt){if(Ne)Ne(Ue,!1);else{var Zt=go&&go[W7]([3],!0);return Dn(Zt,Ue,mt)}}s(id,"_doUnloadSend");function Xp(Ue,mt,Zt){var kn=Ue,Pr=kn&&kn.oriPayload;if(zs)wr&&wr(Pr,!0),_n(st[Nc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var hr=[],$i=0;$i<Pr[gi];$i++){var va=Pr[$i],e0=[va],li=Dr(e0);Zt(li,mt)?st._onSuccess(e0,e0[gi]):hr[m1](va)}hr[gi]>0&&(wr&&wr(hr,!0),_n(st[Nc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Xp,"_onBeaconRetry");function Zp(Ue){try{if(Ue&&Ue[gi])return he(Ue[0])}catch{}return null}s(Zp,"_isStringArr");function N_(Ue,mt){var Zt=null;if(Ze(Ue)){for(var kn=Ue[gi],Pr=0;Pr<Ue[gi];Pr++)kn+=Ue[Pr].item[gi];var hr=go.getSyncFetchPayload();hr+kn<=kXe?Zt=2:Hh()?Zt=3:(Zt=1,_n(st[Nc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=go&&go[W7]([Zt],!0);return Dn($i,Ue,mt)}return null}s(N_,"_fetchKeepAliveSender");function IB(Ue,mt){if(mt===void 0&&(mt=1),!(!Ue||Ue[gi]===0)){var Zt=st[eg];Zt[hB](Ue),S++;for(var kn=0,Pr=Ue;kn<Pr.length;kn++){var hr=Pr[kn];hr.cnt=hr.cnt||0,hr.cnt++,Zt[YE](hr)}cX(mt),L_()}}s(IB,"_resendPayload");function cX(Ue){var mt=10,Zt;if(S<=1)Zt=mt;else{var kn=(Math.pow(2,S)-1)/2,Pr=VA(Math.random()*kn*mt)+1;Pr=Ue*Pr,Zt=_e(Vr(Pr,3600),mt)}var hr=Rh()+Zt*1e3;P=hr}s(cX,"_setRetryTime");function L_(){if(!Q&&!L){var Ue=P?_e(0,P-Rh()):0,mt=_e(dr,Ue);Q=Dh(function(){Q=null,st[yB](!0,null,1)},mt)}}s(L_,"_setupTimer");function yx(){Q&&Q.cancel(),Q=null,P=null}s(yx,"_clearScheduledTimer");function Cx(Ue){return K(Rl)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:Rl[gi]&&Rl.indexOf(Ue)>-1}s(Cx,"_isRetriable");function V7(){var Ue="getNotifyMgr";return st.core[Ue]?st.core[Ue]():st.core._notificationManager}s(V7,"_getNotifyMgr");function $7(Ue,mt){var Zt=V7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,mt)}catch(kn){_n(st[Nc](),1,74,"send request notification failed: "+ll(kn),{exception:Lt(kn)})}}s($7,"_notifySendRequest");function vAe(Ue,mt){var Zt=mt.disableInstrumentationKeyValidation,kn=K(Zt)?!1:Zt;if(kn)return!0;var Pr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",hr=new RegExp(Pr);return hr.test(Ue)}s(vAe,"_validateInstrumentationKey");function bAe(){st[CB]=null,st[eg]=null,st._appId=null,st._sample=null,Ce={},Ye=null,S=0,P=null,L=!1,Q=null,X=null,se=0,Te=0,Ne=null,Le=null,je=null,lt=null,et=0,gt=!1,hn=null,Wr=!1,xi=null,vi=tg,ho=!1,Qn=null,ks=tg,On=!1,so=!1,zs=!1,bt=null,wr=null,go=null,ze(st,"_senderConfig",{g:s(function(){return qN({},CAe)},"g")})}s(bAe,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,P,L){var Q;S!==T.iKey&&!K(S)?Q=Up(Up({},T),{iKey:S}):Q=T;var X=PXe[Q.baseType]||mAe;return X(P,Q,L)},x}(pt),D_="instrumentationKey",j7="connectionString",bB="endpointUrl",EB="userOverrideEndpointUrl",P_,lX=void 0,NXe=(P_={diagnosticLogInterval:j3(LXe,1e4)},P_[j7]=lX,P_.endpointUrl=lX,P_[D_]=lX,P_.extensionConfig={},P_);function LXe(A){return A&&A>0}s(LXe,"_chkDiagLevel");var FXe=function(){function A(x){var T=new Et,S;(K(x)||K(x[D_])&&K(x[j7]))&&Hn("Invalid input configuration"),nc(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=P,k3(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var X=rd(x||{},NXe);S=X.cfg,T.addUnloadHook(zp(X,function(){var se=S[j7];if(vt(se)){var Ce=$w(function(Le,je){Xu(se,function(lt){var et=lt.value,gt=S[D_];if(!lt.rejected&&et){S[j7]=et;var Nt=GJ(et);gt=Nt.instrumentationkey||gt}Le(gt)})}),Te=$w(function(Le,je){Xu(se,function(lt){var et=lt.value,gt=S[bB];if(!lt.rejected&&et){var Nt=GJ(et),Vt=Nt.ingestionendpoint;gt=Vt?Vt+E_:gt}Le(gt)})});S[D_]=Ce,S[bB]=S[EB]||Te}if(he(se)){var Ne=GJ(se),Ye=Ne.ingestionendpoint;S[bB]=S[EB]?S[EB]:Ye+E_,S[D_]=Ne.instrumentationkey||S[D_]}S[bB]=S[EB]?S[EB]:S[bB]})),T.initialize(S,[new xAe])}s(Q,"_initialize")});function P(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(P,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=Et,t.ApplicationInsights=FXe,t.Sender=xAe,t.SeverityLevel=fXe,t.arrForEach=qn,t.isNullOrUndefined=K,t.proxyFunctions=k3,t.throwError=Hn})});var D2e=W(vg=>{"use strict";f();Object.defineProperty(vg,"__esModule",{value:!0});vg.bytePairEncode=vg.BinaryMap=vg.binaryMapKey=void 0;var _lt=s((t,e,n)=>{let r=n-e,i=16777215>>>Math.max(0,(3-r)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");vg.binaryMapKey=_lt;var Fte=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let i=r<6+n,o=(0,vg.binaryMapKey)(e,n,r);return i?this.final.get(o):this.nested.get(o)?.get(e,6+n,r)}set(e,n){let r=(0,vg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let o=this.nested.get(r);if(o instanceof t)o.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};vg.BinaryMap=Fte;var xg=new Int32Array(128),_u=new Int32Array(128);function Slt(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,i=-1;for(;xg.length<n*2;)_u=new Int32Array(_u.length*2),xg=new Int32Array(xg.length*2);for(let c=0;c<n-1;c++){let u=e.get(t,c,c+2)??2147483647;u<r&&(r=u,i=c),_u[c]=c,xg[c]=u}_u[n-1]=n-1,xg[n-1]=2147483647,_u[n]=n,xg[n]=2147483647;let o=n+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,_u[c],_u[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");r!==2147483647;){xg[_u[i]]=a(i,1),i>0&&(xg[_u[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)_u[c]=_u[c+1];o--,i=-1,r=2147483647;for(let c=0;c<o-1;c++){let u=xg[_u[c]];xg[_u[c]]<r&&(r=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,_u[c],_u[c+1]));return l}s(Slt,"bytePairEncode");vg.bytePairEncode=Slt});var P2e=W(FM=>{"use strict";f();Object.defineProperty(FM,"__esModule",{value:!0});FM.makeTextEncoder=void 0;var Mte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},Qte=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},Rlt=s(()=>typeof Buffer<"u"?new Qte:new Mte,"makeTextEncoder");FM.makeTextEncoder=Rlt});var N2e=W(MM=>{"use strict";f();Object.defineProperty(MM,"__esModule",{value:!0});MM.LRUCache=void 0;var Ote=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let i=new Ute(e,n);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};MM.LRUCache=Ote;var Ute=class{static{s(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var Wte=W(OM=>{"use strict";f();Object.defineProperty(OM,"__esModule",{value:!0});OM.TikTokenizer=void 0;var QM=D2e(),klt=P2e(),Blt=N2e();function Dlt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return n(i),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let i of r.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(n,"processBpeRanks")}s(Dlt,"loadTikTokenBpe");function Plt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Plt,"escapeRegExp");var qte=class{static{s(this,"TikTokenizer")}constructor(e,n,r,i=8192){this.textEncoder=(0,klt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new Blt.LRUCache(i);let o=typeof e=="string"?Dlt(e):e;this.init(o,n,r)}init(e,n,r){this.encoder=new QM.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(i=>Plt(i)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of n)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,n,r){let i=n,o=null;if(r&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||r&&r.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,n){let r=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,n),a>i&&this.encodeByIndex(e,r,i,a),o){if(i=i+this.encodeSpecialToken(r,o),i>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,i){let o,a=e.substring(r,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)n.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)n.push(u),this.cache.set(o[0],[u]);else{let d=(0,QM.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)n.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,n,r,i,o,a,l){let c,u=e.substring(r,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,n.push(...p);else{let m=o-a;a+=m,l+=d.length,n.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,n.push(h);else break;else{let g=(0,QM.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)n.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)n.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,r),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,n,a,l);if(a=p,l=m,a>=n)break}if(u!==null){if(a++,a<=n&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=n)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,n,r){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,r),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,QM.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let B of k)i.push(B);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=n)return{tokenIds:i,text:e};let u=a-n,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>n){let m=this.encode(e,r),h=m.slice(m.length-n);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let n=[];for(let r of e){let i=[],o=this.decoder?.get(r);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...i)}return this.textDecoder.decode(new Uint8Array(n))}};OM.TikTokenizer=qte});var H2e=W(za=>{"use strict";f();Object.defineProperty(za,"__esModule",{value:!0});za.createTokenizer=za.createByEncoderName=za.createByModelName=za.getRegexByModel=za.getRegexByEncoder=za.getSpecialTokensByModel=za.getSpecialTokensByEncoder=za.MODEL_TO_ENCODING=void 0;var Nlt=Wte(),Llt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);za.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var UM="<|endoftext|>",L2e="<|fim_prefix|>",F2e="<|fim_middle|>",M2e="<|fim_suffix|>",Q2e="<|endofprompt|>",C8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",O2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Flt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],U2e=Flt.join("|");function Gte(t){let e="";if(za.MODEL_TO_ENCODING.has(t))e=za.MODEL_TO_ENCODING.get(t);else for(let[n,r]of Llt)if(t.startsWith(n)){e=r;break}return e}s(Gte,"getEncoderFromModelName");async function Mlt(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let i=await r.text();n.writeFileSync(e,i)}s(Mlt,"fetchAndSaveFile");function Hte(t){let e=new Map([[UM,50256]]);switch(t){case"o200k_base":e=new Map([[UM,199999],[Q2e,200018]]);break;case"cl100k_base":e=new Map([[UM,100257],[L2e,100258],[F2e,100259],[M2e,100260],[Q2e,100276]]);break;case"p50k_edit":e=new Map([[UM,50256],[L2e,50281],[F2e,50282],[M2e,50283]]);break;default:break}return e}s(Hte,"getSpecialTokensByEncoder");za.getSpecialTokensByEncoder=Hte;function Qlt(t){let e=Gte(t);return Hte(e)}s(Qlt,"getSpecialTokensByModel");za.getSpecialTokensByModel=Qlt;function q2e(t){switch(t){case"o200k_base":return U2e;case"cl100k_base":return O2e;default:break}return C8}s(q2e,"getRegexByEncoder");za.getRegexByEncoder=q2e;function Olt(t){let e=Gte(t);return q2e(e)}s(Olt,"getRegexByModel");za.getRegexByModel=Olt;async function Ult(t,e=null){return W2e(Gte(t),e)}s(Ult,"createByModelName");za.createByModelName=Ult;async function W2e(t,e=null){let n,r,i=Hte(t);switch(t){case"o200k_base":n=U2e,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=O2e,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=C8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=C8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=C8,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=C8,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(r),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${r}`),await Mlt(r,u),console.log(`Saved file to ${u}`)),G2e(u,i,n)}s(W2e,"createByEncoderName");za.createByEncoderName=W2e;function G2e(t,e,n,r=8192){return new Nlt.TikTokenizer(t,e,n,r)}s(G2e,"createTokenizer");za.createTokenizer=G2e});var j2e=W(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTokenizer=Ya.createByEncoderName=Ya.createByModelName=Ya.getSpecialTokensByModel=Ya.getSpecialTokensByEncoder=Ya.getRegexByModel=Ya.getRegexByEncoder=Ya.MODEL_TO_ENCODING=Ya.TikTokenizer=void 0;var qlt=Wte();Object.defineProperty(Ya,"TikTokenizer",{enumerable:!0,get:s(function(){return qlt.TikTokenizer},"get")});var Kx=H2e();Object.defineProperty(Ya,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return Kx.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ya,"getRegexByEncoder",{enumerable:!0,get:s(function(){return Kx.getRegexByEncoder},"get")});Object.defineProperty(Ya,"getRegexByModel",{enumerable:!0,get:s(function(){return Kx.getRegexByModel},"get")});Object.defineProperty(Ya,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return Kx.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ya,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return Kx.getSpecialTokensByModel},"get")});Object.defineProperty(Ya,"createByModelName",{enumerable:!0,get:s(function(){return Kx.createByModelName},"get")});Object.defineProperty(Ya,"createByEncoderName",{enumerable:!0,get:s(function(){return Kx.createByEncoderName},"get")});Object.defineProperty(Ya,"createTokenizer",{enumerable:!0,get:s(function(){return Kx.createTokenizer},"get")})});var Zte=W((lbn,mTe)=>{"use strict";f();mTe.exports=s(function(e,n){n===!0&&(n=0);var r="";if(typeof e=="string")try{r=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(r=e.protocol);var i=r.split(/\:|\+/).filter(Boolean);return typeof n=="number"?i[n]:i},"protocols")});var gTe=W((dbn,hTe)=>{"use strict";f();var xdt=Zte();function vdt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var n=new URL(t);e.protocols=xdt(n),e.protocol=e.protocols[0],e.port=n.port,e.resource=n.hostname,e.host=n.host,e.user=n.username||"",e.password=n.password||"",e.pathname=n.pathname,e.hash=n.hash.slice(1),e.search=n.search.slice(1),e.href=n.href,e.query=Object.fromEntries(n.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(vdt,"parsePath");hTe.exports=vdt});var bTe=W((mbn,vTe)=>{"use strict";f();var bdt=gTe();function Edt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Edt,"_interopDefaultLegacy");var Idt=Edt(bdt);function Tdt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=s(function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:s(function(){return t[r]},"get")})}),n}s(Tdt,"getAugmentedNamespace");var yTe={},wdt="text/plain",_dt="us-ascii",ATe=s((t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),"testParameter"),Sdt=s((t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:r,data:i,hash:o}=n.groups,a=r.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===_dt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==wdt)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function Rdt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Sdt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];ATe(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])ATe(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(Rdt,"normalizeUrl");var kdt=Object.freeze({__proto__:null,default:Rdt}),Bdt=Tdt(kdt);Object.defineProperty(yTe,"__esModule",{value:!0});var Ddt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pdt=Bdt,Ndt=CTe(Pdt),Ldt=Idt.default,Fdt=CTe(Ldt);function CTe(t){return t&&t.__esModule?t:{default:t}}s(CTe,"_interopRequireDefault");var xTe=s(function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),n&&((typeof n>"u"?"undefined":Ddt(n))!=="object"&&(n={stripHash:!1}),e=(0,Ndt.default)(e,n));var o=(0,Fdt.default)(e);if(o.parse_failed){var a=o.href.match(r);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");xTe.MAX_INPUT_LENGTH=2048;var Mdt=yTe.default=xTe;vTe.exports=Mdt});var TTe=W((Abn,ITe)=>{"use strict";f();var Qdt=Zte();function ETe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=Qdt(t);if(t=t.substring(t.indexOf("://")+3),ETe(e))return!0;var n=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(n)&&t.indexOf("@")<t.indexOf(":")}s(ETe,"isSsh");ITe.exports=ETe});var STe=W((xbn,_Te)=>{"use strict";f();var Odt=bTe(),wTe=TTe();function Udt(t){let e=Odt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),wTe(e.protocols)||e.protocols.length===0&&wTe(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(Udt,"gitUp");_Te.exports=Udt});var kTe=W((Ebn,RTe)=>{"use strict";f();var qdt=STe();function ene(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var n=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;n.test(t)&&(t="https://github.com/"+t);var r=qdt(t),i=r.resource.split("."),o=null;switch(r.toString=function(E){return ene.stringify(this,E)},r.source=i.length>2?i.slice(1-i.length).join("."):r.source=r.resource,r.git_suffix=/\.git$/.test(r.pathname),r.name=decodeURIComponent((r.pathname||r.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),r.owner=decodeURIComponent(r.user),r.source){case"git.cloudforge.com":r.owner=r.user,r.organization=i[0],r.source="cloudforge.com";break;case"visualstudio.com":if(r.resource==="vs-ssh.visualstudio.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3],r.full_name=o[2]+"/"+o[3]);break}else{o=r.name.split("/"),o.length===2?(r.owner=o[1],r.name=o[1],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name);break}case"dev.azure.com":case"azure.com":if(r.resource==="ssh.dev.azure.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3]);break}else{o=r.name.split("/"),o.length===5?(r.organization=o[0],r.owner=o[1],r.name=o[4],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name),r.query&&r.query.path&&(r.filepath=r.query.path.replace(/^\/+/g,"")),r.query&&r.query.version&&(r.ref=r.query.version.replace(/^GB/,""));break}default:o=r.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,r.owner=o.slice(0,a).join("/"),r.name=o[a],d&&p<0&&(r.commit=o[a+2])}r.ref="",r.filepathtype="",r.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(r.filepathtype=o[y+1],r.ref=o[y+2],o.length>y+3&&(r.filepath=o.slice(y+3).join("/"))),r.organization=r.owner;break}r.full_name||(r.full_name=r.owner,r.name&&(r.full_name&&(r.full_name+="/"),r.full_name+=r.name)),r.owner.startsWith("scm/")&&(r.source="bitbucket-server",r.owner=r.owner.replace("scm/",""),r.organization=r.owner,r.full_name=r.owner+"/"+r.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(r.pathname);return b!=null&&(r.source="bitbucket-server",b[1]==="users"?r.owner="~"+b[2]:r.owner=b[2],r.organization=r.owner,r.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(r.filepathtype=o[1],o.length>2&&(r.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(r.commit=o[2])),r.full_name=r.owner+"/"+r.name,r.query.at?r.ref=r.query.at:r.ref=""),e.length!==0&&r.ref&&(r.ref=Hdt(r.href,e)||r.ref,r.filepath=r.href.split(r.ref+"/")[1]),r}s(ene,"gitUrlParse");ene.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var n=t.port?":"+t.port:"",r=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return n?"ssh://"+r+"@"+t.resource+n+"/"+t.full_name+i:r+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+r+"@"+t.resource+n+"/"+t.full_name+i;case"http":case"https":var o=t.token?Wdt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+n+"/"+Gdt(t)+i;default:return t.href}};function Wdt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(Wdt,"buildToken");function Gdt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(n){return encodeURIComponent(n)}).join("/");return e}}s(Gdt,"buildPath");function Hdt(t,e){var n="";return e.forEach(function(r){t.includes(r)&&r.length>n.length&&(n=r)}),n}s(Hdt,"findLongestMatchingSubstring");RTe.exports=ene});var oQ=W((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,i){r?n(r):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=o)break;e[n++]=l}else if(l<=2047){if(n+1>=o)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=o)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function n(i){e(i.instance,i.module)}s(n,"r");function r(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(n,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(r,"_");function i(){var b=r();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=r();n=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<n;){var h=t[e++],g=r();if(h===1)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(h===2)for(d=r(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=r();y--;){var v=i();256&r()&&u.tlsExports.add(v)}else if(h===4)for(y=r();y--;)i(),v=i(),(3&r())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var o=0;o<r.length;++o)e.push(i[r[o]]);n=="v"?e.push(0):e.push(1,i[n])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}s(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}s(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),r[i]=o}return updateGOT(r,n),r}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,n)}):loadWebAssemblyModule(i(t),e,n)}s(o,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return s(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(n,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:s(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,n,r,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(t,t+n);FS.msync(e,o,i,n,r)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,i){try{var o=convertI32PairToI53Checked(e,n);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,r);if(c<0)return-1;i+=c,r!==void 0&&(r+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,i){var o=currentParseCallback(e,{row:n,column:r});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),i=r>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(n,r);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(r&&r.includedRanges){i=r.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,r.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,n,r,i){assertInternal(e),this[0]=n,this.language=r,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(n);if(n>0){let o=r;for(let a=0;a<n;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return i}}class Node{static{s(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,i=this.types.length;r<i;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,i=this.fields.length;r<i;r++){let o=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),i=C._malloc(r+1);stringToUTF8(e,i,r+1);let o=C._ts_language_symbol_for_name(this[0],i,r,n);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let i=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(r),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let B=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(B===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let U=E[0].value,re=!0;switch(U){case"not-eq?":re=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let G=E[1].name,ue=E[2].name;g[y].push(function(ie){let $,O;for(let Y of ie)Y.name===G&&($=Y.node),Y.name===ue&&(O=Y.node);return $===void 0||O===void 0||$.text===O.text===re})}else{let G=E[1].name,ue=E[2].value;g[y].push(function(ie){for(let $ of ie)if($.name===G)return $.node.text===ue===re;return!0})}break;case"not-match?":re=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,ae=new RegExp(E[2].value);g[y].push(function(G){for(let ue of G)if(ue.name===me)return ae.test(ue.node.text)===re;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(G=>G.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${U}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(G=>G.type!=="string"))throw new Error(`Arguments to \`#${U}\` predicate must be a strings.".`);let H=U==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:U,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(r),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");n=Promise.resolve(o.readFileSync(i))}else n=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(i=>r(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,n,r,i,o,a,l,c){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,i=t.textCallback(e,null,n);for(e+=i.length;e<n;){let o=t.textCallback(e,null,n);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>n&&(i=i.slice(0,r)),i}s(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let i=0,o=r.length;i<o;i++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:t.captureNames[a],node:l}}return n}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Vne=W((own,Cwe)=>{f();var jne=require("fs"),FQ=require("path"),V8=FQ.join,Sft=FQ.dirname,Awe=jne.accessSync&&function(t){try{jne.accessSync(t)}catch{return!1}return!0}||jne.existsSync||FQ.existsSync,ywe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function Rft(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(ywe).map(function(c){c in t||(t[c]=ywe[c])}),t.module_root||(t.module_root=kft(__filename)),FQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,i=t.try.length,o,a,l;r<i;r++){o=V8.apply(null,t.try[r].map(function(c){return t[c]||c})),n.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(c){return t.arrow+c}).join(`
`)),l.tries=n,l}s(Rft,"bindings");Cwe.exports=Rft;function kft(t){for(var e=Sft(t),n;;){if(e==="."&&(e=process.cwd()),Awe(V8(e,"dist")))return V8(e,"dist");if(Awe(V8(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=V8(e,"..")}}s(kft,"getRoot")});var vwe=W((lwn,xwe)=>{f();xwe.exports=Vne()("node_sqlite3.node")});var Iwe=W(Ewe=>{f();var Bft=require("util");function Dft(t,e,n){let r=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return Bft.inspect(l,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=bwe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+bwe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}s(Dft,"extendTrace");Ewe.extendTrace=Dft;function bwe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(bwe,"filter")});var Swe=W((wwe,_we)=>{f();var Pft=require("path"),Qf=vwe(),e5=require("events").EventEmitter;_we.exports=wwe=Qf;function t5(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let o=r[r.length-1];n=s(function(a){a&&o(a)},"errBack")}let i=new MQ(this,e,n);return t.call(this,i,r)}}s(t5,"normalizeMethod");function zne(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}s(zne,"inherits");Qf.cached={Database:s(function(t,e,n){if(t===""||t===":memory:")return new Ru(t,e,n);let r;if(t=Pft.resolve(t),!Qf.cached.objects[t])r=Qf.cached.objects[t]=new Ru(t,e,n);else{r=Qf.cached.objects[t];let o=typeof e=="number"?n:e;if(typeof o=="function"){let a=function(){o.call(r,null)};var i=a;s(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var Ru=Qf.Database,MQ=Qf.Statement,$ne=Qf.Backup;zne(Ru,e5);zne(MQ,e5);zne($ne,e5);Ru.prototype.prepare=t5(function(t,e){return e.length?t.bind.apply(t,e):t});Ru.prototype.run=t5(function(t,e){return t.run.apply(t,e).finalize(),this});Ru.prototype.get=t5(function(t,e){return t.get.apply(t,e).finalize(),this});Ru.prototype.all=t5(function(t,e){return t.all.apply(t,e).finalize(),this});Ru.prototype.each=t5(function(t,e){return t.each.apply(t,e).finalize(),this});Ru.prototype.map=t5(function(t,e){return t.map.apply(t,e).finalize(),this});Ru.prototype.backup=function(){let t;return arguments.length<=2?t=new $ne(this,arguments[0],"main","main",!0,arguments[1]):t=new $ne(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Qf.BUSY,Qf.LOCKED],t};MQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let i={};if(r.length){let o=Object.keys(r[0]),a=o[0];if(o.length>2)for(let l=0;l<r.length;l++)i[r[l][a]]=r[l];else{let l=o[1];for(let c=0;c<r.length;c++)i[r[c][a]]=r[c][l]}}e(n,i)}),this.all.apply(this,t)};var Twe=!1,Yne=["trace","profile","change"];Ru.prototype.addListener=Ru.prototype.on=function(t){let e=e5.prototype.addListener.apply(this,arguments);return Yne.indexOf(t)>=0&&this.configure(t,!0),e};Ru.prototype.removeListener=function(t){let e=e5.prototype.removeListener.apply(this,arguments);return Yne.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ru.prototype.removeAllListeners=function(t){let e=e5.prototype.removeAllListeners.apply(this,arguments);return Yne.indexOf(t)>=0&&this.configure(t,!1),e};Qf.verbose=function(){if(!Twe){let t=Iwe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ru.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(MQ.prototype,e)}),Twe=!0}return Qf}});var KQ=W(Xa=>{"use strict";f();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.thenable=Xa.typedArray=Xa.stringArray=Xa.array=Xa.func=Xa.error=Xa.number=Xa.string=Xa.boolean=void 0;function Lft(t){return t===!0||t===!1}s(Lft,"boolean");Xa.boolean=Lft;function Pwe(t){return typeof t=="string"||t instanceof String}s(Pwe,"string");Xa.string=Pwe;function Fft(t){return typeof t=="number"||t instanceof Number}s(Fft,"number");Xa.number=Fft;function Mft(t){return t instanceof Error}s(Mft,"error");Xa.error=Mft;function Nwe(t){return typeof t=="function"}s(Nwe,"func");Xa.func=Nwe;function Lwe(t){return Array.isArray(t)}s(Lwe,"array");Xa.array=Lwe;function Qft(t){return Lwe(t)&&t.every(e=>Pwe(e))}s(Qft,"stringArray");Xa.stringArray=Qft;function Oft(t,e){return Array.isArray(t)&&t.every(e)}s(Oft,"typedArray");Xa.typedArray=Oft;function Uft(t){return t&&Nwe(t.then)}s(Uft,"thenable");Xa.thenable=Uft});var Xne=W(Of=>{"use strict";f();Object.defineProperty(Of,"__esModule",{value:!0});Of.generateUuid=Of.parse=Of.isUUID=Of.v4=Of.empty=void 0;var Y8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},K8=class t extends Y8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};K8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];K8._timeHighBits=["8","9","a","b"];Of.empty=new Y8("00000000-0000-0000-0000-000000000000");function Fwe(){return new K8}s(Fwe,"v4");Of.v4=Fwe;var qft=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Mwe(t){return qft.test(t)}s(Mwe,"isUUID");Of.isUUID=Mwe;function Wft(t){if(!Mwe(t))throw new Error("invalid uuid");return new Y8(t)}s(Wft,"parse");Of.parse=Wft;function Gft(){return Fwe().asHex()}s(Gft,"generateUuid");Of.generateUuid=Gft});var Qwe=W(sv=>{"use strict";f();Object.defineProperty(sv,"__esModule",{value:!0});sv.attachPartialResult=sv.ProgressFeature=sv.attachWorkDone=void 0;var ov=ri(),Hft=Xne(),VI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(ov.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(ov.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(ov.WorkDoneProgress.type,this._token,{kind:"end"})}};VI.Instances=new Map;var JQ=class extends VI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,n){super(e,n),this._source=new ov.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},J8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},XQ=class extends J8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new ov.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function jft(t,e){if(e===void 0||e.workDoneToken===void 0)return new J8;let n=e.workDoneToken;return delete e.workDoneToken,new VI(t,n)}s(jft,"attachWorkDone");sv.attachWorkDone=jft;var Vft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(ov.WorkDoneProgressCancelNotification.type,n=>{let r=VI.Instances.get(n.token);(r instanceof JQ||r instanceof XQ)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new J8:new VI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Hft.generateUuid)();return this.connection.sendRequest(ov.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new JQ(this.connection,e))}else return Promise.resolve(new XQ)}},"ProgressFeature");sv.ProgressFeature=Vft;var Zne;(function(t){t.type=new ov.ProgressType})(Zne||(Zne={}));var ere=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Zne.type,this._token,e)}};function $ft(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new ere(t,n)}s($ft,"attachPartialResult");sv.attachPartialResult=$ft});var Owe=W(ZQ=>{"use strict";f();Object.defineProperty(ZQ,"__esModule",{value:!0});ZQ.ConfigurationFeature=void 0;var zft=ri(),Yft=KQ(),Kft=s(t=>class extends t{getConfiguration(e){return e?Yft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(zft.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");ZQ.ConfigurationFeature=Kft});var Uwe=W(tO=>{"use strict";f();Object.defineProperty(tO,"__esModule",{value:!0});tO.WorkspaceFoldersFeature=void 0;var eO=ri(),Jft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new eO.Emitter,this.connection.onNotification(eO.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(eO.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(eO.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");tO.WorkspaceFoldersFeature=Jft});var qwe=W(nO=>{"use strict";f();Object.defineProperty(nO,"__esModule",{value:!0});nO.CallHierarchyFeature=void 0;var tre=ri(),Xft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(tre.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let n=tre.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let n=tre.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onOutgoingCalls")}}},"CallHierarchyFeature");nO.CallHierarchyFeature=Xft});var rre=W(av=>{"use strict";f();Object.defineProperty(av,"__esModule",{value:!0});av.SemanticTokensBuilder=av.SemanticTokensDiff=av.SemanticTokensFeature=void 0;var rO=ri(),Zft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(rO.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let n=rO.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on"),onDelta:s(e=>{let n=rO.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onDelta"),onRange:s(e=>{let n=rO.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onRange")}}},"SemanticTokensFeature");av.SemanticTokensFeature=Zft;var iO=class{static{s(this,"SemanticTokensDiff")}constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let a=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:a-1}]:[{start:r,deleteCount:a,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};av.SemanticTokensDiff=iO;var nre=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let a=e,l=n;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new iO(this._prevData,this._data).computeDiff()}:this.build()}};av.SemanticTokensBuilder=nre});var Wwe=W(oO=>{"use strict";f();Object.defineProperty(oO,"__esModule",{value:!0});oO.ShowDocumentFeature=void 0;var ept=ri(),tpt=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(ept.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");oO.ShowDocumentFeature=tpt});var Gwe=W(sO=>{"use strict";f();Object.defineProperty(sO,"__esModule",{value:!0});sO.FileOperationsFeature=void 0;var r5=ri(),npt=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(r5.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(r5.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(r5.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(r5.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(r5.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(r5.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}},"FileOperationsFeature");sO.FileOperationsFeature=npt});var Hwe=W(aO=>{"use strict";f();Object.defineProperty(aO,"__esModule",{value:!0});aO.LinkedEditingRangeFeature=void 0;var rpt=ri(),ipt=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(rpt.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}},"LinkedEditingRangeFeature");aO.LinkedEditingRangeFeature=ipt});var jwe=W(lO=>{"use strict";f();Object.defineProperty(lO,"__esModule",{value:!0});lO.TypeHierarchyFeature=void 0;var ire=ri(),opt=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(ire.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onSupertypes:s(e=>{let n=ire.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSupertypes"),onSubtypes:s(e=>{let n=ire.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSubtypes")}}},"TypeHierarchyFeature");lO.TypeHierarchyFeature=opt});var $we=W(cO=>{"use strict";f();Object.defineProperty(cO,"__esModule",{value:!0});cO.InlineValueFeature=void 0;var Vwe=ri(),spt=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(Vwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Vwe.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineValueFeature");cO.InlineValueFeature=spt});var Ywe=W(uO=>{"use strict";f();Object.defineProperty(uO,"__esModule",{value:!0});uO.FoldingRangeFeature=void 0;var zwe=ri(),apt=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(zwe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let n=zwe.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"FoldingRangeFeature");uO.FoldingRangeFeature=apt});var Kwe=W(dO=>{"use strict";f();Object.defineProperty(dO,"__esModule",{value:!0});dO.InlayHintFeature=void 0;var ore=ri(),lpt=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(ore.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(ore.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on"),resolve:s(e=>this.connection.onRequest(ore.InlayHintResolveRequest.type,(n,r)=>e(n,r)),"resolve")}}},"InlayHintFeature");dO.InlayHintFeature=lpt});var Jwe=W(fO=>{"use strict";f();Object.defineProperty(fO,"__esModule",{value:!0});fO.DiagnosticFeature=void 0;var X8=ri(),cpt=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(X8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(X8.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(X8.DocumentDiagnosticRequest.partialResult,n))),"on"),onWorkspace:s(e=>this.connection.onRequest(X8.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(X8.WorkspaceDiagnosticRequest.partialResult,n))),"onWorkspace")}}},"DiagnosticFeature");fO.DiagnosticFeature=cpt});var are=W(pO=>{"use strict";f();Object.defineProperty(pO,"__esModule",{value:!0});pO.TextDocuments=void 0;var $I=ri(),sre=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new $I.Emitter,this._onDidOpen=new $I.Emitter,this._onDidClose=new $I.Emitter,this._onDidSave=new $I.Emitter,this._onWillSave=new $I.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=$I.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),$I.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};pO.TextDocuments=sre});var cre=W(i5=>{"use strict";f();Object.defineProperty(i5,"__esModule",{value:!0});i5.NotebookDocuments=i5.NotebookSyncFeature=void 0;var Uf=ri(),Xwe=are(),upt=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Uf.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Uf.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Uf.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Uf.DidCloseNotebookDocumentNotification.type,n=>{e(n)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");i5.NotebookSyncFeature=upt;var mO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Uf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Uf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Uf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};mO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var lre=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof Xwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new Xwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Uf.Emitter,this._onDidChange=new Uf.Emitter,this._onDidSave=new Uf.Emitter,this._onDidClose=new Uf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new mO,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)n.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)n.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let B=o.cells.splice(_,1,k);if(p.push({old:B[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)n.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)n.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Uf.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};i5.NotebookDocuments=lre});var Zwe=W(hO=>{"use strict";f();Object.defineProperty(hO,"__esModule",{value:!0});hO.MonikerFeature=void 0;var dpt=ri(),fpt=s(t=>class extends t{get moniker(){return{on:s(e=>{let n=dpt.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"MonikerFeature");hO.MonikerFeature=fpt});var hre=W(mo=>{"use strict";f();Object.defineProperty(mo,"__esModule",{value:!0});mo.createConnection=mo.combineFeatures=mo.combineNotebooksFeatures=mo.combineLanguagesFeatures=mo.combineWorkspaceFeatures=mo.combineWindowFeatures=mo.combineClientFeatures=mo.combineTracerFeatures=mo.combineTelemetryFeatures=mo.combineConsoleFeatures=mo._NotebooksImpl=mo._LanguagesImpl=mo.BulkUnregistration=mo.BulkRegistration=mo.ErrorMessageTracker=void 0;var $t=ri(),qf=KQ(),dre=Xne(),zr=Qwe(),ppt=Owe(),mpt=Uwe(),hpt=qwe(),gpt=rre(),Apt=Wwe(),ypt=Gwe(),Cpt=Hwe(),xpt=jwe(),vpt=$we(),bpt=Ywe(),Ept=Kwe(),Ipt=Jwe(),Tpt=cre(),wpt=Zwe();function ure(t){if(t!==null)return t}s(ure,"null2Undefined");var fre=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};mo.ErrorMessageTracker=fre;var gO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},pre=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:$t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(ure)}showWarningMessage(e,...n){let r={type:$t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(ure)}showInformationMessage(e,...n){let r={type:$t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(ure)}},e_e=(0,Apt.ShowDocumentFeature)((0,zr.ProgressFeature)(pre)),t_e;(function(t){function e(){return new AO}s(e,"create"),t.create=e})(t_e||(mo.BulkRegistration=t_e={}));var AO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=qf.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=dre.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},n_e;(function(t){function e(){return new Z8(void 0,[])}s(e,"create"),t.create=e})(n_e||(mo.BulkUnregistration=n_e={}));var Z8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=qf.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},yO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof AO?this.registerMany(e):e instanceof Z8?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=qf.string(n)?n:n.method,o=dre.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,n){let r=qf.string(e)?e:e.method,i=dre.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,n).then(()=>new Z8(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},mre=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}s(n,"isApplyWorkspaceEditParams");let r=n(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,r)}},r_e=(0,ypt.FileOperationsFeature)((0,mpt.WorkspaceFoldersFeature)((0,ppt.ConfigurationFeature)(mre))),CO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?n:void 0}).catch(()=>{})}},xO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},vO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,zr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,zr.attachPartialResult)(this.connection,n)}};mo._LanguagesImpl=vO;var i_e=(0,bpt.FoldingRangeFeature)((0,wpt.MonikerFeature)((0,Ipt.DiagnosticFeature)((0,Ept.InlayHintFeature)((0,vpt.InlineValueFeature)((0,xpt.TypeHierarchyFeature)((0,Cpt.LinkedEditingRangeFeature)((0,gpt.SemanticTokensFeature)((0,hpt.CallHierarchyFeature)(vO))))))))),bO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,zr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,zr.attachPartialResult)(this.connection,n)}};mo._NotebooksImpl=bO;var o_e=(0,Tpt.NotebookSyncFeature)(bO);function s_e(t,e){return function(n){return e(t(n))}}s(s_e,"combineConsoleFeatures");mo.combineConsoleFeatures=s_e;function a_e(t,e){return function(n){return e(t(n))}}s(a_e,"combineTelemetryFeatures");mo.combineTelemetryFeatures=a_e;function l_e(t,e){return function(n){return e(t(n))}}s(l_e,"combineTracerFeatures");mo.combineTracerFeatures=l_e;function c_e(t,e){return function(n){return e(t(n))}}s(c_e,"combineClientFeatures");mo.combineClientFeatures=c_e;function u_e(t,e){return function(n){return e(t(n))}}s(u_e,"combineWindowFeatures");mo.combineWindowFeatures=u_e;function d_e(t,e){return function(n){return e(t(n))}}s(d_e,"combineWorkspaceFeatures");mo.combineWorkspaceFeatures=d_e;function f_e(t,e){return function(n){return e(t(n))}}s(f_e,"combineLanguagesFeatures");mo.combineLanguagesFeatures=f_e;function p_e(t,e){return function(n){return e(t(n))}}s(p_e,"combineNotebooksFeatures");mo.combineNotebooksFeatures=p_e;function _pt(t,e){function n(i,o,a){return i&&o?a(i,o):i||o}return s(n,"combine"),{__brand:"features",console:n(t.console,e.console,s_e),tracer:n(t.tracer,e.tracer,l_e),telemetry:n(t.telemetry,e.telemetry,a_e),client:n(t.client,e.client,c_e),window:n(t.window,e.window,u_e),workspace:n(t.workspace,e.workspace,d_e),languages:n(t.languages,e.languages,f_e),notebooks:n(t.notebooks,e.notebooks,p_e)}}s(_pt,"combineFeatures");mo.combineFeatures=_pt;function Spt(t,e,n){let r=n&&n.console?new(n.console(gO)):new gO,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(CO)):new CO,a=n&&n.telemetry?new(n.telemetry(xO)):new xO,l=n&&n.client?new(n.client(yO)):new yO,c=n&&n.window?new(n.window(e_e)):new e_e,u=n&&n.workspace?new(n.workspace(r_e)):new r_e,d=n&&n.languages?new(n.languages(i_e)):new i_e,p=n&&n.notebooks?new(n.notebooks(o_e)):new o_e,m=[r,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:qf.thenable(E)?new Promise((_,k)=>{E.then(B=>_(B),B=>k(B))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(qf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=qf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return r},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),qf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,zr.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let B=k;B||(B={capabilities:{}});let N=B.capabilities;N||(N={},B.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=qf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!qf.number(N.textDocumentSync)&&!qf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=qf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let U of m)U.fillServerCapabilities(N);return B})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(Spt,"createConnection");mo.createConnection=Spt});var m_e=W(Cd=>{"use strict";f();Object.defineProperty(Cd,"__esModule",{value:!0});Cd.resolveModulePath=Cd.FileSystem=Cd.resolveGlobalYarnPath=Cd.resolveGlobalNodePath=Cd.resolve=Cd.uriToFilePath=void 0;var Rpt=require("url"),_m=require("path"),gre=require("fs"),xre=require("child_process");function kpt(t){let e=Rpt.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],a=n[1];o.length===0&&a.length>1&&a[1]===":"&&n.shift()}return _m.normalize(n.join("/"))}s(kpt,"uriToFilePath");Cd.uriToFilePath=kpt;function Are(){return process.platform==="win32"}s(Are,"isWindows");function EO(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&gre.existsSync(e)&&(u[i]?u[i]=e+_m.delimiter+u[i]:u[i]=e,r&&r(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,xre.fork)("",[],{cwd:n,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(EO,"resolve");Cd.resolve=EO;function yre(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};Are()&&(e="npm.cmd",r.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,xre.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Are()?_m.join(a,"node_modules"):_m.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(yre,"resolveGlobalNodePath");Cd.resolveGlobalNodePath=yre;function Bpt(t){let e="yarn",n={encoding:"utf8"};Are()&&(e="yarn.cmd",n.shell=!0);let r=s(()=>{},"handler");try{process.on("SIGPIPE",r);let i=(0,xre.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return _m.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}s(Bpt,"resolveGlobalYarnPath");Cd.resolveGlobalYarnPath=Bpt;var Cre;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!gre.existsSync(__filename.toUpperCase())||!gre.existsSync(__filename.toLowerCase())),e}s(n,"isCaseSensitive"),t.isCaseSensitive=n;function r(i,o){return n()?_m.normalize(o).indexOf(_m.normalize(i))===0:_m.normalize(o).toLowerCase().indexOf(_m.normalize(i).toLowerCase())===0}s(r,"isParent"),t.isParent=r})(Cre||(Cd.FileSystem=Cre={}));function Dpt(t,e,n,r){return n?(_m.isAbsolute(n)||(n=_m.join(t,n)),EO(e,n,n,r).then(i=>Cre.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>EO(e,yre(r),t,r))):EO(e,yre(r),t,r)}s(Dpt,"resolveModulePath");Cd.resolveModulePath=Dpt});var vre=W((ISn,h_e)=>{"use strict";f();h_e.exports=ri()});var g_e=W(IO=>{"use strict";f();Object.defineProperty(IO,"__esModule",{value:!0});IO.InlineCompletionFeature=void 0;var Ppt=ri(),Npt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(Ppt.InlineCompletionRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineCompletionFeature");IO.InlineCompletionFeature=Npt});var C_e=W(Kc=>{"use strict";f();var Lpt=Kc&&Kc.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),y_e=Kc&&Kc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Lpt(e,t,n)};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.ProposedFeatures=Kc.NotebookDocuments=Kc.TextDocuments=Kc.SemanticTokensBuilder=void 0;var Fpt=rre();Object.defineProperty(Kc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return Fpt.SemanticTokensBuilder},"get")});var Mpt=g_e();y_e(ri(),Kc);var Qpt=are();Object.defineProperty(Kc,"TextDocuments",{enumerable:!0,get:s(function(){return Qpt.TextDocuments},"get")});var Opt=cre();Object.defineProperty(Kc,"NotebookDocuments",{enumerable:!0,get:s(function(){return Opt.NotebookDocuments},"get")});y_e(hre(),Kc);var A_e;(function(t){t.all={__brand:"features",languages:Mpt.InlineCompletionFeature}})(A_e||(Kc.ProposedFeatures=A_e={}))});var Za=W(Wf=>{"use strict";f();var Upt=Wf&&Wf.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),E_e=Wf&&Wf.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Upt(e,t,n)};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.createConnection=Wf.Files=void 0;var x_e=require("node:util"),bre=KQ(),qpt=hre(),eD=m_e(),zI=vre();E_e(vre(),Wf);E_e(C_e(),Wf);var v_e;(function(t){t.uriToFilePath=eD.uriToFilePath,t.resolveGlobalNodePath=eD.resolveGlobalNodePath,t.resolveGlobalYarnPath=eD.resolveGlobalYarnPath,t.resolve=eD.resolve,t.resolveModulePath=eD.resolveModulePath})(v_e||(Wf.Files=v_e={}));var b_e;function TO(){if(b_e!==void 0)try{b_e.end()}catch{}}s(TO,"endProtocolConnection");var o5=!1,I_e;function Wpt(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(I_e=setInterval(()=>{try{process.kill(r,0)}catch{TO(),process.exit(o5?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}s(Wpt,"setupExitTimer");Wpt();var Gpt={initialize:s(t=>{let e=t.processId;bre.number(e)&&I_e===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(o5?0:1)}},3e3)},"initialize"),get shutdownReceived(){return o5},set shutdownReceived(t){o5=t},exit:s(t=>{TO(),process.exit(t)},"exit")};function Hpt(t,e,n,r){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),zI.ConnectionStrategy.is(t)||zI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=n),jpt(o,a,l,i)}s(Hpt,"createConnection");Wf.createConnection=Hpt;function jpt(t,e,n,r){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new zI.IPCMessageReader(process),e=new zI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,zI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,zI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(bre.func(t.read)&&bre.func(t.on)){let c=t;c.on("end",()=>{TO(),process.exit(o5?0:1)}),c.on("close",()=>{TO(),process.exit(o5?0:1)})}let l=s(c=>{let u=(0,zI.createProtocolConnection)(t,e,c,n);return i&&Vpt(c),u},"connectionFactory");return(0,qpt.createConnection)(l,Gpt,r)}s(jpt,"_createConnection");function Vpt(t){function e(r){return r.map(i=>typeof i=="string"?i:(0,x_e.inspect)(i)).join(" ")}s(e,"serialize");let n=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=n.get(o)??0;a+=1,n.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?n.clear():n.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,x_e.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(Vpt,"patchConsole")});var Sm=W((FSn,T_e)=>{"use strict";f();T_e.exports=Za()});var A4e=W((G3n,g4e)=>{"use strict";f();g4e.exports=m4e;function m4e(t,e,n){t instanceof RegExp&&(t=p4e(t,n)),e instanceof RegExp&&(e=p4e(e,n));var r=h4e(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}s(m4e,"balanced");function p4e(t,e){var n=e.match(t);return n?n[0]:null}s(p4e,"maybeMatch");m4e.range=h4e;function h4e(t,e,n){var r,i,o,a,l,c=n.indexOf(t),u=n.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],o=n.length;d>=0&&!l;)d==c?(r.push(d),c=n.indexOf(t,d+1)):r.length==1?l=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,a=u),u=n.indexOf(e,d+1)),d=c<u&&c>=0?c:u;r.length&&(l=[o,a])}return l}s(h4e,"range")});var T4e=W((V3n,I4e)=>{f();var y4e=A4e();I4e.exports=Mmt;var C4e="\0SLASH"+Math.random()+"\0",x4e="\0OPEN"+Math.random()+"\0",Eie="\0CLOSE"+Math.random()+"\0",v4e="\0COMMA"+Math.random()+"\0",b4e="\0PERIOD"+Math.random()+"\0";function bie(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(bie,"numeric");function Lmt(t){return t.split("\\\\").join(C4e).split("\\{").join(x4e).split("\\}").join(Eie).split("\\,").join(v4e).split("\\.").join(b4e)}s(Lmt,"escapeBraces");function Fmt(t){return t.split(C4e).join("\\").split(x4e).join("{").split(Eie).join("}").split(v4e).join(",").split(b4e).join(".")}s(Fmt,"unescapeBraces");function E4e(t){if(!t)return[""];var e=[],n=y4e("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var l=E4e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(E4e,"parseCommaParts");function Mmt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),uD(Lmt(t),!0).map(Fmt)):[]}s(Mmt,"expandTop");function Qmt(t){return"{"+t+"}"}s(Qmt,"embrace");function Omt(t){return/^-?0\d/.test(t)}s(Omt,"isPadded");function Umt(t,e){return t<=e}s(Umt,"lte");function qmt(t,e){return t>=e}s(qmt,"gte");function uD(t,e){var n=[],r=y4e("{","}",t);if(!r)return[t];var i=r.pre,o=r.post.length?uD(r.post,!1):[""];if(/\$$/.test(r.pre))for(var a=0;a<o.length;a++){var l=i+"{"+r.body+"}"+o[a];n.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||u,p=r.body.indexOf(",")>=0;if(!d&&!p)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+Eie+r.post,uD(t)):[t];var m;if(d)m=r.body.split(/\.\./);else if(m=E4e(r.body),m.length===1&&(m=uD(m[0],!1).map(Qmt),m.length===1))return o.map(function(ae){return r.pre+m[0]+ae});var h;if(d){var g=bie(m[0]),y=bie(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(bie(m[2])):1,E=Umt,_=y<g;_&&(b*=-1,E=qmt);var k=m.some(Omt);h=[];for(var B=g;E(B,y);B+=b){var N;if(u)N=String.fromCharCode(B),N==="\\"&&(N="");else if(N=String(B),k){var U=v-N.length;if(U>0){var re=new Array(U+1).join("0");B<0?N="-"+re+N.slice(1):N=re+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,uD(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&n.push(l)}}return n}s(uD,"expand")});var qs=W((dYn,M3e)=>{f();M3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=W((pYn,Q3e)=>{"use strict";f();var ea=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Joe=class extends ea{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Xoe=class extends ea{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},Zoe=class extends ea{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},ese=class extends ea{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},tse=class extends ea{static{s(this,"ResponseStatusCodeError")}constructor(e,n,r,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=n,this.statusCode=n,this.headers=r}},nse=class extends ea{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},rse=class extends ea{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Hq=class extends ea{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},ise=class extends Hq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},ose=class extends ea{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},sse=class extends ea{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},ase=class extends ea{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},lse=class extends ea{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},cse=class extends ea{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},use=class extends ea{static{s(this,"SocketError")}constructor(e,n){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=n}},dse=class extends ea{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},fse=class extends ea{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},pse=class extends Error{static{s(this,"HTTPParserError")}constructor(e,n,r){super(e),this.name="HTTPParserError",this.code=n?`HPE_${n}`:void 0,this.data=r?r.toString():void 0}},mse=class extends ea{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},hse=class extends ea{static{s(this,"RequestRetryError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=n,this.data=i,this.headers=r}},gse=class extends ea{static{s(this,"ResponseError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=n,this.data=i,this.headers=r}},Ase=class extends ea{static{s(this,"SecureProxyConnectionError")}constructor(e,n,r){super(n,{cause:e,...r??{}}),this.name="SecureProxyConnectionError",this.message=n||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};Q3e.exports={AbortError:Hq,HTTPParserError:pse,UndiciError:ea,HeadersTimeoutError:Xoe,HeadersOverflowError:Zoe,BodyTimeoutError:ese,RequestContentLengthMismatchError:sse,ConnectTimeoutError:Joe,ResponseStatusCodeError:tse,InvalidArgumentError:nse,InvalidReturnValueError:rse,RequestAbortedError:ise,ClientDestroyedError:lse,ClientClosedError:cse,InformationalError:ose,SocketError:use,NotSupportedError:dse,ResponseContentLengthMismatchError:ase,BalancedPoolMissingUpstreamError:fse,ResponseExceededMaxSizeError:mse,RequestRetryError:hse,ResponseError:gse,SecureProxyConnectionError:Ase}});var Vq=W((gYn,O3e)=>{"use strict";f();var jq={},yse=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<yse.length;++t){let e=yse[t],n=e.toLowerCase();jq[e]=jq[n]=n}Object.setPrototypeOf(jq,null);O3e.exports={wellknownHeaderNames:yse,headerNameLowerCasedRecord:jq}});var G3e=W((yYn,W3e)=>{"use strict";f();var{wellknownHeaderNames:U3e,headerNameLowerCasedRecord:R1t}=Vq(),Cse=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,n,r){if(r===void 0||r>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(r))>127)throw new TypeError("key must be ascii string");e.length!==++r?this.middle=new t(e,n,r):this.value=n}add(e,n){let r=e.length;if(r===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(r===++i){o.value=n;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,n,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,n,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,n,i);break}}}search(e){let n=e.length,r=0,i=this;for(;i!==null&&r<n;){let o=e[r];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(n===++r)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},$q=class{static{s(this,"TernarySearchTree")}node=null;insert(e,n){this.node===null?this.node=new Cse(e,n,0):this.node.add(e,n)}lookup(e){return this.node?.search(e)?.value??null}},q3e=new $q;for(let t=0;t<U3e.length;++t){let e=R1t[U3e[t]];q3e.insert(e,e)}W3e.exports={TernarySearchTree:$q,tree:q3e}});var yi=W((vYn,oBe)=>{"use strict";f();var OD=require("node:assert"),{kDestroyed:j3e,kBodyUsed:t4,kListeners:xse,kBody:H3e}=qs(),{IncomingMessage:k1t}=require("node:http"),Kq=require("node:stream"),B1t=require("node:net"),{Blob:D1t}=require("node:buffer"),P1t=require("node:util"),{stringify:N1t}=require("node:querystring"),{EventEmitter:L1t}=require("node:events"),{InvalidArgumentError:Hl}=yo(),{headerNameLowerCasedRecord:F1t}=Vq(),{tree:V3e}=G3e(),[M1t,Q1t]=process.versions.node.split(".").map(t=>Number(t)),Yq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[H3e]=e,this[t4]=!1}async*[Symbol.asyncIterator](){OD(!this[t4],"disturbed"),this[t4]=!0,yield*this[H3e]}};function O1t(t){return Jq(t)?(J3e(t)===0&&t.on("data",function(){OD(!1)}),typeof t.readableDidRead!="boolean"&&(t[t4]=!1,L1t.prototype.on.call(t,"data",function(){this[t4]=!0})),t):t&&typeof t.pipeTo=="function"?new Yq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&K3e(t)?new Yq(t):t}s(O1t,"wrapRequestBody");function U1t(){}s(U1t,"nop");function Jq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Jq,"isStream");function $3e(t){if(t===null)return!1;if(t instanceof D1t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s($3e,"isBlobLike");function q1t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let n=N1t(e);return n&&(t+="?"+n),t}s(q1t,"buildURL");function z3e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(z3e,"isValidPort");function zq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(zq,"isHttpOrHttpsPrefixed");function Y3e(t){if(typeof t=="string"){if(t=new URL(t),!zq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Hl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&z3e(t.port)===!1)throw new Hl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Hl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Hl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Hl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Hl("Invalid URL origin: the origin must be a string or null/undefined.");if(!zq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,n=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,r=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return n[n.length-1]==="/"&&(n=n.slice(0,n.length-1)),r&&r[0]!=="/"&&(r=`/${r}`),new URL(`${n}${r}`)}if(!zq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(Y3e,"parseURL");function W1t(t){if(t=Y3e(t),t.pathname!=="/"||t.search||t.hash)throw new Hl("invalid url");return t}s(W1t,"parseOrigin");function G1t(t){if(t[0]==="["){let n=t.indexOf("]");return OD(n!==-1),t.substring(1,n)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(G1t,"getHostname");function H1t(t){if(!t)return null;OD(typeof t=="string");let e=G1t(t);return B1t.isIP(e)?"":e}s(H1t,"getServerName");function j1t(t){return JSON.parse(JSON.stringify(t))}s(j1t,"deepClone");function V1t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(V1t,"isAsyncIterable");function K3e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(K3e,"isIterable");function J3e(t){if(t==null)return 0;if(Jq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if($3e(t))return t.size!=null?t.size:null;if(eBe(t))return t.byteLength}return null}s(J3e,"bodyLength");function X3e(t){return t&&!!(t.destroyed||t[j3e]||Kq.isDestroyed?.(t))}s(X3e,"isDestroyed");function $1t(t,e){t==null||!Jq(t)||X3e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===k1t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[j3e]=!0))}s($1t,"destroy");var z1t=/timeout=(\d+)/;function Y1t(t){let e=t.toString().match(z1t);return e?parseInt(e[1],10)*1e3:null}s(Y1t,"parseKeepAliveTimeout");function Z3e(t){return typeof t=="string"?F1t[t]??t.toLowerCase():V3e.lookup(t)??t.toString("latin1").toLowerCase()}s(Z3e,"headerNameToString");function K1t(t){return V3e.lookup(t)??t.toString("latin1").toLowerCase()}s(K1t,"bufferToLowerCasedHeaderName");function J1t(t,e){e===void 0&&(e={});for(let n=0;n<t.length;n+=2){let r=Z3e(t[n]),i=e[r];if(i)typeof i=="string"&&(i=[i],e[r]=i),i.push(t[n+1].toString("utf8"));else{let o=t[n+1];typeof o=="string"?e[r]=o:e[r]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(J1t,"parseHeaders");function X1t(t){let e=t.length,n=new Array(e),r=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?r=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),n[c]=o,n[c+1]=a;return r&&i!==-1&&(n[i]=Buffer.from(n[i]).toString("latin1")),n}s(X1t,"parseRawHeaders");function eBe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(eBe,"isBuffer");function Z1t(t,e,n){if(!t||typeof t!="object")throw new Hl("handler must be an object");if(typeof t.onConnect!="function")throw new Hl("invalid onConnect method");if(typeof t.onError!="function")throw new Hl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Hl("invalid onBodySent method");if(n||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Hl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Hl("invalid onHeaders method");if(typeof t.onData!="function")throw new Hl("invalid onData method");if(typeof t.onComplete!="function")throw new Hl("invalid onComplete method")}}s(Z1t,"validateHandler");function eyt(t){return!!(t&&(Kq.isDisturbed(t)||t[t4]))}s(eyt,"isDisturbed");function tyt(t){return!!(t&&Kq.isErrored(t))}s(tyt,"isErrored");function nyt(t){return!!(t&&Kq.isReadable(t))}s(nyt,"isReadable");function ryt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(ryt,"getSocketInfo");function iyt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(n){let{done:r,value:i}=await e.next();if(r)queueMicrotask(()=>{n.close(),n.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&n.enqueue(new Uint8Array(o))}return n.desiredSize>0},async cancel(n){await e.return()},type:"bytes"})}s(iyt,"ReadableStreamFrom");function oyt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(oyt,"isFormDataLike");function syt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(syt,"addAbortListener");var ayt=typeof String.prototype.toWellFormed=="function",lyt=typeof String.prototype.isWellFormed=="function";function tBe(t){return ayt?`${t}`.toWellFormed():P1t.toUSVString(t)}s(tBe,"toUSVString");function cyt(t){return lyt?`${t}`.isWellFormed():tBe(t)===`${t}`}s(cyt,"isUSVString");function nBe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(nBe,"isTokenCharCode");function uyt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!nBe(t.charCodeAt(e)))return!1;return!0}s(uyt,"isValidHTTPToken");var dyt=/[^\t\x20-\x7e\x80-\xff]/;function fyt(t){return!dyt.test(t)}s(fyt,"isValidHeaderValue");function pyt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(pyt,"parseRangeHeader");function myt(t,e,n){return(t[xse]??=[]).push([e,n]),t.on(e,n),t}s(myt,"addListener");function hyt(t){for(let[e,n]of t[xse]??[])t.removeListener(e,n);t[xse]=null}s(hyt,"removeAllListeners");function gyt(t,e,n){try{e.onError(n),OD(e.aborted)}catch(r){t.emit("error",r)}}s(gyt,"errorRequest");var rBe=Object.create(null);rBe.enumerable=!0;var vse={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},iBe={...vse,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(vse,null);Object.setPrototypeOf(iBe,null);oBe.exports={kEnumerableProperty:rBe,nop:U1t,isDisturbed:eyt,isErrored:tyt,isReadable:nyt,toUSVString:tBe,isUSVString:cyt,isBlobLike:$3e,parseOrigin:W1t,parseURL:Y3e,getServerName:H1t,isStream:Jq,isIterable:K3e,isAsyncIterable:V1t,isDestroyed:X3e,headerNameToString:Z3e,bufferToLowerCasedHeaderName:K1t,addListener:myt,removeAllListeners:hyt,errorRequest:gyt,parseRawHeaders:X1t,parseHeaders:J1t,parseKeepAliveTimeout:Y1t,destroy:$1t,bodyLength:J3e,deepClone:j1t,ReadableStreamFrom:iyt,isBuffer:eBe,validateHandler:Z1t,getSocketInfo:ryt,isFormDataLike:oyt,buildURL:q1t,addAbortListener:syt,isValidHTTPToken:uyt,isValidHeaderValue:fyt,isTokenCharCode:nBe,parseRangeHeader:pyt,normalizedMethodRecordsBase:vse,normalizedMethodRecords:iBe,isValidPort:z3e,isHttpOrHttpsPrefixed:zq,nodeMajor:M1t,nodeMinor:Q1t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:O1t}});var n4=W((IYn,aBe)=>{"use strict";f();var bo=require("node:diagnostics_channel"),Ese=require("node:util"),Xq=Ese.debuglog("undici"),bse=Ese.debuglog("fetch"),S2=Ese.debuglog("websocket"),sBe=!1,Ayt={beforeConnect:bo.channel("undici:client:beforeConnect"),connected:bo.channel("undici:client:connected"),connectError:bo.channel("undici:client:connectError"),sendHeaders:bo.channel("undici:client:sendHeaders"),create:bo.channel("undici:request:create"),bodySent:bo.channel("undici:request:bodySent"),headers:bo.channel("undici:request:headers"),trailers:bo.channel("undici:request:trailers"),error:bo.channel("undici:request:error"),open:bo.channel("undici:websocket:open"),close:bo.channel("undici:websocket:close"),socketError:bo.channel("undici:websocket:socket_error"),ping:bo.channel("undici:websocket:ping"),pong:bo.channel("undici:websocket:pong")};if(Xq.enabled||bse.enabled){let t=bse.enabled?bse:Xq;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)}),bo.channel("undici:request:headers").subscribe(e=>{let{request:{method:n,path:r,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",n,i,r,o)}),bo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("trailers received from %s %s/%s",n,i,r)}),bo.channel("undici:request:error").subscribe(e=>{let{request:{method:n,path:r,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",n,i,r,o.message)}),sBe=!0}if(S2.enabled){if(!sBe){let t=Xq.enabled?Xq:S2;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)})}bo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:n}}=t;S2("connection opened %s%s",e,n?`:${n}`:"")}),bo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:n,reason:r}=t;S2("closed connection to %s - %s %s",e.url,n,r)}),bo.channel("undici:websocket:socket_error").subscribe(t=>{S2("connection errored - %s",t.message)}),bo.channel("undici:websocket:ping").subscribe(t=>{S2("ping received")}),bo.channel("undici:websocket:pong").subscribe(t=>{S2("pong received")})}aBe.exports={channels:Ayt}});var fBe=W((wYn,dBe)=>{"use strict";f();var{InvalidArgumentError:ta,NotSupportedError:yyt}=yo(),Z1=require("node:assert"),{isValidHTTPToken:uBe,isValidHeaderValue:lBe,isStream:Cyt,destroy:xyt,isBuffer:vyt,isFormDataLike:byt,isIterable:Eyt,isBlobLike:Iyt,buildURL:Tyt,validateHandler:wyt,getServerName:_yt,normalizedMethodRecords:Syt}=yi(),{channels:Mg}=n4(),{headerNameLowerCasedRecord:cBe}=Vq(),Ryt=/[^\u0021-\u00ff]/,np=Symbol("handler"),Ise=class{static{s(this,"Request")}constructor(e,{path:n,method:r,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof n!="string")throw new ta("path must be a string");if(n[0]!=="/"&&!(n.startsWith("http://")||n.startsWith("https://"))&&r!=="CONNECT")throw new ta("path must be an absolute URL or start with a slash");if(Ryt.test(n))throw new ta("invalid request path");if(typeof r!="string")throw new ta("method must be a string");if(Syt[r]===void 0&&!uBe(r))throw new ta("invalid request method");if(u&&typeof u!="string")throw new ta("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ta("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ta("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ta("invalid reset");if(g!=null&&typeof g!="boolean")throw new ta("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=r,this.abort=null,i==null)this.body=null;else if(Cyt(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){xyt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(vyt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(byt(i)||Eyt(i)||Iyt(i))this.body=i;else throw new ta("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?Tyt(n,a):n,this.origin=e,this.idempotent=l??(r==="HEAD"||r==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ta("headers array must be even");for(let b=0;b<o.length;b+=2)Zq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ta("headers must be in key-value pair format");Zq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)Zq(this,b[E],o[b[E]])}else if(o!=null)throw new ta("headers must be an object or an array");wyt(v,r,u),this.servername=y||_yt(this.host),this[np]=v,Mg.create.hasSubscribers&&Mg.create.publish({request:this})}onBodySent(e){if(this[np].onBodySent)try{return this[np].onBodySent(e)}catch(n){this.abort(n)}}onRequestSent(){if(Mg.bodySent.hasSubscribers&&Mg.bodySent.publish({request:this}),this[np].onRequestSent)try{return this[np].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Z1(!this.aborted),Z1(!this.completed),this.error)e(this.error);else return this.abort=e,this[np].onConnect(e)}onResponseStarted(){return this[np].onResponseStarted?.()}onHeaders(e,n,r,i){Z1(!this.aborted),Z1(!this.completed),Mg.headers.hasSubscribers&&Mg.headers.publish({request:this,response:{statusCode:e,headers:n,statusText:i}});try{return this[np].onHeaders(e,n,r,i)}catch(o){this.abort(o)}}onData(e){Z1(!this.aborted),Z1(!this.completed);try{return this[np].onData(e)}catch(n){return this.abort(n),!1}}onUpgrade(e,n,r){return Z1(!this.aborted),Z1(!this.completed),this[np].onUpgrade(e,n,r)}onComplete(e){this.onFinally(),Z1(!this.aborted),this.completed=!0,Mg.trailers.hasSubscribers&&Mg.trailers.publish({request:this,trailers:e});try{return this[np].onComplete(e)}catch(n){this.onError(n)}}onError(e){if(this.onFinally(),Mg.error.hasSubscribers&&Mg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[np].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,n){return Zq(this,e,n),this}};function Zq(t,e,n){if(n&&typeof n=="object"&&!Array.isArray(n))throw new ta(`invalid ${e} header`);if(n===void 0)return;let r=cBe[e];if(r===void 0&&(r=e.toLowerCase(),cBe[r]===void 0&&!uBe(r)))throw new ta("invalid header key");if(Array.isArray(n)){let i=[];for(let o=0;o<n.length;o++)if(typeof n[o]=="string"){if(!lBe(n[o]))throw new ta(`invalid ${e} header`);i.push(n[o])}else if(n[o]===null)i.push("");else{if(typeof n[o]=="object")throw new ta(`invalid ${e} header`);i.push(`${n[o]}`)}n=i}else if(typeof n=="string"){if(!lBe(n))throw new ta(`invalid ${e} header`)}else n===null?n="":n=`${n}`;if(t.host===null&&r==="host"){if(typeof n!="string")throw new ta("invalid host header");t.host=n}else if(t.contentLength===null&&r==="content-length"){if(t.contentLength=parseInt(n,10),!Number.isFinite(t.contentLength))throw new ta("invalid content-length header")}else if(t.contentType===null&&r==="content-type")t.contentType=n,t.headers.push(e,n);else{if(r==="transfer-encoding"||r==="keep-alive"||r==="upgrade")throw new ta(`invalid ${r} header`);if(r==="connection"){let i=typeof n=="string"?n.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ta("invalid connection header");i==="close"&&(t.reset=!0)}else{if(r==="expect")throw new yyt("expect header not supported");t.headers.push(e,n)}}}s(Zq,"processHeader");dBe.exports=Ise});var UD=W((RYn,pBe)=>{"use strict";f();var kyt=require("node:events"),eW=class extends kyt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let n=Array.isArray(e[0])?e[0]:e,r=this.dispatch.bind(this);for(let i of n)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(r=i(r),r==null||typeof r!="function"||r.length!==2)throw new TypeError("invalid interceptor")}return new Tse(this,r)}},Tse=class extends eW{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,n){super(),this.#e=e,this.#t=n}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};pBe.exports=eW});var s4=W((DYn,mBe)=>{"use strict";f();var Byt=UD(),{ClientDestroyedError:wse,ClientClosedError:Dyt,InvalidArgumentError:r4}=yo(),{kDestroy:Pyt,kClose:Nyt,kClosed:qD,kDestroyed:i4,kDispatch:_se,kInterceptors:R2}=qs(),ey=Symbol("onDestroyed"),o4=Symbol("onClosed"),tW=Symbol("Intercepted Dispatch"),Sse=class extends Byt{static{s(this,"DispatcherBase")}constructor(){super(),this[i4]=!1,this[ey]=null,this[qD]=!1,this[o4]=[]}get destroyed(){return this[i4]}get closed(){return this[qD]}get interceptors(){return this[R2]}set interceptors(e){if(e){for(let n=e.length-1;n>=0;n--)if(typeof this[R2][n]!="function")throw new r4("interceptor must be an function")}this[R2]=e}close(e){if(e===void 0)return new Promise((r,i)=>{this.close((o,a)=>o?i(o):r(a))});if(typeof e!="function")throw new r4("invalid callback");if(this[i4]){queueMicrotask(()=>e(new wse,null));return}if(this[qD]){this[o4]?this[o4].push(e):queueMicrotask(()=>e(null,null));return}this[qD]=!0,this[o4].push(e);let n=s(()=>{let r=this[o4];this[o4]=null;for(let i=0;i<r.length;i++)r[i](null,null)},"onClosed");this[Nyt]().then(()=>this.destroy()).then(()=>{queueMicrotask(n)})}destroy(e,n){if(typeof e=="function"&&(n=e,e=null),n===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof n!="function")throw new r4("invalid callback");if(this[i4]){this[ey]?this[ey].push(n):queueMicrotask(()=>n(null,null));return}e||(e=new wse),this[i4]=!0,this[ey]=this[ey]||[],this[ey].push(n);let r=s(()=>{let i=this[ey];this[ey]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[Pyt](e).then(()=>{queueMicrotask(r)})}[tW](e,n){if(!this[R2]||this[R2].length===0)return this[tW]=this[_se],this[_se](e,n);let r=this[_se].bind(this);for(let i=this[R2].length-1;i>=0;i--)r=this[R2][i](r);return this[tW]=r,r(e,n)}dispatch(e,n){if(!n||typeof n!="object")throw new r4("handler must be an object");try{if(!e||typeof e!="object")throw new r4("opts must be an object.");if(this[i4]||this[ey])throw new wse;if(this[qD])throw new Dyt;return this[tW](e,n)}catch(r){if(typeof n.onError!="function")throw new r4("invalid onError method");return n.onError(r),!1}}};mBe.exports=Sse});var Lse=W((LYn,yBe)=>{"use strict";f();var a4=0,Rse=1e3,kse=(Rse>>1)-1,ty,Bse=Symbol("kFastTimer"),ny=[],Dse=-2,Pse=-1,gBe=0,hBe=1;function Nse(){a4+=kse;let t=0,e=ny.length;for(;t<e;){let n=ny[t];n._state===gBe?(n._idleStart=a4-kse,n._state=hBe):n._state===hBe&&a4>=n._idleStart+n._idleTimeout&&(n._state=Pse,n._idleStart=-1,n._onTimeout(n._timerArg)),n._state===Pse?(n._state=Dse,--e!==0&&(ny[t]=ny[e])):++t}ny.length=e,ny.length!==0&&ABe()}s(Nse,"onTick");function ABe(){ty?ty.refresh():(clearTimeout(ty),ty=setTimeout(Nse,kse),ty.unref&&ty.unref())}s(ABe,"refreshTimeout");var nW=class{static{s(this,"FastTimer")}[Bse]=!0;_state=Dse;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,n,r){this._onTimeout=e,this._idleTimeout=n,this._timerArg=r,this.refresh()}refresh(){this._state===Dse&&ny.push(this),(!ty||ny.length===1)&&ABe(),this._state=gBe}clear(){this._state=Pse,this._idleStart=-1}};yBe.exports={setTimeout(t,e,n){return e<=Rse?setTimeout(t,e,n):new nW(t,e,n)},clearTimeout(t){t[Bse]?t.clear():clearTimeout(t)},setFastTimeout(t,e,n){return new nW(t,e,n)},clearFastTimeout(t){t.clear()},now(){return a4},tick(t=0){a4+=t-Rse+1,Nse(),Nse()},reset(){a4=0,ny.length=0,clearTimeout(ty),ty=null},kFastTimer:Bse}});var WD=W((UYn,EBe)=>{"use strict";f();var Lyt=require("node:net"),CBe=require("node:assert"),bBe=yi(),{InvalidArgumentError:Fyt,ConnectTimeoutError:Myt}=yo(),rW=Lse();function xBe(){}s(xBe,"noop");var Fse,Mse;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?Mse=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(n=>{if(this._sessionCache.size<this._maxCachedSessions)return;let r=this._sessionCache.get(n);r!==void 0&&r.deref()===void 0&&this._sessionCache.delete(n)})}get(e){let n=this._sessionCache.get(e);return n?n.deref():null}set(e,n){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(n)),this._sessionRegistry.register(n,e))}}:Mse=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,n){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:r}=this._sessionCache.keys().next();this._sessionCache.delete(r)}this._sessionCache.set(e,n)}}};function Qyt({allowH2:t,maxCachedSessions:e,socketPath:n,timeout:r,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new Fyt("maxCachedSessions must be a positive integer or zero");let a={path:n,...o},l=new Mse(e??100);return r=r??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){Fse||(Fse=require("node:tls")),h=h||a.servername||bBe.getServerName(d)||null;let _=h||u;CBe(_);let k=i||l.get(_)||null;m=m||443,b=Fse.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(B){l.set(_,B)})}else CBe(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=Lyt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=Oyt(new WeakRef(b),{timeout:r,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(Qyt,"buildConnector");var Oyt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return xBe;let n=null,r=null,i=rW.setFastTimeout(()=>{n=setImmediate(()=>{r=setImmediate(()=>vBe(t.deref(),e))})},e.timeout);return()=>{rW.clearFastTimeout(i),clearImmediate(n),clearImmediate(r)}}:(t,e)=>{if(!e.timeout)return xBe;let n=null,r=rW.setFastTimeout(()=>{n=setImmediate(()=>{vBe(t.deref(),e)})},e.timeout);return()=>{rW.clearFastTimeout(r),clearImmediate(n)}};function vBe(t,e){if(t==null)return;let n="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?n+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:n+=` (attempted address: ${e.hostname}:${e.port},`,n+=` timeout: ${e.timeout}ms)`,bBe.destroy(t,new Myt(n))}s(vBe,"onConnectTimeout");EBe.exports=Qyt});var IBe=W(iW=>{"use strict";f();Object.defineProperty(iW,"__esModule",{value:!0});iW.enumToMap=void 0;function Uyt(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];typeof r=="number"&&(e[n]=r)}),e}s(Uyt,"enumToMap");iW.enumToMap=Uyt});var TBe=W(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var qyt=IBe(),Wyt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(Wyt=Ut.ERROR||(Ut.ERROR={}));var Gyt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(Gyt=Ut.TYPE||(Ut.TYPE={}));var Hyt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(Hyt=Ut.FLAGS||(Ut.FLAGS={}));var jyt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(jyt=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var cr;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(cr=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[cr.DELETE,cr.GET,cr.HEAD,cr.POST,cr.PUT,cr.CONNECT,cr.OPTIONS,cr.TRACE,cr.COPY,cr.LOCK,cr.MKCOL,cr.MOVE,cr.PROPFIND,cr.PROPPATCH,cr.SEARCH,cr.UNLOCK,cr.BIND,cr.REBIND,cr.UNBIND,cr.ACL,cr.REPORT,cr.MKACTIVITY,cr.CHECKOUT,cr.MERGE,cr["M-SEARCH"],cr.NOTIFY,cr.SUBSCRIBE,cr.UNSUBSCRIBE,cr.PATCH,cr.PURGE,cr.MKCALENDAR,cr.LINK,cr.UNLINK,cr.PRI,cr.SOURCE];Ut.METHODS_ICE=[cr.SOURCE];Ut.METHODS_RTSP=[cr.OPTIONS,cr.DESCRIBE,cr.ANNOUNCE,cr.SETUP,cr.PLAY,cr.PAUSE,cr.TEARDOWN,cr.GET_PARAMETER,cr.SET_PARAMETER,cr.REDIRECT,cr.RECORD,cr.FLUSH,cr.GET,cr.POST];Ut.METHOD_MAP=qyt.enumToMap(cr);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var Vyt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(Vyt=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var l4;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(l4=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:l4.CONNECTION,"content-length":l4.CONTENT_LENGTH,"proxy-connection":l4.CONNECTION,"transfer-encoding":l4.TRANSFER_ENCODING,upgrade:l4.UPGRADE}});var Qse=W((zYn,wBe)=>{"use strict";f();var{Buffer:$yt}=require("node:buffer");wBe.exports=$yt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var SBe=W((KYn,_Be)=>{"use strict";f();var{Buffer:zyt}=require("node:buffer");_Be.exports=zyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var GD=W((XYn,FBe)=>{"use strict";f();var RBe=["GET","HEAD","POST"],Yyt=new Set(RBe),Kyt=[101,204,205,304],kBe=[301,302,303,307,308],Jyt=new Set(kBe),BBe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Xyt=new Set(BBe),DBe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],Zyt=new Set(DBe),eCt=["follow","manual","error"],PBe=["GET","HEAD","OPTIONS","TRACE"],tCt=new Set(PBe),nCt=["navigate","same-origin","no-cors","cors"],rCt=["omit","same-origin","include"],iCt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],oCt=["content-encoding","content-language","content-location","content-type","content-length"],sCt=["half"],NBe=["CONNECT","TRACE","TRACK"],aCt=new Set(NBe),LBe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],lCt=new Set(LBe);FBe.exports={subresource:LBe,forbiddenMethods:NBe,requestBodyHeader:oCt,referrerPolicy:DBe,requestRedirect:eCt,requestMode:nCt,requestCredentials:rCt,requestCache:iCt,redirectStatus:kBe,corsSafeListedMethods:RBe,nullBodyStatus:Kyt,safeMethods:PBe,badPorts:BBe,requestDuplex:sCt,subresourceSet:lCt,badPortsSet:Xyt,redirectStatusSet:Jyt,corsSafeListedMethodsSet:Yyt,safeMethodsSet:tCt,forbiddenMethodsSet:aCt,referrerPolicySet:Zyt}});var Use=W((eKn,MBe)=>{"use strict";f();var Ose=Symbol.for("undici.globalOrigin.1");function cCt(){return globalThis[Ose]}s(cCt,"getGlobalOrigin");function uCt(t){if(t===void 0){Object.defineProperty(globalThis,Ose,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,Ose,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(uCt,"setGlobalOrigin");MBe.exports={getGlobalOrigin:cCt,setGlobalOrigin:uCt}});var Id=W((rKn,HBe)=>{"use strict";f();var sW=require("node:assert"),dCt=new TextEncoder,HD=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,fCt=/[\u000A\u000D\u0009\u0020]/,pCt=/[\u0009\u000A\u000C\u000D\u0020]/g,mCt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function hCt(t){sW(t.protocol==="data:");let e=UBe(t,!0);e=e.slice(5);let n={position:0},r=c4(",",e,n),i=r.length;if(r=vCt(r,!0,!0),n.position>=e.length)return"failure";n.position++;let o=e.slice(i+1),a=qBe(o);if(/;(\u0020){0,}base64$/i.test(r)){let c=GBe(a);if(a=ACt(c),a==="failure")return"failure";r=r.slice(0,-6),r=r.replace(/(\u0020)+$/,""),r=r.slice(0,-1)}r.startsWith(";")&&(r="text/plain"+r);let l=qse(r);return l==="failure"&&(l=qse("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(hCt,"dataURLProcessor");function UBe(t,e=!1){if(!e)return t.href;let n=t.href,r=t.hash.length,i=r===0?n:n.substring(0,n.length-r);return!r&&n.endsWith("#")?i.slice(0,-1):i}s(UBe,"URLSerializer");function aW(t,e,n){let r="";for(;n.position<e.length&&t(e[n.position]);)r+=e[n.position],n.position++;return r}s(aW,"collectASequenceOfCodePoints");function c4(t,e,n){let r=e.indexOf(t,n.position),i=n.position;return r===-1?(n.position=e.length,e.slice(i)):(n.position=r,e.slice(i,n.position))}s(c4,"collectASequenceOfCodePointsFast");function qBe(t){let e=dCt.encode(t);return gCt(e)}s(qBe,"stringPercentDecode");function QBe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(QBe,"isHexCharByte");function OBe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(OBe,"hexByteToNumber");function gCt(t){let e=t.length,n=new Uint8Array(e),r=0;for(let i=0;i<e;++i){let o=t[i];o!==37?n[r++]=o:o===37&&!(QBe(t[i+1])&&QBe(t[i+2]))?n[r++]=37:(n[r++]=OBe(t[i+1])<<4|OBe(t[i+2]),i+=2)}return e===r?n:n.subarray(0,r)}s(gCt,"percentDecode");function qse(t){t=oW(t,!0,!0);let e={position:0},n=c4("/",t,e);if(n.length===0||!HD.test(n)||e.position>t.length)return"failure";e.position++;let r=c4(";",t,e);if(r=oW(r,!1,!0),r.length===0||!HD.test(r))return"failure";let i=n.toLowerCase(),o=r.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,aW(u=>fCt.test(u),t,e);let l=aW(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=WBe(t,e,!0),c4(";",t,e);else if(c=c4(";",t,e),c=oW(c,!1,!0),c.length===0)continue;l.length!==0&&HD.test(l)&&(c.length===0||mCt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(qse,"parseMIMEType");function ACt(t){t=t.replace(pCt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let n=Buffer.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}s(ACt,"forgivingBase64");function WBe(t,e,n){let r=e.position,i="";for(sW(t[e.position]==='"'),e.position++;i+=aW(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{sW(o==='"');break}}return n?i:t.slice(r,e.position)}s(WBe,"collectAnHTTPQuotedString");function yCt(t){sW(t!=="failure");let{parameters:e,essence:n}=t,r=n;for(let[i,o]of e.entries())r+=";",r+=i,r+="=",HD.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),r+=o;return r}s(yCt,"serializeAMimeType");function CCt(t){return t===13||t===10||t===9||t===32}s(CCt,"isHTTPWhiteSpace");function oW(t,e=!0,n=!0){return Wse(t,e,n,CCt)}s(oW,"removeHTTPWhitespace");function xCt(t){return t===13||t===10||t===9||t===12||t===32}s(xCt,"isASCIIWhitespace");function vCt(t,e=!0,n=!0){return Wse(t,e,n,xCt)}s(vCt,"removeASCIIWhitespace");function Wse(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t.charCodeAt(i));)i++;if(n)for(;o>0&&r(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(Wse,"removeChars");function GBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let n="",r=0,i=65535;for(;r<e;)r+i>e&&(i=e-r),n+=String.fromCharCode.apply(null,t.subarray(r,r+=i));return n}s(GBe,"isomorphicDecode");function bCt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(bCt,"minimizeSupportedMimeType");HBe.exports={dataURLProcessor:hCt,URLSerializer:UBe,collectASequenceOfCodePoints:aW,collectASequenceOfCodePointsFast:c4,stringPercentDecode:qBe,parseMIMEType:qse,collectAnHTTPQuotedString:WBe,serializeAMimeType:yCt,removeChars:Wse,removeHTTPWhitespace:oW,minimizeSupportedMimeType:bCt,HTTP_TOKEN_CODEPOINTS:HD,isomorphicDecode:GBe}});var Cc=W((sKn,jBe)=>{"use strict";f();var{types:Qg,inspect:ECt}=require("node:util"),{markAsUncloneable:ICt}=require("node:worker_threads"),{toUSVString:TCt}=yi(),Pt={};Pt.converters={};Pt.util={};Pt.errors={};Pt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Pt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",n=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Pt.errors.exception({header:t.prefix,message:n})};Pt.errors.invalidArgument=function(t){return Pt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Pt.brandCheck=function(t,e,n){if(n?.strict!==!1){if(!(t instanceof e)){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}};Pt.argumentLengthCheck=function({length:t},e,n){if(t<e)throw Pt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:n})};Pt.illegalConstructor=function(){throw Pt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Pt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Pt.util.markAsUncloneable=ICt||(()=>{});Pt.util.ConvertToInt=function(t,e,n,r){let i,o;e===64?(i=Math.pow(2,53)-1,n==="unsigned"?o=0:o=Math.pow(-2,53)+1):n==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),r?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Pt.errors.exception({header:"Integer conversion",message:`Could not convert ${Pt.util.Stringify(t)} to an integer.`});if(a=Pt.util.IntegerPart(a),a<o||a>i)throw Pt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&r?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Pt.util.IntegerPart(a),a=a%Math.pow(2,e),n==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Pt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Pt.util.Stringify=function(t){switch(Pt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return ECt(t);case"String":return`"${t}"`;default:return`${t}`}};Pt.sequenceConverter=function(t){return(e,n,r,i)=>{if(Pt.util.Type(e)!=="Object")throw Pt.errors.exception({header:n,message:`${r} (${Pt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Pt.errors.exception({header:n,message:`${r} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,n,`${r}[${l++}]`))}return a}};Pt.recordConverter=function(t,e){return(n,r,i)=>{if(Pt.util.Type(n)!=="Object")throw Pt.errors.exception({header:r,message:`${i} ("${Pt.util.Type(n)}") is not an Object.`});let o={};if(!Qg.isProxy(n)){let l=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(let c of l){let u=t(c,r,i),d=e(n[c],r,i);o[u]=d}return o}let a=Reflect.ownKeys(n);for(let l of a)if(Reflect.getOwnPropertyDescriptor(n,l)?.enumerable){let u=t(l,r,i),d=e(n[l],r,i);o[u]=d}return o}};Pt.interfaceConverter=function(t){return(e,n,r,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Pt.errors.exception({header:n,message:`Expected ${r} ("${Pt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Pt.dictionaryConverter=function(t){return(e,n,r)=>{let i=Pt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Pt.errors.exception({header:n,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Pt.errors.exception({header:n,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,n,`${r}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Pt.errors.exception({header:n,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Pt.nullableConverter=function(t){return(e,n,r)=>e===null?e:t(e,n,r)};Pt.converters.DOMString=function(t,e,n,r){if(t===null&&r?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Pt.errors.exception({header:e,message:`${n} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Pt.converters.ByteString=function(t,e,n){let r=Pt.converters.DOMString(t,e,n);for(let i=0;i<r.length;i++)if(r.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${r.charCodeAt(i)} which is greater than 255.`);return r};Pt.converters.USVString=TCt;Pt.converters.boolean=function(t){return!!t};Pt.converters.any=function(t){return t};Pt.converters["long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"signed",void 0,e,n)};Pt.converters["unsigned long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"unsigned",void 0,e,n)};Pt.converters["unsigned long"]=function(t,e,n){return Pt.util.ConvertToInt(t,32,"unsigned",void 0,e,n)};Pt.converters["unsigned short"]=function(t,e,n,r){return Pt.util.ConvertToInt(t,16,"unsigned",r,e,n)};Pt.converters.ArrayBuffer=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Qg.isAnyArrayBuffer(t))throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(r?.allowShared===!1&&Qg.isSharedArrayBuffer(t))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.TypedArray=function(t,e,n,r,i){if(Pt.util.Type(t)!=="Object"||!Qg.isTypedArray(t)||t.constructor.name!==e.name)throw Pt.errors.conversionFailed({prefix:n,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Qg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.DataView=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Qg.isDataView(t))throw Pt.errors.exception({header:e,message:`${n} is not a DataView.`});if(r?.allowShared===!1&&Qg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.BufferSource=function(t,e,n,r){if(Qg.isAnyArrayBuffer(t))return Pt.converters.ArrayBuffer(t,e,n,{...r,allowShared:!1});if(Qg.isTypedArray(t))return Pt.converters.TypedArray(t,t.constructor,e,n,{...r,allowShared:!1});if(Qg.isDataView(t))return Pt.converters.DataView(t,e,n,{...r,allowShared:!1});throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["BufferSource"]})};Pt.converters["sequence<ByteString>"]=Pt.sequenceConverter(Pt.converters.ByteString);Pt.converters["sequence<sequence<ByteString>>"]=Pt.sequenceConverter(Pt.converters["sequence<ByteString>"]);Pt.converters["record<ByteString, ByteString>"]=Pt.recordConverter(Pt.converters.ByteString,Pt.converters.ByteString);jBe.exports={webidl:Pt}});var R0=W((lKn,o8e)=>{"use strict";f();var{Transform:wCt}=require("node:stream"),VBe=require("node:zlib"),{redirectStatusSet:_Ct,referrerPolicySet:SCt,badPortsSet:RCt}=GD(),{getGlobalOrigin:$Be}=Use(),{collectASequenceOfCodePoints:k2,collectAnHTTPQuotedString:kCt,removeChars:BCt,parseMIMEType:DCt}=Id(),{performance:PCt}=require("node:perf_hooks"),{isBlobLike:NCt,ReadableStreamFrom:LCt,isValidHTTPToken:zBe,normalizedMethodRecordsBase:FCt}=yi(),B2=require("node:assert"),{isUint8Array:MCt}=require("node:util/types"),{webidl:jD}=Cc(),YBe=[],cW;try{cW=require("node:crypto");let t=["sha256","sha384","sha512"];YBe=cW.getHashes().filter(e=>t.includes(e))}catch{}function KBe(t){let e=t.urlList,n=e.length;return n===0?null:e[n-1].toString()}s(KBe,"responseURL");function QCt(t,e){if(!_Ct.has(t.status))return null;let n=t.headersList.get("location",!0);return n!==null&&XBe(n)&&(JBe(n)||(n=OCt(n)),n=new URL(n,KBe(t))),n&&!n.hash&&(n.hash=e),n}s(QCt,"responseLocationURL");function JBe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>126||n<32)return!1}return!0}s(JBe,"isValidEncodedURL");function OCt(t){return Buffer.from(t,"binary").toString("utf8")}s(OCt,"normalizeBinaryStringToUtf8");function $D(t){return t.urlList[t.urlList.length-1]}s($D,"requestCurrentURL");function UCt(t){let e=$D(t);return r8e(e)&&RCt.has(e.port)?"blocked":"allowed"}s(UCt,"requestBadPort");function qCt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(qCt,"isErrorLike");function WCt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(!(n===9||n>=32&&n<=126||n>=128&&n<=255))return!1}return!0}s(WCt,"isValidReasonPhrase");var GCt=zBe;function XBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(XBe,"isValidHeaderValue");function HCt(t,e){let{headersList:n}=e,r=(n.get("referrer-policy",!0)??"").split(","),i="";if(r.length>0)for(let o=r.length;o!==0;o--){let a=r[o-1].trim();if(SCt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(HCt,"setRequestReferrerPolicyOnRedirect");function jCt(){return"allowed"}s(jCt,"crossOriginResourcePolicyCheck");function VCt(){return"success"}s(VCt,"corsCheck");function $Ct(){return"success"}s($Ct,"TAOCheck");function zCt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(zCt,"appendFetchMetadata");function YCt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&Hse(t.origin)&&!Hse($D(t))&&(e=null);break;case"same-origin":uW(t,$D(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(YCt,"appendRequestOriginHeader");function u4(t,e){return t}s(u4,"coarsenTime");function KCt(t,e,n){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:u4(t.domainLookupStartTime,n),domainLookupEndTime:u4(t.domainLookupEndTime,n),connectionStartTime:u4(t.connectionStartTime,n),connectionEndTime:u4(t.connectionEndTime,n),secureConnectionStartTime:u4(t.secureConnectionStartTime,n),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(KCt,"clampAndCoarsenConnectionTimingInfo");function JCt(t){return u4(PCt.now(),t)}s(JCt,"coarsenedSharedCurrentTime");function XCt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(XCt,"createOpaqueTimingInfo");function ZBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(ZBe,"makePolicyContainer");function ZCt(t){return{referrerPolicy:t.referrerPolicy}}s(ZCt,"clonePolicyContainer");function ext(t){let e=t.referrerPolicy;B2(e);let n=null;if(t.referrer==="client"){let l=$Be();if(!l||l.origin==="null")return"no-referrer";n=new URL(l)}else t.referrer instanceof URL&&(n=t.referrer);let r=Gse(n),i=Gse(n,!0);r.toString().length>4096&&(r=i);let o=uW(t,r),a=VD(r)&&!VD(t.url);switch(e){case"origin":return i??Gse(n,!0);case"unsafe-url":return r;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?r:i;case"strict-origin-when-cross-origin":{let l=$D(t);return uW(r,l)?r:VD(r)&&!VD(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(ext,"determineRequestsReferrer");function Gse(t,e){return B2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(Gse,"stripURLForReferrer");function VD(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(n){if(n==null||n==="null")return!1;let r=new URL(n);return!!(r.protocol==="https:"||r.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(r.hostname)||r.hostname==="localhost"||r.hostname.includes("localhost.")||r.hostname.endsWith(".localhost"))}}s(VD,"isURLPotentiallyTrustworthy");function txt(t,e){if(cW===void 0)return!0;let n=e8e(e);if(n==="no metadata"||n.length===0)return!0;let r=rxt(n),i=ixt(n,r);for(let o of i){let a=o.algo,l=o.hash,c=cW.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),oxt(c,l))return!0}return!1}s(txt,"bytesMatch");var nxt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function e8e(t){let e=[],n=!0;for(let r of t.split(" ")){n=!1;let i=nxt.exec(r);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();YBe.includes(o)&&e.push(i.groups)}return n===!0?"no metadata":e}s(e8e,"parseMetadata");function rxt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let n=1;n<t.length;++n){let r=t[n];if(r.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;r.algo[3]==="3"&&(e="sha384")}}return e}s(rxt,"getStrongestMetadata");function ixt(t,e){if(t.length===1)return t;let n=0;for(let r=0;r<t.length;++r)t[r].algo===e&&(t[n++]=t[r]);return t.length=n,t}s(ixt,"filterMetadataListByAlgorithm");function oxt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]){if(t[n]==="+"&&e[n]==="-"||t[n]==="/"&&e[n]==="_")continue;return!1}return!0}s(oxt,"compareBase64Mixed");function sxt(t){}s(sxt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function uW(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(uW,"sameOrigin");function axt(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}s(axt,"createDeferredPromise");function lxt(t){return t.controller.state==="aborted"}s(lxt,"isAborted");function cxt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(cxt,"isCancelled");function uxt(t){return FCt[t.toLowerCase()]??t}s(uxt,"normalizeMethod");function dxt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return B2(typeof e=="string"),e}s(dxt,"serializeJavascriptValueToJSONString");var fxt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function t8e(t,e,n=0,r=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[n]:u,[r]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,fxt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(t8e,"createIterator");function pxt(t,e,n,r=0,i=1){let o=t8e(t,n,r,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return jD.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return jD.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return jD.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(jD.brandCheck(this,e),jD.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(pxt,"iteratorMixin");async function mxt(t,e,n){let r=e,i=n,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{r(await n8e(o))}catch(a){i(a)}}s(mxt,"fullyReadBody");function hxt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(hxt,"isReadableStreamLike");function gxt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(gxt,"readableStreamClose");var Axt=/[^\x00-\xFF]/;function lW(t){return B2(!Axt.test(t)),t}s(lW,"isomorphicEncode");async function n8e(t){let e=[],n=0;for(;;){let{done:r,value:i}=await t.read();if(r)return Buffer.concat(e,n);if(!MCt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),n+=i.length}}s(n8e,"readAllBytes");function yxt(t){B2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(yxt,"urlIsLocal");function Hse(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(Hse,"urlHasHttpsScheme");function r8e(t){B2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(r8e,"urlIsHttpHttpsScheme");function Cxt(t,e){let n=t;if(!n.startsWith("bytes"))return"failure";let r={position:5};if(e&&k2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==61)return"failure";r.position++,e&&k2(c=>c==="	"||c===" ",n,r);let i=k2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),o=i.length?Number(i):null;if(e&&k2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==45)return"failure";r.position++,e&&k2(c=>c==="	"||c===" ",n,r);let a=k2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),l=a.length?Number(a):null;return r.position<n.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(Cxt,"simpleRangeHeaderValue");function xxt(t,e,n){let r="bytes ";return r+=lW(`${t}`),r+="-",r+=lW(`${e}`),r+="/",r+=lW(`${n}`),r}s(xxt,"buildContentRange");var jse=class extends wCt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,n,r){if(!this._inflateStream){if(e.length===0){r();return}this._inflateStream=(e[0]&15)===8?VBe.createInflate(this.#e):VBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,n,r)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function vxt(t){return new jse(t)}s(vxt,"createInflate");function bxt(t){let e=null,n=null,r=null,i=i8e("content-type",t);if(i===null)return"failure";for(let o of i){let a=DCt(o);a==="failure"||a.essence==="*/*"||(r=a,r.essence!==n?(e=null,r.parameters.has("charset")&&(e=r.parameters.get("charset")),n=r.essence):!r.parameters.has("charset")&&e!==null&&r.parameters.set("charset",e))}return r??"failure"}s(bxt,"extractMimeType");function Ext(t){let e=t,n={position:0},r=[],i="";for(;n.position<e.length;){if(i+=k2(o=>o!=='"'&&o!==",",e,n),n.position<e.length)if(e.charCodeAt(n.position)===34){if(i+=kCt(e,n),n.position<e.length)continue}else B2(e.charCodeAt(n.position)===44),n.position++;i=BCt(i,!0,!0,o=>o===9||o===32),r.push(i),i=""}return r}s(Ext,"gettingDecodingSplitting");function i8e(t,e){let n=e.get(t,!0);return n===null?null:Ext(n)}s(i8e,"getDecodeSplit");var Ixt=new TextDecoder;function Txt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),Ixt.decode(t))}s(Txt,"utf8DecodeBytes");var Vse=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return $Be()}get origin(){return this.baseUrl?.origin}policyContainer=ZBe()},$se=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new Vse},wxt=new $se;o8e.exports={isAborted:lxt,isCancelled:cxt,isValidEncodedURL:JBe,createDeferredPromise:axt,ReadableStreamFrom:LCt,tryUpgradeRequestToAPotentiallyTrustworthyURL:sxt,clampAndCoarsenConnectionTimingInfo:KCt,coarsenedSharedCurrentTime:JCt,determineRequestsReferrer:ext,makePolicyContainer:ZBe,clonePolicyContainer:ZCt,appendFetchMetadata:zCt,appendRequestOriginHeader:YCt,TAOCheck:$Ct,corsCheck:VCt,crossOriginResourcePolicyCheck:jCt,createOpaqueTimingInfo:XCt,setRequestReferrerPolicyOnRedirect:HCt,isValidHTTPToken:zBe,requestBadPort:UCt,requestCurrentURL:$D,responseURL:KBe,responseLocationURL:QCt,isBlobLike:NCt,isURLPotentiallyTrustworthy:VD,isValidReasonPhrase:WCt,sameOrigin:uW,normalizeMethod:uxt,serializeJavascriptValueToJSONString:dxt,iteratorMixin:pxt,createIterator:t8e,isValidHeaderName:GCt,isValidHeaderValue:XBe,isErrorLike:qCt,fullyReadBody:mxt,bytesMatch:txt,isReadableStreamLike:hxt,readableStreamClose:gxt,isomorphicEncode:lW,urlIsLocal:yxt,urlHasHttpsScheme:Hse,urlIsHttpHttpsScheme:r8e,readAllBytes:n8e,simpleRangeHeaderValue:Cxt,buildContentRange:xxt,parseMetadata:e8e,createInflate:vxt,extractMimeType:bxt,getDecodeSplit:i8e,utf8DecodeBytes:Txt,environmentSettingsObject:wxt}});var _v=W((dKn,s8e)=>{"use strict";f();s8e.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Yse=W((pKn,a8e)=>{"use strict";f();var{Blob:_xt,File:Sxt}=require("node:buffer"),{kState:ry}=_v(),{webidl:Og}=Cc(),zse=class t{static{s(this,"FileLike")}constructor(e,n,r={}){let i=n,o=r.type,a=r.lastModified??Date.now();this[ry]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Og.brandCheck(this,t),this[ry].blobLike.stream(...e)}arrayBuffer(...e){return Og.brandCheck(this,t),this[ry].blobLike.arrayBuffer(...e)}slice(...e){return Og.brandCheck(this,t),this[ry].blobLike.slice(...e)}text(...e){return Og.brandCheck(this,t),this[ry].blobLike.text(...e)}get size(){return Og.brandCheck(this,t),this[ry].blobLike.size}get type(){return Og.brandCheck(this,t),this[ry].blobLike.type}get name(){return Og.brandCheck(this,t),this[ry].name}get lastModified(){return Og.brandCheck(this,t),this[ry].lastModified}get[Symbol.toStringTag](){return"File"}};Og.converters.Blob=Og.interfaceConverter(_xt);function Rxt(t){return t instanceof Sxt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(Rxt,"isFileLike");a8e.exports={FileLike:zse,isFileLike:Rxt}});var YD=W((gKn,f8e)=>{"use strict";f();var{isBlobLike:dW,iteratorMixin:kxt}=R0(),{kState:Qu}=_v(),{kEnumerableProperty:d4}=yi(),{FileLike:l8e,isFileLike:Bxt}=Yse(),{webidl:ns}=Cc(),{File:d8e}=require("node:buffer"),c8e=require("node:util"),u8e=globalThis.File??d8e,zD=class t{static{s(this,"FormData")}constructor(e){if(ns.util.markAsUncloneable(this),e!==void 0)throw ns.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Qu]=[]}append(e,n,r=void 0){ns.brandCheck(this,t);let i="FormData.append";if(ns.argumentLengthCheck(arguments,2,i),arguments.length===3&&!dW(n))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ns.converters.USVString(e,i,"name"),n=dW(n)?ns.converters.Blob(n,i,"value",{strict:!1}):ns.converters.USVString(n,i,"value"),r=arguments.length===3?ns.converters.USVString(r,i,"filename"):void 0;let o=Kse(e,n,r);this[Qu].push(o)}delete(e){ns.brandCheck(this,t);let n="FormData.delete";ns.argumentLengthCheck(arguments,1,n),e=ns.converters.USVString(e,n,"name"),this[Qu]=this[Qu].filter(r=>r.name!==e)}get(e){ns.brandCheck(this,t);let n="FormData.get";ns.argumentLengthCheck(arguments,1,n),e=ns.converters.USVString(e,n,"name");let r=this[Qu].findIndex(i=>i.name===e);return r===-1?null:this[Qu][r].value}getAll(e){ns.brandCheck(this,t);let n="FormData.getAll";return ns.argumentLengthCheck(arguments,1,n),e=ns.converters.USVString(e,n,"name"),this[Qu].filter(r=>r.name===e).map(r=>r.value)}has(e){ns.brandCheck(this,t);let n="FormData.has";return ns.argumentLengthCheck(arguments,1,n),e=ns.converters.USVString(e,n,"name"),this[Qu].findIndex(r=>r.name===e)!==-1}set(e,n,r=void 0){ns.brandCheck(this,t);let i="FormData.set";if(ns.argumentLengthCheck(arguments,2,i),arguments.length===3&&!dW(n))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ns.converters.USVString(e,i,"name"),n=dW(n)?ns.converters.Blob(n,i,"name",{strict:!1}):ns.converters.USVString(n,i,"name"),r=arguments.length===3?ns.converters.USVString(r,i,"name"):void 0;let o=Kse(e,n,r),a=this[Qu].findIndex(l=>l.name===e);a!==-1?this[Qu]=[...this[Qu].slice(0,a),o,...this[Qu].slice(a+1).filter(l=>l.name!==e)]:this[Qu].push(o)}[c8e.inspect.custom](e,n){let r=this[Qu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});n.depth??=e,n.colors??=!0;let i=c8e.formatWithOptions(n,r);return`FormData ${i.slice(i.indexOf("]")+2)}`}};kxt("FormData",zD,Qu,"name","value");Object.defineProperties(zD.prototype,{append:d4,delete:d4,get:d4,getAll:d4,has:d4,set:d4,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Kse(t,e,n){if(typeof e!="string"){if(Bxt(e)||(e=e instanceof Blob?new u8e([e],"blob",{type:e.type}):new l8e(e,"blob",{type:e.type})),n!==void 0){let r={type:e.type,lastModified:e.lastModified};e=e instanceof d8e?new u8e([e],n,r):new l8e(e,n,r)}}return{name:t,value:e}}s(Kse,"makeEntry");f8e.exports={FormData:zD,makeEntry:Kse}});var y8e=W((CKn,A8e)=>{"use strict";f();var{isUSVString:p8e,bufferToLowerCasedHeaderName:Dxt}=yi(),{utf8DecodeBytes:Pxt}=R0(),{HTTP_TOKEN_CODEPOINTS:Nxt,isomorphicDecode:m8e}=Id(),{isFileLike:Lxt}=Yse(),{makeEntry:Fxt}=YD(),fW=require("node:assert"),{File:Mxt}=require("node:buffer"),Qxt=globalThis.File??Mxt,Oxt=Buffer.from('form-data; name="'),h8e=Buffer.from("; filename"),Uxt=Buffer.from("--"),qxt=Buffer.from(`--\r
`);function Wxt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(Wxt,"isAsciiString");function Gxt(t){let e=t.length;if(e<27||e>70)return!1;for(let n=0;n<e;++n){let r=t.charCodeAt(n);if(!(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||r===39||r===45||r===95))return!1}return!0}s(Gxt,"validateBoundary");function Hxt(t,e){fW(e!=="failure"&&e.essence==="multipart/form-data");let n=e.parameters.get("boundary");if(n===void 0)return"failure";let r=Buffer.from(`--${n}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+r.length).equals(r))o.position+=r.length;else return"failure";if(o.position===t.length-2&&pW(t,Uxt,o)||o.position===t.length-4&&pW(t,qxt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=jxt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(r.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",Wxt(d)||(d=""),h=new Qxt([m],u,{type:d})):h=Pxt(Buffer.from(m)),fW(p8e(c)),fW(typeof h=="string"&&p8e(h)||Lxt(h)),i.push(Fxt(c,h,u))}}s(Hxt,"multipartFormDataParser");function jxt(t,e){let n=null,r=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return n===null?"failure":{name:n,filename:r,contentType:i,encoding:o};let a=f4(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Jse(a,!0,!0,l=>l===9||l===32),!Nxt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,f4(l=>l===32||l===9,t,e),Dxt(a)){case"content-disposition":{if(n=r=null,!pW(t,Oxt,e)||(e.position+=17,n=g8e(t,e),n===null))return"failure";if(pW(t,h8e,e)){let l=e.position+h8e.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,r=g8e(t,e),r===null))return"failure"}break}case"content-type":{let l=f4(c=>c!==10&&c!==13,t,e);l=Jse(l,!1,!0,c=>c===9||c===32),i=m8e(l);break}case"content-transfer-encoding":{let l=f4(c=>c!==10&&c!==13,t,e);l=Jse(l,!1,!0,c=>c===9||c===32),o=m8e(l);break}default:f4(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(jxt,"parseMultipartFormDataHeaders");function g8e(t,e){fW(t[e.position-1]===34);let n=f4(r=>r!==10&&r!==13&&r!==34,t,e);return t[e.position]!==34?null:(e.position++,n=new TextDecoder().decode(n).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),n)}s(g8e,"parseMultipartFormDataName");function f4(t,e,n){let r=n.position;for(;r<e.length&&t(e[r]);)++r;return e.subarray(n.position,n.position=r)}s(f4,"collectASequenceOfBytes");function Jse(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t[i]);)i++;if(n)for(;o>0&&r(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Jse,"removeChars");function pW(t,e,n){if(t.length<e.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n.position+r])return!1;return!0}s(pW,"bufferStartsWith");A8e.exports={multipartFormDataParser:Hxt,validateBoundary:Gxt}});var h4=W((bKn,w8e)=>{"use strict";f();var KD=yi(),{ReadableStreamFrom:Vxt,isBlobLike:C8e,isReadableStreamLike:$xt,readableStreamClose:zxt,createDeferredPromise:Yxt,fullyReadBody:Kxt,extractMimeType:Jxt,utf8DecodeBytes:b8e}=R0(),{FormData:x8e}=YD(),{kState:m4}=_v(),{webidl:Xxt}=Cc(),{Blob:Zxt}=require("node:buffer"),Xse=require("node:assert"),{isErrored:E8e,isDisturbed:evt}=require("node:stream"),{isArrayBuffer:tvt}=require("node:util/types"),{serializeAMimeType:nvt}=Id(),{multipartFormDataParser:rvt}=y8e(),Zse;try{let t=require("node:crypto");Zse=s(e=>t.randomInt(0,e),"random")}catch{Zse=s(t=>Math.floor(Math.random(t)),"random")}var mW=new TextEncoder;function ivt(){}s(ivt,"noop");var eae=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,tae;eae&&(tae=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!evt(e)&&!E8e(e)&&e.cancel("Response object has been garbage collected").catch(ivt)}));function I8e(t,e=!1){let n=null;t instanceof ReadableStream?n=t:C8e(t)?n=t.stream():n=new ReadableStream({async pull(c){let u=typeof i=="string"?mW.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>zxt(c))},start(){},type:"bytes"}),Xse($xt(n));let r=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(tvt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(KD.isFormDataLike(t)){let c=`----formdata-undici-0${`${Zse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=mW.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=mW.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=mW.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,r=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(C8e(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(KD.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");n=t instanceof ReadableStream?t:Vxt(t)}if((typeof i=="string"||KD.isBuffer(i))&&(o=Buffer.byteLength(i)),r!=null){let c;n=new ReadableStream({async start(){c=r(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!E8e(n)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:n,source:i,length:o},a]}s(I8e,"extractBody");function ovt(t,e=!1){return t instanceof ReadableStream&&(Xse(!KD.isDisturbed(t),"The body has already been consumed."),Xse(!t.locked,"The stream is locked.")),I8e(t,e)}s(ovt,"safelyExtractBody");function svt(t,e){let[n,r]=e.stream.tee();return eae&&tae.register(t,new WeakRef(n)),e.stream=n,{stream:r,length:e.length,source:e.source}}s(svt,"cloneBody");function avt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(avt,"throwIfAborted");function lvt(t){return{blob(){return p4(this,n=>{let r=v8e(this);return r===null?r="":r&&(r=nvt(r)),new Zxt([n],{type:r})},t)},arrayBuffer(){return p4(this,n=>new Uint8Array(n).buffer,t)},text(){return p4(this,b8e,t)},json(){return p4(this,uvt,t)},formData(){return p4(this,n=>{let r=v8e(this);if(r!==null)switch(r.essence){case"multipart/form-data":{let i=rvt(n,r);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new x8e;return o[m4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(n.toString()),o=new x8e;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return p4(this,n=>new Uint8Array(n),t)}}}s(lvt,"bodyMixinMethods");function cvt(t){Object.assign(t.prototype,lvt(t))}s(cvt,"mixinBody");async function p4(t,e,n){if(Xxt.brandCheck(t,n),T8e(t))throw new TypeError("Body is unusable: Body has already been read");avt(t[m4]);let r=Yxt(),i=s(a=>r.reject(a),"errorSteps"),o=s(a=>{try{r.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[m4].body==null?(o(Buffer.allocUnsafe(0)),r.promise):(await Kxt(t[m4].body,o,i),r.promise)}s(p4,"consumeBody");function T8e(t){let e=t[m4].body;return e!=null&&(e.stream.locked||KD.isDisturbed(e.stream))}s(T8e,"bodyUnusable");function uvt(t){return JSON.parse(b8e(t))}s(uvt,"parseJSONFromBytes");function v8e(t){let e=t[m4].headersList,n=Jxt(e);return n==="failure"?null:n}s(v8e,"bodyMimeType");w8e.exports={extractBody:I8e,safelyExtractBody:ovt,cloneBody:svt,mixinBody:cvt,streamRegistry:tae,hasFinalizationRegistry:eae,bodyUnusable:T8e}});var M8e=W((TKn,F8e)=>{"use strict";f();var xr=require("node:assert"),Hr=yi(),{channels:_8e}=n4(),nae=Lse(),{RequestContentLengthMismatchError:D2,ResponseContentLengthMismatchError:dvt,RequestAbortedError:P8e,HeadersTimeoutError:fvt,HeadersOverflowError:pvt,SocketError:xW,InformationalError:g4,BodyTimeoutError:mvt,HTTPParserError:hvt,ResponseExceededMaxSizeError:gvt}=yo(),{kUrl:N8e,kReset:Td,kClient:sae,kParser:ua,kBlocking:ZD,kRunning:Zc,kPending:Avt,kSize:S8e,kWriting:Rv,kQueue:Mm,kNoRef:JD,kKeepAliveDefaultTimeout:yvt,kHostHeader:Cvt,kPendingIdx:xvt,kRunningIdx:rp,kError:ip,kPipelining:yW,kSocket:A4,kKeepAliveTimeoutValue:vW,kMaxHeadersSize:rae,kKeepAliveMaxTimeout:vvt,kKeepAliveTimeoutThreshold:bvt,kHeadersTimeout:Evt,kBodyTimeout:Ivt,kStrictContentLength:aae,kMaxRequests:R8e,kCounter:Tvt,kMaxResponseSize:wvt,kOnError:_vt,kResume:Sv,kHTTPContext:L8e}=qs(),Ug=TBe(),Svt=Buffer.alloc(0),hW=Buffer[Symbol.species],gW=Hr.addListener,Rvt=Hr.removeAllListeners,iae;async function kvt(){let t=process.env.JEST_WORKER_ID?Qse():void 0,e;try{e=await WebAssembly.compile(SBe())}catch{e=await WebAssembly.compile(t||Qse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((n,r,i)=>0,"wasm_on_url"),wasm_on_status:s((n,r,i)=>{xr(Al.ptr===n);let o=r-Wg+qg.byteOffset;return Al.onStatus(new hW(qg.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(n=>(xr(Al.ptr===n),Al.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((n,r,i)=>{xr(Al.ptr===n);let o=r-Wg+qg.byteOffset;return Al.onHeaderField(new hW(qg.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((n,r,i)=>{xr(Al.ptr===n);let o=r-Wg+qg.byteOffset;return Al.onHeaderValue(new hW(qg.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((n,r,i,o)=>(xr(Al.ptr===n),Al.onHeadersComplete(r,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((n,r,i)=>{xr(Al.ptr===n);let o=r-Wg+qg.byteOffset;return Al.onBody(new hW(qg.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(n=>(xr(Al.ptr===n),Al.onMessageComplete()||0),"wasm_on_message_complete")}})}s(kvt,"lazyllhttp");var oae=null,lae=kvt();lae.catch();var Al=null,qg=null,AW=0,Wg=null,Bvt=0,XD=1,y4=2|XD,CW=4|XD,cae=8|Bvt,uae=class{static{s(this,"Parser")}constructor(e,n,{exports:r}){xr(Number.isFinite(e[rae])&&e[rae]>0),this.llhttp=r,this.ptr=this.llhttp.llhttp_alloc(Ug.TYPE.RESPONSE),this.client=e,this.socket=n,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[rae],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[wvt]}setTimeout(e,n){e!==this.timeoutValue||n&XD^this.timeoutType&XD?(this.timeout&&(nae.clearTimeout(this.timeout),this.timeout=null),e&&(n&XD?this.timeout=nae.setFastTimeout(k8e,e,new WeakRef(this)):(this.timeout=setTimeout(k8e,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=n}resume(){this.socket.destroyed||!this.paused||(xr(this.ptr!=null),xr(Al==null),this.llhttp.llhttp_resume(this.ptr),xr(this.timeoutType===CW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Svt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){xr(this.ptr!=null),xr(Al==null),xr(!this.paused);let{socket:n,llhttp:r}=this;e.length>AW&&(Wg&&r.free(Wg),AW=Math.ceil(e.length/4096)*4096,Wg=r.malloc(AW)),new Uint8Array(r.memory.buffer,Wg,AW).set(e);try{let i;try{qg=e,Al=this,i=r.llhttp_execute(this.ptr,Wg,e.length)}catch(a){throw a}finally{Al=null,qg=null}let o=r.llhttp_get_error_pos(this.ptr)-Wg;if(i===Ug.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Ug.ERROR.PAUSED)this.paused=!0,n.unshift(e.slice(o));else if(i!==Ug.ERROR.OK){let a=r.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(r.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(r.memory.buffer,a,c).toString()+")"}throw new hvt(l,Ug.ERROR[i],e.slice(o))}}catch(i){Hr.destroy(n,i)}}destroy(){xr(this.ptr!=null),xr(Al==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&nae.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:n}=this;if(e.destroyed)return-1;let r=n[Mm][n[rp]];if(!r)return-1;r.onResponseStarted()}onHeaderField(e){let n=this.headers.length;(n&1)===0?this.headers.push(e):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let n=this.headers.length;(n&1)===1?(this.headers.push(e),n+=1):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]);let r=this.headers[n-2];if(r.length===10){let i=Hr.bufferToLowerCasedHeaderName(r);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else r.length===14&&Hr.bufferToLowerCasedHeaderName(r)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Hr.destroy(this.socket,new pvt)}onUpgrade(e){let{upgrade:n,client:r,socket:i,headers:o,statusCode:a}=this;xr(n),xr(r[A4]===i),xr(!i.destroyed),xr(!this.paused),xr((o.length&1)===0);let l=r[Mm][r[rp]];xr(l),xr(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[ua].destroy(),i[ua]=null,i[sae]=null,i[ip]=null,Rvt(i),r[A4]=null,r[L8e]=null,r[Mm][r[rp]++]=null,r.emit("disconnect",r[N8e],[r],new g4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Hr.destroy(i,c)}r[Sv]()}onHeadersComplete(e,n,r){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Mm][i[rp]];if(!c)return-1;if(xr(!this.upgrade),xr(this.statusCode<200),e===100)return Hr.destroy(o,new xW("bad response",Hr.getSocketInfo(o))),-1;if(n&&!c.upgrade)return Hr.destroy(o,new xW("bad upgrade",Hr.getSocketInfo(o))),-1;if(xr(this.timeoutType===y4),this.statusCode=e,this.shouldKeepAlive=r||c.method==="HEAD"&&!o[Td]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[Ivt];this.setTimeout(d,CW)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return xr(i[Zc]===1),this.upgrade=!0,2;if(n)return xr(i[Zc]===1),this.upgrade=!0,2;if(xr((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[yW]){let d=this.keepAlive?Hr.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[bvt],i[vvt]);p<=0?o[Td]=!0:i[vW]=p}else i[vW]=i[yvt]}else o[Td]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[ZD]&&(o[ZD]=!1,i[Sv]()),u?Ug.ERROR.PAUSED:0)}onBody(e){let{client:n,socket:r,statusCode:i,maxResponseSize:o}=this;if(r.destroyed)return-1;let a=n[Mm][n[rp]];if(xr(a),xr(this.timeoutType===CW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),xr(i>=200),o>-1&&this.bytesRead+e.length>o)return Hr.destroy(r,new gvt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Ug.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:n,statusCode:r,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(n.destroyed&&(!r||c))return-1;if(i)return;xr(r>=100),xr((this.headers.length&1)===0);let u=e[Mm][e[rp]];if(xr(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(r<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Hr.destroy(n,new dvt),-1;if(u.onComplete(o),e[Mm][e[rp]++]=null,n[Rv])return xr(e[Zc]===0),Hr.destroy(n,new g4("reset")),Ug.ERROR.PAUSED;if(c){if(n[Td]&&e[Zc]===0)return Hr.destroy(n,new g4("reset")),Ug.ERROR.PAUSED;e[yW]==null||e[yW]===1?setImmediate(()=>e[Sv]()):e[Sv]()}else return Hr.destroy(n,new g4("reset")),Ug.ERROR.PAUSED}}};function k8e(t){let{socket:e,timeoutType:n,client:r,paused:i}=t.deref();n===y4?(!e[Rv]||e.writableNeedDrain||r[Zc]>1)&&(xr(!i,"cannot be paused while waiting for headers"),Hr.destroy(e,new fvt)):n===CW?i||Hr.destroy(e,new mvt):n===cae&&(xr(r[Zc]===0&&r[vW]),Hr.destroy(e,new g4("socket idle timeout")))}s(k8e,"onParserTimeout");async function Dvt(t,e){t[A4]=e,oae||(oae=await lae,lae=null),e[JD]=!1,e[Rv]=!1,e[Td]=!1,e[ZD]=!1,e[ua]=new uae(t,e,oae),gW(e,"error",function(r){xr(r.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[ua];if(r.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[ip]=r,this[sae][_vt](r)}),gW(e,"readable",function(){let r=this[ua];r&&r.readMore()}),gW(e,"end",function(){let r=this[ua];if(r.statusCode&&!r.shouldKeepAlive){r.onMessageComplete();return}Hr.destroy(this,new xW("other side closed",Hr.getSocketInfo(this)))}),gW(e,"close",function(){let r=this[sae],i=this[ua];i&&(!this[ip]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[ua].destroy(),this[ua]=null);let o=this[ip]||new xW("closed",Hr.getSocketInfo(this));if(r[A4]=null,r[L8e]=null,r.destroyed){xr(r[Avt]===0);let a=r[Mm].splice(r[rp]);for(let l=0;l<a.length;l++){let c=a[l];Hr.errorRequest(r,c,o)}}else if(r[Zc]>0&&o.code!=="UND_ERR_INFO"){let a=r[Mm][r[rp]];r[Mm][r[rp]++]=null,Hr.errorRequest(r,a,o)}r[xvt]=r[rp],xr(r[Zc]===0),r.emit("disconnect",r[N8e],[r],o),r[Sv]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h1",defaultPipelining:1,write(...r){return Lvt(t,...r)},resume(){Pvt(t)},destroy(r,i){n?queueMicrotask(i):e.destroy(r).on("close",i)},get destroyed(){return e.destroyed},busy(r){return!!(e[Rv]||e[Td]||e[ZD]||r&&(t[Zc]>0&&!r.idempotent||t[Zc]>0&&(r.upgrade||r.method==="CONNECT")||t[Zc]>0&&Hr.bodyLength(r.body)!==0&&(Hr.isStream(r.body)||Hr.isAsyncIterable(r.body)||Hr.isFormDataLike(r.body))))}}}s(Dvt,"connectH1");function Pvt(t){let e=t[A4];if(e&&!e.destroyed){if(t[S8e]===0?!e[JD]&&e.unref&&(e.unref(),e[JD]=!0):e[JD]&&e.ref&&(e.ref(),e[JD]=!1),t[S8e]===0)e[ua].timeoutType!==cae&&e[ua].setTimeout(t[vW],cae);else if(t[Zc]>0&&e[ua].statusCode<200&&e[ua].timeoutType!==y4){let n=t[Mm][t[rp]],r=n.headersTimeout!=null?n.headersTimeout:t[Evt];e[ua].setTimeout(r,y4)}}}s(Pvt,"resumeH1");function Nvt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Nvt,"shouldSendContentLength");function Lvt(t,e){let{method:n,path:r,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=n==="PUT"||n==="POST"||n==="PATCH"||n==="QUERY"||n==="PROPFIND"||n==="PROPPATCH";if(Hr.isFormDataLike(c)){iae||(iae=h4().extractBody);let[v,b]=iae(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Hr.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Hr.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Nvt(n)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[aae])return Hr.errorRequest(t,e,new D2),!1;process.emitWarning(new D2)}let h=t[A4],g=s(v=>{e.aborted||e.completed||(Hr.errorRequest(t,e,v||new P8e),Hr.destroy(c),Hr.destroy(h,new g4("aborted")))},"abort");try{e.onConnect(g)}catch(v){Hr.errorRequest(t,e,v)}if(e.aborted)return!1;n==="HEAD"&&(h[Td]=!0),(o||n==="CONNECT")&&(h[Td]=!0),l!=null&&(h[Td]=l),t[R8e]&&h[Tvt]++>=t[R8e]&&(h[Td]=!0),a&&(h[ZD]=!0);let y=`${n} ${r} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[Cvt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[yW]&&!h[Td]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return _8e.sendHeaders.hasSubscribers&&_8e.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?B8e(g,null,t,e,h,d,y,p):Hr.isBuffer(c)?B8e(g,c,t,e,h,d,y,p):Hr.isBlobLike(c)?typeof c.stream=="function"?D8e(g,c.stream(),t,e,h,d,y,p):Mvt(g,c,t,e,h,d,y,p):Hr.isStream(c)?Fvt(g,c,t,e,h,d,y,p):Hr.isIterable(c)?D8e(g,c,t,e,h,d,y,p):xr(!1),!0}s(Lvt,"writeH1");function Fvt(t,e,n,r,i,o,a,l){xr(o!==0||n[Zc]===0,"stream body cannot be pipelined");let c=!1,u=new bW({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Hr.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new P8e;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,xr(i.destroyed||i[Rv]&&n[Zc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Hr.destroy(e,g):Hr.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Fvt,"writeStream");function B8e(t,e,n,r,i,o,a,l){try{e?Hr.isBuffer(e)&&(xr(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),r.onBodySent(e),!l&&r.reset!==!1&&(i[Td]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(xr(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),r.onRequestSent(),n[Sv]()}catch(c){t(c)}}s(B8e,"writeBuffer");async function Mvt(t,e,n,r,i,o,a,l){xr(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new D2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),r.onBodySent(c),r.onRequestSent(),!l&&r.reset!==!1&&(i[Td]=!0),n[Sv]()}catch(c){t(c)}}s(Mvt,"writeBlob");async function D8e(t,e,n,r,i,o,a,l){xr(o!==0||n[Zc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{xr(c===null),i[ip]?h(i[ip]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new bW({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a});try{for await(let m of e){if(i[ip])throw i[ip];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(D8e,"writeIterable");var bW=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:n,request:r,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=n,this.request=r,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,n[Rv]=!0}write(e){let{socket:n,request:r,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(n[ip])throw n[ip];if(n.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[aae])throw new D2;process.emitWarning(new D2)}n.cork(),a===0&&(!l&&r.reset!==!1&&(n[Td]=!0),i===null?n.write(`${c}transfer-encoding: chunked\r
`,"latin1"):n.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&n.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=n.write(e);return n.uncork(),r.onBodySent(e),d||n[ua].timeout&&n[ua].timeoutType===y4&&n[ua].timeout.refresh&&n[ua].timeout.refresh(),d}end(){let{socket:e,contentLength:n,client:r,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[Rv]=!1,e[ip])throw e[ip];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):n===null&&e.write(`\r
0\r
\r
`,"latin1"),n!==null&&i!==n){if(r[aae])throw new D2;process.emitWarning(new D2)}e[ua].timeout&&e[ua].timeoutType===y4&&e[ua].timeout.refresh&&e[ua].timeout.refresh(),r[Sv]()}}destroy(e){let{socket:n,client:r,abort:i}=this;n[Rv]=!1,e&&(xr(r[Zc]<=1,"pipeline should only contain this request"),i(e))}};F8e.exports=Dvt});var j8e=W((SKn,H8e)=>{"use strict";f();var op=require("node:assert"),{pipeline:Qvt}=require("node:stream"),Mi=yi(),{RequestContentLengthMismatchError:dae,RequestAbortedError:Q8e,SocketError:eP,InformationalError:fae}=yo(),{kUrl:EW,kReset:TW,kClient:C4,kRunning:wW,kPending:Ovt,kQueue:kv,kPendingIdx:pae,kRunningIdx:Qm,kError:Um,kSocket:jl,kStrictContentLength:Uvt,kOnError:mae,kMaxConcurrentStreams:G8e,kHTTP2Session:Om,kResume:Bv,kSize:qvt,kHTTPContext:Wvt}=qs(),iy=Symbol("open streams"),O8e,U8e=!1,IW;try{IW=require("node:http2")}catch{IW={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Gvt,HTTP2_HEADER_METHOD:Hvt,HTTP2_HEADER_PATH:jvt,HTTP2_HEADER_SCHEME:Vvt,HTTP2_HEADER_CONTENT_LENGTH:$vt,HTTP2_HEADER_EXPECT:zvt,HTTP2_HEADER_STATUS:Yvt}}=IW;function Kvt(t){let e=[];for(let[n,r]of Object.entries(t))if(Array.isArray(r))for(let i of r)e.push(Buffer.from(n),Buffer.from(i));else e.push(Buffer.from(n),Buffer.from(r));return e}s(Kvt,"parseH2Headers");async function Jvt(t,e){t[jl]=e,U8e||(U8e=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let n=IW.connect(t[EW],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[G8e]});n[iy]=0,n[C4]=t,n[jl]=e,Mi.addListener(n,"error",Zvt),Mi.addListener(n,"frameError",ebt),Mi.addListener(n,"end",tbt),Mi.addListener(n,"goaway",nbt),Mi.addListener(n,"close",function(){let{[C4]:i}=this,{[jl]:o}=i,a=this[jl][Um]||this[Um]||new eP("closed",Mi.getSocketInfo(o));if(i[Om]=null,i.destroyed){op(i[Ovt]===0);let l=i[kv].splice(i[Qm]);for(let c=0;c<l.length;c++){let u=l[c];Mi.errorRequest(i,u,a)}}}),n.unref(),t[Om]=n,e[Om]=n,Mi.addListener(e,"error",function(i){op(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Um]=i,this[C4][mae](i)}),Mi.addListener(e,"end",function(){Mi.destroy(this,new eP("other side closed",Mi.getSocketInfo(this)))}),Mi.addListener(e,"close",function(){let i=this[Um]||new eP("closed",Mi.getSocketInfo(this));t[jl]=null,this[Om]!=null&&this[Om].destroy(i),t[pae]=t[Qm],op(t[wW]===0),t.emit("disconnect",t[EW],[t],i),t[Bv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return ibt(t,...i)},resume(){Xvt(t)},destroy(i,o){r?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Jvt,"connectH2");function Xvt(t){let e=t[jl];e?.destroyed===!1&&(t[qvt]===0&&t[G8e]===0?(e.unref(),t[Om].unref()):(e.ref(),t[Om].ref()))}s(Xvt,"resumeH2");function Zvt(t){op(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[jl][Um]=t,this[C4][mae](t)}s(Zvt,"onHttp2SessionError");function ebt(t,e,n){if(n===0){let r=new fae(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[jl][Um]=r,this[C4][mae](r)}}s(ebt,"onHttp2FrameError");function tbt(){let t=new eP("other side closed",Mi.getSocketInfo(this[jl]));this.destroy(t),Mi.destroy(this[jl],t)}s(tbt,"onHttp2SessionEnd");function nbt(t){let e=this[Um]||new eP(`HTTP/2: "GOAWAY" frame received with code ${t}`,Mi.getSocketInfo(this)),n=this[C4];if(n[jl]=null,n[Wvt]=null,this[Om]!=null&&(this[Om].destroy(e),this[Om]=null),Mi.destroy(this[jl],e),n[Qm]<n[kv].length){let r=n[kv][n[Qm]];n[kv][n[Qm]++]=null,Mi.errorRequest(n,r,e),n[pae]=n[Qm]}op(n[wW]===0),n.emit("disconnect",n[EW],[n],e),n[Bv]()}s(nbt,"onHTTP2GoAway");function rbt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(rbt,"shouldSendContentLength");function ibt(t,e){let n=t[Om],{method:r,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Mi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let B=u[k+0],N=u[k+1];if(Array.isArray(N))for(let U=0;U<N.length;U++)p[B]?p[B]+=`,${N[U]}`:p[B]=N[U];else p[B]=N}let m,{hostname:h,port:g}=t[EW];p[Gvt]=o||`${h}${g?`:${g}`:""}`,p[Hvt]=r;let y=s(k=>{e.aborted||e.completed||(k=k||new Q8e,Mi.errorRequest(t,e,k),m!=null&&Mi.destroy(m,k),Mi.destroy(d,k),t[kv][t[Qm]++]=null,t[Bv]())},"abort");try{e.onConnect(y)}catch(k){Mi.errorRequest(t,e,k)}if(e.aborted)return!1;if(r==="CONNECT")return n.ref(),m=n.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++n[iy],t[kv][t[Qm]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++n[iy],t[kv][t[Qm]++]=null}),m.once("close",()=>{n[iy]-=1,n[iy]===0&&n.unref()}),!0;p[jvt]=i,p[Vvt]="https";let v=r==="PUT"||r==="POST"||r==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Mi.bodyLength(d);if(Mi.isFormDataLike(d)){O8e??=h4().extractBody;let[k,B]=O8e(d);p["content-type"]=B,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),rbt(r)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[Uvt])return Mi.errorRequest(t,e,new dae),!1;process.emitWarning(new dae)}b!=null&&(op(d,"no body must not have content length"),p[$vt]=`${b}`),n.ref();let E=r==="GET"||r==="HEAD"||d===null;return l?(p[zvt]="100-continue",m=n.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=n.request(p,{endStream:E,signal:c}),_()),++n[iy],m.once("response",k=>{let{[Yvt]:B,...N}=k;if(e.onResponseStarted(),e.aborted){let U=new Q8e;Mi.errorRequest(t,e,U),Mi.destroy(m,U);return}e.onHeaders(Number(B),Kvt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",U=>{e.onData(U)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),n[iy]===0&&n.unref(),y(new fae("HTTP/2: stream half-closed (remote)")),t[kv][t[Qm]++]=null,t[pae]=t[Qm],t[Bv]()}),m.once("close",()=>{n[iy]-=1,n[iy]===0&&n.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,B)=>{y(new fae(`HTTP/2: "frameError" received - type ${k}, code ${B}`))}),!0;function _(){!d||b===0?q8e(y,m,null,t,e,t[jl],b,v):Mi.isBuffer(d)?q8e(y,m,d,t,e,t[jl],b,v):Mi.isBlobLike(d)?typeof d.stream=="function"?W8e(y,m,d.stream(),t,e,t[jl],b,v):sbt(y,m,d,t,e,t[jl],b,v):Mi.isStream(d)?obt(y,t[jl],v,m,d,t,e,b):Mi.isIterable(d)?W8e(y,m,d,t,e,t[jl],b,v):op(!1)}s(_,"writeBodyH2")}s(ibt,"writeH2");function q8e(t,e,n,r,i,o,a,l){try{n!=null&&Mi.isBuffer(n)&&(op(a===n.byteLength,"buffer body must have content length"),e.cork(),e.write(n),e.uncork(),e.end(),i.onBodySent(n)),l||(o[TW]=!0),i.onRequestSent(),r[Bv]()}catch(c){t(c)}}s(q8e,"writeBuffer");function obt(t,e,n,r,i,o,a,l){op(l!==0||o[wW]===0,"stream body cannot be pipelined");let c=Qvt(i,r,d=>{d?(Mi.destroy(c,d),t(d)):(Mi.removeAllListeners(c),a.onRequestSent(),n||(e[TW]=!0),o[Bv]())});Mi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(obt,"writeStream");async function sbt(t,e,n,r,i,o,a,l){op(a===n.size,"blob body must have content length");try{if(a!=null&&a!==n.size)throw new dae;let c=Buffer.from(await n.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[TW]=!0),r[Bv]()}catch(c){t(c)}}s(sbt,"writeBlob");async function W8e(t,e,n,r,i,o,a,l){op(a!==0||r[wW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{op(c===null),o[Um]?m(o[Um]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of n){if(o[Um])throw o[Um];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[TW]=!0),r[Bv]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(W8e,"writeIterable");H8e.exports=Jvt});var SW=W((BKn,z8e)=>{"use strict";f();var Gg=yi(),{kBodyUsed:tP}=qs(),gae=require("node:assert"),{InvalidArgumentError:abt}=yo(),lbt=require("node:events"),cbt=[300,301,302,303,307,308],V8e=Symbol("body"),_W=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[V8e]=e,this[tP]=!1}async*[Symbol.asyncIterator](){gae(!this[tP],"disturbed"),this[tP]=!0,yield*this[V8e]}},hae=class{static{s(this,"RedirectHandler")}constructor(e,n,r,i){if(n!=null&&(!Number.isInteger(n)||n<0))throw new abt("maxRedirections must be a positive number");Gg.validateHandler(i,r.method,r.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...r,maxRedirections:0},this.maxRedirections=n,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Gg.isStream(this.opts.body)?(Gg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){gae(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[tP]=!1,lbt.prototype.on.call(this.opts.body,"data",function(){this[tP]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new _W(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Gg.isIterable(this.opts.body)&&(this.opts.body=new _W(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,n,r){this.handler.onUpgrade(e,n,r)}onError(e){this.handler.onError(e)}onHeaders(e,n,r,i){if(this.location=this.history.length>=this.maxRedirections||Gg.isDisturbed(this.opts.body)?null:ubt(e,n),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,n,r,i);let{origin:o,pathname:a,search:l}=Gg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=dbt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function ubt(t,e){if(cbt.indexOf(t)===-1)return null;for(let n=0;n<e.length;n+=2)if(e[n].length===8&&Gg.headerNameToString(e[n])==="location")return e[n+1]}s(ubt,"parseLocation");function $8e(t,e,n){if(t.length===4)return Gg.headerNameToString(t)==="host";if(e&&Gg.headerNameToString(t).startsWith("content-"))return!0;if(n&&(t.length===13||t.length===6||t.length===19)){let r=Gg.headerNameToString(t);return r==="authorization"||r==="cookie"||r==="proxy-authorization"}return!1}s($8e,"shouldRemoveHeader");function dbt(t,e,n){let r=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)$8e(t[i],e,n)||r.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))$8e(i,e,n)||r.push(i,t[i]);else gae(t==null,"headers must be an object or an array");return r}s(dbt,"cleanRequestHeaders");z8e.exports=hae});var RW=W((NKn,Y8e)=>{"use strict";f();var fbt=SW();function pbt({maxRedirections:t}){return e=>s(function(r,i){let{maxRedirections:o=t}=r;if(!o)return e(r,i);let a=new fbt(e,o,r,i);return r={...r,maxRedirections:0},e(r,a)},"Intercept")}s(pbt,"createRedirectInterceptor");Y8e.exports=pbt});var lP=W((MKn,oDe)=>{"use strict";f();var oy=require("node:assert"),tDe=require("node:net"),mbt=require("node:http"),P2=yi(),{channels:x4}=n4(),hbt=fBe(),gbt=s4(),{InvalidArgumentError:Da,InformationalError:Abt,ClientDestroyedError:ybt}=yo(),Cbt=WD(),{kUrl:Hg,kServerName:Dv,kClient:xbt,kBusy:Aae,kConnect:vbt,kResuming:N2,kRunning:sP,kPending:aP,kSize:oP,kQueue:qm,kConnected:bbt,kConnecting:v4,kNeedDrain:Nv,kKeepAliveDefaultTimeout:K8e,kHostHeader:Ebt,kPendingIdx:Wm,kRunningIdx:sy,kError:Ibt,kPipelining:kW,kKeepAliveTimeoutValue:Tbt,kMaxHeadersSize:wbt,kKeepAliveMaxTimeout:_bt,kKeepAliveTimeoutThreshold:Sbt,kHeadersTimeout:Rbt,kBodyTimeout:kbt,kStrictContentLength:Bbt,kConnector:nP,kMaxRedirections:Dbt,kMaxRequests:yae,kCounter:Pbt,kClose:Nbt,kDestroy:Lbt,kDispatch:Fbt,kInterceptors:J8e,kLocalAddress:rP,kMaxResponseSize:Mbt,kOnError:Qbt,kHTTPContext:Pa,kMaxConcurrentStreams:Obt,kResume:iP}=qs(),Ubt=M8e(),qbt=j8e(),X8e=!1,Pv=Symbol("kClosedResolve"),Z8e=s(()=>{},"noop");function nDe(t){return t[kW]??t[Pa]?.defaultPipelining??1}s(nDe,"getPipelining");var Cae=class extends gbt{static{s(this,"Client")}constructor(e,{interceptors:n,maxHeaderSize:r,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:B,maxRequestsPerClient:N,localAddress:U,maxResponseSize:re,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae,maxConcurrentStreams:H,allowH2:G}={}){if(super(),d!==void 0)throw new Da("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Da("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Da("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Da("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Da("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null&&!Number.isFinite(r))throw new Da("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Da("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Da("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Da("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Da("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Da("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Da("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Da("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Da("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Da("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Da("maxRequestsPerClient must be a positive number");if(U!=null&&(typeof U!="string"||tDe.isIP(U)===0))throw new Da("localAddress must be valid string IP address");if(re!=null&&(!Number.isInteger(re)||re<-1))throw new Da("maxResponseSize must be a positive number");if(ae!=null&&(!Number.isInteger(ae)||ae<-1))throw new Da("autoSelectFamilyAttemptTimeout must be a positive number");if(G!=null&&typeof G!="boolean")throw new Da("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Da("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=Cbt({...b,maxCachedSessions:_,allowH2:G,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:ae}:void 0,...B})),n?.Client&&Array.isArray(n.Client)?(this[J8e]=n.Client,X8e||(X8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[J8e]=[Wbt({maxRedirections:k})],this[Hg]=P2.parseOrigin(e),this[nP]=B,this[kW]=v??1,this[wbt]=r||mbt.maxHeaderSize,this[K8e]=p??4e3,this[_bt]=h??6e5,this[Sbt]=g??2e3,this[Tbt]=this[K8e],this[Dv]=null,this[rP]=U??null,this[N2]=0,this[Nv]=0,this[Ebt]=`host: ${this[Hg].hostname}${this[Hg].port?`:${this[Hg].port}`:""}\r
`,this[kbt]=c??3e5,this[Rbt]=i??3e5,this[Bbt]=E??!0,this[Dbt]=k,this[yae]=N,this[Pv]=null,this[Mbt]=re>-1?re:-1,this[Obt]=H??100,this[Pa]=null,this[qm]=[],this[sy]=0,this[Wm]=0,this[iP]=ue=>xae(this,ue),this[Qbt]=ue=>rDe(this,ue)}get pipelining(){return this[kW]}set pipelining(e){this[kW]=e,this[iP](!0)}get[aP](){return this[qm].length-this[Wm]}get[sP](){return this[Wm]-this[sy]}get[oP](){return this[qm].length-this[sy]}get[bbt](){return!!this[Pa]&&!this[v4]&&!this[Pa].destroyed}get[Aae](){return!!(this[Pa]?.busy(null)||this[oP]>=(nDe(this)||1)||this[aP]>0)}[vbt](e){iDe(this),this.once("connect",e)}[Fbt](e,n){let r=e.origin||this[Hg].origin,i=new hbt(r,e,n);return this[qm].push(i),this[N2]||(P2.bodyLength(i.body)==null&&P2.isIterable(i.body)?(this[N2]=1,queueMicrotask(()=>xae(this))):this[iP](!0)),this[N2]&&this[Nv]!==2&&this[Aae]&&(this[Nv]=2),this[Nv]<2}async[Nbt](){return new Promise(e=>{this[oP]?this[Pv]=e:e(null)})}async[Lbt](e){return new Promise(n=>{let r=this[qm].splice(this[Wm]);for(let o=0;o<r.length;o++){let a=r[o];P2.errorRequest(this,a,e)}let i=s(()=>{this[Pv]&&(this[Pv](),this[Pv]=null),n(null)},"callback");this[Pa]?(this[Pa].destroy(e,i),this[Pa]=null):queueMicrotask(i),this[iP]()})}},Wbt=RW();function rDe(t,e){if(t[sP]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){oy(t[Wm]===t[sy]);let n=t[qm].splice(t[sy]);for(let r=0;r<n.length;r++){let i=n[r];P2.errorRequest(t,i,e)}oy(t[oP]===0)}}s(rDe,"onError");async function iDe(t){oy(!t[v4]),oy(!t[Pa]);let{host:e,hostname:n,protocol:r,port:i}=t[Hg];if(n[0]==="["){let o=n.indexOf("]");oy(o!==-1);let a=n.substring(1,o);oy(tDe.isIP(a)),n=a}t[v4]=!0,x4.beforeConnect.hasSubscribers&&x4.beforeConnect.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Pa]?.version,servername:t[Dv],localAddress:t[rP]},connector:t[nP]});try{let o=await new Promise((a,l)=>{t[nP]({host:e,hostname:n,protocol:r,port:i,servername:t[Dv],localAddress:t[rP]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){P2.destroy(o.on("error",Z8e),new ybt);return}oy(o);try{t[Pa]=o.alpnProtocol==="h2"?await qbt(t,o):await Ubt(t,o)}catch(a){throw o.destroy().on("error",Z8e),a}t[v4]=!1,o[Pbt]=0,o[yae]=t[yae],o[xbt]=t,o[Ibt]=null,x4.connected.hasSubscribers&&x4.connected.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Pa]?.version,servername:t[Dv],localAddress:t[rP]},connector:t[nP],socket:o}),t.emit("connect",t[Hg],[t])}catch(o){if(t.destroyed)return;if(t[v4]=!1,x4.connectError.hasSubscribers&&x4.connectError.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Pa]?.version,servername:t[Dv],localAddress:t[rP]},connector:t[nP],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(oy(t[sP]===0);t[aP]>0&&t[qm][t[Wm]].servername===t[Dv];){let a=t[qm][t[Wm]++];P2.errorRequest(t,a,o)}else rDe(t,o);t.emit("connectionError",t[Hg],[t],o)}t[iP]()}s(iDe,"connect");function eDe(t){t[Nv]=0,t.emit("drain",t[Hg],[t])}s(eDe,"emitDrain");function xae(t,e){t[N2]!==2&&(t[N2]=2,Gbt(t,e),t[N2]=0,t[sy]>256&&(t[qm].splice(0,t[sy]),t[Wm]-=t[sy],t[sy]=0))}s(xae,"resume");function Gbt(t,e){for(;;){if(t.destroyed){oy(t[aP]===0);return}if(t[Pv]&&!t[oP]){t[Pv](),t[Pv]=null;return}if(t[Pa]&&t[Pa].resume(),t[Aae])t[Nv]=2;else if(t[Nv]===2){e?(t[Nv]=1,queueMicrotask(()=>eDe(t))):eDe(t);continue}if(t[aP]===0||t[sP]>=(nDe(t)||1))return;let n=t[qm][t[Wm]];if(t[Hg].protocol==="https:"&&t[Dv]!==n.servername){if(t[sP]>0)return;t[Dv]=n.servername,t[Pa]?.destroy(new Abt("servername changed"),()=>{t[Pa]=null,xae(t)})}if(t[v4])return;if(!t[Pa]){iDe(t);return}if(t[Pa].destroyed||t[Pa].busy(n))return;!n.aborted&&t[Pa].write(n)?t[Wm]++:t[qm].splice(t[Wm],1)}}s(Gbt,"_resume");oDe.exports=Cae});var vae=W((qKn,sDe)=>{"use strict";f();var BW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};sDe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new BW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new BW),this.head.push(e)}shift(){let e=this.tail,n=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),n}}});var lDe=W((HKn,aDe)=>{f();var{kFree:Hbt,kConnected:jbt,kPending:Vbt,kQueued:$bt,kRunning:zbt,kSize:Ybt}=qs(),L2=Symbol("pool"),bae=class{static{s(this,"PoolStats")}constructor(e){this[L2]=e}get connected(){return this[L2][jbt]}get free(){return this[L2][Hbt]}get pending(){return this[L2][Vbt]}get queued(){return this[L2][$bt]}get running(){return this[L2][zbt]}get size(){return this[L2][Ybt]}};aDe.exports=bae});var Sae=W(($Kn,yDe)=>{"use strict";f();var Kbt=s4(),Jbt=vae(),{kConnected:Eae,kSize:cDe,kRunning:uDe,kPending:dDe,kQueued:cP,kBusy:Xbt,kFree:Zbt,kUrl:eEt,kClose:tEt,kDestroy:nEt,kDispatch:rEt}=qs(),iEt=lDe(),wd=Symbol("clients"),Ou=Symbol("needDrain"),uP=Symbol("queue"),Iae=Symbol("closed resolve"),Tae=Symbol("onDrain"),fDe=Symbol("onConnect"),pDe=Symbol("onDisconnect"),mDe=Symbol("onConnectionError"),wae=Symbol("get dispatcher"),gDe=Symbol("add client"),ADe=Symbol("remove client"),hDe=Symbol("stats"),_ae=class extends Kbt{static{s(this,"PoolBase")}constructor(){super(),this[uP]=new Jbt,this[wd]=[],this[cP]=0;let e=this;this[Tae]=s(function(r,i){let o=e[uP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[cP]--,a=!this.dispatch(l.opts,l.handler)}this[Ou]=a,!this[Ou]&&e[Ou]&&(e[Ou]=!1,e.emit("drain",r,[e,...i])),e[Iae]&&o.isEmpty()&&Promise.all(e[wd].map(l=>l.close())).then(e[Iae])},"onDrain"),this[fDe]=(n,r)=>{e.emit("connect",n,[e,...r])},this[pDe]=(n,r,i)=>{e.emit("disconnect",n,[e,...r],i)},this[mDe]=(n,r,i)=>{e.emit("connectionError",n,[e,...r],i)},this[hDe]=new iEt(this)}get[Xbt](){return this[Ou]}get[Eae](){return this[wd].filter(e=>e[Eae]).length}get[Zbt](){return this[wd].filter(e=>e[Eae]&&!e[Ou]).length}get[dDe](){let e=this[cP];for(let{[dDe]:n}of this[wd])e+=n;return e}get[uDe](){let e=0;for(let{[uDe]:n}of this[wd])e+=n;return e}get[cDe](){let e=this[cP];for(let{[cDe]:n}of this[wd])e+=n;return e}get stats(){return this[hDe]}async[tEt](){this[uP].isEmpty()?await Promise.all(this[wd].map(e=>e.close())):await new Promise(e=>{this[Iae]=e})}async[nEt](e){for(;;){let n=this[uP].shift();if(!n)break;n.handler.onError(e)}await Promise.all(this[wd].map(n=>n.destroy(e)))}[rEt](e,n){let r=this[wae]();return r?r.dispatch(e,n)||(r[Ou]=!0,this[Ou]=!this[wae]()):(this[Ou]=!0,this[uP].push({opts:e,handler:n}),this[cP]++),!this[Ou]}[gDe](e){return e.on("drain",this[Tae]).on("connect",this[fDe]).on("disconnect",this[pDe]).on("connectionError",this[mDe]),this[wd].push(e),this[Ou]&&queueMicrotask(()=>{this[Ou]&&this[Tae](e[eEt],[this,e])}),this}[ADe](e){e.close(()=>{let n=this[wd].indexOf(e);n!==-1&&this[wd].splice(n,1)}),this[Ou]=this[wd].some(n=>!n[Ou]&&n.closed!==!0&&n.destroyed!==!0)}};yDe.exports={PoolBase:_ae,kClients:wd,kNeedDrain:Ou,kAddClient:gDe,kRemoveClient:ADe,kGetDispatcher:wae}});var b4=W((KKn,bDe)=>{"use strict";f();var{PoolBase:oEt,kClients:DW,kNeedDrain:sEt,kAddClient:aEt,kGetDispatcher:lEt}=Sae(),cEt=lP(),{InvalidArgumentError:Rae}=yo(),CDe=yi(),{kUrl:xDe,kInterceptors:uEt}=qs(),dEt=WD(),kae=Symbol("options"),Bae=Symbol("connections"),vDe=Symbol("factory");function fEt(t,e){return new cEt(t,e)}s(fEt,"defaultFactory");var Dae=class extends oEt{static{s(this,"Pool")}constructor(e,{connections:n,factory:r=fEt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),n!=null&&(!Number.isFinite(n)||n<0))throw new Rae("invalid connections");if(typeof r!="function")throw new Rae("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new Rae("connect must be a function or an object");typeof i!="function"&&(i=dEt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[uEt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[Bae]=n||null,this[xDe]=CDe.parseOrigin(e),this[kae]={...CDe.deepClone(m),connect:i,allowH2:p},this[kae].interceptors=m.interceptors?{...m.interceptors}:void 0,this[vDe]=r,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[DW].indexOf(v);b!==-1&&this[DW].splice(b,1)}})}[lEt](){for(let e of this[DW])if(!e[sEt])return e;if(!this[Bae]||this[DW].length<this[Bae]){let e=this[vDe](this[xDe],this[kae]);return this[aEt](e),e}}};bDe.exports=Dae});var _De=W((ZKn,wDe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:pEt,InvalidArgumentError:mEt}=yo(),{PoolBase:hEt,kClients:eu,kNeedDrain:dP,kAddClient:gEt,kRemoveClient:AEt,kGetDispatcher:yEt}=Sae(),CEt=b4(),{kUrl:Pae,kInterceptors:xEt}=qs(),{parseOrigin:EDe}=yi(),IDe=Symbol("factory"),PW=Symbol("options"),TDe=Symbol("kGreatestCommonDivisor"),F2=Symbol("kCurrentWeight"),M2=Symbol("kIndex"),sp=Symbol("kWeight"),NW=Symbol("kMaxWeightPerServer"),LW=Symbol("kErrorPenalty");function vEt(t,e){if(t===0)return e;for(;e!==0;){let n=e;e=t%e,t=n}return t}s(vEt,"getGreatestCommonDivisor");function bEt(t,e){return new CEt(t,e)}s(bEt,"defaultFactory");var Nae=class extends hEt{static{s(this,"BalancedPool")}constructor(e=[],{factory:n=bEt,...r}={}){if(super(),this[PW]=r,this[M2]=-1,this[F2]=0,this[NW]=this[PW].maxWeightPerServer||100,this[LW]=this[PW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof n!="function")throw new mEt("factory must be a function.");this[xEt]=r.interceptors?.BalancedPool&&Array.isArray(r.interceptors.BalancedPool)?r.interceptors.BalancedPool:[],this[IDe]=n;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let n=EDe(e).origin;if(this[eu].find(i=>i[Pae].origin===n&&i.closed!==!0&&i.destroyed!==!0))return this;let r=this[IDe](n,Object.assign({},this[PW]));this[gEt](r),r.on("connect",()=>{r[sp]=Math.min(this[NW],r[sp]+this[LW])}),r.on("connectionError",()=>{r[sp]=Math.max(1,r[sp]-this[LW]),this._updateBalancedPoolStats()}),r.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(r[sp]=Math.max(1,r[sp]-this[LW]),this._updateBalancedPoolStats())});for(let i of this[eu])i[sp]=this[NW];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let n=0;n<this[eu].length;n++)e=vEt(this[eu][n][sp],e);this[TDe]=e}removeUpstream(e){let n=EDe(e).origin,r=this[eu].find(i=>i[Pae].origin===n&&i.closed!==!0&&i.destroyed!==!0);return r&&this[AEt](r),this}get upstreams(){return this[eu].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[Pae].origin)}[yEt](){if(this[eu].length===0)throw new pEt;if(!this[eu].find(o=>!o[dP]&&o.closed!==!0&&o.destroyed!==!0)||this[eu].map(o=>o[dP]).reduce((o,a)=>o&&a,!0))return;let r=0,i=this[eu].findIndex(o=>!o[dP]);for(;r++<this[eu].length;){this[M2]=(this[M2]+1)%this[eu].length;let o=this[eu][this[M2]];if(o[sp]>this[eu][i][sp]&&!o[dP]&&(i=this[M2]),this[M2]===0&&(this[F2]=this[F2]-this[TDe],this[F2]<=0&&(this[F2]=this[NW])),o[sp]>=this[F2]&&!o[dP])return o}return this[F2]=this[eu][i][sp],this[M2]=i,this[eu][i]}};wDe.exports=Nae});var E4=W((nJn,NDe)=>{"use strict";f();var{InvalidArgumentError:FW}=yo(),{kClients:Lv,kRunning:SDe,kClose:EEt,kDestroy:IEt,kDispatch:TEt,kInterceptors:wEt}=qs(),_Et=s4(),SEt=b4(),REt=lP(),kEt=yi(),BEt=RW(),RDe=Symbol("onConnect"),kDe=Symbol("onDisconnect"),BDe=Symbol("onConnectionError"),DEt=Symbol("maxRedirections"),DDe=Symbol("onDrain"),PDe=Symbol("factory"),Lae=Symbol("options");function PEt(t,e){return e&&e.connections===1?new REt(t,e):new SEt(t,e)}s(PEt,"defaultFactory");var Fae=class extends _Et{static{s(this,"Agent")}constructor({factory:e=PEt,maxRedirections:n=0,connect:r,...i}={}){if(super(),typeof e!="function")throw new FW("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new FW("connect must be a function or an object");if(!Number.isInteger(n)||n<0)throw new FW("maxRedirections must be a positive number");r&&typeof r!="function"&&(r={...r}),this[wEt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[BEt({maxRedirections:n})],this[Lae]={...kEt.deepClone(i),connect:r},this[Lae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[DEt]=n,this[PDe]=e,this[Lv]=new Map,this[DDe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[RDe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[kDe]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[BDe]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[SDe](){let e=0;for(let n of this[Lv].values())e+=n[SDe];return e}[TEt](e,n){let r;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))r=String(e.origin);else throw new FW("opts.origin must be a non-empty string or URL.");let i=this[Lv].get(r);return i||(i=this[PDe](e.origin,this[Lae]).on("drain",this[DDe]).on("connect",this[RDe]).on("disconnect",this[kDe]).on("connectionError",this[BDe]),this[Lv].set(r,i)),i.dispatch(e,n)}async[EEt](){let e=[];for(let n of this[Lv].values())e.push(n.close());this[Lv].clear(),await Promise.all(e)}async[IEt](e){let n=[];for(let r of this[Lv].values())n.push(r.destroy(e));this[Lv].clear(),await Promise.all(n)}};NDe.exports=Fae});var Oae=W((oJn,QDe)=>{"use strict";f();var{kProxy:NEt,kClose:LEt,kDestroy:FEt,kInterceptors:MEt}=qs(),{URL:fP}=require("node:url"),QEt=E4(),OEt=b4(),UEt=s4(),{InvalidArgumentError:OW,RequestAbortedError:qEt,SecureProxyConnectionError:WEt}=yo(),LDe=WD(),MW=Symbol("proxy agent"),QW=Symbol("proxy client"),pP=Symbol("proxy headers"),Mae=Symbol("request tls settings"),FDe=Symbol("proxy tls settings"),MDe=Symbol("connect endpoint function");function GEt(t){return t==="https:"?443:80}s(GEt,"defaultProtocolPort");function HEt(t,e){return new OEt(t,e)}s(HEt,"defaultFactory");var jEt=s(()=>{},"noop"),Qae=class extends UEt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof fP)&&!e.uri)throw new OW("Proxy uri is mandatory");let{clientFactory:n=HEt}=e;if(typeof n!="function")throw new OW("Proxy opts.clientFactory must be a function.");let r=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=r;if(this[NEt]={uri:i,protocol:l},this[MEt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[Mae]=e.requestTls,this[FDe]=e.proxyTls,this[pP]=e.headers||{},e.auth&&e.token)throw new OW("opts.auth cannot be used in combination with opts.token");e.auth?this[pP]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[pP]["proxy-authorization"]=e.token:c&&u&&(this[pP]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=LDe({...e.proxyTls});this[MDe]=LDe({...e.requestTls}),this[QW]=n(r,{connect:p}),this[MW]=new QEt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${GEt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[QW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[pP],host:m.host},servername:this[FDe]?.servername||d});if(v!==200&&(y.on("error",jEt).destroy(),h(new qEt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[Mae]?b=this[Mae].servername:b=m.servername,this[MDe]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new WEt(y)):h(y)}},"connect")})}dispatch(e,n){let r=VEt(e.headers);if($Et(r),r&&!("host"in r)&&!("Host"in r)){let{host:i}=new fP(e.origin);r.host=i}return this[MW].dispatch({...e,headers:r},n)}#e(e){return typeof e=="string"?new fP(e):e instanceof fP?e:new fP(e.uri)}async[LEt](){await this[MW].close(),await this[QW].close()}async[FEt](){await this[MW].destroy(),await this[QW].destroy()}};function VEt(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}return t}s(VEt,"buildHeaders");function $Et(t){if(t&&Object.keys(t).find(n=>n.toLowerCase()==="proxy-authorization"))throw new OW("Proxy-Authorization should be sent in ProxyAgent constructor")}s($Et,"throwIfProxyAuthIsSent");QDe.exports=Qae});var HDe=W((lJn,GDe)=>{"use strict";f();var zEt=s4(),{kClose:YEt,kDestroy:KEt,kClosed:ODe,kDestroyed:UDe,kDispatch:JEt,kNoProxyAgent:mP,kHttpProxyAgent:Fv,kHttpsProxyAgent:Q2}=qs(),qDe=Oae(),XEt=E4(),ZEt={"http:":80,"https:":443},WDe=!1,Uae=class extends zEt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,WDe||(WDe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:n,httpsProxy:r,noProxy:i,...o}=e;this[mP]=new XEt(o);let a=n??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Fv]=new qDe({...o,uri:a}):this[Fv]=this[mP];let l=r??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[Q2]=new qDe({...o,uri:l}):this[Q2]=this[Fv],this.#o()}[JEt](e,n){let r=new URL(e.origin);return this.#r(r).dispatch(e,n)}async[YEt](){await this[mP].close(),this[Fv][ODe]||await this[Fv].close(),this[Q2][ODe]||await this[Q2].close()}async[KEt](e){await this[mP].destroy(e),this[Fv][UDe]||await this[Fv].destroy(e),this[Q2][UDe]||await this[Q2].destroy(e)}#r(e){let{protocol:n,host:r,port:i}=e;return r=r.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||ZEt[n]||0,this.#n(r,i)?n==="https:"?this[Q2]:this[Fv]:this[mP]}#n(e,n){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let r=0;r<this.#t.length;r++){let i=this.#t[r];if(!(i.port&&i.port!==n)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,n=e.split(/[,\s]/),r=[];for(let i=0;i<n.length;i++){let o=n[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);r.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=r}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};GDe.exports=Uae});var UW=W((dJn,zDe)=>{"use strict";f();var I4=require("node:assert"),{kRetryHandlerDefaultRetry:jDe}=qs(),{RequestRetryError:hP}=yo(),{isDisturbed:VDe,parseHeaders:eIt,parseRangeHeader:$De,wrapRequestBody:tIt}=yi();function nIt(t){let e=Date.now();return new Date(t).getTime()-e}s(nIt,"calculateRetryAfterHeader");var qae=class t{static{s(this,"RetryHandler")}constructor(e,n){let{retryOptions:r,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=r??{};this.dispatch=n.dispatch,this.handler=n.handler,this.opts={...i,body:tIt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[jDe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,n,r){this.handler.onUpgrade&&this.handler.onUpgrade(e,n,r)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[jDe](e,{state:n,opts:r},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=r,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=n;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?nIt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,n,r,i){let o=eIt(n);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,n,r,i):(this.abort(new hP("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new hP("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=$De(o["content-range"]);if(!l)return this.abort(new hP("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new hP("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return I4(this.start===c,"content-range mismatch"),I4(this.end==null||this.end===d,"content-range mismatch"),this.resume=r,!0}if(this.end==null){if(e===206){let l=$De(o["content-range"]);if(l==null)return this.handler.onHeaders(e,n,r,i);let{start:c,size:u,end:d=u-1}=l;I4(c!=null&&Number.isFinite(c),"content-range mismatch"),I4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return I4(Number.isFinite(this.start)),I4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=r,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,n,r,i)}let a=new hP("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||VDe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},n.bind(this));function n(r){if(r!=null||this.aborted||VDe(this.opts.body))return this.handler.onError(r);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(n,"onRetry")}};zDe.exports=qae});var KDe=W((mJn,YDe)=>{"use strict";f();var rIt=UD(),iIt=UW(),Wae=class extends rIt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,n={}){super(n),this.#e=e,this.#t=n}dispatch(e,n){let r=new iIt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:n});return this.#e.dispatch(e,r)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};YDe.exports=Wae});var zae=W((AJn,oPe)=>{"use strict";f();var tPe=require("node:assert"),{Readable:oIt}=require("node:stream"),{RequestAbortedError:nPe,NotSupportedError:sIt,InvalidArgumentError:aIt,AbortError:Gae}=yo(),rPe=yi(),{ReadableStreamFrom:lIt}=yi(),k0=Symbol("kConsume"),gP=Symbol("kReading"),Mv=Symbol("kBody"),JDe=Symbol("kAbort"),iPe=Symbol("kContentType"),XDe=Symbol("kContentLength"),cIt=s(()=>{},"noop"),Hae=class extends oIt{static{s(this,"BodyReadable")}constructor({resume:e,abort:n,contentType:r="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[JDe]=n,this[k0]=null,this[Mv]=null,this[iPe]=r,this[XDe]=i,this[gP]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new nPe),e&&this[JDe](),super.destroy(e)}_destroy(e,n){this[gP]?n(e):setImmediate(()=>{n(e)})}on(e,...n){return(e==="data"||e==="readable")&&(this[gP]=!0),super.on(e,...n)}addListener(e,...n){return this.on(e,...n)}off(e,...n){let r=super.off(e,...n);return(e==="data"||e==="readable")&&(this[gP]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...n){return this.off(e,...n)}push(e){return this[k0]&&e!==null?(Vae(this[k0],e),this[gP]?super.push(e):!0):super.push(e)}async text(){return AP(this,"text")}async json(){return AP(this,"json")}async blob(){return AP(this,"blob")}async bytes(){return AP(this,"bytes")}async arrayBuffer(){return AP(this,"arrayBuffer")}async formData(){throw new sIt}get bodyUsed(){return rPe.isDisturbed(this)}get body(){return this[Mv]||(this[Mv]=lIt(this),this[k0]&&(this[Mv].getReader(),tPe(this[Mv].locked))),this[Mv]}async dump(e){let n=Number.isFinite(e?.limit)?e.limit:131072,r=e?.signal;if(r!=null&&(typeof r!="object"||!("aborted"in r)))throw new aIt("signal must be an AbortSignal");return r?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[XDe]>n&&this.destroy(new Gae);let a=s(()=>{this.destroy(r.reason??new Gae)},"onAbort");r?.addEventListener("abort",a),this.on("close",function(){r?.removeEventListener("abort",a),r?.aborted?o(r.reason??new Gae):i(null)}).on("error",cIt).on("data",function(l){n-=l.length,n<=0&&this.destroy()}).resume()})}};function uIt(t){return t[Mv]&&t[Mv].locked===!0||t[k0]}s(uIt,"isLocked");function dIt(t){return rPe.isDisturbed(t)||uIt(t)}s(dIt,"isUnusable");async function AP(t,e){return tPe(!t[k0]),new Promise((n,r)=>{if(dIt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{r(o)}).on("close",()=>{r(new TypeError("unusable"))}):r(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[k0]={type:e,stream:t,resolve:n,reject:r,length:0,body:[]},t.on("error",function(i){$ae(this[k0],i)}).on("close",function(){this[k0].body!==null&&$ae(this[k0],new nPe)}),fIt(t[k0])})})}s(AP,"consume");function fIt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let n=e.bufferIndex,r=e.buffer.length;for(let i=n;i<r;i++)Vae(t,e.buffer[i])}else for(let n of e.buffer)Vae(t,n);for(e.endEmitted?ePe(this[k0]):t.stream.on("end",function(){ePe(this[k0])}),t.stream.resume();t.stream.read()!=null;);}s(fIt,"consumeStart");function jae(t,e){if(t.length===0||e===0)return"";let n=t.length===1?t[0]:Buffer.concat(t,e),r=n.length,i=r>2&&n[0]===239&&n[1]===187&&n[2]===191?3:0;return n.utf8Slice(i,r)}s(jae,"chunksDecode");function ZDe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let n=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),r=0;for(let i=0;i<t.length;++i){let o=t[i];n.set(o,r),r+=o.length}return n}s(ZDe,"chunksConcat");function ePe(t){let{type:e,body:n,resolve:r,stream:i,length:o}=t;try{e==="text"?r(jae(n,o)):e==="json"?r(JSON.parse(jae(n,o))):e==="arrayBuffer"?r(ZDe(n,o).buffer):e==="blob"?r(new Blob(n,{type:i[iPe]})):e==="bytes"&&r(ZDe(n,o)),$ae(t)}catch(a){i.destroy(a)}}s(ePe,"consumeEnd");function Vae(t,e){t.length+=e.length,t.body.push(e)}s(Vae,"consumePush");function $ae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s($ae,"consumeFinish");oPe.exports={Readable:Hae,chunksDecode:jae}});var Yae=W((xJn,uPe)=>{f();var pIt=require("node:assert"),{ResponseStatusCodeError:sPe}=yo(),{chunksDecode:aPe}=zae(),mIt=128*1024;async function hIt({callback:t,body:e,contentType:n,statusCode:r,statusMessage:i,headers:o}){pIt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>mIt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${r}${i?`: ${i}`:""}`;if(r===204||!n||!l){queueMicrotask(()=>t(new sPe(c,r,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{lPe(n)?d=JSON.parse(aPe(a,l)):cPe(n)&&(d=aPe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new sPe(c,r,o,d)))}s(hIt,"getResolveErrorBodyCallback");var lPe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),cPe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");uPe.exports={getResolveErrorBodyCallback:hIt,isContentTypeApplicationJson:lPe,isContentTypeText:cPe}});var pPe=W((EJn,Kae)=>{"use strict";f();var gIt=require("node:assert"),{Readable:AIt}=zae(),{InvalidArgumentError:T4,RequestAbortedError:dPe}=yo(),B0=yi(),{getResolveErrorBodyCallback:yIt}=Yae(),{AsyncResource:CIt}=require("node:async_hooks"),qW=class extends CIt{static{s(this,"RequestHandler")}constructor(e,n){if(!e||typeof e!="object")throw new T4("invalid opts");let{signal:r,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof n!="function")throw new T4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new T4("invalid highWaterMark");if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new T4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new T4("invalid method");if(l&&typeof l!="function")throw new T4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw B0.isStream(a)&&B0.destroy(a.on("error",B0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=n,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=r,this.reason=null,this.removeAbortListener=null,B0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new dPe:this.removeAbortListener=B0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new dPe,this.res?B0.destroy(this.res.on("error",B0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,n){if(this.reason){e(this.reason);return}gIt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?B0.parseRawHeaders(n):B0.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?B0.parseHeaders(n):p,h=m["content-type"],g=m["content-length"],y=new AIt({resume:r,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(yIt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){B0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:n,callback:r,body:i,opaque:o}=this;r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:o})})),n&&(this.res=null,queueMicrotask(()=>{B0.destroy(n,e)})),i&&(this.body=null,B0.destroy(i,e)),this.removeAbortListener&&(n?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function fPe(t,e){if(e===void 0)return new Promise((n,r)=>{fPe.call(this,t,(i,o)=>i?r(i):n(o))});try{this.dispatch(t,new qW(t,e))}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(fPe,"request");Kae.exports=fPe;Kae.exports.RequestHandler=qW});var yP=W((wJn,gPe)=>{f();var{addAbortListener:xIt}=yi(),{RequestAbortedError:vIt}=yo(),w4=Symbol("kListener"),jg=Symbol("kSignal");function mPe(t){t.abort?t.abort(t[jg]?.reason):t.reason=t[jg]?.reason??new vIt,hPe(t)}s(mPe,"abort");function bIt(t,e){if(t.reason=null,t[jg]=null,t[w4]=null,!!e){if(e.aborted){mPe(t);return}t[jg]=e,t[w4]=()=>{mPe(t)},xIt(t[jg],t[w4])}}s(bIt,"addSignal");function hPe(t){t[jg]&&("removeEventListener"in t[jg]?t[jg].removeEventListener("abort",t[w4]):t[jg].removeListener("abort",t[w4]),t[jg]=null,t[w4]=null)}s(hPe,"removeSignal");gPe.exports={addSignal:bIt,removeSignal:hPe}});var xPe=W((RJn,CPe)=>{"use strict";f();var EIt=require("node:assert"),{finished:IIt,PassThrough:TIt}=require("node:stream"),{InvalidArgumentError:_4,InvalidReturnValueError:wIt}=yo(),Gm=yi(),{getResolveErrorBodyCallback:_It}=Yae(),{AsyncResource:SIt}=require("node:async_hooks"),{addSignal:RIt,removeSignal:APe}=yP(),Jae=class extends SIt{static{s(this,"StreamHandler")}constructor(e,n,r){if(!e||typeof e!="object")throw new _4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof r!="function")throw new _4("invalid callback");if(typeof n!="function")throw new _4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new _4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new _4("invalid method");if(c&&typeof c!="function")throw new _4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Gm.isStream(l)&&Gm.destroy(l.on("error",Gm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=n,this.callback=r,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Gm.isStream(l)&&l.on("error",p=>{this.onError(p)}),RIt(this,i)}onConnect(e,n){if(this.reason){e(this.reason);return}EIt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Gm.parseRawHeaders(n):Gm.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Gm.parseHeaders(n):d)["content-type"];p=new TIt,this.callback=null,this.runInAsyncScope(_It,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new wIt("expected Writable");IIt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Gm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",r),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:n}=this;return n?n.write(e):!0}onComplete(e){let{res:n}=this;APe(this),n&&(this.trailers=Gm.parseHeaders(e),n.end())}onError(e){let{res:n,callback:r,opaque:i,body:o}=this;APe(this),this.factory=null,n?(this.res=null,Gm.destroy(n,e)):r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:i})})),o&&(this.body=null,Gm.destroy(o,e))}};function yPe(t,e,n){if(n===void 0)return new Promise((r,i)=>{yPe.call(this,t,e,(o,a)=>o?i(o):r(a))});try{this.dispatch(t,new Jae(t,e,n))}catch(r){if(typeof n!="function")throw r;let i=t?.opaque;queueMicrotask(()=>n(r,{opaque:i}))}}s(yPe,"stream");CPe.exports=yPe});var IPe=W((DJn,EPe)=>{"use strict";f();var{Readable:bPe,Duplex:kIt,PassThrough:BIt}=require("node:stream"),{InvalidArgumentError:CP,InvalidReturnValueError:DIt,RequestAbortedError:Xae}=yo(),ap=yi(),{AsyncResource:PIt}=require("node:async_hooks"),{addSignal:NIt,removeSignal:LIt}=yP(),vPe=require("node:assert"),S4=Symbol("resume"),Zae=class extends bPe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[S4]=null}_read(){let{[S4]:e}=this;e&&(this[S4]=null,e())}_destroy(e,n){this._read(),n(e)}},ele=class extends bPe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[S4]=e}_read(){this[S4]()}_destroy(e,n){!e&&!this._readableState.endEmitted&&(e=new Xae),n(e)}},tle=class extends PIt{static{s(this,"PipelineHandler")}constructor(e,n){if(!e||typeof e!="object")throw new CP("invalid opts");if(typeof n!="function")throw new CP("invalid handler");let{signal:r,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new CP("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new CP("invalid method");if(a&&typeof a!="function")throw new CP("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=n,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new Zae().on("error",ap.nop),this.ret=new kIt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[S4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new Xae),g&&c&&g(),ap.destroy(d,c),ap.destroy(p,c),ap.destroy(m,c),LIt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,NIt(this,r)}onConnect(e,n){let{ret:r,res:i}=this;if(this.reason){e(this.reason);return}vPe(!i,"pipeline cannot be retried"),vPe(!r.destroyed),this.abort=e,this.context=n}onHeaders(e,n,r){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?ap.parseRawHeaders(n):ap.parseHeaders(n);this.onInfo({statusCode:e,headers:c})}return}this.res=new ele(r);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?ap.parseRawHeaders(n):ap.parseHeaders(n);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",ap.nop),c}if(!l||typeof l.on!="function")throw new DIt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;ap.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||ap.destroy(c,new Xae)}),this.body=l}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;n.push(null)}onError(e){let{ret:n}=this;this.handler=null,ap.destroy(n,e)}};function FIt(t,e){try{let n=new tle(t,e);return this.dispatch({...t,body:n.req},n),n.ret}catch(n){return new BIt().destroy(n)}}s(FIt,"pipeline");EPe.exports=FIt});var kPe=W((LJn,RPe)=>{"use strict";f();var{InvalidArgumentError:nle,SocketError:MIt}=yo(),{AsyncResource:QIt}=require("node:async_hooks"),TPe=yi(),{addSignal:OIt,removeSignal:wPe}=yP(),_Pe=require("node:assert"),rle=class extends QIt{static{s(this,"UpgradeHandler")}constructor(e,n){if(!e||typeof e!="object")throw new nle("invalid opts");if(typeof n!="function")throw new nle("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new nle("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=n,this.abort=null,this.context=null,OIt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}_Pe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new MIt("bad upgrade",null)}onUpgrade(e,n,r){_Pe(e===101);let{callback:i,opaque:o,context:a}=this;wPe(this),this.callback=null;let l=this.responseHeaders==="raw"?TPe.parseRawHeaders(n):TPe.parseHeaders(n);this.runInAsyncScope(i,null,null,{headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;wPe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function SPe(t,e){if(e===void 0)return new Promise((n,r)=>{SPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new rle(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(SPe,"upgrade");RPe.exports=SPe});var LPe=W((QJn,NPe)=>{"use strict";f();var UIt=require("node:assert"),{AsyncResource:qIt}=require("node:async_hooks"),{InvalidArgumentError:ile,SocketError:WIt}=yo(),BPe=yi(),{addSignal:GIt,removeSignal:DPe}=yP(),ole=class extends qIt{static{s(this,"ConnectHandler")}constructor(e,n){if(!e||typeof e!="object")throw new ile("invalid opts");if(typeof n!="function")throw new ile("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new ile("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=n,this.abort=null,GIt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}UIt(this.callback),this.abort=e,this.context=n}onHeaders(){throw new WIt("bad connect",null)}onUpgrade(e,n,r){let{callback:i,opaque:o,context:a}=this;DPe(this),this.callback=null;let l=n;l!=null&&(l=this.responseHeaders==="raw"?BPe.parseRawHeaders(n):BPe.parseHeaders(n)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;DPe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function PPe(t,e){if(e===void 0)return new Promise((n,r)=>{PPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new ole(t,e);this.dispatch({...t,method:"CONNECT"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(PPe,"connect");NPe.exports=PPe});var FPe=W((qJn,R4)=>{"use strict";f();R4.exports.request=pPe();R4.exports.stream=xPe();R4.exports.pipeline=IPe();R4.exports.upgrade=kPe();R4.exports.connect=LPe()});var ale=W((GJn,MPe)=>{"use strict";f();var{UndiciError:HIt}=yo(),sle=class t extends HIt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};MPe.exports={MockNotMatchedError:sle}});var k4=W((VJn,QPe)=>{"use strict";f();QPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var xP=W((zJn,YPe)=>{"use strict";f();var{MockNotMatchedError:O2}=ale(),{kDispatches:WW,kMockAgent:jIt,kOriginalDispatch:VIt,kOrigin:$It,kGetNetConnect:zIt}=k4(),{buildURL:YIt}=yi(),{STATUS_CODES:KIt}=require("node:http"),{types:{isPromise:JIt}}=require("node:util");function ay(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ay,"matchValue");function UPe(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e.toLocaleLowerCase(),n]))}s(UPe,"lowerCaseEntries");function qPe(t,e){if(Array.isArray(t)){for(let n=0;n<t.length;n+=2)if(t[n].toLocaleLowerCase()===e.toLocaleLowerCase())return t[n+1];return}else return typeof t.get=="function"?t.get(e):UPe(t)[e.toLocaleLowerCase()]}s(qPe,"getHeaderByName");function ule(t){let e=t.slice(),n=[];for(let r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return Object.fromEntries(n)}s(ule,"buildHeadersFromArray");function WPe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=ule(e)),t.headers(e?UPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[n,r]of Object.entries(t.headers)){let i=qPe(e,n);if(!ay(r,i))return!1}return!0}s(WPe,"matchHeaders");function OPe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let n=new URLSearchParams(e.pop());return n.sort(),[...e,n.toString()].join("?")}s(OPe,"safeUrl");function XIt(t,{path:e,method:n,body:r,headers:i}){let o=ay(t.path,e),a=ay(t.method,n),l=typeof t.body<"u"?ay(t.body,r):!0,c=WPe(t,i);return o&&a&&l&&c}s(XIt,"matchKey");function GPe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(GPe,"getResponseData");function HPe(t,e){let n=e.query?YIt(e.path,e.query):e.path,r=typeof n=="string"?OPe(n):n,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ay(OPe(o),r));if(i.length===0)throw new O2(`Mock dispatch not matched for path '${r}'`);if(i=i.filter(({method:o})=>ay(o,e.method)),i.length===0)throw new O2(`Mock dispatch not matched for method '${e.method}' on path '${r}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ay(o,e.body):!0),i.length===0)throw new O2(`Mock dispatch not matched for body '${e.body}' on path '${r}'`);if(i=i.filter(o=>WPe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new O2(`Mock dispatch not matched for headers '${o}' on path '${r}'`)}return i[0]}s(HPe,"getMockDispatch");function ZIt(t,e,n){let r={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof n=="function"?{callback:n}:{...n},o={...r,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(ZIt,"addMockDispatch");function lle(t,e){let n=t.findIndex(r=>r.consumed?XIt(r,e):!1);n!==-1&&t.splice(n,1)}s(lle,"deleteMockDispatch");function jPe(t){let{path:e,method:n,body:r,headers:i,query:o}=t;return{path:e,method:n,body:r,headers:i,query:o}}s(jPe,"buildKey");function cle(t){let e=Object.keys(t),n=[];for(let r=0;r<e.length;++r){let i=e[r],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)n.push(a,Buffer.from(`${o[l]}`));else n.push(a,Buffer.from(`${o}`))}return n}s(cle,"generateKeyValues");function VPe(t){return KIt[t]||"unknown"}s(VPe,"getStatusText");async function e2t(t){let e=[];for await(let n of t)e.push(n);return Buffer.concat(e).toString("utf8")}s(e2t,"getResponse");function $Pe(t,e){let n=jPe(t),r=HPe(this[WW],n);r.timesInvoked++,r.data.callback&&(r.data={...r.data,...r.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=r,{timesInvoked:p,times:m}=r;if(r.consumed=!d&&p>=m,r.pending=p<m,c!==null)return lle(this[WW],n),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[WW])},u):h(this[WW]);function h(y,v=o){let b=Array.isArray(t.headers)?ule(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(JIt(E)){E.then(N=>h(y,N));return}let _=GPe(E),k=cle(a),B=cle(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,VPe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(B),lle(y,n)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s($Pe,"mockDispatch");function t2t(){let t=this[jIt],e=this[$It],n=this[VIt];return s(function(i,o){if(t.isMockActive)try{$Pe.call(this,i,o)}catch(a){if(a instanceof O2){let l=t[zIt]();if(l===!1)throw new O2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(zPe(l,e))n.call(this,i,o);else throw new O2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else n.call(this,i,o)},"dispatch")}s(t2t,"buildMockDispatch");function zPe(t,e){let n=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(r=>ay(r,n.host)))}s(zPe,"checkNetConnect");function n2t(t){if(t){let{agent:e,...n}=t;return n}}s(n2t,"buildMockOptions");YPe.exports={getResponseData:GPe,getMockDispatch:HPe,addMockDispatch:ZIt,deleteMockDispatch:lle,buildKey:jPe,generateKeyValues:cle,matchValue:ay,getResponse:e2t,getStatusText:VPe,mockDispatch:$Pe,buildMockDispatch:t2t,checkNetConnect:zPe,buildMockOptions:n2t,getHeaderByName:qPe,buildHeadersFromArray:ule}});var Ale=W((JJn,gle)=>{"use strict";f();var{getResponseData:r2t,buildKey:i2t,addMockDispatch:dle}=xP(),{kDispatches:GW,kDispatchKey:HW,kDefaultHeaders:fle,kDefaultTrailers:ple,kContentLength:mle,kMockDispatch:jW}=k4(),{InvalidArgumentError:Vg}=yo(),{buildURL:o2t}=yi(),B4=class{static{s(this,"MockScope")}constructor(e){this[jW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Vg("waitInMs must be a valid integer > 0");return this[jW].delay=e,this}persist(){return this[jW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Vg("repeatTimes must be a valid integer > 0");return this[jW].times=e,this}},hle=class{static{s(this,"MockInterceptor")}constructor(e,n){if(typeof e!="object")throw new Vg("opts must be an object");if(typeof e.path>"u")throw new Vg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=o2t(e.path,e.query);else{let r=new URL(e.path,"data://");e.path=r.pathname+r.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[HW]=i2t(e),this[GW]=n,this[fle]={},this[ple]={},this[mle]=!1}createMockScopeDispatchData({statusCode:e,data:n,responseOptions:r}){let i=r2t(n),o=this[mle]?{"content-length":i.length}:{},a={...this[fle],...o,...r.headers},l={...this[ple],...r.trailers};return{statusCode:e,data:n,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Vg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Vg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new Vg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=dle(this[GW],this[HW],o);return new B4(a)}let n={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(n);let r=this.createMockScopeDispatchData(n),i=dle(this[GW],this[HW],r);return new B4(i)}replyWithError(e){if(typeof e>"u")throw new Vg("error must be defined");let n=dle(this[GW],this[HW],{error:e});return new B4(n)}defaultReplyHeaders(e){if(typeof e>"u")throw new Vg("headers must be defined");return this[fle]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Vg("trailers must be defined");return this[ple]=e,this}replyContentLength(){return this[mle]=!0,this}};gle.exports.MockInterceptor=hle;gle.exports.MockScope=B4});var xle=W((eXn,n9e)=>{"use strict";f();var{promisify:s2t}=require("node:util"),a2t=lP(),{buildMockDispatch:l2t}=xP(),{kDispatches:KPe,kMockAgent:JPe,kClose:XPe,kOriginalClose:ZPe,kOrigin:e9e,kOriginalDispatch:c2t,kConnected:yle}=k4(),{MockInterceptor:u2t}=Ale(),t9e=qs(),{InvalidArgumentError:d2t}=yo(),Cle=class extends a2t{static{s(this,"MockClient")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new d2t("Argument opts.agent must implement Agent");this[JPe]=n.agent,this[e9e]=e,this[KPe]=[],this[yle]=1,this[c2t]=this.dispatch,this[ZPe]=this.close.bind(this),this.dispatch=l2t.call(this),this.close=this[XPe]}get[t9e.kConnected](){return this[yle]}intercept(e){return new u2t(e,this[KPe])}async[XPe](){await s2t(this[ZPe])(),this[yle]=0,this[JPe][t9e.kClients].delete(this[e9e])}};n9e.exports=Cle});var Ele=W((rXn,c9e)=>{"use strict";f();var{promisify:f2t}=require("node:util"),p2t=b4(),{buildMockDispatch:m2t}=xP(),{kDispatches:r9e,kMockAgent:i9e,kClose:o9e,kOriginalClose:s9e,kOrigin:a9e,kOriginalDispatch:h2t,kConnected:vle}=k4(),{MockInterceptor:g2t}=Ale(),l9e=qs(),{InvalidArgumentError:A2t}=yo(),ble=class extends p2t{static{s(this,"MockPool")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new A2t("Argument opts.agent must implement Agent");this[i9e]=n.agent,this[a9e]=e,this[r9e]=[],this[vle]=1,this[h2t]=this.dispatch,this[s9e]=this.close.bind(this),this.dispatch=m2t.call(this),this.close=this[o9e]}get[l9e.kConnected](){return this[vle]}intercept(e){return new g2t(e,this[r9e])}async[o9e](){await f2t(this[s9e])(),this[vle]=0,this[i9e][l9e.kClients].delete(this[a9e])}};c9e.exports=ble});var d9e=W((aXn,u9e)=>{"use strict";f();var y2t={pronoun:"it",is:"is",was:"was",this:"this"},C2t={pronoun:"they",is:"are",was:"were",this:"these"};u9e.exports=class{static{s(this,"Pluralizer")}constructor(e,n){this.singular=e,this.plural=n}pluralize(e){let n=e===1,r=n?y2t:C2t,i=n?this.singular:this.plural;return{...r,count:e,noun:i}}}});var p9e=W((dXn,f9e)=>{"use strict";f();var{Transform:x2t}=require("node:stream"),{Console:v2t}=require("node:console"),b2t=process.versions.icu?"\u2705":"Y ",E2t=process.versions.icu?"\u274C":"N ";f9e.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new x2t({transform(n,r,i){i(null,n)}}),this.logger=new v2t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let n=e.map(({method:r,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:r,Origin:u,Path:i,"Status code":o,Persistent:a?b2t:E2t,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(n),this.transform.read().toString()}}});var A9e=W((mXn,g9e)=>{"use strict";f();var{kClients:U2}=qs(),I2t=E4(),{kAgent:Ile,kMockAgentSet:VW,kMockAgentGet:m9e,kDispatches:Tle,kIsMockActive:$W,kNetConnect:q2,kGetNetConnect:T2t,kOptions:zW,kFactory:YW}=k4(),w2t=xle(),_2t=Ele(),{matchValue:S2t,buildMockOptions:R2t}=xP(),{InvalidArgumentError:h9e,UndiciError:k2t}=yo(),B2t=UD(),D2t=d9e(),P2t=p9e(),wle=class extends B2t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[q2]=!0,this[$W]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new h9e("Argument opts.agent must implement Agent");let n=e?.agent?e.agent:new I2t(e);this[Ile]=n,this[U2]=n[U2],this[zW]=R2t(e)}get(e){let n=this[m9e](e);return n||(n=this[YW](e),this[VW](e,n)),n}dispatch(e,n){return this.get(e.origin),this[Ile].dispatch(e,n)}async close(){await this[Ile].close(),this[U2].clear()}deactivate(){this[$W]=!1}activate(){this[$W]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[q2])?this[q2].push(e):this[q2]=[e];else if(typeof e>"u")this[q2]=!0;else throw new h9e("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[q2]=!1}get isMockActive(){return this[$W]}[VW](e,n){this[U2].set(e,n)}[YW](e){let n=Object.assign({agent:this},this[zW]);return this[zW]&&this[zW].connections===1?new w2t(e,n):new _2t(e,n)}[m9e](e){let n=this[U2].get(e);if(n)return n;if(typeof e!="string"){let r=this[YW]("http://localhost:9999");return this[VW](e,r),r}for(let[r,i]of Array.from(this[U2]))if(i&&typeof r!="string"&&S2t(r,e)){let o=this[YW](e);return this[VW](e,o),o[Tle]=i[Tle],o}}[T2t](){return this[q2]}pendingInterceptors(){let e=this[U2];return Array.from(e.entries()).flatMap(([n,r])=>r[Tle].map(i=>({...i,origin:n}))).filter(({pending:n})=>n)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new P2t}={}){let n=this.pendingInterceptors();if(n.length===0)return;let r=new D2t("interceptor","interceptors").pluralize(n.length);throw new k2t(`
${r.count} ${r.noun} ${r.is} pending:

${e.format(n)}
`.trim())}};g9e.exports=wle});var KW=W((AXn,v9e)=>{"use strict";f();var y9e=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:N2t}=yo(),L2t=E4();x9e()===void 0&&C9e(new L2t);function C9e(t){if(!t||typeof t.dispatch!="function")throw new N2t("Argument agent must implement Agent");Object.defineProperty(globalThis,y9e,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(C9e,"setGlobalDispatcher");function x9e(){return globalThis[y9e]}s(x9e,"getGlobalDispatcher");v9e.exports={setGlobalDispatcher:C9e,getGlobalDispatcher:x9e}});var JW=W((vXn,b9e)=>{"use strict";f();b9e.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var I9e=W((IXn,E9e)=>{"use strict";f();var F2t=SW();E9e.exports=t=>{let e=t?.maxRedirections;return n=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return n(i,o);let c=new F2t(n,a,i,o);return n(l,c)},"redirectInterceptor")}});var w9e=W((_Xn,T9e)=>{"use strict";f();var M2t=UW();T9e.exports=t=>e=>s(function(r,i){return e(r,new M2t({...r,retryOptions:{...t,...r.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var S9e=W((kXn,_9e)=>{"use strict";f();var Q2t=yi(),{InvalidArgumentError:O2t,RequestAbortedError:U2t}=yo(),q2t=JW(),_le=class extends q2t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#r=!1;#n=0;#o=null;#s=null;constructor({maxSize:e},n){if(super(n),e!=null&&(!Number.isFinite(e)||e<1))throw new O2t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=n}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#r=!0,this.#o=e}onHeaders(e,n,r,i){let a=Q2t.parseHeaders(n)["content-length"];if(a!=null&&a>this.#e)throw new U2t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#r?!0:this.#s.onHeaders(e,n,r,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#n=this.#n+e.length,this.#n>=this.#e&&(this.#i=!0,this.#r?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#r){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function W2t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(r,i){let{dumpMaxSize:o=t}=r,a=new _le({maxSize:o},i);return e(r,a)},"Intercept")}s(W2t,"createDumpInterceptor");_9e.exports=W2t});var B9e=W((PXn,k9e)=>{"use strict";f();var{isIP:G2t}=require("node:net"),{lookup:H2t}=require("node:dns"),j2t=JW(),{InvalidArgumentError:D4,InformationalError:V2t}=yo(),R9e=Math.pow(2,31)-1,Sle=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#r,this.pick=e.pick??this.#n}get full(){return this.#i.size===this.#t}runLookup(e,n,r){let i=this.#i.get(e.hostname);if(i==null&&this.full){r(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...n.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){r(a??new V2t("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",r(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,n,r);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",r(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#r(e,n,r){H2t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return r(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);r(null,a.values())})}#n(e,n,r){let i=null,{records:o,offset:a}=n,l;if(this.dualStack?(r==null&&(a==null||a===R9e?(n.offset=0,r=4):(n.offset++,r=(n.offset&1)===1?6:4)),o[r]!=null&&o[r].ips.length>0?l=o[r]:l=o[r===4?6:4]):l=o[r],l==null||l.ips.length===0)return i;l.offset==null||l.offset===R9e?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,n,r)):i}setRecords(e,n){let r=Date.now(),i={records:{4:null,6:null}};for(let o of n){o.timestamp=r,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,n){return new Rle(this,e,n)}},Rle=class extends j2t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#r=null;#n=null;constructor(e,{origin:n,handler:r,dispatch:i},o){super(r),this.#n=n,this.#r=r,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#n,this.#t,(n,r)=>{if(n)return this.#r.onError(n);let i={...this.#t,origin:r};this.#i(i,this)});return}this.#r.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#n);default:this.#r.onError(e);break}}};k9e.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new D4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new D4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new D4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new D4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new D4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new D4("Invalid pick. Must be a function");let e=t?.dualStack??!0,n;e?n=t?.affinity??null:n=t?.affinity??4;let r={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:n,maxItems:t?.maxItems??1/0},i=new Sle(r);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return G2t(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var W2=W((FXn,Q9e)=>{"use strict";f();var{kConstruct:$2t}=qs(),{kEnumerableProperty:P4}=yi(),{iteratorMixin:z2t,isValidHeaderName:vP,isValidHeaderValue:P9e}=R0(),{webidl:to}=Cc(),kle=require("node:assert"),XW=require("node:util"),el=Symbol("headers map"),D0=Symbol("headers map sorted");function D9e(t){return t===10||t===13||t===9||t===32}s(D9e,"isHTTPWhiteSpaceCharCode");function N9e(t){let e=0,n=t.length;for(;n>e&&D9e(t.charCodeAt(n-1));)--n;for(;n>e&&D9e(t.charCodeAt(e));)++e;return e===0&&n===t.length?t:t.substring(e,n)}s(N9e,"headerValueNormalize");function L9e(t,e){if(Array.isArray(e))for(let n=0;n<e.length;++n){let r=e[n];if(r.length!==2)throw to.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${r.length}.`});Ble(t,r[0],r[1])}else if(typeof e=="object"&&e!==null){let n=Object.keys(e);for(let r=0;r<n.length;++r)Ble(t,n[r],e[n[r]])}else throw to.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(L9e,"fill");function Ble(t,e,n){if(n=N9e(n),vP(e)){if(!P9e(n))throw to.errors.invalidArgument({prefix:"Headers.append",value:n,type:"header value"})}else throw to.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(M9e(t)==="immutable")throw new TypeError("immutable");return Dle(t).append(e,n,!1)}s(Ble,"appendHeader");function F9e(t,e){return t[0]<e[0]?-1:1}s(F9e,"compareHeaderName");var ZW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[el]=new Map(e[el]),this[D0]=e[D0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[el]=new Map(e),this[D0]=null)}contains(e,n){return this[el].has(n?e:e.toLowerCase())}clear(){this[el].clear(),this[D0]=null,this.cookies=null}append(e,n,r){this[D0]=null;let i=r?e:e.toLowerCase(),o=this[el].get(i);if(o){let a=i==="cookie"?"; ":", ";this[el].set(i,{name:o.name,value:`${o.value}${a}${n}`})}else this[el].set(i,{name:e,value:n});i==="set-cookie"&&(this.cookies??=[]).push(n)}set(e,n,r){this[D0]=null;let i=r?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[n]),this[el].set(i,{name:e,value:n})}delete(e,n){this[D0]=null,n||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[el].delete(e)}get(e,n){return this[el].get(n?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:n}}of this[el])yield[e,n]}get entries(){let e={};if(this[el].size!==0)for(let{name:n,value:r}of this[el].values())e[n]=r;return e}rawValues(){return this[el].values()}get entriesList(){let e=[];if(this[el].size!==0)for(let{0:n,1:{name:r,value:i}}of this[el])if(n==="set-cookie")for(let o of this.cookies)e.push([r,o]);else e.push([r,i]);return e}toSortedArray(){let e=this[el].size,n=new Array(e);if(e<=32){if(e===0)return n;let r=this[el][Symbol.iterator](),i=r.next().value;n[0]=[i[0],i[1].value],kle(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=r.next().value,d=n[o]=[p[0],p[1].value],kle(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),n[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)n[a]=n[--a];n[c]=d}}if(!r.next().done)throw new TypeError("Unreachable");return n}else{let r=0;for(let{0:i,1:{value:o}}of this[el])n[r++]=[i,o],kle(o!==null);return n.sort(F9e)}}},Hm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){to.util.markAsUncloneable(this),e!==$2t&&(this.#t=new ZW,this.#e="none",e!==void 0&&(e=to.converters.HeadersInit(e,"Headers contructor","init"),L9e(this,e)))}append(e,n){to.brandCheck(this,t),to.argumentLengthCheck(arguments,2,"Headers.append");let r="Headers.append";return e=to.converters.ByteString(e,r,"name"),n=to.converters.ByteString(n,r,"value"),Ble(this,e,n)}delete(e){if(to.brandCheck(this,t),to.argumentLengthCheck(arguments,1,"Headers.delete"),e=to.converters.ByteString(e,"Headers.delete","name"),!vP(e))throw to.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){to.brandCheck(this,t),to.argumentLengthCheck(arguments,1,"Headers.get");let n="Headers.get";if(e=to.converters.ByteString(e,n,"name"),!vP(e))throw to.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){to.brandCheck(this,t),to.argumentLengthCheck(arguments,1,"Headers.has");let n="Headers.has";if(e=to.converters.ByteString(e,n,"name"),!vP(e))throw to.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,n){to.brandCheck(this,t),to.argumentLengthCheck(arguments,2,"Headers.set");let r="Headers.set";if(e=to.converters.ByteString(e,r,"name"),n=to.converters.ByteString(n,r,"value"),n=N9e(n),vP(e)){if(!P9e(n))throw to.errors.invalidArgument({prefix:r,value:n,type:"header value"})}else throw to.errors.invalidArgument({prefix:r,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,n,!1)}getSetCookie(){to.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[D0](){if(this.#t[D0])return this.#t[D0];let e=[],n=this.#t.toSortedArray(),r=this.#t.cookies;if(r===null||r.length===1)return this.#t[D0]=n;for(let i=0;i<n.length;++i){let{0:o,1:a}=n[i];if(o==="set-cookie")for(let l=0;l<r.length;++l)e.push([o,r[l]]);else e.push([o,a])}return this.#t[D0]=e}[XW.inspect.custom](e,n){return n.depth??=e,`Headers ${XW.formatWithOptions(n,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,n){e.#e=n}static getHeadersList(e){return e.#t}static setHeadersList(e,n){e.#t=n}},{getHeadersGuard:M9e,setHeadersGuard:Y2t,getHeadersList:Dle,setHeadersList:K2t}=Hm;Reflect.deleteProperty(Hm,"getHeadersGuard");Reflect.deleteProperty(Hm,"setHeadersGuard");Reflect.deleteProperty(Hm,"getHeadersList");Reflect.deleteProperty(Hm,"setHeadersList");z2t("Headers",Hm,D0,0,1);Object.defineProperties(Hm.prototype,{append:P4,delete:P4,get:P4,has:P4,set:P4,getSetCookie:P4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[XW.inspect.custom]:{enumerable:!1}});to.converters.HeadersInit=function(t,e,n){if(to.util.Type(t)==="Object"){let r=Reflect.get(t,Symbol.iterator);if(!XW.types.isProxy(t)&&r===Hm.prototype.entries)try{return Dle(t).entriesList}catch{}return typeof r=="function"?to.converters["sequence<sequence<ByteString>>"](t,e,n,r.bind(t)):to.converters["record<ByteString, ByteString>"](t,e,n)}throw to.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};Q9e.exports={fill:L9e,compareHeaderName:F9e,Headers:Hm,HeadersList:ZW,getHeadersGuard:M9e,setHeadersGuard:Y2t,setHeadersList:K2t,getHeadersList:Dle}});var EP=W((OXn,z9e)=>{"use strict";f();var{Headers:H9e,HeadersList:O9e,fill:J2t,getHeadersGuard:X2t,setHeadersGuard:j9e,setHeadersList:V9e}=W2(),{extractBody:U9e,cloneBody:Z2t,mixinBody:eTt,hasFinalizationRegistry:tTt,streamRegistry:nTt,bodyUnusable:rTt}=h4(),Ple=yi(),q9e=require("node:util"),{kEnumerableProperty:P0}=Ple,{isValidReasonPhrase:iTt,isCancelled:oTt,isAborted:sTt,isBlobLike:aTt,serializeJavascriptValueToJSONString:lTt,isErrorLike:cTt,isomorphicEncode:uTt,environmentSettingsObject:dTt}=R0(),{redirectStatusSet:fTt,nullBodyStatus:pTt}=GD(),{kState:da,kHeaders:ly}=_v(),{webidl:ii}=Cc(),{FormData:mTt}=YD(),{URLSerializer:W9e}=Id(),{kConstruct:tG}=qs(),Nle=require("node:assert"),{types:hTt}=require("node:util"),gTt=new TextEncoder("utf-8"),G2=class t{static{s(this,"Response")}static error(){return bP(nG(),"immutable")}static json(e,n={}){ii.argumentLengthCheck(arguments,1,"Response.json"),n!==null&&(n=ii.converters.ResponseInit(n));let r=gTt.encode(lTt(e)),i=U9e(r),o=bP(N4({}),"response");return G9e(o,n,{body:i[0],type:"application/json"}),o}static redirect(e,n=302){ii.argumentLengthCheck(arguments,1,"Response.redirect"),e=ii.converters.USVString(e),n=ii.converters["unsigned short"](n);let r;try{r=new URL(e,dTt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!fTt.has(n))throw new RangeError(`Invalid status code ${n}`);let i=bP(N4({}),"immutable");i[da].status=n;let o=uTt(W9e(r));return i[da].headersList.append("location",o,!0),i}constructor(e=null,n={}){if(ii.util.markAsUncloneable(this),e===tG)return;e!==null&&(e=ii.converters.BodyInit(e)),n=ii.converters.ResponseInit(n),this[da]=N4({}),this[ly]=new H9e(tG),j9e(this[ly],"response"),V9e(this[ly],this[da].headersList);let r=null;if(e!=null){let[i,o]=U9e(e);r={body:i,type:o}}G9e(this,n,r)}get type(){return ii.brandCheck(this,t),this[da].type}get url(){ii.brandCheck(this,t);let e=this[da].urlList,n=e[e.length-1]??null;return n===null?"":W9e(n,!0)}get redirected(){return ii.brandCheck(this,t),this[da].urlList.length>1}get status(){return ii.brandCheck(this,t),this[da].status}get ok(){return ii.brandCheck(this,t),this[da].status>=200&&this[da].status<=299}get statusText(){return ii.brandCheck(this,t),this[da].statusText}get headers(){return ii.brandCheck(this,t),this[ly]}get body(){return ii.brandCheck(this,t),this[da].body?this[da].body.stream:null}get bodyUsed(){return ii.brandCheck(this,t),!!this[da].body&&Ple.isDisturbed(this[da].body.stream)}clone(){if(ii.brandCheck(this,t),rTt(this))throw ii.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=Lle(this[da]);return bP(e,X2t(this[ly]))}[q9e.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${q9e.formatWithOptions(n,r)}`}};eTt(G2);Object.defineProperties(G2.prototype,{type:P0,url:P0,status:P0,ok:P0,redirected:P0,statusText:P0,headers:P0,clone:P0,body:P0,bodyUsed:P0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(G2,{json:P0,redirect:P0,error:P0});function Lle(t){if(t.internalResponse)return $9e(Lle(t.internalResponse),t.type);let e=N4({...t,body:null});return t.body!=null&&(e.body=Z2t(e,t.body)),e}s(Lle,"cloneResponse");function N4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new O9e(t?.headersList):new O9e,urlList:t?.urlList?[...t.urlList]:[]}}s(N4,"makeResponse");function nG(t){let e=cTt(t);return N4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(nG,"makeNetworkError");function ATt(t){return t.type==="error"&&t.status===0}s(ATt,"isNetworkError");function eG(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(n,r){return r in e?e[r]:n[r]},set(n,r,i){return Nle(!(r in e)),n[r]=i,!0}})}s(eG,"makeFilteredResponse");function $9e(t,e){if(e==="basic")return eG(t,{type:"basic",headersList:t.headersList});if(e==="cors")return eG(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return eG(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return eG(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});Nle(!1)}s($9e,"filterResponse");function yTt(t,e=null){return Nle(oTt(t)),sTt(t)?nG(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):nG(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(yTt,"makeAppropriateNetworkError");function G9e(t,e,n){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!iTt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[da].status=e.status),"statusText"in e&&e.statusText!=null&&(t[da].statusText=e.statusText),"headers"in e&&e.headers!=null&&J2t(t[ly],e.headers),n){if(pTt.includes(t.status))throw ii.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[da].body=n.body,n.type!=null&&!t[da].headersList.contains("content-type",!0)&&t[da].headersList.append("content-type",n.type,!0)}}s(G9e,"initializeResponse");function bP(t,e){let n=new G2(tG);return n[da]=t,n[ly]=new H9e(tG),V9e(n[ly],t.headersList),j9e(n[ly],e),tTt&&t.body?.stream&&nTt.register(n,new WeakRef(t.body.stream)),n}s(bP,"fromInnerResponse");ii.converters.ReadableStream=ii.interfaceConverter(ReadableStream);ii.converters.FormData=ii.interfaceConverter(mTt);ii.converters.URLSearchParams=ii.interfaceConverter(URLSearchParams);ii.converters.XMLHttpRequestBodyInit=function(t,e,n){return typeof t=="string"?ii.converters.USVString(t,e,n):aTt(t)?ii.converters.Blob(t,e,n,{strict:!1}):ArrayBuffer.isView(t)||hTt.isArrayBuffer(t)?ii.converters.BufferSource(t,e,n):Ple.isFormDataLike(t)?ii.converters.FormData(t,e,n,{strict:!1}):t instanceof URLSearchParams?ii.converters.URLSearchParams(t,e,n):ii.converters.DOMString(t,e,n)};ii.converters.BodyInit=function(t,e,n){return t instanceof ReadableStream?ii.converters.ReadableStream(t,e,n):t?.[Symbol.asyncIterator]?t:ii.converters.XMLHttpRequestBodyInit(t,e,n)};ii.converters.ResponseInit=ii.dictionaryConverter([{key:"status",converter:ii.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:ii.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:ii.converters.HeadersInit}]);z9e.exports={isNetworkError:ATt,makeNetworkError:nG,makeResponse:N4,makeAppropriateNetworkError:yTt,filterResponse:$9e,Response:G2,cloneResponse:Lle,fromInnerResponse:bP}});var X9e=W((WXn,J9e)=>{"use strict";f();var{kConnected:Y9e,kSize:K9e}=qs(),Fle=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[Y9e]===0&&this.value[K9e]===0?void 0:this.value}},Mle=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,n){e.on&&e.on("disconnect",()=>{e[Y9e]===0&&e[K9e]===0&&this.finalizer(n)})}unregister(e){}};J9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:Fle,FinalizationRegistry:Mle}):{WeakRef,FinalizationRegistry}}});var L4=W((jXn,p6e)=>{"use strict";f();var{extractBody:CTt,mixinBody:xTt,cloneBody:vTt,bodyUnusable:Z9e}=h4(),{Headers:l6e,fill:bTt,HeadersList:sG,setHeadersGuard:Ole,getHeadersGuard:ETt,setHeadersList:c6e,getHeadersList:e6e}=W2(),{FinalizationRegistry:ITt}=X9e()(),iG=yi(),t6e=require("node:util"),{isValidHTTPToken:TTt,sameOrigin:n6e,environmentSettingsObject:rG}=R0(),{forbiddenMethodsSet:wTt,corsSafeListedMethodsSet:_Tt,referrerPolicy:STt,requestRedirect:RTt,requestMode:kTt,requestCredentials:BTt,requestCache:DTt,requestDuplex:PTt}=GD(),{kEnumerableProperty:tl,normalizedMethodRecordsBase:NTt,normalizedMethodRecords:LTt}=iG,{kHeaders:N0,kSignal:oG,kState:vs,kDispatcher:Qle}=_v(),{webidl:vr}=Cc(),{URLSerializer:FTt}=Id(),{kConstruct:aG}=qs(),MTt=require("node:assert"),{getMaxListeners:r6e,setMaxListeners:i6e,getEventListeners:QTt,defaultMaxListeners:o6e}=require("node:events"),OTt=Symbol("abortController"),u6e=new ITt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),lG=new WeakMap;function s6e(t){return e;function e(){let n=t.deref();if(n!==void 0){u6e.unregister(e),this.removeEventListener("abort",e),n.abort(this.reason);let r=lG.get(n.signal);if(r!==void 0){if(r.size!==0){for(let i of r){let o=i.deref();o!==void 0&&o.abort(this.reason)}r.clear()}lG.delete(n.signal)}}}}s(s6e,"buildAbort");var a6e=!1,Qv=class t{static{s(this,"Request")}constructor(e,n={}){if(vr.util.markAsUncloneable(this),e===aG)return;let r="Request constructor";vr.argumentLengthCheck(arguments,1,r),e=vr.converters.RequestInfo(e,r,"input"),n=vr.converters.RequestInit(n,r,"init");let i=null,o=null,a=rG.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[Qle]=n.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=cG({urlList:[b]}),o="cors"}else this[Qle]=n.dispatcher||e[Qle],MTt(e instanceof t),i=e[vs],l=e[oG];let c=rG.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&n6e(i.window,c)&&(u=i.window),n.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in n&&(u="no-window"),i=cG({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:rG.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(n).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),n.referrer!==void 0){let b=n.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!n6e(E,rG.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}n.referrerPolicy!==void 0&&(i.referrerPolicy=n.referrerPolicy);let p;if(n.mode!==void 0?p=n.mode:p=o,p==="navigate")throw vr.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),n.credentials!==void 0&&(i.credentials=n.credentials),n.cache!==void 0&&(i.cache=n.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(n.redirect!==void 0&&(i.redirect=n.redirect),n.integrity!=null&&(i.integrity=String(n.integrity)),n.keepalive!==void 0&&(i.keepalive=!!n.keepalive),n.method!==void 0){let b=n.method,E=LTt[b];if(E!==void 0)i.method=E;else{if(!TTt(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(wTt.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=NTt[_]??b,i.method=b}!a6e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),a6e=!0)}n.signal!==void 0&&(l=n.signal),this[vs]=i;let m=new AbortController;if(this[oG]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[OTt]=m;let b=new WeakRef(m),E=s6e(b);try{(typeof r6e=="function"&&r6e(l)===o6e||QTt(l,"abort").length>=o6e)&&i6e(1500,l)}catch{}iG.addAbortListener(l,E),u6e.register(m,{signal:l,abort:E},E)}}if(this[N0]=new l6e(aG),c6e(this[N0],i.headersList),Ole(this[N0],"request"),p==="no-cors"){if(!_Tt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);Ole(this[N0],"request-no-cors")}if(d){let b=e6e(this[N0]),E=n.headers!==void 0?n.headers:new sG(b);if(b.clear(),E instanceof sG){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else bTt(this[N0],E)}let h=e instanceof t?e[vs].body:null;if((n.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(n.body!=null){let[b,E]=CTt(n.body,i.keepalive);g=b,E&&!e6e(this[N0]).contains("content-type",!0)&&this[N0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&n.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(Z9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[vs].body=v}get method(){return vr.brandCheck(this,t),this[vs].method}get url(){return vr.brandCheck(this,t),FTt(this[vs].url)}get headers(){return vr.brandCheck(this,t),this[N0]}get destination(){return vr.brandCheck(this,t),this[vs].destination}get referrer(){return vr.brandCheck(this,t),this[vs].referrer==="no-referrer"?"":this[vs].referrer==="client"?"about:client":this[vs].referrer.toString()}get referrerPolicy(){return vr.brandCheck(this,t),this[vs].referrerPolicy}get mode(){return vr.brandCheck(this,t),this[vs].mode}get credentials(){return this[vs].credentials}get cache(){return vr.brandCheck(this,t),this[vs].cache}get redirect(){return vr.brandCheck(this,t),this[vs].redirect}get integrity(){return vr.brandCheck(this,t),this[vs].integrity}get keepalive(){return vr.brandCheck(this,t),this[vs].keepalive}get isReloadNavigation(){return vr.brandCheck(this,t),this[vs].reloadNavigation}get isHistoryNavigation(){return vr.brandCheck(this,t),this[vs].historyNavigation}get signal(){return vr.brandCheck(this,t),this[oG]}get body(){return vr.brandCheck(this,t),this[vs].body?this[vs].body.stream:null}get bodyUsed(){return vr.brandCheck(this,t),!!this[vs].body&&iG.isDisturbed(this[vs].body.stream)}get duplex(){return vr.brandCheck(this,t),"half"}clone(){if(vr.brandCheck(this,t),Z9e(this))throw new TypeError("unusable");let e=d6e(this[vs]),n=new AbortController;if(this.signal.aborted)n.abort(this.signal.reason);else{let r=lG.get(this.signal);r===void 0&&(r=new Set,lG.set(this.signal,r));let i=new WeakRef(n);r.add(i),iG.addAbortListener(n.signal,s6e(i))}return f6e(e,n.signal,ETt(this[N0]))}[t6e.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${t6e.formatWithOptions(n,r)}`}};xTt(Qv);function cG(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new sG(t.headersList):new sG}}s(cG,"makeRequest");function d6e(t){let e=cG({...t,body:null});return t.body!=null&&(e.body=vTt(e,t.body)),e}s(d6e,"cloneRequest");function f6e(t,e,n){let r=new Qv(aG);return r[vs]=t,r[oG]=e,r[N0]=new l6e(aG),c6e(r[N0],t.headersList),Ole(r[N0],n),r}s(f6e,"fromInnerRequest");Object.defineProperties(Qv.prototype,{method:tl,url:tl,headers:tl,redirect:tl,clone:tl,signal:tl,duplex:tl,destination:tl,body:tl,bodyUsed:tl,isHistoryNavigation:tl,isReloadNavigation:tl,keepalive:tl,integrity:tl,cache:tl,credentials:tl,attribute:tl,referrerPolicy:tl,referrer:tl,mode:tl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});vr.converters.Request=vr.interfaceConverter(Qv);vr.converters.RequestInfo=function(t,e,n){return typeof t=="string"?vr.converters.USVString(t,e,n):t instanceof Qv?vr.converters.Request(t,e,n):vr.converters.USVString(t,e,n)};vr.converters.AbortSignal=vr.interfaceConverter(AbortSignal);vr.converters.RequestInit=vr.dictionaryConverter([{key:"method",converter:vr.converters.ByteString},{key:"headers",converter:vr.converters.HeadersInit},{key:"body",converter:vr.nullableConverter(vr.converters.BodyInit)},{key:"referrer",converter:vr.converters.USVString},{key:"referrerPolicy",converter:vr.converters.DOMString,allowedValues:STt},{key:"mode",converter:vr.converters.DOMString,allowedValues:kTt},{key:"credentials",converter:vr.converters.DOMString,allowedValues:BTt},{key:"cache",converter:vr.converters.DOMString,allowedValues:DTt},{key:"redirect",converter:vr.converters.DOMString,allowedValues:RTt},{key:"integrity",converter:vr.converters.DOMString},{key:"keepalive",converter:vr.converters.boolean},{key:"signal",converter:vr.nullableConverter(t=>vr.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:vr.converters.any},{key:"duplex",converter:vr.converters.DOMString,allowedValues:PTt},{key:"dispatcher",converter:vr.converters.any}]);p6e.exports={Request:Qv,makeRequest:cG,fromInnerRequest:f6e,cloneRequest:d6e}});var TP=W((zXn,S6e)=>{"use strict";f();var{makeNetworkError:Po,makeAppropriateNetworkError:uG,filterResponse:Ule,makeResponse:dG,fromInnerResponse:UTt}=EP(),{HeadersList:m6e}=W2(),{Request:qTt,cloneRequest:WTt}=L4(),Ov=require("node:zlib"),{bytesMatch:GTt,makePolicyContainer:HTt,clonePolicyContainer:jTt,requestBadPort:VTt,TAOCheck:$Tt,appendRequestOriginHeader:zTt,responseLocationURL:YTt,requestCurrentURL:$g,setRequestReferrerPolicyOnRedirect:KTt,tryUpgradeRequestToAPotentiallyTrustworthyURL:JTt,createOpaqueTimingInfo:jle,appendFetchMetadata:XTt,corsCheck:ZTt,crossOriginResourcePolicyCheck:ewt,determineRequestsReferrer:twt,coarsenedSharedCurrentTime:IP,createDeferredPromise:nwt,isBlobLike:rwt,sameOrigin:Hle,isCancelled:H2,isAborted:h6e,isErrorLike:iwt,fullyReadBody:owt,readableStreamClose:swt,isomorphicEncode:fG,urlIsLocal:awt,urlIsHttpHttpsScheme:Vle,urlHasHttpsScheme:lwt,clampAndCoarsenConnectionTimingInfo:cwt,simpleRangeHeaderValue:uwt,buildContentRange:dwt,createInflate:fwt,extractMimeType:pwt}=R0(),{kState:C6e,kDispatcher:mwt}=_v(),j2=require("node:assert"),{safelyExtractBody:$le,extractBody:g6e}=h4(),{redirectStatusSet:x6e,nullBodyStatus:v6e,safeMethodsSet:hwt,requestBodyHeader:gwt,subresourceSet:Awt}=GD(),ywt=require("node:events"),{Readable:Cwt,pipeline:xwt,finished:vwt}=require("node:stream"),{addAbortListener:bwt,isErrored:Ewt,isReadable:pG,bufferToLowerCasedHeaderName:A6e}=yi(),{dataURLProcessor:Iwt,serializeAMimeType:Twt,minimizeSupportedMimeType:wwt}=Id(),{getGlobalDispatcher:_wt}=KW(),{webidl:Swt}=Cc(),{STATUS_CODES:Rwt}=require("node:http"),kwt=["GET","HEAD"],Bwt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",qle,mG=class extends ywt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Dwt(t){b6e(t,"fetch")}s(Dwt,"handleFetchDone");function Pwt(t,e=void 0){Swt.argumentLengthCheck(arguments,1,"globalThis.fetch");let n=nwt(),r;try{r=new qTt(t,e)}catch(d){return n.reject(d),n.promise}let i=r[C6e];if(r.signal.aborted)return Wle(n,i,null,r.signal.reason),n.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return bwt(r.signal,()=>{l=!0,j2(c!=null),c.abort(r.signal.reason);let d=a?.deref();Wle(n,i,d,r.signal.reason)}),c=I6e({request:i,processResponseEndOfBody:Dwt,processResponse:s(d=>{if(!l){if(d.aborted){Wle(n,i,a,c.serializedAbortReason);return}if(d.type==="error"){n.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(UTt(d,"immutable")),n.resolve(a.deref()),n=null}},"processResponse"),dispatcher:r[mwt]}),n.promise}s(Pwt,"fetch");function b6e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let n=t.urlList[0],r=t.timingInfo,i=t.cacheState;Vle(n)&&r!==null&&(t.timingAllowPassed||(r=jle({startTime:r.startTime}),i=""),r.endTime=IP(),t.timingInfo=r,E6e(r,n.href,e,globalThis,i))}s(b6e,"finalizeAndReportTiming");var E6e=performance.markResourceTiming;function Wle(t,e,n,r){if(t&&t.reject(r),e.body!=null&&pG(e.body?.stream)&&e.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),n==null)return;let i=n[C6e];i.body!=null&&pG(i.body?.stream)&&i.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(Wle,"abortFetch");function I6e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=_wt()}){j2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=IP(u),p=jle({startTime:d}),m={controller:new mG(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return j2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=jTt(t.client.policyContainer):t.policyContainer=HTt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,Awt.has(t.destination),T6e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(I6e,"fetching");async function T6e(t,e=!1){let n=t.request,r=null;if(n.localURLsOnly&&!awt($g(n))&&(r=Po("local URLs only")),JTt(n),VTt(n)==="blocked"&&(r=Po("bad port")),n.referrerPolicy===""&&(n.referrerPolicy=n.policyContainer.referrerPolicy),n.referrer!=="no-referrer"&&(n.referrer=twt(n)),r===null&&(r=await(async()=>{let o=$g(n);return Hle(o,n.url)&&n.responseTainting==="basic"||o.protocol==="data:"||n.mode==="navigate"||n.mode==="websocket"?(n.responseTainting="basic",await y6e(t)):n.mode==="same-origin"?Po('request mode cannot be "same-origin"'):n.mode==="no-cors"?n.redirect!=="follow"?Po('redirect mode cannot be "follow" for "no-cors" request'):(n.responseTainting="opaque",await y6e(t)):Vle($g(n))?(n.responseTainting="cors",await w6e(t)):Po("URL scheme must be a HTTP(S) scheme")})()),e)return r;r.status!==0&&!r.internalResponse&&(n.responseTainting,n.responseTainting==="basic"?r=Ule(r,"basic"):n.responseTainting==="cors"?r=Ule(r,"cors"):n.responseTainting==="opaque"?r=Ule(r,"opaque"):j2(!1));let i=r.status===0?r:r.internalResponse;if(i.urlList.length===0&&i.urlList.push(...n.urlList),n.timingAllowFailed||(r.timingAllowPassed=!0),r.type==="opaque"&&i.status===206&&i.rangeRequested&&!n.headers.contains("range",!0)&&(r=i=Po()),r.status!==0&&(n.method==="HEAD"||n.method==="CONNECT"||v6e.includes(i.status))&&(i.body=null,t.controller.dump=!0),n.integrity){let o=s(l=>Gle(t,Po(l)),"processBodyError");if(n.responseTainting==="opaque"||r.body==null){o(r.error);return}let a=s(l=>{if(!GTt(l,n.integrity)){o("integrity mismatch");return}r.body=$le(l)[0],Gle(t,r)},"processBody");await owt(r.body,a,o)}else Gle(t,r)}s(T6e,"mainFetch");function y6e(t){if(H2(t)&&t.request.redirectCount===0)return Promise.resolve(uG(t));let{request:e}=t,{protocol:n}=$g(e);switch(n){case"about:":return Promise.resolve(Po("about scheme is not supported"));case"blob:":{qle||(qle=require("node:buffer").resolveObjectURL);let r=$g(e);if(r.search.length!==0)return Promise.resolve(Po("NetworkError when attempting to fetch resource."));let i=qle(r.toString());if(e.method!=="GET"||!rwt(i))return Promise.resolve(Po("invalid method"));let o=dG(),a=i.size,l=fG(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=uwt(u,!0);if(d==="failure")return Promise.resolve(Po("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Po("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=g6e(h);o.body=g[0];let y=fG(`${h.size}`),v=dwt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=g6e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let r=$g(e),i=Iwt(r);if(i==="failure")return Promise.resolve(Po("failed to fetch the data URL"));let o=Twt(i.mimeType);return Promise.resolve(dG({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:$le(i.body)[0]}))}case"file:":return Promise.resolve(Po("not implemented... yet..."));case"http:":case"https:":return w6e(t).catch(r=>Po(r));default:return Promise.resolve(Po("unknown scheme"))}}s(y6e,"schemeFetch");function Nwt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Nwt,"finalizeResponse");function Gle(t,e){let n=t.timingInfo,r=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=n),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;n.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(n=jle(n),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=pwt(e.headersList);d!=="failure"&&(c.contentType=wwt(d))}t.request.initiatorType!=null&&E6e(n,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?r():vwt(i.body.stream,()=>{r()})}s(Gle,"fetchFinale");async function w6e(t){let e=t.request,n=null,r=null,i=t.timingInfo;if(e.serviceWorkers,n===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),r=n=await _6e(t),e.responseTainting==="cors"&&ZTt(e,n)==="failure")return Po("cors failure");$Tt(e,n)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||n.type==="opaque")&&ewt(e.origin,e.client,e.destination,r)==="blocked"?Po("blocked"):(x6e.has(r.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?n=Po("unexpected redirect"):e.redirect==="manual"?n=r:e.redirect==="follow"?n=await Lwt(t,n):j2(!1)),n.timingInfo=i,n)}s(w6e,"httpFetch");function Lwt(t,e){let n=t.request,r=e.internalResponse?e.internalResponse:e,i;try{if(i=YTt(r,$g(n).hash),i==null)return e}catch(a){return Promise.resolve(Po(a))}if(!Vle(i))return Promise.resolve(Po("URL scheme must be a HTTP(S) scheme"));if(n.redirectCount===20)return Promise.resolve(Po("redirect count exceeded"));if(n.redirectCount+=1,n.mode==="cors"&&(i.username||i.password)&&!Hle(n,i))return Promise.resolve(Po('cross origin not allowed for request mode "cors"'));if(n.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Po('URL cannot contain credentials for request mode "cors"'));if(r.status!==303&&n.body!=null&&n.body.source==null)return Promise.resolve(Po());if([301,302].includes(r.status)&&n.method==="POST"||r.status===303&&!kwt.includes(n.method)){n.method="GET",n.body=null;for(let a of gwt)n.headersList.delete(a)}Hle($g(n),i)||(n.headersList.delete("authorization",!0),n.headersList.delete("proxy-authorization",!0),n.headersList.delete("cookie",!0),n.headersList.delete("host",!0)),n.body!=null&&(j2(n.body.source!=null),n.body=$le(n.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=IP(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),n.urlList.push(i),KTt(n,r),T6e(t,!0)}s(Lwt,"httpRedirectFetch");async function _6e(t,e=!1,n=!1){let r=t.request,i=null,o=null,a=null,l=null,c=!1;r.window==="no-window"&&r.redirect==="error"?(i=t,o=r):(o=WTt(r),i={...t},i.request=o);let u=r.credentials==="include"||r.credentials==="same-origin"&&r.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=fG(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",fG(o.referrer.href),!0),zTt(o),XTt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Bwt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(lwt($g(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Po("only if cached");let m=await Fwt(i,u,n);!hwt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return r.window==="no-window"?Po():H2(t)?uG(t):Po("proxy authentication required");if(a.status===421&&!n&&(r.body==null||r.body.source!=null)){if(H2(t))return uG(t);t.controller.connection.destroy(),a=await _6e(t,e,!0)}return a}s(_6e,"httpNetworkOrCacheFetch");async function Fwt(t,e=!1,n=!1){j2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let r=t.request,i=null,o=t.timingInfo;null==null&&(r.cache="no-store");let l=n?"yes":"no";r.mode;let c=null;if(r.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(r.body!=null){let g=s(async function*(b){H2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{H2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{H2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of r.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=dG({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=dG({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),uG(t,g)):Po(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{H2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(h6e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){swt(t.controller.controller),Nwt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),Ewt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){h6e(t)?(i.aborted=!0,pG(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):pG(p)&&t.controller.controller.error(new TypeError("terminated",{cause:iwt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=$g(r),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:r.method,body:v.isMockActive?r.body&&(r.body.source||r.body.stream):g,headers:r.headersList.entries,maxRedirections:0,upgrade:r.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=cwt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=IP(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=IP(t.crossOriginIsolatedCapability)},onHeaders(_,k,B,N){if(_<200)return;let U=[],re="",me=new m6e;for(let ie=0;ie<k.length;ie+=2)me.append(A6e(k[ie]),k[ie+1].toString("latin1"),!0);let ae=me.get("content-encoding",!0);ae&&(U=ae.toLowerCase().split(",").map(ie=>ie.trim())),re=me.get("location",!0),this.body=new Cwt({read:B});let H=[],G=re&&r.redirect==="follow"&&x6e.has(_);if(U.length!==0&&r.method!=="HEAD"&&r.method!=="CONNECT"&&!v6e.includes(_)&&!G)for(let ie=U.length-1;ie>=0;--ie){let $=U[ie];if($==="x-gzip"||$==="gzip")H.push(Ov.createGunzip({flush:Ov.constants.Z_SYNC_FLUSH,finishFlush:Ov.constants.Z_SYNC_FLUSH}));else if($==="deflate")H.push(fwt({flush:Ov.constants.Z_SYNC_FLUSH,finishFlush:Ov.constants.Z_SYNC_FLUSH}));else if($==="br")H.push(Ov.createBrotliDecompress({flush:Ov.constants.BROTLI_OPERATION_FLUSH,finishFlush:Ov.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let ue=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?xwt(this.body,...H,ie=>{ie&&this.onError(ie)}).on("error",ue):this.body.on("error",ue)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,B){if(_!==101)return;let N=new m6e;for(let U=0;U<k.length;U+=2)N.append(A6e(k[U]),k[U+1].toString("latin1"),!0);return b({status:_,statusText:Rwt[_],headersList:N,socket:B}),!0}}))}s(h,"dispatch")}s(Fwt,"httpNetworkFetch");S6e.exports={fetch:Pwt,Fetch:mG,fetching:I6e,finalizeAndReportTiming:b6e}});var zle=W((JXn,R6e)=>{"use strict";f();R6e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var B6e=W((ZXn,k6e)=>{"use strict";f();var{webidl:L0}=Cc(),hG=Symbol("ProgressEvent state"),Yle=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,n={}){e=L0.converters.DOMString(e,"ProgressEvent constructor","type"),n=L0.converters.ProgressEventInit(n??{}),super(e,n),this[hG]={lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}}get lengthComputable(){return L0.brandCheck(this,t),this[hG].lengthComputable}get loaded(){return L0.brandCheck(this,t),this[hG].loaded}get total(){return L0.brandCheck(this,t),this[hG].total}};L0.converters.ProgressEventInit=L0.dictionaryConverter([{key:"lengthComputable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);k6e.exports={ProgressEvent:Yle}});var P6e=W((nZn,D6e)=>{"use strict";f();function Mwt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Mwt,"getEncoding");D6e.exports={getEncoding:Mwt}});var q6e=W((oZn,U6e)=>{"use strict";f();var{kState:F4,kError:Kle,kResult:N6e,kAborted:wP,kLastProgressEventFired:Jle}=zle(),{ProgressEvent:Qwt}=B6e(),{getEncoding:L6e}=P6e(),{serializeAMimeType:Owt,parseMIMEType:F6e}=Id(),{types:Uwt}=require("node:util"),{StringDecoder:M6e}=require("string_decoder"),{btoa:Q6e}=require("node:buffer"),qwt={enumerable:!0,writable:!1,configurable:!1};function Wwt(t,e,n,r){if(t[F4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[F4]="loading",t[N6e]=null,t[Kle]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[wP];)try{let{done:u,value:d}=await l;if(c&&!t[wP]&&queueMicrotask(()=>{Uv("loadstart",t)}),c=!1,!u&&Uwt.isUint8Array(d))a.push(d),(t[Jle]===void 0||Date.now()-t[Jle]>=50)&&!t[wP]&&(t[Jle]=Date.now(),queueMicrotask(()=>{Uv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[F4]="done";try{let p=Gwt(a,n,e.type,r);if(t[wP])return;t[N6e]=p,Uv("load",t)}catch(p){t[Kle]=p,Uv("error",t)}t[F4]!=="loading"&&Uv("loadend",t)});break}}catch(u){if(t[wP])return;queueMicrotask(()=>{t[F4]="done",t[Kle]=u,Uv("error",t),t[F4]!=="loading"&&Uv("loadend",t)});break}})()}s(Wwt,"readOperation");function Uv(t,e){let n=new Qwt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}s(Uv,"fireAProgressEvent");function Gwt(t,e,n,r){switch(e){case"DataURL":{let i="data:",o=F6e(n||"application/octet-stream");o!=="failure"&&(i+=Owt(o)),i+=";base64,";let a=new M6e("latin1");for(let l of t)i+=Q6e(a.write(l));return i+=Q6e(a.end()),i}case"Text":{let i="failure";if(r&&(i=L6e(r)),i==="failure"&&n){let o=F6e(n);o!=="failure"&&(i=L6e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Hwt(t,i)}case"ArrayBuffer":return O6e(t).buffer;case"BinaryString":{let i="",o=new M6e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(Gwt,"packageData");function Hwt(t,e){let n=O6e(t),r=jwt(n),i=0;r!==null&&(e=r,i=r==="UTF-8"?3:2);let o=n.slice(i);return new TextDecoder(e).decode(o)}s(Hwt,"decode");function jwt(t){let[e,n,r]=t;return e===239&&n===187&&r===191?"UTF-8":e===254&&n===255?"UTF-16BE":e===255&&n===254?"UTF-16LE":null}s(jwt,"BOMSniffing");function O6e(t){let e=t.reduce((r,i)=>r+i.byteLength,0),n=0;return t.reduce((r,i)=>(r.set(i,n),n+=i.byteLength,r),new Uint8Array(e))}s(O6e,"combineByteSequences");U6e.exports={staticPropertyDescriptors:qwt,readOperation:Wwt,fireAProgressEvent:Uv}});var j6e=W((lZn,H6e)=>{"use strict";f();var{staticPropertyDescriptors:M4,readOperation:gG,fireAProgressEvent:W6e}=q6e(),{kState:V2,kError:G6e,kResult:AG,kEvents:Co,kAborted:Vwt}=zle(),{webidl:Qo}=Cc(),{kEnumerableProperty:_d}=yi(),jm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[V2]="empty",this[AG]=null,this[G6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Qo.converters.Blob(e,{strict:!1}),gG(this,e,"ArrayBuffer")}readAsBinaryString(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Qo.converters.Blob(e,{strict:!1}),gG(this,e,"BinaryString")}readAsText(e,n=void 0){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Qo.converters.Blob(e,{strict:!1}),n!==void 0&&(n=Qo.converters.DOMString(n,"FileReader.readAsText","encoding")),gG(this,e,"Text",n)}readAsDataURL(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Qo.converters.Blob(e,{strict:!1}),gG(this,e,"DataURL")}abort(){if(this[V2]==="empty"||this[V2]==="done"){this[AG]=null;return}this[V2]==="loading"&&(this[V2]="done",this[AG]=null),this[Vwt]=!0,W6e("abort",this),this[V2]!=="loading"&&W6e("loadend",this)}get readyState(){switch(Qo.brandCheck(this,t),this[V2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Qo.brandCheck(this,t),this[AG]}get error(){return Qo.brandCheck(this,t),this[G6e]}get onloadend(){return Qo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Qo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Qo.brandCheck(this,t),this[Co].error}set onerror(e){Qo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Qo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Qo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Qo.brandCheck(this,t),this[Co].progress}set onprogress(e){Qo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Qo.brandCheck(this,t),this[Co].load}set onload(e){Qo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Qo.brandCheck(this,t),this[Co].abort}set onabort(e){Qo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};jm.EMPTY=jm.prototype.EMPTY=0;jm.LOADING=jm.prototype.LOADING=1;jm.DONE=jm.prototype.DONE=2;Object.defineProperties(jm.prototype,{EMPTY:M4,LOADING:M4,DONE:M4,readAsArrayBuffer:_d,readAsBinaryString:_d,readAsText:_d,readAsDataURL:_d,abort:_d,readyState:_d,result:_d,error:_d,onloadstart:_d,onprogress:_d,onload:_d,onabort:_d,onerror:_d,onloadend:_d,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(jm,{EMPTY:M4,LOADING:M4,DONE:M4});H6e.exports={FileReader:jm}});var yG=W((dZn,V6e)=>{"use strict";f();V6e.exports={kConstruct:qs().kConstruct}});var Y6e=W((pZn,z6e)=>{"use strict";f();var $wt=require("node:assert"),{URLSerializer:$6e}=Id(),{isValidHeaderName:zwt}=R0();function Ywt(t,e,n=!1){let r=$6e(t,n),i=$6e(e,n);return r===i}s(Ywt,"urlEquals");function Kwt(t){$wt(t!==null);let e=[];for(let n of t.split(","))n=n.trim(),zwt(n)&&e.push(n);return e}s(Kwt,"getFieldValues");z6e.exports={urlEquals:Ywt,getFieldValues:Kwt}});var X6e=W((gZn,J6e)=>{"use strict";f();var{kConstruct:Jwt}=yG(),{urlEquals:Xwt,getFieldValues:Xle}=Y6e(),{kEnumerableProperty:$2,isDisturbed:Zwt}=yi(),{webidl:Xn}=Cc(),{Response:e_t,cloneResponse:t_t,fromInnerResponse:n_t}=EP(),{Request:cy,fromInnerRequest:r_t}=L4(),{kState:Vm}=_v(),{fetching:i_t}=TP(),{urlIsHttpHttpsScheme:CG,createDeferredPromise:Q4,readAllBytes:o_t}=R0(),Zle=require("node:assert"),xG=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==Jwt&&Xn.illegalConstructor(),Xn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,n={}){Xn.brandCheck(this,t);let r="Cache.match";Xn.argumentLengthCheck(arguments,1,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=this.#n(e,n,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,n={}){Xn.brandCheck(this,t);let r="Cache.matchAll";return e!==void 0&&(e=Xn.converters.RequestInfo(e,r,"request")),n=Xn.converters.CacheQueryOptions(n,r,"options"),this.#n(e,n)}async add(e){Xn.brandCheck(this,t);let n="Cache.add";Xn.argumentLengthCheck(arguments,1,n),e=Xn.converters.RequestInfo(e,n,"request");let r=[e];return await this.addAll(r)}async addAll(e){Xn.brandCheck(this,t);let n="Cache.addAll";Xn.argumentLengthCheck(arguments,1,n);let r=[],i=[];for(let m of e){if(m===void 0)throw Xn.errors.conversionFailed({prefix:n,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Xn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Vm];if(!CG(h.url)||h.method!=="GET")throw Xn.errors.exception({header:n,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new cy(m)[Vm];if(!CG(h.url))throw Xn.errors.exception({header:n,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=Q4();o.push(i_t({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Xn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=Xle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Xn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),r.push(g.promise)}let l=await Promise.all(r),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=Q4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,n){Xn.brandCheck(this,t);let r="Cache.put";Xn.argumentLengthCheck(arguments,2,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.Response(n,r,"response");let i=null;if(e instanceof cy?i=e[Vm]:i=new cy(e)[Vm],!CG(i.url)||i.method!=="GET")throw Xn.errors.exception({header:r,message:"Expected an http/s scheme when method is not GET"});let o=n[Vm];if(o.status===206)throw Xn.errors.exception({header:r,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=Xle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Xn.errors.exception({header:r,message:"Got * vary field value"})}if(o.body&&(Zwt(o.body.stream)||o.body.stream.locked))throw Xn.errors.exception({header:r,message:"Response body is locked or disturbed"});let a=t_t(o),l=Q4();if(o.body!=null){let g=o.body.stream.getReader();o_t(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=Q4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,n={}){Xn.brandCheck(this,t);let r="Cache.delete";Xn.argumentLengthCheck(arguments,1,r),e=Xn.converters.RequestInfo(e,r,"request"),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e instanceof cy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return!1}else Zle(typeof e=="string"),i=new cy(e)[Vm];let o=[],a={type:"delete",request:i,options:n};o.push(a);let l=Q4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,n={}){Xn.brandCheck(this,t);let r="Cache.keys";e!==void 0&&(e=Xn.converters.RequestInfo(e,r,"request")),n=Xn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[Vm]);let o=Q4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,n);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=r_t(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let n=this.#e,r=[...n],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=n.indexOf(c);Zle(u!==-1),n.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!CG(c.url))throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Xn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=n.indexOf(u);Zle(d!==-1),n.splice(d,1)}n.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=r,a}}#i(e,n,r){let i=[],o=r??this.#e;for(let a of o){let[l,c]=a;this.#r(e,l,c,n)&&i.push(a)}return i}#r(e,n,r=null,i){let o=new URL(e.url),a=new URL(n.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!Xwt(o,a,!0))return!1;if(r==null||i?.ignoreVary||!r.headersList.contains("vary"))return!0;let l=Xle(r.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=n.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#n(e,n,r=1/0){let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[Vm]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,n);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=n_t(l,"immutable");if(a.push(c.clone()),a.length>=r)break}return Object.freeze(a)}};Object.defineProperties(xG.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:$2,matchAll:$2,add:$2,addAll:$2,put:$2,delete:$2,keys:$2});var K6e=[{key:"ignoreSearch",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Xn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Xn.converters.CacheQueryOptions=Xn.dictionaryConverter(K6e);Xn.converters.MultiCacheQueryOptions=Xn.dictionaryConverter([...K6e,{key:"cacheName",converter:Xn.converters.DOMString}]);Xn.converters.Response=Xn.interfaceConverter(e_t);Xn.converters["sequence<RequestInfo>"]=Xn.sequenceConverter(Xn.converters.RequestInfo);J6e.exports={Cache:xG}});var eNe=W((CZn,Z6e)=>{"use strict";f();var{kConstruct:_P}=yG(),{Cache:vG}=X6e(),{webidl:tu}=Cc(),{kEnumerableProperty:SP}=yi(),bG=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==_P&&tu.illegalConstructor(),tu.util.markAsUncloneable(this)}async match(e,n={}){if(tu.brandCheck(this,t),tu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=tu.converters.RequestInfo(e),n=tu.converters.MultiCacheQueryOptions(n),n.cacheName!=null){if(this.#e.has(n.cacheName)){let r=this.#e.get(n.cacheName);return await new vG(_P,r).match(e,n)}}else for(let r of this.#e.values()){let o=await new vG(_P,r).match(e,n);if(o!==void 0)return o}}async has(e){tu.brandCheck(this,t);let n="CacheStorage.has";return tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)}async open(e){tu.brandCheck(this,t);let n="CacheStorage.open";if(tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new vG(_P,i)}let r=[];return this.#e.set(e,r),new vG(_P,r)}async delete(e){tu.brandCheck(this,t);let n="CacheStorage.delete";return tu.argumentLengthCheck(arguments,1,n),e=tu.converters.DOMString(e,n,"cacheName"),this.#e.delete(e)}async keys(){return tu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(bG.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:SP,has:SP,open:SP,delete:SP,keys:SP});Z6e.exports={CacheStorage:bG}});var nNe=W((bZn,tNe)=>{"use strict";f();tNe.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var ece=W((IZn,aNe)=>{"use strict";f();function s_t(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>=0&&n<=8||n>=10&&n<=31||n===127)return!0}return!1}s(s_t,"isCTLExcludingHtab");function rNe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===60||n===62||n===64||n===44||n===59||n===58||n===92||n===47||n===91||n===93||n===63||n===61||n===123||n===125)throw new Error("Invalid cookie name")}}s(rNe,"validateCookieName");function iNe(t){let e=t.length,n=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++n}for(;n<e;){let r=t.charCodeAt(n++);if(r<33||r>126||r===34||r===44||r===59||r===92)throw new Error("Invalid cookie value")}}s(iNe,"validateCookieValue");function oNe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<32||n===127||n===59)throw new Error("Invalid cookie path")}}s(oNe,"validateCookiePath");function a_t(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(a_t,"validateCookieDomain");var l_t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c_t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EG=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function sNe(t){return typeof t=="number"&&(t=new Date(t)),`${l_t[t.getUTCDay()]}, ${EG[t.getUTCDate()]} ${c_t[t.getUTCMonth()]} ${t.getUTCFullYear()} ${EG[t.getUTCHours()]}:${EG[t.getUTCMinutes()]}:${EG[t.getUTCSeconds()]} GMT`}s(sNe,"toIMFDate");function u_t(t){if(t<0)throw new Error("Invalid cookie max-age")}s(u_t,"validateCookieMaxAge");function d_t(t){if(t.name.length===0)return null;rNe(t.name),iNe(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(u_t(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(a_t(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(oNe(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${sNe(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let n of t.unparsed){if(!n.includes("="))throw new Error("Invalid unparsed");let[r,...i]=n.split("=");e.push(`${r.trim()}=${i.join("=")}`)}return e.join("; ")}s(d_t,"stringify");aNe.exports={isCTLExcludingHtab:s_t,validateCookieName:rNe,validateCookiePath:oNe,validateCookieValue:iNe,toIMFDate:sNe,stringify:d_t}});var cNe=W((_Zn,lNe)=>{"use strict";f();var{maxNameValuePairSize:f_t,maxAttributeValueSize:p_t}=nNe(),{isCTLExcludingHtab:m_t}=ece(),{collectASequenceOfCodePointsFast:IG}=Id(),h_t=require("node:assert");function g_t(t){if(m_t(t))return null;let e="",n="",r="",i="";if(t.includes(";")){let o={position:0};e=IG(";",t,o),n=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};r=IG("=",e,o),i=e.slice(o.position+1)}return r=r.trim(),i=i.trim(),r.length+i.length>f_t?null:{name:r,value:i,...O4(n)}}s(g_t,"parseSetCookie");function O4(t,e={}){if(t.length===0)return e;h_t(t[0]===";"),t=t.slice(1);let n="";t.includes(";")?(n=IG(";",t,{position:0}),t=t.slice(n.length)):(n=t,t="");let r="",i="";if(n.includes("=")){let a={position:0};r=IG("=",n,a),i=n.slice(a.position+1)}else r=n;if(r=r.trim(),i=i.trim(),i.length>p_t)return O4(t,e);let o=r.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return O4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${r}=${i}`);return O4(t,e)}s(O4,"parseUnparsedAttributes");lNe.exports={parseSetCookie:g_t,parseUnparsedAttributes:O4}});var fNe=W((kZn,dNe)=>{"use strict";f();var{parseSetCookie:A_t}=cNe(),{stringify:y_t}=ece(),{webidl:Qi}=Cc(),{Headers:TG}=W2();function C_t(t){Qi.argumentLengthCheck(arguments,1,"getCookies"),Qi.brandCheck(t,TG,{strict:!1});let e=t.get("cookie"),n={};if(!e)return n;for(let r of e.split(";")){let[i,...o]=r.split("=");n[i.trim()]=o.join("=")}return n}s(C_t,"getCookies");function x_t(t,e,n){Qi.brandCheck(t,TG,{strict:!1});let r="deleteCookie";Qi.argumentLengthCheck(arguments,2,r),e=Qi.converters.DOMString(e,r,"name"),n=Qi.converters.DeleteCookieAttributes(n),uNe(t,{name:e,value:"",expires:new Date(0),...n})}s(x_t,"deleteCookie");function v_t(t){Qi.argumentLengthCheck(arguments,1,"getSetCookies"),Qi.brandCheck(t,TG,{strict:!1});let e=t.getSetCookie();return e?e.map(n=>A_t(n)):[]}s(v_t,"getSetCookies");function uNe(t,e){Qi.argumentLengthCheck(arguments,2,"setCookie"),Qi.brandCheck(t,TG,{strict:!1}),e=Qi.converters.Cookie(e);let n=y_t(e);n&&t.append("Set-Cookie",n)}s(uNe,"setCookie");Qi.converters.DeleteCookieAttributes=Qi.dictionaryConverter([{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Qi.converters.Cookie=Qi.dictionaryConverter([{converter:Qi.converters.DOMString,key:"name"},{converter:Qi.converters.DOMString,key:"value"},{converter:Qi.nullableConverter(t=>typeof t=="number"?Qi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Qi.sequenceConverter(Qi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);dNe.exports={getCookies:C_t,deleteCookie:x_t,getSetCookies:v_t,setCookie:uNe}});var q4=W((PZn,mNe)=>{"use strict";f();var{webidl:Vn}=Cc(),{kEnumerableProperty:Sd}=yi(),{kConstruct:pNe}=qs(),{MessagePort:b_t}=require("node:worker_threads"),U4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,n={}){if(e===pNe){super(arguments[1],arguments[2]),Vn.util.markAsUncloneable(this);return}let r="MessageEvent constructor";Vn.argumentLengthCheck(arguments,1,r),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.MessageEventInit(n,r,"eventInitDict"),super(e,n),this.#e=n,Vn.util.markAsUncloneable(this)}get data(){return Vn.brandCheck(this,t),this.#e.data}get origin(){return Vn.brandCheck(this,t),this.#e.origin}get lastEventId(){return Vn.brandCheck(this,t),this.#e.lastEventId}get source(){return Vn.brandCheck(this,t),this.#e.source}get ports(){return Vn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,n=!1,r=!1,i=null,o="",a="",l=null,c=[]){return Vn.brandCheck(this,t),Vn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:n,cancelable:r,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,n){let r=new t(pNe,e,n);return r.#e=n,r.#e.data??=null,r.#e.origin??="",r.#e.lastEventId??="",r.#e.source??=null,r.#e.ports??=[],r}},{createFastMessageEvent:E_t}=U4;delete U4.createFastMessageEvent;var wG=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,n={}){let r="CloseEvent constructor";Vn.argumentLengthCheck(arguments,1,r),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.CloseEventInit(n),super(e,n),this.#e=n,Vn.util.markAsUncloneable(this)}get wasClean(){return Vn.brandCheck(this,t),this.#e.wasClean}get code(){return Vn.brandCheck(this,t),this.#e.code}get reason(){return Vn.brandCheck(this,t),this.#e.reason}},_G=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,n){let r="ErrorEvent constructor";Vn.argumentLengthCheck(arguments,1,r),super(e,n),Vn.util.markAsUncloneable(this),e=Vn.converters.DOMString(e,r,"type"),n=Vn.converters.ErrorEventInit(n??{}),this.#e=n}get message(){return Vn.brandCheck(this,t),this.#e.message}get filename(){return Vn.brandCheck(this,t),this.#e.filename}get lineno(){return Vn.brandCheck(this,t),this.#e.lineno}get colno(){return Vn.brandCheck(this,t),this.#e.colno}get error(){return Vn.brandCheck(this,t),this.#e.error}};Object.defineProperties(U4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Sd,origin:Sd,lastEventId:Sd,source:Sd,ports:Sd,initMessageEvent:Sd});Object.defineProperties(wG.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Sd,code:Sd,wasClean:Sd});Object.defineProperties(_G.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Sd,filename:Sd,lineno:Sd,colno:Sd,error:Sd});Vn.converters.MessagePort=Vn.interfaceConverter(b_t);Vn.converters["sequence<MessagePort>"]=Vn.sequenceConverter(Vn.converters.MessagePort);var tce=[{key:"bubbles",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Vn.converters.MessageEventInit=Vn.dictionaryConverter([...tce,{key:"data",converter:Vn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Vn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Vn.nullableConverter(Vn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Vn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Vn.converters.CloseEventInit=Vn.dictionaryConverter([...tce,{key:"wasClean",converter:Vn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Vn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Vn.converters.ErrorEventInit=Vn.dictionaryConverter([...tce,{key:"message",converter:Vn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Vn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Vn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Vn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Vn.converters.any}]);mNe.exports={MessageEvent:U4,CloseEvent:wG,ErrorEvent:_G,createFastMessageEvent:E_t}});var z2=W((FZn,hNe)=>{"use strict";f();var I_t="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",T_t={enumerable:!0,writable:!1,configurable:!1},w_t={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},__t={NOT_SENT:0,PROCESSING:1,SENT:2},S_t={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},R_t=2**16-1,k_t={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},B_t=Buffer.allocUnsafe(0),D_t={string:1,typedArray:2,arrayBuffer:3,blob:4};hNe.exports={uid:I_t,sentCloseFrameState:__t,staticPropertyDescriptors:T_t,states:w_t,opcodes:S_t,maxUnsigned16Bit:R_t,parserStates:k_t,emptyBuffer:B_t,sendHints:D_t}});var RP=W((QZn,gNe)=>{"use strict";f();gNe.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var DP=W((UZn,TNe)=>{"use strict";f();var{kReadyState:kP,kController:P_t,kResponse:N_t,kBinaryType:L_t,kWebSocketURL:F_t}=RP(),{states:BP,opcodes:qv}=z2(),{ErrorEvent:M_t,createFastMessageEvent:Q_t}=q4(),{isUtf8:O_t}=require("node:buffer"),{collectASequenceOfCodePointsFast:U_t,removeHTTPWhitespace:ANe}=Id();function q_t(t){return t[kP]===BP.CONNECTING}s(q_t,"isConnecting");function W_t(t){return t[kP]===BP.OPEN}s(W_t,"isEstablished");function G_t(t){return t[kP]===BP.CLOSING}s(G_t,"isClosing");function H_t(t){return t[kP]===BP.CLOSED}s(H_t,"isClosed");function nce(t,e,n=(i,o)=>new Event(i,o),r={}){let i=n(t,r);e.dispatchEvent(i)}s(nce,"fireEvent");function j_t(t,e,n){if(t[kP]!==BP.OPEN)return;let r;if(e===qv.TEXT)try{r=INe(n)}catch{CNe(t,"Received invalid UTF-8 in text frame.");return}else e===qv.BINARY&&(t[L_t]==="blob"?r=new Blob([n]):r=V_t(n));nce("message",t,Q_t,{origin:t[F_t].origin,data:r})}s(j_t,"websocketMessageReceived");function V_t(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(V_t,"toArrayBuffer");function $_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===44||n===47||n===58||n===59||n===60||n===61||n===62||n===63||n===64||n===91||n===92||n===93||n===123||n===125)return!1}return!0}s($_t,"isValidSubprotocol");function z_t(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(z_t,"isValidStatusCode");function CNe(t,e){let{[P_t]:n,[N_t]:r}=t;n.abort(),r?.socket&&!r.socket.destroyed&&r.socket.destroy(),e&&nce("error",t,(i,o)=>new M_t(i,o),{error:new Error(e),message:e})}s(CNe,"failWebsocketConnection");function xNe(t){return t===qv.CLOSE||t===qv.PING||t===qv.PONG}s(xNe,"isControlFrame");function vNe(t){return t===qv.CONTINUATION}s(vNe,"isContinuationFrame");function bNe(t){return t===qv.TEXT||t===qv.BINARY}s(bNe,"isTextBinaryFrame");function Y_t(t){return bNe(t)||vNe(t)||xNe(t)}s(Y_t,"isValidOpcode");function K_t(t){let e={position:0},n=new Map;for(;e.position<t.length;){let r=U_t(";",t,e),[i,o=""]=r.split("=");n.set(ANe(i,!0,!1),ANe(o,!1,!0)),e.position++}return n}s(K_t,"parseExtensions");function J_t(t){for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n<48||n>57)return!1}return!0}s(J_t,"isValidClientWindowBits");var ENe=typeof process.versions.icu=="string",yNe=ENe?new TextDecoder("utf-8",{fatal:!0}):void 0,INe=ENe?yNe.decode.bind(yNe):function(t){if(O_t(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};TNe.exports={isConnecting:q_t,isEstablished:W_t,isClosing:G_t,isClosed:H_t,fireEvent:nce,isValidSubprotocol:$_t,isValidStatusCode:z_t,failWebsocketConnection:CNe,websocketMessageReceived:j_t,utf8Decode:INe,isControlFrame:xNe,isContinuationFrame:vNe,isTextBinaryFrame:bNe,isValidOpcode:Y_t,parseExtensions:K_t,isValidClientWindowBits:J_t}});var RG=W((GZn,wNe)=>{"use strict";f();var{maxUnsigned16Bit:X_t}=z2(),SG=16386,rce,PP=null,W4=SG;try{rce=require("node:crypto")}catch{rce={randomFillSync:s(function(e,n,r){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function Z_t(){return W4===SG&&(W4=0,rce.randomFillSync(PP??=Buffer.allocUnsafe(SG),0,SG)),[PP[W4++],PP[W4++],PP[W4++],PP[W4++]]}s(Z_t,"generateMask");var ice=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let n=this.frameData,r=Z_t(),i=n?.byteLength??0,o=i,a=6;i>X_t?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=r[0],l[a-3]=r[1],l[a-2]=r[2],l[a-1]=r[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=n[c]^r[c&3];return l}};wNe.exports={WebsocketFrameSend:ice}});var sce=W((VZn,PNe)=>{"use strict";f();var{uid:eSt,states:NP,sentCloseFrameState:kG,emptyBuffer:tSt,opcodes:nSt}=z2(),{kReadyState:LP,kSentClose:BG,kByteParser:SNe,kReceivedClose:_Ne,kResponse:RNe}=RP(),{fireEvent:rSt,failWebsocketConnection:Wv,isClosing:iSt,isClosed:oSt,isEstablished:sSt,parseExtensions:aSt}=DP(),{channels:G4}=n4(),{CloseEvent:lSt}=q4(),{makeRequest:cSt}=L4(),{fetching:uSt}=TP(),{Headers:dSt,getHeadersList:fSt}=W2(),{getDecodeSplit:pSt}=R0(),{WebsocketFrameSend:mSt}=RG(),oce;try{oce=require("node:crypto")}catch{}function hSt(t,e,n,r,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=cSt({urlList:[a],client:n,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=fSt(new dSt(o.headers));l.headersList=p}let c=oce.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),uSt({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Wv(r,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Wv(r,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Wv(r,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Wv(r,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=oce.createHash("sha1").update(c+eSt).digest("base64");if(m!==h){Wv(r,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=aSt(g),!y.has("permessage-deflate"))){Wv(r,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!pSt("sec-websocket-protocol",l.headersList).includes(v)){Wv(r,"Protocol was not set in the opening handshake.");return}p.socket.on("data",kNe),p.socket.on("close",BNe),p.socket.on("error",DNe),G4.open.hasSubscribers&&G4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(hSt,"establishWebSocketConnection");function gSt(t,e,n,r){if(!(iSt(t)||oSt(t)))if(!sSt(t))Wv(t,"Connection was closed before it was established."),t[LP]=NP.CLOSING;else if(t[BG]===kG.NOT_SENT){t[BG]=kG.PROCESSING;let i=new mSt;e!==void 0&&n===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&n!==void 0?(i.frameData=Buffer.allocUnsafe(2+r),i.frameData.writeUInt16BE(e,0),i.frameData.write(n,2,"utf-8")):i.frameData=tSt,t[RNe].socket.write(i.createFrame(nSt.CLOSE)),t[BG]=kG.SENT,t[LP]=NP.CLOSING}else t[LP]=NP.CLOSING}s(gSt,"closeWebSocketConnection");function kNe(t){this.ws[SNe].write(t)||this.pause()}s(kNe,"onSocketData");function BNe(){let{ws:t}=this,{[RNe]:e}=t;e.socket.off("data",kNe),e.socket.off("close",BNe),e.socket.off("error",DNe);let n=t[BG]===kG.SENT&&t[_Ne],r=1005,i="",o=t[SNe].closingInfo;o&&!o.error?(r=o.code??1005,i=o.reason):t[_Ne]||(r=1006),t[LP]=NP.CLOSED,rSt("close",t,(a,l)=>new lSt(a,l),{wasClean:n,code:r,reason:i}),G4.close.hasSubscribers&&G4.close.publish({websocket:t,code:r,reason:i})}s(BNe,"onSocketClose");function DNe(t){let{ws:e}=this;e[LP]=NP.CLOSING,G4.socketError.hasSubscribers&&G4.socketError.publish(t),this.destroy()}s(DNe,"onSocketError");PNe.exports={establishWebSocketConnection:hSt,closeWebSocketConnection:gSt}});var LNe=W((YZn,NNe)=>{"use strict";f();var{createInflateRaw:ASt,Z_DEFAULT_WINDOWBITS:ySt}=require("node:zlib"),{isValidClientWindowBits:CSt}=DP(),xSt=Buffer.from([0,0,255,255]),DG=Symbol("kBuffer"),PG=Symbol("kLength"),ace=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,n,r){if(!this.#e){let i=ySt;if(this.#t.serverMaxWindowBits){if(!CSt(this.#t.serverMaxWindowBits)){r(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=ASt({windowBits:i}),this.#e[DG]=[],this.#e[PG]=0,this.#e.on("data",o=>{this.#e[DG].push(o),this.#e[PG]+=o.length}),this.#e.on("error",o=>{this.#e=null,r(o)})}this.#e.write(e),n&&this.#e.write(xSt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[DG],this.#e[PG]);this.#e[DG].length=0,this.#e[PG]=0,r(null,i)})}};NNe.exports={PerMessageDeflate:ace}});var VNe=W((XZn,jNe)=>{"use strict";f();var{Writable:vSt}=require("node:stream"),bSt=require("node:assert"),{parserStates:Rd,opcodes:H4,states:ESt,emptyBuffer:FNe,sentCloseFrameState:MNe}=z2(),{kReadyState:ISt,kSentClose:QNe,kResponse:ONe,kReceivedClose:UNe}=RP(),{channels:NG}=n4(),{isValidStatusCode:TSt,isValidOpcode:wSt,failWebsocketConnection:lp,websocketMessageReceived:qNe,utf8Decode:_St,isControlFrame:WNe,isTextBinaryFrame:lce,isContinuationFrame:SSt}=DP(),{WebsocketFrameSend:GNe}=RG(),{closeWebSocketConnection:HNe}=sce(),{PerMessageDeflate:RSt}=LNe(),cce=class extends vSt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#r=Rd.INFO;#n={};#o=[];#s;constructor(e,n){super(),this.ws=e,this.#s=n??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new RSt(n))}_write(e,n,r){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(r)}run(e){for(;this.#i;)if(this.#r===Rd.INFO){if(this.#t<2)return e();let n=this.consume(2),r=(n[0]&128)!==0,i=n[0]&15,o=(n[1]&128)===128,a=!r&&i!==H4.CONTINUATION,l=n[1]&127,c=n[0]&64,u=n[0]&32,d=n[0]&16;if(!wSt(i))return lp(this.ws,"Invalid opcode received"),e();if(o)return lp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){lp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){lp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!lce(i)){lp(this.ws,"Invalid frame type was fragmented.");return}if(lce(i)&&this.#o.length>0){lp(this.ws,"Expected continuation frame");return}if(this.#n.fragmented&&a){lp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&WNe(i)){lp(this.ws,"Control frame either too large or fragmented");return}if(SSt(i)&&this.#o.length===0&&!this.#n.compressed){lp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#n.payloadLength=l,this.#r=Rd.READ_DATA):l===126?this.#r=Rd.PAYLOADLENGTH_16:l===127&&(this.#r=Rd.PAYLOADLENGTH_64),lce(i)&&(this.#n.binaryType=i,this.#n.compressed=c!==0),this.#n.opcode=i,this.#n.masked=o,this.#n.fin=r,this.#n.fragmented=a}else if(this.#r===Rd.PAYLOADLENGTH_16){if(this.#t<2)return e();let n=this.consume(2);this.#n.payloadLength=n.readUInt16BE(0),this.#r=Rd.READ_DATA}else if(this.#r===Rd.PAYLOADLENGTH_64){if(this.#t<8)return e();let n=this.consume(8),r=n.readUInt32BE(0);if(r>2**31-1){lp(this.ws,"Received payload length > 2^31 bytes.");return}let i=n.readUInt32BE(4);this.#n.payloadLength=(r<<8)+i,this.#r=Rd.READ_DATA}else if(this.#r===Rd.READ_DATA){if(this.#t<this.#n.payloadLength)return e();let n=this.consume(this.#n.payloadLength);if(WNe(this.#n.opcode))this.#i=this.parseControlFrame(n),this.#r=Rd.INFO;else if(this.#n.compressed){this.#s.get("permessage-deflate").decompress(n,this.#n.fin,(r,i)=>{if(r){HNe(this.ws,1007,r.message,r.message.length);return}if(this.#o.push(i),!this.#n.fin){this.#r=Rd.INFO,this.#i=!0,this.run(e);return}qNe(this.ws,this.#n.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#r=Rd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(n),!this.#n.fragmented&&this.#n.fin){let r=Buffer.concat(this.#o);qNe(this.ws,this.#n.binaryType,r),this.#o.length=0}this.#r=Rd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return FNe;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let n=Buffer.allocUnsafe(e),r=0;for(;r!==e;){let i=this.#e[0],{length:o}=i;if(o+r===e){n.set(this.#e.shift(),r);break}else if(o+r>e){n.set(i.subarray(0,e-r),r),this.#e[0]=i.subarray(e-r);break}else n.set(this.#e.shift(),r),r+=i.length}return this.#t-=e,n}parseCloseBody(e){bSt(e.length!==1);let n;if(e.length>=2&&(n=e.readUInt16BE(0)),n!==void 0&&!TSt(n))return{code:1002,reason:"Invalid status code",error:!0};let r=e.subarray(2);r[0]===239&&r[1]===187&&r[2]===191&&(r=r.subarray(3));try{r=_St(r)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:n,reason:r,error:!1}}parseControlFrame(e){let{opcode:n,payloadLength:r}=this.#n;if(n===H4.CLOSE){if(r===1)return lp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#n.closeInfo=this.parseCloseBody(e),this.#n.closeInfo.error){let{code:i,reason:o}=this.#n.closeInfo;return HNe(this.ws,i,o,o.length),lp(this.ws,o),!1}if(this.ws[QNe]!==MNe.SENT){let i=FNe;this.#n.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#n.closeInfo.code,0));let o=new GNe(i);this.ws[ONe].socket.write(o.createFrame(H4.CLOSE),a=>{a||(this.ws[QNe]=MNe.SENT)})}return this.ws[ISt]=ESt.CLOSING,this.ws[UNe]=!0,!1}else if(n===H4.PING){if(!this.ws[UNe]){let i=new GNe(e);this.ws[ONe].socket.write(i.createFrame(H4.PONG)),NG.ping.hasSubscribers&&NG.ping.publish({payload:e})}}else n===H4.PONG&&NG.pong.hasSubscribers&&NG.pong.publish({payload:e});return!0}get closingInfo(){return this.#n.closeInfo}};jNe.exports={ByteParser:cce}});var JNe=W((ter,KNe)=>{"use strict";f();var{WebsocketFrameSend:kSt}=RG(),{opcodes:$Ne,sendHints:j4}=z2(),BSt=vae(),zNe=Buffer[Symbol.species],uce=class{static{s(this,"SendQueue")}#e=new BSt;#t=!1;#i;constructor(e){this.#i=e}add(e,n,r){if(r!==j4.blob){let o=YNe(e,r);if(!this.#t)this.#i.write(o,n);else{let a={promise:null,callback:n,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=YNe(o,r)}),callback:n,frame:null};this.#e.push(i),this.#t||this.#r()}async#r(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let n=e.shift();n.promise!==null&&await n.promise,this.#i.write(n.frame,n.callback),n.callback=n.frame=null}this.#t=!1}};function YNe(t,e){return new kSt(DSt(t,e)).createFrame(e===j4.string?$Ne.TEXT:$Ne.BINARY)}s(YNe,"createFrame");function DSt(t,e){switch(e){case j4.string:return Buffer.from(t);case j4.arrayBuffer:case j4.blob:return new zNe(t);case j4.typedArray:return new zNe(t.buffer,t.byteOffset,t.byteLength)}}s(DSt,"toBuffer");KNe.exports={SendQueue:uce}});var s7e=W((ier,o7e)=>{"use strict";f();var{webidl:Or}=Cc(),{URLSerializer:PSt}=Id(),{environmentSettingsObject:XNe}=R0(),{staticPropertyDescriptors:Gv,states:FP,sentCloseFrameState:NSt,sendHints:LG}=z2(),{kWebSocketURL:ZNe,kReadyState:dce,kController:LSt,kBinaryType:FG,kResponse:e7e,kSentClose:FSt,kByteParser:MSt}=RP(),{isConnecting:QSt,isEstablished:OSt,isClosing:USt,isValidSubprotocol:qSt,fireEvent:t7e}=DP(),{establishWebSocketConnection:WSt,closeWebSocketConnection:n7e}=sce(),{ByteParser:GSt}=VNe(),{kEnumerableProperty:cp,isBlobLike:r7e}=yi(),{getGlobalDispatcher:HSt}=KW(),{types:i7e}=require("node:util"),{ErrorEvent:jSt,CloseEvent:VSt}=q4(),{SendQueue:$St}=JNe(),F0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#r="";#n;constructor(e,n=[]){super(),Or.util.markAsUncloneable(this);let r="WebSocket constructor";Or.argumentLengthCheck(arguments,1,r);let i=Or.converters["DOMString or sequence<DOMString> or WebSocketInit"](n,r,"options");e=Or.converters.USVString(e,r,"url"),n=i.protocols;let o=XNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof n=="string"&&(n=[n]),n.length!==new Set(n.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(n.length>0&&!n.every(c=>qSt(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[ZNe]=new URL(a.href);let l=XNe.settingsObject;this[LSt]=WSt(a,n,l,this,(c,u)=>this.#o(c,u),i),this[dce]=t.CONNECTING,this[FSt]=NSt.NOT_SENT,this[FG]="blob"}close(e=void 0,n=void 0){Or.brandCheck(this,t);let r="WebSocket.close";if(e!==void 0&&(e=Or.converters["unsigned short"](e,r,"code",{clamp:!0})),n!==void 0&&(n=Or.converters.USVString(n,r,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(n!==void 0&&(i=Buffer.byteLength(n),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");n7e(this,e,n,i)}send(e){Or.brandCheck(this,t);let n="WebSocket.send";if(Or.argumentLengthCheck(arguments,1,n),e=Or.converters.WebSocketSendData(e,n,"data"),QSt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!OSt(this)||USt(this)))if(typeof e=="string"){let r=Buffer.byteLength(e);this.#t+=r,this.#n.add(e,()=>{this.#t-=r},LG.string)}else i7e.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},LG.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},LG.typedArray)):r7e(e)&&(this.#t+=e.size,this.#n.add(e,()=>{this.#t-=e.size},LG.blob))}get readyState(){return Or.brandCheck(this,t),this[dce]}get bufferedAmount(){return Or.brandCheck(this,t),this.#t}get url(){return Or.brandCheck(this,t),PSt(this[ZNe])}get extensions(){return Or.brandCheck(this,t),this.#r}get protocol(){return Or.brandCheck(this,t),this.#i}get onopen(){return Or.brandCheck(this,t),this.#e.open}set onopen(e){Or.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Or.brandCheck(this,t),this.#e.error}set onerror(e){Or.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Or.brandCheck(this,t),this.#e.close}set onclose(e){Or.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Or.brandCheck(this,t),this.#e.message}set onmessage(e){Or.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Or.brandCheck(this,t),this[FG]}set binaryType(e){Or.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[FG]="blob":this[FG]=e}#o(e,n){this[e7e]=e;let r=new GSt(this,n);r.on("drain",zSt),r.on("error",YSt.bind(this)),e.socket.ws=this,this[MSt]=r,this.#n=new $St(e.socket),this[dce]=FP.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#r=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),t7e("open",this)}};F0.CONNECTING=F0.prototype.CONNECTING=FP.CONNECTING;F0.OPEN=F0.prototype.OPEN=FP.OPEN;F0.CLOSING=F0.prototype.CLOSING=FP.CLOSING;F0.CLOSED=F0.prototype.CLOSED=FP.CLOSED;Object.defineProperties(F0.prototype,{CONNECTING:Gv,OPEN:Gv,CLOSING:Gv,CLOSED:Gv,url:cp,readyState:cp,bufferedAmount:cp,onopen:cp,onerror:cp,onclose:cp,close:cp,onmessage:cp,binaryType:cp,send:cp,extensions:cp,protocol:cp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(F0,{CONNECTING:Gv,OPEN:Gv,CLOSING:Gv,CLOSED:Gv});Or.converters["sequence<DOMString>"]=Or.sequenceConverter(Or.converters.DOMString);Or.converters["DOMString or sequence<DOMString>"]=function(t,e,n){return Or.util.Type(t)==="Object"&&Symbol.iterator in t?Or.converters["sequence<DOMString>"](t):Or.converters.DOMString(t,e,n)};Or.converters.WebSocketInit=Or.dictionaryConverter([{key:"protocols",converter:Or.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Or.converters.any,defaultValue:s(()=>HSt(),"defaultValue")},{key:"headers",converter:Or.nullableConverter(Or.converters.HeadersInit)}]);Or.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Or.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Or.converters.WebSocketInit(t):{protocols:Or.converters["DOMString or sequence<DOMString>"](t)}};Or.converters.WebSocketSendData=function(t){if(Or.util.Type(t)==="Object"){if(r7e(t))return Or.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||i7e.isArrayBuffer(t))return Or.converters.BufferSource(t)}return Or.converters.USVString(t)};function zSt(){this.ws[e7e].socket.resume()}s(zSt,"onParserDrain");function YSt(t){let e,n;t instanceof VSt?(e=t.reason,n=t.code):e=t.message,t7e("error",this,()=>new jSt("error",{error:t,message:e})),n7e(this,n)}s(YSt,"onParserError");o7e.exports={WebSocket:F0}});var fce=W((aer,a7e)=>{"use strict";f();function KSt(t){return t.indexOf("\0")===-1}s(KSt,"isValidLastEventId");function JSt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(JSt,"isASCIINumber");function XSt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(XSt,"delay");a7e.exports={isValidLastEventId:KSt,isASCIINumber:JSt,delay:XSt}});var d7e=W((uer,u7e)=>{"use strict";f();var{Transform:ZSt}=require("node:stream"),{isASCIINumber:l7e,isValidLastEventId:c7e}=fce(),uy=[239,187,191],pce=10,MG=13,e5t=58,t5t=32,mce=class extends ZSt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,n,r){if(e.length===0){r();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===uy[0]){r();return}this.checkBOM=!1,r();return;case 2:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]){r();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,r();return}this.checkBOM=!1;break;default:this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===pce){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===pce||this.buffer[this.pos]===MG){this.buffer[this.pos]===MG&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===pce||this.buffer[this.pos]===MG){this.buffer[this.pos]===MG&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}r()}parseLine(e,n){if(e.length===0)return;let r=e.indexOf(e5t);if(r===0)return;let i="",o="";if(r!==-1){i=e.subarray(0,r).toString("utf8");let a=r+1;e[a]===t5t&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":n[i]===void 0?n[i]=o:n[i]+=`
${o}`;break;case"retry":l7e(o)&&(n[i]=o);break;case"id":c7e(o)&&(n[i]=o);break;case"event":o.length>0&&(n[i]=o);break}}processEvent(e){e.retry&&l7e(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&c7e(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};u7e.exports={EventSourceStream:mce}});var C7e=W((per,y7e)=>{"use strict";f();var{pipeline:n5t}=require("node:stream"),{fetching:r5t}=TP(),{makeRequest:i5t}=L4(),{webidl:dy}=Cc(),{EventSourceStream:o5t}=d7e(),{parseMIMEType:s5t}=Id(),{createFastMessageEvent:a5t}=q4(),{isNetworkError:f7e}=EP(),{delay:l5t}=fce(),{kEnumerableProperty:Y2}=yi(),{environmentSettingsObject:p7e}=R0(),m7e=!1,h7e=3e3,MP=0,g7e=1,QP=2,c5t="anonymous",u5t="use-credentials",V4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#r=MP;#n=null;#o=null;#s;#a;constructor(e,n={}){super(),dy.util.markAsUncloneable(this);let r="EventSource constructor";dy.argumentLengthCheck(arguments,1,r),m7e||(m7e=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=dy.converters.USVString(e,r,"url"),n=dy.converters.EventSourceInitDict(n,r,"eventSourceInitDict"),this.#s=n.dispatcher,this.#a={lastEventId:"",reconnectionTime:h7e};let i=p7e,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=c5t;n.withCredentials&&(a=u5t,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=p7e.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#n=i5t(l),this.#l()}get readyState(){return this.#r}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#r===QP)return;this.#r=MP;let e={request:this.#n,dispatcher:this.#s},n=s(r=>{f7e(r)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=n,e.processResponse=r=>{if(f7e(r))if(r.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=r.headersList.get("content-type",!0),o=i!==null?s5t(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(r.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#r=g7e,this.dispatchEvent(new Event("open")),this.#a.origin=r.urlList[r.urlList.length-1].origin;let l=new o5t({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(a5t(c.type,c.options))},"push")});n5t(r.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=r5t(e)}async#c(){this.#r!==QP&&(this.#r=MP,this.dispatchEvent(new Event("error")),await l5t(this.#a.reconnectionTime),this.#r===MP&&(this.#a.lastEventId.length&&this.#n.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){dy.brandCheck(this,t),this.#r!==QP&&(this.#r=QP,this.#o.abort(),this.#n=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},A7e={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:MP,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:g7e,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:QP,writable:!1}};Object.defineProperties(V4,A7e);Object.defineProperties(V4.prototype,A7e);Object.defineProperties(V4.prototype,{close:Y2,onerror:Y2,onmessage:Y2,onopen:Y2,readyState:Y2,url:Y2,withCredentials:Y2});dy.converters.EventSourceInitDict=dy.dictionaryConverter([{key:"withCredentials",converter:dy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:dy.converters.any}]);y7e.exports={EventSource:V4,defaultReconnectionTime:h7e}});var E7e=W((ger,Rr)=>{"use strict";f();var d5t=lP(),x7e=UD(),f5t=b4(),p5t=_De(),m5t=E4(),h5t=Oae(),g5t=HDe(),A5t=KDe(),v7e=yo(),OG=yi(),{InvalidArgumentError:QG}=v7e,$4=FPe(),y5t=WD(),C5t=xle(),x5t=A9e(),v5t=Ele(),b5t=ale(),E5t=UW(),{getGlobalDispatcher:b7e,setGlobalDispatcher:I5t}=KW(),T5t=JW(),w5t=SW(),_5t=RW();Object.assign(x7e.prototype,$4);Rr.exports.Dispatcher=x7e;Rr.exports.Client=d5t;Rr.exports.Pool=f5t;Rr.exports.BalancedPool=p5t;Rr.exports.Agent=m5t;Rr.exports.ProxyAgent=h5t;Rr.exports.EnvHttpProxyAgent=g5t;Rr.exports.RetryAgent=A5t;Rr.exports.RetryHandler=E5t;Rr.exports.DecoratorHandler=T5t;Rr.exports.RedirectHandler=w5t;Rr.exports.createRedirectInterceptor=_5t;Rr.exports.interceptors={redirect:I9e(),retry:w9e(),dump:S9e(),dns:B9e()};Rr.exports.buildConnector=y5t;Rr.exports.errors=v7e;Rr.exports.util={parseHeaders:OG.parseHeaders,headerNameToString:OG.headerNameToString};function OP(t){return(e,n,r)=>{if(typeof n=="function"&&(r=n,n=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new QG("invalid url");if(n!=null&&typeof n!="object")throw new QG("invalid opts");if(n&&n.path!=null){if(typeof n.path!="string")throw new QG("invalid opts.path");let a=n.path;n.path.startsWith("/")||(a=`/${a}`),e=new URL(OG.parseOrigin(e).origin+a)}else n||(n=typeof e=="object"?e:{}),e=OG.parseURL(e);let{agent:i,dispatcher:o=b7e()}=n;if(i)throw new QG("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...n,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:n.method||(n.body?"PUT":"GET")},r)}}s(OP,"makeDispatcher");Rr.exports.setGlobalDispatcher=I5t;Rr.exports.getGlobalDispatcher=b7e;var S5t=TP().fetch;Rr.exports.fetch=s(async function(e,n=void 0){try{return await S5t(e,n)}catch(r){throw r&&typeof r=="object"&&Error.captureStackTrace(r),r}},"fetch");Rr.exports.Headers=W2().Headers;Rr.exports.Response=EP().Response;Rr.exports.Request=L4().Request;Rr.exports.FormData=YD().FormData;Rr.exports.File=globalThis.File??require("node:buffer").File;Rr.exports.FileReader=j6e().FileReader;var{setGlobalOrigin:R5t,getGlobalOrigin:k5t}=Use();Rr.exports.setGlobalOrigin=R5t;Rr.exports.getGlobalOrigin=k5t;var{CacheStorage:B5t}=eNe(),{kConstruct:D5t}=yG();Rr.exports.caches=new B5t(D5t);var{deleteCookie:P5t,getCookies:N5t,getSetCookies:L5t,setCookie:F5t}=fNe();Rr.exports.deleteCookie=P5t;Rr.exports.getCookies=N5t;Rr.exports.getSetCookies=L5t;Rr.exports.setCookie=F5t;var{parseMIMEType:M5t,serializeAMimeType:Q5t}=Id();Rr.exports.parseMIMEType=M5t;Rr.exports.serializeAMimeType=Q5t;var{CloseEvent:O5t,ErrorEvent:U5t,MessageEvent:q5t}=q4();Rr.exports.WebSocket=s7e().WebSocket;Rr.exports.CloseEvent=O5t;Rr.exports.ErrorEvent=U5t;Rr.exports.MessageEvent=q5t;Rr.exports.request=OP($4.request);Rr.exports.stream=OP($4.stream);Rr.exports.pipeline=OP($4.pipeline);Rr.exports.connect=OP($4.connect);Rr.exports.upgrade=OP($4.upgrade);Rr.exports.MockClient=C5t;Rr.exports.MockPool=v5t;Rr.exports.MockAgent=x5t;Rr.exports.mockErrors=b5t;var{EventSource:W5t}=C7e();Rr.exports.EventSource=W5t});var di=W((Cer,I7e)=>{f();I7e.exports={options:{usePureJavaScript:!1}}});var _7e=W((ver,w7e)=>{f();var hce={};w7e.exports=hce;var T7e={};hce.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(t instanceof Uint8Array))r=G5t(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)r+=a;for(i=l.length-1;i>=0;--i)r+=e[l[i]]}if(n){var d=new RegExp(".{1,"+n+"}","g");r=r.match(d).join(`\r
`)}return r};hce.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=T7e[e];if(!n){n=T7e[e]=[];for(var r=0;r<e.length;++r)n[e.charCodeAt(r)]=r}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],r=0;r<t.length;r++){var l=n[t.charCodeAt(r)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function G5t(t,e){var n=0,r=e.length,i=e.charAt(0),o=[0];for(n=0;n<t.length();++n){for(var a=0,l=t.at(n);a<o.length;++a)l+=o[a]<<8,o[a]=l%r,l=l/r|0;for(;l>0;)o.push(l%r),l=l/r|0}var c="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)c+=i;for(n=o.length-1;n>=0;--n)c+=e[o[n]];return c}s(G5t,"_encodeWithByteBuffer")});var uo=W((Ier,B7e)=>{f();var S7e=di(),R7e=_7e(),Be=B7e.exports=S7e.util=S7e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",r=!r))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function UP(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(UP,"_checkBitsParam");Be.ByteBuffer=gce;function gce(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof gce||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(gce,"ByteStringBuffer");Be.ByteStringBuffer=gce;var H5t=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>H5t&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){UP(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){UP(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function j5t(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=Be.isArrayBuffer(t),r=Be.isArrayBufferView(t);if(n||r){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(j5t,"DataBuffer");Be.DataBuffer=j5t;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(Be.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){UP(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return UP(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){UP(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};Be.xorBytes=function(t,e,n){for(var r="",i="",o="",a=0,l=0;n>0;--n,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(r+=o,o="",l=0),o+=String.fromCharCode(i),++l;return r+=o,r};Be.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Hv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",jv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],k7e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),n+=Hv.charAt(i>>2),n+=Hv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Hv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Hv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,r,i,o,a=0;a<t.length;)n=jv[t.charCodeAt(a++)-43],r=jv[t.charCodeAt(a++)-43],i=jv[t.charCodeAt(a++)-43],o=jv[t.charCodeAt(a++)-43],e+=String.fromCharCode(n<<2|r>>4),i!==64&&(e+=String.fromCharCode((r&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:R7e.encode,decode:R7e.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(t.length&1&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r};Be.binary.base64.encode=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],n+=Hv.charAt(i>>2),n+=Hv.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Hv.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Hv.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,a,l,c=0,u=n;c<t.length;)i=jv[t.charCodeAt(c++)-43],o=jv[t.charCodeAt(c++)-43],a=jv[t.charCodeAt(c++)-43],l=jv[t.charCodeAt(c++)-43],r[u++]=i<<2|o>>4,a!==64&&(r[u++]=(o&15)<<4|a>>2,l!==64&&(r[u++]=(a&3)<<6|l));return e?u-n:r.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,k7e,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,k7e,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,n){t=Be.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,a=n,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-n:r};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,n){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),n){var r=2,i=e.charCodeAt(1);i&32&&(r=6),e=e.substring(r,e.length-4)}return e};Be.inflate=function(t,e,n){var r=t.inflate(Be.encode64(e)).rval;return r===null?null:Be.decode64(r)};var Ace=s(function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(n===null?r=t.removeItem(e):(n=Be.encode64(JSON.stringify(n)),r=t.setItem(e,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},"_setStorageObject"),yce=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(Be.decode64(n))),n},"_getStorageObject"),V5t=s(function(t,e,n,r){var i=yce(t,e);i===null&&(i={}),i[n]=r,Ace(t,e,i)},"_setItem"),$5t=s(function(t,e,n){var r=yce(t,e);return r!==null&&(r=n in r?r[n]:null),r},"_getItem"),z5t=s(function(t,e,n){var r=yce(t,e);if(r!==null&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),Ace(t,e,r)}},"_removeItem"),Y5t=s(function(t,e){Ace(t,e,null)},"_clearItems"),UG=s(function(t,e,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,o=!1,a=null;for(var l in n){i=n[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");r=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r},"_callStorageFunction");Be.setItem=function(t,e,n,r,i){UG(V5t,arguments,i)};Be.getItem=function(t,e,n,r){return UG($5t,arguments,r)};Be.removeItem=function(t,e,n,r){UG(z5t,arguments,r)};Be.clearItems=function(t,e,n){UG(Y5t,arguments,n)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,n,r,i=0,o=[],a=0;n=e.exec(t);){r=t.substring(a,e.lastIndex-2),r.length>0&&o.push(r),a=e.lastIndex;var l=n[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=n===void 0?",":n,l=r===void 0?".":r,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var n=(8-t.length+e)*2,r=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){r.fillWithByte(0,n),n=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&r.putByte(0),r.putBytes(o)}return r.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],r=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=n[n.length-1],l=e.length;!a||l!==a.end+1?n.push({start:l,end:l}):(a.end=l,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1))}e.push(o)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(n),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),r(a,l-1,c)})}s(r,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(n);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var qG=W((_er,D7e)=>{f();var Vl=di();uo();D7e.exports=Vl.cipher=Vl.cipher||{};Vl.cipher.algorithms=Vl.cipher.algorithms||{};Vl.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=Vl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new Vl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};Vl.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=Vl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new Vl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};Vl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Vl.cipher.algorithms[t]=e};Vl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Vl.cipher.algorithms?Vl.cipher.algorithms[t]:null};var Cce=Vl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Cce.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=Vl.util.createBuffer(),this.output=t.output||Vl.util.createBuffer(),this.mode.start(e)};Cce.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Cce.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var vce=W((Rer,P7e)=>{f();var $l=di();uo();$l.cipher=$l.cipher||{};var wi=P7e.exports=$l.cipher.modes=$l.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=WG(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=WG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=WG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=WG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}GG(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=$l.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=$l.util.createBuffer(t.additionalData):n=$l.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=$l.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=e.length();if(r===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(xce(r*8)))}this._inBlock=this._j0.slice(0),GG(this._inBlock),this._partialBytes=0,n=$l.util.createBuffer(n),this._aDataLength=xce(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),GG(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,n){var r=t.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),GG(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=$l.util.createBuffer();var r=this._aDataLength.concat(xce(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};wi.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};wi.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,r=3;r>0;--r)e[r]=t[r]>>>1|(t[r-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>(7-n%8)*4&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/r|0,u=(r-1-a%r)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var u=i[o^r];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function WG(t,e){if(typeof t=="string"&&(t=$l.util.createBuffer(t)),$l.util.isArray(t)&&t.length>4){var n=t;t=$l.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!$l.util.isArray(t)){for(var i=[],o=e/4,r=0;r<o;++r)i.push(t.getInt32());t=i}return t}s(WG,"transformIV");function GG(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(GG,"inc32");function xce(t){return[t/4294967296|0,t&4294967295]}s(xce,"from64To32")});var Vv=W((Der,M7e)=>{f();var rs=di();qG();vce();uo();M7e.exports=rs.aes=rs.aes||{};rs.aes.startEncrypting=function(t,e,n,r){var i=HG({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i};rs.aes.createEncryptionCipher=function(t,e){return HG({key:t,output:null,decrypt:!1,mode:e})};rs.aes.startDecrypting=function(t,e,n,r){var i=HG({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i};rs.aes.createDecryptionCipher=function(t,e){return HG({key:t,output:null,decrypt:!0,mode:e})};rs.aes.Algorithm=function(t,e){Ice||L7e();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:s(function(r,i){return Ece(n._w,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return Ece(n._w,r,i,!0)},"decrypt")}}),n._init=!1};rs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=rs.util.createBuffer(e);else if(rs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=rs.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(!rs.util.isArray(e)){n=e,e=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)e.push(n.getInt32())}}if(!rs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=F7e(e,t.decrypt&&!a),this._init=!0}};rs.aes._expandKey=function(t,e){return Ice||L7e(),F7e(t,e)};rs.aes._updateBlock=Ece;Y4("AES-ECB",rs.cipher.modes.ecb);Y4("AES-CBC",rs.cipher.modes.cbc);Y4("AES-CFB",rs.cipher.modes.cfb);Y4("AES-OFB",rs.cipher.modes.ofb);Y4("AES-CTR",rs.cipher.modes.ctr);Y4("AES-GCM",rs.cipher.modes.gcm);function Y4(t,e){var n=s(function(){return new rs.aes.Algorithm(t,e)},"factory");rs.cipher.registerAlgorithm(t,n)}s(Y4,"registerAlgorithm");var Ice=!1,z4=4,Uu,bce,N7e,K2,$m;function L7e(){Ice=!0,N7e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Uu=new Array(256),bce=new Array(256),K2=new Array(4),$m=new Array(4);for(var e=0;e<4;++e)K2[e]=new Array(256),$m[e]=new Array(256);for(var n=0,r=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=r^r<<1^r<<2^r<<3^r<<4,l=l>>8^l&255^99,Uu[n]=l,bce[l]=n,c=t[l],i=t[n],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(n^a)<<16^(n^o^a)<<8^(n^i^a);for(var p=0;p<4;++p)K2[p][n]=u,$m[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;n===0?n=r=1:(n=i^t[t[t[i^a]]],r^=t[t[r]])}}s(L7e,"initialize");function F7e(t,e){for(var n=t.slice(0),r,i=1,o=n.length,a=o+6+1,l=z4*a,c=o;c<l;++c)r=n[c-1],c%o===0?(r=Uu[r>>>16&255]<<24^Uu[r>>>8&255]<<16^Uu[r&255]<<8^Uu[r>>>24]^N7e[i]<<24,i++):o>6&&c%o===4&&(r=Uu[r>>>24]<<24^Uu[r>>>16&255]<<16^Uu[r>>>8&255]<<8^Uu[r&255]),n[c]=n[c-o]^r;if(e){var u,d=$m[0],p=$m[1],m=$m[2],h=$m[3],g=n.slice(0);l=n.length;for(var c=0,y=l-z4;c<l;c+=z4,y-=z4)if(c===0||c===l-z4)g[c]=n[y],g[c+1]=n[y+3],g[c+2]=n[y+2],g[c+3]=n[y+1];else for(var v=0;v<z4;++v)u=n[y+v],g[c+(3&-v)]=d[Uu[u>>>24]]^p[Uu[u>>>16&255]]^m[Uu[u>>>8&255]]^h[Uu[u&255]];n=g}return n}s(F7e,"_expandKey");function Ece(t,e,n,r){var i=t.length/4-1,o,a,l,c,u;r?(o=$m[0],a=$m[1],l=$m[2],c=$m[3],u=bce):(o=K2[0],a=K2[1],l=K2[2],c=K2[3],u=Uu);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[r?3:1]^t[1],m=e[2]^t[2],h=e[r?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;n[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],n[r?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],n[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],n[r?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(Ece,"_updateBlock");function HG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,r;t.decrypt?r=rs.cipher.createDecipher(n,t.key):r=rs.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof rs.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(HG,"_createCipher")});var $v=W((Ler,Q7e)=>{f();var qP=di();qP.pki=qP.pki||{};var Tce=Q7e.exports=qP.pki.oids=qP.oids=qP.oids||{};function _t(t,e){Tce[t]=e,Tce[e]=t}s(_t,"_IN");function Eo(t,e){Tce[t]=e}s(Eo,"_I_");_t("1.2.840.113549.1.1.1","rsaEncryption");_t("1.2.840.113549.1.1.4","md5WithRSAEncryption");_t("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_t("1.2.840.113549.1.1.7","RSAES-OAEP");_t("1.2.840.113549.1.1.8","mgf1");_t("1.2.840.113549.1.1.9","pSpecified");_t("1.2.840.113549.1.1.10","RSASSA-PSS");_t("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_t("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_t("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_t("1.3.101.112","EdDSA25519");_t("1.2.840.10040.4.3","dsa-with-sha1");_t("1.3.14.3.2.7","desCBC");_t("1.3.14.3.2.26","sha1");_t("1.3.14.3.2.29","sha1WithRSASignature");_t("2.16.840.1.101.3.4.2.1","sha256");_t("2.16.840.1.101.3.4.2.2","sha384");_t("2.16.840.1.101.3.4.2.3","sha512");_t("2.16.840.1.101.3.4.2.4","sha224");_t("2.16.840.1.101.3.4.2.5","sha512-224");_t("2.16.840.1.101.3.4.2.6","sha512-256");_t("1.2.840.113549.2.2","md2");_t("1.2.840.113549.2.5","md5");_t("1.2.840.113549.1.7.1","data");_t("1.2.840.113549.1.7.2","signedData");_t("1.2.840.113549.1.7.3","envelopedData");_t("1.2.840.113549.1.7.4","signedAndEnvelopedData");_t("1.2.840.113549.1.7.5","digestedData");_t("1.2.840.113549.1.7.6","encryptedData");_t("1.2.840.113549.1.9.1","emailAddress");_t("1.2.840.113549.1.9.2","unstructuredName");_t("1.2.840.113549.1.9.3","contentType");_t("1.2.840.113549.1.9.4","messageDigest");_t("1.2.840.113549.1.9.5","signingTime");_t("1.2.840.113549.1.9.6","counterSignature");_t("1.2.840.113549.1.9.7","challengePassword");_t("1.2.840.113549.1.9.8","unstructuredAddress");_t("1.2.840.113549.1.9.14","extensionRequest");_t("1.2.840.113549.1.9.20","friendlyName");_t("1.2.840.113549.1.9.21","localKeyId");_t("1.2.840.113549.1.9.22.1","x509Certificate");_t("1.2.840.113549.1.12.10.1.1","keyBag");_t("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_t("1.2.840.113549.1.12.10.1.3","certBag");_t("1.2.840.113549.1.12.10.1.4","crlBag");_t("1.2.840.113549.1.12.10.1.5","secretBag");_t("1.2.840.113549.1.12.10.1.6","safeContentsBag");_t("1.2.840.113549.1.5.13","pkcs5PBES2");_t("1.2.840.113549.1.5.12","pkcs5PBKDF2");_t("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_t("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_t("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_t("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_t("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_t("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_t("1.2.840.113549.2.7","hmacWithSHA1");_t("1.2.840.113549.2.8","hmacWithSHA224");_t("1.2.840.113549.2.9","hmacWithSHA256");_t("1.2.840.113549.2.10","hmacWithSHA384");_t("1.2.840.113549.2.11","hmacWithSHA512");_t("1.2.840.113549.3.7","des-EDE3-CBC");_t("2.16.840.1.101.3.4.1.2","aes128-CBC");_t("2.16.840.1.101.3.4.1.22","aes192-CBC");_t("2.16.840.1.101.3.4.1.42","aes256-CBC");_t("2.5.4.3","commonName");_t("2.5.4.4","surname");_t("2.5.4.5","serialNumber");_t("2.5.4.6","countryName");_t("2.5.4.7","localityName");_t("2.5.4.8","stateOrProvinceName");_t("2.5.4.9","streetAddress");_t("2.5.4.10","organizationName");_t("2.5.4.11","organizationalUnitName");_t("2.5.4.12","title");_t("2.5.4.13","description");_t("2.5.4.15","businessCategory");_t("2.5.4.17","postalCode");_t("2.5.4.42","givenName");_t("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_t("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_t("2.16.840.1.113730.1.1","nsCertType");_t("2.16.840.1.113730.1.13","nsComment");Eo("2.5.29.1","authorityKeyIdentifier");Eo("2.5.29.2","keyAttributes");Eo("2.5.29.3","certificatePolicies");Eo("2.5.29.4","keyUsageRestriction");Eo("2.5.29.5","policyMapping");Eo("2.5.29.6","subtreesConstraint");Eo("2.5.29.7","subjectAltName");Eo("2.5.29.8","issuerAltName");Eo("2.5.29.9","subjectDirectoryAttributes");Eo("2.5.29.10","basicConstraints");Eo("2.5.29.11","nameConstraints");Eo("2.5.29.12","policyConstraints");Eo("2.5.29.13","basicConstraints");_t("2.5.29.14","subjectKeyIdentifier");_t("2.5.29.15","keyUsage");Eo("2.5.29.16","privateKeyUsagePeriod");_t("2.5.29.17","subjectAltName");_t("2.5.29.18","issuerAltName");_t("2.5.29.19","basicConstraints");Eo("2.5.29.20","cRLNumber");Eo("2.5.29.21","cRLReason");Eo("2.5.29.22","expirationDate");Eo("2.5.29.23","instructionCode");Eo("2.5.29.24","invalidityDate");Eo("2.5.29.25","cRLDistributionPoints");Eo("2.5.29.26","issuingDistributionPoint");Eo("2.5.29.27","deltaCRLIndicator");Eo("2.5.29.28","issuingDistributionPoint");Eo("2.5.29.29","certificateIssuer");Eo("2.5.29.30","nameConstraints");_t("2.5.29.31","cRLDistributionPoints");_t("2.5.29.32","certificatePolicies");Eo("2.5.29.33","policyMappings");Eo("2.5.29.34","policyConstraints");_t("2.5.29.35","authorityKeyIdentifier");Eo("2.5.29.36","policyConstraints");_t("2.5.29.37","extKeyUsage");Eo("2.5.29.46","freshestCRL");Eo("2.5.29.54","inhibitAnyPolicy");_t("1.3.6.1.4.1.11129.2.4.2","timestampList");_t("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_t("1.3.6.1.5.5.7.3.1","serverAuth");_t("1.3.6.1.5.5.7.3.2","clientAuth");_t("1.3.6.1.5.5.7.3.3","codeSigning");_t("1.3.6.1.5.5.7.3.4","emailProtection");_t("1.3.6.1.5.5.7.3.8","timeStamping")});var zm=W((Qer,U7e)=>{f();var bs=di();uo();$v();var rn=U7e.exports=bs.asn1=bs.asn1||{};rn.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};rn.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};rn.create=function(t,e,n,r,i){if(bs.util.isArray(r)){for(var o=[],a=0;a<r.length;++a)r[a]!==void 0&&o.push(r[a]);r=o}var l={tagClass:t,type:e,constructed:n,composed:n||bs.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=rn.copy(l)),l};rn.copy=function(t,e){var n;if(bs.util.isArray(t)){n=[];for(var r=0;r<t.length;++r)n.push(rn.copy(t[r],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:rn.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};rn.equals=function(t,e,n){if(bs.util.isArray(t)){if(!bs.util.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!rn.equals(t[r],e[r]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&rn.equals(t.value,e.value);return n&&n.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};rn.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,r=e&128;return r?n=t.getInt((e&127)<<3):n=e,n}};function WP(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}s(WP,"_checkBufferLength");var K5t=s(function(t,e){var n=t.getByte();if(e--,n!==128){var r,i=n&128;if(!i)r=n;else{var o=n&127;WP(t,e,o),r=t.getInt(o<<3)}if(r<0)throw new Error("Negative length: "+r);return r}},"_getValueLength");rn.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=bs.util.createBuffer(t));var n=t.length(),r=jG(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=t.length(),i}return r};function jG(t,e,n,r){var i;WP(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=K5t(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(WP(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(jG(t,e,n+1,r)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(jG(t,c,n+1,r)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&r.decodeBitStrings&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===rn.Type.BITSTRING&&(WP(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=jG(t,e,n+1,v),E=i-t.length();e-=E,l==rn.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===rn.Class.UNIVERSAL||_===rn.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===rn.Type.BMPSTRING)for(d="";c>0;c-=2)WP(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return rn.create(a,l,m,d,k)}s(jG,"_fromDer");rn.toDer=function(t){var e=bs.util.createBuffer(),n=t.tagClass|t.type,r=bs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=rn.equals(t,t.original))),i)r.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:r.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&r.putBuffer(rn.toDer(t.value[o]))}else if(t.type===rn.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)r.putInt16(t.value.charCodeAt(o));else t.type===rn.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?r.putBytes(t.value.substr(1)):r.putBytes(t.value);if(e.putByte(n),r.length()<=127)e.putByte(r.length()&127);else{var a=r.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(r),e};rn.oidToDer=function(t){var e=t.split("."),n=bs.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var r,i,o,a,l=2;l<e.length;++l){r=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,r||(a|=128),i.push(a),r=!1;while(o>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};rn.derToOid=function(t){var e;typeof t=="string"&&(t=bs.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var r=0;t.length()>0;)n=t.getByte(),r=r<<7,n&128?r+=n&127:(e+="."+(r+n),r=0);return e};rn.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};rn.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(n,r,i),e.setHours(o,a,l,c)),e};rn.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.integerToDer=function(t){var e=bs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};rn.derToInteger=function(t){typeof t=="string"&&(t=bs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};rn.validate=function(t,e,n,r){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&bs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=rn.validate(t.value[o],e.value[a],n,r),i?++o:e.value[a].optional&&(i=!0)),!i&&r&&r.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else r&&r.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else r&&(t.tagClass!==e.tagClass&&r.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&r.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var O7e=/[^\\u0000-\\u00ff]/;rn.prettyPrint=function(t,e,n){var r="";e=e||0,n=n||2,e>0&&(r+=`
`);for(var i="",o=0;o<e*n;++o)i+=" ";switch(r+=i+"Tag: ",t.tagClass){case rn.Class.UNIVERSAL:r+="Universal:";break;case rn.Class.APPLICATION:r+="Application:";break;case rn.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case rn.Class.PRIVATE:r+="Private:";break}if(t.tagClass===rn.Class.UNIVERSAL)switch(r+=t.type,t.type){case rn.Type.NONE:r+=" (None)";break;case rn.Type.BOOLEAN:r+=" (Boolean)";break;case rn.Type.INTEGER:r+=" (Integer)";break;case rn.Type.BITSTRING:r+=" (Bit string)";break;case rn.Type.OCTETSTRING:r+=" (Octet string)";break;case rn.Type.NULL:r+=" (Null)";break;case rn.Type.OID:r+=" (Object Identifier)";break;case rn.Type.ODESC:r+=" (Object Descriptor)";break;case rn.Type.EXTERNAL:r+=" (External or Instance of)";break;case rn.Type.REAL:r+=" (Real)";break;case rn.Type.ENUMERATED:r+=" (Enumerated)";break;case rn.Type.EMBEDDED:r+=" (Embedded PDV)";break;case rn.Type.UTF8:r+=" (UTF8)";break;case rn.Type.ROID:r+=" (Relative Object Identifier)";break;case rn.Type.SEQUENCE:r+=" (Sequence)";break;case rn.Type.SET:r+=" (Set)";break;case rn.Type.PRINTABLESTRING:r+=" (Printable String)";break;case rn.Type.IA5String:r+=" (IA5String (ASCII))";break;case rn.Type.UTCTIME:r+=" (UTC time)";break;case rn.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case rn.Type.BMPSTRING:r+=" (BMP String)";break}else r+=t.type;if(r+=`
`,r+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=rn.prettyPrint(t.value[o],e+1,n),o+1<t.value.length&&(l+=","));r+=i+"Sub values: "+a+l}else{if(r+=i+"Value: ",t.type===rn.Type.OID){var c=rn.derToOid(t.value);r+=c,bs.pki&&bs.pki.oids&&c in bs.pki.oids&&(r+=" ("+bs.pki.oids[c]+") ")}if(t.type===rn.Type.INTEGER)try{r+=rn.derToInteger(t.value)}catch{r+="0x"+bs.util.bytesToHex(t.value)}else if(t.type===rn.Type.BITSTRING){if(t.value.length>1?r+="0x"+bs.util.bytesToHex(t.value.slice(1)):r+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else if(t.type===rn.Type.OCTETSTRING)O7e.test(t.value)||(r+="("+t.value+") "),r+="0x"+bs.util.bytesToHex(t.value);else if(t.type===rn.Type.UTF8)try{r+=bs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")r+="0x"+bs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===rn.Type.PRINTABLESTRING||t.type===rn.Type.IA5String?r+=t.value:O7e.test(t.value)?r+="0x"+bs.util.bytesToHex(t.value):t.value.length===0?r+="[null]":r+=t.value}return r}});var zg=W((qer,q7e)=>{f();var VG=di();q7e.exports=VG.md=VG.md||{};VG.md.algorithms=VG.md.algorithms||{}});var K4=W((Ger,W7e)=>{f();var fy=di();zg();uo();var J5t=W7e.exports=fy.hmac=fy.hmac||{};J5t.create=function(){var t=null,e=null,n=null,r=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in fy.md.algorithms)e=fy.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=fy.util.createBuffer(a);else if(fy.util.isArray(a)){var l=a;a=fy.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),n=fy.util.createBuffer(),r=fy.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);n.putByte(54^l),r.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)n.putByte(54),r.putByte(92);t=a,n=n.bytes(),r=r.bytes()}e.start(),e.update(n)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(r),e.update(o),e.digest()},i.digest=i.getMac,i}});var zG=W((jer,V7e)=>{f();var Yg=di();zg();uo();var H7e=V7e.exports=Yg.md5=Yg.md5||{};Yg.md.md5=Yg.md.algorithms.md5=H7e;H7e.create=function(){j7e||X5t();var t=null,e=Yg.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Yg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Yg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),G7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Yg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(wce.substr(0,r.blockLength-a));for(var l,c=0,u=r.fullMessageLength.length-1;u>=0;--u)l=r.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};G7e(d,n,i);var p=Yg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},r};var wce=null,$G=null,GP=null,J4=null,j7e=!1;function X5t(){wce="\x80",wce+=Yg.util.fillString("\0",64),$G=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],GP=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],J4=new Array(64);for(var t=0;t<64;++t)J4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);j7e=!0}s(X5t,"_init");function G7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=n.getInt32Le(),c=l^o&(a^l),r=i+c+J4[d]+e[d],u=GP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<32;++d)c=a^l&(o^a),r=i+c+J4[d]+e[$G[d]],u=GP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<48;++d)c=o^a^l,r=i+c+J4[d]+e[$G[d]],u=GP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<64;++d)c=a^(o|~l),r=i+c+J4[d]+e[$G[d]],u=GP[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(G7e,"_update")});var J2=W((zer,z7e)=>{f();var KG=di();uo();var $7e=z7e.exports=KG.pem=KG.pem||{};$7e.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,r;if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=YG(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},n+=YG(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),n+=YG(r)),t.headers)for(var i=0;i<t.headers.length;++i)n+=YG(t.headers[i]);return t.procType&&(n+=`\r
`),n+=KG.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};$7e.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=n.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:KG.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(r),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(Z5t(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function YG(t){for(var e=t.name+": ",n=[],r=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)n.push(t.values[i].replace(/^(\S+\r\n)/,r));e+=n.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(YG,"foldHeader");function Z5t(t){return t.replace(/^\s+/,"")}s(Z5t,"ltrim")});var HP=W((Jer,K7e)=>{f();var Ws=di();qG();vce();uo();K7e.exports=Ws.des=Ws.des||{};Ws.des.startEncrypting=function(t,e,n,r){var i=JG({key:t,output:n,decrypt:!1,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Ws.des.createEncryptionCipher=function(t,e){return JG({key:t,output:null,decrypt:!1,mode:e})};Ws.des.startDecrypting=function(t,e,n,r){var i=JG({key:t,output:n,decrypt:!0,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Ws.des.createDecryptionCipher=function(t,e){return JG({key:t,output:null,decrypt:!0,mode:e})};Ws.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:s(function(r,i){return Y7e(n._keys,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return Y7e(n._keys,r,i,!0)},"decrypt")}}),n._init=!1};Ws.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ws.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=l4t(e),this._init=!0}};Kg("DES-ECB",Ws.cipher.modes.ecb);Kg("DES-CBC",Ws.cipher.modes.cbc);Kg("DES-CFB",Ws.cipher.modes.cfb);Kg("DES-OFB",Ws.cipher.modes.ofb);Kg("DES-CTR",Ws.cipher.modes.ctr);Kg("3DES-ECB",Ws.cipher.modes.ecb);Kg("3DES-CBC",Ws.cipher.modes.cbc);Kg("3DES-CFB",Ws.cipher.modes.cfb);Kg("3DES-OFB",Ws.cipher.modes.ofb);Kg("3DES-CTR",Ws.cipher.modes.ctr);function Kg(t,e){var n=s(function(){return new Ws.des.Algorithm(t,e)},"factory");Ws.cipher.registerAlgorithm(t,n)}s(Kg,"registerAlgorithm");var e4t=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],t4t=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],n4t=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],r4t=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],i4t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],o4t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],s4t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],a4t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function l4t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var B=t.getInt32(),N=t.getInt32();_=(B>>>4^N)&252645135,N^=_,B^=_<<4,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>2^N)&858993459,N^=_,B^=_<<2,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=(N>>>8^B)&16711935,B^=_,N^=_<<8,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=B<<8|N>>>20&240,B=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var U=0;U<b.length;++U){b[U]?(B=B<<2|B>>>26,N=N<<2|N>>>26):(B=B<<1|B>>>27,N=N<<1|N>>>27),B&=-15,N&=-15;var re=e[B>>>28]|n[B>>>24&15]|r[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|l[B>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^re)&65535,v[E++]=re^_,v[E++]=me^_<<16}}return v}s(l4t,"_createKeys");function Y7e(t,e,n,r){var i=t.length===32?3:9,o;i===3?o=r?[30,-2,-2]:[0,32,2]:o=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(t4t[h>>>24&63]|r4t[h>>>16&63]|o4t[h>>>8&63]|a4t[h&63]|e4t[g>>>24&63]|n4t[g>>>16&63]|i4t[g>>>8&63]|s4t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,n[0]=l,n[1]=c}s(Y7e,"_updateBlock");function JG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,r;t.decrypt?r=Ws.cipher.createDecipher(n,t.key):r=Ws.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof Ws.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(JG,"_createCipher")});var XG=W((etr,J7e)=>{f();var qu=di();K4();zg();uo();var c4t=qu.pkcs5=qu.pkcs5||{},py;qu.util.isNodejs&&!qu.options.usePureJavaScript&&(py=require("crypto"));J7e.exports=qu.pbkdf2=c4t.pbkdf2=function(t,e,n,r,i,o){if(typeof i=="function"&&(o=i,i=null),qu.util.isNodejs&&!qu.options.usePureJavaScript&&py.pbkdf2&&(i===null||typeof i!="object")&&(py.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?py.pbkdf2Sync.length===4?py.pbkdf2(t,e,n,r,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2(t,e,n,r,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2Sync.length===4?py.pbkdf2Sync(t,e,n,r).toString("binary"):py.pbkdf2Sync(t,e,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in qu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=qu.md[i].create()}var a=i.digestLength;if(r>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(r/a),u=r-(c-1)*a,d=qu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=n;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=n)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h,++v,qu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var Sce=W((rtr,nLe)=>{f();var Jg=di();zg();uo();var Z7e=nLe.exports=Jg.sha256=Jg.sha256||{};Jg.md.sha256=Jg.md.algorithms.sha256=Z7e;Z7e.create=function(){eLe||u4t();var t=null,e=Jg.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Jg.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Jg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),X7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Jg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(_ce.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};X7e(p,n,i);var m=Jg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},r};var _ce=null,eLe=!1,tLe=null;function u4t(){_ce="\x80",_ce+=Jg.util.fillString("\0",64),tLe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],eLe=!0}s(u4t,"_init");function X7e(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=n.length();E>=64;){for(u=0;u<16;++u)e[u]=n.getInt32();for(;u<64;++u)r=e[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=r+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),r=b+a+l+tLe[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+r>>>0,h=m,m=p,p=d,d=r+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(X7e,"_update")});var Rce=W((str,rLe)=>{f();var Xg=di();uo();var ZG=null;Xg.util.isNodejs&&!Xg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ZG=require("crypto"));var d4t=rLe.exports=Xg.prng=Xg.prng||{};d4t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();e.pools=r,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=Xg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Xg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),Xg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=Xg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=Xg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=Xg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),ZG?(e.seedFile=function(u,d){ZG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return ZG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var up=W((ctr,kce)=>{f();var zl=di();Vv();Sce();Rce();uo();(function(){if(zl.random&&zl.random.getBytes){kce.exports=zl.random;return}(function(t){var e={},n=new Array(4),r=zl.util.createBuffer();e.formatKey=function(p){var m=zl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),zl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=zl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return zl.aes._updateBlock(p,m,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},e.increment=function(p){return++p[3],p},e.md=zl.md.sha256;function i(){var p=zl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=zl.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),zl.options.usePureJavaScript||!zl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!zl.random)zl.random=o;else for(var d in o)zl.random[d]=o[d];zl.random.createInstance=i,kce.exports=zl.random})(typeof jQuery<"u"?jQuery:null)})()});var Dce=W((ftr,sLe)=>{f();var kd=di();uo();var Bce=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],iLe=[1,2,3,5],f4t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),p4t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");sLe.exports=kd.rc2=kd.rc2||{};kd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=kd.util.createBuffer(t)),e=e||128;var n=t,r=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=r;l<128;l++)n.putByte(Bce[n.at(l-1)+n.at(l-r)&255]);for(n.setAt(128-o,Bce[n.at(128-o)&a]),l=127-o;l>=0;l--)n.setAt(l,Bce[n.at(l+1)^n.at(l+o)]);return n};var oLe=s(function(t,e,n){var r=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=kd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());n?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=f4t(g[u],iLe[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=p4t(g[u],iLe[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(n?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=n?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(n?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=kd.util.createBuffer(g)),r=!1,i=kd.util.createBuffer(),o=y||new kd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(r||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(n)if(g)y=g(8,i,!n);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(r=!0,h.update()),!n&&(y=i.length()===0,y))if(g)y=g(8,o,!n);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");kd.rc2.startEncrypting=function(t,e,n){var r=kd.rc2.createEncryptionCipher(t,128);return r.start(e,n),r};kd.rc2.createEncryptionCipher=function(t,e){return oLe(t,e,!0)};kd.rc2.startDecrypting=function(t,e,n){var r=kd.rc2.createDecryptionCipher(t,128);return r.start(e,n),r};kd.rc2.createDecryptionCipher=function(t,e){return oLe(t,e,!1)}});var VP=W((htr,mLe)=>{f();var Pce=di();mLe.exports=Pce.jsbn=Pce.jsbn||{};var my,m4t=0xdeadbeefcafe,aLe=(m4t&16777215)==15715070;function Ct(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Ct,"BigInteger");Pce.jsbn.BigInteger=Ct;function fo(){return new Ct(null)}s(fo,"nbi");function h4t(t,e,n,r,i,o){for(;--o>=0;){var a=e*this.data[t++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=a&67108863}return i}s(h4t,"am1");function g4t(t,e,n,r,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),n.data[r++]=c&1073741823}return i}s(g4t,"am2");function lLe(t,e,n,r,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+n.data[r]+i,i=(c>>28)+(d>>14)+l*u,n.data[r++]=c&268435455}return i}s(lLe,"am3");typeof navigator>"u"?(Ct.prototype.am=lLe,my=28):aLe&&navigator.appName=="Microsoft Internet Explorer"?(Ct.prototype.am=g4t,my=30):aLe&&navigator.appName!="Netscape"?(Ct.prototype.am=h4t,my=26):(Ct.prototype.am=lLe,my=28);Ct.prototype.DB=my;Ct.prototype.DM=(1<<my)-1;Ct.prototype.DV=1<<my;var Nce=52;Ct.prototype.FV=Math.pow(2,Nce);Ct.prototype.F1=Nce-my;Ct.prototype.F2=2*my-Nce;var A4t="0123456789abcdefghijklmnopqrstuvwxyz",eH=new Array,X4,dp;X4=48;for(dp=0;dp<=9;++dp)eH[X4++]=dp;X4=97;for(dp=10;dp<36;++dp)eH[X4++]=dp;X4=65;for(dp=10;dp<36;++dp)eH[X4++]=dp;function cLe(t){return A4t.charAt(t)}s(cLe,"int2char");function uLe(t,e){var n=eH[t.charCodeAt(e)];return n??-1}s(uLe,"intAt");function y4t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(y4t,"bnpCopyTo");function C4t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(C4t,"bnpFromInt");function zv(t){var e=fo();return e.fromInt(t),e}s(zv,"nbv");function x4t(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=n==8?t[r]&255:uLe(t,r);if(a<0){t.charAt(r)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Ct.ZERO.subTo(this,this)}s(x4t,"bnpFromString");function v4t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(v4t,"bnpClamp");function b4t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,r,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(r=this.data[a]>>l)>0&&(i=!0,o=cLe(r));a>=0;)l<e?(r=(this.data[a]&(1<<l)-1)<<e-l,r|=this.data[--a]>>(l+=this.DB-e)):(r=this.data[a]>>(l-=e)&n,l<=0&&(l+=this.DB,--a)),r>0&&(i=!0),i&&(o+=cLe(r));return i?o:"0"}s(b4t,"bnToString");function E4t(){var t=fo();return Ct.ZERO.subTo(this,t),t}s(E4t,"bnNegate");function I4t(){return this.s<0?this.negate():this}s(I4t,"bnAbs");function T4t(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}s(T4t,"bnCompareTo");function tH(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}s(tH,"nbits");function w4t(){return this.t<=0?0:this.DB*(this.t-1)+tH(this.data[this.t-1]^this.s&this.DM)}s(w4t,"bnBitLength");function _4t(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}s(_4t,"bnpDLShiftTo");function S4t(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}s(S4t,"bnpDRShiftTo");function R4t(t,e){var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>r|a,a=(this.data[l]&i)<<n;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(R4t,"bnpLShiftTo");function k4t(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)e.data[a-n-1]|=(this.data[a]&o)<<i,e.data[a-n]=this.data[a]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}s(k4t,"bnpRShiftTo");function B4t(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}s(B4t,"bnpSubTo");function D4t(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e.data[i]=0;for(i=0;i<r.t;++i)e.data[i+n.t]=n.am(0,r.data[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&Ct.ZERO.subTo(e,e)}s(D4t,"bnpMultiplyTo");function P4t(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}s(P4t,"bnpSquareTo");function N4t(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=fo());var o=fo(),a=this.s,l=t.s,c=this.DB-tH(r.data[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=n.t,v=y-u,b=e??fo();for(o.dlShiftTo(v,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),Ct.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=n.data[--y]==d?this.DM:Math.floor(n.data[y]*m+(n.data[y-1]+g)*h);if((n.data[y]+=o.am(0,E,n,v,0,u))<E)for(o.dlShiftTo(v,b),n.subTo(b,n);n.data[y]<--E;)n.subTo(b,n)}e!=null&&(n.drShiftTo(u,e),a!=l&&Ct.ZERO.subTo(e,e)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&Ct.ZERO.subTo(n,n)}}}s(N4t,"bnpDivRemTo");function L4t(t){var e=fo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Ct.ZERO)>0&&t.subTo(e,e),e}s(L4t,"bnMod");function X2(t){this.m=t}s(X2,"Classic");function F4t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(F4t,"cConvert");function M4t(t){return t}s(M4t,"cRevert");function Q4t(t){t.divRemTo(this.m,null,t)}s(Q4t,"cReduce");function O4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(O4t,"cMulTo");function U4t(t,e){t.squareTo(e),this.reduce(e)}s(U4t,"cSqrTo");X2.prototype.convert=F4t;X2.prototype.revert=M4t;X2.prototype.reduce=Q4t;X2.prototype.mulTo=O4t;X2.prototype.sqrTo=U4t;function q4t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(q4t,"bnpInvDigit");function Z2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(Z2,"Montgomery");function W4t(t){var e=fo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Ct.ZERO)>0&&this.m.subTo(e,e),e}s(W4t,"montConvert");function G4t(t){var e=fo();return t.copyTo(e),this.reduce(e),e}s(G4t,"montRevert");function H4t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(H4t,"montReduce");function j4t(t,e){t.squareTo(e),this.reduce(e)}s(j4t,"montSqrTo");function V4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(V4t,"montMulTo");Z2.prototype.convert=W4t;Z2.prototype.revert=G4t;Z2.prototype.reduce=H4t;Z2.prototype.mulTo=V4t;Z2.prototype.sqrTo=j4t;function $4t(){return(this.t>0?this.data[0]&1:this.s)==0}s($4t,"bnpIsEven");function z4t(t,e){if(t>4294967295||t<1)return Ct.ONE;var n=fo(),r=fo(),i=e.convert(this),o=tH(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}s(z4t,"bnpExp");function Y4t(t,e){var n;return t<256||e.isEven()?n=new X2(e):n=new Z2(e),this.exp(t,n)}s(Y4t,"bnModPowInt");Ct.prototype.copyTo=y4t;Ct.prototype.fromInt=C4t;Ct.prototype.fromString=x4t;Ct.prototype.clamp=v4t;Ct.prototype.dlShiftTo=_4t;Ct.prototype.drShiftTo=S4t;Ct.prototype.lShiftTo=R4t;Ct.prototype.rShiftTo=k4t;Ct.prototype.subTo=B4t;Ct.prototype.multiplyTo=D4t;Ct.prototype.squareTo=P4t;Ct.prototype.divRemTo=N4t;Ct.prototype.invDigit=q4t;Ct.prototype.isEven=$4t;Ct.prototype.exp=z4t;Ct.prototype.toString=b4t;Ct.prototype.negate=E4t;Ct.prototype.abs=I4t;Ct.prototype.compareTo=T4t;Ct.prototype.bitLength=w4t;Ct.prototype.mod=L4t;Ct.prototype.modPowInt=Y4t;Ct.ZERO=zv(0);Ct.ONE=zv(1);function K4t(){var t=fo();return this.copyTo(t),t}s(K4t,"bnClone");function J4t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(J4t,"bnIntValue");function X4t(){return this.t==0?this.s:this.data[0]<<24>>24}s(X4t,"bnByteValue");function Z4t(){return this.t==0?this.s:this.data[0]<<16>>16}s(Z4t,"bnShortValue");function eRt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(eRt,"bnpChunkSize");function tRt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(tRt,"bnSigNum");function nRt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=zv(n),i=fo(),o=fo(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a}s(nRt,"bnpToRadix");function rRt(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=uLe(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Ct.ZERO.subTo(this,this)}s(rRt,"bnpFromRadix");function iRt(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(Ct.ONE.shiftLeft(t-1),Lce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Ct.ONE.shiftLeft(t-1),this);else{var r=new Array,i=t&7;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}s(iRt,"bnpFromNumber");function oRt(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,r,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}s(oRt,"bnToByteArray");function sRt(t){return this.compareTo(t)==0}s(sRt,"bnEquals");function aRt(t){return this.compareTo(t)<0?this:t}s(aRt,"bnMin");function lRt(t){return this.compareTo(t)>0?this:t}s(lRt,"bnMax");function cRt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}s(cRt,"bnpBitwiseTo");function uRt(t,e){return t&e}s(uRt,"op_and");function dRt(t){var e=fo();return this.bitwiseTo(t,uRt,e),e}s(dRt,"bnAnd");function Lce(t,e){return t|e}s(Lce,"op_or");function fRt(t){var e=fo();return this.bitwiseTo(t,Lce,e),e}s(fRt,"bnOr");function dLe(t,e){return t^e}s(dLe,"op_xor");function pRt(t){var e=fo();return this.bitwiseTo(t,dLe,e),e}s(pRt,"bnXor");function fLe(t,e){return t&~e}s(fLe,"op_andnot");function mRt(t){var e=fo();return this.bitwiseTo(t,fLe,e),e}s(mRt,"bnAndNot");function hRt(){for(var t=fo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(hRt,"bnNot");function gRt(t){var e=fo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(gRt,"bnShiftLeft");function ARt(t){var e=fo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(ARt,"bnShiftRight");function yRt(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(yRt,"lbit");function CRt(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+yRt(this.data[t]);return this.s<0?this.t*this.DB:-1}s(CRt,"bnGetLowestSetBit");function xRt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(xRt,"cbit");function vRt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=xRt(this.data[n]^e);return t}s(vRt,"bnBitCount");function bRt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(bRt,"bnTestBit");function ERt(t,e){var n=Ct.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}s(ERt,"bnpChangeBit");function IRt(t){return this.changeBit(t,Lce)}s(IRt,"bnSetBit");function TRt(t){return this.changeBit(t,fLe)}s(TRt,"bnClearBit");function wRt(t){return this.changeBit(t,dLe)}s(wRt,"bnFlipBit");function _Rt(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}s(_Rt,"bnpAddTo");function SRt(t){var e=fo();return this.addTo(t,e),e}s(SRt,"bnAdd");function RRt(t){var e=fo();return this.subTo(t,e),e}s(RRt,"bnSubtract");function kRt(t){var e=fo();return this.multiplyTo(t,e),e}s(kRt,"bnMultiply");function BRt(t){var e=fo();return this.divRemTo(t,e,null),e}s(BRt,"bnDivide");function DRt(t){var e=fo();return this.divRemTo(t,null,e),e}s(DRt,"bnRemainder");function PRt(t){var e=fo(),n=fo();return this.divRemTo(t,e,n),new Array(e,n)}s(PRt,"bnDivideAndRemainder");function NRt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(NRt,"bnpDMultiply");function LRt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(LRt,"bnpDAddOffset");function jP(){}s(jP,"NullExp");function pLe(t){return t}s(pLe,"nNop");function FRt(t,e,n){t.multiplyTo(e,n)}s(FRt,"nMulTo");function MRt(t,e){t.squareTo(e)}s(MRt,"nSqrTo");jP.prototype.convert=pLe;jP.prototype.revert=pLe;jP.prototype.mulTo=FRt;jP.prototype.sqrTo=MRt;function QRt(t){return this.exp(t,new jP)}s(QRt,"bnPow");function ORt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}s(ORt,"bnpMultiplyLowerTo");function URt(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}s(URt,"bnpMultiplyUpperTo");function Z4(t){this.r2=fo(),this.q3=fo(),Ct.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(Z4,"Barrett");function qRt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fo();return t.copyTo(e),this.reduce(e),e}s(qRt,"barrettConvert");function WRt(t){return t}s(WRt,"barrettRevert");function GRt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(GRt,"barrettReduce");function HRt(t,e){t.squareTo(e),this.reduce(e)}s(HRt,"barrettSqrTo");function jRt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(jRt,"barrettMulTo");Z4.prototype.convert=qRt;Z4.prototype.revert=WRt;Z4.prototype.reduce=GRt;Z4.prototype.mulTo=jRt;Z4.prototype.sqrTo=HRt;function VRt(t,e){var n=t.bitLength(),r,i=zv(1),o;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?o=new X2(e):e.isEven()?o=new Z4(e):o=new Z2(e);var a=new Array,l=3,c=r-1,u=(1<<r)-1;if(a[1]=o.convert(this),r>1){var d=fo();for(o.sqrTo(a[1],d);l<=u;)a[l]=fo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=fo(),y;for(n=tH(t.data[p])-1;p>=0;){for(n>=c?m=t.data[p]>>n-c&u:(m=(t.data[p]&(1<<n+1)-1)<<c-n,p>0&&(m|=t.data[p-1]>>this.DB+n-c)),l=r;(m&1)==0;)m>>=1,--l;if((n-=l)<0&&(n+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<n)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--n<0&&(n=this.DB-1,--p)}return o.revert(i)}s(VRt,"bnModPow");function $Rt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}s($Rt,"bnGCD");function zRt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}s(zRt,"bnpModInt");function YRt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Ct.ZERO;for(var n=t.clone(),r=this.clone(),i=zv(1),o=zv(0),a=zv(0),l=zv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(l,o)):(r.subTo(n,r),e&&a.subTo(i,a),l.subTo(o,l))}if(r.compareTo(Ct.ONE)!=0)return Ct.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(YRt,"bnModInverse");var Ym=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],KRt=(1<<26)/Ym[Ym.length-1];function JRt(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=Ym[Ym.length-1]){for(e=0;e<Ym.length;++e)if(n.data[0]==Ym[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Ym.length;){for(var r=Ym[e],i=e+1;i<Ym.length&&r<KRt;)r*=Ym[i++];for(r=n.modInt(r);e<i;)if(r%Ym[e++]==0)return!1}return n.millerRabin(t)}s(JRt,"bnIsProbablePrime");function XRt(t){var e=this.subtract(Ct.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var r=e.shiftRight(n),i=ZRt(),o,a=0;a<t;++a){do o=new Ct(this.bitLength(),i);while(o.compareTo(Ct.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(r,this);if(l.compareTo(Ct.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<n&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(Ct.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(XRt,"bnpMillerRabin");function ZRt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(ZRt,"bnGetPrng");Ct.prototype.chunkSize=eRt;Ct.prototype.toRadix=nRt;Ct.prototype.fromRadix=rRt;Ct.prototype.fromNumber=iRt;Ct.prototype.bitwiseTo=cRt;Ct.prototype.changeBit=ERt;Ct.prototype.addTo=_Rt;Ct.prototype.dMultiply=NRt;Ct.prototype.dAddOffset=LRt;Ct.prototype.multiplyLowerTo=ORt;Ct.prototype.multiplyUpperTo=URt;Ct.prototype.modInt=zRt;Ct.prototype.millerRabin=XRt;Ct.prototype.clone=K4t;Ct.prototype.intValue=J4t;Ct.prototype.byteValue=X4t;Ct.prototype.shortValue=Z4t;Ct.prototype.signum=tRt;Ct.prototype.toByteArray=oRt;Ct.prototype.equals=sRt;Ct.prototype.min=aRt;Ct.prototype.max=lRt;Ct.prototype.and=dRt;Ct.prototype.or=fRt;Ct.prototype.xor=pRt;Ct.prototype.andNot=mRt;Ct.prototype.not=hRt;Ct.prototype.shiftLeft=gRt;Ct.prototype.shiftRight=ARt;Ct.prototype.getLowestSetBit=CRt;Ct.prototype.bitCount=vRt;Ct.prototype.testBit=bRt;Ct.prototype.setBit=IRt;Ct.prototype.clearBit=TRt;Ct.prototype.flipBit=wRt;Ct.prototype.add=SRt;Ct.prototype.subtract=RRt;Ct.prototype.multiply=kRt;Ct.prototype.divide=BRt;Ct.prototype.remainder=DRt;Ct.prototype.divideAndRemainder=PRt;Ct.prototype.modPow=VRt;Ct.prototype.modInverse=YRt;Ct.prototype.pow=QRt;Ct.prototype.gcd=$Rt;Ct.prototype.isProbablePrime=JRt});var eR=W((ytr,yLe)=>{f();var Zg=di();zg();uo();var gLe=yLe.exports=Zg.sha1=Zg.sha1||{};Zg.md.sha1=Zg.md.algorithms.sha1=gLe;gLe.create=function(){ALe||ekt();var t=null,e=Zg.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Zg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Zg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),hLe(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Zg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(Fce.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};hLe(p,n,i);var m=Zg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},r};var Fce=null,ALe=!1;function ekt(){Fce="\x80",Fce+=Zg.util.fillString("\0",64),ALe=!0}s(ekt,"_init");function hLe(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)r=n.getInt32(),e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<20;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<32;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<40;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<60;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o&a|l&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<80;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+3395469782+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(hLe,"_update")});var Mce=W((vtr,xLe)=>{f();var eA=di();uo();up();eR();var CLe=xLe.exports=eA.pkcs1=eA.pkcs1||{};CLe.encode_rsa_oaep=function(t,e,n){var r,i,o,a;typeof n=="string"?(r=n,i=arguments[3]||void 0,o=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),o?o.start():o=eA.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}r||(r=""),o.update(r,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=eA.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=nH(i,l-o.digestLength-1,a),v=eA.util.xorBytes(g,y,g.length),b=nH(v,o.digestLength,a),E=eA.util.xorBytes(i,b,i.length);return"\0"+E+v};CLe.decode_rsa_oaep=function(t,e,n){var r,i,o;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=eA.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=nH(d,i.digestLength,o),m=eA.util.xorBytes(u,p,u.length),h=nH(m,a-i.digestLength-1,o),g=eA.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var B=g.charCodeAt(k),N=B&1^1,U=E?65534:0;v|=B&U,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function nH(t,e,n){n||(n=eA.md.sha1.create());for(var r="",i=Math.ceil(e/n.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);n.start(),n.update(t+a),r+=n.digest().getBytes()}return r.substring(0,e)}s(nH,"rsa_mgf1")});var Oce=W((Itr,Qce)=>{f();var Yv=di();uo();VP();up();(function(){if(Yv.prime){Qce.exports=Yv.prime;return}var t=Qce.exports=Yv.prime=Yv.prime||{},e=Yv.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new e(null);r.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||Yv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(n[g++%8],0)}while(v<0||+new Date-E<v);Yv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return Yv.util.estimateCores(function(B,N){B&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var B=[],N=0;N<v;++N)B[N]=new Worker(_);for(var U=v,N=0;N<v;++N)B[N].addEventListener("message",me);var re=!1;function me(ae){if(!re){--U;var H=ae.data;if(H.found){for(var G=0;G<B.length;++G)B[G].terminate();return re=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var ue=y.toString(16);ae.target.postMessage({hex:ue,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(r).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var $P=W((_tr,_Le)=>{f();var Zn=di();zm();VP();$v();Mce();Oce();up();uo();typeof no>"u"&&(no=Zn.jsbn.BigInteger);var no,Uce=Zn.util.isNodejs?require("crypto"):null,We=Zn.asn1,fp=Zn.util;Zn.pki=Zn.pki||{};_Le.exports=Zn.pki.rsa=Zn.rsa=Zn.rsa||{};var Xr=Zn.pki,tkt=[6,4,2,4,2,4,6,2],nkt={name:"PrivateKeyInfo",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:We.Class.UNIVERSAL,type:We.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:We.Class.UNIVERSAL,type:We.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rkt={name:"RSAPrivateKey",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},ikt={name:"RSAPublicKey",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:We.Class.UNIVERSAL,type:We.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},okt=Zn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:We.Class.UNIVERSAL,type:We.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:We.Class.UNIVERSAL,type:We.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},skt={name:"DigestInfo",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:We.Class.UNIVERSAL,type:We.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:We.Class.UNIVERSAL,type:We.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:We.Class.UNIVERSAL,type:We.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:We.Class.UNIVERSAL,type:We.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},akt=s(function(t){var e;if(t.algorithm in Xr.oids)e=Xr.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var r=We.oidToDer(e).getBytes(),i=We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[]),o=We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[]);o.value.push(We.create(We.Class.UNIVERSAL,We.Type.OID,!1,r)),o.value.push(We.create(We.Class.UNIVERSAL,We.Type.NULL,!1,""));var a=We.create(We.Class.UNIVERSAL,We.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),We.toDer(i).getBytes()},"emsaPkcs1v15encode"),TLe=s(function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(no.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(no.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var r;do r=new no(Zn.util.bytesToHex(Zn.random.getBytes(e.n.bitLength()/8)),16);while(r.compareTo(e.n)>=0||!r.gcd(e.n).equals(no.ONE));t=t.multiply(r.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(r.modInverse(e.n)).mod(e.n),a},"_modPow");Xr.rsa.encrypt=function(t,e,n){var r=n,i,o=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=wLe(t,e,n)):(i=Zn.util.createBuffer(),i.putBytes(t));for(var a=new no(i.toHex(),16),l=TLe(a,e,r),c=l.toString(16),u=Zn.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zn.util.hexToBytes(c)),u.getBytes()};Xr.rsa.decrypt=function(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new no(Zn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=TLe(a,e,n),c=l.toString(16),u=Zn.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Zn.util.hexToBytes(c)),r!==!1?rH(u.getBytes(),e,n):u.getBytes()};Xr.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var r=n.prng||Zn.random,i={nextBytes:s(function(l){for(var c=r.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=n.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new no(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Xr.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new no(null);n.fromInt(30);for(var r=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new no(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(no.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),r=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(ckt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(tkt[r++%8],0):t.pqState===2?t.pqState=t.num.subtract(no.ONE).gcd(t.e).compareTo(no.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(no.ONE),t.q1=t.q.subtract(no.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(no.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Xr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xr.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Xr.rsa.generateKeyPair=function(t,e,n,r){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(r=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(r=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,r=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!Zn.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(r){if(vLe("generateKeyPair"))return Uce.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return r(l);r(null,{privateKey:Xr.privateKeyFromPem(u),publicKey:Xr.publicKeyFromPem(c)})});if(bLe("generateKey")&&bLe("exportKey"))return fp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ILe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return fp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){r(l)}).then(function(l){if(l){var c=Xr.privateKeyFromAsn1(We.fromDer(Zn.util.createBuffer(l)));r(null,{privateKey:c,publicKey:Xr.setRsaPublicKey(c.n,c.e)})}});if(ELe("generateKey")&&ELe("exportKey")){var i=fp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ILe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=fp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Xr.privateKeyFromAsn1(We.fromDer(Zn.util.createBuffer(p)));r(null,{privateKey:m,publicKey:Xr.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){r(d)}},i.onerror=function(l){r(l)};return}}else if(vLe("generateKeyPairSync")){var o=Uce.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Xr.privateKeyFromPem(o.privateKey),publicKey:Xr.publicKeyFromPem(o.publicKey)}}}var a=Xr.rsa.createKeyPairGenerationState(t,e,n);if(!r)return Xr.rsa.stepKeyPairGenerationState(a,0),a.keys;lkt(a,n,r)};Xr.setRsaPublicKey=Xr.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(r,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return wLe(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return Zn.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,n,!0);return Xr.rsa.encrypt(a,n,!0)},n.verify=function(r,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=rH(u,n,!0);var d=We.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!We.validate(d,skt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=We.derToOid(p.algorithmIdentifier);if(!(g===Zn.oids.md2||g===Zn.oids.md5||g===Zn.oids.sha1||g===Zn.oids.sha224||g===Zn.oids.sha256||g===Zn.oids.sha384||g===Zn.oids.sha512||g===Zn.oids["sha512-224"]||g===Zn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===Zn.oids.md2||g===Zn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=rH(u,n,!0),c===u},"verify")});var l=Xr.rsa.decrypt(i,n,!0,!1);return o.verify(r,l,n.n.bitLength())},n};Xr.setRsaPrivateKey=Xr.rsa.setPrivateKey=function(t,e,n,r,i,o,a,l){var c={n:t,e,d:n,p:r,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Xr.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:rH};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return Zn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:akt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Xr.rsa.encrypt(m,c,p)},c};Xr.wrapRsaPrivateKey=function(t){return We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,We.integerToDer(0).getBytes()),We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.OID,!1,We.oidToDer(Xr.oids.rsaEncryption).getBytes()),We.create(We.Class.UNIVERSAL,We.Type.NULL,!1,"")]),We.create(We.Class.UNIVERSAL,We.Type.OCTETSTRING,!1,We.toDer(t).getBytes())])};Xr.privateKeyFromAsn1=function(t){var e={},n=[];if(We.validate(t,nkt,e,n)&&(t=We.fromDer(Zn.util.createBuffer(e.privateKey))),e={},n=[],!We.validate(t,rkt,e,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,o,a,l,c,u,d,p;return i=Zn.util.createBuffer(e.privateKeyModulus).toHex(),o=Zn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Zn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Zn.util.createBuffer(e.privateKeyPrime1).toHex(),c=Zn.util.createBuffer(e.privateKeyPrime2).toHex(),u=Zn.util.createBuffer(e.privateKeyExponent1).toHex(),d=Zn.util.createBuffer(e.privateKeyExponent2).toHex(),p=Zn.util.createBuffer(e.privateKeyCoefficient).toHex(),Xr.setRsaPrivateKey(new no(i,16),new no(o,16),new no(a,16),new no(l,16),new no(c,16),new no(u,16),new no(d,16),new no(p,16))};Xr.privateKeyToAsn1=Xr.privateKeyToRSAPrivateKey=function(t){return We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,We.integerToDer(0).getBytes()),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.n)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.e)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.d)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.p)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.q)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.dP)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.dQ)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.qInv))])};Xr.publicKeyFromAsn1=function(t){var e={},n=[];if(We.validate(t,okt,e,n)){var r=We.derToOid(e.publicKeyOid);if(r!==Xr.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}t=e.rsaPublicKey}if(n=[],!We.validate(t,ikt,e,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var o=Zn.util.createBuffer(e.publicKeyModulus).toHex(),a=Zn.util.createBuffer(e.publicKeyExponent).toHex();return Xr.setRsaPublicKey(new no(o,16),new no(a,16))};Xr.publicKeyToAsn1=Xr.publicKeyToSubjectPublicKeyInfo=function(t){return We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.OID,!1,We.oidToDer(Xr.oids.rsaEncryption).getBytes()),We.create(We.Class.UNIVERSAL,We.Type.NULL,!1,"")]),We.create(We.Class.UNIVERSAL,We.Type.BITSTRING,!1,[Xr.publicKeyToRSAPublicKey(t)])])};Xr.publicKeyToRSAPublicKey=function(t){return We.create(We.Class.UNIVERSAL,We.Type.SEQUENCE,!0,[We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.n)),We.create(We.Class.UNIVERSAL,We.Type.INTEGER,!1,tA(t.e))])};function wLe(t,e,n){var r=Zn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}r.putByte(0),r.putByte(n);var a=i-3-t.length,l;if(n===0||n===1){l=n===0?0:255;for(var c=0;c<a;++c)r.putByte(l)}else for(;a>0;){for(var u=0,d=Zn.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:r.putByte(l);a=u}return r.putByte(0),r.putBytes(t),r}s(wLe,"_encodePkcs1_v1_5");function rH(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8),o=Zn.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||n&&l!==0&&l!==1||!n&&l!=2||n&&l===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-r;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(rH,"_decodePkcs1_v1_5");function lkt(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var r={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(r.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return n(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){Zn.prime.generateProbablePrime(l,r,c)}s(o,"getPrime");function a(l,c){if(l)return n(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(no.ONE).gcd(t.e).compareTo(no.ONE)!==0){t.p=null,i();return}if(t.q.subtract(no.ONE).gcd(t.e).compareTo(no.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(no.ONE),t.q1=t.q.subtract(no.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(no.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Xr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xr.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}s(a,"finish")}s(lkt,"_generateKeyPair");function tA(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=Zn.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)===0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}s(tA,"_bnToBytes");function ckt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(ckt,"_getMillerRabinTests");function vLe(t){return Zn.util.isNodejs&&typeof Uce[t]=="function"}s(vLe,"_detectNodeCrypto");function bLe(t){return typeof fp.globalScope<"u"&&typeof fp.globalScope.crypto=="object"&&typeof fp.globalScope.crypto.subtle=="object"&&typeof fp.globalScope.crypto.subtle[t]=="function"}s(bLe,"_detectSubtleCrypto");function ELe(t){return typeof fp.globalScope<"u"&&typeof fp.globalScope.msCrypto=="object"&&typeof fp.globalScope.msCrypto.subtle=="object"&&typeof fp.globalScope.msCrypto.subtle[t]=="function"}s(ELe,"_detectSubtleMsCrypto");function ILe(t){for(var e=Zn.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}s(ILe,"_intToUint8Array")});var qce=W((ktr,DLe)=>{f();var dn=di();Vv();zm();HP();zg();$v();XG();J2();up();Dce();$P();uo();typeof SLe>"u"&&(SLe=dn.jsbn.BigInteger);var SLe,at=dn.asn1,oi=dn.pki=dn.pki||{};DLe.exports=oi.pbe=dn.pbe=dn.pbe||{};var eT=oi.oids,ukt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},dkt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},fkt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};oi.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=dn.random.getBytesSync(n.saltSize),i=n.count,o=at.integerToDer(i),a,l,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,d,p;switch(n.algorithm){case"aes128":a=16,u=16,d=eT["aes128-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=eT["aes192-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=eT["aes256-CBC"],p=dn.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=eT.desCBC,p=dn.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var h="hmacWith"+n.prfAlgorithm.toUpperCase(),g=BLe(h),y=dn.pkcs5.pbkdf2(e,r,i,a,g),v=dn.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=pkt(r,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(eT.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(eT.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(n.algorithm==="3des"){a=24;var _=new dn.util.ByteBuffer(r),y=oi.pbe.generatePkcs12Key(e,_,1,i,a),v=oi.pbe.generatePkcs12Key(e,_,2,i,a),b=dn.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(eT["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,r),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};oi.decryptPrivateKeyInfo=function(t,e){var n=null,r={},i=[];if(!at.validate(t,ukt,r,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(r.encryptionOid),l=oi.pbe.getCipher(a,r.encryptionParams,e),c=dn.util.createBuffer(r.encryptedData);return l.update(c),l.finish()&&(n=at.fromDer(l.output)),n};oi.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return dn.pem.encode(n,{maxline:e})};oi.encryptedPrivateKeyFromPem=function(t){var e=dn.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};oi.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var r=oi.wrapRsaPrivateKey(oi.privateKeyToAsn1(t));return r=oi.encryptPrivateKeyInfo(r,e,n),oi.encryptedPrivateKeyToPem(r)}var i,o,a,l;switch(n.algorithm){case"aes128":i="AES-128-CBC",a=16,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var u=dn.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(oi.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:dn.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return dn.pem.encode(p)};oi.decryptRsaPrivateKey=function(t,e){var n=null,r=dn.pem.decode(t)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var o,a;switch(r.dekInfo.algorithm){case"DES-CBC":o=8,a=dn.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=dn.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=dn.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=dn.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=dn.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return dn.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return dn.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return dn.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var l=dn.util.hexToBytes(r.dekInfo.parameters),c=dn.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(dn.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=oi.decryptPrivateKeyInfo(at.fromDer(n),e):n=at.fromDer(n),n!==null&&(n=oi.privateKeyFromAsn1(n)),n};oi.pbe.generatePkcs12Key=function(t,e,n,r,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in dn.md))throw new Error('"sha1" hash algorithm unavailable.');o=dn.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new dn.util.ByteBuffer,p=new dn.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new dn.util.ByteBuffer;g.fillWithByte(n,u);var y=u*Math.ceil(h/u),v=new dn.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new dn.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),B=1;B<=k;B++){var N=new dn.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var U=0;U<r;U++)o.start(),o.update(N.getBytes()),N=o.digest();var re=new dn.util.ByteBuffer;for(l=0;l<u;l++)re.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),ae=new dn.util.ByteBuffer;for(a=0;a<me;a++){var H=new dn.util.ByteBuffer(_.getBytes(u)),G=511;for(l=re.length()-1;l>=0;l--)G=G>>8,G+=re.at(l)+H.at(l),H.setAt(l,G&255);ae.putBuffer(H)}_=ae,d.putBuffer(N)}return d.truncate(d.length()-i),d};oi.pbe.getCipher=function(t,e,n){switch(t){case oi.oids.pkcs5PBES2:return oi.pbe.getCipherForPBES2(t,e,n);case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:return oi.pbe.getCipherForPKCS12PBE(t,e,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};oi.pbe.getCipherForPBES2=function(t,e,n){var r={},i=[];if(!at.validate(e,dkt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(r.kdfOid),t!==oi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(r.encOid),t!==oi.oids["aes128-CBC"]&&t!==oi.oids["aes192-CBC"]&&t!==oi.oids["aes256-CBC"]&&t!==oi.oids["des-EDE3-CBC"]&&t!==oi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=r.kdfSalt,l=dn.util.createBuffer(r.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(oi.oids[t]){case"aes128-CBC":c=16,u=dn.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=dn.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=dn.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=dn.des.createDecryptionCipher;break;case"desCBC":c=8,u=dn.des.createDecryptionCipher;break}var d=kLe(r.prfOid),p=dn.pkcs5.pbkdf2(n,a,l,c,d),m=r.encIv,h=u(p);return h.start(m),h};oi.pbe.getCipherForPKCS12PBE=function(t,e,n){var r={},i=[];if(!at.validate(e,fkt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=dn.util.createBuffer(r.salt),l=dn.util.createBuffer(r.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=dn.des.startDecrypting;break;case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=dn.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=kLe(r.prfOid),m=oi.pbe.generatePkcs12Key(n,a,1,l,c,p);p.start();var h=oi.pbe.generatePkcs12Key(n,a,2,l,u,p);return d(m,h)};oi.pbe.opensslDeriveBytes=function(t,e,n,r){if(typeof r>"u"||r===null){if(!("md5"in dn.md))throw new Error('"md5" hash algorithm unavailable.');r=dn.md.md5.create()}e===null&&(e="");for(var i=[RLe(r,t+e)],o=16,a=1;o<n;++a,o+=16)i.push(RLe(r,i[a-1]+t+e));return i.join("").substr(0,n)};function RLe(t,e){return t.start().update(e).digest().getBytes()}s(RLe,"hash");function kLe(t){var e;if(!t)e="hmacWithSHA1";else if(e=oi.oids[at.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return BLe(e)}s(kLe,"prfOidToMessageDigest");function BLe(t){var e=dn.md;switch(t){case"hmacWithSHA224":e=dn.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(BLe,"prfAlgorithmToMessageDigest");function pkt(t,e,n,r){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,dn.util.hexToBytes(n.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(oi.oids[r]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(pkt,"createPbkdf2Params")});var Wce=W((Ptr,LLe)=>{f();var tR=di();zm();uo();var sn=tR.asn1,nR=LLe.exports=tR.pkcs7asn1=tR.pkcs7asn1||{};tR.pkcs7=tR.pkcs7||{};tR.pkcs7.asn1=nR;var PLe={name:"ContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};nR.contentInfoValidator=PLe;var NLe={name:"EncryptedContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};nR.envelopedDataValidator={name:"EnvelopedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(NLe)};nR.encryptedDataValidator={name:"EncryptedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"}].concat(NLe)};var mkt={name:"SignerInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};nR.signedDataValidator={name:"SignedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},PLe,{name:"SignedData.Certificates",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,capture:"signerInfos",optional:!0,value:[mkt]}]};nR.recipientInfoValidator={name:"RecipientInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Gce=W((Ltr,FLe)=>{f();var tT=di();uo();tT.mgf=tT.mgf||{};var hkt=FLe.exports=tT.mgf.mgf1=tT.mgf1=tT.mgf1||{};hkt.create=function(t){var e={generate:s(function(n,r){for(var i=new tT.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;a<o;a++){var l=new tT.util.ByteBuffer;l.putInt32(a),t.start(),t.update(n+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()},"generate")};return e}});var QLe=W((Qtr,MLe)=>{f();var iH=di();Gce();MLe.exports=iH.mgf=iH.mgf||{};iH.mgf.mgf1=iH.mgf1});var oH=W((Utr,OLe)=>{f();var nT=di();up();uo();var gkt=OLe.exports=nT.pss=nT.pss||{};gkt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,n=t.mgf,r=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=nT.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||nT.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<r+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new nT.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new nT.util.ByteBuffer;b.fillWithByte(0,m-o-r-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-r-1,k=n.generate(v,_),B="";for(d=0;d<_;d++)B+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~N)+B.substr(1),B+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<r+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-r-1,y=u.substr(0,g),v=u.substr(g,r),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=n.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-r-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=_.substr(-o),N=new nT.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(B),e.start(),e.update(N.getBytes());var U=e.digest().getBytes();return v===U},l}});var lH=W((Wtr,HLe)=>{f();var er=di();Vv();zm();HP();zg();QLe();$v();J2();oH();$P();uo();var j=er.asn1,Wt=HLe.exports=er.pki=er.pki||{},ro=Wt.oids,fa={};fa.CN=ro.commonName;fa.commonName="CN";fa.C=ro.countryName;fa.countryName="C";fa.L=ro.localityName;fa.localityName="L";fa.ST=ro.stateOrProvinceName;fa.stateOrProvinceName="ST";fa.O=ro.organizationName;fa.organizationName="O";fa.OU=ro.organizationalUnitName;fa.organizationalUnitName="OU";fa.E=ro.emailAddress;fa.emailAddress="E";var qLe=er.pki.rsa.publicKeyValidator,Akt={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},qLe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},ykt={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Ckt={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},qLe,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},xkt={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Ckt,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var n=[],r,i,o,a=0;a<t.value.length;++a){r=t.value[a];for(var l=0;l<r.value.length;++l)o={},i=r.value[l],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in ro&&(o.name=ro[o.type],o.name in fa&&(o.shortName=fa[o.name])),e&&(e.update(o.type),e.update(o.value)),n.push(o)}return n};Wt.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],i=j.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in ro&&(l.name=ro[l.type],l.name in fa&&(l.shortName=fa[l.name])),l.type===ro.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Kv(t,e){typeof e=="string"&&(e={shortName:e});for(var n=null,r,i=0;n===null&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s(Kv,"_getAttribute");var sH=s(function(t,e,n){var r={};if(t!==ro["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:ro.sha1},mgf:{algorithmOid:ro.mgf1,hash:{algorithmOid:ro.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,ykt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=j.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},"_readSignatureParameters"),aH=s(function(t){switch(ro[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return er.md.sha1.create();case"md5WithRSAEncryption":return er.md.md5.create();case"sha256WithRSAEncryption":return er.md.sha256.create();case"sha384WithRSAEncryption":return er.md.sha384.create();case"sha512WithRSAEncryption":return er.md.sha512.create();case"RSASSA-PSS":return er.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),WLe=s(function(t){var e=t.certificate,n;switch(e.signatureOid){case ro.sha1WithRSAEncryption:case ro.sha1WithRSASignature:break;case ro["RSASSA-PSS"]:var r,i;if(r=ro[e.signatureParameters.mgf.hash.algorithmOid],r===void 0||er.md[r]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=r,o}if(i=ro[e.signatureParameters.mgf.algorithmOid],i===void 0||er.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=er.mgf[i].create(er.md[r].create()),r=ro[e.signatureParameters.hash.algorithmOid],r===void 0||er.md[r]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=r,o}n=er.pss.create(er.md[r].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,n)},"_verifySignature");Wt.certificateFromPem=function(t,e,n){var r=er.pem.decode(t)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:j.toDer(Wt.certificateToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=er.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=j.fromDer(e.body);return Wt.publicKeyFromAsn1(r)};Wt.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:j.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||er.md.sha1.create(),r=e.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(i);var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,n){var r=er.pem.decode(t)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:j.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return er.pem.encode(n,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Kv(t.issuer,e)},t.issuer.addField=function(e){pp([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Kv(t.subject,e)},t.subject.addField=function(e){pp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){pp(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){pp(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)GLe(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var n=null,r,i=0;n===null&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,n){t.md=n||er.md.sha1.create();var r=ro[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.tbsCertificate=Wt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var r=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=r.attributes,o}var a=e.md;if(a===null){a=aH({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=j.toDer(l);a.update(c.getBytes())}return a!==null&&(n=WLe({certificate:t,md:a,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,r=t.issuer,i=e.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var o,a,l=0;n&&l<r.attributes.length;++l)o=r.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=ro.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var r=t.extensions[n];if(r.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return er.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,Akt,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=er.util.createBuffer(n.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=er.asn1.derToOid(n.certSignatureOid),a.signatureParameters=sH(a.signatureOid,n.certSignatureParams,!0),a.siginfo.algorithmOid=er.asn1.derToOid(n.certinfoSignatureOid),a.siginfo.parameters=sH(a.siginfo.algorithmOid,n.certinfoSignatureParams,!1),a.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=n.tbsCertificate,e){a.md=aH({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=er.md.sha1.create(),p=j.toDer(n.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Kv(a.issuer,g)},a.issuer.addField=function(g){pp([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(a.issuer.uniqueId=n.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=er.md.sha1.create(),h=j.toDer(n.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Kv(a.subject,g)},a.subject.addField=function(g){pp([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(a.subject.uniqueId=n.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),n.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(n.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var r=t.value[n],i=0;i<r.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(r.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in ro){if(e.name=ro[e.id],e.name==="keyUsage"){var n=j.fromDer(e.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),e.digitalSignature=(r&128)===128,e.nonRepudiation=(r&64)===64,e.keyEncipherment=(r&32)===32,e.dataEncipherment=(r&16)===16,e.keyAgreement=(r&8)===8,e.keyCertSign=(r&4)===4,e.cRLSign=(r&2)===2,e.encipherOnly=(r&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var n=j.fromDer(e.value);n.value.length>0&&n.value[0].type===j.Type.BOOLEAN?e.cA=n.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;n.value.length>0&&n.value[0].type===j.Type.INTEGER?o=n.value[0].value:n.value.length>1&&(o=n.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var n=j.fromDer(e.value),a=0;a<n.value.length;++a){var l=j.derToOid(n.value[a].value);l in ro?e[ro[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var n=j.fromDer(e.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),e.client=(r&128)===128,e.server=(r&64)===64,e.email=(r&32)===32,e.objsign=(r&16)===16,e.reserved=(r&8)===8,e.sslCA=(r&4)===4,e.emailCA=(r&2)===2,e.objCA=(r&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,n=j.fromDer(e.value),u=0;u<n.value.length;++u){c=n.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=er.util.bytesToIP(c.value);break;case 8:d.oid=j.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var n=j.fromDer(e.value);e.subjectKeyIdentifier=er.util.bytesToHex(n.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,xkt,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,a.signatureOid=er.asn1.derToOid(n.csrSignatureOid),a.signatureParameters=sH(a.signatureOid,n.csrSignatureParams,!0),a.siginfo.algorithmOid=er.asn1.derToOid(n.csrSignatureOid),a.siginfo.parameters=sH(a.siginfo.algorithmOid,n.csrSignatureParams,!1),a.signature=n.csrSignature,a.certificationRequestInfo=n.certificationRequestInfo,e){a.md=aH({signatureOid:a.signatureOid,type:"certification request"});var l=j.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=er.md.sha1.create();return a.subject.getField=function(u){return Kv(a.subject,u)},a.subject.addField=function(u){pp([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a.getAttribute=function(u){return Kv(a,u)},a.addAttribute=function(u){pp([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Kv(t.subject,e)},t.subject.addField=function(e){pp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Kv(t,e)},t.addAttribute=function(e){pp([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){pp(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){pp(e),t.attributes=e},t.sign=function(e,n){t.md=n||er.md.sha1.create();var r=ro[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(n===null){n=aH({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=j.toDer(r);n.update(i.getBytes())}return n!==null&&(e=WLe({certificate:t,md:n,signature:t.signature})),e},t};function rR(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),n,r,i=t.attributes,o=0;o<i.length;++o){n=i[o];var a=n.value,l=j.Type.PRINTABLESTRING;"valueTagClass"in n&&(l=n.valueTagClass,l===j.Type.UTF8&&(a=er.util.encodeUtf8(a))),r=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(n.type).getBytes()),j.create(j.Class.UNIVERSAL,l,!1,a)])]),e.value.push(r)}return e}s(rR,"_dnToAsn1");function pp(t){for(var e,n=0;n<t.length;++n){if(e=t[n],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in fa&&(e.name=Wt.oids[fa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=e,r}if(typeof e.shortName>"u"&&e.name&&e.name in fa&&(e.shortName=fa[e.name]),e.type===ro.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(GLe(e.extensions[i])))}if(typeof e.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=e,r}}}s(pp,"_fillMissingFields");function GLe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var n=new Error("Extension ID not specified.");throw n.extension=t,n}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var r=0,i=0,o=0;t.digitalSignature&&(i|=128,r=7),t.nonRepudiation&&(i|=64,r=6),t.keyEncipherment&&(i|=32,r=5),t.dataEncipherment&&(i|=16,r=4),t.keyAgreement&&(i|=8,r=3),t.keyCertSign&&(i|=4,r=2),t.cRLSign&&(i|=2,r=1),t.encipherOnly&&(i|=1,r=0),t.decipherOnly&&(o|=128,r=7);var a=String.fromCharCode(r);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in ro?l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(ro[c]).getBytes())):c.indexOf(".")!==-1&&l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var r=0,i=0;t.client&&(i|=128,r=7),t.server&&(i|=64,r=6),t.email&&(i|=32,r=5),t.objsign&&(i|=16,r=4),t.reserved&&(i|=8,r=3),t.sslCA&&(i|=4,r=2),t.emailCA&&(i|=2,r=1),t.objCA&&(i|=1,r=0);var a=String.fromCharCode(r);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=er.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[rR(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=er.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),v=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=er.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));v.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=t,n}return t}s(GLe,"_fillMissingExtensionFields");function Hce(t,e){switch(t){case ro["RSASSA-PSS"]:var n=[];return e.hash.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,n);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(Hce,"_signatureParametersToAsn1");function vkt(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var n=t.attributes,r=0;r<n.length;++r){var i=n[r],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=er.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(vkt,"_CRIAttributesToAsn1");var bkt=new Date("1950-01-01T00:00:00Z"),Ekt=new Date("2050-01-01T00:00:00Z");function ULe(t){return t>=bkt&&t<Ekt?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(ULe,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=ULe(t.validity.notBefore),n=ULe(t.validity.notAfter),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,er.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),Hce(t.siginfo.algorithmOid,t.siginfo.parameters)]),rR(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,n]),rR(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&r.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),r};Wt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),rR(t.subject),Wt.publicKeyToAsn1(t.publicKey),vkt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return rR(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),Hce(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(n);for(var r=0;r<t.length;++r)n.value.push(Wt.certificateExtensionToAsn1(t[r]));return e};Wt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var n=t.value;return typeof t.value!="string"&&(n=j.toDer(n).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,n)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),Hce(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=n(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=er.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];er.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=er.pki.certificateFromPem(a));var l=n(a.subject);if(!l)return!1;er.util.isArray(l)||(l=[l]);for(var c=j.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=j.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!er.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=er.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))return null;var c=n(a.subject);if(!er.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=j.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=j.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function n(a){return r(a),e.certs[a.hash]||null}s(n,"getBySubject");function r(a){if(!a.hash){var l=er.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(rR(a),l),a.hash=l.digest().toHex()}}if(s(r,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,n){typeof n=="function"&&(n={verify:n}),n=n||{},e=e.slice(0);var r=e.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;er.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=n.verify?n.verify(_,l,r):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!er.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var Vce=W((jtr,VLe)=>{f();var is=di();zm();K4();$v();Wce();qce();up();$P();eR();uo();lH();var Ie=is.asn1,_i=is.pki,YP=VLe.exports=is.pkcs12=is.pkcs12||{},jLe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},Ikt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},jLe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Tkt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},wkt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},_kt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function zP(t,e,n,r){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(r!==void 0&&l.type!==r)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(n)>=0&&i.push(l)}}return i}s(zP,"_getBagsByAttribute");YP.pkcs12FromAsn1=function(t,e,n){typeof e=="string"?(n=e,e=!0):e===void 0&&(e=!0);var r={},i=[];if(!Ie.validate(t,Ikt,r,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:r.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=is.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=zP(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=zP(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=zP(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return zP(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return zP(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(r.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=r.version.charCodeAt(0),o}if(Ie.derToOid(r.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(r.contentType),o}var l=r.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=jce(l),r.mac){var c=null,u=0,d=Ie.derToOid(r.macAlgorithm);switch(d){case _i.oids.sha1:c=is.md.sha1.create(),u=20;break;case _i.oids.sha256:c=is.md.sha256.create(),u=32;break;case _i.oids.sha384:c=is.md.sha384.create(),u=48;break;case _i.oids.sha512:c=is.md.sha512.create(),u=64;break;case _i.oids.md5:c=is.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new is.util.ByteBuffer(r.macSalt),m="macIterations"in r?parseInt(is.util.bytesToHex(r.macIterations),16):1,h=YP.generateKey(n,p,3,m,u,c),g=is.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return Skt(a,l.value,e,n),a};function jce(t){if(t.composed||t.constructed){for(var e=is.util.createBuffer(),n=0;n<t.value.length;++n)e.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(jce,"_decodePkcs7Data");function Skt(t,e,n,r){if(e=Ie.fromDer(e,n),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,jLe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=jce(p).value;break;case _i.oids.encryptedData:d=Rkt(p,r),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=kkt(d,n,r),t.safeContents.push(u)}}s(Skt,"_decodeAuthenticatedSafe");function Rkt(t,e){var n={},r=[];if(!Ie.validate(t,is.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var o=Ie.derToOid(n.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(n.encAlgorithm);var a=_i.pbe.getCipher(o,n.encParameter,e),l=jce(n.encryptedContentAsn1),c=is.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(Rkt,"_decryptSafeContents");function kkt(t,e,n){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,Tkt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:Bkt(a.bagAttributes)};r.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,n),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=_kt,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return r}s(kkt,"_decodeSafeContents");function Bkt(t){var e={};if(t!==void 0)for(var n=0;n<t.length;++n){var r={},i=[];if(!Ie.validate(t[n],wkt,r,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(r.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<r.values.length;++l)e[_i.oids[a]].push(r.values[l].value)}}return e}s(Bkt,"_decodeBagAttributes");YP.toPkcs12Asn1=function(t,e,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,o;if(i!==null)i=is.util.hexToBytes(i);else if(r.generateLocalKeyId)if(e){var a=is.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=is.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=is.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(is.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));n===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,n,r)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),B=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(B)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),U;if(r.useMac){var l=is.md.sha1.create(),re=new is.util.ByteBuffer(is.random.getBytes(r.saltSize)),me=r.count,t=YP.generateKey(n,re,3,me,20),ae=is.hmac.create();ae.start(l,t),ae.update(Ie.toDer(N).getBytes());var H=ae.getMac();U=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,re.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),U])};YP.generateKey=is.pbe.generatePkcs12Key});var zce=W((ztr,$Le)=>{f();var Jv=di();zm();$v();qce();J2();XG();Vce();oH();$P();uo();lH();var $ce=Jv.asn1,iR=$Le.exports=Jv.pki=Jv.pki||{};iR.pemToDer=function(t){var e=Jv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Jv.util.createBuffer(e.body)};iR.privateKeyFromPem=function(t){var e=Jv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=$ce.fromDer(e.body);return iR.privateKeyFromAsn1(r)};iR.privateKeyToPem=function(t,e){var n={type:"RSA PRIVATE KEY",body:$ce.toDer(iR.privateKeyToAsn1(t)).getBytes()};return Jv.pem.encode(n,{maxline:e})};iR.privateKeyInfoToPem=function(t,e){var n={type:"PRIVATE KEY",body:$ce.toDer(t).getBytes()};return Jv.pem.encode(n,{maxline:e})}});var eue=W((Ktr,tFe)=>{f();var xt=di();zm();K4();zG();J2();zce();up();eR();uo();var fH=s(function(t,e,n,r){var i=xt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=xt.util.createBuffer(),d=xt.hmac.create();n=e+n;var p=Math.ceil(r/16),m=Math.ceil(r/20);d.start("MD5",l);var h=xt.util.createBuffer();u.putBytes(n);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),h.putBuffer(d.digest());d.start("SHA1",c);var y=xt.util.createBuffer();u.clear(),u.putBytes(n);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),y.putBuffer(d.digest());return i.putBytes(xt.util.xorBytes(h.getBytes(),y.getBytes(),r)),i},"prf_TLS1"),Dkt=s(function(t,e,n){var r=xt.hmac.create();r.start("SHA1",t);var i=xt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},"hmac_sha1"),Pkt=s(function(t,e,n){var r=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"deflate"),Nkt=s(function(t,e,n){var r=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"inflate"),M0=s(function(t,e){var n=0;switch(e){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32();break}return xt.util.createBuffer(t.getBytes(n))},"readVector"),mp=s(function(t,e,n){t.putInt(n.length(),e<<3),t.putBuffer(n)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var n in z.CipherSuites){var r=z.CipherSuites[n];if(r.id[0]===t.charCodeAt(0)&&r.id[1]===t.charCodeAt(1)){e=r;break}}return e};z.handleUnexpected=function(t,e){var n=!t.open&&t.entity===z.ConnectionEnd.client;n||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,n){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,n){var r=null,i=t.entity===z.ConnectionEnd.client;if(n<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:xt.util.createBuffer(o.getBytes(32)),session_id:M0(o,1),extensions:[]},i?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=M0(o,2),r.compression_methods=M0(o,1)),a=n-(a-o.length()),a>0){for(var l=M0(o,2);l.length()>0;)r.extensions.push({type:[l.getByte(),l.getByte()],data:M0(l,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var u=r.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=M0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(M0(d,2).getBytes())}}}if(t.session.version&&(r.version.major!==t.session.version.major||r.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(r.cipher_suite);else for(var m=xt.util.createBuffer(r.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:xt.util.bytesToHex(r.cipher_suite)});i?t.session.compressionMethod=r.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return r};z.createSecurityParameters=function(t,e){var n=t.entity===z.ConnectionEnd.client,r=e.random.bytes(),i=n?t.session.sp.client_random:r,o=n?r:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){if(r.version.minor<=t.version.minor)t.version.minor=r.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=r.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=KLe,t.session.resuming=!0,t.session.sp.server_random=r.random.bytes()):(t.expect=Fkt,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){var i=r.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,i="")),i.length===0&&(i=xt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=r.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=r.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Xce,t.session.resuming=!0,t.session.sp.client_random=r.random.bytes()):(t.expect=t.verifyClient!==!1?Gkt:Jce,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_list:M0(r,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=M0(i.certificate_list,3),a=xt.asn1.fromDer(o),o=xt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?zLe:Jce:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?zLe:Jce)),t.process()};z.handleServerKeyExchange=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=Mkt,t.process()};z.handleClientKeyExchange=function(t,e,n){if(n<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var r=e.fragment,i={enc_pre_master_secret:M0(r,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=xt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=xt.random.getBytes(48)}t.expect=Xce,t.session.clientCertificate!==null&&(t.expect=Hkt),t.process()};z.handleCertificateRequest=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_types:M0(r,1),certificate_authorities:M0(r,2)};t.session.certificateRequest=i,t.expect=Qkt,t.process()};z.handleCertificateVerify=function(t,e,n){if(n<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o={signature:M0(r,2).getBytes()},a=xt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=Xce,t.process()};z.handleServerHelloDone=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,r.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!xt.util.isArray(o)?(o.message&&(r.message=o.message),o.alert&&(r.alert.description=o.alert)):typeof o=="number"&&(r.alert.description=o)),t.error(t,r)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=qkt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=KLe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=t.entity===z.ConnectionEnd.client;(t.session.resuming&&n||!t.session.resuming&&!n)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&n||t.session.resuming&&!n)&&(t.state.pending=null),t.expect=n?Okt:jkt,t.process()};z.handleFinished=function(t,e,n){var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o=e.fragment.getBytes();r=xt.util.createBuffer(),r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=fH;if(r=d(c.master_secret,l,r.getBytes(),u),r.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?Ukt:Vkt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var n=e.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:r}),t.process()};z.handleHandshake=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return t.fragmented=e,e.fragment=xt.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var o=n.bytes(i+4);n.read+=4,r in dH[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:xt.md.md5.create(),sha1:xt.md.sha1.create()}),r!==z.HandshakeType.hello_request&&r!==z.HandshakeType.certificate_verify&&r!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),dH[t.entity][t.expect][r](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt16(),o=n.getBytes(i);if(r===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(r===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,xt.util.createBuffer(o))}t.process()};var Lkt=0,Fkt=1,zLe=2,Mkt=3,Qkt=4,KLe=5,Okt=6,Ukt=7,qkt=8,Wkt=0,Gkt=1,Jce=2,Hkt=3,Xce=4,jkt=5,Vkt=6,V=z.handleUnexpected,JLe=z.handleChangeCipherSpec,xc=z.handleAlert,Wu=z.handleHandshake,XLe=z.handleApplicationData,vc=z.handleHeartbeat,Zce=[];Zce[z.ConnectionEnd.client]=[[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[JLe,xc,V,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,XLe,vc],[V,xc,Wu,V,vc]];Zce[z.ConnectionEnd.server]=[[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,V,vc],[JLe,xc,V,V,vc],[V,xc,Wu,V,vc],[V,xc,Wu,XLe,vc],[V,xc,Wu,V,vc]];var Xv=z.handleHelloRequest,$kt=z.handleServerHello,ZLe=z.handleCertificate,YLe=z.handleServerKeyExchange,Yce=z.handleCertificateRequest,cH=z.handleServerHelloDone,eFe=z.handleFinished,dH=[];dH[z.ConnectionEnd.client]=[[V,V,$kt,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,ZLe,YLe,Yce,cH,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,YLe,Yce,cH,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,Yce,cH,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,V,cH,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,eFe],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[Xv,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V]];var zkt=z.handleClientHello,Ykt=z.handleClientKeyExchange,Kkt=z.handleCertificateVerify;dH[z.ConnectionEnd.server]=[[V,zkt,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,ZLe,V,V,V,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Ykt,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,Kkt,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,eFe],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V],[V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V,V]];z.generateKeys=function(t,e){var n=fH,r=e.client_random+e.server_random;t.session.resuming||(e.master_secret=n(e.pre_master_secret,"master secret",r,48).bytes(),e.pre_master_secret=null),r=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=n(e.master_secret,"key expansion",r,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,n=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),r={read:n(),write:n()};if(r.read.update=function(o,a){return r.read.cipherFunction(a,r.read)?r.read.compressFunction(o,a,r.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},r.write.update=function(o,a){return r.write.compressFunction(o,a,r.write)?r.write.cipherFunction(a,r.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),r.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(r,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:r.read.compressFunction=Nkt,r.write.compressFunction=Pkt;break;default:throw new Error("Unsupported compression algorithm.")}}return r};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,n=xt.util.createBuffer();return n.putInt32(e),n.putBytes(xt.random.getBytes(28)),n};z.createRecord=function(t,e){if(!e.data)return null;var n={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return n};z.createAlert=function(t,e){var n=xt.util.createBuffer();return n.putByte(e.level),n.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:n})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=xt.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var r=t.cipherSuites[n];e.putByte(r.id[0]),e.putByte(r.id[1])}var i=e.length(),o=xt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=xt.util.createBuffer();if(t.virtualHost){var c=xt.util.createBuffer();c.putByte(0),c.putByte(0);var u=xt.util.createBuffer();u.putByte(0),mp(u,2,xt.util.createBuffer(t.virtualHost));var d=xt.util.createBuffer();mp(d,2,u),mp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=xt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),mp(g,1,xt.util.createBuffer(m)),mp(g,2,e),mp(g,1,o),p>0&&mp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,n=e.length+1+2+4+28+2+1,r=xt.util.createBuffer();return r.putByte(z.HandshakeType.server_hello),r.putInt24(n),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),mp(r,1,xt.util.createBuffer(e)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,n=null;if(t.getCertificate){var r;e?r=t.session.certificateRequest:r=t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,r)}var i=xt.util.createBuffer();if(n!==null)try{xt.util.isArray(n)||(n=[n]);for(var o=null,a=0;a<n.length;++a){var l=xt.pem.decode(n[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=xt.util.createBuffer(l.body);o===null&&(o=xt.asn1.fromDer(u.bytes(),!1));var d=xt.util.createBuffer();mp(d,3,u),i.putBuffer(d)}n=xt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=xt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),mp(m,3,i),m};z.createClientKeyExchange=function(t){var e=xt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(xt.random.getBytes(46));var n=t.session.sp;n.pre_master_secret=e.getBytes();var r=t.session.serverCertificate.publicKey;e=r.encrypt(n.pre_master_secret);var i=e.length+2,o=xt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,n=xt.util.createBuffer();return e>0&&(n.putByte(z.HandshakeType.server_key_exchange),n.putInt24(e)),n};z.getClientSignature=function(t,e){var n=xt.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(r,i,o){var a=null;if(r.getPrivateKey)try{a=r.getPrivateKey(r,r.session.clientCertificate),a=xt.pki.privateKeyFromPem(a)}catch(l){r.error(r,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(r,i)},t.getSignature(t,n,e)};z.createCertificateVerify=function(t,e){var n=e.length+2,r=xt.util.createBuffer();return r.putByte(z.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(e.length),r.putBytes(e),r};z.createCertificateRequest=function(t){var e=xt.util.createBuffer();e.putByte(1);var n=xt.util.createBuffer();for(var r in t.caStore.certs){var i=t.caStore.certs[r],o=xt.pki.distinguishedNameToAsn1(i.subject),a=xt.asn1.toDer(o);n.putInt16(a.length()),n.putBuffer(a)}var l=1+e.length()+2+n.length(),c=xt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),mp(c,1,e),mp(c,2,n),c};z.createServerHelloDone=function(t){var e=xt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=xt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=xt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var n=t.entity===z.ConnectionEnd.client,r=t.session.sp,i=12,o=fH,a=n?"client finished":"server finished";e=o(r.master_secret,a,e.getBytes(),i);var l=xt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,n){typeof n>"u"&&(n=e.length);var r=xt.util.createBuffer();r.putByte(t),r.putInt16(n),r.putBytes(e);var i=r.length(),o=Math.max(16,i-n-3);return r.putBytes(xt.random.getBytes(o)),r};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var n=e.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n),n=null}var r;if(e.fragment.length()<=z.MaxFragment)r=[e];else{r=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)r.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&r.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i)}))}for(var o=0;o<r.length&&!t.fail;++o){var a=r[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var n=t.records[e];t.tlsData.putByte(n.type),t.tlsData.putByte(n.version.major),t.tlsData.putByte(n.version.minor),t.tlsData.putInt16(n.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Kce=s(function(t){switch(t){case!0:return!0;case xt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case xt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case xt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case xt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case xt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case xt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Jkt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return xt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return xt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return xt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return xt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return xt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return xt.pki.certificateError.unknown_ca;default:return xt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var n={};for(var r in t.verifyOptions)n[r]=t.verifyOptions[r];n.verify=function(o,a,l){var c=Kce(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!xt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=Jkt(u))}return u},xt.pki.verifyCertificateChain(t.caStore,e,n)}catch(o){var i=o;(typeof i!="object"||xt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:Kce(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:Kce(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{n={},n.cache=t||{},n.capacity=Math.max(e||100,1),n.order=[];for(var r in t)n.order.length<=e?n.order.push(r):delete t[r];n.getSession=function(i){var o=null,a=null;if(i?a=xt.util.bytesToHex(i):n.order.length>0&&(a=n.order[0]),a!==null&&a in n.cache){o=n.cache[a],delete n.cache[a];for(var l in n.order)if(n.order[l]===a){n.order.splice(l,1);break}}return o},n.setSession=function(i,o){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}var a=xt.util.bytesToHex(i);n.order.push(a),n.cache[a]=o}}return n};z.createConnection=function(t){var e=null;t.caStore?xt.util.isArray(t.caStore)?e=xt.pki.createCaStore(t.caStore):e=t.caStore:e=xt.pki.createCaStore();var n=t.cipherSuites||null;if(n===null){n=[];for(var r in z.CipherSuites)n.push(z.CipherSuites[r])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:xt.util.createBuffer(),tlsData:xt.util.createBuffer(),data:xt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?Lkt:Wkt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=Zce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:xt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:xt.md.md5.create(),sha1:xt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:xt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof xt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};tFe.exports=xt.tls=xt.tls||{};for(uH in z)typeof z[uH]!="function"&&(xt.tls[uH]=z[uH]);var uH;xt.tls.prf_tls1=fH;xt.tls.hmac_sha1=Dkt;xt.tls.createSessionCache=z.createSessionCache;xt.tls.createConnection=z.createConnection});var iFe=W((Ztr,rFe)=>{f();var Zv=di();Vv();eue();var hp=rFe.exports=Zv.tls;hp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=hp.BulkCipherAlgorithm.aes,t.cipher_type=hp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=hp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:nFe};hp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=hp.BulkCipherAlgorithm.aes,t.cipher_type=hp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=hp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:nFe};function nFe(t,e,n){var r=e.entity===Zv.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:Zv.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},t.write.cipherState={init:!1,cipher:Zv.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},t.read.cipherFunction=t3t,t.write.cipherFunction=Xkt,t.read.macLength=t.write.macLength=n.mac_length,t.read.macFunction=t.write.macFunction=hp.hmac_sha1}s(nFe,"initConnectionState");function Xkt(t,e){var n=!1,r=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(r),e.updateSequenceNumber();var i;t.version.minor===hp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=Zv.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=hp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Zkt)&&(t.fragment=o.output,t.length=t.fragment.length(),n=!0),n}s(Xkt,"encrypt_aes_cbc_sha1");function Zkt(t,e,n){if(!n){var r=t-e.length()%t;e.fillWithByte(r-1,r)}return!0}s(Zkt,"encrypt_aes_cbc_sha1_padding");function e3t(t,e,n){var r=!0;if(n){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)r=r&&e.at(a)==o;r&&e.truncate(o+1)}return r}s(e3t,"decrypt_aes_cbc_sha1_padding");function t3t(t,e){var n=!1,r;t.version.minor===hp.Versions.TLS_1_0.minor?r=e.cipherState.init?null:e.cipherState.iv:r=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:r}),i.update(t.fragment),n=i.finish(e3t);var o=e.macLength,a=Zv.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=Zv.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),n=n3t(e.macKey,a,c)&&n,n}s(t3t,"decrypt_aes_cbc_sha1");function n3t(t,e,n){var r=Zv.hmac.create();return r.start("SHA1",t),r.update(e),e=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),e===n}s(n3t,"compareMacs")});var rue=W((nnr,lFe)=>{f();var Es=di();zg();uo();var KP=lFe.exports=Es.sha512=Es.sha512||{};Es.md.sha512=Es.md.algorithms.sha512=KP;var sFe=Es.sha384=Es.sha512.sha384=Es.sha512.sha384||{};sFe.create=function(){return KP.create("SHA-384")};Es.md.sha384=Es.md.algorithms.sha384=sFe;Es.sha512.sha256=Es.sha512.sha256||{create:s(function(){return KP.create("SHA-512/256")},"create")};Es.md["sha512/256"]=Es.md.algorithms["sha512/256"]=Es.sha512.sha256;Es.sha512.sha224=Es.sha512.sha224||{create:s(function(){return KP.create("SHA-512/224")},"create")};Es.md["sha512/224"]=Es.md.algorithms["sha512/224"]=Es.sha512.sha224;KP.create=function(t){if(aFe||r3t(),typeof t>"u"&&(t="SHA-512"),!(t in rT))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=rT[t],n=null,r=Es.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);r=Es.util.createBuffer(),n=new Array(e.length);for(var u=0;u<e.length;++u)n[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=Es.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return r.putBytes(c),oFe(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),l},l.digest=function(){var c=Es.util.createBuffer();c.putBytes(r.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(tue.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(n.length),g=0;g<n.length;++g)y[g]=n[g].slice(0);oFe(y,i,c);var v=Es.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var tue=null,aFe=!1,nue=null,rT=null;function r3t(){tue="\x80",tue+=Es.util.fillString("\0",128),nue=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],rT={},rT["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],rT["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],rT["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],rT["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],aFe=!0}s(r3t,"_init");function oFe(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,B,N,U,re,me,ae,H,G,ue,ie,$,O,Y,K,le,te,pe,he=n.length();he>=128;){for($=0;$<16;++$)e[$][0]=n.getInt32()>>>0,e[$][1]=n.getInt32()>>>0;for(;$<80;++$)K=e[$-2],O=K[0],Y=K[1],r=((O>>>19|Y<<13)^(Y>>>29|O<<3)^O>>>6)>>>0,i=((O<<13|Y>>>19)^(Y<<3|O>>>29)^(O<<26|Y>>>6))>>>0,te=e[$-15],O=te[0],Y=te[1],o=((O>>>1|Y<<31)^(O>>>8|Y<<24)^O>>>7)>>>0,a=((O<<31|Y>>>1)^(O<<24|Y>>>8)^(O<<25|Y>>>7))>>>0,le=e[$-7],pe=e[$-16],Y=i+le[1]+a+pe[1],e[$][0]=r+le[0]+o+pe[0]+(Y/4294967296>>>0)>>>0,e[$][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],B=t[3][0],N=t[3][1],U=t[4][0],re=t[4][1],me=t[5][0],ae=t[5][1],H=t[6][0],G=t[6][1],ue=t[7][0],ie=t[7][1],$=0;$<80;++$)u=((U>>>14|re<<18)^(U>>>18|re<<14)^(re>>>9|U<<23))>>>0,d=((U<<18|re>>>14)^(U<<14|re>>>18)^(re<<23|U>>>9))>>>0,p=(H^U&(me^H))>>>0,m=(G^re&(ae^G))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+nue[$][1]+e[$][1],r=ue+u+p+nue[$][0]+e[$][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,ue=H,ie=G,H=me,G=ae,me=U,ae=re,Y=N+i,U=B+r+(Y/4294967296>>>0)>>>0,re=Y>>>0,B=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=r+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+B+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+re,t[4][0]=t[4][0]+U+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+ae,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+G,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+ue+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,he-=128}}s(oFe,"_update")});var cFe=W(iue=>{f();var i3t=di();zm();var Yl=i3t.asn1;iue.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};iue.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var bFe=W((anr,vFe)=>{f();var bc=di();VP();up();rue();uo();var hFe=cFe(),o3t=hFe.publicKeyValidator,s3t=hFe.privateKeyValidator;typeof uFe>"u"&&(uFe=bc.jsbn.BigInteger);var uFe,aue=bc.util.ByteBuffer,Bd=typeof Buffer>"u"?Uint8Array:Buffer;bc.pki=bc.pki||{};vFe.exports=bc.pki.ed25519=bc.ed25519=bc.ed25519||{};var Si=bc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=bc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=hy({message:e,encoding:"binary"});for(var n=new Bd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=new Bd(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=e[i];return u3t(n,r),{publicKey:n,privateKey:r}};Si.privateKeyFromAsn1=function(t){var e={},n=[],r=bc.asn1.validate(t,s3t,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=bc.asn1.derToOid(e.privateKeyOid),a=bc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=hy({message:bc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},n=[],r=bc.asn1.validate(t,o3t,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=bc.asn1.derToOid(e.publicKeyOid),a=bc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return hy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=hy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new Bd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=e[32+r];return n};Si.sign=function(t){t=t||{};var e=hy(t),n=hy({message:t.privateKey,encoding:"binary"});if(n.length===Si.constants.SEED_BYTE_LENGTH){var r=Si.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length);d3t(i,e,e.length,n);for(var o=new Bd(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=hy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=hy({message:t.signature,encoding:"binary"});if(n.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var r=hy({message:t.publicKey,encoding:"binary"});if(r.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=n[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return f3t(o,i,i.length,r)>=0};function hy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Bd)return e;var n=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,n);e=new aue(e,n)}else if(!(e instanceof aue))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new Bd(e.length()),i=0;i<r.length;++i)r[i]=e.at(i);return r}s(hy,"messageToNativeBuffer");var lue=br(),pH=br([1]),a3t=br([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l3t=br([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),dFe=br([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),fFe=br([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),oue=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),c3t=br([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function JP(t,e){var n=bc.md.sha512.create(),r=new aue(t);n.update(r.getBytes(e),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Bd(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(JP,"sha512");function u3t(t,e){var n=[br(),br(),br(),br()],r,i=JP(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,fue(n,i),due(t,n),r=0;r<32;++r)e[r+32]=t[r];return 0}s(u3t,"crypto_sign_keypair");function d3t(t,e,n,r){var i,o,a=new Float64Array(64),l=[br(),br(),br(),br()],c=JP(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=n+64;for(i=0;i<n;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=JP(t.subarray(32),n+32);for(cue(d),fue(l,d),due(t,l),i=32;i<64;++i)t[i]=r[i];var p=JP(t,n+64);for(cue(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return gFe(t.subarray(32),a),u}s(d3t,"crypto_sign");function f3t(t,e,n,r){var i,o,a=new Bd(32),l=[br(),br(),br(),br()],c=[br(),br(),br(),br()];if(o=-1,n<64||p3t(c,r))return-1;for(i=0;i<n;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=r[i];var u=JP(t,n);if(cue(u),CFe(l,c,u),fue(c,e.subarray(32)),uue(l,c),due(a,l),n-=64,AFe(e,0,a,0)){for(i=0;i<n;++i)t[i]=0;return-1}for(i=0;i<n;++i)t[i]=e[i+64];return o=n,o}s(f3t,"crypto_sign_open");function gFe(t,e){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)e[i]+=n-16*e[r]*oue[i-(r-32)],n=e[i]+128>>8,e[i]-=n*256;e[i]+=n,e[r]=0}for(n=0,i=0;i<32;++i)e[i]+=n-(e[31]>>4)*oue[i],n=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=n*oue[i];for(r=0;r<32;++r)e[r+1]+=e[r]>>8,t[r]=e[r]&255}s(gFe,"modL");function cue(t){for(var e=new Float64Array(64),n=0;n<64;++n)e[n]=t[n],t[n]=0;gFe(t,e)}s(cue,"reduce");function uue(t,e){var n=br(),r=br(),i=br(),o=br(),a=br(),l=br(),c=br(),u=br(),d=br();sR(n,t[1],t[0]),sR(d,e[1],e[0]),Vo(n,n,d),oR(r,t[0],t[1]),oR(d,e[0],e[1]),Vo(r,r,d),Vo(i,t[3],e[3]),Vo(i,i,l3t),Vo(o,t[2],e[2]),oR(o,o,o),sR(a,r,n),sR(l,o,i),oR(c,o,i),oR(u,r,n),Vo(t[0],a,l),Vo(t[1],u,c),Vo(t[2],c,l),Vo(t[3],a,u)}s(uue,"add");function pFe(t,e,n){for(var r=0;r<4;++r)xFe(t[r],e[r],n)}s(pFe,"cswap");function due(t,e){var n=br(),r=br(),i=br();A3t(i,e[2]),Vo(n,e[0],i),Vo(r,e[1],i),mH(t,r),t[31]^=yFe(n)<<7}s(due,"pack");function mH(t,e){var n,r,i,o=br(),a=br();for(n=0;n<16;++n)a[n]=e[n];for(sue(a),sue(a),sue(a),r=0;r<2;++r){for(o[0]=a[0]-65517,n=1;n<15;++n)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,xFe(a,o,1-i)}for(n=0;n<16;n++)t[2*n]=a[n]&255,t[2*n+1]=a[n]>>8}s(mH,"pack25519");function p3t(t,e){var n=br(),r=br(),i=br(),o=br(),a=br(),l=br(),c=br();return eb(t[2],pH),m3t(t[1],e),iT(i,t[1]),Vo(o,i,a3t),sR(i,i,t[2]),oR(o,t[2],o),iT(a,o),iT(l,a),Vo(c,l,a),Vo(n,c,i),Vo(n,n,o),h3t(n,n),Vo(n,n,i),Vo(n,n,o),Vo(n,n,o),Vo(t[0],n,o),iT(r,t[0]),Vo(r,r,o),mFe(r,i)&&Vo(t[0],t[0],c3t),iT(r,t[0]),Vo(r,r,o),mFe(r,i)?-1:(yFe(t[0])===e[31]>>7&&sR(t[0],lue,t[0]),Vo(t[3],t[0],t[1]),0)}s(p3t,"unpackneg");function m3t(t,e){var n;for(n=0;n<16;++n)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}s(m3t,"unpack25519");function h3t(t,e){var n=br(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)iT(n,n),r!==1&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(h3t,"pow2523");function mFe(t,e){var n=new Bd(32),r=new Bd(32);return mH(n,t),mH(r,e),AFe(n,0,r,0)}s(mFe,"neq25519");function AFe(t,e,n,r){return g3t(t,e,n,r,32)}s(AFe,"crypto_verify_32");function g3t(t,e,n,r,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^n[r+o];return(1&a-1>>>8)-1}s(g3t,"vn");function yFe(t){var e=new Bd(32);return mH(e,t),e[0]&1}s(yFe,"par25519");function CFe(t,e,n){var r,i;for(eb(t[0],lue),eb(t[1],pH),eb(t[2],pH),eb(t[3],lue),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,pFe(t,e,r),uue(e,t),uue(t,t),pFe(t,e,r)}s(CFe,"scalarmult");function fue(t,e){var n=[br(),br(),br(),br()];eb(n[0],dFe),eb(n[1],fFe),eb(n[2],pH),Vo(n[3],dFe,fFe),CFe(t,n,e)}s(fue,"scalarbase");function eb(t,e){var n;for(n=0;n<16;n++)t[n]=e[n]|0}s(eb,"set25519");function A3t(t,e){var n=br(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)iT(n,n),r!==2&&r!==4&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(A3t,"inv25519");function sue(t){var e,n,r=1;for(e=0;e<16;++e)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-r*65536;t[0]+=r-1+37*(r-1)}s(sue,"car25519");function xFe(t,e,n){for(var r,i=~(n-1),o=0;o<16;++o)r=i&(t[o]^e[o]),t[o]^=r,e[o]^=r}s(xFe,"sel25519");function br(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;++e)n[e]=t[e];return n}s(br,"gf");function oR(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]+n[r]}s(oR,"A");function sR(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]-n[r]}s(sR,"Z");function iT(t,e){Vo(t,e,e)}s(iT,"S");function Vo(t,e,n){var r,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,B=0,N=0,U=0,re=0,me=0,ae=0,H=0,G=0,ue=0,ie=0,$=0,O=0,Y=0,K=0,le=0,te=n[0],pe=n[1],he=n[2],Qe=n[3],ke=n[4],Ze=n[5],Fe=n[6],ft=n[7],It=n[8],yt=n[9],vt=n[10],ce=n[11],Oe=n[12],ye=n[13],tt=n[14],Z=n[15];r=e[0],o+=r*te,a+=r*pe,l+=r*he,c+=r*Qe,u+=r*ke,d+=r*Ze,p+=r*Fe,m+=r*ft,h+=r*It,g+=r*yt,y+=r*vt,v+=r*ce,b+=r*Oe,E+=r*ye,_+=r*tt,k+=r*Z,r=e[1],a+=r*te,l+=r*pe,c+=r*he,u+=r*Qe,d+=r*ke,p+=r*Ze,m+=r*Fe,h+=r*ft,g+=r*It,y+=r*yt,v+=r*vt,b+=r*ce,E+=r*Oe,_+=r*ye,k+=r*tt,B+=r*Z,r=e[2],l+=r*te,c+=r*pe,u+=r*he,d+=r*Qe,p+=r*ke,m+=r*Ze,h+=r*Fe,g+=r*ft,y+=r*It,v+=r*yt,b+=r*vt,E+=r*ce,_+=r*Oe,k+=r*ye,B+=r*tt,N+=r*Z,r=e[3],c+=r*te,u+=r*pe,d+=r*he,p+=r*Qe,m+=r*ke,h+=r*Ze,g+=r*Fe,y+=r*ft,v+=r*It,b+=r*yt,E+=r*vt,_+=r*ce,k+=r*Oe,B+=r*ye,N+=r*tt,U+=r*Z,r=e[4],u+=r*te,d+=r*pe,p+=r*he,m+=r*Qe,h+=r*ke,g+=r*Ze,y+=r*Fe,v+=r*ft,b+=r*It,E+=r*yt,_+=r*vt,k+=r*ce,B+=r*Oe,N+=r*ye,U+=r*tt,re+=r*Z,r=e[5],d+=r*te,p+=r*pe,m+=r*he,h+=r*Qe,g+=r*ke,y+=r*Ze,v+=r*Fe,b+=r*ft,E+=r*It,_+=r*yt,k+=r*vt,B+=r*ce,N+=r*Oe,U+=r*ye,re+=r*tt,me+=r*Z,r=e[6],p+=r*te,m+=r*pe,h+=r*he,g+=r*Qe,y+=r*ke,v+=r*Ze,b+=r*Fe,E+=r*ft,_+=r*It,k+=r*yt,B+=r*vt,N+=r*ce,U+=r*Oe,re+=r*ye,me+=r*tt,ae+=r*Z,r=e[7],m+=r*te,h+=r*pe,g+=r*he,y+=r*Qe,v+=r*ke,b+=r*Ze,E+=r*Fe,_+=r*ft,k+=r*It,B+=r*yt,N+=r*vt,U+=r*ce,re+=r*Oe,me+=r*ye,ae+=r*tt,H+=r*Z,r=e[8],h+=r*te,g+=r*pe,y+=r*he,v+=r*Qe,b+=r*ke,E+=r*Ze,_+=r*Fe,k+=r*ft,B+=r*It,N+=r*yt,U+=r*vt,re+=r*ce,me+=r*Oe,ae+=r*ye,H+=r*tt,G+=r*Z,r=e[9],g+=r*te,y+=r*pe,v+=r*he,b+=r*Qe,E+=r*ke,_+=r*Ze,k+=r*Fe,B+=r*ft,N+=r*It,U+=r*yt,re+=r*vt,me+=r*ce,ae+=r*Oe,H+=r*ye,G+=r*tt,ue+=r*Z,r=e[10],y+=r*te,v+=r*pe,b+=r*he,E+=r*Qe,_+=r*ke,k+=r*Ze,B+=r*Fe,N+=r*ft,U+=r*It,re+=r*yt,me+=r*vt,ae+=r*ce,H+=r*Oe,G+=r*ye,ue+=r*tt,ie+=r*Z,r=e[11],v+=r*te,b+=r*pe,E+=r*he,_+=r*Qe,k+=r*ke,B+=r*Ze,N+=r*Fe,U+=r*ft,re+=r*It,me+=r*yt,ae+=r*vt,H+=r*ce,G+=r*Oe,ue+=r*ye,ie+=r*tt,$+=r*Z,r=e[12],b+=r*te,E+=r*pe,_+=r*he,k+=r*Qe,B+=r*ke,N+=r*Ze,U+=r*Fe,re+=r*ft,me+=r*It,ae+=r*yt,H+=r*vt,G+=r*ce,ue+=r*Oe,ie+=r*ye,$+=r*tt,O+=r*Z,r=e[13],E+=r*te,_+=r*pe,k+=r*he,B+=r*Qe,N+=r*ke,U+=r*Ze,re+=r*Fe,me+=r*ft,ae+=r*It,H+=r*yt,G+=r*vt,ue+=r*ce,ie+=r*Oe,$+=r*ye,O+=r*tt,Y+=r*Z,r=e[14],_+=r*te,k+=r*pe,B+=r*he,N+=r*Qe,U+=r*ke,re+=r*Ze,me+=r*Fe,ae+=r*ft,H+=r*It,G+=r*yt,ue+=r*vt,ie+=r*ce,$+=r*Oe,O+=r*ye,Y+=r*tt,K+=r*Z,r=e[15],k+=r*te,B+=r*pe,N+=r*he,U+=r*Qe,re+=r*ke,me+=r*Ze,ae+=r*Fe,H+=r*ft,G+=r*It,ue+=r*yt,ie+=r*vt,$+=r*ce,O+=r*Oe,Y+=r*ye,K+=r*tt,le+=r*Z,o+=38*B,a+=38*N,l+=38*U,c+=38*re,u+=38*me,d+=38*ae,p+=38*H,m+=38*G,h+=38*ue,g+=38*ie,y+=38*$,v+=38*O,b+=38*Y,E+=38*K,_+=38*le,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(Vo,"M")});var wFe=W((unr,TFe)=>{f();var Q0=di();uo();up();VP();TFe.exports=Q0.kem=Q0.kem||{};var EFe=Q0.jsbn.BigInteger;Q0.kem.rsa={};Q0.kem.rsa.create=function(t,e){e=e||{};var n=e.prng||Q0.random,r={};return r.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new EFe(Q0.util.bytesToHex(n.getBytesSync(a)),16).mod(i.n);while(l.compareTo(EFe.ONE)<=0);l=Q0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=Q0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},r.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},r};Q0.kem.kdf1=function(t,e){IFe(this,t,0,e||t.digestLength)};Q0.kem.kdf2=function(t,e){IFe(this,t,1,e||t.digestLength)};function IFe(t,e,n,r){t.generate=function(i,o){for(var a=new Q0.util.ByteBuffer,l=Math.ceil(o/r)+n,c=new Q0.util.ByteBuffer,u=n;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(r))}return a.truncate(a.length()-o),a.getBytes()}}s(IFe,"_createKDF")});var kFe=W((pnr,RFe)=>{f();var Oi=di();uo();RFe.exports=Oi.log=Oi.log||{};Oi.log.levels=["none","error","warning","info","debug","verbose","max"];var hH={},hue=[],ZP=null;Oi.log.LEVEL_LOCKED=2;Oi.log.NO_LEVEL_CHECK=4;Oi.log.INTERPOLATE=8;for(nA=0;nA<Oi.log.levels.length;++nA)pue=Oi.log.levels[nA],hH[pue]={index:nA,name:pue.toUpperCase()};var pue,nA;Oi.log.logMessage=function(t){for(var e=hH[t.level].index,n=0;n<hue.length;++n){var r=hue[n];if(r.flags&Oi.log.NO_LEVEL_CHECK)r.f(t);else{var i=hH[r.level].index;e<=i&&r.f(r,t)}}};Oi.log.prepareStandard=function(t){"standard"in t||(t.standard=hH[t.level].name+" ["+t.category+"] "+t.message)};Oi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Oi.util.format.apply(this,e)}};Oi.log.prepareStandardFull=function(t){"standardFull"in t||(Oi.log.prepareStandard(t),t.standardFull=t.standard)};for(mue=["error","warning","info","debug","verbose"],nA=0;nA<mue.length;++nA)(function(e){Oi.log[e]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:n,message:r,arguments:i};Oi.log.logMessage(o)}})(mue[nA]);var mue,nA;Oi.log.makeLogger=function(t){var e={flags:0,f:t};return Oi.log.setLevel(e,"none"),e};Oi.log.setLevel=function(t,e){var n=!1;if(t&&!(t.flags&Oi.log.LEVEL_LOCKED))for(var r=0;r<Oi.log.levels.length;++r){var i=Oi.log.levels[r];if(e==i){t.level=e,n=!0;break}}return n};Oi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Oi.log.LEVEL_LOCKED:t.flags&=~Oi.log.LEVEL_LOCKED};Oi.log.addLogger=function(t){hue.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(_Fe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},e9=s(function(t,e){Oi.log.prepareStandard(e);var n=_Fe[e.level],r=[e.standard];r=r.concat(e.arguments.slice()),n.apply(console,r)},"f"),aR=Oi.log.makeLogger(e9)):(e9=s(function(e,n){Oi.log.prepareStandardFull(n),console.log(n.standardFull)},"f"),aR=Oi.log.makeLogger(e9)),Oi.log.setLevel(aR,"debug"),Oi.log.addLogger(aR),ZP=aR):console={log:s(function(){},"log")};var aR,_Fe,e9;ZP!==null&&typeof window<"u"&&window.location&&(XP=new URL(window.location.href).searchParams,XP.has("console.level")&&Oi.log.setLevel(ZP,XP.get("console.level").slice(-1)[0]),XP.has("console.lock")&&(SFe=XP.get("console.lock").slice(-1)[0],SFe=="true"&&Oi.log.lock(ZP)));var XP,SFe;Oi.log.consoleLogger=ZP});var DFe=W((gnr,BFe)=>{f();BFe.exports=zg();zG();eR();Sce();rue()});var LFe=W((ynr,NFe)=>{f();var Kt=di();Vv();zm();HP();$v();J2();Wce();up();uo();lH();var Se=Kt.asn1,Gu=NFe.exports=Kt.pkcs7=Kt.pkcs7||{};Gu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=Se.fromDer(e.body);return Gu.messageFromAsn1(r)};Gu.messageToPem=function(t,e){var n={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(n,{maxline:e})};Gu.messageFromAsn1=function(t){var e={},n=[];if(!Se.validate(t,Gu.asn1.contentInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=Se.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Gu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Gu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Gu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Gu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(r){if(Aue(t,r,Gu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var r=[],i=0;i<t.certificates.length;++i)r.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return r.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,r)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(r){var i=r.issuer,o=r.serialNumber;if(r.certificate){var a=r.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=r.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=r.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(r){if(r=r||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),r.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();n(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(r){typeof r=="string"&&(r=Kt.pki.certificateFromPem(r)),t.certificates.push(r)},"addCertificate"),addCertificateRevokationList:s(function(r){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var r={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in r||(r[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=r[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in r)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return r}s(e,"addDigestAlgorithmIds");function n(r){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var l in r)r[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=r[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(gue(h)),d.authenticatedAttributesAsn1.value.push(gue(h))}a=Se.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=E3t(t.signers)}s(n,"addSignerInfos")};Gu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Aue(t,e,Gu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),PFe(t)},"decrypt")},t};Gu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var n=Aue(t,e,Gu.asn1.envelopedDataValidator);t.recipients=x3t(n.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,v3t(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,I3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===n.length){for(var a=!0,l=0;l<n.length;++l)if(o[l].type!==n[l].type||o[l].value!==n[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,n){if(t.encryptedContent.key===void 0&&e!==void 0&&n!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var r=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}PFe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,n){if(t.encryptedContent.content===void 0){n=n||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var r,i,o;switch(n){case Kt.pki.oids["aes128-CBC"]:r=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:r=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:r=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:r=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function y3t(t){var e={},n=[];if(!Se.validate(t,Gu.asn1.recipientInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(y3t,"_recipientFromAsn1");function C3t(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(C3t,"_recipientToAsn1");function x3t(t){for(var e=[],n=0;n<t.length;++n)e.push(y3t(t[n]));return e}s(x3t,"_recipientsFromAsn1");function v3t(t){for(var e=[],n=0;n<t.length;++n)e.push(C3t(t[n]));return e}s(v3t,"_recipientsToAsn1");function b3t(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r){var i=t.unauthenticatedAttributes[r];n.values.push(gue(i))}e.value.push(n)}return e}s(b3t,"_signerToAsn1");function E3t(t){for(var e=[],n=0;n<t.length;++n)e.push(b3t(t[n]));return e}s(E3t,"_signersToAsn1");function gue(t){var e;if(t.type===Kt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=n&&i<r?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(gue,"_attributeToAsn1");function I3t(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(I3t,"_encryptedContentToAsn1");function Aue(t,e,n){var r={},i=[];if(!Se.validate(e,n,r,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(r.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var l="";if(Kt.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=r.encryptedContent[c].value}else l=r.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(r.encAlgorithm),parameter:Kt.util.createBuffer(r.encParameter.value),content:Kt.util.createBuffer(l)}}if(r.content){var l="";if(Kt.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=r.content[c].value}else l=r.content;t.content=Kt.util.createBuffer(l)}return t.version=r.version.charCodeAt(0),t.rawCapture=r,r}s(Aue,"_fromAsn1");function PFe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(PFe,"_decryptContent")});var MFe=W((vnr,FFe)=>{f();var nl=di();Vv();K4();zG();eR();uo();var AH=FFe.exports=nl.ssh=nl.ssh||{};AH.privateKeyToPutty=function(t,e,n){n=n||"",e=e||"";var r="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+r+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+n+`\r
`;var a=nl.util.createBuffer();lR(a,r),rA(a,t.e),rA(a,t.n);var l=nl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=nl.util.createBuffer();rA(u,t.d),rA(u,t.p),rA(u,t.q),rA(u,t.qInv);var d;if(!e)d=nl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=gH(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=nl.util.createBuffer();h.putBuffer(gH("\0\0\0\0",e)),h.putBuffer(gH("\0\0\0",e));var g=nl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(nl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=nl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=gH("putty-private-key-file-mac-key",e),b=nl.util.createBuffer();lR(b,r),lR(b,i),lR(b,n),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=nl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};AH.publicKeyToOpenSSH=function(t,e){var n="ssh-rsa";e=e||"";var r=nl.util.createBuffer();return lR(r,n),rA(r,t.e),rA(r,t.n),n+" "+nl.util.encode64(r.bytes())+" "+e};AH.privateKeyToOpenSSH=function(t,e){return e?nl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):nl.pki.privateKeyToPem(t)};AH.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||nl.md.md5.create(),r="ssh-rsa",i=nl.util.createBuffer();lR(i,r),rA(i,t.e),rA(i,t.n),n.start(),n.update(i.getBytes());var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function rA(t,e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=nl.util.hexToBytes(n);t.putInt32(r.length),t.putBytes(r)}s(rA,"_addBigIntegerToBuffer");function lR(t,e){t.putInt32(e.length),t.putString(e)}s(lR,"_addStringToBuffer");function gH(){for(var t=nl.md.sha1.create(),e=arguments.length,n=0;n<e;++n)t.update(arguments[n]);return t.digest()}s(gH,"_sha1")});var OFe=W((Inr,QFe)=>{f();QFe.exports=di();Vv();iFe();zm();qG();HP();bFe();K4();wFe();kFe();DFe();Gce();XG();J2();Mce();Vce();LFe();zce();Oce();Rce();oH();up();Dce();MFe();eue();uo()});var WFe=W(oT=>{"use strict";f();Object.defineProperty(oT,"__esModule",{value:!0});oT.convert=oT.Format=void 0;var t9=OFe(),tb;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(tb=oT.Format||(oT.Format={}));function UFe(t){var e=t9.pki.pemToDer(t),n=t9.asn1,r=n.fromDer(e.data.toString("binary")).value[0].value,i=r[0],o=i.tagClass===n.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=r.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(UFe,"myASN");function T3t(t){var e=UFe(t),n=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),r=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(n),"Valid	".concat(r),String(t)].join(`
`)}s(T3t,"txtFormat");function qFe(t,e){switch(e){case tb.der:return t9.pki.pemToDer(t);case tb.pem:return t;case tb.txt:return T3t(t);case tb.asn1:return UFe(t);case tb.fingerprint:var n=t9.md.sha1.create(),r=qFe(t,tb.der);return n.update(r.getBytes()),n.digest().toHex();case tb.x509:return t9.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(qFe,"convert");oT.convert=qFe});var zFe=W(Dd=>{"use strict";f();var nb=Dd&&Dd.__assign||function(){return nb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nb.apply(this,arguments)},yH=Dd&&Dd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.convert=Dd.Format=Dd.addToGlobalAgent=Dd.get=void 0;var yue=require("https"),w3t=require("tls"),GFe=require("child_process"),HFe=E7e(),gy=WFe();Object.defineProperty(Dd,"Format",{enumerable:!0,get:s(function(){return gy.Format},"get")});Object.defineProperty(Dd,"convert",{enumerable:!0,get:s(function(){return gy.convert},"get")});var jFe=process.platform==="darwin",VFe=yue.globalAgent,xH={keychain:"all",unique:!0,excludeBundled:!0,format:gy.Format.pem};function $Fe(t){if(t===void 0&&(t=xH),!jFe)return[];t=nb(nb({},xH),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,n=["find-certificate","-a","-p"],r=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,GFe.spawnSync)("/usr/bin/security",n.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});r=yH(yH([],r,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,GFe.spawnSync)("/usr/bin/security",n).stdout.toString().split(e).map(function(u){return u.trim()});r=yH(yH([],r,!0),a,!0)}if(t.unique||t.excludeBundled){var l=r.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}),c=t.excludeBundled?w3t.rootCertificates.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}):[];r=r.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return r.map(function(u){return(0,gy.convert)(u,t.format)})}s($Fe,"get");Dd.get=$Fe;var CH=VFe.options.ca,_3t=s(function(t){if(t===void 0&&(t=xH),!!jFe){var e;Array.isArray(CH)?e=Array.from(CH):e=typeof CH<"u"?[CH]:[],$Fe(nb(nb(nb({},xH),t),{format:gy.Format.pem,excludeBundled:!1})).forEach(function(n){return e.push(n)}),VFe.options.ca=e,yue.Agent=function(n){return function(r){var i=typeof r<"u"?nb({},r):{};return typeof i.ca>"u"&&(i.ca=e),n.call(this,i)}}(yue.Agent),(0,HFe.setGlobalDispatcher)(new HFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Dd.addToGlobalAgent=_3t});var YFe=W((Dnr,Cue)=>{f();function S3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var n=typeof __webpack_require__=="function"?__non_webpack_require__:require;let r=n(e(__dirname,"crypt32.node")),i=[],o=new r.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(S3t,"all");process.platform!=="win32"?Cue.exports.all=()=>[]:Cue.exports.all=S3t});var rMe=W((Onr,nMe)=>{"use strict";f();function tMe(t,e,n){let r=e[n];if(t==null&&r.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${r.name}\` missing`);let i=typeof t;if(r.type&&i!==r.type){if(r.required===!1&&e.slice(n).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${r.name}\`, expected \`${r.type}\` but found \`${typeof t}\``)}return!0}s(tMe,"validateParameter");function k3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(k3t,"hasOwnProperty");function B3t(t,e){return function(){let n=Array.prototype.slice.call(arguments),r=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=n[a];k3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),tMe(c,e,o)?r.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{r.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,r)});t.apply(this,r)}}s(B3t,"defineOperation");nMe.exports={defineOperation:B3t,validateParameter:tMe}});var Sue=W((Wnr,sMe)=>{"use strict";f();var dR=Vne()("kerberos"),uR=dR.KerberosClient,iMe=dR.KerberosServer,rb=rMe().defineOperation,D3t=1,P3t=2,N3t=4,L3t=8,F3t=16,M3t=32,Q3t=64,O3t=128,U3t=256,oMe=0,q3t=9,W3t=6;uR.prototype.step=rb(uR.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);uR.prototype.wrap=rb(uR.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);uR.prototype.unwrap=rb(uR.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);iMe.prototype.step=rb(iMe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var G3t=rb(dR.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),H3t=rb(dR.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),j3t=rb(dR.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:oMe}},{name:"callback",type:"function",required:!1}]),V3t=rb(dR.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);sMe.exports={initializeClient:j3t,initializeServer:V3t,principalDetails:H3t,checkPassword:G3t,GSS_C_DELEG_FLAG:D3t,GSS_C_MUTUAL_FLAG:P3t,GSS_C_REPLAY_FLAG:N3t,GSS_C_SEQUENCE_FLAG:L3t,GSS_C_CONF_FLAG:F3t,GSS_C_INTEG_FLAG:M3t,GSS_C_ANON_FLAG:Q3t,GSS_C_PROT_READY_FLAG:O3t,GSS_C_TRANS_FLAG:U3t,GSS_C_NO_OID:oMe,GSS_MECH_OID_KRB5:q3t,GSS_MECH_OID_SPNEGO:W3t}});var aMe=W((Hnr,$3t)=>{$3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var cMe=W((jnr,lMe)=>{"use strict";f();var z3t=require("dns"),Y3t=Sue(),Rue=class{static{s(this,"MongoAuthProcess")}constructor(e,n,r,i){i=i||{},this.host=e,this.port=n,this.serviceName=r||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=K3t(this),this.retries=10}init(e,n,r){let i=this;this.username=e,this.password=n;function o(a,l,c){if(!a)return c();z3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return r(a);let l={};n!=null&&Object.assign(l,{user:e,password:n});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Y3t.initializeClient(c,l,(u,d)=>{if(u)return r(u,null);i.client=d,r(null,d)})})}transition(e,n){if(this._transition==null)return n(new Error("Transition finished"));this._transition(e,n)}};function K3t(t){return(e,n)=>{t.client.step("",(r,i)=>{if(r)return n(r);t._transition=J3t(t),n(null,i)})}}s(K3t,"firstTransition");function J3t(t){return(e,n)=>{t.client.step(e,(r,i)=>{if(r&&t.retries===0)return n(r);if(r)return t.retries=t.retries-1,t.transition(e,n);t._transition=X3t(t),n(null,i||"")})}}s(J3t,"secondTransition");function X3t(t){return(e,n)=>{t.client.unwrap(e,(r,i)=>{if(r)return n(r,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return n(o,!1);t._transition=Z3t(t),n(null,a)})})}}s(X3t,"thirdTransition");function Z3t(t){return(e,n)=>{t._transition=null,n(null,!0)}}s(Z3t,"fourthTransition");lMe.exports={MongoAuthProcess:Rue}});var dMe=W((znr,n9)=>{"use strict";f();var uMe=Sue();n9.exports=uMe;n9.exports.Kerberos=uMe;n9.exports.version=aMe().version;n9.exports.processes={MongoAuthProcess:cMe().MongoAuthProcess}});var QMe=W(jue=>{"use strict";f();Object.defineProperty(jue,"__esModule",{value:!0});jue.assertNever=FBt;function FBt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(FBt,"assertNever")});var f9=W(by=>{"use strict";f();Object.defineProperty(by,"__esModule",{value:!0});by.ChatCompletionContentPartOpaque=by.ChatCompletionContentPartKind=by.ChatRole=void 0;var MBt=QMe(),qH;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(qH||(by.ChatRole=qH={}));(function(t){function e(n){switch(n){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,MBt.assertNever)(n,`unknown chat role ${n}}`)}}s(e,"display"),t.display=e})(qH||(by.ChatRole=qH={}));var OMe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(OMe||(by.ChatCompletionContentPartKind=OMe={}));var UMe;(function(t){function e(n,r){return!n.scope||(n.scope&r)!==0}s(e,"usableIn"),t.usableIn=e})(UMe||(by.ChatCompletionContentPartOpaque=UMe={}))});var Vue=W(dA=>{"use strict";f();Object.defineProperty(dA,"__esModule",{value:!0});dA.BaseTokensPerName=dA.BaseTokensPerMessage=dA.BaseTokensPerCompletion=dA.ChatRole=void 0;var qMe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(qMe||(dA.ChatRole=qMe={}));dA.BaseTokensPerCompletion=3;dA.BaseTokensPerMessage=3;dA.BaseTokensPerName=1});var GMe=W(GH=>{"use strict";f();Object.defineProperty(GH,"__esModule",{value:!0});GH.toOpenAiChatMessage=WMe;GH.toOpenAIChatMessages=UBt;var Ey=f9(),WH=Vue(),QBt=cb();function $ue(t){return t.filter(e=>e.type===Ey.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s($ue,"onlyStringContent");function OBt(t){let e=t.map(n=>{if(n.type===Ey.ChatCompletionContentPartKind.Text)return{type:"text",text:n.text};if(n.type===Ey.ChatCompletionContentPartKind.Image)return{image_url:n.imageUrl,type:"image_url"};if(n.type===Ey.ChatCompletionContentPartKind.Opaque&&Ey.ChatCompletionContentPartOpaque.usableIn(n,QBt.OutputMode.OpenAI))return n}).filter(n=>!!n);return e.every(n=>n.type==="text")?e.map(n=>n.text).join(""):e}s(OBt,"stringAndImageContent");function WMe(t){switch(t.role){case Ey.ChatRole.System:return{role:WH.ChatRole.System,content:$ue(t.content),name:t.name};case Ey.ChatRole.User:return{role:WH.ChatRole.User,content:OBt(t.content),name:t.name};case Ey.ChatRole.Assistant:return{role:WH.ChatRole.Assistant,content:$ue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case Ey.ChatRole.Tool:return{role:WH.ChatRole.Tool,content:$ue(t.content),tool_call_id:t.toolCallId};default:return}}s(WMe,"toOpenAiChatMessage");function UBt(t){return t.map(WMe).filter(e=>!!e)}s(UBt,"toOpenAIChatMessages")});var jMe=W(VH=>{"use strict";f();Object.defineProperty(VH,"__esModule",{value:!0});VH.toVsCodeChatMessage=HMe;VH.toVsCodeChatMessages=qBt;var jH=f9();function HH(t){return t.filter(e=>e.type===jH.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(HH,"onlyStringContent");var ub;function HMe(t){switch(ub??=require("vscode"),t.role){case jH.ChatRole.Assistant:let e=ub.LanguageModelChatMessage.Assistant(HH(t.content),t.name);return t.toolCalls&&(e.content=[new ub.LanguageModelTextPart(HH(t.content)),...t.toolCalls.map(n=>{let r;try{r=JSON.parse(n.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+n.id)}return new ub.LanguageModelToolCallPart(n.id,n.function.name,r)})]),e;case jH.ChatRole.User:return ub.LanguageModelChatMessage.User(HH(t.content),t.name);case jH.ChatRole.Tool:{let n=ub.LanguageModelChatMessage.User("");return n.content=[new ub.LanguageModelToolResultPart(t.toolCallId,[new ub.LanguageModelTextPart(HH(t.content))])],n}default:return}}s(HMe,"toVsCodeChatMessage");function qBt(t){return t.map(HMe).filter(e=>!!e)}s(qBt,"toVsCodeChatMessages")});var cb=W(Xm=>{"use strict";f();Object.defineProperty(Xm,"__esModule",{value:!0});Xm.OutputMode=Xm.Raw=Xm.OpenAI=void 0;Xm.toMode=zue;Xm.toVSCode=WBt;Xm.toOpenAI=GBt;var VMe=GMe(),$Me=jMe();Xm.OpenAI=Vue();Xm.Raw=f9();var lT;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(lT||(Xm.OutputMode=lT={}));function zue(t,e){switch(t){case lT.Raw:return e;case lT.VSCode:return e instanceof Array?(0,$Me.toVsCodeChatMessages)(e):(0,$Me.toVsCodeChatMessage)(e);case lT.OpenAI:return e instanceof Array?(0,VMe.toOpenAIChatMessages)(e):(0,VMe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(zue,"toMode");function WBt(t){return zue(lT.VSCode,t)}s(WBt,"toVSCode");function GBt(t){return zue(lT.OpenAI,t)}s(GBt,"toOpenAI")});var Yue=W(p9=>{"use strict";f();Object.defineProperty(p9,"__esModule",{value:!0});p9.jsonRetainedProps=void 0;p9.forEachNode=zMe;p9.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function zMe(t,e){if(e(t),t.type===1)for(let n of t.children)zMe(n,e)}s(zMe,"forEachNode")});var YMe=W(Kue=>{"use strict";f();Object.defineProperty(Kue,"__esModule",{value:!0});Kue.once=HBt;function HBt(t){let e,n=!1,r=s((...i)=>(n||(e=t(...i),n=!0),e),"wrappedFunction");return r.clear=()=>{n=!1},r}s(HBt,"once")});var ede=W(iu=>{"use strict";f();Object.defineProperty(iu,"__esModule",{value:!0});iu.BudgetExceededError=iu.MaterializedChatMessageImage=iu.MaterializedChatMessageBreakpoint=iu.MaterializedChatMessageOpaque=iu.MaterializedChatMessage=iu.MaterializedChatMessageTextChunk=iu.GenericMaterializedContainer=void 0;var CR=YMe(),W0=cb(),Iy=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,n,r,i,o,a,l){if(this.parent=e,this.id=n,this.name=r,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=fb(r)?await r.tokenCount(e):await r.upperBoundTokenCount(e);n+=i})),n}async upperBoundTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n}replaceNode(e,n){return iQe(e,this.children,n)}allMetadata(){return rQe(this)}findById(e){return Zue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)jBt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof eh&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{if(r instanceof eh||r instanceof t){let i=await r.baseMessageTokenCount(e);n+=i}})),n}removeLowestPriorityChild(){let e=[];return Xue(this,e),e}};iu.GenericMaterializedContainer=Iy;var m9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,n,r,i=[],o){this.parent=e,this.text=n,this.priority=r,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,CR.once)(async e=>await e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};iu.MaterializedChatMessageTextChunk=m9;var eh=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,n,r,i,o,a,l,c,u){this.parent=e,this.id=n,this.role=r,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,n){let r=iQe(e,this.children,n);return r&&this.onChunksChange(),r}removeLowestPriorityChild(){let e=[];return Xue(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Zue(e,this)}_tokenCount=(0,CR.once)(async e=>{let n=this.toChatMessage();return e.countMessageTokens((0,W0.toMode)(e.mode,n))});_upperBound=(0,CR.once)(async e=>{let n=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n});baseMessageTokenCount=(0,CR.once)(e=>{let n=this.toChatMessage();return n.content=n.content.map(r=>r.type===W0.Raw.ChatCompletionContentPartKind.Text?{...r,text:""}:r.type===W0.Raw.ChatCompletionContentPartKind.Image?void 0:r).filter(r=>!!r),e.countMessageTokens((0,W0.toMode)(e.mode,n))});_text=(0,CR.once)(()=>{let e=[];for(let{content:n,isTextSibling:r}of tQe(this)){if(n instanceof cT||n instanceof db){e.push(n);continue}if(n instanceof Zm){e.at(-1)instanceof Zm?e[e.length-1]=n:e.push(n);continue}if(n.lineBreakBefore===1||n.lineBreakBefore===2&&!r){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=n.text:e.push(n.text)}return e});toChatMessage(){let e=this.text.map(n=>{if(typeof n=="string")return{type:W0.Raw.ChatCompletionContentPartKind.Text,text:n};if(n instanceof cT)return{type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:oQe(n.src),detail:n.detail}};if(n instanceof db)return n.value;if(n instanceof Zm)return n.part;throw new Error("Unexpected element type")});if(this.role===W0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===W0.Raw.ChatRole.Assistant){let n={role:this.role,content:e};return this.name&&(n.name=this.name),this.toolCalls?.length&&(n.toolCalls=this.toolCalls.map(r=>({function:r.function,id:r.id,type:r.type}))),n}else return this.role===W0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===W0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};iu.MaterializedChatMessage=eh;var db=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return this.part.tokenUsage&&W0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};iu.MaterializedChatMessageOpaque=db;var Zm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return 0}isEmpty=!1};iu.MaterializedChatMessageBreakpoint=Zm;var cT=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,n,r,i,o=[],a,l){this.parent=e,this.id=n,this.src=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,CR.once)(async e=>e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:oQe(this.src),detail:this.detail}}));isEmpty=!1};iu.MaterializedChatMessageImage=cT;function fb(t){return t instanceof Iy||t instanceof eh}s(fb,"isContainerType");function eQe(t){return t instanceof m9||t instanceof cT||t instanceof db||t instanceof Zm}s(eQe,"isContentType");function jBt(t){if(!fb(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(jBt,"assertContainerOrChatMessage");function*tQe(t,e=!1){for(let n of t.children)n instanceof m9?(yield{content:n,isTextSibling:e},e=!0):n instanceof cT||n instanceof db||n instanceof Zm?yield{content:n,isTextSibling:!1}:n instanceof db?yield{content:n,isTextSibling:!0}:(n&&(yield*tQe(n,e)),e=!1)}s(tQe,"contentChunks");function VBt(t,e){let n;function r(i,o){if(eQe(i))(!n||i.priority<n.node.priority)&&(n={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)r(a,o);o.pop()}}if(s(r,"findLowestInTree"),r(t,[]),!n)throw new Error("No lowest priority node found");h9(n.node,e)}s(VBt,"removeLowestPriorityLegacy");var KMe=new WeakMap;function nQe(t){let e=KMe.get(t);if(e!==void 0)return e;let n=!1;return t instanceof Zm?n=!0:t instanceof eh?n=t.children.some(r=>r instanceof Zm):t instanceof Iy&&(n=t.children.some(nQe)),KMe.set(t,n),n}s(nQe,"hasCachePoint");function $Bt(t){if(t instanceof eh)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof eh)return!1;return!0}s($Bt,"shouldLookForCachePointInNode");function Xue(t,e){let n;if(t instanceof Iy&&t.has(1)){VBt(t,e);return}let r=$Bt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(r&&nQe(c)&&(n=void 0,c instanceof Zm))){if(c instanceof Iy&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!n||c.priority<n.value.priority)n={chain:a,index:l,value:c};else if(c.priority===n.value.priority){n.lowestNested??=JMe(n.value);let u=JMe(c);u<n.lowestNested&&(n={chain:a,index:l,value:c,lowestNested:u})}}}if(!n)throw new $H(t);eQe(n.value)||n.value instanceof Iy&&n.value.has(2)||fb(n.value)&&!n.value.children.length?h9(n.value,e):Xue(n.value,e)}s(Xue,"removeLowestPriorityChild");var $H=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let n=[e];for(;n[0].parent;)n.unshift(n[0].parent);let r=n.map(i=>i instanceof eh?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${r.join(" -> ")})`)}};iu.BudgetExceededError=$H;function JMe(t){if(!fb(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let n of t.children)e=Math.min(e,n.priority);return e}s(JMe,"getLowestPriorityAmongChildren");function*rQe(t){yield*t.metadata;for(let e of t.children)fb(e)?yield*rQe(e):yield*e.metadata}s(rQe,"allMetadata");function iQe(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];if(fb(i)){if(i.id===t){let a=e[r];return n.parent=i.parent,e[r]=n,a}let o=i.replaceNode(t,n);if(o)return o}}}s(iQe,"replaceNode");function*XMe(t){let e=[t];for(;e.length>0;){let n=e.pop();yield n,fb(n)&&e.push(...n.children)}}s(XMe,"forEachNode");function zBt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(zBt,"getRoot");function ZMe(t){return t instanceof Iy&&t.keepWithId!==void 0}s(ZMe,"isKeepWith");var Jue=new Set;function YBt(t,e){let n=new Set;for(let r of XMe(t))ZMe(r)&&!Jue.has(r.keepWithId)&&n.add(r.keepWithId);if(n.size===0)return!1;for(let r of n)Jue.add(r);try{let r=zBt(t);for(let i of XMe(r))ZMe(i)&&n.has(i.keepWithId)?h9(i,e):i instanceof eh&&i.toolCalls&&(i.toolCalls=KBt(i.toolCalls,o=>!(o.keepWith&&n.has(o.keepWith.id))),i.isEmpty&&h9(i,e))}finally{for(let r of n)Jue.delete(r)}}s(YBt,"removeOtherKeepWiths");function Zue(t,e){if(e.id===t)return e;for(let n of e.children)if(fb(n)){let r=Zue(t,n);if(r)return r}}s(Zue,"findNodeById");function h9(t,e){let n=t.parent;if(!n)return;let r=n.children.indexOf(t);r!==-1&&(n.children.splice(r,1),e.push(t),YBt(t,e),n.isEmpty?h9(n,e):n.onChunksChange())}s(h9,"removeNode");function oQe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let n of Object.keys(e))if(t.startsWith(n))return`data:${e[n]};base64,${t}`;return t}s(oQe,"getEncodedBase64");function KBt(t,e){for(let n=0;n<t.length;n++){if(e(t[n]))continue;let r=t.slice(0,n);for(let i=n+1;i<t.length;i++)e(t[i])&&r.push(t[i]);return r}return t}s(KBt,"filterIfDifferent")});var aQe=W(()=>{"use strict";f();function JBt(t,e,...n){return{ctor:t,props:e,children:n.flat()}}s(JBt,"_vscpp");function sQe(){throw new Error("This should not be invoked!")}s(sQe,"_vscppf");sQe.isFragment=!0;globalThis.vscpp=JBt;globalThis.vscppf=sQe});var nde=W(zH=>{"use strict";f();Object.defineProperty(zH,"__esModule",{value:!0});zH.PromptElement=void 0;aQe();var tde=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};zH.PromptElement=tde});var fde=W(Ui=>{"use strict";f();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.LogicalWrapper=Ui.IfEmpty=Ui.AbstractKeepWith=Ui.TokenLimit=Ui.Expandable=Ui.Chunk=Ui.LegacyPrioritization=Ui.ToolResult=Ui.PrioritizedList=Ui.Image=Ui.TextChunk=Ui.ToolMessage=Ui.AssistantMessage=Ui.UserMessage=Ui.SystemMessage=Ui.BaseChatMessage=void 0;Ui.isChatMessagePromptElement=XBt;Ui.useKeepWith=n8t;var A9=th(),Cp=nde();function XBt(t){return t instanceof YH||t instanceof KH||t instanceof JH}s(XBt,"isChatMessagePromptElement");var uT=class extends Cp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.BaseChatMessage=uT;var YH=class extends uT{static{s(this,"SystemMessage")}constructor(e){e.role=A9.Raw.ChatRole.System,super(e)}};Ui.SystemMessage=YH;var KH=class extends uT{static{s(this,"UserMessage")}constructor(e){e.role=A9.Raw.ChatRole.User,super(e)}};Ui.UserMessage=KH;var JH=class extends uT{static{s(this,"AssistantMessage")}constructor(e){e.role=A9.Raw.ChatRole.Assistant,super(e)}};Ui.AssistantMessage=JH;var ZBt=/\s+/g,rde=class extends uT{static{s(this,"ToolMessage")}constructor(e){e.role=A9.Raw.ChatRole.Tool,super(e)}};Ui.ToolMessage=rde;var XH=class extends Cp.PromptElement{static{s(this,"TextChunk")}async prepare(e,n,r){let i=this.props.breakOnWhitespace?ZBt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await e8t(e,i,o,r);return vscpp(vscppf,null,a,l)}render(e){return e}};Ui.TextChunk=XH;async function e8t(t,e,n,r){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<n.length;){let a;typeof e=="string"?a=n.indexOf(e,o===-1?0:o+e.length):a=e.exec(n)?.index??-1,a===-1&&(a=n.length);let l=i+n.slice(Math.max(0,o),a);if(await t.countTokens({type:A9.Raw.ChatCompletionContentPartKind.Text,text:l},r)>t.tokenBudget)return i;i=l,o=a}return i}s(e8t,"getTextContentBelowBudget");var ide=class extends Cp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Ui.Image=ide;var ode=class extends Cp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:n=0,descending:r}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=r?n-o:n-e.length+o;return typeof i!="object"?vscpp(XH,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Ui.PrioritizedList=ode;var sde=class extends Cp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Ui.ToolResult=sde;var ade=class extends Cp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.LegacyPrioritization=ade;var lde=class extends Cp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.Chunk=lde;var cde=class extends Cp.PromptElement{static{s(this,"Expandable")}async render(e,n){return vscpp(vscppf,null,await this.props.value(n))}};Ui.Expandable=cde;var ude=class extends Cp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.TokenLimit=ude;var ZH=class extends Cp.PromptElement{static{s(this,"AbstractKeepWith")}};Ui.AbstractKeepWith=ZH;var t8t=0;function n8t(){let t=t8t++;return class extends ZH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(n8t,"useKeepWith");var dde=class extends Cp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(g9,null,this.props.alt),vscpp(g9,{flexGrow:1},this.props.children))}};Ui.IfEmpty=dde;var g9=class extends Cp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.LogicalWrapper=g9});var cQe=W(y9=>{"use strict";f();Object.defineProperty(y9,"__esModule",{value:!0});y9.localize=r8t;y9.localize2=i8t;y9.getConfiguredDefaultLocale=o8t;function lQe(t,e){let n;return e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){let o=i[0];return typeof e[o]<"u"?e[o]:r}),n}s(lQe,"_format");function r8t(t,e,...n){return lQe(e,n)}s(r8t,"localize");function i8t(t,e,...n){let r=lQe(e,n);return{original:r,value:r}}s(i8t,"localize2");function o8t(t){}s(o8t,"getConfiguredDefaultLocale")});var gde=W(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=a8t;Qt.isLittleEndian=l8t;Qt.isBigSurOrNewer=c8t;var uQe=cQe();Qt.LANGUAGE_DEFAULT="en";var v9=!1,b9=!1,x9=!1,mQe=!1,hQe=!1,mde=!1,gQe=!1,hde=!1,AQe=!1,yQe=!1,C9,ej=Qt.LANGUAGE_DEFAULT,pde=Qt.LANGUAGE_DEFAULT,CQe,Ty,wy=globalThis,G0;typeof wy.vscode<"u"&&typeof wy.vscode.process<"u"?G0=wy.vscode.process:typeof process<"u"&&(G0=process);var xQe=typeof G0?.versions?.electron=="string",s8t=xQe&&G0?.type==="renderer";if(typeof G0=="object"){v9=G0.platform==="win32",b9=G0.platform==="darwin",x9=G0.platform==="linux",mQe=x9&&!!G0.env.SNAP&&!!G0.env.SNAP_REVISION,gQe=xQe,AQe=!!G0.env.CI||!!G0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,C9=Qt.LANGUAGE_DEFAULT,ej=Qt.LANGUAGE_DEFAULT;let t=G0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),n=e.availableLanguages["*"];C9=e.locale,pde=e.osLocale,ej=n||Qt.LANGUAGE_DEFAULT,CQe=e._translationsConfigFile}catch{}hQe=!0}else typeof navigator=="object"&&!s8t?(Ty=navigator.userAgent,v9=Ty.indexOf("Windows")>=0,b9=Ty.indexOf("Macintosh")>=0,hde=(Ty.indexOf("Macintosh")>=0||Ty.indexOf("iPad")>=0||Ty.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,x9=Ty.indexOf("Linux")>=0,yQe=Ty?.indexOf("Mobi")>=0,mde=!0,C9=uQe.getConfiguredDefaultLocale(uQe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,ej=C9,pde=navigator.language):console.error("Unable to resolve platform.");function a8t(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(a8t,"PlatformToString");var tj=0;b9?tj=1:v9?tj=3:x9&&(tj=2);Qt.isWindows=v9;Qt.isMacintosh=b9;Qt.isLinux=x9;Qt.isLinuxSnap=mQe;Qt.isNative=hQe;Qt.isElectron=gQe;Qt.isWeb=mde;Qt.isWebWorker=mde&&typeof wy.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?wy.origin:void 0;Qt.isIOS=hde;Qt.isMobile=yQe;Qt.isCI=AQe;Qt.platform=tj;Qt.userAgent=Ty;Qt.language=ej;var dQe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function n(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(n,"isDefaultVariant"),t.isDefaultVariant=n;function r(){return Qt.language==="en"}s(r,"isDefault"),t.isDefault=r})(dQe||(Qt.Language=dQe={}));Qt.locale=C9;Qt.platformLocale=pde;Qt.translationsConfigFile=CQe;Qt.setTimeout0IsFaster=typeof wy.postMessage=="function"&&!wy.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];wy.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),wy.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();Qt.OS=b9||hde?2:v9?1:3;var fQe=!0,pQe=!1;function l8t(){if(!pQe){pQe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,fQe=new Uint16Array(t.buffer)[0]===513}return fQe}s(l8t,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function c8t(t){return parseFloat(t)>=20}s(c8t,"isBigSurOrNewer")});var bQe=W(fA=>{"use strict";f();Object.defineProperty(fA,"__esModule",{value:!0});fA.arch=fA.platform=fA.env=fA.cwd=void 0;var vQe=gde(),dT,Ade=globalThis.vscode;if(typeof Ade<"u"&&typeof Ade.process<"u"){let t=Ade.process;dT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?dT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:dT={get platform(){return vQe.isWindows?"win32":vQe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};fA.cwd=dT.cwd;fA.env=dT.env;fA.platform=dT.platform;fA.arch=dT.arch});var IQe=W(ln=>{"use strict";f();Object.defineProperty(ln,"__esModule",{value:!0});ln.delimiter=ln.sep=ln.toNamespacedPath=ln.parse=ln.format=ln.extname=ln.basename=ln.dirname=ln.relative=ln.resolve=ln.join=ln.isAbsolute=ln.normalize=ln.posix=ln.win32=void 0;var xR=bQe(),u8t=65,d8t=97,f8t=90,p8t=122,hb=46,Kl=47,Pd=92,pb=58,m8t=63,nj=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function h8t(t,e){if(t===null||typeof t!="object")throw new nj(e,"Object",t)}s(h8t,"validateObject");function pa(t,e){if(typeof t!="string")throw new nj(e,"string",t)}s(pa,"validateString");var Nd=xR.platform==="win32";function si(t){return t===Kl||t===Pd}s(si,"isPathSeparator");function yde(t){return t===Kl}s(yde,"isPosixPathSeparator");function mb(t){return t>=u8t&&t<=f8t||t>=d8t&&t<=p8t}s(mb,"isWindowsDeviceRoot");function rj(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Kl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==hb||i.charCodeAt(i.length-2)!==hb){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===hb&&l!==-1?++l:l=-1}return i}s(rj,"normalizeString");function EQe(t,e){h8t(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${e.ext||""}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(EQe,"_format");ln.win32={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],pa(o,"path"),o.length===0)continue}else e.length===0?o=xR.cwd():(o=xR.env[`=${e}`]||xR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Pd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)si(d)&&(l=1,u=!0);else if(si(d))if(u=!0,si(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!si(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&si(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!si(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else mb(d)&&o.charCodeAt(1)===pb&&(c=o.slice(0,2),l=2,a>2&&si(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=rj(n,!r,"\\",si),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){pa(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return yde(o)?"\\":t;if(si(o))if(i=!0,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else mb(o)&&t.charCodeAt(1)===pb&&(r=t.slice(0,2),n=2,e>2&&si(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?rj(t.slice(n),!i,"\\",si):"";return a.length===0&&!i&&(a="."),a.length>0&&si(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){pa(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return si(n)||e>2&&mb(n)&&t.charCodeAt(1)===pb&&si(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];pa(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&si(n.charCodeAt(0))){++i;let o=n.length;o>1&&si(n.charCodeAt(1))&&(++i,o>2&&(si(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&si(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ln.win32.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e)return"";let n=ln.win32.resolve(t),r=ln.win32.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Pd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Pd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Pd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Pd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Pd&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Pd)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Pd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Pd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Pd&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ln.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Pd){if(e.charCodeAt(1)===Pd){let n=e.charCodeAt(2);if(n!==m8t&&n!==hb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(mb(e.charCodeAt(0))&&e.charCodeAt(1)===pb&&e.charCodeAt(2)===Pd)return`\\\\?\\${e}`;return t},dirname(t){pa(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return si(i)?t:".";if(si(i)){if(n=r=1,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else mb(i)&&t.charCodeAt(1)===pb&&(n=e>2&&si(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(si(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&pa(e,"ext"),pa(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&mb(t.charCodeAt(0))&&t.charCodeAt(1)===pb&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(si(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(si(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){pa(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===pb&&mb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(si(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===hb?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:EQe.bind(null,"\\"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return si(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(si(i)){if(r=1,si(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!si(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&si(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!si(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(mb(i)&&t.charCodeAt(1)===pb){if(n<=2)return e.root=e.dir=t,e;if(r=2,si(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),si(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===hb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var g8t=(()=>{if(Nd){let t=/\\/g;return()=>{let e=xR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>xR.cwd()})();ln.posix={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:g8t();pa(i,"path"),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Kl)}return e=rj(e,!n,"/",yde),n?`/${e}`:e.length>0?e:"."},normalize(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,n=t.charCodeAt(t.length-1)===Kl;return t=rj(t,!e,"/",yde),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return pa(t,"path"),t.length>0&&t.charCodeAt(0)===Kl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];pa(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":ln.posix.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e||(t=ln.posix.resolve(t),e=ln.posix.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Kl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Kl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Kl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Kl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Kl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&pa(e,"ext"),pa(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Kl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Kl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){pa(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Kl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===hb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:EQe.bind(null,"/"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Kl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Kl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===hb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ln.posix.win32=ln.win32.win32=ln.win32;ln.posix.posix=ln.win32.posix=ln.posix;ln.normalize=Nd?ln.win32.normalize:ln.posix.normalize;ln.isAbsolute=Nd?ln.win32.isAbsolute:ln.posix.isAbsolute;ln.join=Nd?ln.win32.join:ln.posix.join;ln.resolve=Nd?ln.win32.resolve:ln.posix.resolve;ln.relative=Nd?ln.win32.relative:ln.posix.relative;ln.dirname=Nd?ln.win32.dirname:ln.posix.dirname;ln.basename=Nd?ln.win32.basename:ln.posix.basename;ln.extname=Nd?ln.win32.extname:ln.posix.extname;ln.format=Nd?ln.win32.format:ln.posix.format;ln.parse=Nd?ln.win32.parse:ln.posix.parse;ln.toNamespacedPath=Nd?ln.win32.toNamespacedPath:ln.posix.toNamespacedPath;ln.sep=Nd?ln.win32.sep:ln.posix.sep;ln.delimiter=Nd?ln.win32.delimiter:ln.posix.delimiter});var BQe=W(vR=>{"use strict";f();Object.defineProperty(vR,"__esModule",{value:!0});vR.URI=void 0;vR.isUriComponents=I8t;vR.uriToFsPath=aj;var TQe=IQe(),oj=gde(),A8t=/^\w[\w\d+.-]*$/,y8t=/^\//,C8t=/^\/\//;function x8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!A8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!y8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(C8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(x8t,"_validateUri");function v8t(t,e){return!t&&!e?"file":t}s(v8t,"_schemeFix");function b8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==nh&&(e=nh+e):e=nh;break}return e}s(b8t,"_referenceResolution");var $o="",nh="/",E8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,sj=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=v8t(e,a),this.authority=n||$o,this.path=b8t(this.scheme,r||$o),this.query=i||$o,this.fragment=o||$o,x8t(this,a))}get fsPath(){return aj(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=$o),r===void 0?r=this.authority:r===null&&(r=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new gb(n,r,i,o,a)}static parse(e,n=!1){let r=E8t.exec(e);return r?new gb(r[2]||$o,ij(r[4]||$o),ij(r[5]||$o),ij(r[7]||$o),ij(r[9]||$o),n):new gb($o,$o,$o,$o,$o)}static file(e){let n=$o;if(oj.isWindows&&(e=e.replace(/\\/g,nh)),e[0]===nh&&e[1]===nh){let r=e.indexOf(nh,2);r===-1?(n=e.substring(2),e=nh):(n=e.substring(2,r),e=e.substring(r)||nh)}return new gb("file",n,e,$o,$o)}static from(e,n){return new gb(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return oj.isWindows&&e.scheme==="file"?r=t.file(TQe.win32.join(aj(e,!0),...n)).path:r=TQe.posix.join(e.path,...n),e.with({path:r})}toString(e=!1){return Cde(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new gb(e);return n._formatted=e.external??null,n._fsPath=e._sep===SQe?e.fsPath??null:null,n}}else return e}};vR.URI=sj;function I8t(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(I8t,"isUriComponents");var SQe=oj.isWindows?1:void 0,gb=class extends sj{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=aj(this,!1)),this._fsPath}toString(e=!1){return e?Cde(this,!0):(this._formatted||(this._formatted=Cde(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=SQe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},RQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function wQe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=RQe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(wQe,"encodeURIComponentFast");function T8t(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=RQe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(T8t,"encodeURIComponentMinimal");function aj(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,oj.isWindows&&(n=n.replace(/\//g,"\\")),n}s(aj,"uriToFsPath");function Cde(t,e){let n=e?T8t:wQe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=nh,r+=nh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:wQe(c,!1,!1)),r}s(Cde,"_asFormatted");function kQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+kQe(t.substr(3)):t}}s(kQe,"decodeURIComponentGraceful");var _Qe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ij(t){return t.match(_Qe)?t.replace(_Qe,e=>kQe(e)):t}s(ij,"percentDecode")});var bde=W(Ab=>{"use strict";f();Object.defineProperty(Ab,"__esModule",{value:!0});Ab.PromptReference=Ab.ChatResponseReferencePartStatusKind=Ab.PromptMetadata=void 0;var E9=BQe(),xde=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Ab.PromptMetadata=xde;var DQe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(DQe||(Ab.ChatResponseReferencePartStatusKind=DQe={}));var vde=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let n=s(r=>"scheme"in r?E9.URI.from(r):{uri:E9.URI.from(r.uri),range:r.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&n(e.anchor.value)}:n(e.anchor),e.iconPath&&("scheme"in e.iconPath?E9.URI.from(e.iconPath):"light"in e.iconPath?{light:E9.URI.from(e.iconPath.light),dark:E9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,n,r){this.anchor=e,this.iconPath=n,this.options=r}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Ab.PromptReference=vde});var Bde=W(ER=>{"use strict";f();Object.defineProperty(ER,"__esModule",{value:!0});ER.PromptRenderer=ER.MetadataMap=void 0;var w8t=Yue(),I9=ede(),bR=cb(),La=fde(),kde=bde(),PQe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(PQe||(ER.MetadataMap=PQe={}));var Ide=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new cj(null,0);_tokenLimits=[];tracer=void 0;constructor(e,n,r,i){this._endpoint=e,this._ctor=n,this._props=r,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,n,r,i){let o=new Map;for(let[c,u]of n.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=MQe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof La.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:bR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await LQe(v,()=>b.prepare?.(g[E],r,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await LQe(v,()=>b.render(v.node.getState(),_,r,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let B=await this._processPromptRenderPiece(new fT(_.tokenBudget,this._endpoint),b,E,k,r,i);E instanceof La.Expandable&&this._growables.push({initialConsume:B,elem:b.node}),e.consume(B)}}}async _processPromptRenderPiece(e,n,r,i,o,a){let l=FQe(i),c=new fT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await _8t(this._tokenizer,n,r,l);return c.consume(u),await this._handlePromptChildren(n,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new fT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,n){let r=await this.renderRaw(e,n);return{...r,messages:(0,bR.toMode)(this._tokenizer.mode,r.messages)}}async renderRaw(e,n){await this._processPromptPieces(new fT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,n);let{container:r,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,n);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:r,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...r.toChatMessages()],l=await r.tokenCount(this._tokenizer),c=[...r.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof pA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(uj),p=i.map(m=>{if(!(m instanceof pA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(uj);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,n){let r=this._root.materialize(),i=[...r.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=r.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,n))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:r,allMetadata:i,removed:a}}async _grow(e,n,r,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof La.Expandable))throw new Error("unreachable: expected growable");let l=new cj(null,0,o.elem.id),c=new fT(r-n+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:bR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(n-=o.initialConsume,n+=u,n>=r)break}return!0}_handlePromptChildren(e,n,r,i,o){if(e.ctor===La.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,n);return}let a=[];for(let l of n){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},lj(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(r,a,i,o)}_handleIntrinsic(e,n,r,i,o){switch(n){case"meta":return this._handleIntrinsicMeta(e,r,i);case"br":return this._handleIntrinsicLineBreak(e,r,i,r.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,r,i);case"references":return this._handleIntrinsicReferences(e,r,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,r,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,r.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,r,i,o)}throw new Error(`Unknown intrinsic element ${n}!`)}_handleIntrinsicCacheBreakpoint(e,n,r,i){if(r.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(n,i)}_handleIntrinsicMeta(e,n,r){if(r.length>0)throw new Error("<meta /> must not have children!");n.local?e.addMetadata(n.value):this._root.addMetadata(n.value)}_handleIntrinsicLineBreak(e,n,r,i,o){if(r.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,n){let r=e.appendPieceJSON(n.node);if(this.tracer?.includeInEpoch)for(let i of r.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,n,r){if(r.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...n.value)}_handleIntrinsicReferences(e,n,r){if(r.length>0)throw new Error("<reference /> must not have children!");for(let i of n.value)e.addMetadata(new pA(i))}_handleIntrinsicIgnoredFiles(e,n,r){if(r.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...n.value)}_handleExtrinsicTextChunkChildren(e,n,r,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new pA(c));else this._handleIntrinsic(e,l.name,l.props,lj(l.children),n.childIndex)}e.appendStringChild(o.join(""),r?.priority??Number.MAX_SAFE_INTEGER,a,n.childIndex,!0)}};ER.PromptRenderer=Ide;async function _8t(t,e,n,r){let i=0;if((0,La.isChatMessagePromptElement)(n)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,bR.toMode)(t.mode,o))}for(let o of r)o.kind==="literal"&&(i+=await t.tokenLength({type:bR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(_8t,"computeTokensConsumedByLiterals");function FQe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new _de(String(t))):S8t(t)?lj(t.children,e):R8t(t)?lj(t,e):typeof t.ctor=="string"?e.push(new Tde(t.ctor,t.props,t.children)):e.push(new wde(t.ctor,t.props,t.children)),e)}s(FQe,"flattenAndReduce");function lj(t,e=[]){for(let n of t)FQe(n,e);return e}s(lj,"flattenAndReduceArr");var Tde=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,n,r){this.name=e,this.props=n,this.children=r}},wde=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,n,r){this.ctor=e,this.props=n,this.children=r}},_de=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,n){this.value=e,this.priority=n}},fT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,n){this.tokenBudget=e,this.endpoint=n}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},cj=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,n,r){let i=new t(null,e);switch(i._metadata=n.references?.map(o=>new pA(kde.PromptReference.fromJSON(o)))??[],i._children=n.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,r);case 2:return T9.fromJSON(i,a,o);default:}}).filter(uj),n.ctor){case 1:i._objFlags=n.flags??0,i._obj=new La.BaseChatMessage(n.props);break;case 2:{if(n.keepWithId!==void 0){let o=r.get(n.keepWithId);o||(o=(0,La.useKeepWith)(),r.set(n.keepWithId,o)),i._obj=new o(n.props||{})}else i._obj=new La.LogicalWrapper(n.props||{});i._objFlags=n.flags??0;break}case 3:i._obj=new La.Image(n.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,n,r=t._nextId++){this.parent=e,this.childIndex=n,this.id=r}setObj(e){this._obj=e,this._obj instanceof La.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof La.Chunk&&(this._objFlags|=2),this._obj instanceof La.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let n=t.fromJSON(this._children.length,e,new Map);return this._children.push(n),n}appendStringChild(e,n,r,i=this._children.length,o=!1){this._children.push(new T9(this,i,e,n,r,o))}appendLineBreak(e,n=this._children.length){this._children.push(new T9(this,n,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((n,r)=>n.childIndex-r.childIndex).map(n=>n.toJSON()).filter(uj),props:{},references:this._metadata.filter(n=>n instanceof pA).map(n=>n.reference.toJSON())};if(this._obj&&(e.props=Ede(this._obj.props,w8t.jsonRetainedProps)),this._obj instanceof La.BaseChatMessage)e.ctor=1,Object.assign(e.props,Ede(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof La.Image)return{...e,ctor:3,props:{...e.props,...Ede(this._obj.props,["src","detail"])}};this._obj instanceof La.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((n,r)=>n.childIndex-r.childIndex),this._obj instanceof La.Image)return new I9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof La.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new I9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof La.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof La.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,n=>this._children.map(r=>r.materialize(n)))}else{let n=new I9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),r=>this._children.map(i=>i.materialize(r)),this._metadata,this._objFlags);return this._obj instanceof La.AbstractKeepWith&&(n.keepWithId=this._obj.id),n}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,n=this._children.length){if(!(this._obj instanceof La.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new Sde({type:bR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},n))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},Sde=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,n){this.part=e,this.childIndex=n}toJSON(){}materialize(e){return new I9.MaterializedChatMessageBreakpoint(e,this.part)}},T9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,n,r){return new t(e,n,r.text,r.priority,r.references?.map(i=>new pA(kde.PromptReference.fromJSON(i))),r.lineBreakBefore)}kind=2;constructor(e,n,r,i,o,a=!1){this.parent=e,this.childIndex=n,this.text=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let n=this.lineBreakBefore?1:this.childIndex===0?2:0;return new I9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],n)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof pA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function S8t(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(S8t,"isFragmentCtor");function uj(t){return t!==void 0}s(uj,"isDefined");var Rde=class extends kde.PromptMetadata{static{s(this,"InternalMetadata")}},pA=class extends Rde{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function R8t(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(R8t,"isIterable");function Ede(t,e){let n={};for(let r of e)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}s(Ede,"pickProps");function MQe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(MQe,"atPath");var NQe=new WeakSet;async function LQe(t,e){try{return await e()}catch(n){throw n instanceof Error&&!NQe.has(n)&&n.constructor.name!=="CancellationError"&&(NQe.add(n),n.message+=` (at tsx element ${MQe(t.path)})`),n}}s(LQe,"annotateError")});var QQe=W(dj=>{"use strict";f();Object.defineProperty(dj,"__esModule",{value:!0});dj.VSCodeTokenizer=void 0;var Dde=cb(),Pde=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=Dde.OutputMode.VSCode;constructor(e,n){if(this.countTokens=e,n!==Dde.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,n){return e.type===Dde.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,n):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};dj.VSCodeTokenizer=Pde});var OQe=W(IR=>{"use strict";f();Object.defineProperty(IR,"__esModule",{value:!0});IR.tracerCss=IR.tracerSrc=void 0;IR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';IR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var HQe=W(pj=>{"use strict";f();Object.defineProperty(pj,"__esModule",{value:!0});pj.HTMLTracer=void 0;var UQe=OQe(),pT=ede(),k8t=cb(),Nde=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return Lde.create({epochs:this.epochs,traceData:WQe(this.traceData)})}serveRouter(e){return new fj({baseAddress:e,epochs:this.epochs,traceData:WQe(this.traceData)})}};pj.HTMLTracer=Nde;var fj=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,n){let r=e,i=n,o=new URL(r.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,r,i);break;case`${a}/regen`:this.onRegen(o,r,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:n}=this.opts;return`<body>
			<style>${UQe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(n)};
				const DEFAULT_MODEL = ${JSON.stringify(await qQe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${UQe.tracerSrc}
			</script>
		</body>`}async onRegen(e,n,r){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await qQe(i.tokenizer,a),c=JSON.stringify(l);r.setHeader("Content-Type","application/json"),r.setHeader("Content-Length",Buffer.byteLength(c)),r.end(c)}onRoot(e,n,r){this.getHTML().then(i=>{r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",Buffer.byteLength(i)),r.end(i)})}},Lde=class t extends fj{static{s(this,"RequestServer")}server;static async create(e){let{createServer:n}=await Promise.resolve().then(()=>require("http")),r=n((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{r.listen(0,"127.0.0.1",()=>a(r.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},r);return o}constructor(e,n){super(e),this.server=n}dispose(){this.server.closeAllConnections(),this.server.close()}};async function qQe(t,e){return{container:await GQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(qQe,"serializeRenderData");async function GQe(t,e,n){let r={metadata:e.metadata.map(D8t),priority:e.priority};if(e instanceof pT.MaterializedChatMessageTextChunk)return{...r,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof pT.MaterializedChatMessageImage)return{...r,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof pT.MaterializedChatMessageOpaque||e instanceof pT.MaterializedChatMessageBreakpoint)return;{let i={...r,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>GQe(t,o,n||e instanceof pT.MaterializedChatMessage)))).filter(o=>!!o),tokens:n?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof pT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof pT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:k8t.Raw.ChatRole.display(e.role),text:o}}}B8t(e)}s(GQe,"serializeMaterialized");function B8t(t){throw new Error("unreachable")}s(B8t,"assertNever");function D8t(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(D8t,"serializeMetadata");var WQe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var VQe=W(jQe=>{"use strict";f();Object.defineProperty(jQe,"__esModule",{value:!0})});var zQe=W($Qe=>{"use strict";f();Object.defineProperty($Qe,"__esModule",{value:!0})});var KQe=W(YQe=>{"use strict";f();Object.defineProperty(YQe,"__esModule",{value:!0})});var th=W(Ts=>{"use strict";f();var P8t=Ts&&Ts.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),mT=Ts&&Ts.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&P8t(e,t,n)};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.contentType=Ts.PromptRenderer=Ts.MetadataMap=Ts.PromptElement=Ts.JSONTree=void 0;Ts.renderPrompt=F8t;Ts.renderElementJSON=M8t;var Fde=cb(),JQe=Bde(),N8t=QQe();mT(HQe(),Ts);Ts.JSONTree=Yue();mT(cb(),Ts);mT(fde(),Ts);mT(bde(),Ts);mT(VQe(),Ts);mT(zQe(),Ts);mT(KQe(),Ts);var L8t=nde();Object.defineProperty(Ts,"PromptElement",{enumerable:!0,get:s(function(){return L8t.PromptElement},"get")});var XQe=Bde();Object.defineProperty(Ts,"MetadataMap",{enumerable:!0,get:s(function(){return XQe.MetadataMap},"get")});Object.defineProperty(Ts,"PromptRenderer",{enumerable:!0,get:s(function(){return XQe.PromptRenderer},"get")});async function F8t(t,e,n,r,i,o,a=Fde.OutputMode.VSCode){let l="countTokens"in r?new N8t.VSCodeTokenizer((p,m)=>r.countTokens(p,m),a):r,c=new JQe.PromptRenderer(n,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(F8t,"renderPrompt");Ts.contentType="application/vnd.codechat.prompt+json.1";function M8t(t,e,n,r){return new JQe.PromptRenderer({modelMaxPromptTokens:n?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:Fde.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===Fde.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(n?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(r)}s(M8t,"renderElementJSON")});var r6=W(($Tr,KUe)=>{f();var jPt="2.0.0",VPt=Number.MAX_SAFE_INTEGER||9007199254740991,$Pt=16,zPt=250,YPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];KUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:$Pt,MAX_SAFE_BUILD_LENGTH:zPt,MAX_SAFE_INTEGER:VPt,RELEASE_TYPES:YPt,SEMVER_SPEC_VERSION:jPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var i6=W((YTr,JUe)=>{f();var KPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};JUe.exports=KPt});var XR=W((IA,XUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:nfe,MAX_SAFE_BUILD_LENGTH:JPt,MAX_LENGTH:XPt}=r6(),ZPt=i6();IA=XUe.exports={};var e9t=IA.re=[],t9t=IA.safeRe=[],gn=IA.src=[],n9t=IA.safeSrc=[],An=IA.t={},r9t=0,rfe="[a-zA-Z0-9-]",i9t=[["\\s",1],["\\d",XPt],[rfe,JPt]],o9t=s(t=>{for(let[e,n]of i9t)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},"makeSafeRegex"),Zr=s((t,e,n)=>{let r=o9t(e),i=r9t++;ZPt(t,i,e),An[t]=i,gn[i]=e,n9t[i]=r,e9t[i]=new RegExp(e,n?"g":void 0),t9t[i]=new RegExp(r,n?"g":void 0)},"createToken");Zr("NUMERICIDENTIFIER","0|[1-9]\\d*");Zr("NUMERICIDENTIFIERLOOSE","\\d+");Zr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${rfe}*`);Zr("MAINVERSION",`(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})`);Zr("MAINVERSIONLOOSE",`(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})`);Zr("PRERELEASEIDENTIFIER",`(?:${gn[An.NUMERICIDENTIFIER]}|${gn[An.NONNUMERICIDENTIFIER]})`);Zr("PRERELEASEIDENTIFIERLOOSE",`(?:${gn[An.NUMERICIDENTIFIERLOOSE]}|${gn[An.NONNUMERICIDENTIFIER]})`);Zr("PRERELEASE",`(?:-(${gn[An.PRERELEASEIDENTIFIER]}(?:\\.${gn[An.PRERELEASEIDENTIFIER]})*))`);Zr("PRERELEASELOOSE",`(?:-?(${gn[An.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${gn[An.PRERELEASEIDENTIFIERLOOSE]})*))`);Zr("BUILDIDENTIFIER",`${rfe}+`);Zr("BUILD",`(?:\\+(${gn[An.BUILDIDENTIFIER]}(?:\\.${gn[An.BUILDIDENTIFIER]})*))`);Zr("FULLPLAIN",`v?${gn[An.MAINVERSION]}${gn[An.PRERELEASE]}?${gn[An.BUILD]}?`);Zr("FULL",`^${gn[An.FULLPLAIN]}$`);Zr("LOOSEPLAIN",`[v=\\s]*${gn[An.MAINVERSIONLOOSE]}${gn[An.PRERELEASELOOSE]}?${gn[An.BUILD]}?`);Zr("LOOSE",`^${gn[An.LOOSEPLAIN]}$`);Zr("GTLT","((?:<|>)?=?)");Zr("XRANGEIDENTIFIERLOOSE",`${gn[An.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Zr("XRANGEIDENTIFIER",`${gn[An.NUMERICIDENTIFIER]}|x|X|\\*`);Zr("XRANGEPLAIN",`[v=\\s]*(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:${gn[An.PRERELEASE]})?${gn[An.BUILD]}?)?)?`);Zr("XRANGEPLAINLOOSE",`[v=\\s]*(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:${gn[An.PRERELEASELOOSE]})?${gn[An.BUILD]}?)?)?`);Zr("XRANGE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAIN]}$`);Zr("XRANGELOOSE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAINLOOSE]}$`);Zr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${nfe}})(?:\\.(\\d{1,${nfe}}))?(?:\\.(\\d{1,${nfe}}))?`);Zr("COERCE",`${gn[An.COERCEPLAIN]}(?:$|[^\\d])`);Zr("COERCEFULL",gn[An.COERCEPLAIN]+`(?:${gn[An.PRERELEASE]})?(?:${gn[An.BUILD]})?(?:$|[^\\d])`);Zr("COERCERTL",gn[An.COERCE],!0);Zr("COERCERTLFULL",gn[An.COERCEFULL],!0);Zr("LONETILDE","(?:~>?)");Zr("TILDETRIM",`(\\s*)${gn[An.LONETILDE]}\\s+`,!0);IA.tildeTrimReplace="$1~";Zr("TILDE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAIN]}$`);Zr("TILDELOOSE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAINLOOSE]}$`);Zr("LONECARET","(?:\\^)");Zr("CARETTRIM",`(\\s*)${gn[An.LONECARET]}\\s+`,!0);IA.caretTrimReplace="$1^";Zr("CARET",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAIN]}$`);Zr("CARETLOOSE",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAINLOOSE]}$`);Zr("COMPARATORLOOSE",`^${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]})$|^$`);Zr("COMPARATOR",`^${gn[An.GTLT]}\\s*(${gn[An.FULLPLAIN]})$|^$`);Zr("COMPARATORTRIM",`(\\s*)${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]}|${gn[An.XRANGEPLAIN]})`,!0);IA.comparatorTrimReplace="$1$2$3";Zr("HYPHENRANGE",`^\\s*(${gn[An.XRANGEPLAIN]})\\s+-\\s+(${gn[An.XRANGEPLAIN]})\\s*$`);Zr("HYPHENRANGELOOSE",`^\\s*(${gn[An.XRANGEPLAINLOOSE]})\\s+-\\s+(${gn[An.XRANGEPLAINLOOSE]})\\s*$`);Zr("STAR","(<|>)?=?\\s*\\*");Zr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Zr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var UV=W((ZTr,ZUe)=>{f();var s9t=Object.freeze({loose:!0}),a9t=Object.freeze({}),l9t=s(t=>t?typeof t!="object"?s9t:t:a9t,"parseOptions");ZUe.exports=l9t});var ife=W((nwr,nqe)=>{f();var eqe=/^[0-9]+$/,tqe=s((t,e)=>{let n=eqe.test(t),r=eqe.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},"compareIdentifiers"),c9t=s((t,e)=>tqe(e,t),"rcompareIdentifiers");nqe.exports={compareIdentifiers:tqe,rcompareIdentifiers:c9t}});var lu=W((owr,sqe)=>{f();var qV=i6(),{MAX_LENGTH:rqe,MAX_SAFE_INTEGER:WV}=r6(),{safeRe:iqe,safeSrc:oqe,t:GV}=XR(),u9t=UV(),{compareIdentifiers:ZR}=ife(),ofe=class t{static{s(this,"SemVer")}constructor(e,n){if(n=u9t(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>rqe)throw new TypeError(`version is longer than ${rqe} characters`);qV("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?iqe[GV.LOOSE]:iqe[GV.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>WV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>WV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>WV||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<WV)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(qV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),ZR(this.major,e.major)||ZR(this.minor,e.minor)||ZR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(qV("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ZR(r,i)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(qV("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ZR(r,i)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let i=new RegExp(`^${this.options.loose?oqe[GV.PRERELEASELOOSE]:oqe[GV.PRERELEASE]}$`),o=`-${n}`.match(i);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),ZR(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};sqe.exports=ofe});var NT=W((lwr,lqe)=>{f();var aqe=lu(),d9t=s((t,e,n=!1)=>{if(t instanceof aqe)return t;try{return new aqe(t,e)}catch(r){if(!n)return null;throw r}},"parse");lqe.exports=d9t});var uqe=W((dwr,cqe)=>{f();var f9t=NT(),p9t=s((t,e)=>{let n=f9t(t,e);return n?n.version:null},"valid");cqe.exports=p9t});var fqe=W((mwr,dqe)=>{f();var m9t=NT(),h9t=s((t,e)=>{let n=m9t(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},"clean");dqe.exports=h9t});var hqe=W((Awr,mqe)=>{f();var pqe=lu(),g9t=s((t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new pqe(t instanceof pqe?t.version:t,n).inc(e,r,i).version}catch{return null}},"inc");mqe.exports=g9t});var yqe=W((xwr,Aqe)=>{f();var gqe=NT(),A9t=s((t,e)=>{let n=gqe(t,null,!0),r=gqe(e,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,a=o?n:r,l=o?r:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"},"diff");Aqe.exports=A9t});var xqe=W((Ewr,Cqe)=>{f();var y9t=lu(),C9t=s((t,e)=>new y9t(t,e).major,"major");Cqe.exports=C9t});var bqe=W((wwr,vqe)=>{f();var x9t=lu(),v9t=s((t,e)=>new x9t(t,e).minor,"minor");vqe.exports=v9t});var Iqe=W((Rwr,Eqe)=>{f();var b9t=lu(),E9t=s((t,e)=>new b9t(t,e).patch,"patch");Eqe.exports=E9t});var wqe=W((Dwr,Tqe)=>{f();var I9t=NT(),T9t=s((t,e)=>{let n=I9t(t,e);return n&&n.prerelease.length?n.prerelease:null},"prerelease");Tqe.exports=T9t});var Ip=W((Lwr,Sqe)=>{f();var _qe=lu(),w9t=s((t,e,n)=>new _qe(t,n).compare(new _qe(e,n)),"compare");Sqe.exports=w9t});var kqe=W((Qwr,Rqe)=>{f();var _9t=Ip(),S9t=s((t,e,n)=>_9t(e,t,n),"rcompare");Rqe.exports=S9t});var Dqe=W((qwr,Bqe)=>{f();var R9t=Ip(),k9t=s((t,e)=>R9t(t,e,!0),"compareLoose");Bqe.exports=k9t});var HV=W((Hwr,Nqe)=>{f();var Pqe=lu(),B9t=s((t,e,n)=>{let r=new Pqe(t,n),i=new Pqe(e,n);return r.compare(i)||r.compareBuild(i)},"compareBuild");Nqe.exports=B9t});var Fqe=W(($wr,Lqe)=>{f();var D9t=HV(),P9t=s((t,e)=>t.sort((n,r)=>D9t(n,r,e)),"sort");Lqe.exports=P9t});var Qqe=W((Kwr,Mqe)=>{f();var N9t=HV(),L9t=s((t,e)=>t.sort((n,r)=>N9t(r,n,e)),"rsort");Mqe.exports=L9t});var o6=W((Zwr,Oqe)=>{f();var F9t=Ip(),M9t=s((t,e,n)=>F9t(t,e,n)>0,"gt");Oqe.exports=M9t});var jV=W((n_r,Uqe)=>{f();var Q9t=Ip(),O9t=s((t,e,n)=>Q9t(t,e,n)<0,"lt");Uqe.exports=O9t});var sfe=W((o_r,qqe)=>{f();var U9t=Ip(),q9t=s((t,e,n)=>U9t(t,e,n)===0,"eq");qqe.exports=q9t});var afe=W((l_r,Wqe)=>{f();var W9t=Ip(),G9t=s((t,e,n)=>W9t(t,e,n)!==0,"neq");Wqe.exports=G9t});var VV=W((d_r,Gqe)=>{f();var H9t=Ip(),j9t=s((t,e,n)=>H9t(t,e,n)>=0,"gte");Gqe.exports=j9t});var $V=W((m_r,Hqe)=>{f();var V9t=Ip(),$9t=s((t,e,n)=>V9t(t,e,n)<=0,"lte");Hqe.exports=$9t});var lfe=W((A_r,jqe)=>{f();var z9t=sfe(),Y9t=afe(),K9t=o6(),J9t=VV(),X9t=jV(),Z9t=$V(),e6t=s((t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return z9t(t,n,r);case"!=":return Y9t(t,n,r);case">":return K9t(t,n,r);case">=":return J9t(t,n,r);case"<":return X9t(t,n,r);case"<=":return Z9t(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");jqe.exports=e6t});var $qe=W((x_r,Vqe)=>{f();var t6t=lu(),n6t=NT(),{safeRe:zV,t:YV}=XR(),r6t=s((t,e)=>{if(t instanceof t6t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?zV[YV.COERCEFULL]:zV[YV.COERCE]);else{let c=e.includePrerelease?zV[YV.COERCERTLFULL]:zV[YV.COERCERTL],u;for(;(u=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],i=n[3]||"0",o=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",l=e.includePrerelease&&n[6]?`+${n[6]}`:"";return n6t(`${r}.${i}.${o}${a}${l}`,e)},"coerce");Vqe.exports=r6t});var Yqe=W((E_r,zqe)=>{f();var cfe=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}};zqe.exports=cfe});var Tp=W((w_r,Zqe)=>{f();var i6t=/\s+/g,ufe=class t{static{s(this,"Range")}constructor(e,n){if(n=s6t(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof dfe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(i6t," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Jqe(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&p6t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&d6t)|(this.options.loose&&f6t))+":"+e,i=Kqe.get(r);if(i)return i;let o=this.options.loose,a=o?Ud[Hu.HYPHENRANGELOOSE]:Ud[Hu.HYPHENRANGE];e=e.replace(a,E6t(this.options.includePrerelease)),ws("hyphen replace",e),e=e.replace(Ud[Hu.COMPARATORTRIM],l6t),ws("comparator trim",e),e=e.replace(Ud[Hu.TILDETRIM],c6t),ws("tilde trim",e),e=e.replace(Ud[Hu.CARETTRIM],u6t),ws("caret trim",e);let l=e.split(" ").map(p=>m6t(p,this.options)).join(" ").split(/\s+/).map(p=>b6t(p,this.options));o&&(l=l.filter(p=>(ws("loose invalid filter",p,this.options),!!p.match(Ud[Hu.COMPARATORLOOSE])))),ws("range list",l);let c=new Map,u=l.map(p=>new dfe(p,this.options));for(let p of u){if(Jqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return Kqe.set(r,d),d}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>Xqe(r,n)&&e.set.some(i=>Xqe(i,n)&&r.every(o=>i.every(a=>o.intersects(a,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new a6t(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(I6t(this.set[n],e,this.options))return!0;return!1}};Zqe.exports=ufe;var o6t=Yqe(),Kqe=new o6t,s6t=UV(),dfe=s6(),ws=i6(),a6t=lu(),{safeRe:Ud,t:Hu,comparatorTrimReplace:l6t,tildeTrimReplace:c6t,caretTrimReplace:u6t}=XR(),{FLAG_INCLUDE_PRERELEASE:d6t,FLAG_LOOSE:f6t}=r6(),Jqe=s(t=>t.value==="<0.0.0-0","isNullSet"),p6t=s(t=>t.value==="","isAny"),Xqe=s((t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},"isSatisfiable"),m6t=s((t,e)=>(ws("comp",t,e),t=A6t(t,e),ws("caret",t),t=h6t(t,e),ws("tildes",t),t=C6t(t,e),ws("xrange",t),t=v6t(t,e),ws("stars",t),t),"parseComparator"),ju=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),h6t=s((t,e)=>t.trim().split(/\s+/).map(n=>g6t(n,e)).join(" "),"replaceTildes"),g6t=s((t,e)=>{let n=e.loose?Ud[Hu.TILDELOOSE]:Ud[Hu.TILDE];return t.replace(n,(r,i,o,a,l)=>{ws("tilde",t,r,i,o,a,l);let c;return ju(i)?c="":ju(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:ju(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(ws("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,ws("tilde return",c),c})},"replaceTilde"),A6t=s((t,e)=>t.trim().split(/\s+/).map(n=>y6t(n,e)).join(" "),"replaceCarets"),y6t=s((t,e)=>{ws("caret",t,e);let n=e.loose?Ud[Hu.CARETLOOSE]:Ud[Hu.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,a,l,c)=>{ws("caret",t,i,o,a,l,c);let u;return ju(o)?u="":ju(a)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:ju(l)?o==="0"?u=`>=${o}.${a}.0${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${r} <${+o+1}.0.0-0`:c?(ws("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(ws("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${r} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),ws("caret return",u),u})},"replaceCaret"),C6t=s((t,e)=>(ws("replaceXRanges",t,e),t.split(/\s+/).map(n=>x6t(n,e)).join(" ")),"replaceXRanges"),x6t=s((t,e)=>{t=t.trim();let n=e.loose?Ud[Hu.XRANGELOOSE]:Ud[Hu.XRANGE];return t.replace(n,(r,i,o,a,l,c)=>{ws("xRange",t,r,i,o,a,l,c);let u=ju(o),d=u||ju(a),p=d||ju(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),r=`${i+o}.${a}.${l}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),ws("xRange return",r),r})},"replaceXRange"),v6t=s((t,e)=>(ws("replaceStars",t,e),t.trim().replace(Ud[Hu.STAR],"")),"replaceStars"),b6t=s((t,e)=>(ws("replaceGTE0",t,e),t.trim().replace(Ud[e.includePrerelease?Hu.GTE0PRE:Hu.GTE0],"")),"replaceGTE0"),E6t=s(t=>(e,n,r,i,o,a,l,c,u,d,p,m)=>(ju(r)?n="":ju(i)?n=`>=${r}.0.0${t?"-0":""}`:ju(o)?n=`>=${r}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,ju(u)?c="":ju(d)?c=`<${+u+1}.0.0-0`:ju(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),"hyphenReplace"),I6t=s((t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(ws(t[r].semver),t[r].semver!==dfe.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var s6=W((R_r,oWe)=>{f();var a6=Symbol("SemVer ANY"),mfe=class t{static{s(this,"Comparator")}static get ANY(){return a6}constructor(e,n){if(n=eWe(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),pfe("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===a6?this.value="":this.value=this.operator+this.semver.version,pfe("comp",this)}parse(e){let n=this.options.loose?tWe[nWe.COMPARATORLOOSE]:tWe[nWe.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new rWe(r[2],this.options.loose):this.semver=a6}toString(){return this.value}test(e){if(pfe("Comparator.test",e,this.options.loose),this.semver===a6||e===a6)return!0;if(typeof e=="string")try{e=new rWe(e,this.options)}catch{return!1}return ffe(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new iWe(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new iWe(this.value,n).test(e.semver):(n=eWe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||ffe(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||ffe(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};oWe.exports=mfe;var eWe=UV(),{safeRe:tWe,t:nWe}=XR(),ffe=lfe(),pfe=i6(),rWe=lu(),iWe=Tp()});var l6=W((D_r,sWe)=>{f();var T6t=Tp(),w6t=s((t,e,n)=>{try{e=new T6t(e,n)}catch{return!1}return e.test(t)},"satisfies");sWe.exports=w6t});var lWe=W((L_r,aWe)=>{f();var _6t=Tp(),S6t=s((t,e)=>new _6t(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" ")),"toComparators");aWe.exports=S6t});var uWe=W((Q_r,cWe)=>{f();var R6t=lu(),k6t=Tp(),B6t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new k6t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new R6t(r,n))}),r},"maxSatisfying");cWe.exports=B6t});var fWe=W((q_r,dWe)=>{f();var D6t=lu(),P6t=Tp(),N6t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new P6t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new D6t(r,n))}),r},"minSatisfying");dWe.exports=N6t});var hWe=W((H_r,mWe)=>{f();var hfe=lu(),L6t=Tp(),pWe=o6(),F6t=s((t,e)=>{t=new L6t(t,e);let n=new hfe("0.0.0");if(t.test(n)||(n=new hfe("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(a=>{let l=new hfe(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||pWe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||pWe(n,o))&&(n=o)}return n&&t.test(n)?n:null},"minVersion");mWe.exports=F6t});var AWe=W(($_r,gWe)=>{f();var M6t=Tp(),Q6t=s((t,e)=>{try{return new M6t(t,e).range||"*"}catch{return null}},"validRange");gWe.exports=Q6t});var KV=W((K_r,vWe)=>{f();var O6t=lu(),xWe=s6(),{ANY:U6t}=xWe,q6t=Tp(),W6t=l6(),yWe=o6(),CWe=jV(),G6t=$V(),H6t=VV(),j6t=s((t,e,n,r)=>{t=new O6t(t,r),e=new q6t(e,r);let i,o,a,l,c;switch(n){case">":i=yWe,o=G6t,a=CWe,l=">",c=">=";break;case"<":i=CWe,o=H6t,a=yWe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(W6t(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===U6t&&(h=new xWe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,r)?p=h:a(h.semver,m.semver,r)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");vWe.exports=j6t});var EWe=W((Z_r,bWe)=>{f();var V6t=KV(),$6t=s((t,e,n)=>V6t(t,e,">",n),"gtr");bWe.exports=$6t});var TWe=W((nSr,IWe)=>{f();var z6t=KV(),Y6t=s((t,e,n)=>z6t(t,e,"<",n),"ltr");IWe.exports=Y6t});var SWe=W((oSr,_We)=>{f();var wWe=Tp(),K6t=s((t,e,n)=>(t=new wWe(t,n),e=new wWe(e,n),t.intersects(e,n)),"intersects");_We.exports=K6t});var kWe=W((lSr,RWe)=>{f();var J6t=l6(),X6t=Ip();RWe.exports=(t,e,n)=>{let r=[],i=null,o=null,a=t.sort((d,p)=>X6t(d,p,n));for(let d of a)J6t(d,e,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let l=[];for(let[d,p]of r)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var FWe=W((uSr,LWe)=>{f();var BWe=Tp(),Afe=s6(),{ANY:gfe}=Afe,c6=l6(),yfe=Ip(),Z6t=s((t,e,n={})=>{if(t===e)return!0;t=new BWe(t,n),e=new BWe(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let a=tNt(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},"subset"),eNt=[new Afe(">=0.0.0-0")],DWe=[new Afe(">=0.0.0")],tNt=s((t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===gfe){if(e.length===1&&e[0].semver===gfe)return!0;n.includePrerelease?t=eNt:t=DWe}if(e.length===1&&e[0].semver===gfe){if(n.includePrerelease)return!0;e=DWe}let r=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=PWe(i,h,n):h.operator==="<"||h.operator==="<="?o=NWe(o,h,n):r.add(h.semver);if(r.size>1)return null;let a;if(i&&o){if(a=yfe(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of r){if(i&&!c6(h,String(i),n)||o&&!c6(h,String(o),n))return null;for(let g of e)if(!c6(h,String(g),n))return!1;return!0}let l,c,u,d,p=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=PWe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!c6(i.semver,String(h),n))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=NWe(o,h,n),c===h&&c!==o)return!1}else if(o.operator==="<="&&!c6(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),PWe=s((t,e,n)=>{if(!t)return e;let r=yfe(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),NWe=s((t,e,n)=>{if(!t)return e;let r=yfe(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");LWe.exports=Z6t});var xfe=W((pSr,OWe)=>{f();var Cfe=XR(),MWe=r6(),nNt=lu(),QWe=ife(),rNt=NT(),iNt=uqe(),oNt=fqe(),sNt=hqe(),aNt=yqe(),lNt=xqe(),cNt=bqe(),uNt=Iqe(),dNt=wqe(),fNt=Ip(),pNt=kqe(),mNt=Dqe(),hNt=HV(),gNt=Fqe(),ANt=Qqe(),yNt=o6(),CNt=jV(),xNt=sfe(),vNt=afe(),bNt=VV(),ENt=$V(),INt=lfe(),TNt=$qe(),wNt=s6(),_Nt=Tp(),SNt=l6(),RNt=lWe(),kNt=uWe(),BNt=fWe(),DNt=hWe(),PNt=AWe(),NNt=KV(),LNt=EWe(),FNt=TWe(),MNt=SWe(),QNt=kWe(),ONt=FWe();OWe.exports={parse:rNt,valid:iNt,clean:oNt,inc:sNt,diff:aNt,major:lNt,minor:cNt,patch:uNt,prerelease:dNt,compare:fNt,rcompare:pNt,compareLoose:mNt,compareBuild:hNt,sort:gNt,rsort:ANt,gt:yNt,lt:CNt,eq:xNt,neq:vNt,gte:bNt,lte:ENt,cmp:INt,coerce:TNt,Comparator:wNt,Range:_Nt,satisfies:SNt,toComparators:RNt,maxSatisfying:kNt,minSatisfying:BNt,minVersion:DNt,validRange:PNt,outside:NNt,gtr:LNt,ltr:FNt,intersects:MNt,simplifyRange:QNt,subset:ONt,SemVer:nNt,re:Cfe.re,src:Cfe.src,tokens:Cfe.t,SEMVER_SPEC_VERSION:MWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:MWe.RELEASE_TYPES,compareIdentifiers:QWe.compareIdentifiers,rcompareIdentifiers:QWe.rcompareIdentifiers}});var z0=W(f6=>{"use strict";f();Object.defineProperty(f6,"__esModule",{value:!0});f6.dedent=void 0;function aGe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(l){return l.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+r[c+1]}),a}s(aGe,"dedent");f6.dedent=aGe;f6.default=aGe});var hGe=W(Nfe=>{"use strict";f();Object.defineProperty(Nfe,"__esModule",{value:!0});Nfe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var vGe=W(Ffe=>{"use strict";f();Object.defineProperty(Ffe,"__esModule",{value:!0});var gGe=require("worker_threads"),s7t=require("v8"),a7t=require("os"),AGe=hGe(),o$="ready",yGe="spawning",l7t="busy",s$="off",CGe=a7t.cpus().length,xGe=process.version.replace("v","").split("."),c7t=parseInt(xGe[0]),u7t=parseInt(xGe[1]),Lfe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=CGe,this.taskQueue=[],this.workers=[]}resurrect(e){let n=new gGe.Worker(AGe.workerFile,{eval:!0});e.status=yGe,e.worker=n,n.once("online",()=>process.nextTick(()=>{e.status=o$,n.removeAllListeners(),this.tick()})),n.once("error",r=>{console.error(r),e.status=s$,n.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===s$).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===o$){e=this.workers[c];break}if(typeof e>"u")return;let n=this.taskQueue.shift();e.status=l7t;let{worker:r}=e,{handler:i,config:o,resolve:a,reject:l}=n;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=s7t.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;r.once("message",m=>{if(this.free(r),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),r.once("error",m=>{e.status=s$,l(m),this.tick()}),r.postMessage(p)}catch(c){this.free(r),l(c)}}enqueue({handler:e,config:n,resolve:r,reject:i}){this.taskQueue.push({handler:e,config:n,resolve:r,reject:i}),this.tick()}free(e){for(let n=0;n<this.workers.length;n++)if(e.threadId===this.workers[n].worker.threadId){this.workers[n].status=o$,this.workers[n].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:CGe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((n,r)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new gGe.Worker(AGe.workerFile,{eval:!0});this.workers.push({status:yGe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=o$,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&n()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=s$,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&r(u)})(a))}})}async teardown(){if(c7t>=12&&u7t>=5){let e=[];for(let{worker:n}of this.workers)e.push(n.terminate());await Promise.all(e),this.workers=[]}else await new Promise(n=>{let r=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{r++,r===this.workers.length&&(this.workers=[],n())})})}};Ffe.default=new Lfe});var a$=W(LT=>{"use strict";f();var d7t=LT&&LT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LT,"__esModule",{value:!0});var p6=d7t(vGe()),f7t=`job needs a function.
Try with:
> job(() => {...}, config)`,p7t=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function m7t(t,e={ctx:{},data:{}}){return new Promise((n,r)=>{if(typeof t!="function")return r(new Error(f7t));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return r(new Error(p7t));p6.default.enqueue({handler:t,config:e,resolve:n,reject:r})})}s(m7t,"job");LT.job=m7t;LT.stop=p6.default.teardown.bind(p6.default);LT.start=p6.default.setup.bind(p6.default)});var QGe=W(FT=>{"use strict";f();var kA=FT&&FT.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Vfe=FT&&FT.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Wy,Mb;Object.defineProperty(FT,"__esModule",{value:!0});var $fe=class{static{s(this,"AwaitLock")}constructor(){Wy.set(this,!1),Mb.set(this,new Set)}get acquired(){return kA(this,Wy,"f")}acquireAsync({timeout:e}={}){if(!kA(this,Wy,"f"))return Vfe(this,Wy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{kA(this,Mb,"f").add(i)});let n,r;return Promise.race([new Promise(i=>{n=s(()=>{clearTimeout(r),i()},"resolver"),kA(this,Mb,"f").add(n)}),new Promise((i,o)=>{r=setTimeout(()=>{kA(this,Mb,"f").delete(n),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return kA(this,Wy,"f")?!1:(Vfe(this,Wy,!0,"f"),!0)}release(){if(!kA(this,Wy,"f"))throw new Error("Cannot release an unacquired lock");if(kA(this,Mb,"f").size>0){let[e]=kA(this,Mb,"f");kA(this,Mb,"f").delete(e),e()}else Vfe(this,Wy,!1,"f")}};FT.default=$fe;Wy=new WeakMap,Mb=new WeakMap});var $Ve=W((nJr,VVe)=>{f();var Tk=1e3,wk=Tk*60,_k=wk*60,jT=_k*24,UUt=jT*7,qUt=jT*365.25;VVe.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return WUt(t);if(n==="number"&&isFinite(t))return e.long?HUt(t):GUt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function WUt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*qUt;case"weeks":case"week":case"w":return n*UUt;case"days":case"day":case"d":return n*jT;case"hours":case"hour":case"hrs":case"hr":case"h":return n*_k;case"minutes":case"minute":case"mins":case"min":case"m":return n*wk;case"seconds":case"second":case"secs":case"sec":case"s":return n*Tk;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}s(WUt,"parse");function GUt(t){var e=Math.abs(t);return e>=jT?Math.round(t/jT)+"d":e>=_k?Math.round(t/_k)+"h":e>=wk?Math.round(t/wk)+"m":e>=Tk?Math.round(t/Tk)+"s":t+"ms"}s(GUt,"fmtShort");function HUt(t){var e=Math.abs(t);return e>=jT?Oz(t,e,jT,"day"):e>=_k?Oz(t,e,_k,"hour"):e>=wk?Oz(t,e,wk,"minute"):e>=Tk?Oz(t,e,Tk,"second"):t+" ms"}s(HUt,"fmtLong");function Oz(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}s(Oz,"plural")});var Ime=W((oJr,zVe)=>{f();function jUt(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=a,n.humanize=$Ve(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return n.colors[Math.abs(p)%n.colors.length]}s(e,"selectColor"),n.selectColor=e;function n(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,U)=>{if(N==="%%")return"%";k++;let re=n.formatters[U];if(typeof re=="function"){let me=v[k];N=re.call(b,me),v.splice(k,1),k--}return N}),n.formatArgs.call(b,v),(b.log||n.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==n.namespaces&&(h=n.namespaces,g=n.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof n.init=="function"&&n.init(y),y}s(n,"createDebug");function r(d,p){let m=n(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(r,"extend");function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...n.names.map(l),...n.skips.map(l).map(p=>"-"+p)].join(",");return n.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=n.skips.length;p<m;p++)if(n.skips[p].test(d))return!1;for(p=0,m=n.names.length;p<m;p++)if(n.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),n.enable(n.load()),n}s(jUt,"setup");zVe.exports=jUt});var YVe=W((J0,Uz)=>{f();J0.formatArgs=$Ut;J0.save=zUt;J0.load=YUt;J0.useColors=VUt;J0.storage=KUt();J0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();J0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function VUt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(VUt,"useColors");function $Ut(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Uz.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}s($Ut,"formatArgs");J0.log=console.debug||console.log||(()=>{});function zUt(t){try{t?J0.storage.setItem("debug",t):J0.storage.removeItem("debug")}catch{}}s(zUt,"save");function YUt(){let t;try{t=J0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(YUt,"load");function KUt(){try{return localStorage}catch{}}s(KUt,"localstorage");Uz.exports=Ime()(J0);var{formatters:JUt}=Uz.exports;JUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var JVe=W((uJr,KVe)=>{"use strict";f();KVe.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var e$e=W((fJr,ZVe)=>{"use strict";f();var XUt=require("os"),XVe=require("tty"),kp=JVe(),{env:tc}=process,Vb;kp("no-color")||kp("no-colors")||kp("color=false")||kp("color=never")?Vb=0:(kp("color")||kp("colors")||kp("color=true")||kp("color=always"))&&(Vb=1);"FORCE_COLOR"in tc&&(tc.FORCE_COLOR==="true"?Vb=1:tc.FORCE_COLOR==="false"?Vb=0:Vb=tc.FORCE_COLOR.length===0?1:Math.min(parseInt(tc.FORCE_COLOR,10),3));function Tme(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Tme,"translateLevel");function wme(t,e){if(Vb===0)return 0;if(kp("color=16m")||kp("color=full")||kp("color=truecolor"))return 3;if(kp("color=256"))return 2;if(t&&!e&&Vb===void 0)return 0;let n=Vb||0;if(tc.TERM==="dumb")return n;if(process.platform==="win32"){let r=XUt.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in tc)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in tc)||tc.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in tc)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(tc.TEAMCITY_VERSION)?1:0;if(tc.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in tc){let r=parseInt((tc.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(tc.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(tc.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(tc.TERM)||"COLORTERM"in tc?1:n}s(wme,"supportsColor");function ZUt(t){let e=wme(t,t&&t.isTTY);return Tme(e)}s(ZUt,"getSupportLevel");ZVe.exports={supportsColor:ZUt,stdout:Tme(wme(!0,XVe.isatty(1))),stderr:Tme(wme(!0,XVe.isatty(2)))}});var n$e=W((kc,Wz)=>{f();var eqt=require("tty"),qz=require("util");kc.init=aqt;kc.log=iqt;kc.formatArgs=nqt;kc.save=oqt;kc.load=sqt;kc.useColors=tqt;kc.destroy=qz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");kc.colors=[6,2,3,4,5,1];try{let t=e$e();t&&(t.stderr||t).level>=2&&(kc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}kc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function tqt(){return"colors"in kc.inspectOpts?!!kc.inspectOpts.colors:eqt.isatty(process.stderr.fd)}s(tqt,"useColors");function nqt(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Wz.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=rqt()+e+" "+t[0]}s(nqt,"formatArgs");function rqt(){return kc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(rqt,"getDate");function iqt(...t){return process.stderr.write(qz.format(...t)+`
`)}s(iqt,"log");function oqt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(oqt,"save");function sqt(){return process.env.DEBUG}s(sqt,"load");function aqt(t){t.inspectOpts={};let e=Object.keys(kc.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=kc.inspectOpts[e[n]]}s(aqt,"init");Wz.exports=Ime()(kc);var{formatters:t$e}=Wz.exports;t$e.o=function(t){return this.inspectOpts.colors=this.useColors,qz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};t$e.O=function(t){return this.inspectOpts.colors=this.useColors,qz.inspect(t,this.inspectOpts)}});var VT=W((AJr,_me)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_me.exports=YVe():_me.exports=n$e()});var Pme=W((vJr,s$e)=>{f();var O6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,lqt=typeof AbortController=="function",Gz=lqt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new r$e}abort(){this.signal.dispatchEvent("abort")}},cqt=typeof AbortSignal=="function",uqt=typeof Gz.AbortSignal=="function",r$e=cqt?AbortSignal:uqt?Gz.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let n={type:e,target:this};this.onabort(n),this._listeners.forEach(r=>r(n),this)}}onabort(){}addEventListener(e,n){e==="abort"&&this._listeners.push(n)}removeEventListener(e,n){e==="abort"&&(this._listeners=this._listeners.filter(r=>r!==n))}},Bme=new Set,Sme=s((t,e)=>{let n=`LRU_CACHE_OPTION_${t}`;Hz(n)&&Dme(n,`${t} option`,`options.${e}`,Rk)},"deprecatedOption"),Rme=s((t,e)=>{let n=`LRU_CACHE_METHOD_${t}`;if(Hz(n)){let{prototype:r}=Rk,{get:i}=Object.getOwnPropertyDescriptor(r,t);Dme(n,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),dqt=s((t,e)=>{let n=`LRU_CACHE_PROPERTY_${t}`;if(Hz(n)){let{prototype:r}=Rk,{get:i}=Object.getOwnPropertyDescriptor(r,t);Dme(n,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),i$e=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),Hz=s(t=>!Bme.has(t),"shouldWarn"),Dme=s((t,e,n,r)=>{Bme.add(t);let i=`The ${e} is deprecated. Please use ${n} instead.`;i$e(i,"DeprecationWarning",t,r)},"warn"),$T=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),o$e=s(t=>$T(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Sk:null:null,"getUintArray"),Sk=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},kme=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let n=o$e(e);this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Rk=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:B}=e instanceof t?{}:e;if(n!==0&&!$T(n))throw new TypeError("max option must be a nonnegative integer");let N=n?o$e(n):Array;if(!N)throw new Error("invalid max value: "+n);if(this.max=n,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(n).fill(null),this.valList=new Array(n).fill(null),this.next=new N(n),this.prev=new N(n),this.head=0,this.tail=0,this.free=new kme(n),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!$T(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!B,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=$T(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||k||0,this.ttl){if(!$T(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let U="LRU_CACHE_UNBOUNDED";Hz(U)&&(Bme.add(U),i$e("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,t))}B&&Sme("stale","allowStale"),k&&Sme("maxAge","ttl"),_&&Sme("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new Sk(this.max),this.starts=new Sk(this.max),this.setItemTTL=(r,i,o=O6.now())=>{if(this.starts[r]=i!==0?o:0,this.ttls[r]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(r)&&this.delete(this.keyList[r])},i+1);a.unref&&a.unref()}},this.updateItemAge=r=>{this.starts[r]=this.ttls[r]!==0?O6.now():0};let e=0,n=s(()=>{let r=O6.now();if(this.ttlResolution>0){e=r;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return r},"getNow");this.getRemainingTTL=r=>{let i=this.keyMap.get(r);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||n())},this.isStale=r=>this.ttls[r]!==0&&this.starts[r]!==0&&(e||n())-this.starts[r]>this.ttls[r]}updateItemAge(e){}setItemTTL(e,n,r){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new Sk(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,n,r,i)=>{if(!$T(r))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(r=i(n,e),!$T(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return r},this.addItemSize=(e,n)=>{this.sizes[e]=n;let r=this.maxSize-this.sizes[e];for(;this.calculatedSize>r;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,n){}requireSize(e,n,r,i){if(r||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.tail;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.head));)n=this.prev[n]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.head;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.tail));)n=this.next[n]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,n={}){for(let r of this.indexes())if(e(this.valList[r],this.keyList[r],this))return this.get(this.keyList[r],n)}forEach(e,n=this){for(let r of this.indexes())e.call(n,this.valList[r],this.keyList[r],this)}rforEach(e,n=this){for(let r of this.rindexes())e.call(n,this.valList[r],this.keyList[r],this)}get prune(){return Rme("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let n of this.rindexes({allowStale:!0}))this.isStale(n)&&(this.delete(this.keyList[n]),e=!0);return e}dump(){let e=[];for(let n of this.indexes({allowStale:!0})){let r=this.keyList[n],i=this.valList[n],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[n];let l=O6.now()-this.starts[n];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[n]),e.unshift([r,a])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=O6.now()-i}this.set(n,r.value,r)}}dispose(e,n,r){}set(e,n,{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,n,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=n,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];n!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=n,this.addItemSize(u,a)),this.moveToTail(u)}if(r!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,r,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let n=this.head,r=this.keyList[n],i=this.valList[n];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,r,"evict"),this.disposeAfter&&this.disposed.push([i,r,"evict"])),this.removeItemSize(n),e&&(this.keyList[n]=null,this.valList[n]=null,this.free.push(n)),this.head=this.next[n],this.keyMap.delete(r),this.size--,n}has(e,{updateAgeOnHas:n=this.updateAgeOnHas}={}){let r=this.keyMap.get(e);return r!==void 0&&!this.isStale(r)?(n&&this.updateItemAge(r),!0):!1}peek(e,{allowStale:n=this.allowStale}={}){let r=this.keyMap.get(e);if(r!==void 0&&(n||!this.isStale(r))){let i=this.valList[r];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,n,r,i){let o=n===void 0?void 0:this.valList[n];if(this.isBackgroundFetch(o))return o;let a=new Gz,l={signal:a.signal,options:r,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[n]===p&&(!r.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[n]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,n===void 0?(this.set(e,p,l.options),n=this.keyMap.get(e)):this.valList[n]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i});let h={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return n&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),r&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return n&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?n?a.__staleWhileFetching:void 0:(i||this.delete(e),n?a:void 0):l?void 0:(this.moveToTail(o),r&&this.updateItemAge(o),a)}}connect(e,n){this.prev[n]=e,this.next[e]=n}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Rme("del","delete"),this.delete}delete(e){let n=!1;if(this.size!==0){let r=this.keyMap.get(e);if(r!==void 0)if(n=!0,this.size===1)this.clear();else{this.removeItemSize(r);let i=this.valList[r];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return n}clear(){for(let e of this.rindexes({allowStale:!0})){let n=this.valList[e];if(this.isBackgroundFetch(n))n.__abortController.abort();else{let r=this.keyList[e];this.dispose(n,r,"delete"),this.disposeAfter&&this.disposed.push([n,r,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Rme("reset","clear"),this.clear}get length(){return dqt("length","size"),this.size}static get AbortController(){return Gz}static get AbortSignal(){return r$e}};s$e.exports=Rk});var Fme=W((IJr,a$e)=>{"use strict";f();var U6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,n,r){super(e),this.type=n,this._name=r}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},Nme=class extends U6{static{s(this,"FetchError")}constructor(e,n,r){super(e,n,"FetchError"),r&&(this.code=r.code,this.errno=r.errno,this.erroredSysCall=r.syscall)}},Lme=class extends U6{static{s(this,"AbortError")}constructor(e,n="aborted"){super(e,n,"AbortError")}};a$e.exports={FetchBaseError:U6,FetchError:Nme,AbortError:Lme}});var zy=W((_Jr,c$e)=>{"use strict";f();var{constants:{MAX_LENGTH:fqt}}=require("buffer"),{pipeline:jz,PassThrough:pqt}=require("stream"),{promisify:mqt}=require("util"),{createGunzip:hqt,createInflate:gqt,createBrotliDecompress:Aqt,constants:{Z_SYNC_FLUSH:l$e}}=require("zlib"),yqt=VT()("helix-fetch:utils"),Cqt=mqt(jz),xqt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),vqt=s((t,e,n,r)=>{if(!xqt(t,e))return n;let i=s(o=>{o&&(yqt(`encountered error while decoding stream: ${o}`),r(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return jz(n,hqt({flush:l$e,finishFlush:l$e}),i);case"deflate":case"x-deflate":return jz(n,gqt(),i);case"br":return jz(n,Aqt(),i);default:return n}},"decodeStream"),bqt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Vz=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?Eqt(t,e):Iqt(t,e);default:return 0}},"calcSize"),Eqt=s((t,e)=>(e.add(t),t.map(n=>e.has(n)?0:Vz(n,e)).reduce((n,r)=>n+r,0)),"calcArraySize"),Iqt=s((t,e)=>{if(t==null)return 0;e.add(t);let n=0,r=[];for(let i in t)r.push(i);return r.push(...Object.getOwnPropertySymbols(t)),r.forEach(i=>{if(n+=Vz(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}n+=Vz(t[i],e)}),n},"calcObjectSize"),Tqt=s(t=>Vz(t,new WeakSet),"sizeof"),wqt=s(async t=>{let e=new pqt,n=0,r=[];return e.on("data",i=>{if(n+i.length>fqt)throw new Error("Buffer.constants.MAX_SIZE exceeded");r.push(i),n+=i.length}),await Cqt(t,e),Buffer.concat(r,n)},"streamToBuffer");c$e.exports={decodeStream:vqt,isPlainObject:bqt,sizeof:Tqt,streamToBuffer:wqt}});var zz=W((kJr,p$e)=>{"use strict";f();var{PassThrough:u$e,Readable:Yy}=require("stream"),{types:{isAnyArrayBuffer:f$e}}=require("util"),{FetchError:_qt,FetchBaseError:Sqt}=Fme(),{streamToBuffer:Rqt}=zy(),kqt=Buffer.alloc(0),Bp=Symbol("Body internals"),Bqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),d$e=s(async t=>{if(t[Bp].disturbed)throw new TypeError("Already read");if(t[Bp].error)throw new TypeError(`Stream had error: ${t[Bp].error.message}`);t[Bp].disturbed=!0;let{stream:e}=t[Bp];return e===null?kqt:Rqt(e)},"consume"),$z=class{static{s(this,"Body")}constructor(e){let n;e==null?n=null:e instanceof URLSearchParams?n=Yy.from(e.toString()):e instanceof Yy?n=e:Buffer.isBuffer(e)?n=Yy.from(e):f$e(e)?n=Yy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?n=Yy.from(e):n=Yy.from(String(e)),this[Bp]={stream:n,disturbed:!1,error:null},e instanceof Yy&&n.on("error",r=>{let i=r instanceof Sqt?r:new _qt(`Invalid response body while trying to fetch ${this.url}: ${r.message}`,"system",r);this[Bp].error=i})}get body(){return this[Bp].stream}get bodyUsed(){return this[Bp].disturbed}async buffer(){return d$e(this)}async arrayBuffer(){return Bqt(await this.buffer())}async text(){return(await d$e(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties($z.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Dqt=s(t=>{if(t[Bp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Bp],n=e;if(e instanceof Yy){n=new u$e;let r=new u$e;e.pipe(n),e.pipe(r),t[Bp].stream=r}return n},"cloneStream"),Pqt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||f$e(t)||t instanceof Yy?null:"text/plain; charset=utf-8","guessContentType");p$e.exports={Body:$z,cloneStream:Dqt,guessContentType:Pqt}});var kk=W((PJr,A$e)=>{"use strict";f();var{validateHeaderName:m$e,validateHeaderValue:h$e}=require("http"),{isPlainObject:Nqt}=zy(),Ky=Symbol("Headers internals"),q6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof m$e=="function")m$e(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let n=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}return e.toLowerCase()},"normalizeName"),g$e=s((t,e)=>{let n=typeof t!="string"?String(t):t;if(typeof h$e=="function")h$e(e,n);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}return n},"normalizeValue"),Yz=class t{static{s(this,"Headers")}constructor(e={}){if(this[Ky]={map:new Map},e instanceof t)e.forEach((n,r)=>{this.append(r,n)});else if(Array.isArray(e))e.forEach(([n,r])=>{this.append(n,r)});else if(Nqt(e))for(let[n,r]of Object.entries(e))this.append(n,r)}set(e,n){this[Ky].map.set(q6(e),g$e(n,e))}has(e){return this[Ky].map.has(q6(e))}get(e){let n=this[Ky].map.get(q6(e));return n===void 0?null:n}append(e,n){let r=q6(e),i=g$e(n,e),o=this[Ky].map.get(r);this[Ky].map.set(r,o?`${o}, ${i}`:i)}delete(e){this[Ky].map.delete(q6(e))}forEach(e,n){for(let r of this.keys())e.call(n,this.get(r),r)}keys(){return Array.from(this[Ky].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Ky].map)}};Object.defineProperties(Yz.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));A$e.exports={Headers:Yz}});var Mme=W((FJr,y$e)=>{"use strict";f();var{EventEmitter:Lqt}=require("events"),Ah=Symbol("AbortSignal internals"),Bk=class{static{s(this,"AbortSignal")}constructor(){this[Ah]={eventEmitter:new Lqt,onabort:null,aborted:!1}}get aborted(){return this[Ah].aborted}get onabort(){return this[Ah].onabort}set onabort(e){this[Ah].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,n){this[Ah].eventEmitter.removeListener(e,n)}addEventListener(e,n){this[Ah].eventEmitter.on(e,n)}dispatchEvent(e){let n={type:e,target:this},r=`on${e}`;typeof this[Ah][r]=="function"&&this[r](n),this[Ah].eventEmitter.emit(e,n)}fire(){this[Ah].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(Bk.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Jz=class extends Bk{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Ah].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Ah].timerId)}};Object.defineProperties(Jz.prototype,{clear:{enumerable:!0}});var Kz=Symbol("AbortController internals"),Xz=class{static{s(this,"AbortController")}constructor(){this[Kz]={signal:new Bk}}get signal(){return this[Kz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Kz].signal.aborted||this[Kz].signal.fire()}};Object.defineProperties(Xz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});y$e.exports={AbortController:Xz,AbortSignal:Bk,TimeoutSignal:Jz}});var W6=W((OJr,v$e)=>{"use strict";f();var{randomBytes:Fqt}=require("crypto"),{Readable:Mqt}=require("stream"),Ome=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),Qqt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),C$e=s(t=>`--${t}--\r
\r
`,"getFooter"),x$e=s((t,e,n)=>{let r="";return r+=`--${t}\r
`,r+=`Content-Disposition: form-data; name="${e}"`,Ome(n)&&(r+=`; filename="${n.name}"\r
`,r+=`Content-Type: ${n.type||"application/octet-stream"}`),`${r}\r
\r
`},"getHeader");async function*Oqt(t,e){for(let[n,r]of t)yield x$e(e,n,r),Ome(r)?yield*r.stream():yield r,yield`\r
`;yield C$e(e)}s(Oqt,"formDataIterator");var Uqt=s((t,e)=>{let n=0;for(let[r,i]of t)n+=Buffer.byteLength(x$e(e,r,i)),n+=Ome(i)?i.size:Buffer.byteLength(String(i)),n+=Buffer.byteLength(`\r
`);return n+=Buffer.byteLength(C$e(e)),n},"getFormDataLength"),Qme=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=Fqt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Uqt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Mqt.from(Oqt(this.fd,this.boundary))}};v$e.exports={isFormData:Qqt,FormDataSerializer:Qme}});var E$e=W((GJr,b$e)=>{"use strict";f();var{AbortSignal:WJr}=Mme(),{Body:qqt,cloneStream:Wqt,guessContentType:Gqt}=zz(),{Headers:Hqt}=kk(),{isPlainObject:jqt}=zy(),{isFormData:Vqt,FormDataSerializer:$qt}=W6(),zqt=20,$b=Symbol("Request internals"),Zz=class t extends qqt{static{s(this,"Request")}constructor(e,n={}){let r=e instanceof t?e:null,i=r?new URL(r.url):new URL(e),o=n.method||r&&r.method||"GET";if(o=o.toUpperCase(),(n.body!=null||r&&r.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=n.body||(r&&r.body?Wqt(r):null),l=new Hqt(n.headers||r&&r.headers||{});if(Vqt(a)&&!l.has("content-type")){let p=new $qt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(jqt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=Gqt(a);p&&l.set("content-type",p)}super(a);let c=r?r.signal:null;"signal"in n&&(c=n.signal);let u=n.redirect||r&&r.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=n.cache||r&&r.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[$b]={init:{...n},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},n.follow===void 0?!r||r.follow===void 0?this.follow=zqt:this.follow=r.follow:this.follow=n.follow,this.counter=n.counter||r&&r.counter||0,n.compress===void 0?!r||r.compress===void 0?this.compress=!0:this.compress=r.compress:this.compress=n.compress,n.decode===void 0?!r||r.decode===void 0?this.decode=!0:this.decode=r.decode:this.decode=n.decode}get method(){return this[$b].method}get url(){return this[$b].parsedURL.toString()}get headers(){return this[$b].headers}get redirect(){return this[$b].redirect}get cache(){return this[$b].cache}get signal(){return this[$b].signal}clone(){return new t(this)}get init(){return this[$b].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Zz.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});b$e.exports={Request:Zz}});var Ume=W((VJr,I$e)=>{"use strict";f();var{Body:Yqt,cloneStream:Kqt,guessContentType:Jqt}=zz(),{Headers:Xqt}=kk(),{isPlainObject:Zqt}=zy(),{isFormData:eWt,FormDataSerializer:tWt}=W6(),yh=Symbol("Response internals"),eY=class t extends Yqt{static{s(this,"Response")}constructor(e=null,n={}){let r=new Xqt(n.headers),i=e;if(eWt(i)&&!r.has("content-type")){let o=new tWt(i);i=o.stream(),r.set("content-type",o.contentType()),!r.has("transfer-encoding")&&!r.has("content-length")&&r.set("content-length",o.length())}if(i!==null&&!r.has("content-type"))if(Zqt(i))i=JSON.stringify(i),r.set("content-type","application/json");else{let o=Jqt(i);o&&r.set("content-type",o)}super(i),this[yh]={url:n.url,status:n.status||200,statusText:n.statusText||"",headers:r,httpVersion:n.httpVersion,decoded:n.decoded,counter:n.counter}}get url(){return this[yh].url||""}get status(){return this[yh].status}get statusText(){return this[yh].statusText}get ok(){return this[yh].status>=200&&this[yh].status<300}get redirected(){return this[yh].counter>0}get headers(){return this[yh].headers}get httpVersion(){return this[yh].httpVersion}get decoded(){return this[yh].decoded}static redirect(e,n=302){if(![301,302,303,307,308].includes(n))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:n})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Kqt(this),{...this[yh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(eY.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});I$e.exports={Response:eY}});var w$e=W((KJr,T$e)=>{"use strict";f();var nWt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),rWt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),iWt=new Set([500,502,503,504]),oWt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},sWt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function zT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(zT,"toNumberOrZero");function aWt(t){return t?iWt.has(t.status):!0}s(aWt,"isErrorResponse");function qme(t){let e={};if(!t)return e;let n=t.trim().split(/,/);for(let r of n){let[i,o]=r.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(qme,"parseCacheControl");function lWt(t){let e=[];for(let n in t){let r=t[n];e.push(r===!0?n:n+"="+r)}if(e.length)return e.join(", ")}s(lWt,"formatCacheControl");T$e.exports=class{static{s(this,"CachePolicy")}constructor(e,n,{shared:r,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!n||!n.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=r!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in n?n.status:200,this._resHeaders=n.headers,this._rescc=qme(n.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=n.headers.vary?e.headers:null,this._reqcc=qme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":lWt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),n.headers["cache-control"]==null&&/no-cache/.test(n.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&rWt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||nWt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let n=qme(e.headers["cache-control"]);return n["no-cache"]||/no-cache/.test(e.headers.pragma)||n["max-age"]&&this.age()>n["max-age"]||n["min-fresh"]&&this.timeToLive()<1e3*n["min-fresh"]||this.stale()&&!(n["max-stale"]&&!this._rescc["must-revalidate"]&&(n["max-stale"]===!0||n["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,n){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||n&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let n=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let r of n)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){let n={};for(let r in e)oWt[r]||(n[r]=e[r]);if(e.connection){let r=e.connection.trim().split(/\s*,\s*/);for(let i of r)delete n[i]}if(n.warning){let r=n.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));r.length?n.warning=r.join(",").trim():delete n.warning}return n}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),n=this.age();return n>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(n)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),n=(this.now()-this._responseTime)/1e3;return e+n}_ageValue(){return zT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return zT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return zT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,n=this.date();if(this._resHeaders.expires){let r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<n?0:Math.max(e,(r-n)/1e3)}if(this._resHeaders["last-modified"]){let r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&n>r)return Math.max(e,(n-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),n=e+zT(this._rescc["stale-if-error"]),r=e+zT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,n,r)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+zT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+zT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let n=this._copyWithoutHopByHopHeaders(e.headers);if(delete n["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete n["if-none-match"],delete n["if-modified-since"],n;if(this._resHeaders.etag&&(n["if-none-match"]=n["if-none-match"]?`${n["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),n["accept-ranges"]||n["if-match"]||n["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete n["if-modified-since"],n["if-none-match"]){let i=n["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?n["if-none-match"]=i.join(",").trim():delete n["if-none-match"]}}else this._resHeaders["last-modified"]&&!n["if-modified-since"]&&(n["if-modified-since"]=this._resHeaders["last-modified"]);return n}revalidatedPolicy(e,n){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&aWt(n))return{modified:!1,matches:!1,policy:this};if(!n||!n.headers)throw Error("Response headers missing");let r=!1;if(n.status!==void 0&&n.status!=304?r=!1:n.headers.etag&&!/^\s*W\//.test(n.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag:this._resHeaders.etag&&n.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===n.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!n.headers.etag&&!n.headers["last-modified"]&&(r=!0),!r)return{policy:new this.constructor(e,n),modified:n.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in n.headers&&!sWt[a]?n.headers[a]:this._resHeaders[a];let o=Object.assign({},n,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var k$e=W((ZJr,R$e)=>{"use strict";f();var cWt=w$e(),{Headers:uWt}=kk(),_$e=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),S$e=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Wme=class{static{s(this,"CachePolicyWrapper")}constructor(e,n,r){this.policy=new cWt(_$e(e),S$e(n),r)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(_$e(e))}responseHeaders(e){return new uWt(this.policy.responseHeaders(S$e(e)))}timeToLive(){return this.policy.timeToLive()}};R$e.exports=Wme});var P$e=W((nXr,D$e)=>{"use strict";f();var{Readable:dWt}=require("stream"),{Headers:B$e}=kk(),{Response:fWt}=Ume(),zb=Symbol("CacheableResponse internals"),pWt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Gme=class t extends fWt{static{s(this,"CacheableResponse")}constructor(e,n){super(e,n);let r=new B$e(n.headers);this[zb]={headers:r,bufferedBody:e}}get headers(){return this[zb].headers}set headers(e){if(e instanceof B$e)this[zb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return dWt.from(this[zb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[zb].bufferedBody}async arrayBuffer(){return pWt(this[zb].bufferedBody)}async text(){return this[zb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[zb].bufferedBody,{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},mWt=s(async t=>{let e=await t.buffer(),{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new Gme(e,{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");D$e.exports={cacheableResponse:mWt}});var tY=W((oXr,N$e)=>{"use strict";f();var Hme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};N$e.exports={RequestAbortedError:Hme}});var O$e=W((lXr,Q$e)=>{"use strict";f();var F$e=require("http"),M$e=require("https"),{Readable:hWt}=require("stream"),Jy=VT()("helix-fetch:h1"),{RequestAbortedError:L$e}=tY(),{decodeStream:gWt}=zy(),AWt=s((t,e)=>{let{h1:n,options:{h1:r,rejectUnauthorized:i}}=t;return e==="https:"?n.httpsAgent?n.httpsAgent:r||typeof i=="boolean"?(n.httpsAgent=new M$e.Agent(typeof i=="boolean"?{...r||{},rejectUnauthorized:i}:r),n.httpsAgent):void 0:n.httpAgent?n.httpAgent:r?(n.httpAgent=new F$e.Agent(r),n.httpAgent):void 0},"getAgent"),yWt=s(t=>{t.h1={}},"setupContext"),CWt=s(async({h1:t})=>{t.httpAgent&&(Jy("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Jy("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),xWt=s((t,e,n)=>{let{statusCode:r,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?gWt(r,c,t,n):t;return{statusCode:r,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),vWt=s(async(t,e,n)=>{let{request:r}=e.protocol==="https:"?M$e:F$e,i=AWt(t,e.protocol),o={...n,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{Jy(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{Jy(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{Jy(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Jy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new L$e),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new L$e);return}p.addEventListener("abort",m)}d=r(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Jy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(xWt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Jy(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(Jy(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof hWt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");Q$e.exports={request:vWt,setupContext:yWt,resetContext:CWt}});var G$e=W((dXr,W$e)=>{"use strict";f();var{connect:bWt,constants:EWt}=require("http2"),{Readable:IWt}=require("stream"),Ss=VT()("helix-fetch:h2"),{RequestAbortedError:U$e}=tY(),{decodeStream:TWt}=zy(),{NGHTTP2_CANCEL:G6}=EWt,wWt=5*60*1e3,_Wt=5e3,SWt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),RWt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(n=>{e.on("close",n),Ss(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),q$e=s((t,e,n,r=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=n?TWt(o,t,e,r):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(n&&a!==e)}},"createResponse"),kWt=s((t,e,n,r,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=_Wt}}}=t,u=i[":path"],d=`${e}${u}`;Ss(`received PUSH_PROMISE: ${d}, stream #${r.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{r.close(G6)},"rejectPush")),r.on("push",(p,m)=>{Ss(`received push headers for ${e}${u}, stream #${r.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),r.setTimeout(c,()=>{Ss(`closing pushed stream #${r.id} after ${c} ms of inactivity`),r.close(G6)}),l&&l(d,i,q$e(p,r,n))}),r.on("aborted",()=>{Ss(`pushed stream #${r.id} aborted`)}),r.on("error",p=>{Ss(`pushed stream #${r.id} encountered error: ${p}`)}),r.on("frameError",(p,m,h)=>{Ss(`pushed stream #${r.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),BWt=s(async(t,e,n)=>{let{origin:r,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=wWt,pushPromiseHandler:p,pushHandler:m}=c,h={...n},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let B=u[r];if(!B||B.closed||B.destroyed){let ae=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:ae};v&&!v.inUse&&(H.createConnection=()=>(Ss(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),B=bWt(r,{...H,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{Ss(`closing session ${r} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{Ss(`session ${r} established`),Ss(`caching session ${r}`),u[r]=B}),B.on("localSettings",ue=>{Ss(`session ${r} localSettings: ${JSON.stringify(ue)}`)}),B.on("remoteSettings",ue=>{Ss(`session ${r} remoteSettings: ${JSON.stringify(ue)}`)}),B.once("close",()=>{Ss(`session ${r} closed`),u[r]===B&&(Ss(`discarding cached session ${r}`),delete u[r])}),B.once("error",ue=>{Ss(`session ${r} encountered error: ${ue}`),u[r]===B&&(Ss(`discarding cached session ${r}`),delete u[r])}),B.on("frameError",(ue,ie,$)=>{Ss(`session ${r} encountered frameError: type: ${ue}, code: ${ie}, id: ${$}`)}),B.once("goaway",(ue,ie,$)=>{Ss(`session ${r} received GOAWAY frame: errorCode: ${ue}, lastStreamID: ${ie}, opaqueData: ${$?$.toString():void 0}`)}),B.on("stream",(ue,ie,$)=>{kWt(t,r,E,ue,ie,$)})}else v&&v.id!==B.socket.id&&!v.inUse&&(Ss(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());Ss(`${g} ${e.host}${l}`);let N,{signal:U}=h,re=s(()=>{U.removeEventListener("abort",re),k(new U$e),N&&N.close(G6)},"onAbortSignal");if(U){if(U.aborted){k(new U$e);return}U.addEventListener("abort",re)}let me=s(ae=>{Ss(`session ${r} encountered error during ${h.method} ${e.href}: ${ae}`),k(ae)},"onSessionError");B.once("error",me),N=B.request({":method":g,":path":l,...y}),N.once("response",ae=>{B.off("error",me),U&&U.removeEventListener("abort",re),_(q$e(ae,N,h.decode,k))}),N.once("error",ae=>{B.off("error",me),U&&U.removeEventListener("abort",re),N.rstCode!==G6&&(Ss(`${h.method} ${e.href} failed with: ${ae.message}`),N.close(G6),k(ae))}),N.once("frameError",(ae,H,G)=>{B.off("error",me),Ss(`encountered frameError during ${h.method} ${e.href}: type: ${ae}, code: ${H}, id: ${G}`)}),N.on("push",(ae,H)=>{Ss(`received 'push' event: headers: ${JSON.stringify(ae)}, flags: ${H}`)}),b instanceof IWt?b.pipe(N):(b&&N.write(b),N.end())})},"request");W$e.exports={request:BWt,setupContext:SWt,resetContext:RWt}});var j$e=W((mXr,H$e)=>{"use strict";f();var{EventEmitter:DWt}=require("events"),PWt=s(()=>{let t={},e=new DWt;return e.setMaxListeners(0),{acquire:s(n=>new Promise(r=>{if(!t[n]){t[n]=!0,r();return}let i=s(o=>{t[n]||(t[n]=!0,e.removeListener(n,i),r(o))},"tryAcquire");e.on(n,i)}),"acquire"),release:s((n,r)=>{Reflect.deleteProperty(t,n),setImmediate(()=>e.emit(n,r))},"release")}},"lock");H$e.exports=PWt});var V$e=W((AXr,NWt)=>{NWt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var J$e=W((yXr,K$e)=>{"use strict";f();var{Readable:LWt}=require("stream"),FWt=require("tls"),{types:{isAnyArrayBuffer:MWt}}=require("util"),QWt=Pme(),jme=VT()("helix-fetch:core"),{RequestAbortedError:nY}=tY(),Vme=O$e(),rY=G$e(),OWt=j$e(),{isPlainObject:UWt}=zy(),{isFormData:qWt,FormDataSerializer:WWt}=W6(),{version:GWt}=V$e(),$me="h2",zme="h2c",Yme="http/1.0",YT="http/1.1",HWt=100,jWt=60*60*1e3,VWt=[$me,YT,Yme],$Wt=`helix-fetch/${GWt}`,zWt={method:"GET",compress:!0,decode:!0},$$e=0,z$e=OWt(),Y$e=s((t,e)=>new Promise((n,r)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new nY;r(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){r(new nY);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof nY||(jme(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),r(u))},"onError");o=FWt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),$$e+=1,o.id=$$e,o.secureConnecting=!1,jme(`established TLS connection: #${o.id} (${o.servername})`),n(o)}),o.once("error",c)}),"connectTLS"),YWt=s(async(t,e)=>{let n=await z$e.acquire(t.origin);try{return n||(n=await Y$e(t,e)),n}finally{z$e.release(t.origin,n)}},"connect"),KWt=s(async(t,e,n)=>{let r=`${e.protocol}//${e.host}`,i=t.alpnCache.get(r);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=YT,t.alpnCache.set(r,i),{protocol:i};case"http2:":return i=zme,t.alpnCache.set(r,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:n,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await YWt(e,u);return i=d.alpnProtocol,i||(i=YT),t.alpnCache.set(r,i),{protocol:i,socket:d}},"determineProtocol"),JWt=s(t=>{let e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},"sanitizeHeaders"),XWt=s(async(t,e,n,r)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...n,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:r};u.socket=l,u.servername=a.host;let d=await Y$e(e,u);return{protocol:d.alpnProtocol||YT,socket:d}}return{protocol:l.alpnProtocol||YT,socket:l}},"getProtocolAndSocketFromFactory"),ZWt=s(async(t,e,n)=>{let r=new URL(e),i={...zWt,...n||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=JWt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=r.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(qWt(i.body)){let u=new WWt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":UWt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):MWt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof LWt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await XWt(t.socketFactory,r,i,t.alpnProtocols):await KWt(t,r,a);switch(jme(`${r.host} -> ${l}`),l){case $me:try{return await rY.request(t,r,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${r.protocol}//${r.host}`),u}case zme:return rY.request(t,new URL(`http://${r.host}${r.pathname}${r.hash}${r.search}`),c?{...i,socket:c}:i);case Yme:case YT:return Vme.request(t,r,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),eGt=s(async t=>(t.alpnCache.clear(),Promise.all([Vme.resetContext(t),rY.resetContext(t)])),"resetContext"),tGt=s(t=>{let{options:{alpnProtocols:e=VWt,alpnCacheTTL:n=jWt,alpnCacheSize:r=HWt,userAgent:i=$Wt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new QWt({max:r,ttl:n}),t.userAgent=i,t.socketFactory=o,Vme.setupContext(t),rY.setupContext(t)},"setupContext");K$e.exports={request:ZWt,setupContext:tGt,resetContext:eGt,RequestAbortedError:nY,ALPN_HTTP2:$me,ALPN_HTTP2C:zme,ALPN_HTTP1_1:YT,ALPN_HTTP1_0:Yme}});var Z$e=W((vXr,X$e)=>{"use strict";f();var nGt=VT()("helix-fetch:core"),{request:rGt,setupContext:iGt,resetContext:oGt,RequestAbortedError:sGt,ALPN_HTTP2:aGt,ALPN_HTTP2C:lGt,ALPN_HTTP1_1:cGt,ALPN_HTTP1_0:uGt}=J$e(),Kme=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},iGt(this)}api(){return{request:s(async(e,n)=>this.request(e,n),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:sGt,ALPN_HTTP2:aGt,ALPN_HTTP2C:lGt,ALPN_HTTP1_1:cGt,ALPN_HTTP1_0:uGt}}async request(e,n){return rGt(this,e,n)}setCA(e){this.options.ca=e}async reset(){return nGt("resetting context"),oGt(this)}};X$e.exports=new Kme().api()});var ize=W((IXr,rze)=>{"use strict";f();var{EventEmitter:dGt}=require("events"),{Readable:H6}=require("stream"),Jme=VT()("helix-fetch"),fGt=Pme(),{Body:pGt}=zz(),{Headers:the}=kk(),{Request:KT}=E$e(),{Response:Zme}=Ume(),{FetchBaseError:mGt,FetchError:j6,AbortError:iY}=Fme(),{AbortController:hGt,AbortSignal:gGt,TimeoutSignal:AGt}=Mme(),yGt=k$e(),{cacheableResponse:CGt}=P$e(),{sizeof:xGt}=zy(),{isFormData:vGt}=W6(),{context:bGt,RequestAbortedError:EGt}=Z$e(),eze=["GET","HEAD"],IGt=500,TGt=100*1024*1024,Xme="push",tze=s(async(t,e,n)=>{let{request:r}=t.context,i=e instanceof KT&&typeof n>"u"?e:new KT(e,n),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let B=new iY("The operation was aborted.");throw i.init.body instanceof H6&&i.init.body.destroy(B),B}try{h=await r(i.url,{...n,method:o,headers:i.headers.plain(),body:m&&!(m instanceof H6)&&!vGt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(B){throw m instanceof H6&&m.destroy(B),B instanceof TypeError?B:B instanceof EGt?new iY("The operation was aborted."):new j6(B.message,"system",B)}let g=s(()=>{l.removeEventListener("abort",g);let B=new iY("The operation was aborted.");i.init.body instanceof H6&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:B}=E,N=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new j6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new j6(`maximum redirect reached at: ${i.url}`,"max-redirect");let U={headers:new the(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof H6)throw l&&l.removeEventListener("abort",g),new j6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(U.method="GET",U.body=void 0,U.headers.delete("content-length")),l&&l.removeEventListener("abort",g),tze(t,new KT(N,U))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new Zme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),nze=s(async(t,e,n)=>{if(t.options.maxCacheSize===0||!eze.includes(e.method))return n;let r=new yGt(e,n,{shared:!1});if(r.storable()){let i=await CGt(n);return t.cache.set(e.url,{policy:r,response:i},r.timeToLive()),i}else return n},"cacheResponse"),wGt=s(async(t,e,n)=>{let r=new KT(e,n);if(t.options.maxCacheSize!==0&&eze.includes(r.method)&&!["no-store","reload"].includes(r.cache)){let{policy:a,response:l}=t.cache.get(r.url)||{};if(a&&a.satisfiesWithoutRevalidation(r)){l.headers=new the(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await tze(t,r);return r.cache!=="no-store"?nze(t,r,o):o},"cachingFetch"),_Gt=s((t,e={})=>{let n=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([r,i])=>{Array.isArray(i)?i.forEach(o=>n.searchParams.append(r,o)):n.searchParams.append(r,i)}),n.href},"createUrl"),SGt=s(t=>new AGt(t),"timeoutSignal"),ehe=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:n}=this.options,r=typeof n=="number"&&n>=0?n:TGt,i=IGt;r===0&&(r=1,i=1);let o=s(({response:l},c)=>xGt(l),"sizeCalculation");this.cache=new fGt({max:i,maxSize:r,sizeCalculation:o}),this.eventEmitter=new dGt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new Zme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=bGt(this.options)}api(){return{fetch:s(async(e,n)=>this.fetch(e,n),"fetch"),Body:pGt,Headers:the,Request:KT,Response:Zme,AbortController:hGt,AbortSignal:gGt,FetchBaseError:mGt,FetchError:j6,AbortError:iY,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:_Gt,timeoutSignal:SGt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,n){return wGt(this,e,n)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(Xme,e)}offPush(e){return this.eventEmitter.off(Xme,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,n,r){Jme(`received server push promise: ${e}, headers: ${JSON.stringify(n)}`);let i=new KT(e,{headers:n}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Jme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(n)}`),r())}async pushHandler(e,n,r){Jme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(n)}, status: ${r.status}, respHeaders: ${JSON.stringify(r.headers)}`);let i=await nze(this,new KT(e,{headers:n}),r);this.eventEmitter.emit(Xme,e,i)}};rze.exports=new ehe().api()});var sze=W((_Xr,oze)=>{"use strict";f();oze.exports=ize()});var JYe=W((y0i,KYe)=>{f();KYe.exports=YYe;YYe.sync=MVt;var $Ye=require("fs");function FVt(t,e){var n=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(FVt,"checkPathExt");function zYe(t,e,n){return!t.isSymbolicLink()&&!t.isFile()?!1:FVt(e,n)}s(zYe,"checkStat");function YYe(t,e,n){$Ye.stat(t,function(r,i){n(r,r?!1:zYe(i,t,e))})}s(YYe,"isexe");function MVt(t,e){return zYe($Ye.statSync(t),t,e)}s(MVt,"sync")});var nKe=W((v0i,tKe)=>{f();tKe.exports=ZYe;ZYe.sync=QVt;var XYe=require("fs");function ZYe(t,e,n){XYe.stat(t,function(r,i){n(r,r?!1:eKe(i,e))})}s(ZYe,"isexe");function QVt(t,e){return eKe(XYe.statSync(t),e)}s(QVt,"sync");function eKe(t,e){return t.isFile()&&OVt(t,e)}s(eKe,"checkStat");function OVt(t,e){var n=t.mode,r=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=n&u||n&c&&i===a||n&l&&r===o||n&d&&o===0;return p}s(OVt,"checkMode")});var iKe=W((T0i,rKe)=>{f();var I0i=require("fs"),cK;process.platform==="win32"||global.TESTING_WINDOWS?cK=JYe():cK=nKe();rKe.exports=Xhe;Xhe.sync=UVt;function Xhe(t,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){Xhe(t,e||{},function(o,a){o?i(o):r(a)})})}cK(t,e||{},function(r,i){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,i=!1),n(r,i)})}s(Xhe,"isexe");function UVt(t,e){try{return cK.sync(t,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}s(UVt,"sync")});var dKe=W((S0i,uKe)=>{f();var Kk=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",oKe=require("path"),qVt=Kk?";":":",sKe=iKe(),aKe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),lKe=s((t,e)=>{let n=e.colon||qVt,r=t.match(/\//)||Kk&&t.match(/\\/)?[""]:[...Kk?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],i=Kk?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Kk?i.split(n):[""];return Kk&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},"getPathInfo"),cKe=s((t,e,n)=>{typeof e=="function"&&(n=e,e={}),e||(e={});let{pathEnv:r,pathExt:i,pathExtExe:o}=lKe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===r.length)return e.all&&a.length?d(a):p(aKe(t));let m=r[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=oKe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];sKe(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return n?l(0).then(u=>n(null,u),n):l(0)},"which"),WVt=s((t,e)=>{e=e||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=lKe(t,e),o=[];for(let a=0;a<n.length;a++){let l=n[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=oKe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let m=d+r[p];try{if(sKe.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw aKe(t)},"whichSync");uKe.exports=cKe;cKe.sync=WVt});var pKe=W((B0i,Zhe)=>{"use strict";f();var fKe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"},"pathKey");Zhe.exports=fKe;Zhe.exports.default=fKe});var AKe=W((N0i,gKe)=>{"use strict";f();var mKe=require("path"),GVt=dKe(),HVt=pKe();function hKe(t,e){let n=t.options.env||process.env,r=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=GVt.sync(t.command,{path:n[HVt({env:n})],pathExt:e?mKe.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return a&&(a=mKe.resolve(i?t.options.cwd:"",a)),a}s(hKe,"resolveCommandAttempt");function jVt(t){return hKe(t)||hKe(t,!0)}s(jVt,"resolveCommand");gKe.exports=jVt});var yKe=W((M0i,tge)=>{"use strict";f();var ege=/([()\][%!^"`<>&|;, *?])/g;function VVt(t){return t=t.replace(ege,"^$1"),t}s(VVt,"escapeCommand");function $Vt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(ege,"^$1"),e&&(t=t.replace(ege,"^$1")),t}s($Vt,"escapeArgument");tge.exports.command=VVt;tge.exports.argument=$Vt});var xKe=W((U0i,CKe)=>{"use strict";f();CKe.exports=/^#!(.*)/});var bKe=W((W0i,vKe)=>{"use strict";f();var zVt=xKe();vKe.exports=(t="")=>{let e=t.match(zVt);if(!e)return null;let[n,r]=e[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var IKe=W((H0i,EKe)=>{"use strict";f();var nge=require("fs"),YVt=bKe();function KVt(t){let n=Buffer.alloc(150),r;try{r=nge.openSync(t,"r"),nge.readSync(r,n,0,150,0),nge.closeSync(r)}catch{}return YVt(n.toString())}s(KVt,"readShebang");EKe.exports=KVt});var SKe=W(($0i,_Ke)=>{"use strict";f();var JVt=require("path"),TKe=AKe(),wKe=yKe(),XVt=IKe(),ZVt=process.platform==="win32",e$t=/\.(?:com|exe)$/i,t$t=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function n$t(t){t.file=TKe(t);let e=t.file&&XVt(t.file);return e?(t.args.unshift(t.file),t.command=e,TKe(t)):t.file}s(n$t,"detectShebang");function r$t(t){if(!ZVt)return t;let e=n$t(t),n=!e$t.test(e);if(t.options.forceShell||n){let r=t$t.test(e);t.command=JVt.normalize(t.command),t.command=wKe.command(t.command),t.args=t.args.map(o=>wKe.argument(o,r));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(r$t,"parseNonShell");function i$t(t,e,n){e&&!Array.isArray(e)&&(n=e,e=null),e=e?e.slice(0):[],n=Object.assign({},n);let r={command:t,args:e,options:n,file:void 0,original:{command:t,args:e}};return n.shell?r:r$t(r)}s(i$t,"parse");_Ke.exports=i$t});var BKe=W((K0i,kKe)=>{"use strict";f();var rge=process.platform==="win32";function ige(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(ige,"notFoundError");function o$t(t,e){if(!rge)return;let n=t.emit;t.emit=function(r,i){if(r==="exit"){let o=RKe(i,e);if(o)return n.call(t,"error",o)}return n.apply(t,arguments)}}s(o$t,"hookChildProcess");function RKe(t,e){return rge&&t===1&&!e.file?ige(e.original,"spawn"):null}s(RKe,"verifyENOENT");function s$t(t,e){return rge&&t===1&&!e.file?ige(e.original,"spawnSync"):null}s(s$t,"verifyENOENTSync");kKe.exports={hookChildProcess:o$t,verifyENOENT:RKe,verifyENOENTSync:s$t,notFoundError:ige}});var NKe=W((Z0i,Jk)=>{"use strict";f();var DKe=require("child_process"),oge=SKe(),sge=BKe();function PKe(t,e,n){let r=oge(t,e,n),i=DKe.spawn(r.command,r.args,r.options);return sge.hookChildProcess(i,r),i}s(PKe,"spawn");function a$t(t,e,n){let r=oge(t,e,n),i=DKe.spawnSync(r.command,r.args,r.options);return i.error=i.error||sge.verifyENOENTSync(i.status,r),i}s(a$t,"spawnSync");Jk.exports=PKe;Jk.exports.spawn=PKe;Jk.exports.sync=a$t;Jk.exports._parse=oge;Jk.exports._enoent=sge});var L$t={};g1(L$t,{getTokenizer:()=>Bo,getTokenizerAsync:()=>$2e,main:()=>CJe});module.exports=HXe(L$t);f();f();c1e().install();f();f();var BB="github.copilot",u1e="github-enterprise";f();f();f();f();f();f();var cs=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,n){super(e,{cause:n}),this.name="CopilotAuthError"}};f();f();var yf=class t{static{s(this,"ExpConfig")}constructor(e,n,r){this.variables=e,this.assignmentContext=n,this.features=r}static createFallbackConfig(e,n){return nL(e,{reason:n}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var Cf="X-Copilot-RelatedPluginVersion-",DB=(O=>(O.Market="X-MSEdge-Market",O.CorpNet="X-FD-Corpnet",O.Build="X-VSCode-Build",O.ApplicationVersion="X-VSCode-AppVersion",O.TargetPopulation="X-VSCode-TargetPopulation",O.ClientId="X-MSEdge-ClientId",O.ExtensionName="X-VSCode-ExtensionName",O.ExtensionVersion="X-VSCode-ExtensionVersion",O.ExtensionRelease="X-VSCode-ExtensionRelease",O.Language="X-VSCode-Language",O.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",O.CopilotEngine="X-Copilot-Engine",O.CopilotOverrideEngine="X-Copilot-OverrideEngine",O.CopilotRepository="X-Copilot-Repository",O.CopilotFileType="X-Copilot-FileType",O.CopilotUserKind="X-Copilot-UserKind",O.CopilotDogfood="X-Copilot-Dogfood",O.CopilotCustomModel="X-Copilot-CustomModel",O.CopilotOrgs="X-Copilot-Orgs",O.CopilotCustomModelNames="X-Copilot-CustomModelNames",O.CopilotTrackingId="X-Copilot-CopilotTrackingId",O.CopilotClientVersion="X-Copilot-ClientVersion",O.CopilotRelatedPluginVersionCppTools=Cf+"msvscodecpptools",O.CopilotRelatedPluginVersionCMakeTools=Cf+"msvscodecmaketools",O.CopilotRelatedPluginVersionMakefileTools=Cf+"msvscodemakefiletools",O.CopilotRelatedPluginVersionCSharpDevKit=Cf+"msdotnettoolscsdevkit",O.CopilotRelatedPluginVersionPython=Cf+"mspythonpython",O.CopilotRelatedPluginVersionPylance=Cf+"mspythonvscodepylance",O.CopilotRelatedPluginVersionJavaPack=Cf+"vscjavavscodejavapack",O.CopilotRelatedPluginVersionTypescript=Cf+"vscodetypescriptlanguagefeatures",O.CopilotRelatedPluginVersionTypescriptNext=Cf+"msvscodevscodetypescriptnext",O.CopilotRelatedPluginVersionCSharp=Cf+"msdotnettoolscsharp",O))(DB||{});var RZe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},sI=class t{constructor(e){this.filters=e;for(let[n,r]of Object.entries(this.filters))r===""&&delete this.filters[n]}static{s(this,"FilterSettings")}extends(e){for(let[n,r]of Object.entries(e.filters))if(this.filters[n]!==r)return!1;return!0}addToTelemetry(e){for(let[n,r]of Object.entries(this.filters)){let i=RZe[n];i!==void 0&&(e.properties[i]=r)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(n=>`${n}:${this.filters[n]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,n){return new t({...this.filters,[e]:n})}};f();var Kr=class{static{s(this,"Fetcher")}getImplementation(){return this}},PB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,n){super(e,{cause:n}),this.name="HttpTimeoutError"}};function Mc(t){return!t||typeof t!="object"?!1:t instanceof PB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Mc,"isAbortError");var G_=class extends SyntaxError{constructor(n,r){super(n);this.code=r;this.name="JsonParseError"}static{s(this,"JsonParseError")}},rg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,n=`HTTP ${e.status} ${e.statusText}`){super(n),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},kZe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function NB(t,e=!0){return t instanceof Error?e&&"cause"in t&&NB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof G_||t instanceof rg||t?.message?.startsWith("net::")||kZe.has(t.code??""):!1}s(NB,"isNetworkError");var bx=class{constructor(e,n,r,i,o){this.status=e;this.statusText=n;this.headers=r;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),n=this.headers.get("content-type");if(!n||!n.includes("json"))throw new G_(`Response content-type is ${n??"missing"} (status=${this.status})`,`ContentType=${n}`);try{return JSON.parse(e)}catch(r){if(r instanceof SyntaxError){let i=r.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||r.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new G_(`Response body truncated: actualLength=${o}`,"Truncated"):new G_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw r}}body(){return this.getBody()}};function aI(t,e,n,r,i,o,a,l,c){let u={...l,Authorization:`Bearer ${n}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Ko).sessionId,"VScode-MachineId":t.get(Ko).machineId,...tm(t),"X-GitHub-Api-Version":ig};r&&(u["OpenAI-Intent"]=r);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(Kr);if(a){let h=new AbortController;a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",or.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(BZe(h))return Bt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(aI,"postRequest");function BZe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(BZe,"isInterruptedNetworkError");f();f();var lc=class{static{s(this,"TelemetryUserConfig")}constructor(e,n,r,i){this.trackingId=n,this.optedIn=r??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){Ps(e,n=>{let r=n.getTokenValue("rt")==="1",i=n.getTokenValue("ft")??"",o=n.getTokenValue("tid"),a=n.organization_list,l=n.enterprise_list,c=n.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=r,this.ftFlag=i)})}};var qL=qe(Tx()),WL=qe(require("os"));var DZe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function PZe(t){let e={type:t.name,value:t.message},n=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(n?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let r of n.slice(t.toString().length+1).split(/\n/).reverse()){let i=r.match(DZe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(PZe,"buildExceptionDetail");function UX(t,e){let n=t.get(Jn),r=n.getEditorInfo(),i=t.get(lc),o={"#editor":r.devName??r.name,"#editor_version":og({name:r.devName??r.name,version:r.version}),"#plugin":n.getEditorPluginInfo().name,"#plugin_version":og(n.getEditorPluginInfo()),"#session_id":t.get(Ko).sessionId,"#machine_id":t.get(Ko).machineId,"#architecture":WL.arch(),"#os_platform":WL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(UX,"buildContext");function Cye(t,e){let n=t.get(zi),r=t.get(Jn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:n.getBuildType()!=="dev"?`copilot-client@${n.getVersion()}`:void 0,deployed_to:n.getBuildType(),catalog_service:r.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:UX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=PZe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,qL.SHA256)(qL.enc.Utf16.parse(u.join(`
`))).toString()),o}s(Cye,"buildPayload");f();var FB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,n,r){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,n,r,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var vye=qe(Tx());var Ln=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,n){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let r=this.valueMap.keys().next().value;this.delete(r)}return this.valueMap.set(e,n),this}get(e){if(this.valueMap.has(e)){let n=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,n),n}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,n){new Map(this.valueMap).forEach(e,n)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},lI=class extends Ln{constructor(n,r=2*60*1e3){super(n);this.defaultTtl=r;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(n){let r=!1,i=this.expiration.get(n);return i!==void 0&&(i>performance.now()&&(r=super.has(n)),r||this.delete(n)),r}get(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.get(n);this.delete(n)}}peek(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.peek(n);this.delete(n)}}set(n,r,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(n,r);return this.expiration.set(n,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(n){return this.expiration.delete(n),super.delete(n)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},HL=class extends Ln{static{s(this,"LRUDisposableCacheMap")}delete(e){let n=this.peek(e);return n&&n.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let n=this.peek(e);return super.delete(e),n}};var sg=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Ln}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let n=Date.now(),r=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return n-r[0]<6e5?!0:(r.push(n),r.shift(),this.cache.set(e,r),!1)}};f();var xf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,n=process.argv,r=process.env){return new t({debug:Eye(n,r),verboseLogging:LZe(n,r),testMode:e,simulation:NZe(r)})}};function nm(t){return t.get(xf).flags.testMode}s(nm,"isRunningInTest");function H_(t){return nm(t)}s(H_,"shouldFailForDebugPurposes");function MB(t){return t.get(xf).flags.debug}s(MB,"isDebugEnabled");function bye(t){return t.get(xf).flags.verboseLogging}s(bye,"isVerboseLoggingEnabled");function Eye(t,e){return t.includes("--debug")||qX(e,"DEBUG")}s(Eye,"determineDebugFlag");function NZe(t){return qX(t,"SIMULATION")}s(NZe,"determineSimulationFlag");function jL(t){return t.get(xf).flags.simulation}s(jL,"isRunningInSimulation");function LZe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||qX(e,"VERBOSE")||Eye(t,e)}s(LZe,"determineVerboseLoggingEnabled");function qX(t,e){for(let n of["GH_COPILOT_","GITHUB_COPILOT_"]){let r=t[`${n}${e}`];if(r)return r==="1"||r?.toLowerCase()==="true"}return!1}s(qX,"determineEnvFlagEnabled");f();var ba=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var wye=require("os"),_ye=qe(require("path"));function QB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(QB,"redactPaths");var FZe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),MZe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function GX(t){if(FZe.has(t))return t;for(let e of MZe)if(e.test(t))return t;return QB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(GX,"redactMessage");function VL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(VL,"escapeForRegExp");var QZe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+VL((0,wye.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function WX(t){return t.replace(QZe,"~")}s(WX,"redactHomeDir");var Sye="[\\\\/]?([^:)]*)(?=:\\d)",Iye=new RegExp(VL(_ye.sep),"g"),Tye=new RegExp(VL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+Sye,"gi");function HX(t,e,n=!1,r=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(Tye.test(l))i.stack+=`
${QB(l.replace(Tye,(c,u)=>"./"+u.replace(Iye,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${QB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of r){let p=new RegExp(VL(d.replace(/[\\/]$/,""))+Sye,"gi");if(p.test(l)){i.stack+=`
${QB(l.replace(p,(m,h)=>u+h.replace(Iye,"/")))}`,c=!0;break}}if(c)continue;n?i.stack+=`
${WX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else n&&o&&(i.stack=WX(o));return t.cause instanceof Error&&(i.cause=HX(t.cause,e,n,r)),i}s(HX,"cloneError");function Rye(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(Rye,"errorMessageWithoutPath");function kye(t,e){return HX(t,s(function(r){return WX(Rye(r))},"prepareMessage"),!0,e)}s(kye,"prepareErrorForRestrictedTelemetry");function Bye(t,e,n=!1){return HX(t,s(function(i){if(n)return GX(Rye(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=QB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(Bye,"redactError");f();f();var Qc={};g1(Qc,{HasPropertyKey:()=>$L,IsArray:()=>Ea,IsAsyncIterator:()=>jX,IsBigInt:()=>OB,IsBoolean:()=>C1,IsDate:()=>cI,IsFunction:()=>VX,IsIterator:()=>$X,IsNull:()=>zX,IsNumber:()=>n0,IsObject:()=>wo,IsRegExp:()=>UB,IsString:()=>qo,IsSymbol:()=>YX,IsUint8Array:()=>x1,IsUndefined:()=>Ia});f();function $L(t,e){return e in t}s($L,"HasPropertyKey");function jX(t){return wo(t)&&!Ea(t)&&!x1(t)&&Symbol.asyncIterator in t}s(jX,"IsAsyncIterator");function Ea(t){return Array.isArray(t)}s(Ea,"IsArray");function OB(t){return typeof t=="bigint"}s(OB,"IsBigInt");function C1(t){return typeof t=="boolean"}s(C1,"IsBoolean");function cI(t){return t instanceof globalThis.Date}s(cI,"IsDate");function VX(t){return typeof t=="function"}s(VX,"IsFunction");function $X(t){return wo(t)&&!Ea(t)&&!x1(t)&&Symbol.iterator in t}s($X,"IsIterator");function zX(t){return t===null}s(zX,"IsNull");function n0(t){return typeof t=="number"}s(n0,"IsNumber");function wo(t){return typeof t=="object"&&t!==null}s(wo,"IsObject");function UB(t){return t instanceof globalThis.RegExp}s(UB,"IsRegExp");function qo(t){return typeof t=="string"}s(qo,"IsString");function YX(t){return typeof t=="symbol"}s(YX,"IsSymbol");function x1(t){return t instanceof globalThis.Uint8Array}s(x1,"IsUint8Array");function Ia(t){return t===void 0}s(Ia,"IsUndefined");function OZe(t){return t.map(e=>zL(e))}s(OZe,"ArrayType");function UZe(t){return new Date(t.getTime())}s(UZe,"DateType");function qZe(t){return new Uint8Array(t)}s(qZe,"Uint8ArrayType");function WZe(t){return new RegExp(t.source,t.flags)}s(WZe,"RegExpType");function GZe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=zL(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=zL(t[n]);return e}s(GZe,"ObjectType");function zL(t){return Ea(t)?OZe(t):cI(t)?UZe(t):x1(t)?qZe(t):UB(t)?WZe(t):wo(t)?GZe(t):t}s(zL,"Visit");function us(t){return zL(t)}s(us,"Clone");function j_(t,e){return e===void 0?us(t):us({...e,...t})}s(j_,"CloneType");f();f();f();function YL(t){return ci(t)&&globalThis.Symbol.asyncIterator in t}s(YL,"IsAsyncIterator");function KL(t){return ci(t)&&globalThis.Symbol.iterator in t}s(KL,"IsIterator");function KX(t){return ci(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(KX,"IsStandardObject");function JL(t){return t instanceof globalThis.Promise}s(JL,"IsPromise");function vu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(vu,"IsDate");function Dye(t){return t instanceof globalThis.Map}s(Dye,"IsMap");function Pye(t){return t instanceof globalThis.Set}s(Pye,"IsSet");function vf(t){return globalThis.ArrayBuffer.isView(t)}s(vf,"IsTypedArray");function V_(t){return t instanceof globalThis.Uint8Array}s(V_,"IsUint8Array");function gr(t,e){return e in t}s(gr,"HasPropertyKey");function ci(t){return t!==null&&typeof t=="object"}s(ci,"IsObject");function Ar(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Ar,"IsArray");function ds(t){return t===void 0}s(ds,"IsUndefined");function v1(t){return t===null}s(v1,"IsNull");function ag(t){return typeof t=="boolean"}s(ag,"IsBoolean");function Wn(t){return typeof t=="number"}s(Wn,"IsNumber");function XL(t){return globalThis.Number.isInteger(t)}s(XL,"IsInteger");function cc(t){return typeof t=="bigint"}s(cc,"IsBigInt");function qi(t){return typeof t=="string"}s(qi,"IsString");function wx(t){return typeof t=="function"}s(wx,"IsFunction");function b1(t){return typeof t=="symbol"}s(b1,"IsSymbol");function r0(t){return cc(t)||ag(t)||v1(t)||Wn(t)||qi(t)||b1(t)||ds(t)}s(r0,"IsValueType");var Jo;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){let l=ci(a);return t.AllowArrayObject?l:l&&!Ar(a)}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return n(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return t.AllowNaN?Wn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=ds(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Jo||(Jo={}));f();function HZe(t){return globalThis.Object.freeze(t).map(e=>qB(e))}s(HZe,"ImmutableArray");function jZe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=qB(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=qB(t[n]);return globalThis.Object.freeze(e)}s(jZe,"ImmutableObject");function qB(t){return Ea(t)?HZe(t):cI(t)?t:x1(t)?t:UB(t)?t:wo(t)?jZe(t):t}s(qB,"Immutable");function nt(t,e){let n=e!==void 0?{...e,...t}:t;switch(Jo.InstanceMode){case"freeze":return qB(n);case"clone":return us(n);default:return n}}s(nt,"CreateType");f();var yr=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ns=Symbol.for("TypeBox.Transform"),rm=Symbol.for("TypeBox.Readonly"),uc=Symbol.for("TypeBox.Optional"),bf=Symbol.for("TypeBox.Hint"),Xe=Symbol.for("TypeBox.Kind");function $_(t){return wo(t)&&t[rm]==="Readonly"}s($_,"IsReadonly");function od(t){return wo(t)&&t[uc]==="Optional"}s(od,"IsOptional");function JX(t){return Ni(t,"Any")}s(JX,"IsAny");function XX(t){return Ni(t,"Argument")}s(XX,"IsArgument");function im(t){return Ni(t,"Array")}s(im,"IsArray");function uI(t){return Ni(t,"AsyncIterator")}s(uI,"IsAsyncIterator");function dI(t){return Ni(t,"BigInt")}s(dI,"IsBigInt");function E1(t){return Ni(t,"Boolean")}s(E1,"IsBoolean");function om(t){return Ni(t,"Computed")}s(om,"IsComputed");function sm(t){return Ni(t,"Constructor")}s(sm,"IsConstructor");function VZe(t){return Ni(t,"Date")}s(VZe,"IsDate");function am(t){return Ni(t,"Function")}s(am,"IsFunction");function lm(t){return Ni(t,"Integer")}s(lm,"IsInteger");function Ks(t){return Ni(t,"Intersect")}s(Ks,"IsIntersect");function fI(t){return Ni(t,"Iterator")}s(fI,"IsIterator");function Ni(t,e){return wo(t)&&Xe in t&&t[Xe]===e}s(Ni,"IsKindOf");function ZL(t){return C1(t)||n0(t)||qo(t)}s(ZL,"IsLiteralValue");function i0(t){return Ni(t,"Literal")}s(i0,"IsLiteral");function o0(t){return Ni(t,"MappedKey")}s(o0,"IsMappedKey");function ps(t){return Ni(t,"MappedResult")}s(ps,"IsMappedResult");function _x(t){return Ni(t,"Never")}s(_x,"IsNever");function $Ze(t){return Ni(t,"Not")}s($Ze,"IsNot");function WB(t){return Ni(t,"Null")}s(WB,"IsNull");function cm(t){return Ni(t,"Number")}s(cm,"IsNumber");function Ta(t){return Ni(t,"Object")}s(Ta,"IsObject");function pI(t){return Ni(t,"Promise")}s(pI,"IsPromise");function mI(t){return Ni(t,"Record")}s(mI,"IsRecord");function oa(t){return Ni(t,"Ref")}s(oa,"IsRef");function ZX(t){return Ni(t,"RegExp")}s(ZX,"IsRegExp");function I1(t){return Ni(t,"String")}s(I1,"IsString");function GB(t){return Ni(t,"Symbol")}s(GB,"IsSymbol");function s0(t){return Ni(t,"TemplateLiteral")}s(s0,"IsTemplateLiteral");function zZe(t){return Ni(t,"This")}s(zZe,"IsThis");function ao(t){return wo(t)&&Ns in t}s(ao,"IsTransform");function a0(t){return Ni(t,"Tuple")}s(a0,"IsTuple");function T1(t){return Ni(t,"Undefined")}s(T1,"IsUndefined");function Wi(t){return Ni(t,"Union")}s(Wi,"IsUnion");function YZe(t){return Ni(t,"Uint8Array")}s(YZe,"IsUint8Array");function KZe(t){return Ni(t,"Unknown")}s(KZe,"IsUnknown");function JZe(t){return Ni(t,"Unsafe")}s(JZe,"IsUnsafe");function XZe(t){return Ni(t,"Void")}s(XZe,"IsVoid");function Sx(t){return wo(t)&&Xe in t&&qo(t[Xe])}s(Sx,"IsKind");function Ls(t){return JX(t)||XX(t)||im(t)||E1(t)||dI(t)||uI(t)||om(t)||sm(t)||VZe(t)||am(t)||lm(t)||Ks(t)||fI(t)||i0(t)||o0(t)||ps(t)||_x(t)||$Ze(t)||WB(t)||cm(t)||Ta(t)||pI(t)||mI(t)||oa(t)||ZX(t)||I1(t)||GB(t)||s0(t)||zZe(t)||a0(t)||T1(t)||Wi(t)||YZe(t)||KZe(t)||JZe(t)||XZe(t)||Sx(t)}s(Ls,"IsSchema");var De={};g1(De,{IsAny:()=>Mye,IsArgument:()=>Qye,IsArray:()=>Oye,IsAsyncIterator:()=>Uye,IsBigInt:()=>qye,IsBoolean:()=>Wye,IsComputed:()=>Gye,IsConstructor:()=>Hye,IsDate:()=>jye,IsFunction:()=>Vye,IsImport:()=>iet,IsInteger:()=>$ye,IsIntersect:()=>zye,IsIterator:()=>Yye,IsKind:()=>vCe,IsKindOf:()=>Ai,IsLiteral:()=>jB,IsLiteralBoolean:()=>oet,IsLiteralNumber:()=>Jye,IsLiteralString:()=>Kye,IsLiteralValue:()=>Xye,IsMappedKey:()=>Zye,IsMappedResult:()=>eCe,IsNever:()=>tCe,IsNot:()=>nCe,IsNull:()=>rCe,IsNumber:()=>iCe,IsObject:()=>oCe,IsOptional:()=>ret,IsPromise:()=>sCe,IsProperties:()=>eF,IsReadonly:()=>net,IsRecord:()=>aCe,IsRecursive:()=>set,IsRef:()=>lCe,IsRegExp:()=>cCe,IsSchema:()=>ms,IsString:()=>uCe,IsSymbol:()=>dCe,IsTemplateLiteral:()=>fCe,IsThis:()=>pCe,IsTransform:()=>mCe,IsTuple:()=>hCe,IsUint8Array:()=>ACe,IsUndefined:()=>gCe,IsUnion:()=>rZ,IsUnionLiteral:()=>aet,IsUnknown:()=>yCe,IsUnsafe:()=>CCe,IsVoid:()=>xCe,TypeGuardUnknownTypeError:()=>eZ});f();var eZ=class extends yr{static{s(this,"TypeGuardUnknownTypeError")}},ZZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Nye(t){try{return new RegExp(t),!0}catch{return!1}}s(Nye,"IsPattern");function tZ(t){if(!qo(t))return!1;for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}s(tZ,"IsControlCharacterFree");function Lye(t){return nZ(t)||ms(t)}s(Lye,"IsAdditionalProperties");function HB(t){return Ia(t)||OB(t)}s(HB,"IsOptionalBigInt");function Wo(t){return Ia(t)||n0(t)}s(Wo,"IsOptionalNumber");function nZ(t){return Ia(t)||C1(t)}s(nZ,"IsOptionalBoolean");function _o(t){return Ia(t)||qo(t)}s(_o,"IsOptionalString");function eet(t){return Ia(t)||qo(t)&&tZ(t)&&Nye(t)}s(eet,"IsOptionalPattern");function tet(t){return Ia(t)||qo(t)&&tZ(t)}s(tet,"IsOptionalFormat");function Fye(t){return Ia(t)||ms(t)}s(Fye,"IsOptionalSchema");function net(t){return wo(t)&&t[rm]==="Readonly"}s(net,"IsReadonly");function ret(t){return wo(t)&&t[uc]==="Optional"}s(ret,"IsOptional");function Mye(t){return Ai(t,"Any")&&_o(t.$id)}s(Mye,"IsAny");function Qye(t){return Ai(t,"Argument")&&n0(t.index)}s(Qye,"IsArgument");function Oye(t){return Ai(t,"Array")&&t.type==="array"&&_o(t.$id)&&ms(t.items)&&Wo(t.minItems)&&Wo(t.maxItems)&&nZ(t.uniqueItems)&&Fye(t.contains)&&Wo(t.minContains)&&Wo(t.maxContains)}s(Oye,"IsArray");function Uye(t){return Ai(t,"AsyncIterator")&&t.type==="AsyncIterator"&&_o(t.$id)&&ms(t.items)}s(Uye,"IsAsyncIterator");function qye(t){return Ai(t,"BigInt")&&t.type==="bigint"&&_o(t.$id)&&HB(t.exclusiveMaximum)&&HB(t.exclusiveMinimum)&&HB(t.maximum)&&HB(t.minimum)&&HB(t.multipleOf)}s(qye,"IsBigInt");function Wye(t){return Ai(t,"Boolean")&&t.type==="boolean"&&_o(t.$id)}s(Wye,"IsBoolean");function Gye(t){return Ai(t,"Computed")&&qo(t.target)&&Ea(t.parameters)&&t.parameters.every(e=>ms(e))}s(Gye,"IsComputed");function Hye(t){return Ai(t,"Constructor")&&t.type==="Constructor"&&_o(t.$id)&&Ea(t.parameters)&&t.parameters.every(e=>ms(e))&&ms(t.returns)}s(Hye,"IsConstructor");function jye(t){return Ai(t,"Date")&&t.type==="Date"&&_o(t.$id)&&Wo(t.exclusiveMaximumTimestamp)&&Wo(t.exclusiveMinimumTimestamp)&&Wo(t.maximumTimestamp)&&Wo(t.minimumTimestamp)&&Wo(t.multipleOfTimestamp)}s(jye,"IsDate");function Vye(t){return Ai(t,"Function")&&t.type==="Function"&&_o(t.$id)&&Ea(t.parameters)&&t.parameters.every(e=>ms(e))&&ms(t.returns)}s(Vye,"IsFunction");function iet(t){return Ai(t,"Import")&&$L(t,"$defs")&&wo(t.$defs)&&eF(t.$defs)&&$L(t,"$ref")&&qo(t.$ref)&&t.$ref in t.$defs}s(iet,"IsImport");function $ye(t){return Ai(t,"Integer")&&t.type==="integer"&&_o(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s($ye,"IsInteger");function eF(t){return wo(t)&&Object.entries(t).every(([e,n])=>tZ(e)&&ms(n))}s(eF,"IsProperties");function zye(t){return Ai(t,"Intersect")&&!(qo(t.type)&&t.type!=="object")&&Ea(t.allOf)&&t.allOf.every(e=>ms(e)&&!mCe(e))&&_o(t.type)&&(nZ(t.unevaluatedProperties)||Fye(t.unevaluatedProperties))&&_o(t.$id)}s(zye,"IsIntersect");function Yye(t){return Ai(t,"Iterator")&&t.type==="Iterator"&&_o(t.$id)&&ms(t.items)}s(Yye,"IsIterator");function Ai(t,e){return wo(t)&&Xe in t&&t[Xe]===e}s(Ai,"IsKindOf");function Kye(t){return jB(t)&&qo(t.const)}s(Kye,"IsLiteralString");function Jye(t){return jB(t)&&n0(t.const)}s(Jye,"IsLiteralNumber");function oet(t){return jB(t)&&C1(t.const)}s(oet,"IsLiteralBoolean");function jB(t){return Ai(t,"Literal")&&_o(t.$id)&&Xye(t.const)}s(jB,"IsLiteral");function Xye(t){return C1(t)||n0(t)||qo(t)}s(Xye,"IsLiteralValue");function Zye(t){return Ai(t,"MappedKey")&&Ea(t.keys)&&t.keys.every(e=>n0(e)||qo(e))}s(Zye,"IsMappedKey");function eCe(t){return Ai(t,"MappedResult")&&eF(t.properties)}s(eCe,"IsMappedResult");function tCe(t){return Ai(t,"Never")&&wo(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(tCe,"IsNever");function nCe(t){return Ai(t,"Not")&&ms(t.not)}s(nCe,"IsNot");function rCe(t){return Ai(t,"Null")&&t.type==="null"&&_o(t.$id)}s(rCe,"IsNull");function iCe(t){return Ai(t,"Number")&&t.type==="number"&&_o(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(iCe,"IsNumber");function oCe(t){return Ai(t,"Object")&&t.type==="object"&&_o(t.$id)&&eF(t.properties)&&Lye(t.additionalProperties)&&Wo(t.minProperties)&&Wo(t.maxProperties)}s(oCe,"IsObject");function sCe(t){return Ai(t,"Promise")&&t.type==="Promise"&&_o(t.$id)&&ms(t.item)}s(sCe,"IsPromise");function aCe(t){return Ai(t,"Record")&&t.type==="object"&&_o(t.$id)&&Lye(t.additionalProperties)&&wo(t.patternProperties)&&(e=>{let n=Object.getOwnPropertyNames(e.patternProperties);return n.length===1&&Nye(n[0])&&wo(e.patternProperties)&&ms(e.patternProperties[n[0]])})(t)}s(aCe,"IsRecord");function set(t){return wo(t)&&bf in t&&t[bf]==="Recursive"}s(set,"IsRecursive");function lCe(t){return Ai(t,"Ref")&&_o(t.$id)&&qo(t.$ref)}s(lCe,"IsRef");function cCe(t){return Ai(t,"RegExp")&&_o(t.$id)&&qo(t.source)&&qo(t.flags)&&Wo(t.maxLength)&&Wo(t.minLength)}s(cCe,"IsRegExp");function uCe(t){return Ai(t,"String")&&t.type==="string"&&_o(t.$id)&&Wo(t.minLength)&&Wo(t.maxLength)&&eet(t.pattern)&&tet(t.format)}s(uCe,"IsString");function dCe(t){return Ai(t,"Symbol")&&t.type==="symbol"&&_o(t.$id)}s(dCe,"IsSymbol");function fCe(t){return Ai(t,"TemplateLiteral")&&t.type==="string"&&qo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(fCe,"IsTemplateLiteral");function pCe(t){return Ai(t,"This")&&_o(t.$id)&&qo(t.$ref)}s(pCe,"IsThis");function mCe(t){return wo(t)&&Ns in t}s(mCe,"IsTransform");function hCe(t){return Ai(t,"Tuple")&&t.type==="array"&&_o(t.$id)&&n0(t.minItems)&&n0(t.maxItems)&&t.minItems===t.maxItems&&(Ia(t.items)&&Ia(t.additionalItems)&&t.minItems===0||Ea(t.items)&&t.items.every(e=>ms(e)))}s(hCe,"IsTuple");function gCe(t){return Ai(t,"Undefined")&&t.type==="undefined"&&_o(t.$id)}s(gCe,"IsUndefined");function aet(t){return rZ(t)&&t.anyOf.every(e=>Kye(e)||Jye(e))}s(aet,"IsUnionLiteral");function rZ(t){return Ai(t,"Union")&&_o(t.$id)&&wo(t)&&Ea(t.anyOf)&&t.anyOf.every(e=>ms(e))}s(rZ,"IsUnion");function ACe(t){return Ai(t,"Uint8Array")&&t.type==="Uint8Array"&&_o(t.$id)&&Wo(t.minByteLength)&&Wo(t.maxByteLength)}s(ACe,"IsUint8Array");function yCe(t){return Ai(t,"Unknown")&&_o(t.$id)}s(yCe,"IsUnknown");function CCe(t){return Ai(t,"Unsafe")}s(CCe,"IsUnsafe");function xCe(t){return Ai(t,"Void")&&t.type==="void"&&_o(t.$id)}s(xCe,"IsVoid");function vCe(t){return wo(t)&&Xe in t&&qo(t[Xe])&&!ZZe.includes(t[Xe])}s(vCe,"IsKind");function ms(t){return wo(t)&&(Mye(t)||Qye(t)||Oye(t)||Wye(t)||qye(t)||Uye(t)||Gye(t)||Hye(t)||jye(t)||Vye(t)||$ye(t)||zye(t)||Yye(t)||jB(t)||Zye(t)||eCe(t)||tCe(t)||nCe(t)||rCe(t)||iCe(t)||oCe(t)||sCe(t)||aCe(t)||lCe(t)||cCe(t)||uCe(t)||dCe(t)||fCe(t)||pCe(t)||hCe(t)||gCe(t)||rZ(t)||ACe(t)||yCe(t)||CCe(t)||xCe(t)||vCe(t))}s(ms,"IsSchema");f();var iZ="(true|false)",VB="(0|[1-9][0-9]*)",oZ="(.*)",cet="(?!.*)",gJt=`^${iZ}$`,lg=`^${VB}$`,cg=`^${oZ}$`,bCe=`^${cet}$`;f();var um={};g1(um,{Clear:()=>det,Delete:()=>fet,Entries:()=>uet,Get:()=>het,Has:()=>pet,Set:()=>met});f();var z_=new Map;function uet(){return new Map(z_)}s(uet,"Entries");function det(){return z_.clear()}s(det,"Clear");function fet(t){return z_.delete(t)}s(fet,"Delete");function pet(t){return z_.has(t)}s(pet,"Has");function met(t,e){z_.set(t,e)}s(met,"Set");function het(t){return z_.get(t)}s(het,"Get");var bu={};g1(bu,{Clear:()=>Aet,Delete:()=>yet,Entries:()=>get,Get:()=>vet,Has:()=>Cet,Set:()=>xet});f();var Y_=new Map;function get(){return new Map(Y_)}s(get,"Entries");function Aet(){return Y_.clear()}s(Aet,"Clear");function yet(t){return Y_.delete(t)}s(yet,"Delete");function Cet(t){return Y_.has(t)}s(Cet,"Has");function xet(t,e){Y_.set(t,e)}s(xet,"Set");function vet(t){return Y_.get(t)}s(vet,"Get");f();function ECe(t,e){return t.includes(e)}s(ECe,"SetIncludes");function ICe(t){return[...new Set(t)]}s(ICe,"SetDistinct");function bet(t,e){return t.filter(n=>e.includes(n))}s(bet,"SetIntersect");function Eet(t,e){return t.reduce((n,r)=>bet(n,r),e)}s(Eet,"SetIntersectManyResolve");function TCe(t){return t.length===1?t[0]:t.length>1?Eet(t.slice(1),t[0]):[]}s(TCe,"SetIntersectMany");function wCe(t){let e=[];for(let n of t)e.push(...n);return e}s(wCe,"SetUnionMany");f();function Rx(t){return nt({[Xe]:"Any"},t)}s(Rx,"Any");f();function K_(t,e){return nt({[Xe]:"Array",type:"array",items:t},e)}s(K_,"Array");f();function _Ce(t){return nt({[Xe]:"Argument",index:t})}s(_Ce,"Argument");f();function J_(t,e){return nt({[Xe]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(J_,"AsyncIterator");f();f();function Xo(t,e,n){return nt({[Xe]:"Computed",target:t,parameters:e},n)}s(Xo,"Computed");f();f();function Iet(t,e){let{[e]:n,...r}=t;return r}s(Iet,"DiscardKey");function Js(t,e){return e.reduce((n,r)=>Iet(n,r),t)}s(Js,"Discard");f();function ni(t){return nt({[Xe]:"Never",not:{}},t)}s(ni,"Never");f();f();function Yi(t){return nt({[Xe]:"MappedResult",properties:t})}s(Yi,"MappedResult");f();f();function X_(t,e,n){return nt({[Xe]:"Constructor",type:"Constructor",parameters:t,returns:e},n)}s(X_,"Constructor");f();function ug(t,e,n){return nt({[Xe]:"Function",type:"Function",parameters:t,returns:e},n)}s(ug,"Function");f();f();f();f();function $B(t,e){return nt({[Xe]:"Union",anyOf:t},e)}s($B,"UnionCreate");function Tet(t){return t.some(e=>od(e))}s(Tet,"IsUnionOptional");function SCe(t){return t.map(e=>od(e)?wet(e):e)}s(SCe,"RemoveOptionalFromRest");function wet(t){return Js(t,[uc])}s(wet,"RemoveOptionalFromType");function _et(t,e){return Tet(t)?Oc($B(SCe(t),e)):$B(SCe(t),e)}s(_et,"ResolveUnion");function dg(t,e){return t.length===1?nt(t[0],e):t.length===0?ni(e):_et(t,e)}s(dg,"UnionEvaluated");f();function lo(t,e){return t.length===0?ni(e):t.length===1?nt(t[0],e):$B(t,e)}s(lo,"Union");f();f();f();var tF=class extends yr{static{s(this,"TemplateLiteralParserError")}};function Ret(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(Ret,"Unescape");function sZ(t,e,n){return t[e]===n&&t.charCodeAt(e-1)!==92}s(sZ,"IsNonEscaped");function _1(t,e){return sZ(t,e,"(")}s(_1,"IsOpenParen");function zB(t,e){return sZ(t,e,")")}s(zB,"IsCloseParen");function RCe(t,e){return sZ(t,e,"|")}s(RCe,"IsSeparator");function ket(t){if(!(_1(t,0)&&zB(t,t.length-1)))return!1;let e=0;for(let n=0;n<t.length;n++)if(_1(t,n)&&(e+=1),zB(t,n)&&(e-=1),e===0&&n!==t.length-1)return!1;return!0}s(ket,"IsGroup");function Bet(t){return t.slice(1,t.length-1)}s(Bet,"InGroup");function Det(t){let e=0;for(let n=0;n<t.length;n++)if(_1(t,n)&&(e+=1),zB(t,n)&&(e-=1),RCe(t,n)&&e===0)return!0;return!1}s(Det,"IsPrecedenceOr");function Pet(t){for(let e=0;e<t.length;e++)if(_1(t,e))return!0;return!1}s(Pet,"IsPrecedenceAnd");function Net(t){let[e,n]=[0,0],r=[];for(let o=0;o<t.length;o++)if(_1(t,o)&&(e+=1),zB(t,o)&&(e-=1),RCe(t,o)&&e===0){let a=t.slice(n,o);a.length>0&&r.push(Z_(a)),n=o+1}let i=t.slice(n);return i.length>0&&r.push(Z_(i)),r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"or",expr:r}}s(Net,"Or");function Let(t){function e(i,o){if(!_1(i,o))throw new tF("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(_1(i,l)&&(a+=1),zB(i,l)&&(a-=1),a===0)return[o,l];throw new tF("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function n(i,o){for(let a=o;a<i.length;a++)if(_1(i,a))return[o,a];return[o,i.length]}s(n,"Range");let r=[];for(let i=0;i<t.length;i++)if(_1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);r.push(Z_(l)),i=a}else{let[o,a]=n(t,i),l=t.slice(o,a);l.length>0&&r.push(Z_(l)),i=a-1}return r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"and",expr:r}}s(Let,"And");function Z_(t){return ket(t)?Z_(Bet(t)):Det(t)?Net(t):Pet(t)?Let(t):{type:"const",const:Ret(t)}}s(Z_,"TemplateLiteralParse");function eS(t){return Z_(t.slice(1,t.length-1))}s(eS,"TemplateLiteralParseExact");var aZ=class extends yr{static{s(this,"TemplateLiteralFiniteError")}};function Fet(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(Fet,"IsNumberExpression");function Met(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(Met,"IsBooleanExpression");function Qet(t){return t.type==="const"&&t.const===".*"}s(Qet,"IsStringExpression");function hI(t){return Fet(t)||Qet(t)?!1:Met(t)?!0:t.type==="and"?t.expr.every(e=>hI(e)):t.type==="or"?t.expr.every(e=>hI(e)):t.type==="const"?!0:(()=>{throw new aZ("Unknown expression type")})()}s(hI,"IsTemplateLiteralExpressionFinite");function nF(t){let e=eS(t.pattern);return hI(e)}s(nF,"IsTemplateLiteralFinite");f();var lZ=class extends yr{static{s(this,"TemplateLiteralGenerateError")}};function*kCe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let n of kCe(t.slice(1)))yield`${e}${n}`}s(kCe,"GenerateReduce");function*Oet(t){return yield*kCe(t.expr.map(e=>[...YB(e)]))}s(Oet,"GenerateAnd");function*Uet(t){for(let e of t.expr)yield*YB(e)}s(Uet,"GenerateOr");function*qet(t){return yield t.const}s(qet,"GenerateConst");function*YB(t){return t.type==="and"?yield*Oet(t):t.type==="or"?yield*Uet(t):t.type==="const"?yield*qet(t):(()=>{throw new lZ("Unknown expression")})()}s(YB,"TemplateLiteralExpressionGenerate");function tS(t){let e=eS(t.pattern);return hI(e)?[...YB(e)]:[]}s(tS,"TemplateLiteralGenerate");f();f();function Li(t,e){return nt({[Xe]:"Literal",const:t,type:typeof t},e)}s(Li,"Literal");f();function rF(t){return nt({[Xe]:"Boolean",type:"boolean"},t)}s(rF,"Boolean");f();function nS(t){return nt({[Xe]:"BigInt",type:"bigint"},t)}s(nS,"BigInt");f();function Ef(t){return nt({[Xe]:"Number",type:"number"},t)}s(Ef,"Number");f();function Eu(t){return nt({[Xe]:"String",type:"string"},t)}s(Eu,"String");function*Wet(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield rF():e==="number"?yield Ef():e==="bigint"?yield nS():e==="string"?yield Eu():yield(()=>{let n=e.split("|").map(r=>Li(r.trim()));return n.length===0?ni():n.length===1?n[0]:dg(n)})()}s(Wet,"FromUnion");function*Get(t){if(t[1]!=="{"){let e=Li("$"),n=cZ(t.slice(1));return yield*[e,...n]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let n=Wet(t.slice(2,e)),r=cZ(t.slice(e+1));return yield*[...n,...r]}yield Li(t)}s(Get,"FromTerminal");function*cZ(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let n=Li(t.slice(0,e)),r=Get(t.slice(e));return yield*[n,...r]}yield Li(t)}s(cZ,"FromSyntax");function BCe(t){return[...cZ(t)]}s(BCe,"TemplateLiteralSyntax");f();var uZ=class extends yr{static{s(this,"TemplateLiteralPatternError")}};function Het(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Het,"Escape");function DCe(t,e){return s0(t)?t.pattern.slice(1,t.pattern.length-1):Wi(t)?`(${t.anyOf.map(n=>DCe(n,e)).join("|")})`:cm(t)?`${e}${VB}`:lm(t)?`${e}${VB}`:dI(t)?`${e}${VB}`:I1(t)?`${e}${oZ}`:i0(t)?`${e}${Het(t.const.toString())}`:E1(t)?`${e}${iZ}`:(()=>{throw new uZ(`Unexpected Kind '${t[Xe]}'`)})()}s(DCe,"Visit");function dZ(t){return`^${t.map(e=>DCe(e,"")).join("")}$`}s(dZ,"TemplateLiteralPattern");f();function gI(t){let n=tS(t).map(r=>Li(r));return dg(n)}s(gI,"TemplateLiteralToUnion");f();function iF(t,e){let n=qo(t)?dZ(BCe(t)):dZ(t);return nt({[Xe]:"TemplateLiteral",type:"string",pattern:n},e)}s(iF,"TemplateLiteral");function jet(t){return tS(t).map(n=>n.toString())}s(jet,"FromTemplateLiteral");function Vet(t){let e=[];for(let n of t)e.push(...sd(n));return e}s(Vet,"FromUnion");function $et(t){return[t.toString()]}s($et,"FromLiteral");function sd(t){return[...new Set(s0(t)?jet(t):Wi(t)?Vet(t.anyOf):i0(t)?$et(t.const):cm(t)?["[number]"]:lm(t)?["[number]"]:[])]}s(sd,"IndexPropertyKeys");f();function zet(t,e,n){let r={};for(let i of Object.getOwnPropertyNames(e))r[i]=kx(t,sd(e[i]),n);return r}s(zet,"FromProperties");function Yet(t,e,n){return zet(t,e.properties,n)}s(Yet,"FromMappedResult");function PCe(t,e,n){let r=Yet(t,e,n);return Yi(r)}s(PCe,"IndexFromMappedResult");function LCe(t,e){return t.map(n=>FCe(n,e))}s(LCe,"FromRest");function Ket(t){return t.filter(e=>!_x(e))}s(Ket,"FromIntersectRest");function Jet(t,e){return oF(Ket(LCe(t,e)))}s(Jet,"FromIntersect");function Xet(t){return t.some(e=>_x(e))?[]:t}s(Xet,"FromUnionRest");function Zet(t,e){return dg(Xet(LCe(t,e)))}s(Zet,"FromUnion");function ett(t,e){return e in t?t[e]:e==="[number]"?dg(t):ni()}s(ett,"FromTuple");function ttt(t,e){return e==="[number]"?t:ni()}s(ttt,"FromArray");function ntt(t,e){return e in t?t[e]:ni()}s(ntt,"FromProperty");function FCe(t,e){return Ks(t)?Jet(t.allOf,e):Wi(t)?Zet(t.anyOf,e):a0(t)?ett(t.items??[],e):im(t)?ttt(t.items,e):Ta(t)?ntt(t.properties,e):ni()}s(FCe,"IndexFromPropertyKey");function KB(t,e){return e.map(n=>FCe(t,n))}s(KB,"IndexFromPropertyKeys");function NCe(t,e){return dg(KB(t,e))}s(NCe,"FromSchema");function kx(t,e,n){if(oa(t)||oa(e)){let r="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ls(t)||!Ls(e))throw new yr(r);return Xo("Index",[t,e])}return ps(e)?PCe(t,e,n):o0(e)?MCe(t,e,n):nt(Ls(e)?NCe(t,sd(e)):NCe(t,e),n)}s(kx,"Index");function rtt(t,e,n){return{[e]:kx(t,[e],us(n))}}s(rtt,"MappedIndexPropertyKey");function itt(t,e,n){return e.reduce((r,i)=>({...r,...rtt(t,i,n)}),{})}s(itt,"MappedIndexPropertyKeys");function ott(t,e,n){return itt(t,e.keys,n)}s(ott,"MappedIndexProperties");function MCe(t,e,n){let r=ott(t,e,n);return Yi(r)}s(MCe,"IndexFromMappedKey");f();function rS(t,e){return nt({[Xe]:"Iterator",type:"Iterator",items:t},e)}s(rS,"Iterator");f();function stt(t){let e=[];for(let n in t)od(t[n])||e.push(n);return e}s(stt,"RequiredKeys");function att(t,e){let n=stt(t),r=n.length>0?{[Xe]:"Object",type:"object",properties:t,required:n}:{[Xe]:"Object",type:"object",properties:t};return nt(r,e)}s(att,"_Object");var co=att;f();function sF(t,e){return nt({[Xe]:"Promise",type:"Promise",item:t},e)}s(sF,"Promise");f();f();function ltt(t){return nt(Js(t,[rm]))}s(ltt,"RemoveReadonly");function ctt(t){return nt({...t,[rm]:"Readonly"})}s(ctt,"AddReadonly");function utt(t,e){return e===!1?ltt(t):ctt(t)}s(utt,"ReadonlyWithFlag");function ad(t,e){let n=e??!0;return ps(t)?QCe(t,n):utt(t,n)}s(ad,"Readonly");function dtt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=ad(t[r],e);return n}s(dtt,"FromProperties");function ftt(t,e){return dtt(t.properties,e)}s(ftt,"FromMappedResult");function QCe(t,e){let n=ftt(t,e);return Yi(n)}s(QCe,"ReadonlyFromMappedResult");f();function If(t,e){return nt(t.length>0?{[Xe]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Xe]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(If,"Tuple");function OCe(t,e){return t in e?Tf(t,e[t]):Yi(e)}s(OCe,"FromMappedResult");function ptt(t){return{[t]:Li(t)}}s(ptt,"MappedKeyToKnownMappedResultProperties");function mtt(t){let e={};for(let n of t)e[n]=Li(n);return e}s(mtt,"MappedKeyToUnknownMappedResultProperties");function htt(t,e){return ECe(e,t)?ptt(t):mtt(e)}s(htt,"MappedKeyToMappedResultProperties");function gtt(t,e){let n=htt(t,e);return OCe(t,n)}s(gtt,"FromMappedKey");function JB(t,e){return e.map(n=>Tf(t,n))}s(JB,"FromRest");function Att(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=Tf(t,e[r]);return n}s(Att,"FromProperties");function Tf(t,e){let n={...e};return od(e)?Oc(Tf(t,Js(e,[uc]))):$_(e)?ad(Tf(t,Js(e,[rm]))):ps(e)?OCe(t,e.properties):o0(e)?gtt(t,e.keys):sm(e)?X_(JB(t,e.parameters),Tf(t,e.returns),n):am(e)?ug(JB(t,e.parameters),Tf(t,e.returns),n):uI(e)?J_(Tf(t,e.items),n):fI(e)?rS(Tf(t,e.items),n):Ks(e)?Uc(JB(t,e.allOf),n):Wi(e)?lo(JB(t,e.anyOf),n):a0(e)?If(JB(t,e.items??[]),n):Ta(e)?co(Att(t,e.properties),n):im(e)?K_(Tf(t,e.items),n):pI(e)?sF(Tf(t,e.item),n):e}s(Tf,"FromSchemaType");function ytt(t,e){let n={};for(let r of t)n[r]=Tf(r,e);return n}s(ytt,"MappedFunctionReturnType");function UCe(t,e,n){let r=Ls(t)?sd(t):t,i=e({[Xe]:"MappedKey",keys:r}),o=ytt(r,i);return co(o,n)}s(UCe,"Mapped");f();function Ctt(t){return nt(Js(t,[uc]))}s(Ctt,"RemoveOptional");function xtt(t){return nt({...t,[uc]:"Optional"})}s(xtt,"AddOptional");function vtt(t,e){return e===!1?Ctt(t):xtt(t)}s(vtt,"OptionalWithFlag");function Oc(t,e){let n=e??!0;return ps(t)?qCe(t,n):vtt(t,n)}s(Oc,"Optional");function btt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Oc(t[r],e);return n}s(btt,"FromProperties");function Ett(t,e){return btt(t.properties,e)}s(Ett,"FromMappedResult");function qCe(t,e){let n=Ett(t,e);return Yi(n)}s(qCe,"OptionalFromMappedResult");f();function XB(t,e={}){let n=t.every(i=>Ta(i)),r=Ls(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return nt(e.unevaluatedProperties===!1||Ls(e.unevaluatedProperties)||n?{...r,[Xe]:"Intersect",type:"object",allOf:t}:{...r,[Xe]:"Intersect",allOf:t},e)}s(XB,"IntersectCreate");function Itt(t){return t.every(e=>od(e))}s(Itt,"IsIntersectOptional");function Ttt(t){return Js(t,[uc])}s(Ttt,"RemoveOptionalFromType");function WCe(t){return t.map(e=>od(e)?Ttt(e):e)}s(WCe,"RemoveOptionalFromRest");function wtt(t,e){return Itt(t)?Oc(XB(WCe(t),e)):XB(WCe(t),e)}s(wtt,"ResolveIntersect");function oF(t,e={}){if(t.length===1)return nt(t[0],e);if(t.length===0)return ni(e);if(t.some(n=>ao(n)))throw new Error("Cannot intersect transform types");return wtt(t,e)}s(oF,"IntersectEvaluated");f();function Uc(t,e){if(t.length===1)return nt(t[0],e);if(t.length===0)return ni(e);if(t.some(n=>ao(n)))throw new Error("Cannot intersect transform types");return XB(t,e)}s(Uc,"Intersect");f();function wf(...t){let[e,n]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new yr("Ref: $ref must be a string");return nt({[Xe]:"Ref",$ref:e},n)}s(wf,"Ref");function _tt(t,e){return Xo("Awaited",[Xo(t,e)])}s(_tt,"FromComputed");function Stt(t){return Xo("Awaited",[wf(t)])}s(Stt,"FromRef");function Rtt(t){return Uc(GCe(t))}s(Rtt,"FromIntersect");function ktt(t){return lo(GCe(t))}s(ktt,"FromUnion");function Btt(t){return iS(t)}s(Btt,"FromPromise");function GCe(t){return t.map(e=>iS(e))}s(GCe,"FromRest");function iS(t,e){return nt(om(t)?_tt(t.target,t.parameters):Ks(t)?Rtt(t.allOf):Wi(t)?ktt(t.anyOf):pI(t)?Btt(t.item):oa(t)?Stt(t.$ref):t,e)}s(iS,"Awaited");f();f();f();f();function HCe(t){let e=[];for(let n of t)e.push(ld(n));return e}s(HCe,"FromRest");function Dtt(t){let e=HCe(t);return wCe(e)}s(Dtt,"FromIntersect");function Ptt(t){let e=HCe(t);return TCe(e)}s(Ptt,"FromUnion");function Ntt(t){return t.map((e,n)=>n.toString())}s(Ntt,"FromTuple");function Ltt(t){return["[number]"]}s(Ltt,"FromArray");function Ftt(t){return globalThis.Object.getOwnPropertyNames(t)}s(Ftt,"FromProperties");function Mtt(t){return fZ?globalThis.Object.getOwnPropertyNames(t).map(n=>n[0]==="^"&&n[n.length-1]==="$"?n.slice(1,n.length-1):n):[]}s(Mtt,"FromPatternProperties");function ld(t){return Ks(t)?Dtt(t.allOf):Wi(t)?Ptt(t.anyOf):a0(t)?Ntt(t.items??[]):im(t)?Ltt(t.items):Ta(t)?Ftt(t.properties):mI(t)?Mtt(t.patternProperties):[]}s(ld,"KeyOfPropertyKeys");var fZ=!1;function S1(t){fZ=!0;let e=ld(t);return fZ=!1,`^(${e.map(r=>`(${r})`).join("|")})$`}s(S1,"KeyOfPattern");function Qtt(t,e){return Xo("KeyOf",[Xo(t,e)])}s(Qtt,"FromComputed");function Ott(t){return Xo("KeyOf",[wf(t)])}s(Ott,"FromRef");function Utt(t,e){let n=ld(t),r=qtt(n),i=dg(r);return nt(i,e)}s(Utt,"KeyOfFromType");function qtt(t){return t.map(e=>e==="[number]"?Ef():Li(e))}s(qtt,"KeyOfPropertyKeysToRest");function oS(t,e){return om(t)?Qtt(t.target,t.parameters):oa(t)?Ott(t.$ref):ps(t)?jCe(t,e):Utt(t,e)}s(oS,"KeyOf");function Wtt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=oS(t[r],us(e));return n}s(Wtt,"FromProperties");function Gtt(t,e){return Wtt(t.properties,e)}s(Gtt,"FromMappedResult");function jCe(t,e){let n=Gtt(t,e);return Yi(n)}s(jCe,"KeyOfFromMappedResult");f();function aF(t){let e=ld(t),n=KB(t,e);return e.map((r,i)=>[e[i],n[i]])}s(aF,"KeyOfPropertyEntries");function Htt(t){let e=[];for(let n of t)e.push(...ld(n));return ICe(e)}s(Htt,"CompositeKeys");function jtt(t){return t.filter(e=>!_x(e))}s(jtt,"FilterNever");function Vtt(t,e){let n=[];for(let r of t)n.push(...KB(r,[e]));return jtt(n)}s(Vtt,"CompositeProperty");function $tt(t,e){let n={};for(let r of e)n[r]=oF(Vtt(t,r));return n}s($tt,"CompositeProperties");function VCe(t,e){let n=Htt(t),r=$tt(t,n);return co(r,e)}s(VCe,"Composite");f();f();function lF(t){return nt({[Xe]:"Date",type:"Date"},t)}s(lF,"Date");f();function cF(t){return nt({[Xe]:"Null",type:"null"},t)}s(cF,"Null");f();function uF(t){return nt({[Xe]:"Symbol",type:"symbol"},t)}s(uF,"Symbol");f();function dF(t){return nt({[Xe]:"Undefined",type:"undefined"},t)}s(dF,"Undefined");f();function fF(t){return nt({[Xe]:"Uint8Array",type:"Uint8Array"},t)}s(fF,"Uint8Array");f();function dm(t){return nt({[Xe]:"Unknown"},t)}s(dm,"Unknown");function ztt(t){return t.map(e=>pZ(e,!1))}s(ztt,"FromArray");function Ytt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=ad(pZ(t[n],!1));return e}s(Ytt,"FromProperties");function pF(t,e){return e===!0?t:ad(t)}s(pF,"ConditionalReadonly");function pZ(t,e){return jX(t)?pF(Rx(),e):$X(t)?pF(Rx(),e):Ea(t)?ad(If(ztt(t))):x1(t)?fF():cI(t)?lF():wo(t)?pF(co(Ytt(t)),e):VX(t)?pF(ug([],dm()),e):Ia(t)?dF():zX(t)?cF():YX(t)?uF():OB(t)?nS():n0(t)?Li(t):C1(t)?Li(t):qo(t)?Li(t):co({})}s(pZ,"FromValue");function $Ce(t,e){return nt(pZ(t,!0),e)}s($Ce,"Const");f();function zCe(t,e){return sm(t)?If(t.parameters,e):ni(e)}s(zCe,"ConstructorParameters");f();function YCe(t,e){if(Ia(t))throw new Error("Enum undefined or empty");let n=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(n)].map(o=>Li(o));return lo(i,{...e,[bf]:"Enum"})}s(YCe,"Enum");f();f();f();var hZ=class extends yr{static{s(this,"ExtendsResolverError")}},rt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(rt||(rt={}));function _f(t){return t===rt.False?t:rt.True}s(_f,"IntoBooleanResult");function sS(t){throw new hZ(t)}s(sS,"Throw");function Ga(t){return De.IsNever(t)||De.IsIntersect(t)||De.IsUnion(t)||De.IsUnknown(t)||De.IsAny(t)}s(Ga,"IsStructuralRight");function Ha(t,e){return De.IsNever(e)?nxe(t,e):De.IsIntersect(e)?mF(t,e):De.IsUnion(e)?CZ(t,e):De.IsUnknown(e)?sxe(t,e):De.IsAny(e)?yZ(t,e):sS("StructuralRight")}s(Ha,"StructuralRight");function yZ(t,e){return rt.True}s(yZ,"FromAnyRight");function Ktt(t,e){return De.IsIntersect(e)?mF(t,e):De.IsUnion(e)&&e.anyOf.some(n=>De.IsAny(n)||De.IsUnknown(n))?rt.True:De.IsUnion(e)?rt.Union:De.IsUnknown(e)||De.IsAny(e)?rt.True:rt.Union}s(Ktt,"FromAny");function Jtt(t,e){return De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:De.IsNever(t)?rt.True:rt.False}s(Jtt,"FromArrayRight");function Xtt(t,e){return De.IsObject(e)&&hF(e)?rt.True:Ga(e)?Ha(t,e):De.IsArray(e)?_f(So(t.items,e.items)):rt.False}s(Xtt,"FromArray");function Ztt(t,e){return Ga(e)?Ha(t,e):De.IsAsyncIterator(e)?_f(So(t.items,e.items)):rt.False}s(Ztt,"FromAsyncIterator");function ent(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsBigInt(e)?rt.True:rt.False}s(ent,"FromBigInt");function exe(t,e){return De.IsLiteralBoolean(t)||De.IsBoolean(t)?rt.True:rt.False}s(exe,"FromBooleanRight");function tnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsBoolean(e)?rt.True:rt.False}s(tnt,"FromBoolean");function nnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsConstructor(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>_f(So(e.parameters[r],n))===rt.True)?_f(So(t.returns,e.returns)):rt.False:rt.False}s(nnt,"FromConstructor");function rnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsDate(e)?rt.True:rt.False}s(rnt,"FromDate");function int(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsFunction(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>_f(So(e.parameters[r],n))===rt.True)?_f(So(t.returns,e.returns)):rt.False:rt.False}s(int,"FromFunction");function txe(t,e){return De.IsLiteral(t)&&Qc.IsNumber(t.const)||De.IsNumber(t)||De.IsInteger(t)?rt.True:rt.False}s(txe,"FromIntegerRight");function ont(t,e){return De.IsInteger(e)||De.IsNumber(e)?rt.True:Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):rt.False}s(ont,"FromInteger");function mF(t,e){return e.allOf.every(n=>So(t,n)===rt.True)?rt.True:rt.False}s(mF,"FromIntersectRight");function snt(t,e){return t.allOf.some(n=>So(n,e)===rt.True)?rt.True:rt.False}s(snt,"FromIntersect");function ant(t,e){return Ga(e)?Ha(t,e):De.IsIterator(e)?_f(So(t.items,e.items)):rt.False}s(ant,"FromIterator");function lnt(t,e){return De.IsLiteral(e)&&e.const===t.const?rt.True:Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsString(e)?oxe(t,e):De.IsNumber(e)?rxe(t,e):De.IsInteger(e)?txe(t,e):De.IsBoolean(e)?exe(t,e):rt.False}s(lnt,"FromLiteral");function nxe(t,e){return rt.False}s(nxe,"FromNeverRight");function cnt(t,e){return rt.True}s(cnt,"FromNever");function KCe(t){let[e,n]=[t,0];for(;De.IsNot(e);)e=e.not,n+=1;return n%2===0?e:dm()}s(KCe,"UnwrapTNot");function unt(t,e){return De.IsNot(t)?So(KCe(t),e):De.IsNot(e)?So(t,KCe(e)):sS("Invalid fallthrough for Not")}s(unt,"FromNot");function dnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsNull(e)?rt.True:rt.False}s(dnt,"FromNull");function rxe(t,e){return De.IsLiteralNumber(t)||De.IsNumber(t)||De.IsInteger(t)?rt.True:rt.False}s(rxe,"FromNumberRight");function fnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsInteger(e)||De.IsNumber(e)?rt.True:rt.False}s(fnt,"FromNumber");function cd(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(cd,"IsObjectPropertyCount");function JCe(t){return hF(t)}s(JCe,"IsObjectStringLike");function XCe(t){return cd(t,0)||cd(t,1)&&"description"in t.properties&&De.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(De.IsString(t.properties.description.anyOf[0])&&De.IsUndefined(t.properties.description.anyOf[1])||De.IsString(t.properties.description.anyOf[1])&&De.IsUndefined(t.properties.description.anyOf[0]))}s(XCe,"IsObjectSymbolLike");function mZ(t){return cd(t,0)}s(mZ,"IsObjectNumberLike");function ZCe(t){return cd(t,0)}s(ZCe,"IsObjectBooleanLike");function pnt(t){return cd(t,0)}s(pnt,"IsObjectBigIntLike");function mnt(t){return cd(t,0)}s(mnt,"IsObjectDateLike");function hnt(t){return hF(t)}s(hnt,"IsObjectUint8ArrayLike");function gnt(t){let e=Ef();return cd(t,0)||cd(t,1)&&"length"in t.properties&&_f(So(t.properties.length,e))===rt.True}s(gnt,"IsObjectFunctionLike");function Ant(t){return cd(t,0)}s(Ant,"IsObjectConstructorLike");function hF(t){let e=Ef();return cd(t,0)||cd(t,1)&&"length"in t.properties&&_f(So(t.properties.length,e))===rt.True}s(hF,"IsObjectArrayLike");function ynt(t){let e=ug([Rx()],Rx());return cd(t,0)||cd(t,1)&&"then"in t.properties&&_f(So(t.properties.then,e))===rt.True}s(ynt,"IsObjectPromiseLike");function ixe(t,e){return So(t,e)===rt.False||De.IsOptional(t)&&!De.IsOptional(e)?rt.False:rt.True}s(ixe,"Property");function qc(t,e){return De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:De.IsNever(t)||De.IsLiteralString(t)&&JCe(e)||De.IsLiteralNumber(t)&&mZ(e)||De.IsLiteralBoolean(t)&&ZCe(e)||De.IsSymbol(t)&&XCe(e)||De.IsBigInt(t)&&pnt(e)||De.IsString(t)&&JCe(e)||De.IsSymbol(t)&&XCe(e)||De.IsNumber(t)&&mZ(e)||De.IsInteger(t)&&mZ(e)||De.IsBoolean(t)&&ZCe(e)||De.IsUint8Array(t)&&hnt(e)||De.IsDate(t)&&mnt(e)||De.IsConstructor(t)&&Ant(e)||De.IsFunction(t)&&gnt(e)?rt.True:De.IsRecord(t)&&De.IsString(gZ(t))?e[bf]==="Record"?rt.True:rt.False:De.IsRecord(t)&&De.IsNumber(gZ(t))?cd(e,0)?rt.True:rt.False:rt.False}s(qc,"FromObjectRight");function Cnt(t,e){return Ga(e)?Ha(t,e):De.IsRecord(e)?Sf(t,e):De.IsObject(e)?(()=>{for(let n of Object.getOwnPropertyNames(e.properties)){if(!(n in t.properties)&&!De.IsOptional(e.properties[n]))return rt.False;if(De.IsOptional(e.properties[n]))return rt.True;if(ixe(t.properties[n],e.properties[n])===rt.False)return rt.False}return rt.True})():rt.False}s(Cnt,"FromObject");function xnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)&&ynt(e)?rt.True:De.IsPromise(e)?_f(So(t.item,e.item)):rt.False}s(xnt,"FromPromise");function gZ(t){return lg in t.patternProperties?Ef():cg in t.patternProperties?Eu():sS("Unknown record key pattern")}s(gZ,"RecordKey");function AZ(t){return lg in t.patternProperties?t.patternProperties[lg]:cg in t.patternProperties?t.patternProperties[cg]:sS("Unable to get record value schema")}s(AZ,"RecordValue");function Sf(t,e){let[n,r]=[gZ(e),AZ(e)];return De.IsLiteralString(t)&&De.IsNumber(n)&&_f(So(t,r))===rt.True?rt.True:De.IsUint8Array(t)&&De.IsNumber(n)||De.IsString(t)&&De.IsNumber(n)||De.IsArray(t)&&De.IsNumber(n)?So(t,r):De.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(ixe(r,t.properties[i])===rt.False)return rt.False;return rt.True})():rt.False}s(Sf,"FromRecordRight");function vnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?So(AZ(t),AZ(e)):rt.False}s(vnt,"FromRecord");function bnt(t,e){let n=De.IsRegExp(t)?Eu():t,r=De.IsRegExp(e)?Eu():e;return So(n,r)}s(bnt,"FromRegExp");function oxe(t,e){return De.IsLiteral(t)&&Qc.IsString(t.const)||De.IsString(t)?rt.True:rt.False}s(oxe,"FromStringRight");function Ent(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsString(e)?rt.True:rt.False}s(Ent,"FromString");function Int(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsSymbol(e)?rt.True:rt.False}s(Int,"FromSymbol");function Tnt(t,e){return De.IsTemplateLiteral(t)?So(gI(t),e):De.IsTemplateLiteral(e)?So(t,gI(e)):sS("Invalid fallthrough for TemplateLiteral")}s(Tnt,"FromTemplateLiteral");function wnt(t,e){return De.IsArray(e)&&t.items!==void 0&&t.items.every(n=>So(n,e.items)===rt.True)}s(wnt,"IsArrayOfTuple");function _nt(t,e){return De.IsNever(t)?rt.True:De.IsUnknown(t)?rt.False:De.IsAny(t)?rt.Union:rt.False}s(_nt,"FromTupleRight");function Snt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)&&hF(e)||De.IsArray(e)&&wnt(t,e)?rt.True:De.IsTuple(e)?Qc.IsUndefined(t.items)&&!Qc.IsUndefined(e.items)||!Qc.IsUndefined(t.items)&&Qc.IsUndefined(e.items)?rt.False:Qc.IsUndefined(t.items)&&!Qc.IsUndefined(e.items)||t.items.every((n,r)=>So(n,e.items[r])===rt.True)?rt.True:rt.False:rt.False}s(Snt,"FromTuple");function Rnt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsUint8Array(e)?rt.True:rt.False}s(Rnt,"FromUint8Array");function knt(t,e){return Ga(e)?Ha(t,e):De.IsObject(e)?qc(t,e):De.IsRecord(e)?Sf(t,e):De.IsVoid(e)?Pnt(t,e):De.IsUndefined(e)?rt.True:rt.False}s(knt,"FromUndefined");function CZ(t,e){return e.anyOf.some(n=>So(t,n)===rt.True)?rt.True:rt.False}s(CZ,"FromUnionRight");function Bnt(t,e){return t.anyOf.every(n=>So(n,e)===rt.True)?rt.True:rt.False}s(Bnt,"FromUnion");function sxe(t,e){return rt.True}s(sxe,"FromUnknownRight");function Dnt(t,e){return De.IsNever(e)?nxe(t,e):De.IsIntersect(e)?mF(t,e):De.IsUnion(e)?CZ(t,e):De.IsAny(e)?yZ(t,e):De.IsString(e)?oxe(t,e):De.IsNumber(e)?rxe(t,e):De.IsInteger(e)?txe(t,e):De.IsBoolean(e)?exe(t,e):De.IsArray(e)?Jtt(t,e):De.IsTuple(e)?_nt(t,e):De.IsObject(e)?qc(t,e):De.IsUnknown(e)?rt.True:rt.False}s(Dnt,"FromUnknown");function Pnt(t,e){return De.IsUndefined(t)||De.IsUndefined(t)?rt.True:rt.False}s(Pnt,"FromVoidRight");function Nnt(t,e){return De.IsIntersect(e)?mF(t,e):De.IsUnion(e)?CZ(t,e):De.IsUnknown(e)?sxe(t,e):De.IsAny(e)?yZ(t,e):De.IsObject(e)?qc(t,e):De.IsVoid(e)?rt.True:rt.False}s(Nnt,"FromVoid");function So(t,e){return De.IsTemplateLiteral(t)||De.IsTemplateLiteral(e)?Tnt(t,e):De.IsRegExp(t)||De.IsRegExp(e)?bnt(t,e):De.IsNot(t)||De.IsNot(e)?unt(t,e):De.IsAny(t)?Ktt(t,e):De.IsArray(t)?Xtt(t,e):De.IsBigInt(t)?ent(t,e):De.IsBoolean(t)?tnt(t,e):De.IsAsyncIterator(t)?Ztt(t,e):De.IsConstructor(t)?nnt(t,e):De.IsDate(t)?rnt(t,e):De.IsFunction(t)?int(t,e):De.IsInteger(t)?ont(t,e):De.IsIntersect(t)?snt(t,e):De.IsIterator(t)?ant(t,e):De.IsLiteral(t)?lnt(t,e):De.IsNever(t)?cnt(t,e):De.IsNull(t)?dnt(t,e):De.IsNumber(t)?fnt(t,e):De.IsObject(t)?Cnt(t,e):De.IsRecord(t)?vnt(t,e):De.IsString(t)?Ent(t,e):De.IsSymbol(t)?Int(t,e):De.IsTuple(t)?Snt(t,e):De.IsPromise(t)?xnt(t,e):De.IsUint8Array(t)?Rnt(t,e):De.IsUndefined(t)?knt(t,e):De.IsUnion(t)?Bnt(t,e):De.IsUnknown(t)?Dnt(t,e):De.IsVoid(t)?Nnt(t,e):sS(`Unknown left type operand '${t[Xe]}'`)}s(So,"Visit");function Bx(t,e){return So(t,e)}s(Bx,"ExtendsCheck");f();f();f();function Lnt(t,e,n,r,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=aS(t[a],e,n,r,us(i));return o}s(Lnt,"FromProperties");function Fnt(t,e,n,r,i){return Lnt(t.properties,e,n,r,i)}s(Fnt,"FromMappedResult");function axe(t,e,n,r,i){let o=Fnt(t,e,n,r,i);return Yi(o)}s(axe,"ExtendsFromMappedResult");function Mnt(t,e,n,r){let i=Bx(t,e);return i===rt.Union?lo([n,r]):i===rt.True?n:r}s(Mnt,"ExtendsResolve");function aS(t,e,n,r,i){return ps(t)?axe(t,e,n,r,i):o0(t)?nt(lxe(t,e,n,r,i)):nt(Mnt(t,e,n,r),i)}s(aS,"Extends");function Qnt(t,e,n,r,i){return{[t]:aS(Li(t),e,n,r,us(i))}}s(Qnt,"FromPropertyKey");function Ont(t,e,n,r,i){return t.reduce((o,a)=>({...o,...Qnt(a,e,n,r,i)}),{})}s(Ont,"FromPropertyKeys");function Unt(t,e,n,r,i){return Ont(t.keys,e,n,r,i)}s(Unt,"FromMappedKey");function lxe(t,e,n,r,i){let o=Unt(t,e,n,r,i);return Yi(o)}s(lxe,"ExtendsFromMappedKey");f();function qnt(t){return t.allOf.every(e=>R1(e))}s(qnt,"Intersect");function Wnt(t){return t.anyOf.some(e=>R1(e))}s(Wnt,"Union");function Gnt(t){return!R1(t.not)}s(Gnt,"Not");function R1(t){return t[Xe]==="Intersect"?qnt(t):t[Xe]==="Union"?Wnt(t):t[Xe]==="Not"?Gnt(t):t[Xe]==="Undefined"}s(R1,"ExtendsUndefinedCheck");f();function cxe(t,e){return lS(gI(t),e)}s(cxe,"ExcludeFromTemplateLiteral");function Hnt(t,e){let n=t.filter(r=>Bx(r,e)===rt.False);return n.length===1?n[0]:lo(n)}s(Hnt,"ExcludeRest");function lS(t,e,n={}){return s0(t)?nt(cxe(t,e),n):ps(t)?nt(uxe(t,e),n):nt(Wi(t)?Hnt(t.anyOf,e):Bx(t,e)!==rt.False?ni():t,n)}s(lS,"Exclude");function jnt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=lS(t[r],e);return n}s(jnt,"FromProperties");function Vnt(t,e){return jnt(t.properties,e)}s(Vnt,"FromMappedResult");function uxe(t,e){let n=Vnt(t,e);return Yi(n)}s(uxe,"ExcludeFromMappedResult");f();f();f();function dxe(t,e){return cS(gI(t),e)}s(dxe,"ExtractFromTemplateLiteral");function $nt(t,e){let n=t.filter(r=>Bx(r,e)!==rt.False);return n.length===1?n[0]:lo(n)}s($nt,"ExtractRest");function cS(t,e,n){return s0(t)?nt(dxe(t,e),n):ps(t)?nt(fxe(t,e),n):nt(Wi(t)?$nt(t.anyOf,e):Bx(t,e)!==rt.False?t:ni(),n)}s(cS,"Extract");function znt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=cS(t[r],e);return n}s(znt,"FromProperties");function Ynt(t,e){return znt(t.properties,e)}s(Ynt,"FromMappedResult");function fxe(t,e){let n=Ynt(t,e);return Yi(n)}s(fxe,"ExtractFromMappedResult");f();function pxe(t,e){return sm(t)?nt(t.returns,e):ni(e)}s(pxe,"InstanceType");f();f();function gF(t){return ad(Oc(t))}s(gF,"ReadonlyOptional");f();function AI(t,e,n){return nt({[Xe]:"Record",type:"object",patternProperties:{[t]:e}},n)}s(AI,"RecordCreateFromPattern");function xZ(t,e,n){let r={};for(let i of t)r[i]=e;return co(r,{...n,[bf]:"Record"})}s(xZ,"RecordCreateFromKeys");function Knt(t,e,n){return nF(t)?xZ(sd(t),e,n):AI(t.pattern,e,n)}s(Knt,"FromTemplateLiteralKey");function Jnt(t,e,n){return xZ(sd(lo(t)),e,n)}s(Jnt,"FromUnionKey");function Xnt(t,e,n){return xZ([t.toString()],e,n)}s(Xnt,"FromLiteralKey");function Znt(t,e,n){return AI(t.source,e,n)}s(Znt,"FromRegExpKey");function ert(t,e,n){let r=Ia(t.pattern)?cg:t.pattern;return AI(r,e,n)}s(ert,"FromStringKey");function trt(t,e,n){return AI(cg,e,n)}s(trt,"FromAnyKey");function nrt(t,e,n){return AI(bCe,e,n)}s(nrt,"FromNeverKey");function rrt(t,e,n){return co({true:e,false:e},n)}s(rrt,"FromBooleanKey");function irt(t,e,n){return AI(lg,e,n)}s(irt,"FromIntegerKey");function ort(t,e,n){return AI(lg,e,n)}s(ort,"FromNumberKey");function AF(t,e,n={}){return Wi(t)?Jnt(t.anyOf,e,n):s0(t)?Knt(t,e,n):i0(t)?Xnt(t.const,e,n):E1(t)?rrt(t,e,n):lm(t)?irt(t,e,n):cm(t)?ort(t,e,n):ZX(t)?Znt(t,e,n):I1(t)?ert(t,e,n):JX(t)?trt(t,e,n):_x(t)?nrt(t,e,n):ni(n)}s(AF,"Record");function yF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(yF,"RecordPattern");function mxe(t){let e=yF(t);return e===cg?Eu():e===lg?Ef():Eu({pattern:e})}s(mxe,"RecordKey");function CF(t){return t.patternProperties[yF(t)]}s(CF,"RecordValue");function srt(t,e){return e.parameters=ZB(t,e.parameters),e.returns=fm(t,e.returns),e}s(srt,"FromConstructor");function art(t,e){return e.parameters=ZB(t,e.parameters),e.returns=fm(t,e.returns),e}s(art,"FromFunction");function lrt(t,e){return e.allOf=ZB(t,e.allOf),e}s(lrt,"FromIntersect");function crt(t,e){return e.anyOf=ZB(t,e.anyOf),e}s(crt,"FromUnion");function urt(t,e){return Ia(e.items)||(e.items=ZB(t,e.items)),e}s(urt,"FromTuple");function drt(t,e){return e.items=fm(t,e.items),e}s(drt,"FromArray");function frt(t,e){return e.items=fm(t,e.items),e}s(frt,"FromAsyncIterator");function prt(t,e){return e.items=fm(t,e.items),e}s(prt,"FromIterator");function mrt(t,e){return e.item=fm(t,e.item),e}s(mrt,"FromPromise");function hrt(t,e){let n=Crt(t,e.properties);return{...e,...co(n)}}s(hrt,"FromObject");function grt(t,e){let n=fm(t,mxe(e)),r=fm(t,CF(e)),i=AF(n,r);return{...e,...i}}s(grt,"FromRecord");function Art(t,e){return e.index in t?t[e.index]:dm()}s(Art,"FromArgument");function yrt(t,e){let n=$_(e),r=od(e),i=fm(t,e);return n&&r?gF(i):n&&!r?ad(i):!n&&r?Oc(i):i}s(yrt,"FromProperty");function Crt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:yrt(t,e[r])}),{})}s(Crt,"FromProperties");function ZB(t,e){return e.map(n=>fm(t,n))}s(ZB,"FromTypes");function fm(t,e){return sm(e)?srt(t,e):am(e)?art(t,e):Ks(e)?lrt(t,e):Wi(e)?crt(t,e):a0(e)?urt(t,e):im(e)?drt(t,e):uI(e)?frt(t,e):fI(e)?prt(t,e):pI(e)?mrt(t,e):Ta(e)?hrt(t,e):mI(e)?grt(t,e):XX(e)?Art(t,e):e}s(fm,"FromType");function hxe(t,e){return fm(e,j_(t))}s(hxe,"Instantiate");f();function gxe(t){return nt({[Xe]:"Integer",type:"integer"},t)}s(gxe,"Integer");f();f();f();function xrt(t,e,n){return{[t]:pm(Li(t),e,us(n))}}s(xrt,"MappedIntrinsicPropertyKey");function vrt(t,e,n){return t.reduce((i,o)=>({...i,...xrt(o,e,n)}),{})}s(vrt,"MappedIntrinsicPropertyKeys");function brt(t,e,n){return vrt(t.keys,e,n)}s(brt,"MappedIntrinsicProperties");function Axe(t,e,n){let r=brt(t,e,n);return Yi(r)}s(Axe,"IntrinsicFromMappedKey");function Ert(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),n].join("")}s(Ert,"ApplyUncapitalize");function Irt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),n].join("")}s(Irt,"ApplyCapitalize");function Trt(t){return t.toUpperCase()}s(Trt,"ApplyUppercase");function wrt(t){return t.toLowerCase()}s(wrt,"ApplyLowercase");function _rt(t,e,n){let r=eS(t.pattern);if(!hI(r))return{...t,pattern:yxe(t.pattern,e)};let a=[...YB(r)].map(u=>Li(u)),l=Cxe(a,e),c=lo(l);return iF([c],n)}s(_rt,"FromTemplateLiteral");function yxe(t,e){return typeof t=="string"?e==="Uncapitalize"?Ert(t):e==="Capitalize"?Irt(t):e==="Uppercase"?Trt(t):e==="Lowercase"?wrt(t):t:t.toString()}s(yxe,"FromLiteralValue");function Cxe(t,e){return t.map(n=>pm(n,e))}s(Cxe,"FromRest");function pm(t,e,n={}){return o0(t)?Axe(t,e,n):s0(t)?_rt(t,e,n):Wi(t)?lo(Cxe(t.anyOf,e),n):i0(t)?Li(yxe(t.const,e),n):nt(t,n)}s(pm,"Intrinsic");function xxe(t,e={}){return pm(t,"Capitalize",e)}s(xxe,"Capitalize");f();function vxe(t,e={}){return pm(t,"Lowercase",e)}s(vxe,"Lowercase");f();function bxe(t,e={}){return pm(t,"Uncapitalize",e)}s(bxe,"Uncapitalize");f();function Exe(t,e={}){return pm(t,"Uppercase",e)}s(Exe,"Uppercase");f();f();f();f();f();function Srt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Dx(t[i],e,us(n));return r}s(Srt,"FromProperties");function Rrt(t,e,n){return Srt(t.properties,e,n)}s(Rrt,"FromMappedResult");function Ixe(t,e,n){let r=Rrt(t,e,n);return Yi(r)}s(Ixe,"OmitFromMappedResult");function krt(t,e){return t.map(n=>vZ(n,e))}s(krt,"FromIntersect");function Brt(t,e){return t.map(n=>vZ(n,e))}s(Brt,"FromUnion");function Drt(t,e){let{[e]:n,...r}=t;return r}s(Drt,"FromProperty");function Prt(t,e){return e.reduce((n,r)=>Drt(n,r),t)}s(Prt,"FromProperties");function Nrt(t,e){let n=Js(t,[Ns,"$id","required","properties"]),r=Prt(t.properties,e);return co(r,n)}s(Nrt,"FromObject");function Lrt(t){let e=t.reduce((n,r)=>ZL(r)?[...n,Li(r)]:n,[]);return lo(e)}s(Lrt,"UnionFromPropertyKeys");function vZ(t,e){return Ks(t)?Uc(krt(t.allOf,e)):Wi(t)?lo(Brt(t.anyOf,e)):Ta(t)?Nrt(t,e):co({})}s(vZ,"OmitResolve");function Dx(t,e,n){let r=Ea(e)?Lrt(e):e,i=Ls(e)?sd(e):e,o=oa(t),a=oa(e);return ps(t)?Ixe(t,i,n):o0(e)?Txe(t,e,n):o&&a?Xo("Omit",[t,r],n):!o&&a?Xo("Omit",[t,r],n):o&&!a?Xo("Omit",[t,r],n):nt({...vZ(t,i),...n})}s(Dx,"Omit");function Frt(t,e,n){return{[e]:Dx(t,[e],us(n))}}s(Frt,"FromPropertyKey");function Mrt(t,e,n){return e.reduce((r,i)=>({...r,...Frt(t,i,n)}),{})}s(Mrt,"FromPropertyKeys");function Qrt(t,e,n){return Mrt(t,e.keys,n)}s(Qrt,"FromMappedKey");function Txe(t,e,n){let r=Qrt(t,e,n);return Yi(r)}s(Txe,"OmitFromMappedKey");f();f();f();function Ort(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Px(t[i],e,us(n));return r}s(Ort,"FromProperties");function Urt(t,e,n){return Ort(t.properties,e,n)}s(Urt,"FromMappedResult");function wxe(t,e,n){let r=Urt(t,e,n);return Yi(r)}s(wxe,"PickFromMappedResult");function qrt(t,e){return t.map(n=>bZ(n,e))}s(qrt,"FromIntersect");function Wrt(t,e){return t.map(n=>bZ(n,e))}s(Wrt,"FromUnion");function Grt(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}s(Grt,"FromProperties");function Hrt(t,e){let n=Js(t,[Ns,"$id","required","properties"]),r=Grt(t.properties,e);return co(r,n)}s(Hrt,"FromObject");function jrt(t){let e=t.reduce((n,r)=>ZL(r)?[...n,Li(r)]:n,[]);return lo(e)}s(jrt,"UnionFromPropertyKeys");function bZ(t,e){return Ks(t)?Uc(qrt(t.allOf,e)):Wi(t)?lo(Wrt(t.anyOf,e)):Ta(t)?Hrt(t,e):co({})}s(bZ,"PickResolve");function Px(t,e,n){let r=Ea(e)?jrt(e):e,i=Ls(e)?sd(e):e,o=oa(t),a=oa(e);return ps(t)?wxe(t,i,n):o0(e)?_xe(t,e,n):o&&a?Xo("Pick",[t,r],n):!o&&a?Xo("Pick",[t,r],n):o&&!a?Xo("Pick",[t,r],n):nt({...bZ(t,i),...n})}s(Px,"Pick");function Vrt(t,e,n){return{[e]:Px(t,[e],us(n))}}s(Vrt,"FromPropertyKey");function $rt(t,e,n){return e.reduce((r,i)=>({...r,...Vrt(t,i,n)}),{})}s($rt,"FromPropertyKeys");function zrt(t,e,n){return $rt(t,e.keys,n)}s(zrt,"FromMappedKey");function _xe(t,e,n){let r=zrt(t,e,n);return Yi(r)}s(_xe,"PickFromMappedKey");f();f();function Yrt(t,e){return Xo("Partial",[Xo(t,e)])}s(Yrt,"FromComputed");function Krt(t){return Xo("Partial",[wf(t)])}s(Krt,"FromRef");function Jrt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=Oc(t[n]);return e}s(Jrt,"FromProperties");function Xrt(t){let e=Js(t,[Ns,"$id","required","properties"]),n=Jrt(t.properties);return co(n,e)}s(Xrt,"FromObject");function Sxe(t){return t.map(e=>Rxe(e))}s(Sxe,"FromRest");function Rxe(t){return om(t)?Yrt(t.target,t.parameters):oa(t)?Krt(t.$ref):Ks(t)?Uc(Sxe(t.allOf)):Wi(t)?lo(Sxe(t.anyOf)):Ta(t)?Xrt(t):dI(t)||E1(t)||lm(t)||i0(t)||WB(t)||cm(t)||I1(t)||GB(t)||T1(t)?t:co({})}s(Rxe,"PartialResolve");function uS(t,e){return ps(t)?kxe(t,e):nt({...Rxe(t),...e})}s(uS,"Partial");function Zrt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=uS(t[r],us(e));return n}s(Zrt,"FromProperties");function eit(t,e){return Zrt(t.properties,e)}s(eit,"FromMappedResult");function kxe(t,e){let n=eit(t,e);return Yi(n)}s(kxe,"PartialFromMappedResult");f();f();function tit(t,e){return Xo("Required",[Xo(t,e)])}s(tit,"FromComputed");function nit(t){return Xo("Required",[wf(t)])}s(nit,"FromRef");function rit(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=Js(t[n],[uc]);return e}s(rit,"FromProperties");function iit(t){let e=Js(t,[Ns,"$id","required","properties"]),n=rit(t.properties);return co(n,e)}s(iit,"FromObject");function Bxe(t){return t.map(e=>Dxe(e))}s(Bxe,"FromRest");function Dxe(t){return om(t)?tit(t.target,t.parameters):oa(t)?nit(t.$ref):Ks(t)?Uc(Bxe(t.allOf)):Wi(t)?lo(Bxe(t.anyOf)):Ta(t)?iit(t):dI(t)||E1(t)||lm(t)||i0(t)||WB(t)||cm(t)||I1(t)||GB(t)||T1(t)?t:co({})}s(Dxe,"RequiredResolve");function dS(t,e){return ps(t)?Pxe(t,e):nt({...Dxe(t),...e})}s(dS,"Required");function oit(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=dS(t[r],e);return n}s(oit,"FromProperties");function sit(t,e){return oit(t.properties,e)}s(sit,"FromMappedResult");function Pxe(t,e){let n=sit(t,e);return Yi(n)}s(Pxe,"RequiredFromMappedResult");function ait(t,e){return e.map(n=>oa(n)?EZ(t,n.$ref):l0(t,n))}s(ait,"DereferenceParameters");function EZ(t,e){return e in t?oa(t[e])?EZ(t,t[e].$ref):l0(t,t[e]):ni()}s(EZ,"Dereference");function lit(t){return iS(t[0])}s(lit,"FromAwaited");function cit(t){return kx(t[0],t[1])}s(cit,"FromIndex");function uit(t){return oS(t[0])}s(uit,"FromKeyOf");function dit(t){return uS(t[0])}s(dit,"FromPartial");function fit(t){return Dx(t[0],t[1])}s(fit,"FromOmit");function pit(t){return Px(t[0],t[1])}s(pit,"FromPick");function mit(t){return dS(t[0])}s(mit,"FromRequired");function hit(t,e,n){let r=ait(t,n);return e==="Awaited"?lit(r):e==="Index"?cit(r):e==="KeyOf"?uit(r):e==="Partial"?dit(r):e==="Omit"?fit(r):e==="Pick"?pit(r):e==="Required"?mit(r):ni()}s(hit,"FromComputed");function git(t,e){return K_(l0(t,e))}s(git,"FromArray");function Ait(t,e){return J_(l0(t,e))}s(Ait,"FromAsyncIterator");function yit(t,e,n){return X_(e8(t,e),l0(t,n))}s(yit,"FromConstructor");function Cit(t,e,n){return ug(e8(t,e),l0(t,n))}s(Cit,"FromFunction");function xit(t,e){return Uc(e8(t,e))}s(xit,"FromIntersect");function vit(t,e){return rS(l0(t,e))}s(vit,"FromIterator");function bit(t,e){return co(globalThis.Object.keys(e).reduce((n,r)=>({...n,[r]:l0(t,e[r])}),{}))}s(bit,"FromObject");function Eit(t,e){let[n,r]=[l0(t,CF(e)),yF(e)],i=j_(e);return i.patternProperties[r]=n,i}s(Eit,"FromRecord");function Iit(t,e){return oa(e)?{...EZ(t,e.$ref),[Ns]:e[Ns]}:e}s(Iit,"FromTransform");function Tit(t,e){return If(e8(t,e))}s(Tit,"FromTuple");function wit(t,e){return lo(e8(t,e))}s(wit,"FromUnion");function e8(t,e){return e.map(n=>l0(t,n))}s(e8,"FromTypes");function l0(t,e){return od(e)?nt(l0(t,Js(e,[uc])),e):$_(e)?nt(l0(t,Js(e,[rm])),e):ao(e)?nt(Iit(t,e),e):im(e)?nt(git(t,e.items),e):uI(e)?nt(Ait(t,e.items),e):om(e)?nt(hit(t,e.target,e.parameters)):sm(e)?nt(yit(t,e.parameters,e.returns),e):am(e)?nt(Cit(t,e.parameters,e.returns),e):Ks(e)?nt(xit(t,e.allOf),e):fI(e)?nt(vit(t,e.items),e):Ta(e)?nt(bit(t,e.properties),e):mI(e)?nt(Eit(t,e)):a0(e)?nt(Tit(t,e.items||[]),e):Wi(e)?nt(wit(t,e.anyOf),e):e}s(l0,"FromType");function _it(t,e){return e in t?l0(t,t[e]):ni()}s(_it,"ComputeType");function Nxe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,n)=>({...e,[n]:_it(t,n)}),{})}s(Nxe,"ComputeModuleProperties");var IZ=class{static{s(this,"TModule")}constructor(e){let n=Nxe(e),r=this.WithIdentifiers(n);this.$defs=r}Import(e,n){let r={...this.$defs,[e]:nt(this.$defs[e],n)};return nt({[Xe]:"Import",$defs:r,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:{...e[r],$id:r}}),{})}};function Lxe(t){return new IZ(t)}s(Lxe,"Module");f();function Fxe(t,e){return nt({[Xe]:"Not",not:t},e)}s(Fxe,"Not");f();function Mxe(t,e){return am(t)?If(t.parameters,e):ni()}s(Mxe,"Parameters");f();var Sit=0;function Qxe(t,e={}){Ia(e.$id)&&(e.$id=`T${Sit++}`);let n=j_(t({[Xe]:"This",$ref:`${e.$id}`}));return n.$id=e.$id,nt({[bf]:"Recursive",...n},e)}s(Qxe,"Recursive");f();function Oxe(t,e){let n=qo(t)?new globalThis.RegExp(t):t;return nt({[Xe]:"RegExp",type:"RegExp",source:n.source,flags:n.flags},e)}s(Oxe,"RegExp");f();function Rit(t){return Ks(t)?t.allOf:Wi(t)?t.anyOf:a0(t)?t.items??[]:[]}s(Rit,"RestResolve");function Uxe(t){return Rit(t)}s(Uxe,"Rest");f();function qxe(t,e){return am(t)?nt(t.returns,e):ni(e)}s(qxe,"ReturnType");f();var TZ=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new wZ(this.schema,e)}},wZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,n){this.schema=e,this.decode=n}EncodeTransform(e,n){let o={Encode:s(a=>n[Ns].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(n[Ns].Decode(a)),"Decode")};return{...n,[Ns]:o}}EncodeSchema(e,n){let r={Decode:this.decode,Encode:e};return{...n,[Ns]:r}}Encode(e){return ao(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function Wxe(t){return new TZ(t)}s(Wxe,"Transform");f();function Gxe(t={}){return nt({[Xe]:t[Xe]??"Unsafe"},t)}s(Gxe,"Unsafe");f();function Hxe(t){return nt({[Xe]:"Void",type:"void"},t)}s(Hxe,"Void");f();var _Z={};g1(_Z,{Any:()=>Rx,Argument:()=>_Ce,Array:()=>K_,AsyncIterator:()=>J_,Awaited:()=>iS,BigInt:()=>nS,Boolean:()=>rF,Capitalize:()=>xxe,Composite:()=>VCe,Const:()=>$Ce,Constructor:()=>X_,ConstructorParameters:()=>zCe,Date:()=>lF,Enum:()=>YCe,Exclude:()=>lS,Extends:()=>aS,Extract:()=>cS,Function:()=>ug,Index:()=>kx,InstanceType:()=>pxe,Instantiate:()=>hxe,Integer:()=>gxe,Intersect:()=>Uc,Iterator:()=>rS,KeyOf:()=>oS,Literal:()=>Li,Lowercase:()=>vxe,Mapped:()=>UCe,Module:()=>Lxe,Never:()=>ni,Not:()=>Fxe,Null:()=>cF,Number:()=>Ef,Object:()=>co,Omit:()=>Dx,Optional:()=>Oc,Parameters:()=>Mxe,Partial:()=>uS,Pick:()=>Px,Promise:()=>sF,Readonly:()=>ad,ReadonlyOptional:()=>gF,Record:()=>AF,Recursive:()=>Qxe,Ref:()=>wf,RegExp:()=>Oxe,Required:()=>dS,Rest:()=>Uxe,ReturnType:()=>qxe,String:()=>Eu,Symbol:()=>uF,TemplateLiteral:()=>iF,Transform:()=>Wxe,Tuple:()=>If,Uint8Array:()=>fF,Uncapitalize:()=>bxe,Undefined:()=>dF,Union:()=>lo,Unknown:()=>dm,Unsafe:()=>Gxe,Uppercase:()=>Exe,Void:()=>Hxe});f();var I=_Z;f();f();function kit(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Xe]}'`;default:return"Unknown error type"}}s(kit,"DefaultErrorFunction");var Bit=kit;function jxe(){return Bit}s(jxe,"GetErrorFunction");f();var SZ=class extends yr{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function Dit(t,e){let n=e.find(r=>r.$id===t.$ref);if(n===void 0)throw new SZ(t);return Ki(n,e)}s(Dit,"Resolve");function Bl(t,e){return!qi(t.$id)||e.some(n=>n.$id===t.$id)||e.push(t),e}s(Bl,"Pushref");function Ki(t,e){return t[Xe]==="This"||t[Xe]==="Ref"?Dit(t,e):t}s(Ki,"Deref");f();var RZ=class extends yr{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},c0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(c0||(c0={}));var fS=BigInt("14695981039346656037"),[Pit,Nit]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Lit=Array.from({length:256}).map((t,e)=>BigInt(e)),Vxe=new Float64Array(1),$xe=new DataView(Vxe.buffer),zxe=new Uint8Array(Vxe.buffer);function*Fit(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let n=0;n<e;n++)yield t>>8*(e-1-n)&255}s(Fit,"NumberToBytes");function Mit(t){Wc(c0.Array);for(let e of t)pS(e)}s(Mit,"ArrayType");function Qit(t){Wc(c0.Boolean),Wc(t?1:0)}s(Qit,"BooleanType");function Oit(t){Wc(c0.BigInt),$xe.setBigInt64(0,t);for(let e of zxe)Wc(e)}s(Oit,"BigIntType");function Uit(t){Wc(c0.Date),pS(t.getTime())}s(Uit,"DateType");function qit(t){Wc(c0.Null)}s(qit,"NullType");function Wit(t){Wc(c0.Number),$xe.setFloat64(0,t);for(let e of zxe)Wc(e)}s(Wit,"NumberType");function Git(t){Wc(c0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())pS(e),pS(t[e])}s(Git,"ObjectType");function Hit(t){Wc(c0.String);for(let e=0;e<t.length;e++)for(let n of Fit(t.charCodeAt(e)))Wc(n)}s(Hit,"StringType");function jit(t){Wc(c0.Symbol),pS(t.description)}s(jit,"SymbolType");function Vit(t){Wc(c0.Uint8Array);for(let e=0;e<t.length;e++)Wc(t[e])}s(Vit,"Uint8ArrayType");function $it(t){return Wc(c0.Undefined)}s($it,"UndefinedType");function pS(t){if(Ar(t))return Mit(t);if(ag(t))return Qit(t);if(cc(t))return Oit(t);if(vu(t))return Uit(t);if(v1(t))return qit(t);if(Wn(t))return Wit(t);if(ci(t))return Git(t);if(qi(t))return Hit(t);if(b1(t))return jit(t);if(V_(t))return Vit(t);if(ds(t))return $it(t);throw new RZ(t)}s(pS,"Visit");function Wc(t){fS=fS^Lit[t],fS=fS*Pit%Nit}s(Wc,"FNV1A64");function Nx(t){return fS=BigInt("14695981039346656037"),pS(t),fS}s(Nx,"Hash");f();var kZ=class extends yr{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function zit(t){return t[Xe]==="Any"||t[Xe]==="Unknown"}s(zit,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function Yit(t,e,n){return!0}s(Yit,"FromAny");function Kit(t,e,n){return!0}s(Kit,"FromArgument");function Jit(t,e,n){if(!Ar(n)||Ei(t.minItems)&&!(n.length>=t.minItems)||Ei(t.maxItems)&&!(n.length<=t.maxItems)||!n.every(o=>Dl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of n){let l=Nx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||Wn(t.minContains)||Wn(t.maxContains)))return!0;let r=Ei(t.contains)?t.contains:ni(),i=n.reduce((o,a)=>Dl(r,e,a)?o+1:o,0);return!(i===0||Wn(t.minContains)&&i<t.minContains||Wn(t.maxContains)&&i>t.maxContains)}s(Jit,"FromArray");function Xit(t,e,n){return YL(n)}s(Xit,"FromAsyncIterator");function Zit(t,e,n){return!(!cc(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==BigInt(0))}s(Zit,"FromBigInt");function eot(t,e,n){return ag(n)}s(eot,"FromBoolean");function tot(t,e,n){return Dl(t.returns,e,n.prototype)}s(tot,"FromConstructor");function not(t,e,n){return!(!vu(n)||Ei(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0)}s(not,"FromDate");function rot(t,e,n){return wx(n)}s(rot,"FromFunction");function iot(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Dl(i,[...e,...r],n)}s(iot,"FromImport");function oot(t,e,n){return!(!XL(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(oot,"FromInteger");function sot(t,e,n){let r=t.allOf.every(i=>Dl(i,e,n));if(t.unevaluatedProperties===!1){let i=new RegExp(S1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a));return r&&o}else if(Ls(t.unevaluatedProperties)){let i=new RegExp(S1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a)||Dl(t.unevaluatedProperties,e,n[a]));return r&&o}else return r}s(sot,"FromIntersect");function aot(t,e,n){return KL(n)}s(aot,"FromIterator");function lot(t,e,n){return n===t.const}s(lot,"FromLiteral");function cot(t,e,n){return!1}s(cot,"FromNever");function uot(t,e,n){return!Dl(t.not,e,n)}s(uot,"FromNot");function dot(t,e,n){return v1(n)}s(dot,"FromNull");function fot(t,e,n){return!(!Jo.IsNumberLike(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(fot,"FromNumber");function pot(t,e,n){if(!Jo.IsObjectLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let r=Object.getOwnPropertyNames(t.properties);for(let i of r){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Dl(o,e,n[i])||(R1(o)||zit(o))&&!(i in n))return!1}else if(Jo.IsExactOptionalProperty(n,i)&&!Dl(o,e,n[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(n);return t.required&&t.required.length===r.length&&i.length===r.length?!0:i.every(o=>r.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(n).every(o=>r.includes(o)||Dl(t.additionalProperties,e,n[o])):!0}s(pot,"FromObject");function mot(t,e,n){return JL(n)}s(mot,"FromPromise");function hot(t,e,n){if(!Jo.IsRecordLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let[r,i]=Object.entries(t.patternProperties)[0],o=new RegExp(r),a=Object.entries(n).every(([u,d])=>o.test(u)?Dl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(n).every(([u,d])=>o.test(u)?!0:Dl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(n).every(u=>o.test(u)):!0;return a&&l&&c}s(hot,"FromRecord");function got(t,e,n){return Dl(Ki(t,e),e,n)}s(got,"FromRef");function Aot(t,e,n){let r=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)?!1:r.test(n)}s(Aot,"FromRegExp");function yot(t,e,n){return!qi(n)||Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(n)?!1:Ei(t.format)?um.Has(t.format)?um.Get(t.format)(n):!1:!0}s(yot,"FromString");function Cot(t,e,n){return b1(n)}s(Cot,"FromSymbol");function xot(t,e,n){return qi(n)&&new RegExp(t.pattern).test(n)}s(xot,"FromTemplateLiteral");function vot(t,e,n){return Dl(Ki(t,e),e,n)}s(vot,"FromThis");function bot(t,e,n){if(!Ar(n)||t.items===void 0&&n.length!==0||n.length!==t.maxItems)return!1;if(!t.items)return!0;for(let r=0;r<t.items.length;r++)if(!Dl(t.items[r],e,n[r]))return!1;return!0}s(bot,"FromTuple");function Eot(t,e,n){return ds(n)}s(Eot,"FromUndefined");function Iot(t,e,n){return t.anyOf.some(r=>Dl(r,e,n))}s(Iot,"FromUnion");function Tot(t,e,n){return!(!V_(n)||Ei(t.maxByteLength)&&!(n.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(n.length>=t.minByteLength))}s(Tot,"FromUint8Array");function wot(t,e,n){return!0}s(wot,"FromUnknown");function _ot(t,e,n){return Jo.IsVoidLike(n)}s(_ot,"FromVoid");function Sot(t,e,n){return bu.Has(t[Xe])?bu.Get(t[Xe])(t,n):!1}s(Sot,"FromKind");function Dl(t,e,n){let r=Ei(t.$id)?Bl(t,e):e,i=t;switch(i[Xe]){case"Any":return Yit(i,r,n);case"Argument":return Kit(i,r,n);case"Array":return Jit(i,r,n);case"AsyncIterator":return Xit(i,r,n);case"BigInt":return Zit(i,r,n);case"Boolean":return eot(i,r,n);case"Constructor":return tot(i,r,n);case"Date":return not(i,r,n);case"Function":return rot(i,r,n);case"Import":return iot(i,r,n);case"Integer":return oot(i,r,n);case"Intersect":return sot(i,r,n);case"Iterator":return aot(i,r,n);case"Literal":return lot(i,r,n);case"Never":return cot(i,r,n);case"Not":return uot(i,r,n);case"Null":return dot(i,r,n);case"Number":return fot(i,r,n);case"Object":return pot(i,r,n);case"Promise":return mot(i,r,n);case"Record":return hot(i,r,n);case"Ref":return got(i,r,n);case"RegExp":return Aot(i,r,n);case"String":return yot(i,r,n);case"Symbol":return Cot(i,r,n);case"TemplateLiteral":return xot(i,r,n);case"This":return vot(i,r,n);case"Tuple":return bot(i,r,n);case"Undefined":return Eot(i,r,n);case"Union":return Iot(i,r,n);case"Uint8Array":return Tot(i,r,n);case"Unknown":return wot(i,r,n);case"Void":return _ot(i,r,n);default:if(!bu.Has(i[Xe]))throw new kZ(i);return Sot(i,r,n)}}s(Dl,"Visit");function pi(...t){return t.length===3?Dl(t[0],t[1],t[2]):Dl(t[0],[],t[1])}s(pi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var BZ=class extends yr{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function k1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(k1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var Lx=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function en(t,e,n,r,i=[]){return{type:t,schema:e,path:n,value:r,message:jxe()({errorType:t,path:n,schema:e,value:r,errors:i}),errors:i}}s(en,"Create");function*Rot(t,e,n,r){}s(Rot,"FromAny");function*kot(t,e,n,r){}s(kot,"FromArgument");function*Bot(t,e,n,r){if(!Ar(r))return yield en(Ke.Array,t,n,r);Ii(t.minItems)&&!(r.length>=t.minItems)&&(yield en(Ke.ArrayMinItems,t,n,r)),Ii(t.maxItems)&&!(r.length<=t.maxItems)&&(yield en(Ke.ArrayMaxItems,t,n,r));for(let a=0;a<r.length;a++)yield*Pl(t.items,e,`${n}/${a}`,r[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of r){let c=Nx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield en(Ke.ArrayUniqueItems,t,n,r)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ni(),o=r.reduce((a,l,c)=>Pl(i,e,`${n}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield en(Ke.ArrayContains,t,n,r)),Wn(t.minContains)&&o<t.minContains&&(yield en(Ke.ArrayMinContains,t,n,r)),Wn(t.maxContains)&&o>t.maxContains&&(yield en(Ke.ArrayMaxContains,t,n,r))}s(Bot,"FromArray");function*Dot(t,e,n,r){YL(r)||(yield en(Ke.AsyncIterator,t,n,r))}s(Dot,"FromAsyncIterator");function*Pot(t,e,n,r){if(!cc(r))return yield en(Ke.BigInt,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.BigIntExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.BigIntExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.BigIntMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.BigIntMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==BigInt(0)&&(yield en(Ke.BigIntMultipleOf,t,n,r))}s(Pot,"FromBigInt");function*Not(t,e,n,r){ag(r)||(yield en(Ke.Boolean,t,n,r))}s(Not,"FromBoolean");function*Lot(t,e,n,r){yield*Pl(t.returns,e,n,r.prototype)}s(Lot,"FromConstructor");function*Fot(t,e,n,r){if(!vu(r))return yield en(Ke.Date,t,n,r);Ii(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)&&(yield en(Ke.DateExclusiveMaximumTimestamp,t,n,r)),Ii(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)&&(yield en(Ke.DateExclusiveMinimumTimestamp,t,n,r)),Ii(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)&&(yield en(Ke.DateMaximumTimestamp,t,n,r)),Ii(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)&&(yield en(Ke.DateMinimumTimestamp,t,n,r)),Ii(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0&&(yield en(Ke.DateMultipleOfTimestamp,t,n,r))}s(Fot,"FromDate");function*Mot(t,e,n,r){wx(r)||(yield en(Ke.Function,t,n,r))}s(Mot,"FromFunction");function*Qot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Pl(o,[...e,...i],n,r)}s(Qot,"FromImport");function*Oot(t,e,n,r){if(!XL(r))return yield en(Ke.Integer,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.IntegerExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.IntegerExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.IntegerMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.IntegerMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.IntegerMultipleOf,t,n,r))}s(Oot,"FromInteger");function*Uot(t,e,n,r){let i=!1;for(let o of t.allOf)for(let a of Pl(o,e,n,r))i=!0,yield a;if(i)return yield en(Ke.Intersect,t,n,r);if(t.unevaluatedProperties===!1){let o=new RegExp(S1(t));for(let a of Object.getOwnPropertyNames(r))o.test(a)||(yield en(Ke.IntersectUnevaluatedProperties,t,`${n}/${a}`,r))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(S1(t));for(let a of Object.getOwnPropertyNames(r))if(!o.test(a)){let l=Pl(t.unevaluatedProperties,e,`${n}/${a}`,r[a]).next();l.done||(yield l.value)}}}s(Uot,"FromIntersect");function*qot(t,e,n,r){KL(r)||(yield en(Ke.Iterator,t,n,r))}s(qot,"FromIterator");function*Wot(t,e,n,r){r!==t.const&&(yield en(Ke.Literal,t,n,r))}s(Wot,"FromLiteral");function*Got(t,e,n,r){yield en(Ke.Never,t,n,r)}s(Got,"FromNever");function*Hot(t,e,n,r){Pl(t.not,e,n,r).next().done===!0&&(yield en(Ke.Not,t,n,r))}s(Hot,"FromNot");function*jot(t,e,n,r){v1(r)||(yield en(Ke.Null,t,n,r))}s(jot,"FromNull");function*Vot(t,e,n,r){if(!Jo.IsNumberLike(r))return yield en(Ke.Number,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.NumberExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.NumberExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.NumberMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.NumberMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.NumberMultipleOf,t,n,r))}s(Vot,"FromNumber");function*$ot(t,e,n,r){if(!Jo.IsObjectLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(r);for(let l of i)a.includes(l)||(yield en(Ke.ObjectRequiredProperty,t.properties[l],`${n}/${k1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield en(Ke.ObjectAdditionalProperties,t,`${n}/${k1(l)}`,r[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*Pl(t.additionalProperties,e,`${n}/${k1(l)}`,r[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*Pl(c,e,`${n}/${k1(l)}`,r[l]),R1(t)&&!(l in r)&&(yield en(Ke.ObjectRequiredProperty,c,`${n}/${k1(l)}`,void 0))):Jo.IsExactOptionalProperty(r,l)&&(yield*Pl(c,e,`${n}/${k1(l)}`,r[l]))}}s($ot,"FromObject");function*zot(t,e,n,r){JL(r)||(yield en(Ke.Promise,t,n,r))}s(zot,"FromPromise");function*Yot(t,e,n,r){if(!Jo.IsRecordLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(r))a.test(l)&&(yield*Pl(o,e,`${n}/${k1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(r))a.test(l)||(yield*Pl(t.additionalProperties,e,`${n}/${k1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(r))if(!a.test(l))return yield en(Ke.ObjectAdditionalProperties,t,`${n}/${k1(l)}`,c)}}s(Yot,"FromRecord");function*Kot(t,e,n,r){yield*Pl(Ki(t,e),e,n,r)}s(Kot,"FromRef");function*Jot(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);if(Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),!new RegExp(t.source,t.flags).test(r))return yield en(Ke.RegExp,t,n,r)}s(Jot,"FromRegExp");function*Xot(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),qi(t.pattern)&&(new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))),qi(t.format)&&(um.Has(t.format)?um.Get(t.format)(r)||(yield en(Ke.StringFormat,t,n,r)):yield en(Ke.StringFormatUnknown,t,n,r))}s(Xot,"FromString");function*Zot(t,e,n,r){b1(r)||(yield en(Ke.Symbol,t,n,r))}s(Zot,"FromSymbol");function*est(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))}s(est,"FromTemplateLiteral");function*tst(t,e,n,r){yield*Pl(Ki(t,e),e,n,r)}s(tst,"FromThis");function*nst(t,e,n,r){if(!Ar(r))return yield en(Ke.Tuple,t,n,r);if(t.items===void 0&&r.length!==0)return yield en(Ke.TupleLength,t,n,r);if(r.length!==t.maxItems)return yield en(Ke.TupleLength,t,n,r);if(t.items)for(let i=0;i<t.items.length;i++)yield*Pl(t.items[i],e,`${n}/${i}`,r[i])}s(nst,"FromTuple");function*rst(t,e,n,r){ds(r)||(yield en(Ke.Undefined,t,n,r))}s(rst,"FromUndefined");function*ist(t,e,n,r){if(pi(t,e,r))return;let i=t.anyOf.map(o=>new Lx(Pl(o,e,n,r)));yield en(Ke.Union,t,n,r,i)}s(ist,"FromUnion");function*ost(t,e,n,r){if(!V_(r))return yield en(Ke.Uint8Array,t,n,r);Ii(t.maxByteLength)&&!(r.length<=t.maxByteLength)&&(yield en(Ke.Uint8ArrayMaxByteLength,t,n,r)),Ii(t.minByteLength)&&!(r.length>=t.minByteLength)&&(yield en(Ke.Uint8ArrayMinByteLength,t,n,r))}s(ost,"FromUint8Array");function*sst(t,e,n,r){}s(sst,"FromUnknown");function*ast(t,e,n,r){Jo.IsVoidLike(r)||(yield en(Ke.Void,t,n,r))}s(ast,"FromVoid");function*lst(t,e,n,r){bu.Get(t[Xe])(t,r)||(yield en(Ke.Kind,t,n,r))}s(lst,"FromKind");function*Pl(t,e,n,r){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Xe]){case"Any":return yield*Rot(o,i,n,r);case"Argument":return yield*kot(o,i,n,r);case"Array":return yield*Bot(o,i,n,r);case"AsyncIterator":return yield*Dot(o,i,n,r);case"BigInt":return yield*Pot(o,i,n,r);case"Boolean":return yield*Not(o,i,n,r);case"Constructor":return yield*Lot(o,i,n,r);case"Date":return yield*Fot(o,i,n,r);case"Function":return yield*Mot(o,i,n,r);case"Import":return yield*Qot(o,i,n,r);case"Integer":return yield*Oot(o,i,n,r);case"Intersect":return yield*Uot(o,i,n,r);case"Iterator":return yield*qot(o,i,n,r);case"Literal":return yield*Wot(o,i,n,r);case"Never":return yield*Got(o,i,n,r);case"Not":return yield*Hot(o,i,n,r);case"Null":return yield*jot(o,i,n,r);case"Number":return yield*Vot(o,i,n,r);case"Object":return yield*$ot(o,i,n,r);case"Promise":return yield*zot(o,i,n,r);case"Record":return yield*Yot(o,i,n,r);case"Ref":return yield*Kot(o,i,n,r);case"RegExp":return yield*Jot(o,i,n,r);case"String":return yield*Xot(o,i,n,r);case"Symbol":return yield*Zot(o,i,n,r);case"TemplateLiteral":return yield*est(o,i,n,r);case"This":return yield*tst(o,i,n,r);case"Tuple":return yield*nst(o,i,n,r);case"Undefined":return yield*rst(o,i,n,r);case"Union":return yield*ist(o,i,n,r);case"Uint8Array":return yield*ost(o,i,n,r);case"Unknown":return yield*sst(o,i,n,r);case"Void":return yield*ast(o,i,n,r);default:if(!bu.Has(o[Xe]))throw new BZ(t);return yield*lst(o,i,n,r)}}s(Pl,"Visit");function fg(...t){let e=t.length===3?Pl(t[0],t[1],"",t[2]):Pl(t[0],[],"",t[1]);return new Lx(e)}s(fg,"Errors");f();f();var mS=class extends yr{static{s(this,"TransformDecodeCheckError")}constructor(e,n,r){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},DZ=class extends yr{static{s(this,"TransformDecodeError")}constructor(e,n,r,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=n,this.value=r,this.error=i}};function Fs(t,e,n){try{return ao(t)?t[Ns].Decode(n):n}catch(r){throw new DZ(t,e,n,r)}}s(Fs,"Default");function cst(t,e,n,r){return Ar(r)?Fs(t,n,r.map((i,o)=>mm(t.items,e,`${n}/${o}`,i))):Fs(t,n,r)}s(cst,"FromArray");function ust(t,e,n,r){if(!ci(r)||r0(r))return Fs(t,n,r);let i=aF(t),o=i.map(d=>d[0]),a={...r};for(let[d,p]of i)d in a&&(a[d]=mm(p,e,`${n}/${d}`,a[d]));if(!ao(t.unevaluatedProperties))return Fs(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Fs(c,`${n}/${d}`,u[d]));return Fs(t,n,u)}s(ust,"FromIntersect");function dst(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=mm(o,[...e,...i],n,r);return Fs(t,n,a)}s(dst,"FromImport");function fst(t,e,n,r){return Fs(t,n,mm(t.not,e,n,r))}s(fst,"FromNot");function pst(t,e,n,r){if(!ci(r))return Fs(t,n,r);let i=ld(t),o={...r};for(let u of i)gr(o,u)&&(ds(o[u])&&(!T1(t.properties[u])||Jo.IsExactOptionalProperty(o,u))||(o[u]=mm(t.properties[u],e,`${n}/${u}`,o[u])));if(!Ls(t.additionalProperties))return Fs(t,n,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Fs(l,`${n}/${u}`,c[u]));return Fs(t,n,c)}s(pst,"FromObject");function mst(t,e,n,r){if(!ci(r))return Fs(t,n,r);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...r};for(let d of Object.getOwnPropertyNames(r))o.test(d)&&(a[d]=mm(t.patternProperties[i],e,`${n}/${d}`,a[d]));if(!Ls(t.additionalProperties))return Fs(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Fs(c,`${n}/${d}`,u[d]));return Fs(t,n,u)}s(mst,"FromRecord");function hst(t,e,n,r){let i=Ki(t,e);return Fs(t,n,mm(i,e,n,r))}s(hst,"FromRef");function gst(t,e,n,r){let i=Ki(t,e);return Fs(t,n,mm(i,e,n,r))}s(gst,"FromThis");function Ast(t,e,n,r){return Ar(r)&&Ar(t.items)?Fs(t,n,t.items.map((i,o)=>mm(i,e,`${n}/${o}`,r[o]))):Fs(t,n,r)}s(Ast,"FromTuple");function yst(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=mm(i,e,n,r);return Fs(t,n,o)}return Fs(t,n,r)}s(yst,"FromUnion");function mm(t,e,n,r){let i=Bl(t,e),o=t;switch(t[Xe]){case"Array":return cst(o,i,n,r);case"Import":return dst(o,i,n,r);case"Intersect":return ust(o,i,n,r);case"Not":return fst(o,i,n,r);case"Object":return pst(o,i,n,r);case"Record":return mst(o,i,n,r);case"Ref":return hst(o,i,n,r);case"Symbol":return Fs(o,n,r);case"This":return gst(o,i,n,r);case"Tuple":return Ast(o,i,n,r);case"Union":return yst(o,i,n,r);default:return Fs(o,n,r)}}s(mm,"Visit");function hS(t,e,n){return mm(t,e,"",n)}s(hS,"TransformDecode");f();var gS=class extends yr{static{s(this,"TransformEncodeCheckError")}constructor(e,n,r){super("The encoded value does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},PZ=class extends yr{static{s(this,"TransformEncodeError")}constructor(e,n,r,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=n,this.value=r,this.error=i}};function dc(t,e,n){try{return ao(t)?t[Ns].Encode(n):n}catch(r){throw new PZ(t,e,n,r)}}s(dc,"Default");function Cst(t,e,n,r){let i=dc(t,n,r);return Ar(i)?i.map((o,a)=>hm(t.items,e,`${n}/${a}`,o)):i}s(Cst,"FromArray");function xst(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=dc(t,n,r);return hm(o,[...e,...i],n,a)}s(xst,"FromImport");function vst(t,e,n,r){let i=dc(t,n,r);if(!ci(r)||r0(r))return i;let o=aF(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=hm(m,e,`${n}/${p}`,l[p]));if(!ao(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=dc(u,`${n}/${p}`,d[p]));return d}s(vst,"FromIntersect");function bst(t,e,n,r){return dc(t.not,n,dc(t,n,r))}s(bst,"FromNot");function Est(t,e,n,r){let i=dc(t,n,r);if(!ci(i))return i;let o=ld(t),a={...i};for(let d of o)gr(a,d)&&(ds(a[d])&&(!T1(t.properties[d])||Jo.IsExactOptionalProperty(a,d))||(a[d]=hm(t.properties[d],e,`${n}/${d}`,a[d])));if(!Ls(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=dc(c,`${n}/${d}`,u[d]));return u}s(Est,"FromObject");function Ist(t,e,n,r){let i=dc(t,n,r);if(!ci(r))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(r))a.test(p)&&(l[p]=hm(t.patternProperties[o],e,`${n}/${p}`,l[p]));if(!Ls(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=dc(u,`${n}/${p}`,d[p]));return d}s(Ist,"FromRecord");function Tst(t,e,n,r){let i=Ki(t,e),o=hm(i,e,n,r);return dc(t,n,o)}s(Tst,"FromRef");function wst(t,e,n,r){let i=Ki(t,e),o=hm(i,e,n,r);return dc(t,n,o)}s(wst,"FromThis");function _st(t,e,n,r){let i=dc(t,n,r);return Ar(t.items)?t.items.map((o,a)=>hm(o,e,`${n}/${a}`,i[a])):[]}s(_st,"FromTuple");function Sst(t,e,n,r){for(let i of t.anyOf){if(!pi(i,e,r))continue;let o=hm(i,e,n,r);return dc(t,n,o)}for(let i of t.anyOf){let o=hm(i,e,n,r);if(pi(t,e,o))return dc(t,n,o)}return dc(t,n,r)}s(Sst,"FromUnion");function hm(t,e,n,r){let i=Bl(t,e),o=t;switch(t[Xe]){case"Array":return Cst(o,i,n,r);case"Import":return xst(o,i,n,r);case"Intersect":return vst(o,i,n,r);case"Not":return bst(o,i,n,r);case"Object":return Est(o,i,n,r);case"Record":return Ist(o,i,n,r);case"Ref":return Tst(o,i,n,r);case"This":return wst(o,i,n,r);case"Tuple":return _st(o,i,n,r);case"Union":return Sst(o,i,n,r);default:return dc(o,n,r)}}s(hm,"Visit");function AS(t,e,n){return hm(t,e,"",n)}s(AS,"TransformEncode");f();function Rst(t,e){return ao(t)||fl(t.items,e)}s(Rst,"FromArray");function kst(t,e){return ao(t)||fl(t.items,e)}s(kst,"FromAsyncIterator");function Bst(t,e){return ao(t)||fl(t.returns,e)||t.parameters.some(n=>fl(n,e))}s(Bst,"FromConstructor");function Dst(t,e){return ao(t)||fl(t.returns,e)||t.parameters.some(n=>fl(n,e))}s(Dst,"FromFunction");function Pst(t,e){return ao(t)||ao(t.unevaluatedProperties)||t.allOf.some(n=>fl(n,e))}s(Pst,"FromIntersect");function Nst(t,e){let n=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),r=t.$defs[t.$ref];return ao(t)||fl(r,[...n,...e])}s(Nst,"FromImport");function Lst(t,e){return ao(t)||fl(t.items,e)}s(Lst,"FromIterator");function Fst(t,e){return ao(t)||fl(t.not,e)}s(Fst,"FromNot");function Mst(t,e){return ao(t)||Object.values(t.properties).some(n=>fl(n,e))||Ls(t.additionalProperties)&&fl(t.additionalProperties,e)}s(Mst,"FromObject");function Qst(t,e){return ao(t)||fl(t.item,e)}s(Qst,"FromPromise");function Ost(t,e){let n=Object.getOwnPropertyNames(t.patternProperties)[0],r=t.patternProperties[n];return ao(t)||fl(r,e)||Ls(t.additionalProperties)&&ao(t.additionalProperties)}s(Ost,"FromRecord");function Ust(t,e){return ao(t)?!0:fl(Ki(t,e),e)}s(Ust,"FromRef");function qst(t,e){return ao(t)?!0:fl(Ki(t,e),e)}s(qst,"FromThis");function Wst(t,e){return ao(t)||!ds(t.items)&&t.items.some(n=>fl(n,e))}s(Wst,"FromTuple");function Gst(t,e){return ao(t)||t.anyOf.some(n=>fl(n,e))}s(Gst,"FromUnion");function fl(t,e){let n=Bl(t,e),r=t;if(t.$id&&NZ.has(t.$id))return!1;switch(t.$id&&NZ.add(t.$id),t[Xe]){case"Array":return Rst(r,n);case"AsyncIterator":return kst(r,n);case"Constructor":return Bst(r,n);case"Function":return Dst(r,n);case"Import":return Nst(r,n);case"Intersect":return Pst(r,n);case"Iterator":return Lst(r,n);case"Not":return Fst(r,n);case"Object":return Mst(r,n);case"Promise":return Qst(r,n);case"Record":return Ost(r,n);case"Ref":return Ust(r,n);case"This":return qst(r,n);case"Tuple":return Wst(r,n);case"Union":return Gst(r,n);default:return ao(t)}}s(fl,"Visit");var NZ=new Set;function B1(t,e){return NZ.clear(),fl(t,e)}s(B1,"HasTransform");var LZ=class{static{s(this,"TypeCheck")}constructor(e,n,r,i){this.schema=e,this.references=n,this.checkFunc=r,this.code=i,this.hasTransform=B1(e,n)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return fg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new mS(this.schema,e,this.Errors(e).First());return this.hasTransform?hS(this.schema,this.references,e):e}Encode(e){let n=this.hasTransform?AS(this.schema,this.references,e):e;if(!this.checkFunc(n))throw new gS(this.schema,e,this.Errors(e).First());return n}},D1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function n(o){return o===95}s(n,"IsUnderscore"),t.IsUnderscore=n;function r(o){return o>=65&&o<=90||o>=97&&o<=122}s(r,"IsAlpha"),t.IsAlpha=r;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(D1||(D1={}));var xF;(function(t){function e(o){return o.length===0?!1:D1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function n(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(D1.IsAlpha(l)||D1.IsNumeric(l)||D1.DollarSign(l)||D1.IsUnderscore(l)))return!1}return!0}s(n,"IsAccessor");function r(o){return o.replace(/'/g,"\\'")}s(r,"EscapeHyphen");function i(o,a){return n(a)?`${o}.${a}`:`${o}['${r(a)}']`}s(i,"Encode"),t.Encode=i})(xF||(xF={}));var FZ;(function(t){function e(n){let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);D1.IsNumeric(o)||D1.IsAlpha(o)?r.push(n.charAt(i)):r.push(`_${o}_`)}return r.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(FZ||(FZ={}));var MZ;(function(t){function e(n){return n.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(MZ||(MZ={}));var QZ=class extends yr{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},vF=class extends yr{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},yI;(function(t){function e(a,l,c){return Jo.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${xF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return Jo.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Jo.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(yI||(yI={}));var hs;(function(t){function e(ce){return ce[Xe]==="Any"||ce[Xe]==="Unknown"}s(e,"IsAnyOrUnknown");function*n(ce,Oe,ye){yield"true"}s(n,"FromAny");function*r(ce,Oe,ye){yield"true"}s(r,"FromArgument");function*i(ce,Oe,ye){yield`Array.isArray(${ye})`;let[tt,Z]=[Fe("value","any"),Fe("acc","number")];Wn(ce.maxItems)&&(yield`${ye}.length <= ${ce.maxItems}`),Wn(ce.minItems)&&(yield`${ye}.length >= ${ce.minItems}`);let ne=he(ce.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${ne})`,ms(ce.contains)||Wn(ce.minContains)||Wn(ce.maxContains)){let Ge=ms(ce.contains)?ce.contains:ni(),Pe=he(Ge,Oe,"value"),be=Wn(ce.minContains)?[`(count >= ${ce.minContains})`]:[],ze=Wn(ce.maxContains)?[`(count <= ${ce.maxContains})`]:[],it=`const count = value.reduce((${Z}, ${tt}) => ${Pe} ? acc + 1 : acc, 0)`,ht=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${ht}})(${ye})`}ce.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ce,Oe,ye){yield`(typeof ${ye} === 'bigint')`,cc(ce.exclusiveMaximum)&&(yield`${ye} < BigInt(${ce.exclusiveMaximum})`),cc(ce.exclusiveMinimum)&&(yield`${ye} > BigInt(${ce.exclusiveMinimum})`),cc(ce.maximum)&&(yield`${ye} <= BigInt(${ce.maximum})`),cc(ce.minimum)&&(yield`${ye} >= BigInt(${ce.minimum})`),cc(ce.multipleOf)&&(yield`(${ye} % BigInt(${ce.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(ce,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(ce,Oe,ye){yield*te(ce.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(ce,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Wn(ce.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ce.exclusiveMaximumTimestamp}`),Wn(ce.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ce.exclusiveMinimumTimestamp}`),Wn(ce.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ce.maximumTimestamp}`),Wn(ce.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ce.minimumTimestamp}`),Wn(ce.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ce.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ce,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ce,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(ce.$defs).reduce((Z,ne)=>[...Z,ce.$defs[ne]],[]);yield*te(wf(ce.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(ce,Oe,ye){yield`Number.isInteger(${ye})`,Wn(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wn(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wn(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wn(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wn(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ce,Oe,ye){let tt=ce.allOf.map(Z=>he(Z,Oe,ye)).join(" && ");if(ce.unevaluatedProperties===!1){let Z=ke(`${new RegExp(S1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${Z}.test(key))`;yield`(${tt} && ${ne})`}else if(ms(ce.unevaluatedProperties)){let Z=ke(`${new RegExp(S1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${Z}.test(key) || ${he(ce.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${ne})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(ce,Oe,ye){typeof ce.const=="number"||typeof ce.const=="boolean"?yield`(${ye} === ${ce.const})`:yield`(${ye} === '${MZ.Escape(ce.const)}')`}s(y,"FromLiteral");function*v(ce,Oe,ye){yield"false"}s(v,"FromNever");function*b(ce,Oe,ye){yield`(!${he(ce.not,Oe,ye)})`}s(b,"FromNot");function*E(ce,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(ce,Oe,ye){yield yI.IsNumberLike(ye),Wn(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wn(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wn(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wn(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wn(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(_,"FromNumber");function*k(ce,Oe,ye){yield yI.IsObjectLike(ye),Wn(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wn(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let tt=Object.getOwnPropertyNames(ce.properties);for(let Z of tt){let ne=xF.Encode(ye,Z),Ge=ce.properties[Z];if(ce.required&&ce.required.includes(Z))yield*te(Ge,Oe,ne),(R1(Ge)||e(Ge))&&(yield`('${Z}' in ${ye})`);else{let Pe=he(Ge,Oe,ne);yield yI.IsExactOptionalProperty(ye,Z,Pe)}}if(ce.additionalProperties===!1)if(ce.required&&ce.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let Z=`[${tt.map(ne=>`'${ne}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${Z}.includes(key))`}if(typeof ce.additionalProperties=="object"){let Z=he(ce.additionalProperties,Oe,`${ye}[key]`),ne=`[${tt.map(Ge=>`'${Ge}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${ne}.includes(key) || ${Z}))`}}s(k,"FromObject");function*B(ce,Oe,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*N(ce,Oe,ye){yield yI.IsRecordLike(ye),Wn(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wn(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let[tt,Z]=Object.entries(ce.patternProperties)[0],ne=ke(`${new RegExp(tt)}`),Ge=he(Z,Oe,"value"),Pe=ms(ce.additionalProperties)?he(ce.additionalProperties,Oe,ye):ce.additionalProperties===!1?"false":"true",be=`(${ne}.test(key) ? ${Ge} : ${Pe})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*U(ce,Oe,ye){let tt=Ki(ce,Oe);if(pe.functions.has(ce.$ref))return yield`${Qe(ce.$ref)}(${ye})`;yield*te(tt,Oe,ye)}s(U,"FromRef");function*re(ce,Oe,ye){let tt=ke(`${new RegExp(ce.source,ce.flags)};`);yield`(typeof ${ye} === 'string')`,Wn(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wn(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),yield`${tt}.test(${ye})`}s(re,"FromRegExp");function*me(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,Wn(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wn(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),ce.pattern!==void 0&&(yield`${ke(`${new RegExp(ce.pattern)};`)}.test(${ye})`),ce.format!==void 0&&(yield`format('${ce.format}', ${ye})`)}s(me,"FromString");function*ae(ce,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(ae,"FromSymbol");function*H(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${ke(`${new RegExp(ce.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*G(ce,Oe,ye){yield`${Qe(ce.$ref)}(${ye})`}s(G,"FromThis");function*ue(ce,Oe,ye){if(yield`Array.isArray(${ye})`,ce.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ce.maxItems})`;for(let tt=0;tt<ce.items.length;tt++)yield`${he(ce.items[tt],Oe,`${ye}[${tt}]`)}`}s(ue,"FromTuple");function*ie(ce,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*$(ce,Oe,ye){yield`(${ce.anyOf.map(Z=>he(Z,Oe,ye)).join(" || ")})`}s($,"FromUnion");function*O(ce,Oe,ye){yield`${ye} instanceof Uint8Array`,Wn(ce.maxByteLength)&&(yield`(${ye}.length <= ${ce.maxByteLength})`),Wn(ce.minByteLength)&&(yield`(${ye}.length >= ${ce.minByteLength})`)}s(O,"FromUint8Array");function*Y(ce,Oe,ye){yield"true"}s(Y,"FromUnknown");function*K(ce,Oe,ye){yield yI.IsVoidLike(ye)}s(K,"FromVoid");function*le(ce,Oe,ye){let tt=pe.instances.size;pe.instances.set(tt,ce),yield`kind('${ce[Xe]}', ${tt}, ${ye})`}s(le,"FromKind");function*te(ce,Oe,ye,tt=!0){let Z=qi(ce.$id)?[...Oe,ce]:Oe,ne=ce;if(tt&&qi(ce.$id)){let Ge=Qe(ce.$id);if(pe.functions.has(Ge))return yield`${Ge}(${ye})`;{pe.functions.set(Ge,"<deferred>");let Pe=Ze(Ge,ce,Oe,"value",!1);return pe.functions.set(Ge,Pe),yield`${Ge}(${ye})`}}switch(ne[Xe]){case"Any":return yield*n(ne,Z,ye);case"Argument":return yield*r(ne,Z,ye);case"Array":return yield*i(ne,Z,ye);case"AsyncIterator":return yield*o(ne,Z,ye);case"BigInt":return yield*a(ne,Z,ye);case"Boolean":return yield*l(ne,Z,ye);case"Constructor":return yield*c(ne,Z,ye);case"Date":return yield*u(ne,Z,ye);case"Function":return yield*d(ne,Z,ye);case"Import":return yield*p(ne,Z,ye);case"Integer":return yield*m(ne,Z,ye);case"Intersect":return yield*h(ne,Z,ye);case"Iterator":return yield*g(ne,Z,ye);case"Literal":return yield*y(ne,Z,ye);case"Never":return yield*v(ne,Z,ye);case"Not":return yield*b(ne,Z,ye);case"Null":return yield*E(ne,Z,ye);case"Number":return yield*_(ne,Z,ye);case"Object":return yield*k(ne,Z,ye);case"Promise":return yield*B(ne,Z,ye);case"Record":return yield*N(ne,Z,ye);case"Ref":return yield*U(ne,Z,ye);case"RegExp":return yield*re(ne,Z,ye);case"String":return yield*me(ne,Z,ye);case"Symbol":return yield*ae(ne,Z,ye);case"TemplateLiteral":return yield*H(ne,Z,ye);case"This":return yield*G(ne,Z,ye);case"Tuple":return yield*ue(ne,Z,ye);case"Undefined":return yield*ie(ne,Z,ye);case"Union":return yield*$(ne,Z,ye);case"Uint8Array":return yield*O(ne,Z,ye);case"Unknown":return yield*Y(ne,Z,ye);case"Void":return yield*K(ne,Z,ye);default:if(!bu.Has(ne[Xe]))throw new QZ(ce);return yield*le(ne,Z,ye)}}s(te,"Visit");let pe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(ce,Oe,ye,tt=!0){return`(${[...te(ce,Oe,ye,tt)].join(" && ")})`}s(he,"CreateExpression");function Qe(ce){return`check_${FZ.Encode(ce)}`}s(Qe,"CreateFunctionName");function ke(ce){let Oe=`local_${pe.variables.size}`;return pe.variables.set(Oe,`const ${Oe} = ${ce}`),Oe}s(ke,"CreateVariable");function Ze(ce,Oe,ye,tt,Z=!0){let[ne,Ge]=[`
`,it=>"".padStart(it," ")],Pe=Fe("value","any"),be=ft("boolean"),ze=[...te(Oe,ye,tt,Z)].map(it=>`${Ge(4)}${it}`).join(` &&${ne}`);return`function ${ce}(${Pe})${be} {${ne}${Ge(2)}return (${ne}${ze}${ne}${Ge(2)})
}`}s(Ze,"CreateFunction");function Fe(ce,Oe){let ye=pe.language==="typescript"?`: ${Oe}`:"";return`${ce}${ye}`}s(Fe,"CreateParameter");function ft(ce){return pe.language==="typescript"?`: ${ce}`:""}s(ft,"CreateReturns");function It(ce,Oe,ye){let tt=Ze("check",ce,Oe,"value"),Z=Fe("value","any"),ne=ft("boolean"),Ge=[...pe.functions.values()],Pe=[...pe.variables.values()],be=qi(ce.$id)?`return function check(${Z})${ne} {
  return ${Qe(ce.$id)}(value)
}`:`return ${tt}`;return[...Pe,...Ge,be].join(`
`)}s(It,"Build");function yt(...ce){let Oe={language:"javascript"},[ye,tt,Z]=ce.length===2&&Ar(ce[1])?[ce[0],ce[1],Oe]:ce.length===2&&!Ar(ce[1])?[ce[0],[],ce[1]]:ce.length===3?[ce[0],ce[1],ce[2]]:ce.length===1?[ce[0],[],Oe]:[null,[],Oe];if(pe.language=Z.language,pe.variables.clear(),pe.functions.clear(),pe.instances.clear(),!ms(ye))throw new vF(ye);for(let ne of tt)if(!ms(ne))throw new vF(ne);return It(ye,tt,Z)}s(yt,"Code"),t.Code=yt;function vt(ce,Oe=[]){let ye=yt(ce,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),Z=new Map(pe.instances);function ne(ze,it,ht){if(!bu.Has(ze)||!Z.has(it))return!1;let Ot=bu.Get(ze),cn=Z.get(it);return Ot(cn,ht)}s(ne,"typeRegistryFunction");function Ge(ze,it){return um.Has(ze)?um.Get(ze)(it):!1}s(Ge,"formatRegistryFunction");function Pe(ze){return Nx(ze)}s(Pe,"hashFunction");let be=tt(ne,Ge,Pe);return new LZ(ce,Oe,be,ye)}s(vt,"Compile"),t.Compile=vt})(hs||(hs={}));var uM=qe(Tx());f();f();var fc=[];for(let t=0;t<256;++t)fc.push((t+256).toString(16).slice(1));function Yxe(t,e=0){return(fc[t[e+0]]+fc[t[e+1]]+fc[t[e+2]]+fc[t[e+3]]+"-"+fc[t[e+4]]+fc[t[e+5]]+"-"+fc[t[e+6]]+fc[t[e+7]]+"-"+fc[t[e+8]]+fc[t[e+9]]+"-"+fc[t[e+10]]+fc[t[e+11]]+fc[t[e+12]]+fc[t[e+13]]+fc[t[e+14]]+fc[t[e+15]]).toLowerCase()}s(Yxe,"unsafeStringify");f();var Kxe=require("crypto");var EF=new Uint8Array(256),bF=EF.length;function OZ(){return bF>EF.length-16&&((0,Kxe.randomFillSync)(EF),bF=0),EF.slice(bF,bF+=16)}s(OZ,"rng");f();f();var Jxe=require("crypto"),UZ={randomUUID:Jxe.randomUUID};function Hst(t,e,n){if(UZ.randomUUID&&!e&&!t)return UZ.randomUUID();t=t||{};let r=t.random??t.rng?.()??OZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Yxe(r)}s(Hst,"v4");var an=Hst;var dM=qe(ri());function QS(t){return t===1}s(QS,"isRestricted");var zat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],u8=8192,Yat=21;var Ll=class{static{s(this,"TelemetryReporters")}getReporter(e,n=0){return QS(n)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(US(e))return this.reporterRestricted;if(H_(e))return new FB}getFTReporter(e){if(_Ie(e))return this.reporterFT;if(H_(e))return new FB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(n=>n?.dispose()))}},Kat=I.Object({},{additionalProperties:I.String()}),Jat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),Xat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Zat(t){return Xat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Zat,"isOomError");function elt(t){return NB(t)?"network":Zat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(elt,"getErrorType");var or=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=hs.Compile(Kat)}static{this.validateTelemetryMeasurements=hs.Compile(Jat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,n,r){this.properties=e,this.measurements=n,this.issuedTime=r}static createAndMarkAsIssued(e,n){return new t(e||{},n||{},Qs())}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Qs())}async extendWithExpTelemetry(e){let{filters:n,exp:r}=await e.get(Rt).getFallbackExpAndFilters();r.addToTelemetry(this),n.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=og(e.get(Jn).getEditorInfo()),this.properties.editor_plugin_version=og(e.get(Jn).getEditorPluginInfo());let n=e.get(Ko);this.properties.client_machineid=n.machineId,this.properties.client_sessionid=n.sessionId,this.properties.copilot_version=`copilot/${TI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let r=e.get(Jn);this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=og(r.getEditorInfo());let i=e.get(Kr);this.properties.fetcher=i.name;let o=e.get(mc).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let n=DIe(e);n["copilot.build"]=PIe(e),n["copilot.buildType"]=Ag(e),this.properties={...this.properties,...n}}extendWithRequestId(e){let n={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...n}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,n){if(QS(e))return n;let r={};for(let i in n)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(r[i]=n[i]);return r}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let n={};for(let r in e){let i=t.keysExemptedFromSanitization.includes(r)?r:r.replace(/\./g,"_");n[i]=e[r]}return n}static multiplexProperties(e){let n={...e};for(let r in e){let i=e[r],o=i?.length??0;if(o>u8){let a=0,l=0;for(;o>0&&l<Yat;){l+=1;let c=r;l>1&&(c=r+"_"+(l<10?"0":"")+l);let u=a+u8;o<u8&&(u=a+o),n[c]=i.slice(a,u),o-=u8,a+=u8}}}return n}updateMeasurements(e){let n=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=n,this.displayedTime!==void 0){let r=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}this.measurements.current_time===void 0&&(this.measurements.current_time=rlt(e))}validateData(e,n){let r;if(t.validateTelemetryProperties.Check(this.properties)||(r={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);r===void 0?r={problem:"measurements",error:i}:(r.problem="both",r.error+=`; ${i}`)}if(r===void 0)return!0;if(H_(e))throw new Error(`Invalid telemetry data: ${r.problem} ${r.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return II(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:r.problem,validationError:r.error}),n),QS(n)&&II(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:r.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,n,r,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),r==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,n)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,SIe(e))}},gg=class t extends or{static{s(this,"TelemetryWithExp")}constructor(e,n,r,i){super(e,n,r),this.filtersAndExp=i}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new sI({}),exp:yf.createEmptyConfig()})}};function d8(t,e,n,r){t.get(Ll).getReporter(t,e)?.sendTelemetryEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(d8,"sendTelemetryEvent");function tlt(t,e,n,r){t.get(Ll).getReporter(t,e)?.sendTelemetryErrorEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(tlt,"sendTelemetryErrorEvent");function nlt(t,e,n,r){t.get(Ll).getFTReporter(t)?.sendTelemetryEvent(n,or.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(nlt,"sendFTTelemetryEvent");function OS(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,n)=>e+n.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(OS,"telemetrizePromptLength");function Qs(){return performance.now()}s(Qs,"now");function rlt(t){return Math.floor(t/1e3)}s(rlt,"nowSeconds");function US(t){return t.get(lc).optedIn}s(US,"shouldSendRestricted");function _Ie(t){return t.get(lc).ftFlag!==""}s(_Ie,"shouldSendFinetuningTelemetry");function Bt(t,e,n,r){return t.get(ba).register(ilt(t,e,Qs(),n?.extendedBy(),r))}s(Bt,"telemetry");async function ilt(t,e,n,r,i=0){let o=r||or.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",n),(!QS(i)||US(t))&&d8(t,i,e,o),QS(i)&&zat.includes(e)&&_Ie(t)&&nlt(t,i,e,o)}s(ilt,"_telemetry");function nL(t,e){return t.get(ba).register(olt(t,e,Qs()))}s(nL,"telemetryExpProblem");async function olt(t,e,n){let r="expProblem",i=or.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",n),d8(t,0,r,i)}s(olt,"_telemetryExpProblem");function hte(t,e,n,r){return t.get(ba).register(slt(t,e,n,r))}s(hte,"telemetryRaw");async function slt(t,e,n,r){let i={...n,...SIe(t)};d8(t,0,e,{properties:i,measurements:r})}s(slt,"_telemetryRaw");function SIe(t){let e=t.get(Jn),n={unique_id:an(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:og(e.getEditorInfo())},r=t.get(lc);return r.trackingId&&(n.copilot_trackingId=r.trackingId),r.organizationsList&&(n.organizations_list=r.organizationsList),r.enterpriseList&&(n.enterprise_list=r.enterpriseList),r.sku&&(n.sku=r.sku),n}s(SIe,"createRequiredProperties");var mte=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let n;try{n=JSON.stringify(e)}catch{n=String(e)}super(n),this.name="CopilotNonError",this.code=(0,uM.SHA256)(uM.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function wa(t,e,n,r,i){return t.get(ba).register(RIe(t,e,Qs(),n,{...r},i))}s(wa,"telemetryException");async function RIe(t,e,n,r,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Mc(a)||a instanceof cs||a instanceof dM.ConnectionError||a instanceof dM.ResponseError)return}else{if(a=new mte(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(Jn).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=US(t),d=Bye(a,c,u),p=elt(a),m=p==="exception",h=or.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",n),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=GX(y.value):y.value="[redacted]");if(o??=Cye(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},r&&(o.context["#origin"]=r,o.transaction=r),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=kye(a,c),v=or.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",n),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,d8(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(sg).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),d8(t,0,`error.${p}`,h)}s(RIe,"_telemetryException");function Vc(t,e,n,r){let i=s(async(...o)=>{try{await e(...o)}catch(a){await RIe(t,a,Qs(),n,r)}},"wrapped");return(...o)=>t.get(ba).register(i(...o))}s(Vc,"telemetryCatch");function II(t,e,n,r){return t.get(ba).register(alt(t,e,Qs(),n?.extendedBy(),r))}s(II,"telemetryError");async function alt(t,e,n,r,i=0){if(QS(i)&&!US(t))return;let o=r||or.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",n),tlt(t,i,e,o)}s(alt,"_telemetryError");function kIe(t,e,n,r,i){let o=or.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(n.logprobs)for(let[a,l]of Object.entries(n.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(r),Bt(t,"engine.completion",o,1)}s(kIe,"logEngineCompletion");function BIe(t,e,n){let r={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=n.properties["request.option.extra"]?JSON.parse(n.properties["request.option.extra"]):{};o.context=e.context,r["request.option.extra"]=JSON.stringify(o)}let i=n.extendedBy(r);return Bt(t,"engine.prompt",i,1)}s(BIe,"logEnginePrompt");f();f();var NIe=qe(ri()),LIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),gte;(n=>(n.method="github/didChangeAuth",n.type=new NIe.ProtocolNotificationType(n.method)))(gte||={});f();var FIe=qe(ri()),Ate;(n=>(n.method="copilot/ipCodeCitation",n.type=new FIe.NotificationType(n.method)))(Ate||={});f();var MIe=qe(ri()),fM;(n=>(n.method="context/update",n.type=new MIe.ProtocolRequestType(n.method)))(fM||={});f();f();var jx="Cancelled";f();var sr=qe(ri()),f8=I.String(),md=I.Object({uri:f8}),wI=I.Intersect([md,I.Object({version:I.Optional(I.Integer())})]),ghn=I.Required(wI),Fl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),_a=I.Object({start:Fl,end:Fl}),yte=I.Union([I.Integer(),I.String()]),Ahn=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var QIe=qe(ri()),Cte;(n=>(n.method="textDocument/didFocus",n.type=new QIe.ProtocolNotificationType(n.method)))(Cte||={});f();var llt=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),clt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),OIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),UIe=I.Object({editorInfo:I.Optional(OIe),editorPluginInfo:I.Optional(OIe),relatedPluginInfo:I.Optional(I.Array(clt)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(llt)),githubAppId:I.Optional(I.String())});f();var p8=qe(ri());var pM=(n=>(n[n.Invoked=1]="Invoked",n[n.Automatic=2]="Automatic",n))(pM||{}),ult=I.Enum(pM),dlt=I.Object({triggerKind:ult,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:_a,tooltipSignature:I.Optional(I.String())}))}),qIe=I.Object({textDocument:wI,position:Fl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:dlt,data:I.Optional(I.Unknown())}),xte;(n=>(n.method="textDocument/inlineCompletion",n.type=new p8.ProtocolRequestType(n.method)))(xte||={});var WIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),GIe=I.Object({item:WIe}),vte;(n=>(n.method="textDocument/didShowCompletion",n.type=new p8.ProtocolNotificationType(n.method)))(vte||={});var HIe=I.Object({item:WIe,acceptedLength:I.Integer({minimum:1})}),bte;(n=>(n.method="textDocument/didPartiallyAcceptCompletion",n.type=new p8.ProtocolNotificationType(n.method)))(bte||={});f();var jIe=qe(ri()),Ete;(n=>(n.method="textDocument/inlineCompletionPrompt",n.type=new jIe.ProtocolRequestType(n.method)))(Ete||={});f();var VIe=qe(ri()),$Ie=I.Object({textDocument:wI,position:Fl}),flt=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),zIe=I.Object({item:flt}),Ite;(n=>(n.method="textDocument/didShowInlineEdit",n.type=new VIe.ProtocolNotificationType(n.method)))(Ite||={});f();var mM=qe(ri());var YIe=I.Object({textDocument:wI,position:Fl,partialResultToken:I.Optional(yte),workDoneToken:I.Optional(yte)}),hM;(r=>(r.method="textDocument/copilotPanelCompletion",r.type=new mM.ProtocolRequestType(r.method),r.partialResult=new mM.ProgressType))(hM||={});f();var KIe=qe(ri()),Tte;(n=>(n.method="copilot/related",n.type=new KIe.ProtocolRequestType(n.method)))(Tte||={});f();var JIe=qe(ri()),wte;(n=>(n.method="statusNotification",n.type=new JIe.ProtocolNotificationType(n.method)))(wte||={});var XIe=qe(require("events"));var ym=class{static{s(this,"CopilotTokenNotifier")}#e=new XIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...n){return this.#e.emit(e,...n)}on(e,n,r){let i=Vc(e,r,`event.${n}`);return this.#e.on(n,i),sr.Disposable.create(()=>this.#e.off(n,i))}};function Ps(t,e){return t.get(ym).on(t,"CopilotToken",e)}s(Ps,"onCopilotToken");function m8(t,e){return t.get(ym).emitToken(e)}s(m8,"emitCopilotToken");function ZIe(t){return t.get(ym).lastToken}s(ZIe,"getLastCopilotToken");f();var gM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function _te(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(n=>t.includes(n))}s(_te,"findKnownOrg");function e2e(t){let e=t.organization_list??[];return _te(e)??""}s(e2e,"getUserKind");f();f();var _I=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(_I||{}),Va=class{static{s(this,"LogTarget")}},yg=class{static{s(this,"TelemetryLogSender")}},Tt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,n,...r){e.get(Va).logIt(e,n,this.category,...r)}debug(e,...n){this.log(e,4,...n)}info(e,...n){this.log(e,3,...n)}warn(e,...n){this.log(e,2,...n)}error(e,...n){e.get(yg).sendError(e,this.category,...n),this.log(e,1,...n)}exception(e,n,r){if(n instanceof Error&&n.name==="Canceled"&&n.message==="Canceled")return;let i=r;r.startsWith(".")&&(i=r.substring(1),r=`${this.category}${r}`),e.get(yg).sendException(e,n,r);let o=n instanceof Error?n:new Error(`Non-error thrown: ${String(n)}`);this.log(e,1,`${i}:`,o)}},ar=new Tt("default");f();var $a=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,n,...r){return this.showWarningMessage(n,...r)}};f();var hc=class{static{s(this,"UrlOpener")}};var plt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],t2e="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",n2e="https://gh.io/copilot-network-errors",Iu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,n){if(!(n instanceof Error))return;let r=n;r.code&&plt.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.notifiedErrorCodes.push(r.code),this.displayCertificateErrorNotification(e,r))}async displayCertificateErrorNotification(e,n){new Tt("certificates").error(e,`${t2e} Please visit ${n2e} to learn more. Original cause:`,n);let r={title:"Learn more"};return e.get($a).showWarningMessage(t2e,r).then(i=>{if(i?.title===r.title)return e.get(hc).open(n2e)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function AM(){return typeof process>"u"}s(AM,"isWeb");var Ste=class extends rg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Bf(t,e,n,r={}){r={...r,headers:{Authorization:`Bearer ${e.accessToken}`,...AM()?{}:tm(t),...r.headers}};let i=await t.get(Kr).fetch(new URL(n,e.apiUrl).href,r);if(i.status>=500)throw new rg(i);if(!i.headers.get("x-github-request-id"))throw new Ste(i);return i}s(Bf,"apiFetch");f();f();var o2e=require("os"),yM=require("path");f();var r2e;(()=>{"use strict";var t={975:H=>{function G($){if(typeof $!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify($))}s(G,"e");function ue($,O){for(var Y,K="",le=0,te=-1,pe=0,he=0;he<=$.length;++he){if(he<$.length)Y=$.charCodeAt(he);else{if(Y===47)break;Y=47}if(Y===47){if(!(te===he-1||pe===1))if(te!==he-1&&pe===2){if(K.length<2||le!==2||K.charCodeAt(K.length-1)!==46||K.charCodeAt(K.length-2)!==46){if(K.length>2){var Qe=K.lastIndexOf("/");if(Qe!==K.length-1){Qe===-1?(K="",le=0):le=(K=K.slice(0,Qe)).length-1-K.lastIndexOf("/"),te=he,pe=0;continue}}else if(K.length===2||K.length===1){K="",le=0,te=he,pe=0;continue}}O&&(K.length>0?K+="/..":K="..",le=2)}else K.length>0?K+="/"+$.slice(te+1,he):K=$.slice(te+1,he),le=he-te-1;te=he,pe=0}else Y===46&&pe!==-1?++pe:pe=-1}return K}s(ue,"r");var ie={resolve:s(function(){for(var $,O="",Y=!1,K=arguments.length-1;K>=-1&&!Y;K--){var le;K>=0?le=arguments[K]:($===void 0&&($=process.cwd()),le=$),G(le),le.length!==0&&(O=le+"/"+O,Y=le.charCodeAt(0)===47)}return O=ue(O,!Y),Y?O.length>0?"/"+O:"/":O.length>0?O:"."},"resolve"),normalize:s(function($){if(G($),$.length===0)return".";var O=$.charCodeAt(0)===47,Y=$.charCodeAt($.length-1)===47;return($=ue($,!O)).length!==0||O||($="."),$.length>0&&Y&&($+="/"),O?"/"+$:$},"normalize"),isAbsolute:s(function($){return G($),$.length>0&&$.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var $,O=0;O<arguments.length;++O){var Y=arguments[O];G(Y),Y.length>0&&($===void 0?$=Y:$+="/"+Y)}return $===void 0?".":ie.normalize($)},"join"),relative:s(function($,O){if(G($),G(O),$===O||($=ie.resolve($))===(O=ie.resolve(O)))return"";for(var Y=1;Y<$.length&&$.charCodeAt(Y)===47;++Y);for(var K=$.length,le=K-Y,te=1;te<O.length&&O.charCodeAt(te)===47;++te);for(var pe=O.length-te,he=le<pe?le:pe,Qe=-1,ke=0;ke<=he;++ke){if(ke===he){if(pe>he){if(O.charCodeAt(te+ke)===47)return O.slice(te+ke+1);if(ke===0)return O.slice(te+ke)}else le>he&&($.charCodeAt(Y+ke)===47?Qe=ke:ke===0&&(Qe=0));break}var Ze=$.charCodeAt(Y+ke);if(Ze!==O.charCodeAt(te+ke))break;Ze===47&&(Qe=ke)}var Fe="";for(ke=Y+Qe+1;ke<=K;++ke)ke!==K&&$.charCodeAt(ke)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+O.slice(te+Qe):(te+=Qe,O.charCodeAt(te)===47&&++te,O.slice(te))},"relative"),_makeLong:s(function($){return $},"_makeLong"),dirname:s(function($){if(G($),$.length===0)return".";for(var O=$.charCodeAt(0),Y=O===47,K=-1,le=!0,te=$.length-1;te>=1;--te)if((O=$.charCodeAt(te))===47){if(!le){K=te;break}}else le=!1;return K===-1?Y?"/":".":Y&&K===1?"//":$.slice(0,K)},"dirname"),basename:s(function($,O){if(O!==void 0&&typeof O!="string")throw new TypeError('"ext" argument must be a string');G($);var Y,K=0,le=-1,te=!0;if(O!==void 0&&O.length>0&&O.length<=$.length){if(O.length===$.length&&O===$)return"";var pe=O.length-1,he=-1;for(Y=$.length-1;Y>=0;--Y){var Qe=$.charCodeAt(Y);if(Qe===47){if(!te){K=Y+1;break}}else he===-1&&(te=!1,he=Y+1),pe>=0&&(Qe===O.charCodeAt(pe)?--pe==-1&&(le=Y):(pe=-1,le=he))}return K===le?le=he:le===-1&&(le=$.length),$.slice(K,le)}for(Y=$.length-1;Y>=0;--Y)if($.charCodeAt(Y)===47){if(!te){K=Y+1;break}}else le===-1&&(te=!1,le=Y+1);return le===-1?"":$.slice(K,le)},"basename"),extname:s(function($){G($);for(var O=-1,Y=0,K=-1,le=!0,te=0,pe=$.length-1;pe>=0;--pe){var he=$.charCodeAt(pe);if(he!==47)K===-1&&(le=!1,K=pe+1),he===46?O===-1?O=pe:te!==1&&(te=1):O!==-1&&(te=-1);else if(!le){Y=pe+1;break}}return O===-1||K===-1||te===0||te===1&&O===K-1&&O===Y+1?"":$.slice(O,K)},"extname"),format:s(function($){if($===null||typeof $!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof $);return function(O,Y){var K=Y.dir||Y.root,le=Y.base||(Y.name||"")+(Y.ext||"");return K?K===Y.root?K+le:K+"/"+le:le}(0,$)},"format"),parse:s(function($){G($);var O={root:"",dir:"",base:"",ext:"",name:""};if($.length===0)return O;var Y,K=$.charCodeAt(0),le=K===47;le?(O.root="/",Y=1):Y=0;for(var te=-1,pe=0,he=-1,Qe=!0,ke=$.length-1,Ze=0;ke>=Y;--ke)if((K=$.charCodeAt(ke))!==47)he===-1&&(Qe=!1,he=ke+1),K===46?te===-1?te=ke:Ze!==1&&(Ze=1):te!==-1&&(Ze=-1);else if(!Qe){pe=ke+1;break}return te===-1||he===-1||Ze===0||Ze===1&&te===he-1&&te===pe+1?he!==-1&&(O.base=O.name=pe===0&&le?$.slice(1,he):$.slice(pe,he)):(pe===0&&le?(O.name=$.slice(1,te),O.base=$.slice(1,he)):(O.name=$.slice(pe,te),O.base=$.slice(pe,he)),O.ext=$.slice(te,he)),pe>0?O.dir=$.slice(0,pe-1):le&&(O.dir="/"),O},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,H.exports=ie}},e={};function n(H){var G=e[H];if(G!==void 0)return G.exports;var ue=e[H]={exports:{}};return t[H](ue,ue.exports,n),ue.exports}s(n,"r"),n.d=(H,G)=>{for(var ue in G)n.o(G,ue)&&!n.o(H,ue)&&Object.defineProperty(H,ue,{enumerable:!0,get:G[ue]})},n.o=(H,G)=>Object.prototype.hasOwnProperty.call(H,G),n.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var r={};let i;n.r(r),n.d(r,{URI:s(()=>m,"URI"),Utils:s(()=>ae,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,G){if(!H.scheme&&G)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(G){return G instanceof m||!!G&&typeof G.authority=="string"&&typeof G.fragment=="string"&&typeof G.path=="string"&&typeof G.query=="string"&&typeof G.scheme=="string"&&typeof G.fsPath=="string"&&typeof G.with=="function"&&typeof G.toString=="function"}scheme;authority;path;query;fragment;constructor(G,ue,ie,$,O,Y=!1){typeof G=="object"?(this.scheme=G.scheme||u,this.authority=G.authority||u,this.path=G.path||u,this.query=G.query||u,this.fragment=G.fragment||u):(this.scheme=function(K,le){return K||le?K:"file"}(G,Y),this.authority=ue||u,this.path=function(K,le){switch(K){case"https":case"http":case"file":le?le[0]!==d&&(le=d+le):le=d}return le}(this.scheme,ie||u),this.query=$||u,this.fragment=O||u,c(this,Y))}get fsPath(){return E(this,!1)}with(G){if(!G)return this;let{scheme:ue,authority:ie,path:$,query:O,fragment:Y}=G;return ue===void 0?ue=this.scheme:ue===null&&(ue=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),$===void 0?$=this.path:$===null&&($=u),O===void 0?O=this.query:O===null&&(O=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),ue===this.scheme&&ie===this.authority&&$===this.path&&O===this.query&&Y===this.fragment?this:new g(ue,ie,$,O,Y)}static parse(G,ue=!1){let ie=p.exec(G);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),ue):new g(u,u,u,u,u)}static file(G){let ue=u;if(i&&(G=G.replace(/\\/g,d)),G[0]===d&&G[1]===d){let ie=G.indexOf(d,2);ie===-1?(ue=G.substring(2),G=d):(ue=G.substring(2,ie),G=G.substring(ie)||d)}return new g("file",ue,G,u,u)}static from(G){let ue=new g(G.scheme,G.authority,G.path,G.query,G.fragment);return c(ue,!0),ue}toString(G=!1){return _(this,G)}toJSON(){return this}static revive(G){if(G){if(G instanceof m)return G;{let ue=new g(G);return ue._formatted=G.external,ue._fsPath=G._sep===h?G.fsPath:null,ue}}return G}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(G=!1){return G?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let G={$mid:1};return this._fsPath&&(G.fsPath=this._fsPath,G._sep=h),this._formatted&&(G.external=this._formatted),this.path&&(G.path=this.path),this.scheme&&(G.scheme=this.scheme),this.authority&&(G.authority=this.authority),this.query&&(G.query=this.query),this.fragment&&(G.fragment=this.fragment),G}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,G,ue){let ie,$=-1;for(let O=0;O<H.length;O++){let Y=H.charCodeAt(O);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||G&&Y===47||ue&&Y===91||ue&&Y===93||ue&&Y===58)$!==-1&&(ie+=encodeURIComponent(H.substring($,O)),$=-1),ie!==void 0&&(ie+=H.charAt(O));else{ie===void 0&&(ie=H.substr(0,O));let K=y[Y];K!==void 0?($!==-1&&(ie+=encodeURIComponent(H.substring($,O)),$=-1),ie+=K):$===-1&&($=O)}}return $!==-1&&(ie+=encodeURIComponent(H.substring($))),ie!==void 0?ie:H}s(v,"m");function b(H){let G;for(let ue=0;ue<H.length;ue++){let ie=H.charCodeAt(ue);ie===35||ie===63?(G===void 0&&(G=H.substr(0,ue)),G+=y[ie]):G!==void 0&&(G+=H[ue])}return G!==void 0?G:H}s(b,"y");function E(H,G){let ue;return ue=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?G?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(ue=ue.replace(/\//g,"\\")),ue}s(E,"v");function _(H,G){let ue=G?b:v,ie="",{scheme:$,authority:O,path:Y,query:K,fragment:le}=H;if($&&(ie+=$,ie+=":"),(O||$==="file")&&(ie+=d,ie+=d),O){let te=O.indexOf("@");if(te!==-1){let pe=O.substr(0,te);O=O.substr(te+1),te=pe.lastIndexOf(":"),te===-1?ie+=ue(pe,!1,!1):(ie+=ue(pe.substr(0,te),!1,!1),ie+=":",ie+=ue(pe.substr(te+1),!1,!0)),ie+="@"}O=O.toLowerCase(),te=O.lastIndexOf(":"),te===-1?ie+=ue(O,!1,!0):(ie+=ue(O.substr(0,te),!1,!0),ie+=O.substr(te))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let te=Y.charCodeAt(1);te>=65&&te<=90&&(Y=`/${String.fromCharCode(te+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let te=Y.charCodeAt(0);te>=65&&te<=90&&(Y=`${String.fromCharCode(te+32)}:${Y.substr(2)}`)}ie+=ue(Y,!0,!1)}return K&&(ie+="?",ie+=ue(K,!1,!1)),le&&(ie+="#",ie+=G?le:v(le,!1,!1)),ie}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(B)?H.replace(B,G=>k(G)):H}s(N,"w");var U=n(975);let re=U.posix||U,me="/";var ae;(function(H){H.joinPath=function(G,...ue){return G.with({path:re.join(G.path,...ue)})},H.resolvePath=function(G,...ue){let ie=G.path,$=!1;ie[0]!==me&&(ie=me+ie,$=!0);let O=re.resolve(ie,...ue);return $&&O[0]===me&&!G.authority&&(O=O.substring(1)),G.with({path:O})},H.dirname=function(G){if(G.path.length===0||G.path===me)return G;let ue=re.dirname(G.path);return ue.length===1&&ue.charCodeAt(0)===46&&(ue=""),G.with({path:ue})},H.basename=function(G){return re.basename(G.path)},H.extname=function(G){return re.extname(G.path)}})(ae||(ae={})),r2e=r})();var{URI:Vx,Utils:h8}=r2e;function s2e(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+s2e(t.substring(3)):t}}s(s2e,"decodeURIComponentGraceful");var i2e=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Rte(t){return t.match(i2e)?t.replace(i2e,e=>s2e(e)):t}s(Rte,"percentDecode");function pl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Vx.file(t).toString()}s(pl,"makeFsUri");function SI(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Vx.parse(e[1]+e[2],!0):Vx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(SI,"parseUri");function a2e(t){return SI(t),t}s(a2e,"validateUri");function ml(t){try{return SI(t).toString()}catch{return t}}s(ml,"normalizeUri");var l2e=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=SI(t);if(!l2e.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,o2e.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,yM.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Go(t){try{return aa(t)}catch{return}}s(Go,"getFsPath");function c2e(t){let e=Go(t);if(e)return Vx.file(e).toString()}s(c2e,"getFsUri");function RI(t,...e){let n,r=Go(t);return r?n=pl((0,yM.resolve)(r,...e)):n=h8.resolvePath(SI(t),...e.map(i=>u2e(i))).toString(),typeof t=="string"?n:{uri:n}}s(RI,"resolveFilePath");function ko(t,...e){let n=h8.joinPath(SI(t),...e.map(u2e)).toString();return typeof t=="string"?n:{uri:n}}s(ko,"joinPath");function u2e(t){return mlt(t)?t.replaceAll("\\","/"):t}s(u2e,"pathToURIPath");function mlt(t){return/^[^/\\]*\\/.test(t)}s(mlt,"isWinPath");function Ti(t){return Rte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function f0(t){let e=h8.dirname(SI(t)),n;return l2e.has(e.scheme)&&e.scheme!=="file"?n=e.with({scheme:"file",fragment:""}).toString():n=e.toString(),typeof t=="string"?n:{uri:n}}s(f0,"dirname");function d2e(t){return h8.extname(SI(t))}s(d2e,"extname");var Tu=class{static{s(this,"NetworkConfiguration")}};function CM(t,e){try{let n=new URL(e??"");if(n.protocol==="https:"||!Bte(t)&&n.protocol==="http:")return n.href}catch{}}s(CM,"ensurePermittedUrl");var g8={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function kte(t,e,n){if(n&&nm(t)){for(let r of n){let i=ui(t,r);if(i)return i}return}for(let r of e){let i=ui(t,r);if(i)return i}}s(kte,"urlConfigOverride");function hlt(t,e){switch(e){case"api":return kte(t,[wt.DebugOverrideCapiUrl,wt.DebugOverrideCapiUrlLegacy],[wt.DebugTestOverrideCapiUrl,wt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return kte(t,[wt.DebugOverrideProxyUrl,wt.DebugOverrideProxyUrlLegacy],[wt.DebugTestOverrideProxyUrl,wt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Bte(t))return kte(t,[wt.DebugSnippyOverrideUrl])}}s(hlt,"getEndpointOverrideUrl");function $x(t,e,n,...r){let i=hlt(t,n)??e.endpoints[n];return ko(i,...r)}s($x,"getEndpointUrl");function xM(t){return ZIe(t)?.endpoints??g8}s(xM,"getLastKnownEndpoints");function f2e(t,e){if(e&&!CM(t,e)){t.get($a).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(Tu).setConfiguredUrls(t,{serverUrl:e})}s(f2e,"updateServerUrl");var p0=new Tt("auth"),h2e=60;function zx(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",n=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?n||=e.replace("://","://api."):n?.includes("://api.")&&(e||=n.replace("://api.","://")),(!e||!n)&&(e="https://github.com/",n="https://api.github.com/"),{apiUrl:n,serverUrl:e}}s(zx,"fillGitHubUrls");function p2e(){return Math.floor(Date.now()/1e3)}s(p2e,"nowSeconds");async function vM(t,e){let n=or.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let r=await glt(t,e),i=await r.json(),o=i.user_notification;if(m2e(t,o,e),r.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return p0.info(t,d),II(t,"auth.unknown_401",n),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!r.ok||!i.token){p0.info(t,`Invalid copilot token: missing token: ${r.status} ${r.statusText}`),II(t,"auth.invalid_token",n.extendedBy({status:r.status.toString(),status_text:r.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&m2e(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=p2e()+i.refresh_in+h2e;let l=await Dte(t,e),c;l.ok&&(c=await l.json());let u=new kI(i,c);return m8(t,u),Bt(t,"auth.new_token",n.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:p2e()})),{kind:"success",copilotToken:u}}s(vM,"authFromGitHubSession");async function glt(t,e){let n={"X-GitHub-Api-Version":"2024-12-15"},r=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Bf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(glt,"fetchCopilotToken");async function Dte(t,e){let n={"X-GitHub-Api-Version":ig},r=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Bf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(Dte,"fetchCopilotUserInfo");function m2e(t,e,n){e&&t.get($a).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async r=>{let i=r?.title===e.title,o=i||r?.title==="Dismiss";if(i){let a=t.get(Jn).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(hc).open(l)}e.notification_id&&o&&await Alt(t,e.notification_id,n)}).catch(r=>{p0.exception(t,r,"copilotToken.notification")})}s(m2e,"notifyUser");async function Alt(t,e,n){let r=n.devOverride?.notificationUrl??"copilot_internal/notification",i=await Bf(t,n,r,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&p0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Alt,"sendNotificationResultToGitHub");var kI=class{constructor(e,n){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new gM(n)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??g8}needsRefresh(){return(this.envelope.expires_at-h2e)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return _te(this.organization_list||[])!==void 0}parseToken(e){let n=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");n.set(a,l)}return n}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();var A8="apps",Pte="hosts",BI=class{constructor(e,n){this.ctx=e;this.persistenceManager=n}static{s(this,"AuthPersistence")}async getAuthRecord(e){let n=this.getAuthAuthority(e),r=e.githubAppId,i=await this.persistenceManager.read(A8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:r}));if(!r&&!i?(r=Cm,i=await this.persistenceManager.read(A8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:r}))):r??=this.ctx.get(Ml).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:r,authAuthority:n};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(n)}async legacyAuthRecordMaybe(e){let n=await this.persistenceManager.read(Pte,e);if(n)return{...n,githubAppId:Cm}}async saveAuthRecord(e){await this.persistenceManager.update(A8,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let n=this.getAuthAuthority(e),r=await this.getAuthRecord({authAuthority:n});r&&(r.githubAppId===Cm&&await this.persistenceManager.delete(Pte,n),await this.persistenceManager.delete(A8,this.authRecordKey(this.ctx,{authAuthority:n})),await this.persistenceManager.delete(A8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:Cm})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(Pte)}authRecordKey(e,n){let r=n.githubAppId??e.get(Ml).findAppIdToAuthenticate();return`${this.getAuthAuthority(n)}:${r}`}getAuthAuthority(e){return e.authAuthority}};f();f();var x2e=qe(A2e()),v2e=qe(C2e()),m0=qe(require("os"));var qS=class{constructor(e,n,r,i,o=!1){this.ctx=e;this.namespace=n;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let n=e.getTokenValue("tid");n!==void 0&&(this.tags["ai.user.id"]=n)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,n)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let r=e.headers??{};r["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(r.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:r,body:e.data};this.ctx.get(Kr).fetch(e.urlString,i).then(o=>o.text().then(a=>{n(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{ar.debug(this.ctx,"Error sending telemetry",o),n(0,{})})},"sendPOST")};this.client=new v2e.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:r,extensionConfig:{[x2e.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=ylt(e),this.commonProperties=Clt(e),this.#e=Ps(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,n,r){n={...n,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...n,...r},baseType:"EventData",baseData:{name:i,properties:n,measurements:r}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(this.qualifyEventName(e),n,r)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function ylt(t){let e={},n=t.get(Ko);e["ai.session.id"]=n.sessionId;let r=t.get(lc);return r.trackingId&&(e["ai.user.id"]=r.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${m0.type()} ${m0.release()}`,e["ai.device.osArchitecture"]=m0.arch(),e["ai.device.osPlatform"]=m0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(zi).getVersion(),e}s(ylt,"getTags");function Clt(t){let e={};e.common_os=m0.platform(),e.common_platformversion=m0.release(),e.common_arch=m0.arch(),e.common_cpu=Array.from(new Set(m0.cpus().map(r=>r.model))).join();let n=t.get(Ko);return e.common_vscodemachineid=n.machineId,e.common_vscodesessionid=n.sessionId,e.common_uikind=n.uiKind,e.common_remotename=n.remoteName,e.common_isnewappinstall="",e}s(Clt,"getCommonProperties");var xlt="7d7048df-6dd0-4048-bb23-b716c1461f8f",vlt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",blt="f0000000-0000-0000-0000-000000000000";function b2e(t){return new URL(t).hostname==="github.com"?g8.telemetry:t.replace("://","://copilot-telemetry-service.")}s(b2e,"getEndpointForServerUrl");var hd=class{constructor(e,n){this.ctx=e;this.namespace=n;this.serverUrl="https://github.com/";this.rootUrl=b2e(this.serverUrl);this.shuttingDown=new Set;Ps(e,r=>this.updateServiceEndpoints(r.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let n=this.ctx;this._enabled=e;let r=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:r,enabled:this._enabled},e)){let i=n.get(Ll);i.setReporter(new qS(n,this.namespace,r,xlt)),i.setRestrictedReporter(new qS(n,this.namespace,r,vlt)),i.setFTReporter(new qS(n,this.namespace,r,blt,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Ll).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=b2e(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var Sr=class{constructor(e,n){this.ctx=e;this.env=n;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Gn)}get authPersistence(){return this.ctx.get(BI)}getConfiguredUrls(){return this.ctx.get(Tu).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let n=e?.localChecksOnly??!1,r;return e?.githubAppId!==void 0?r=await this.getPersistedSession(e):r=await this.getSession(),r===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):n?{status:"MaybeOK",user:r.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(r,e?.freshSignIn??!1),user:r.login})}async getTokenWithSignUpLimited(e,n){try{await this._copilotTokenManager.getToken()}catch(r){if(r instanceof Df)return n&&r.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):r.result.reason==="HTTP401"?"NotSignedIn":r.result.reason;throw r}return"OK"}async getSession({authAuthority:e}={}){let n=Elt(this.env)??this.#e;if(n!==null){if(n){let r={...n,...zx(n)};if(!e||e===new URL(r.serverUrl).hostname)return r}return await this.getPersistedSession()}}async getPersistedSession(e){let n=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(n===void 0)return;let r={...this.getConfiguredUrls(),accessToken:n.oauth_token,login:n.user,githubAppId:n.githubAppId};return n.dev_override&&Ag(this.ctx)==="dev"&&(r.devOverride={copilotTokenUrl:n.dev_override.copilot_token_url,copilotUserInfoUrl:n.dev_override.copilot_user_info_url,notificationUrl:n.dev_override.notification_url,contentRestrictionsUrl:n.dev_override.content_restrictions_url}),r}async signUpLimited(e){let n="copilot_internal/subscribe_limited_user";try{return(await(await Bf(this.ctx,e,n,{method:"POST",headers:{"X-GitHub-Api-Version":ig},body:JSON.stringify({restricted_telemetry:this.ctx.get(hd).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(r){return p0.exception(this.ctx,r,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:n,githubAppId:r,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:n,githubAppId:r,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,n=!0){this.#e=e,n&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Elt(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Elt,"getSessionFromEnv");f();var Ji=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#r;#n=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,n,r){this.#t===e&&this.#i===n&&!r&&!this.#r&&!this.#n||(this.#t=e,this.#i=n,this.#r=r,this.#n=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,n){this.forceStatus("Error",e,n)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#r};this.didChange(e)}},IM=class extends Ji{static{s(this,"NoOpStatusReporter")}didChange(){}};var Gn=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Df=class extends cs{constructor(n){super(n.message??"");this.result=n}static{s(this,"TokenResultError")}},TM=class extends Gn{constructor(n,r=!1){super(r);this.ctx=n;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let n=await this.getGitHubSession();if(!n)throw new Df({reason:"NotSignedIn"});if(!n.accessToken)throw new Df({reason:"HTTP401"});let r=await vM(this.ctx,n);if(r.kind==="failure"){if(r.message)throw new Df(r);let i=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw i.code=`CopilotToken.${r.reason}`,i}return r.copilotToken}async getToken(){if(!this.primed){let n=new Error("Token requested before initialization");if(E2e(this.ctx))throw n;p0.exception(this.ctx,n,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let n=this.fetchCopilotToken().then(r=>this.tokenPromise!==n?r:(this.token=r,this.tokenPromise=void 0,this.ctx.get(Ji).forceNormal(),this.token),r=>{if(this.tokenPromise!==n)throw r;this.tokenPromise=void 0;let i=this.ctx.get(Ji);if(r instanceof Df)switch(r.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(r.message||"No access to Copilot found.");break}else i.setWarning(String(r));throw r});this.tokenPromise=n}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(n){n!==void 0?(Bt(this.ctx,"auth.reset_token_"+n),p0.debug(this.ctx,`Resetting copilot token on HTTP error ${n}`)):p0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},WS=class extends TM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Sr).getSession()}};f();var Cg=class{static{s(this,"Clock")}now(){return new Date}};f();var xm=class{static{s(this,"ExpConfigMaker")}},y8=class extends xm{constructor(n={}){super();this.defaultFilters=n}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(n,r,i){let o=n.get(Kr),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",r.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return yf.createFallbackConfig(n,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return yf.createFallbackConfig(n,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return wa(n,m,"fetchExperiments"),yf.createFallbackConfig(n,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new yf(d.Parameters,u.AssignmentContext,p.join(";"))}},wM=class extends xm{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(yf.createEmptyConfig())}};f();f();var _M=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let n=this.getValue(e),r=this.getUpcomingValues(e);return[n,r]}},Nte=class extends _M{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},I2e=s(t=>new Nte(t),"DEFAULT_GRANULARITY"),SM=class extends _M{constructor(n,r=.5,i=new Date().setUTCHours(0,0,0,0)){super(n);this.prefix=n;this.fetchBeforeFactor=r;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(n){isNaN(n)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=n}setByCallBuckets(n){isNaN(n)?this.numByCallBuckets=void 0:this.numByCallBuckets=n}getValue(n){return this.prefix+this.getTimePeriodBucketString(n)+(this.numByCallBuckets?this.timeHash(n):"")}getTimePeriodBucketString(n){return this.timePeriodLengthMs?this.dateToTimePartString(n):""}getUpcomingValues(n){let r=[],i=this.getUpcomingTimePeriodBucketStrings(n),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)r.push(this.prefix+a+l);return r}getUpcomingTimePeriodBucketStrings(n){if(this.timePeriodLengthMs===void 0)return[""];if((n.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(n)];{let r=new Date(n.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(n),this.getTimePeriodBucketString(r)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(n=>n.toString())}timeHash(n){return this.numByCallBuckets==null?0:7883*(n.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(n){return this.timePeriodLengthMs==null?"":Math.floor((n.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var T2e="X-Copilot-ClientTimeBucket",RM=class{constructor(e,n){this.specs=new Map;this.prefix=e,this.clock=n,this.defaultGranularity=I2e(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[n,r]of this.specs.entries())if(e.extends(n))return r;return this.defaultGranularity}update(e,n,r){if(n=n>1?n:NaN,r=r>0?r:NaN,isNaN(n)&&isNaN(r))this.specs.delete(e);else{let i=new SM(this.prefix);isNaN(n)||i.setByCallBuckets(n),isNaN(r)||i.setTimePeriod(r*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let n=this.selectGranularity(e),[r,i]=n.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(T2e,r),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(T2e,o))}}};f();f();f();function Ilt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Ilt,"getIntegrationId");function Yx(t){let e={...tm(t),"X-GitHub-Api-Version":ig},n=Ilt(t.get(Jn));return n&&(e["Copilot-Integration-Id"]=n),e}s(Yx,"getCapiHeaders");function kM(t,e,...n){return $x(t,e,"api",...n)}s(kM,"getCapiUrl");async function DI(t,e){let n=await t.get(Gn).getToken(),r=kM(t,n,e),i={Authorization:`Bearer ${n.token}`,...Yx(t)};return await t.get(Kr).fetch(new URL(r).href,{method:"GET",headers:i})}s(DI,"fetchCapiUrl");async function w2e(t,e,n){let r=await t.get(Gn).getToken(),i=kM(t,r,e),o={Authorization:`Bearer ${r.token}`,...Yx(t)};return await t.get(Kr).fetch(new URL(i).href,{method:"POST",headers:o,body:n})}s(w2e,"postCapiUrl");f();var _2e=10*60*1e3,lr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},S2e=new Set([lr.O1Ga,lr.O3Mini,lr.O1Mini,lr.Gemini20Pro,lr.Gemini20Flash]);function Pf(t){switch(t){case"edits":case"user":case"inline":return[lr.Gpt4o,lr.Gpt4turbo,lr.Gpt4,lr.O1Mini,lr.O1Ga,lr.Claude35Sonnet,lr.O3Mini,lr.Gemini20Flash,lr.Claude37Sonnet,lr.Claude37SonnetThought,lr.Gpt45,lr.Gpt41,lr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt35turbo,lr.Gpt41,lr.CopilotBase];case"gitCommit":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt4,lr.Gpt41,lr.CopilotBase];case"codeReview":return[lr.Gpt4,lr.Gpt4o,lr.Gpt41,lr.CopilotBase];case"nesStubs":return[lr.Gpt4oMini,lr.Gpt4o,lr.Gpt41,lr.CopilotBase]}}s(Pf,"getSupportedModelFamiliesForPrompt");var PM={textEmbedding3Small:"text-embedding-3-small"},Tlt=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),wlt=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:Tlt,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),R2e=I.Object({data:I.Array(wlt)}),wu=class{static{s(this,"ModelMetadataProvider")}},BM=class extends wu{constructor(n){super();this.ctx=n;this._metadata=[];this._lastFetchTime=0;Ps(n,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(r=>r.is_chat_fallback)}async fetchMetadata(){let n=await DI(this.ctx,"/models");if(n.status<200||n.status>=300){if(n.status===429&&this._metadata.length>0){ar.error(this.ctx,"Rate limited while fetching models from CAPI",{status:n.status,statusText:n.statusText});return}throw ar.error(this.ctx,"Failed to fetch models from CAPI",{status:n.status,statusText:n.statusText}),new rg(n)}await this.processModels(n)}async fetchModel(n){let r=await DI(this.ctx,`/models/${n}`);if(!r.ok){ar.error(this.ctx,`Failed to fetch model ${n} from CAPI`,{status:r.status,statusText:r.statusText});return}return await r.json()}async acceptModelPolicy(n){return(await w2e(this.ctx,`/models/${n}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(n){try{let r=await n.json();this._metadata=r.data,this._lastFetchTime=Date.now()}catch(r){ar.error(this.ctx,"Failed to parse models from CAPI",{error:r})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>_2e}},DM=class extends wu{constructor(n,r){super();this.ctx=n;this.delegate=r;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let n=this.ctx.get(Rt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatExpModelIds(r),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(n){let r=this._exp_models_cache.get(n);if(r){let[o,a]=r;if(Date.now()-a<_2e)return o}let i=await this.delegate.fetchModel(n);if(i)return this._exp_models_cache.set(n,[i,Date.now()]),i}async acceptModelPolicy(n){return await this.delegate.acceptModelPolicy(n)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function k2e(t){let e=ui(t,wt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(k2e,"getUserSelectedModelConfiguration");f();f();f();var GS=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var B2e=qe(require("node:fs/promises")),NM=qe(require("node:path"));async function LM(t){return await B2e.readFile(Lte(t))}s(LM,"readFile");function Lte(t){return NM.default.resolve(NM.default.extname(__filename)!==".ts"?__dirname:NM.default.resolve(__dirname,"../../dist"),t)}s(Lte,"locateFile");var HS=qe(j2e());var qM=new Map;function Bo(t="o200k_base"){let e=qM.get(t);return e!==void 0||(e=qM.get("o200k_base"),e!==void 0)?e:new WM}s(Bo,"getTokenizer");async function $2e(t="o200k_base"){return await PI,Bo(t)}s($2e,"getTokenizerAsync");async function Wlt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await LM(t),n=new Map,r=[];for(let i=0;i<e.length;i++){if(e[i]!==255||r.length===0){r.push(e[i]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}s(Wlt,"parseTikTokenNoIndex");var Vte=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let n=(0,HS.createTokenizer)(await Wlt(`resources/${e}.tiktoken.noindex`),(0,HS.getSpecialTokensByEncoder)(e),(0,HS.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new GS("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(-o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(-o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},$te=class{constructor(){this.hash=s(e=>{let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);n=(n<<5)-n+i,n&=n&65535}return n},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},Glt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},jte=4,WM=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(n=>{let r=0;for(let i=0;i<n.length;i++)r=r*Math.pow(10,jte)+n.charCodeAt(i);return r})}detokenize(e){return e.map(n=>{let r=[],i=n.toString();for(;i.length>0;){let o=i.slice(-jte),a=String.fromCharCode(parseInt(o));r.unshift(a),i=i.slice(0,-jte)}return r.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?Glt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}};async function V2e(t){try{let e=await Vte.create(t);qM.set(t,e)}catch{}}s(V2e,"setTokenizer");var PI=(async()=>{qM.set("mock",new $te),await Promise.all([V2e("cl100k_base"),V2e("o200k_base")])})();f();f();var Hlt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Y2e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},zte,GM,K2e,Yte=class extends yr{static{s(this,"AssertError")}constructor(e){let n=e.First();super(n===void 0?"Invalid Value":n.message),zte.add(this),GM.set(this,void 0),Hlt(this,GM,e,"f"),this.error=n}Errors(){return new Lx(Y2e(this,zte,"m",K2e).call(this))}};GM=new WeakMap,zte=new WeakSet,K2e=s(function*(){this.error&&(yield this.error),yield*Y2e(this,GM,"f")},"_AssertError_Iterator");function z2e(t,e,n){if(!pi(t,e,n))throw new Yte(fg(t,e,n))}s(z2e,"AssertValue");function HM(...t){return t.length===3?z2e(t[0],t[1],t[2]):z2e(t[0],[],t[1])}s(HM,"Assert");f();f();f();function jlt(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=Xi(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=Xi(t[n]);return e}s(jlt,"FromObject");function Vlt(t){return t.map(e=>Xi(e))}s(Vlt,"FromArray");function $lt(t){return t.slice()}s($lt,"FromTypedArray");function zlt(t){return new Map(Xi([...t.entries()]))}s(zlt,"FromMap");function Ylt(t){return new Set(Xi([...t.entries()]))}s(Ylt,"FromSet");function Klt(t){return new Date(t.toISOString())}s(Klt,"FromDate");function Xi(t){if(Ar(t))return Vlt(t);if(vu(t))return Klt(t);if(vf(t))return $lt(t);if(Dye(t))return zlt(t);if(Pye(t))return Ylt(t);if(ci(t))return jlt(t);if(r0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Xi,"Clone");var h0=class extends yr{static{s(this,"ValueCreateError")}constructor(e,n){super(n),this.schema=e}};function Zi(t){return wx(t)?t():Xi(t)}s(Zi,"FromDefault");function Jlt(t,e){return gr(t,"default")?Zi(t.default):{}}s(Jlt,"FromAny");function Xlt(t,e){return{}}s(Xlt,"FromArgument");function Zlt(t,e){if(t.uniqueItems===!0&&!gr(t,"default"))throw new h0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!gr(t,"default"))throw new h0(t,"Array with the contains constraint requires a default value");return"default"in t?Zi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(n=>gd(t.items,e)):[]}s(Zlt,"FromArray");function ect(t,e){return gr(t,"default")?Zi(t.default):async function*(){}()}s(ect,"FromAsyncIterator");function tct(t,e){return gr(t,"default")?Zi(t.default):BigInt(0)}s(tct,"FromBigInt");function nct(t,e){return gr(t,"default")?Zi(t.default):!1}s(nct,"FromBoolean");function rct(t,e){if(gr(t,"default"))return Zi(t.default);{let n=gd(t.returns,e);return typeof n=="object"&&!Array.isArray(n)?class{constructor(){for(let[r,i]of Object.entries(n)){let o=this;o[r]=i}}}:class{}}}s(rct,"FromConstructor");function ict(t,e){return gr(t,"default")?Zi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(ict,"FromDate");function oct(t,e){return gr(t,"default")?Zi(t.default):()=>gd(t.returns,e)}s(oct,"FromFunction");function sct(t,e){let n=globalThis.Object.values(t.$defs),r=t.$defs[t.$ref];return gd(r,[...e,...n])}s(sct,"FromImport");function act(t,e){return gr(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(act,"FromInteger");function lct(t,e){if(gr(t,"default"))return Zi(t.default);{let n=t.allOf.reduce((r,i)=>{let o=gd(i,e);return typeof o=="object"?{...r,...o}:o},{});if(!pi(t,e,n))throw new h0(t,"Intersect produced invalid value. Consider using a default value.");return n}}s(lct,"FromIntersect");function cct(t,e){return gr(t,"default")?Zi(t.default):function*(){}()}s(cct,"FromIterator");function uct(t,e){return gr(t,"default")?Zi(t.default):t.const}s(uct,"FromLiteral");function dct(t,e){if(gr(t,"default"))return Zi(t.default);throw new h0(t,"Never types cannot be created. Consider using a default value.")}s(dct,"FromNever");function fct(t,e){if(gr(t,"default"))return Zi(t.default);throw new h0(t,"Not types must have a default value")}s(fct,"FromNot");function pct(t,e){return gr(t,"default")?Zi(t.default):null}s(pct,"FromNull");function mct(t,e){return gr(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(mct,"FromNumber");function hct(t,e){if(gr(t,"default"))return Zi(t.default);{let n=new Set(t.required),r={};for(let[i,o]of Object.entries(t.properties))n.has(i)&&(r[i]=gd(o,e));return r}}s(hct,"FromObject");function gct(t,e){return gr(t,"default")?Zi(t.default):Promise.resolve(gd(t.item,e))}s(gct,"FromPromise");function Act(t,e){let[n,r]=Object.entries(t.patternProperties)[0];if(gr(t,"default"))return Zi(t.default);if(n===cg||n===lg)return{};{let i=n.slice(1,n.length-1).split("|"),o={};for(let a of i)o[a]=gd(r,e);return o}}s(Act,"FromRecord");function yct(t,e){return gr(t,"default")?Zi(t.default):gd(Ki(t,e),e)}s(yct,"FromRef");function Cct(t,e){if(gr(t,"default"))return Zi(t.default);throw new h0(t,"RegExp types cannot be created. Consider using a default value.")}s(Cct,"FromRegExp");function xct(t,e){if(t.pattern!==void 0){if(gr(t,"default"))return Zi(t.default);throw new h0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(gr(t,"default"))return Zi(t.default);throw new h0(t,"String types with formats must specify a default value")}else return gr(t,"default")?Zi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(xct,"FromString");function vct(t,e){return gr(t,"default")?Zi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(vct,"FromSymbol");function bct(t,e){if(gr(t,"default"))return Zi(t.default);if(!nF(t))throw new h0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return tS(t)[0]}s(bct,"FromTemplateLiteral");function Ect(t,e){if(J2e++>Bct)throw new h0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return gr(t,"default")?Zi(t.default):gd(Ki(t,e),e)}s(Ect,"FromThis");function Ict(t,e){return gr(t,"default")?Zi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((n,r)=>gd(t.items[r],e))}s(Ict,"FromTuple");function Tct(t,e){if(gr(t,"default"))return Zi(t.default)}s(Tct,"FromUndefined");function wct(t,e){if(gr(t,"default"))return Zi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return gd(t.anyOf[0],e)}s(wct,"FromUnion");function _ct(t,e){return gr(t,"default")?Zi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(_ct,"FromUint8Array");function Sct(t,e){return gr(t,"default")?Zi(t.default):{}}s(Sct,"FromUnknown");function Rct(t,e){if(gr(t,"default"))return Zi(t.default)}s(Rct,"FromVoid");function kct(t,e){if(gr(t,"default"))return Zi(t.default);throw new Error("User defined types must specify a default value")}s(kct,"FromKind");function gd(t,e){let n=Bl(t,e),r=t;switch(r[Xe]){case"Any":return Jlt(r,n);case"Argument":return Xlt(r,n);case"Array":return Zlt(r,n);case"AsyncIterator":return ect(r,n);case"BigInt":return tct(r,n);case"Boolean":return nct(r,n);case"Constructor":return rct(r,n);case"Date":return ict(r,n);case"Function":return oct(r,n);case"Import":return sct(r,n);case"Integer":return act(r,n);case"Intersect":return lct(r,n);case"Iterator":return cct(r,n);case"Literal":return uct(r,n);case"Never":return dct(r,n);case"Not":return fct(r,n);case"Null":return pct(r,n);case"Number":return mct(r,n);case"Object":return hct(r,n);case"Promise":return gct(r,n);case"Record":return Act(r,n);case"Ref":return yct(r,n);case"RegExp":return Cct(r,n);case"String":return xct(r,n);case"Symbol":return vct(r,n);case"TemplateLiteral":return bct(r,n);case"This":return Ect(r,n);case"Tuple":return Ict(r,n);case"Undefined":return Tct(r,n);case"Union":return wct(r,n);case"Uint8Array":return _ct(r,n);case"Unknown":return Sct(r,n);case"Void":return Rct(r,n);default:if(!bu.Has(r[Xe]))throw new h0(r,"Unknown type");return kct(r,n)}}s(gd,"Visit");var Bct=512,J2e=0;function Nf(...t){return J2e=0,t.length===2?gd(t[0],t[1]):gd(t[0],[])}s(Nf,"Create");var jM=class extends yr{static{s(this,"ValueCastError")}constructor(e,n){super(n),this.schema=e}};function Dct(t,e,n){if(t[Xe]==="Object"&&typeof n=="object"&&!v1(n)){let r=t,i=Object.getOwnPropertyNames(n),o=Object.entries(r.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Xe]==="Literal"&&d.const===n[u]?l:0,m=pi(d,e,n[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return pi(t,e,n)?1:0}s(Dct,"ScoreUnion");function Pct(t,e,n){let r=t.anyOf.map(a=>Ki(a,e)),[i,o]=[r[0],0];for(let a of r){let l=Dct(a,e,n);l>o&&(i=a,o=l)}return i}s(Pct,"SelectUnion");function Nct(t,e,n){if("default"in t)return typeof n=="function"?t.default:Xi(t.default);{let r=Pct(t,e,n);return x8(r,e,n)}}s(Nct,"CastUnion");function Lct(t,e,n){return pi(t,e,n)?Xi(n):Nf(t,e)}s(Lct,"DefaultClone");function Fct(t,e,n){return pi(t,e,n)?n:Nf(t,e)}s(Fct,"Default");function Mct(t,e,n){if(pi(t,e,n))return Xi(n);let r=Ar(n)?Xi(n):Nf(t,e),i=Wn(t.minItems)&&r.length<t.minItems?[...r,...Array.from({length:t.minItems-r.length},()=>null)]:r,a=(Wn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>vm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!pi(t,e,l))throw new jM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(Mct,"FromArray");function Qct(t,e,n){if(pi(t,e,n))return Nf(t,e);let r=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!r.has(o)&&n.prototype[o]===void 0||(i.prototype[o]=vm(a,e,n.prototype[o]));return i}s(Qct,"FromConstructor");function Oct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return vm(i,[...e,...r],n)}s(Oct,"FromImport");function Uct(t,e,n){let r=Nf(t,e),i=ci(r)&&ci(n)?{...r,...n}:n;return pi(t,e,i)?i:Nf(t,e)}s(Uct,"FromIntersect");function qct(t,e,n){throw new jM(t,"Never types cannot be cast")}s(qct,"FromNever");function Wct(t,e,n){if(pi(t,e,n))return n;if(n===null||typeof n!="object")return Nf(t,e);let r=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!r.has(o)&&n[o]===void 0||(i[o]=vm(a,e,n[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(n))o.includes(a)||(i[a]=vm(t.additionalProperties,e,n[a]))}return i}s(Wct,"FromObject");function Gct(t,e,n){if(pi(t,e,n))return Xi(n);if(n===null||typeof n!="object"||Array.isArray(n)||n instanceof Date)return Nf(t,e);let r=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[r],o={};for(let[a,l]of Object.entries(n))o[a]=vm(i,e,l);return o}s(Gct,"FromRecord");function Hct(t,e,n){return vm(Ki(t,e),e,n)}s(Hct,"FromRef");function jct(t,e,n){return vm(Ki(t,e),e,n)}s(jct,"FromThis");function Vct(t,e,n){return pi(t,e,n)?Xi(n):Ar(n)?t.items===void 0?[]:t.items.map((r,i)=>vm(r,e,n[i])):Nf(t,e)}s(Vct,"FromTuple");function $ct(t,e,n){return pi(t,e,n)?Xi(n):Nct(t,e,n)}s($ct,"FromUnion");function vm(t,e,n){let r=qi(t.$id)?Bl(t,e):e,i=t;switch(t[Xe]){case"Array":return Mct(i,r,n);case"Constructor":return Qct(i,r,n);case"Import":return Oct(i,r,n);case"Intersect":return Uct(i,r,n);case"Never":return qct(i,r,n);case"Object":return Wct(i,r,n);case"Record":return Gct(i,r,n);case"Ref":return Hct(i,r,n);case"This":return jct(i,r,n);case"Tuple":return Vct(i,r,n);case"Union":return $ct(i,r,n);case"Date":case"Symbol":case"Uint8Array":return Lct(t,e,n);default:return Fct(i,r,n)}}s(vm,"Visit");function x8(...t){return t.length===3?vm(t[0],t[1],t[2]):vm(t[0],[],t[1])}s(x8,"Cast");f();function zct(t){return Sx(t)&&t[Xe]!=="Unsafe"}s(zct,"IsCheckable");function Yct(t,e,n){return Ar(n)?n.map(r=>Ad(t.items,e,r)):n}s(Yct,"FromArray");function Kct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Ad(i,[...e,...r],n)}s(Kct,"FromImport");function Jct(t,e,n){let r=t.unevaluatedProperties,o=t.allOf.map(l=>Ad(l,e,Xi(n))).reduce((l,c)=>ci(c)?{...l,...c}:c,{});if(!ci(n)||!ci(o)||!Sx(r))return o;let a=ld(t);for(let l of Object.getOwnPropertyNames(n))a.includes(l)||pi(r,e,n[l])&&(o[l]=Ad(r,e,n[l]));return o}s(Jct,"FromIntersect");function Xct(t,e,n){if(!ci(n)||Ar(n))return n;let r=t.additionalProperties;for(let i of Object.getOwnPropertyNames(n)){if(gr(t.properties,i)){n[i]=Ad(t.properties[i],e,n[i]);continue}if(Sx(r)&&pi(r,e,n[i])){n[i]=Ad(r,e,n[i]);continue}delete n[i]}return n}s(Xct,"FromObject");function Zct(t,e,n){if(!ci(n))return n;let r=t.additionalProperties,i=Object.getOwnPropertyNames(n),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){n[c]=Ad(a,e,n[c]);continue}if(Sx(r)&&pi(r,e,n[c])){n[c]=Ad(r,e,n[c]);continue}delete n[c]}return n}s(Zct,"FromRecord");function eut(t,e,n){return Ad(Ki(t,e),e,n)}s(eut,"FromRef");function tut(t,e,n){return Ad(Ki(t,e),e,n)}s(tut,"FromThis");function nut(t,e,n){if(!Ar(n))return n;if(ds(t.items))return[];let r=Math.min(n.length,t.items.length);for(let i=0;i<r;i++)n[i]=Ad(t.items[i],e,n[i]);return n.length>r?n.slice(0,r):n}s(nut,"FromTuple");function rut(t,e,n){for(let r of t.anyOf)if(zct(r)&&pi(r,e,n))return Ad(r,e,n);return n}s(rut,"FromUnion");function Ad(t,e,n){let r=qi(t.$id)?Bl(t,e):e,i=t;switch(i[Xe]){case"Array":return Yct(i,r,n);case"Import":return Kct(i,r,n);case"Intersect":return Jct(i,r,n);case"Object":return Xct(i,r,n);case"Record":return Zct(i,r,n);case"Ref":return eut(i,r,n);case"This":return tut(i,r,n);case"Tuple":return nut(i,r,n);case"Union":return rut(i,r,n);default:return n}}s(Ad,"Visit");function VM(...t){return t.length===3?Ad(t[0],t[1],t[2]):Ad(t[0],[],t[1])}s(VM,"Clean");f();function $M(t){return qi(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s($M,"IsStringNumeric");function iut(t){return cc(t)||ag(t)||Wn(t)}s(iut,"IsValueToString");function v8(t){return t===!0||Wn(t)&&t===1||cc(t)&&t===BigInt("1")||qi(t)&&(t.toLowerCase()==="true"||t==="1")}s(v8,"IsValueTrue");function b8(t){return t===!1||Wn(t)&&(t===0||Object.is(t,-0))||cc(t)&&t===BigInt("0")||qi(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(b8,"IsValueFalse");function sut(t){return qi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(sut,"IsTimeStringWithTimeZone");function aut(t){return qi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(aut,"IsTimeStringWithoutTimeZone");function lut(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(lut,"IsDateTimeStringWithTimeZone");function cut(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(cut,"IsDateTimeStringWithoutTimeZone");function uut(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(uut,"IsDateString");function dut(t,e){let n=Z2e(t);return n===e?n:t}s(dut,"TryConvertLiteralString");function fut(t,e){let n=eTe(t);return n===e?n:t}s(fut,"TryConvertLiteralNumber");function put(t,e){let n=X2e(t);return n===e?n:t}s(put,"TryConvertLiteralBoolean");function mut(t,e){return qi(t.const)?dut(e,t.const):Wn(t.const)?fut(e,t.const):ag(t.const)?put(e,t.const):e}s(mut,"TryConvertLiteral");function X2e(t){return v8(t)?!0:b8(t)?!1:t}s(X2e,"TryConvertBoolean");function hut(t){let e=s(n=>n.split(".")[0],"truncateInteger");return $M(t)?BigInt(e(t)):Wn(t)?BigInt(Math.trunc(t)):b8(t)?BigInt(0):v8(t)?BigInt(1):t}s(hut,"TryConvertBigInt");function Z2e(t){return b1(t)&&t.description!==void 0?t.description.toString():iut(t)?t.toString():t}s(Z2e,"TryConvertString");function eTe(t){return $M(t)?parseFloat(t):v8(t)?1:b8(t)?0:t}s(eTe,"TryConvertNumber");function gut(t){return $M(t)?parseInt(t):Wn(t)?Math.trunc(t):v8(t)?1:b8(t)?0:t}s(gut,"TryConvertInteger");function Aut(t){return qi(t)&&t.toLowerCase()==="null"?null:t}s(Aut,"TryConvertNull");function yut(t){return qi(t)&&t==="undefined"?void 0:t}s(yut,"TryConvertUndefined");function Cut(t){return vu(t)?t:Wn(t)?new Date(t):v8(t)?new Date(1):b8(t)?new Date(0):$M(t)?new Date(parseInt(t)):aut(t)?new Date(`1970-01-01T${t}.000Z`):sut(t)?new Date(`1970-01-01T${t}`):cut(t)?new Date(`${t}.000Z`):lut(t)?new Date(t):uut(t)?new Date(`${t}T00:00:00.000Z`):t}s(Cut,"TryConvertDate");function xut(t,e,n){return(Ar(n)?n:[n]).map(i=>bm(t.items,e,i))}s(xut,"FromArray");function vut(t,e,n){return hut(n)}s(vut,"FromBigInt");function but(t,e,n){return X2e(n)}s(but,"FromBoolean");function Eut(t,e,n){return Cut(n)}s(Eut,"FromDate");function Iut(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return bm(i,[...e,...r],n)}s(Iut,"FromImport");function Tut(t,e,n){return gut(n)}s(Tut,"FromInteger");function wut(t,e,n){return t.allOf.reduce((r,i)=>bm(i,e,r),n)}s(wut,"FromIntersect");function _ut(t,e,n){return mut(t,n)}s(_ut,"FromLiteral");function Sut(t,e,n){return Aut(n)}s(Sut,"FromNull");function Rut(t,e,n){return eTe(n)}s(Rut,"FromNumber");function kut(t,e,n){if(!ci(n))return n;for(let r of Object.getOwnPropertyNames(t.properties))gr(n,r)&&(n[r]=bm(t.properties[r],e,n[r]));return n}s(kut,"FromObject");function But(t,e,n){if(!ci(n))return n;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(n))n[a]=bm(o,e,l);return n}s(But,"FromRecord");function Dut(t,e,n){return bm(Ki(t,e),e,n)}s(Dut,"FromRef");function Put(t,e,n){return Z2e(n)}s(Put,"FromString");function Nut(t,e,n){return qi(n)||Wn(n)?Symbol(n):n}s(Nut,"FromSymbol");function Lut(t,e,n){return bm(Ki(t,e),e,n)}s(Lut,"FromThis");function Fut(t,e,n){return Ar(n)&&!ds(t.items)?n.map((i,o)=>o<t.items.length?bm(t.items[o],e,i):i):n}s(Fut,"FromTuple");function Mut(t,e,n){return yut(n)}s(Mut,"FromUndefined");function Qut(t,e,n){for(let r of t.anyOf){let i=bm(r,e,Xi(n));if(pi(r,e,i))return i}return n}s(Qut,"FromUnion");function bm(t,e,n){let r=Bl(t,e),i=t;switch(t[Xe]){case"Array":return xut(i,r,n);case"BigInt":return vut(i,r,n);case"Boolean":return but(i,r,n);case"Date":return Eut(i,r,n);case"Import":return Iut(i,r,n);case"Integer":return Tut(i,r,n);case"Intersect":return wut(i,r,n);case"Literal":return _ut(i,r,n);case"Null":return Sut(i,r,n);case"Number":return Rut(i,r,n);case"Object":return kut(i,r,n);case"Record":return But(i,r,n);case"Ref":return Dut(i,r,n);case"String":return Put(i,r,n);case"Symbol":return Nut(i,r,n);case"This":return Lut(i,r,n);case"Tuple":return Fut(i,r,n);case"Undefined":return Mut(i,r,n);case"Union":return Qut(i,r,n);default:return n}}s(bm,"Visit");function zM(...t){return t.length===3?bm(t[0],t[1],t[2]):bm(t[0],[],t[1])}s(zM,"Convert");f();function tTe(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!pi(e,n,r))throw new mS(e,r,fg(e,n,r).First());return B1(e,n)?hS(e,n,r):r}s(tTe,"Decode");f();function L1(t,e){let n=gr(t,"default")?t.default:void 0,r=wx(n)?n():Xi(n);return ds(e)?r:ci(e)&&ci(r)?Object.assign(r,e):e}s(L1,"ValueOrDefault");function Kte(t){return Sx(t)&&"default"in t}s(Kte,"HasDefaultProperty");function Out(t,e,n){if(Ar(n)){for(let i=0;i<n.length;i++)n[i]=Su(t.items,e,n[i]);return n}let r=L1(t,n);if(!Ar(r))return r;for(let i=0;i<r.length;i++)r[i]=Su(t.items,e,r[i]);return r}s(Out,"FromArray");function Uut(t,e,n){return vu(n)?n:L1(t,n)}s(Uut,"FromDate");function qut(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Su(i,[...e,...r],n)}s(qut,"FromImport");function Wut(t,e,n){let r=L1(t,n);return t.allOf.reduce((i,o)=>{let a=Su(o,e,r);return ci(a)?{...i,...a}:a},{})}s(Wut,"FromIntersect");function Gut(t,e,n){let r=L1(t,n);if(!ci(r))return r;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Su(t.properties[o],e,r[o]);ds(a)||(r[o]=Su(t.properties[o],e,r[o]))}if(!Kte(t.additionalProperties))return r;for(let o of Object.getOwnPropertyNames(r))i.includes(o)||(r[o]=Su(t.additionalProperties,e,r[o]));return r}s(Gut,"FromObject");function Hut(t,e,n){let r=L1(t,n);if(!ci(r))return r;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(r))l.test(c)&&Kte(a)&&(r[c]=Su(a,e,r[c]));if(!Kte(i))return r;for(let c of Object.getOwnPropertyNames(r))l.test(c)||(r[c]=Su(i,e,r[c]));return r}s(Hut,"FromRecord");function jut(t,e,n){return Su(Ki(t,e),e,L1(t,n))}s(jut,"FromRef");function Vut(t,e,n){return Su(Ki(t,e),e,n)}s(Vut,"FromThis");function $ut(t,e,n){let r=L1(t,n);if(!Ar(r)||ds(t.items))return r;let[i,o]=[t.items,Math.max(t.items.length,r.length)];for(let a=0;a<o;a++)a<i.length&&(r[a]=Su(i[a],e,r[a]));return r}s($ut,"FromTuple");function zut(t,e,n){let r=L1(t,n);for(let i of t.anyOf){let o=Su(i,e,Xi(r));if(pi(i,e,o))return o}return r}s(zut,"FromUnion");function Su(t,e,n){let r=Bl(t,e),i=t;switch(i[Xe]){case"Array":return Out(i,r,n);case"Date":return Uut(i,r,n);case"Import":return qut(i,r,n);case"Intersect":return Wut(i,r,n);case"Object":return Gut(i,r,n);case"Record":return Hut(i,r,n);case"Ref":return jut(i,r,n);case"This":return Vut(i,r,n);case"Tuple":return $ut(i,r,n);case"Union":return zut(i,r,n);default:return L1(i,n)}}s(Su,"Visit");function YM(...t){return t.length===3?Su(t[0],t[1],t[2]):Su(t[0],[],t[1])}s(YM,"Default");f();f();var Em={};g1(Em,{Delete:()=>Kut,Format:()=>E8,Get:()=>Xut,Has:()=>Jut,Set:()=>Yut,ValuePointerRootDeleteError:()=>JM,ValuePointerRootSetError:()=>KM});f();var KM=class extends yr{static{s(this,"ValuePointerRootSetError")}constructor(e,n,r){super("Cannot set root value"),this.value=e,this.path=n,this.update=r}},JM=class extends yr{static{s(this,"ValuePointerRootDeleteError")}constructor(e,n){super("Cannot delete root value"),this.value=e,this.path=n}};function nTe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(nTe,"Escape");function*E8(t){if(t==="")return;let[e,n]=[0,0];for(let r=0;r<t.length;r++)t.charAt(r)==="/"?(r===0||(n=r,yield nTe(t.slice(e,n))),e=r+1):n=r;yield nTe(t.slice(e))}s(E8,"Format");function Yut(t,e,n){if(e==="")throw new KM(t,e,n);let[r,i,o]=[null,t,""];for(let a of E8(e))i[a]===void 0&&(i[a]={}),r=i,i=i[a],o=a;r[o]=n}s(Yut,"Set");function Kut(t,e){if(e==="")throw new JM(t,e);let[n,r,i]=[null,t,""];for(let o of E8(e)){if(r[o]===void 0||r[o]===null)return;n=r,r=r[o],i=o}if(Array.isArray(n)){let o=parseInt(i);n.splice(o,1)}else delete n[i]}s(Kut,"Delete");function Jut(t,e){if(e==="")return!0;let[n,r,i]=[null,t,""];for(let o of E8(e)){if(r[o]===void 0)return!1;n=r,r=r[o],i=o}return Object.getOwnPropertyNames(n).includes(i)}s(Jut,"Has");function Xut(t,e){if(e==="")return t;let n=t;for(let r of E8(e)){if(n[r]===void 0)return;n=n[r]}return n}s(Xut,"Get");f();function Zut(t,e){if(!ci(e))return!1;let n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return n.length!==r.length?!1:n.every(i=>NI(t[i],e[i]))}s(Zut,"ObjectType");function edt(t,e){return vu(e)&&t.getTime()===e.getTime()}s(edt,"DateType");function tdt(t,e){return!Ar(e)||t.length!==e.length?!1:t.every((n,r)=>NI(n,e[r]))}s(tdt,"ArrayType");function ndt(t,e){return!vf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((n,r)=>NI(n,e[r]))}s(ndt,"TypedArrayType");function rdt(t,e){return t===e}s(rdt,"ValueType");function NI(t,e){if(vu(t))return edt(t,e);if(vf(t))return ndt(t,e);if(Ar(t))return tdt(t,e);if(ci(t))return Zut(t,e);if(r0(t))return rdt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(NI,"Equal");var idt=co({type:Li("insert"),path:Eu(),value:dm()}),odt=co({type:Li("update"),path:Eu(),value:dm()}),sdt=co({type:Li("delete"),path:Eu()}),iTe=lo([idt,odt,sdt]),XM=class extends yr{static{s(this,"ValueDiffError")}constructor(e,n){super(n),this.value=e}};function ZM(t,e){return{type:"update",path:t,value:e}}s(ZM,"CreateUpdate");function oTe(t,e){return{type:"insert",path:t,value:e}}s(oTe,"CreateInsert");function sTe(t){return{type:"delete",path:t}}s(sTe,"CreateDelete");function rTe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new XM(t,"Cannot diff objects with symbols")}s(rTe,"AssertDiffable");function*adt(t,e,n){if(rTe(e),rTe(n),!KX(n))return yield ZM(t,n);let r=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(n);for(let o of i)gr(e,o)||(yield oTe(`${t}/${o}`,n[o]));for(let o of r)gr(n,o)&&(NI(e,n)||(yield*eQ(`${t}/${o}`,e[o],n[o])));for(let o of r)gr(n,o)||(yield sTe(`${t}/${o}`))}s(adt,"ObjectType");function*ldt(t,e,n){if(!Ar(n))return yield ZM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*eQ(`${t}/${r}`,e[r],n[r]);for(let r=0;r<n.length;r++)r<e.length||(yield oTe(`${t}/${r}`,n[r]));for(let r=e.length-1;r>=0;r--)r<n.length||(yield sTe(`${t}/${r}`))}s(ldt,"ArrayType");function*cdt(t,e,n){if(!vf(n)||e.length!==n.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(n).constructor.name)return yield ZM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*eQ(`${t}/${r}`,e[r],n[r])}s(cdt,"TypedArrayType");function*udt(t,e,n){e!==n&&(yield ZM(t,n))}s(udt,"ValueType");function*eQ(t,e,n){if(KX(e))return yield*adt(t,e,n);if(Ar(e))return yield*ldt(t,e,n);if(vf(e))return yield*cdt(t,e,n);if(r0(e))return yield*udt(t,e,n);throw new XM(e,"Unable to diff value")}s(eQ,"Visit");function aTe(t,e){return[...eQ("",t,e)]}s(aTe,"Diff");function ddt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(ddt,"IsRootUpdate");function fdt(t){return t.length===0}s(fdt,"IsIdentity");function lTe(t,e){if(ddt(e))return Xi(e[0].value);if(fdt(e))return Xi(t);let n=Xi(t);for(let r of e)switch(r.type){case"insert":{Em.Set(n,r.path,r.value);break}case"update":{Em.Set(n,r.path,r.value);break}case"delete":{Em.Delete(n,r.path);break}}return n}s(lTe,"Patch");f();function cTe(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=B1(e,n)?AS(e,n,r):r;if(!pi(e,n,i))throw new gS(e,i,fg(e,n,i).First());return i}s(cTe,"Encode");f();function tQ(t){return ci(t)&&!Ar(t)}s(tQ,"IsStandardObject");var nQ=class extends yr{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function pdt(t,e,n,r){if(!tQ(n))Em.Set(t,e,Xi(r));else{let i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertyNames(r);for(let a of i)o.includes(a)||delete n[a];for(let a of o)i.includes(a)||(n[a]=null);for(let a of o)Jte(t,`${e}/${a}`,n[a],r[a])}}s(pdt,"ObjectType");function mdt(t,e,n,r){if(!Ar(n))Em.Set(t,e,Xi(r));else{for(let i=0;i<r.length;i++)Jte(t,`${e}/${i}`,n[i],r[i]);n.splice(r.length)}}s(mdt,"ArrayType");function hdt(t,e,n,r){if(vf(n)&&n.length===r.length)for(let i=0;i<n.length;i++)n[i]=r[i];else Em.Set(t,e,Xi(r))}s(hdt,"TypedArrayType");function gdt(t,e,n,r){n!==r&&Em.Set(t,e,r)}s(gdt,"ValueType");function Jte(t,e,n,r){if(Ar(r))return mdt(t,e,n,r);if(vf(r))return hdt(t,e,n,r);if(tQ(r))return pdt(t,e,n,r);if(r0(r))return gdt(t,e,n,r)}s(Jte,"Visit");function uTe(t){return vf(t)||r0(t)}s(uTe,"IsNonMutableValue");function Adt(t,e){return tQ(t)&&Ar(e)||Ar(t)&&tQ(e)}s(Adt,"IsMismatchedValue");function dTe(t,e){if(uTe(t)||uTe(e))throw new nQ("Only object and array types can be mutated at the root level");if(Adt(t,e))throw new nQ("Cannot assign due type mismatch of assignable values");Jte(t,"",t,e)}s(dTe,"Mutate");f();var rQ=class extends yr{static{s(this,"ParseError")}constructor(e){super(e)}},Xte;(function(t){let e=new Map([["Assert",(o,a,l)=>(HM(o,a,l),l)],["Cast",(o,a,l)=>x8(o,a,l)],["Clean",(o,a,l)=>VM(o,a,l)],["Clone",(o,a,l)=>Xi(l)],["Convert",(o,a,l)=>zM(o,a,l)],["Decode",(o,a,l)=>B1(o,a)?hS(o,a,l):l],["Default",(o,a,l)=>YM(o,a,l)],["Encode",(o,a,l)=>B1(o,a)?AS(o,a,l):l]]);function n(o){e.delete(o)}s(n,"Delete"),t.Delete=n;function r(o,a){e.set(o,a)}s(r,"Set"),t.Set=r;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Xte||(Xte={}));var fTe=["Clone","Clean","Default","Convert","Assert","Decode"];function ydt(t,e,n,r){return t.reduce((i,o)=>{let a=Xte.Get(o);if(ds(a))throw new rQ(`Unable to find Parse operation '${o}'`);return a(e,n,i)},r)}s(ydt,"ParseValue");function pTe(...t){let[e,n,r,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Ar(t[0])?[t[0],t[1],[],t[2]]:[fTe,t[0],t[1],t[2]]:t.length===2?[fTe,t[0],[],t[1]]:(()=>{throw new rQ("Invalid Arguments")})();return ydt(e,n,r,i)}s(pTe,"Parse");f();var Jx={};g1(Jx,{Assert:()=>HM,Cast:()=>x8,Check:()=>pi,Clean:()=>VM,Clone:()=>Xi,Convert:()=>zM,Create:()=>Nf,Decode:()=>tTe,Default:()=>YM,Diff:()=>aTe,Edit:()=>iTe,Encode:()=>cTe,Equal:()=>NI,Errors:()=>fg,Hash:()=>Nx,Mutate:()=>dTe,Parse:()=>pTe,Patch:()=>lTe,ValueErrorIterator:()=>Lx});f();var Cdt="gpt-4o-copilot",Lf=class t{constructor(e,n=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;n&&Ps(this._ctx,r=>this.refreshAvailableModels(r))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let n of this.onModelsFetchedCallbacks)n()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Cdt}parseModelsResponse(e){try{return Jx.Parse(R2e,e)}catch(n){ar.exception(this._ctx,n,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let n=await this.fetchModels(e);n&&(this.fetchedModelData=n)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await DI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(ar.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let r=this.getGenericCompletionModels().find(i=>i.modelId===e);return r?r.tokenizer:"o200k_base"}static filterCompletionModels(e,n){return e.filter(r=>r.capabilities.type==="completion").filter(r=>!n||r.preview===!1||r.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,n){return e.filter(r=>!n||r.preview===!1||r.preview===void 0)}static mapCompletionModels(e){return e.map(n=>({modelId:n.id,label:n.name,preview:!!n.preview,tokenizer:n.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let n=this.getDefaultModelId(),r=k2e(this._ctx);if(r){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(r)||(l.length>0&&ar.error(this._ctx,`User selected model ${r} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),r=null),n===r&&(r=null)}let i=ui(this._ctx,wt.DebugOverrideEngine)||ui(this._ctx,wt.DebugOverrideEngineLegacy);if(i)return new Xx(i,"override");let o=e?this._ctx.get(Rt).customEngine(e):"",a=e?this._ctx.get(Rt).customEngineTargetEngine(e):void 0;return r?o&&a&&r===a?new Xx(o,"exp"):new Xx(r,"modelpicker"):o?new Xx(o,"exp"):this.customModels.length>0?new Xx(this.customModels[0],"custommodel"):new Xx(n,"default")}},Xx=class{constructor(e,n){this.modelId=e;this.modelChoiceSource=n}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Zx(t,e=void 0){let n=t.get(Lf),r=n.getCurrentModelRequestInfo(e),i=n.getTokenizerForModel(r.modelId);return{headers:r.headers,modelId:r.modelId,engineChoiceSource:r.modelChoiceSource,tokenizer:i}}s(Zx,"getEngineRequestInfo");f();f();var po=class{static{s(this,"FileSystem")}};var BTe=qe(kTe());function DTe(t){return t!==void 0&&t!==0}s(DTe,"isRepoInfo");function PTe(t){if(t===void 0||t===0)return"";let e=F1(t);if(e==="github/github")return e;let n=jdt(t)?.toLowerCase();return n!==void 0?n:""}s(PTe,"getDogFood");function F1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(F1,"tryGetGitHubNWO");function jdt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(jdt,"tryGetADONWO");function ev(t,e){let n=f0(e);return Vdt(t,n)}s(ev,"extractRepoInfoInBackground");var Vdt=Kdt($dt,1e4);async function $dt(t,e){let n=c2e(e);if(!n)return;let r=await zdt(t,n);if(!r)return;let i=t.get(po),o=ko(r,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=Ydt(a)??"",c=nne(l),u={uri:r};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s($dt,"extractRepoInfo");function nne(t){let e;try{if(e=(0,BTe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(nne,"parseRepoUrl");async function zdt(t,e){let n=e+"_add_to_make_longer",r=t.get(po);for(;e!=="file:///"&&e.length<n.length;){let i=ko(e,".git","config"),o=!1;try{await r.stat(i),o=!0}catch{o=!1}if(o)return e;n=e,e=f0(e)}}s(zdt,"getRepoBaseUri");function Ydt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,n=/^\s*\[remote.([^"\s]+)/,r=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(n);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(r);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(Ydt,"getRepoUrlFromConfigText");var tne=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function Kdt(t,e){let n=new Ln(e),r=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=n.get(a);if(l)return l.result;if(r.has(a))return 0;let c=t(i,...o);return r.add(a),c.then(u=>{n.set(a,new tne(u)),r.delete(a)}),0}}s(Kdt,"computeInBackgroundAndMemoize");f();var I8=500,NTe=8192-I8,LTe=4,iQ=10,FTe=15,Jdt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function T8(t){return t=t.toLowerCase(),Jdt[t]??t}s(T8,"normalizeLanguageId");var rne=class{constructor(e){this.ctx=e;this.cache=new Ln(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,n){let r=e.stringify()+`
`+JSON.stringify(n),i=this.cache.get(r);return i||(i=new ine(()=>this.ctx.get(xm).fetchExperiments(this.ctx,n,e.toHeaders()),1e3*60*60),this.cache.set(r,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},ine=class{constructor(e,n=1/0){this.producer=e;this.expirationMs=n}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function Zdt(t){return"uri"in t}s(Zdt,"isCompletionsFiltersInfo");var Rt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new rne(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,n){this.dynamicFilters[e]=n}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let n of this.dynamicFilterGroups)Object.assign(e,n());for(let[n,r]of Object.entries(this.dynamicFilters))e[n]=r();return e}registerUpcomingDynamicFilter(e,n){this.upcomingDynamicFilters[e]=n}async updateExPValuesAndAssignments(e,n=or.createAndMarkAsIssued(),r=void 0){if(n instanceof gg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&Zdt(e)?ev(this.ctx,e.uri):void 0,o=F1(i)??"",a=PTe(i)??"",l=e?.languageId??"",c=Zx(this.ctx).modelId;r??=await this.ctx.get(Gn).getToken();let u=e2e(r),d=r.getTokenValue("ft")??"",p=r.getTokenValue("ol")??"",m=r.getTokenValue("cml")??"",h=r.getTokenValue("tid")??"",g=r.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),B=k.newFilterSettings,N=await this.getExpConfig(B,g),U=new Promise(re=>setTimeout(re,t.upcomingDynamicFilterCheckDelayMs));for(let re of k.otherFilterSettingsToPrefetch)U=U.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(re,g)});return this.prepareForUpcomingFilters(B,g),new gg(n.properties,n.measurements,n.issuedTime,{filters:B,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ko).machineId;this.granularityDirectory=new RM(e,this.ctx.get(Cg))}return this.granularityDirectory}makeFilterSettings(e){return new sI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,n){try{return this.assignments.fetchExpConfig(e,n)}catch(r){return yf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(r)}`)}}async prepareForUpcomingFilters(e,n){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,i()),n)}stringify(){let e=this.assignments.getCachedExpConfig(new sI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),n=xM(this.ctx),r=await this.getExpConfig(e,n);return{filters:e,exp:r}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??FTe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??iQ}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let n=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return n?n.split(",").map(r=>r.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??NTe+I8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}enableSpeculativeRequestsShown(e){return e.filtersAndExp.exp.variables.copilotspeculativerequestsshown??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};f();f();var sQ=qe(oQ());var sne={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function g0(t){return t in sne&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(g0,"isSupportedLanguageId");function aQ(t){if(!(t in sne))throw new Error(`Unrecognized language: ${t}`);return sne[t]}s(aQ,"languageIdToWasmLanguage");var one=new Map;async function e0t(t){let e;try{e=await LM(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new GS(`Could not load tree-sitter-${t}.wasm`,n):n}return sQ.default.Language.load(e)}s(e0t,"loadWasmLanguage");function lne(t){let e=aQ(t);if(!one.has(e)){let n=e0t(e);one.set(e,n)}return one.get(e)}s(lne,"getLanguage");var ane=class extends Error{static{s(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function M1(t,e){await sQ.default.init({locateFile:s(o=>Lte(o),"locateFile")});let n;try{n=new sQ.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new ane(`Could not init Parse for language <${t}>`,o):o}let r=await lne(t);n.setLanguage(r);let i=n.parse(e);return n.delete(),i}s(M1,"parseTreeSitter");function MTe(t){switch(aQ(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(MTe,"getBlockCloseToken");function t0t(t,e){let n=[];for(let r of t){if(!r[1]){let i=e.tree.getLanguage();r[1]=i.query(r[0])}n.push(...r[1].matches(e))}return n}s(t0t,"innerQuery");var n0t=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function QTe(t){return t0t([n0t],t).length==1}s(QTe,"queryPythonIsDocstring");var bg=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let n;return this.children.find(r=>(n=r.statementAt(e),n!==void 0)),n??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",n=""){let r=[`${e}${this.description}`];return this.children.forEach(i=>{r.push(i.dump(`${n}+- `,i.nextSibling===void 0?`${n}   `:`${n}|  `))}),r.join(`
`)}dumpPath(e="",n="",r=!1){if(this.parent){let i=this.parent.dumpPath(e,n,!0),o=i.length-i.lastIndexOf(`
`)-1-n.length,a=" ".repeat(o),l=r?`
${n}${a}+- `:"";return i+this.description+l}else{let i=r?`
${n}+- `:"";return e+this.description+i}}},$c=class{constructor(e,n,r,i){this.languageId=e;this.text=n;this.startOffset=r;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return w8.languageIds.has(e)||_8.languageIds.has(e)||S8.languageIds.has(e)||R8.languageIds.has(e)||k8.languageIds.has(e)||B8.languageIds.has(e)||D8.languageIds.has(e)||P8.languageIds.has(e)}static create(e,n,r,i){if(w8.languageIds.has(e))return new w8(e,n,r,i);if(_8.languageIds.has(e))return new _8(e,n,r,i);if(S8.languageIds.has(e))return new S8(e,n,r,i);if(B8.languageIds.has(e))return new B8(e,n,r,i);if(R8.languageIds.has(e))return new R8(e,n,r,i);if(k8.languageIds.has(e))return new k8(e,n,r,i);if(D8.languageIds.has(e))return new D8(e,n,r,i);if(P8.languageIds.has(e))return new P8(e,n,r,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let n;return this.statements.find(r=>(n=r.statementAt(e),n!==void 0)),n}async build(){let e=[];this.clear();let n=await this.parse();this.getStatementQuery(n).captures(n.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await M1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,n){return e.query(n)}offsetToPosition(e){let n=this.text.slice(0,e).split(`
`),r=n.length-1,i=n[n.length-1].length;return{row:r,column:i}}dump(e=""){let n=[];return this.statements.forEach((r,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);n.push(r.dump(`${e} ${o} `,`${e} ${a} `))}),n.join(`
`)}},cne=class t extends bg{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},w8=class extends $c{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new cne(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},une=class t extends bg{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},_8=class extends $c{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new une(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},dne=class t extends bg{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},S8=class extends $c{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new dne(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},fne=class t extends bg{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},R8=class extends $c{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new fne(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},pne=class t extends bg{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},k8=class extends $c{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new pne(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},mne=class t extends bg{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},B8=class extends $c{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new mne(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},hne=class t extends bg{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},D8=class extends $c{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new hne(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},gne=class t extends bg{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},P8=class extends $c{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new gne(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};f();function r0t(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(r0t,"getProxyFromEnvironment");function i0t(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(i0t,"getRejectUnauthorizedFromEnvironment");var OTe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function UTe(t){let e=r0t(t),n=N8({proxy:e,proxyStrictSSL:i0t(t)}),r=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return r&&(n.proxyKerberosServicePrincipal=r),n}s(UTe,"getHttpSettingsFromEnvironment");function N8(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:n,username:r,password:i,pathname:o,search:a,hash:l}=new URL(t.proxy);return{...t,proxy:`${e}//${n}${o}${a}${l}`,proxyAuthorization:t.proxyAuthorization||o0t(r,i)}}catch{return{...t,proxy:""}}}s(N8,"normalizeHttpSettings");function o0t(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(o0t,"getAuth");var WTe=qe(require("events"));var Ane={};g1(Ane,{activationEvents:()=>T0t,badges:()=>I0t,browser:()=>w0t,bugs:()=>g0t,build:()=>u0t,buildType:()=>d0t,categories:()=>b0t,contributes:()=>yne,default:()=>P0t,dependencies:()=>B0t,description:()=>l0t,devDependencies:()=>k0t,displayName:()=>a0t,enabledApiProposals:()=>S0t,engines:()=>v0t,extensionPack:()=>x0t,homepage:()=>m0t,icon:()=>y0t,keywords:()=>E0t,license:()=>h0t,main:()=>_0t,name:()=>s0t,overrides:()=>D0t,preview:()=>p0t,pricing:()=>C0t,publisher:()=>f0t,qna:()=>A0t,scripts:()=>R0t,version:()=>c0t});var s0t="copilot",a0t="GitHub Copilot",l0t="Your AI pair programmer",c0t="1.344.0",u0t="1677",d0t="prod",f0t="GitHub",p0t=!1,m0t="https://github.com/features/copilot?editor=vscode",h0t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",g0t={url:"https://github.com/microsoft/vscode/issues"},A0t="https://github.com/github-community/community/discussions/categories/copilot",y0t="assets/Copilot-App-Icon.png",C0t="Trial",x0t=["GitHub.copilot-chat","GitHub.copilot"],v0t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},b0t=["AI","Chat","Programming Languages","Machine Learning"],E0t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],I0t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],T0t=["onStartupFinished"],w0t="./dist/web",_0t="./dist/extension",S0t=["inlineCompletionsAdditions"],yne={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},R0t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},k0t={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},B0t={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},D0t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},P0t={name:s0t,displayName:a0t,description:l0t,version:c0t,build:u0t,buildType:d0t,publisher:f0t,preview:p0t,homepage:m0t,license:h0t,bugs:g0t,qna:A0t,icon:y0t,pricing:C0t,extensionPack:x0t,engines:v0t,categories:b0t,keywords:E0t,badges:I0t,activationEvents:T0t,browser:w0t,main:_0t,enabledApiProposals:S0t,contributes:yne,scripts:R0t,devDependencies:k0t,dependencies:B0t,overrides:D0t};var wt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",EnableSpeculativeRequestsShown:"internal.enableSpeculativeRequestsShown",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function GTe(t){return["server","parsingandserver"].includes(t)}s(GTe,"shouldDoServerTrimming");var Im=class{static{s(this,"BlockModeConfig")}},VS=class extends Im{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,n,r){let i=e.get(Rt).overrideBlockMode(r);if(i)return qTe(i,n);let o=e.get(Rt).enableProgressiveReveal(r);return ui(e,wt.AlwaysRequestMultiline)??o?qTe("moremultiline",n):n=="ruby"?"parsing":g0(n)?"parsingandserver":"server"}};function N0t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(N0t,"blockModeRequiresTreeSitter");function qTe(t,e){return t==="moremultiline"&&$c.isSupported(e)?t:N0t(t)&&!g0(e)?"server":t}s(qTe,"toApplicableBlockMode");var mc=class{static{s(this,"ConfigProvider")}},$S=class extends mc{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return F0t(e)}getOptionalConfig(e){return M0t(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},FI=class extends mc{constructor(n,r){super();this.baseConfigProvider=n;this.overrides=r;this.emitter=new WTe.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(n){return this.overrides.get(n)}getConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getConfig(n)}getOptionalConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getOptionalConfig(n)}setConfig(n,r){r!==void 0?this.overrides.set(n,r):this.overrides.delete(n)}getHttpSettings(){return this.httpSettings}setHttpSettings(n){let r=N8(n);this.httpSettings=r,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(n){return this.emitter.on("didChangeHttpSettings",n),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",n)},"dispose")}}dumpForTelemetry(){let n=this.baseConfigProvider.dumpForTelemetry();for(let r of[wt.ShowEditorCompletions,wt.EnableAutoCompletions,wt.DelayCompletions,wt.FilterCompletions]){let i=this.overrides.get(r);i!==void 0&&(n[r]=JSON.stringify(i))}return n}};function L0t(t){return t?.type==="object"&&"properties"in t}s(L0t,"isContributesObject");function HTe(t,e){let n=t,r=[];for(let i of e.split(".")){let o=[...r,i].join(".");n&&typeof n=="object"&&o in n?(n=n[o],r.length=0):r.push(i)}if(!(n===void 0||r.length>0))return n}s(HTe,"getConfigKeyRecursively");function F0t(t){if(jS.has(t))return jS.get(t);throw new Error(`Missing config default value: ${BB}.${t}`)}s(F0t,"getConfigDefaultForKey");function M0t(t){return jS.get(t)}s(M0t,"getOptionalConfigDefaultForKey");var jS=new Map([[wt.DebugOverrideCppHeadersEnableSwitch,!1],[wt.RelatedFilesVSCodeCSharp,!1],[wt.RelatedFilesVSCodeTypeScript,!1],[wt.RelatedFilesVSCode,!1],[wt.IncludeNeighboringFiles,!1],[wt.ExcludeRelatedFiles,!1],[wt.ContextProviders,[]],[wt.DebugUseEditorFetcher,null],[wt.DebugUseElectronFetcher,null],[wt.DebugOverrideLogLevels,{}],[wt.DebugSnippyOverrideUrl,""],[wt.FetchStrategy,"auto"],[wt.UseSubsetMatching,null],[wt.ContextProviderTimeBudget,void 0],[wt.DebugOverrideCapiUrl,""],[wt.DebugTestOverrideCapiUrl,""],[wt.DebugOverrideProxyUrl,""],[wt.DebugTestOverrideProxyUrl,""],[wt.DebugOverrideEngine,""],[wt.EnableSpeculativeRequests,void 0],[wt.EnableSpeculativeRequestsShown,void 0],[wt.AlwaysRequestMultiline,void 0],[wt.ModelAlwaysTerminatesSingleline,void 0],[wt.TrimCompletionsAggressively,void 0],[wt.CompletionsDebounce,void 0],[wt.NESXTab,void 0],[wt.UseWorkspaceContextCoordinator,void 0],[wt.CompletionsDelay,void 0],[wt.UseSplitContextPrompt,void 0],[wt.UseCompletionsComparisonPanel,!1],[wt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[wt.ComparisonPanelRandomizedMode,!1],[wt.ShowEditorCompletions,void 0],[wt.EnableAutoCompletions,void 0],[wt.DelayCompletions,void 0],[wt.FilterCompletions,void 0]]);for(let t of Object.values(wt)){let e=yne.configuration[0],n=[],r=`${BB}.${t}`.split(".");for(;r.length>0;){n.push(r.shift());let i=e.properties[n.join(".")];if(L0t(i))n.length=0,e=i;else if(r.length==0&&i?.default!==void 0){if(jS.has(t))throw new Error(`Duplicate config default value ${BB}.${t}`);jS.set(t,i.default)}}if(!jS.has(t))throw new Error(`Missing config default value ${BB}.${t}`)}function ui(t,e){return t.get(mc).getConfig(e)}s(ui,"getConfig");function DIe(t){return t.get(mc).dumpForTelemetry()}s(DIe,"dumpForTelemetry");var zi=class{constructor(){this.packageJson=Ane}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function Bte(t){return t.get(zi).isProduction()}s(Bte,"isProduction");function E2e(t){return t.get(zi).getBuildType()==="dev"}s(E2e,"isDevBuild");function Ag(t){return t.get(zi).getBuildType()}s(Ag,"getBuildType");function PIe(t){return t.get(zi).getBuild()}s(PIe,"getBuild");function TI(t){return t.get(zi).getVersion()}s(TI,"getVersion");var Ko=class{constructor(e,n,r="none",i="desktop"){this.sessionId=e;this.machineId=n;this.remoteName=r;this.uiKind=i}static{s(this,"EditorSession")}};function og({name:t,version:e}){return`${t}/${e}`}s(og,"formatNameAndVersion");var Jn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},ig="2025-05-01";function tm(t){let e=t.get(Jn);return{"Editor-Version":og(e.getEditorInfo()),"Editor-Plugin-Version":og(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":TI(t)}}s(tm,"editorVersionHeaders");var Cm="Iv1.b507a08c87ecfe98",Ml=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??Cm}};f();var tv=require("fs"),jTe=require("os"),VTe=qe(require("path")),zS=require("process");var gc=class{static{s(this,"PersistenceManager")}},Cne=class extends gc{constructor(n){super();this.directory=n}static{s(this,"FilePersistenceManager")}async read(n,r){try{return(await this.readJsonObject(n))[r]}catch{return}}async update(n,r,i){await tv.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${n}.json`,a=await this.readJsonObject(n);a[r]=i,await tv.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(n,r){let i=`${this.directory}/${n}.json`;try{let o=await this.readJsonObject(n);delete o[r];let a=JSON.stringify(o)+`
`;a===`{}
`?await tv.promises.rm(i):await tv.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(n){let r=`${this.directory}/${n}.json`;try{await tv.promises.rm(r)}catch{}}async listSettings(){try{return(await tv.promises.readdir(this.directory)).filter(r=>r.endsWith(".json")).map(r=>r.slice(0,-5))}catch{return[]}}async listKeys(n){return Object.keys(await this.readJsonObject(n))}async readJsonObject(n){let r=`${this.directory}/${n}.json`;try{let i=await tv.promises.readFile(r,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function xne(){return zS.env.XDG_CONFIG_HOME&&VTe.isAbsolute(zS.env.XDG_CONFIG_HOME)?zS.env.XDG_CONFIG_HOME+"/github-copilot":(0,jTe.platform)()==="win32"?zS.env.USERPROFILE+"\\AppData\\Local\\github-copilot":zS.env.HOME+"/.config/github-copilot"}s(xne,"getXdgConfigPath");function $Te(){return new Cne(xne())}s($Te,"makeXdgPersistenceManager");f();f();f();var MI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var zTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],YTe={".php":[".blade"]},QI=Object.keys(MI).flatMap(t=>MI[t].extensions);var vne=qe(require("node:path"));var KS=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{s(this,"Language")}},L8=class{static{s(this,"LanguageDetection")}},bne=new Map,YS=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(MI)){for(let r of e)bne.set(r,[...bne.get(r)??[],t]);for(let r of n??[])YS.set(r,[...YS.get(r)??[],t])}var Ene=class extends L8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Ti(e.uri),r=vne.extname(n).toLowerCase(),i=this.extensionWithoutTemplateLanguage(n,r),o=this.detectLanguageId(n,i),a=this.computeFullyQualifiedExtension(r,i);return o?new KS(o.languageId,o.isGuess,a):new KS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,n){if(zTe.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),i=vne.extname(r).toLowerCase();if(i.length>0&&QI.includes(i)&&this.isExtensionValidForTemplateLanguage(n,i))return i}return n}isExtensionValidForTemplateLanguage(e,n){let r=YTe[e];return!r||r.includes(n)}detectLanguageId(e,n){if(YS.has(e))return{languageId:YS.get(e)[0],isGuess:!1};let r=bne.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),YS.has(e))return{languageId:YS.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},Ine=class extends L8{constructor(n){super();this.delegate=n}static{s(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),i=r.languageId;return i==="c"||i==="cpp"?new KS("cpp",r.isGuess,r.fileExtension):r}},Tne=class extends L8{constructor(n){super();this.delegate=n}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new KS(n.languageId,!0,""):this.delegate.detectLanguage(n)}},Q0t=new Ine(new Tne(new Ene));function JS({uri:t,languageId:e}){let n=Q0t.detectLanguage({uri:t,languageId:"UNKNOWN"});return n.languageId==="UNKNOWN"?e:n.languageId}s(JS,"detectLanguage");f();f();f();f();function Q1(t){if(t.isCancellationRequested)throw new lQ}s(Q1,"throwIfCancellationRequested");function uQ(t){return t instanceof lQ?!0:t instanceof Error&&t.name===wne&&t.message===wne}s(uQ,"isCancellationError");var lQ=class extends Error{static{s(this,"CancellationError")}constructor(){super(wne),this.name=this.message}},wne="Canceled",cQ=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function OI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(OI,"isTypeDefinition");var es=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],i=this.start;for(i=JTe(e,e.length,i),KTe(r,n);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?r.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(r.push(`
`),i=JTe(e,e.length,++i),KTe(r,n)):i++;return r.join("")}};function KTe(t,e){for(let n=0;n<e;n++)t.push(" ")}s(KTe,"appendIndent");function JTe(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}s(JTe,"consumeIndent");var Ff=class{constructor(e,n,r,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ka=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await M1(this.languageId,e),i=r.getLanguage(),a=this.getOrCreateQuery(i,n).matches(r.rootNode);return{tree:r,matches:a}}async executeQuery(e,n,r){let i;try{i=await this.findMatches(n,r);let o=new cQ,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,n,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=es.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(r):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=r.length,c=m);let y=es.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Ff(n,"","",es.fromBounds(o,a),es.fromBounds(u,d),es.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(r),E=this.createNameFromScopes(r,e.toArray());return E=g?`${g}.${E}`:E,new Ff(n,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var dQ=class extends Ka{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,O0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},fQ=class extends Ka{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,q0t)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,W0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},pQ=class extends Ka{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,U0t),i=new Set;try{r.matches.forEach(o=>{let a,l,c;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?l=u:u.name==="import"&&(c=u);if(a&&c){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=l?new es(l.node.startIndex,l.node.endIndex-l.node.startIndex):new es(d,p-d),h=new es(c.node.startIndex,c.node.endIndex-c.node.startIndex),g=es.empty,y=es.empty,v=u.substring(u.lastIndexOf("/")+1);i.add(new Ff(e,u,v,g,m,y,h,17,0))}})}finally{r.tree.delete()}return i.size>0?[...i]:[]}},O0t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,U0t=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,q0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,W0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var hQ=class extends Ka{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,G0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},gQ=class extends Ka{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,j0t)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,V0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},AQ=class extends Ka{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){return(await this.executeQuery(e,n,H0t)).filter(i=>i.kind===0)}},G0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,H0t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,j0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,V0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var $0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),yQ=class extends Ka{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,z0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},CQ=class extends Ka{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,Y0t)).filter(i=>!$0t.has(i.unqualifiedName))}};var z0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,Y0t=`
(call_expression function: (_) @name) @reference
`;f();var K0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),xQ=class extends Ka{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,J0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},vQ=class extends Ka{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,X0t)).filter(i=>!K0t.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,eft),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},bQ=class extends Ka{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,Z0t),i=new Set;try{r.matches.forEach(o=>{let a,l,c,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=a||c,p=l?new es(l.node.startIndex,l.node.endIndex-l.node.startIndex):new es(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new es(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=es.empty,g=es.empty,y=d.node.text,v=y.split(".").pop()||y,b;a?b=`${c.node.text}.${a.node.text}`:b=c.node.text,i.add(new Ff(e,b,v,h,p,g,m,17,0))}})}finally{r.tree.delete()}return i.size>0?[...i]:[]}},J0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,X0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Z0t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,eft=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var tft=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),XS=class extends Ka{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,nft)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},ZS=class extends Ka{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,rft)).filter(i=>!tft.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}};var nft=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,rft=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var ift=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),EQ=class extends XS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,oft),super.extractSymbols(e,n)]).then(([r,i])=>[...r,...i])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},IQ=class extends ZS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,i]=await Promise.all([this.executeQuery(e,n,sft),super.extractReferences(e,n)]);return[...r.filter(o=>!ift.has(o.unqualifiedName)),...i]}},oft=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,sft=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var F8=[{symbolExtractor:new hQ,referenceExtractor:new gQ,importExtractor:new AQ,languageId:"java"},{symbolExtractor:new dQ,referenceExtractor:new fQ,importExtractor:new pQ,languageId:"go"},{symbolExtractor:new xQ,referenceExtractor:new vQ,importExtractor:new bQ,languageId:"python"},{symbolExtractor:new XS,referenceExtractor:new ZS,languageId:"typescript"},{symbolExtractor:new EQ,referenceExtractor:new IQ,languageId:"typescriptreact"},{symbolExtractor:new yQ,referenceExtractor:new CQ,languageId:"javascript"}];function XTe(t){let e=JS({uri:t});if(e&&F8.some(n=>e===n.languageId))return e}s(XTe,"getSupportedLanguageIdForMultiLanguageProvider");var ZTe=new Map(F8.map(t=>[t.languageId,t.referenceExtractor])),TQ=new Map(F8.map(t=>[t.languageId,t.symbolExtractor])),ewe=new Map(F8.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),_ne=F8.map(t=>MI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function Sne(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}s(Sne,"virtualNode");function twe(t,e,n,r,i){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:i}}s(twe,"lineNode");function Rne(t){return{type:"blank",lineNumber:t,subs:[]}}s(Rne,"blankNode");function wQ(t){return{type:"top",indentation:-1,subs:t??[]}}s(wQ,"topNode");function Ac(t){return t.type==="blank"}s(Ac,"isBlank");function UI(t){return t.type==="line"}s(UI,"isLine");function qI(t){return t.type==="virtual"}s(qI,"isVirtual");f();function nwe(t,e){return zc(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}s(nwe,"clearLabelsIf");function WI(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>WI(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>WI(n,e)),label:t.label?e(t.label):void 0}}}s(WI,"mapLabels");function zc(t,e,n){function r(i){n==="topDown"&&e(i),i.subs.forEach(o=>{r(o)}),n==="bottomUp"&&e(i)}s(r,"_visit"),r(t)}s(zc,"visitTree");function kne(t,e,n,r){let i=e;function o(a){i=n(a,i)}return s(o,"visitor"),zc(t,o,r),i}s(kne,"foldTree");function _Q(t,e,n){let r=s(o=>{if(n!==void 0&&n(o))return o;{let a=o.subs.map(r).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=r(t);return i!==void 0?i:wQ()}s(_Q,"rebuildTree");f();function lft(t){let e=t.split(`
`),n=e.map(u=>u.match(/^\s*/)[0].length),r=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,n[u]);return[twe(n[u],u,r[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<r.length&&(r[h]===""||n[h]>d);)if(r[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(Rne(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<r.length&&r[c]==="";)a.push(Rne(c)),c+=1;if(c<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${r.length}`);return wQ(a)}s(lft,"parseRaw");function M8(t,e){function n(r){if(UI(r)){let i=e.find(o=>o.matches(r.sourceLine));i&&(r.label=i.label)}}s(n,"visitor"),zc(t,n,"bottomUp")}s(M8,"labelLines");function SQ(t){function e(n){if(qI(n)&&n.label===void 0){let r=n.subs.filter(i=>!Ac(i));r.length===1&&(n.label=r[0].label)}}s(e,"visitor"),zc(t,e,"bottomUp")}s(SQ,"labelVirtualInherited");function Q8(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=s(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}s(Q8,"buildLabelRules");function Bne(t){let n=_Q(t,s(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let i=[],o;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],c=r.subs[a-1];if(l.label==="opener"&&c!==void 0&&UI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(UI(l)||qI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&Ac(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Sne(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),Ac(l)||(o=l)}return r.subs=i,r},"rebuilder"));return nwe(t,r=>r==="newVirtual"),n}s(Bne,"combineClosersAndOpeners");function rwe(t,e=Ac,n){return _Q(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=Sne(l,a,n);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),Ac(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(rwe,"groupBlocks");function GI(t){return _Q(t,s(function(n){return qI(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&qI(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}s(GI,"flattenVirtual");var cft={opener:/^[[({]/,closer:/^[\])}]/},uft=Q8(cft),iwe={};function Dne(t,e){iwe[t]=e}s(Dne,"registerLanguageSpecificParser");function HI(t,e){let n=lft(t),r=iwe[e??""];return r?r(n):(M8(n,uft),Bne(n))}s(HI,"parseTree");var dft={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},fft=Q8(dft);function owe(t){let e=t;return M8(e,fft),e=Bne(e),e=GI(e),SQ(e),zc(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!Ac(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}s(owe,"processJava");f();var pft={heading:/^# /,subheading:/^## /,subsubheading:/### /},mft=Q8(pft);function swe(t){let e=t;if(M8(e,mft),Ac(e))return e;function n(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(n,"headingLevel");let r=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=n(o);if(a===void 0||Ac(o))r[r.length-1].subs.push(o);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(o),r[a]=o;r.length>a+1;)r.pop()}}return e=rwe(e),e=GI(e),SQ(e),e}s(swe,"processMarkdown");f();function awe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(awe,"deparseLine");Dne("markdown",swe);Dne("java",owe);var hft={worthUp:.9,worthSibling:.88,worthDown:.8};function Pne(t,e,n=Bo(),r=hft){let i=WI(t,o=>o?1:void 0);return zc(i,o=>{if(Ac(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*r.worthUp)},"bottomUp"),zc(i,o=>{if(Ac(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(r.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,r.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),gft(i,e,n)}s(Pne,"fromTreeWithFocussedLines");function gft(t,e,n=Bo()){let r=kne(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[awe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Dt(r,e,n)}s(gft,"fromTreeWithValuedLines");function A0(t,e=!0,n=!0,r,i=Bo()){let o=typeof t=="string"?HI(t):HI(t.source,t.languageId);GI(o);let a=WI(o,l=>e&&l!=="closer");return zc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&zc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),n&&zc(a,l=>{l.label||=(UI(l)||Ac(l))&&l.lineNumber==0},"topDown"),Pne(a,r,i)}s(A0,"elidableTextForSourceCode");f();var O8=class t{constructor(e,n,r,i="strict",o){this.text=e;this._value=n;this._cost=r;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>Bo().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Dt=class t{constructor(e,n,r=Bo()){this.metadata=n;this.tokenizer=r;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new O8(c,a,r.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&A0(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>Bo().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u}=yft(this.lines,i);if(c<=e)return Nne(l);Cft(u,a);let d=c;for(;d>e&&u.length>0;){let m=u.shift().originalIndex,h=l[m];if(h.markedForRemoval)continue;let g=r?xft(l,m):"",y=lwe(g,n,o,h);l[m]=y,d-=h.cost,d+=y.cost;let v=m+1;if(v<l.length){let E=l[v];RQ(E,n)&&(d-=E.cost,E.markedForRemoval=!0)}let b=m-1;if(b>=0){let E=l[b];RQ(E,n)&&(d-=E.cost,E.markedForRemoval=!0)}}if(d>e)return Nne([lwe("",n,o)]);let p=l.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)RQ(p[m],n)&&RQ(p[m-1],n)&&p.splice(m,1);return Nne(p)}};function Aft(t){return t?.text.match(/^\s*/)?.[0]??""}s(Aft,"getIndentation");function RQ(t,e){return t?.text.trim()===e.trim()}s(RQ,"isEllipsis");function Nne(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(Nne,"produceElidedText");function yft(t,e){let n=0,r=[];return{lines:t.map((o,a)=>{let l=o.copy();return e==="removeLeastBangForBuck"&&l.adjustValue(1/l.cost),n+=l.cost,r.push({originalIndex:a,value:l.value}),l}),totalCost:n,priorityQueue:r}}s(yft,"initializeElisionContext");function Cft(t,e){t.sort((n,r)=>n.value!==r.value?n.value-r.value:e==="bottomToTop"?r.originalIndex-n.originalIndex:n.originalIndex-r.originalIndex)}s(Cft,"sortPriorityQueue");function xft(t,e){let n="";for(let r=e;r>=0;r--){let i=t[r];if(!i.markedForRemoval&&i.text.trim()!==""){n=Aft(i);break}}return n}s(xft,"getClosestIndentation");function lwe(t,e,n,r){let i=t+e;return new O8(i,1/0,n.tokenLength(i+`
`),"loose",r?.metadata)}s(lwe,"getNewEllipsis");f();f();function Tm(){}s(Tm,"Diff");Tm.prototype={diff:s(function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),n=this.castInput(n,i),e=this.removeEmpty(this.tokenize(e,i)),n=this.removeEmpty(this.tokenize(n,i));var c=n.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(r=i.timeout)!==null&&r!==void 0?r:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],n,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(cwe(a,g[0].lastComponent,n,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var B=void 0,N=g[k-1],U=g[k+1];N&&(g[k-1]=void 0);var re=!1;if(U){var me=U.oldPos-k;re=U&&0<=me&&me<c}var ae=N&&N.oldPos+1<u;if(!re&&!ae){g[k]=void 0;continue}if(!ae||re&&N.oldPos<U.oldPos?B=a.addToPath(U,!0,!1,0,i):B=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(B,n,e,k,i),B.oldPos+1>=u&&y+1>=c)return l(cwe(a,B.lastComponent,n,e,a.useLongestToken));g[k]=B,B.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,n,r,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,n,r,i,o){for(var a=n.length,l=r.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(r[c+1],n[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function cwe(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(r.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=n.slice(u,u+p.count);m=m.map(function(h,g){var y=r[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(n.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(cwe,"buildValues");var mTn=new Tm;function uwe(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}s(uwe,"longestCommonPrefix");function dwe(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}s(dwe,"longestCommonSuffix");function Lne(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}s(Lne,"replacePrefix");function Fne(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}s(Fne,"replaceSuffix");function U8(t,e){return Lne(t,e,"")}s(U8,"removePrefix");function kQ(t,e){return Fne(t,e,"")}s(kQ,"removeSuffix");function fwe(t,e){return e.slice(0,vft(t,e))}s(fwe,"maximumOverlap");function vft(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var i=Array(r),o=0;i[0]=0;for(var a=1;a<r;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=n;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(vft,"overlapCount");var BQ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",bft=new RegExp("[".concat(BQ,"]+|\\s+|[^").concat(BQ,"]"),"ug"),DQ=new Tm;DQ.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};DQ.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else n=t.match(bft)||[];var r=[],i=null;return n.forEach(function(o){/\s/.test(o)?i==null?r.push(o):r.push(r.pop()+o):/\s/.test(i)?r[r.length-1]==i?r.push(r.pop()+o):r.push(i+o):r.push(o),i=o}),r};DQ.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};DQ.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,i=null;return t.forEach(function(o){o.added?r=o:o.removed?i=o:((r||i)&&pwe(n,i,r,o),n=o,r=null,i=null)}),(r||i)&&pwe(n,i,r,null),t};function pwe(t,e,n,r){if(e&&n){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var c=uwe(i,a);t.value=Fne(t.value,a,c),e.value=U8(e.value,c),n.value=U8(n.value,c)}if(r){var u=dwe(o,l);r.value=Lne(r.value,l,u),e.value=kQ(e.value,u),n.value=kQ(n.value,u)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var d=r.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=uwe(d,p);e.value=U8(e.value,h);var g=dwe(U8(d,h),m);e.value=kQ(e.value,g),r.value=Lne(r.value,d,g),t.value=Fne(t.value,d,d.slice(0,d.length-g.length))}else if(r){var y=r.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=fwe(v,y);e.value=kQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=fwe(E,_);e.value=U8(e.value,k)}}s(pwe,"dedupeWhitespaceInChangeObjects");var Eft=new Tm;Eft.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(BQ,"]+|[^\\S\\n\\r]+|[^").concat(BQ,"]"),"ug");return t.match(e)||[]};var Une=new Tm;Une.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var i=0;i<r.length;i++){var o=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=o:n.push(o)}return n};Une.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Tm.prototype.equals.call(this,t,e,n)};var Ift=new Tm;Ift.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Tft=new Tm;Tft.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Mne(t){"@babel/helpers - typeof";return Mne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mne(t)}s(Mne,"_typeof");var q8=new Tm;q8.useLongestToken=!0;q8.tokenize=Une.tokenize;q8.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(Qne(t,null,null,i),i,"  ")};q8.equals=function(t,e,n){return Tm.prototype.equals.call(q8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function Qne(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=Qne(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),Mne(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=Qne(t[c],e,n,r,c);e.pop(),n.pop()}else a=t;return a}s(Qne,"canonicalize");var One=new Tm;One.tokenize=function(t){return t.slice()};One.join=One.removeEmpty=function(t){return t};var mwe=require("fs");async function hwe(t,e,n,r,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(n.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;Q1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await _ft([y])).elide(b).getText();l-=r.tokenLength(E),u.push({uri:h,value:E})}}return u}s(hwe,"symbolRangesToCodeSnippets");async function _ft(t){if(t.length===0)return new Dt([]);let e=t[0].node.fileName,n=[],r="";try{let i=Go(e);i&&(r=(await mwe.promises.readFile(i)).toString())}catch{}for(let i of t)gwe(i,r).forEach(o=>n.push(o));return new Dt(n)}s(_ft,"sameFileSymbolRangeToElidableText");function gwe(t,e){let r=[],i=t.node,o=e.substring(qne(e,i.commentRange.start),i.commentRange.end);r.push([Wne(o),1-3e-4]);let a=qne(e,i.bodyRange.start),l=qne(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(OI(i.kind)&&(c="BEGIN "+c.trimStart()),r.push([Wne(c),1-1e-4]),t.children.length>0)for(let u of t.children)r.push(...gwe(u,e));else{let u=1-(OI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);r.push([Wne(d),u])}return OI(i.kind)&&r.push(["END "+c.substring(6),1-1e-4]),r.filter(u=>u[0].length>0)}s(gwe,"prepareForElidableText");function qne(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(qne,"shiftLeftToNearestLineEndingOrAlphanumeric");function Wne(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}s(Wne,"trimLineEndingsAndTrailingWhitespace");var Gne=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=n}static{s(this,"ContextRetrievalStrategy")}},nv=class extends Gne{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,i){super(e,n),this.caseSensitive=r,this.typesOnly=i}async getContextAtPositionAsync(e,n,r,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];Q1(a);let c=await l.extractReferences(e,n);Q1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,r));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>OI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,n,r){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,r),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>n.mlcpMaxSymbolMatches)){if(d.length+m.length>n.mlcpMaxContextItems){d.push(...m.slice(0,n.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,n){if(Q1(n),OI(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),i=await Promise.all(r.map(o=>this.makeSymbolRangeNodeFromDefinition(o,n)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let i=e.extentRange.end<=r,o=n.extentRange.end<=r;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-r),l=Math.abs(n.extentRange.start-r);return a-l}},PQ=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new nv(e,n,!0,!0)),this.strategies.set("java",new nv(e,n,!0,!0)),this.strategies.set("python",new nv(e,n,!0,!1)),this.strategies.set("typescript",new nv(e,n,!0,!0)),this.strategies.set("typescriptreact",new nv(e,n,!0,!0)),this.strategies.set("javascript",new nv(e,n,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,i,o,a,l){let c=await this.getContextAtPositionAsync(e,n,r,i,o,l);Q1(l);let u=Bo();return hwe(c,a,e,u,l)}async getContextAtPositionAsync(e,n,r,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,n,r,i,o,a):[]}};f();f();f();f();var jI={Id:"id"},y0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Fi={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var NQ=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new Hne(jI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},W8=class t extends NQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${y0.FilePath}');`]);this.fields=[new j8(y0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new yd(y0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},G8=class t extends NQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Fi.DocumentId}', '${Fi.ExtentStart}', '${Fi.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Fi.UnqualifiedName}');`],`FOREIGN KEY(${Fi.DocumentId}) REFERENCES Document(${jI.Id}) ON DELETE CASCADE`);this.fields=[new yd(Fi.DocumentId),new j8(Fi.FullyQualifiedName,{notNull:!0}),new j8(Fi.UnqualifiedName,{notNull:!0}),new yd(Fi.CommentStart,{notNull:!0}),new yd(Fi.CommentLength,{notNull:!0}),new yd(Fi.NameStart,{notNull:!0}),new yd(Fi.NameLength,{notNull:!0}),new yd(Fi.BodyStart,{notNull:!0}),new yd(Fi.BodyLength,{notNull:!0}),new yd(Fi.ExtentStart,{notNull:!0}),new yd(Fi.ExtentLength,{notNull:!0}),new yd(Fi.SymbolKind,{notNull:!0}),new yd(Fi.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},H8=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{s(this,"SQLField")}},j8=class extends H8{static{s(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,n,r,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},yd=class extends H8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Hne=class extends H8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var LQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let i of r)await n(i)}async insert(e,n){let r=await this.init;r&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Mf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return Mf(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${jI.Id} = ?`,[e])}},O1=class t extends LQ{static{s(this,"DocumentTable")}static{this.tableName=W8.tableName}createQueryGenerator(){return new W8}async updateTimestamp(e,n){let r=await this.init;r&&await Mf(r,`UPDATE ${t.tableName} SET ${y0.LastWriteTimeUtc} = ? WHERE ${y0.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await Mf(n,`DELETE FROM ${t.tableName} WHERE ${y0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?Mf(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${y0.FilePath} = ?`,[e]):[]}},Ja=class t extends LQ{static{s(this,"SymbolTable")}static{this.tableName=G8.tableName}createQueryGenerator(){return new G8}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return Mf(n,`DELETE FROM ${t.tableName} WHERE ${Fi.DocumentId} = ?`,[e])}};async function Mf(t,e,n){return new Promise((r,i)=>t.all(e,n,(o,a)=>{o&&i(o),r(a)}))}s(Mf,"runPromisifiedDBQuery");var QQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${O1.tableName} ON ${Ja.tableName}.${Fi.DocumentId} = ${O1.tableName}.${jI.Id}`;this.db=this.initDb(e),this.documentTable=new O1(this.db),this.symbolTable=new Ja(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>qe(Swe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let r;try{r=await new Promise((i,o)=>{let a=new n.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Mf(r,"pragma journal_mode=wal",[]),await Mf(r,"pragma synchronous=normal",[]),await Mf(r,"pragma optimize=0x10002",[]),await Mf(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(i=>i?r(i):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Fi.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),i=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.UnqualifiedName} ${i}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${O1.tableName}.${y0.FilePath} = ? AND ${Ja.tableName}.${Fi.ExtentStart} <= ? AND (${Ja.tableName}.${Fi.ExtentStart} + ${Ja.tableName}.${Fi.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${O1.tableName}.${y0.FilePath} = ? AND ${Ja.tableName}.${Fi.ExtentStart} >= ? AND (${Ja.tableName}.${Fi.ExtentStart} + ${Ja.tableName}.${Fi.ExtentLength}) <= ?`,`ORDER BY ${Ja.tableName}.${Fi.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${O1.tableName}.${y0.FilePath} = ? AND ${Ja.tableName}.${Fi.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ja.tableName}.${Fi.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,Mf(r,e,n)):[]}};var OQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new QQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let i=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(i.id),r.length>0&&await this.database.insertSymbols(r.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return n5(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,n);i.push(...c),Q1(r)}return n5(i)}async getDefinitionsAsync(e){return n5(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return n5(r)}async findSymbolsContainedByRangeAsync(e,n,r){return n5(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return n5(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function n5(t){return t.map(e=>new Ff(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new es(e.commentStart,e.commentLength),new es(e.nameStart,e.nameLength),new es(e.bodyStart,e.bodyLength),new es(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(n5,"symbolsToSymbolRanges");var qQ=qe(require("fs/promises"));var UQ=class{static{s(this,"Index")}constructor(e,n,r,i){this.storage=new OQ(e),this.symbolExtractors=n,this.importExtractors=r,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=Go(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await qQ.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.get(n);if(!l)return;let c=(await qQ.readFile(r)).toString(),u=await l.extractSymbols(e,c),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(n);if(p){let m=await p.extractSymbols(e,c);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};f();function Kne(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>Nft(n))}s(Kne,"isIndexWorkerData");var $8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},rv=class extends $8{constructor(n,r){super(r);this.id=n;this.id=n}static{s(this,"IndexRequest")}},WQ=class extends $8{constructor(n){super(Yc.Cancel);this.messageIdToCancel=n}static{s(this,"CancellationNotification")}},Yc={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},GQ=class extends rv{constructor(n,r,i){super(n,Yc.CreateIndex);this.baseWorkspaceFolderUri=r;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},HQ=class extends rv{constructor(n,r){super(n,Yc.RemoveIndex);this.baseWorkspaceFolderUri=r}static{s(this,"RemoveIndexRequest")}},jQ=class extends rv{constructor(n,r,i){super(n,Yc.AddOrInvalidated);this.fileUri=r;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},VQ=class extends rv{constructor(n,r){super(n,Yc.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=r}static{s(this,"GetAllDocumentsRequest")}},$Q=class extends rv{constructor(n,r,i,o,a,l){super(n,Yc.GetContext);this.fileUri=r;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},zQ=class extends rv{static{s(this,"ExitRequest")}constructor(e){super(e,Yc.Exit)}},wm=class extends $8{constructor(n,r,i){super(Yc.Response);this.id=n;this.error=r;this.data=i;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{s(this,"ResponseMessage")}};function Nft(t){return"databaseFilePath"in t&&"rootPath"in t}s(Nft,"isIndexableWorkspaceFolder");var Rwe=qe(ri()),iv=require("worker_threads");var YQ=class{static{s(this,"IndexInfo")}constructor(e,n){this.index=new UQ(e,TQ,ewe,n),this.contextRetreival=new PQ(this.index.reader,ZTe)}},Jne=class t{constructor(e,n,r){this.indices=new Map;this.cancellationTokens=new Map;this.params=r;for(let i of n){let o=aa(i.rootPath);this.indices.set(o,new YQ(i.databaseFilePath,r))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let i=new Rwe.CancellationTokenSource;r.set(e.id,i);let o;switch(e.operation){case Yc.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,n,i.token);break;case Yc.GetContext:o=await t.dispatchGetContext(e,n,i.token);break;case Yc.Cancel:r.get(e.id)?.cancel(),o=new wm(e.id,void 0,void 0);break;case Yc.Exit:o=await this.dispatchExit(e,n,i.token);break;case Yc.CreateIndex:o=await t.dispatchCreateIndex(e,n,i.token);break;case Yc.RemoveIndex:o=await t.dispatchRemoveIndex(e,n,i.token);break;case Yc.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,n,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),r.get(e.id)?.dispose(),r.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new wm(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let i=aa(e.baseWorkspaceFolderUri),o,a;return n.has(i)?a=await n.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new wm(e.id,o,a)}static async dispatchAddOrInvalidate(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new wm(e.id,a,void 0)}static async dispatchGetContext(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new wm(e.id,a,l)}async dispatchExit(e,n,r){for(let i of n.values())await i.index.dispose();n.clear(),this.port?.postMessage(new wm(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);return n.has(i)||n.set(i,new YQ(e.databaseFilePath)),new wm(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);if(n.has(i)){let o=n.get(i);o&&await o.index.dispose(),n.delete(i)}return new wm(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,i]of n)if(e.startsWith(r))return i}};function kwe(){return Kne(iv.workerData)}s(kwe,"isIndexWorker");function Bwe(){let t=iv.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Kne(iv.workerData))throw new Error("Worker data must provide a valid database path.");let e=iv.workerData.cwd;process.cwd=()=>e,new Jne(t,iv.workerData.indexWorkspaceRoots,iv.workerData.params)}s(Bwe,"runIndexWorker");f();var z8=qe(require("util"));function Dwe(t){let e=new console.Console(process.stderr,process.stderr);function n(r,...i){if(Ag(t)==="dev")return t.get(Va).logIt(t,r,"console",...i)}return s(n,"logIt"),e.debug=(...r)=>n(4,...r),e.info=(...r)=>n(3,...r),e.warn=(...r)=>n(2,...r),e.error=(...r)=>n(1,...r),e.assert=(r,...i)=>{r||(i.length===0?n(2,"Assertion failed"):n(2,"Assertion failed:",z8.format(...i)))},e.dir=(r,i)=>n(4,z8.inspect(r,i)),e.log=e.debug.bind(e),e.trace=(...r)=>{let i=new Error(z8.format(...r));i.name="Trace",e.log(i)},e}s(Dwe,"createConsole");var rC=qe(require("fs/promises")),AJe=qe(require("os")),hN=qe(require("path")),Np=qe(Sm()),yJe=require("worker_threads");f();f();var PO=require("assert");f();f();var $pt={right:Xpt,center:Zpt},zpt=0,wO=1,Ypt=2,_O=3,Ere=class{static{s(this,"UI")}constructor(e){var n;this.width=e.width,this.wrap=(n=e.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...e){let n=this.div(...e);n.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let n=e.map(r=>typeof r=="string"?this.colFromString(r):r);return this.rows.push(n),n}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let n=e.split(`
`).map(i=>i.split("	")),r=0;return n.forEach(i=>{i.length>1&&C0.stringWidth(i[0])>r&&(r=Math.min(Math.floor(this.width*.5),C0.stringWidth(i[0])))}),n.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?r:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let n=C0.stripAnsi(e);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(n=>{this.rowToString(n,e)}),e.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(e,n){return this.rasterize(e).forEach((r,i)=>{let o="";r.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>C0.stringWidth(a)&&(d+=" ".repeat(u-C0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=$pt[e[l].align];d=m(d,u),C0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-C0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[_O]&&(o+=" ".repeat(p[_O])),o+=w_e(e[l],d,"| "),o+=d,o+=w_e(e[l],d," |"),p[wO]&&(o+=" ".repeat(p[wO])),i===0&&n.length>0&&(o=this.renderInline(o,n[n.length-1]))}),n.push({text:o.replace(/ +$/,""),span:e.span})}),n}renderInline(e,n){let r=e.match(/^ */),i=r?r[0].length:0,o=n.text,a=C0.stringWidth(o.trimRight());return n.span?this.wrap?i<a?e:(n.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(n.hidden=!0,o+e):e}rasterize(e){let n=[],r=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=r[a],this.wrap?i=C0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[zpt]||0).fill("")),i.push(...new Array(o.padding[Ypt]||0).fill(""))),i.forEach((l,c)=>{n[c]||n.push([]);let u=n[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),n}negatePadding(e){let n=e.width||0;return e.padding&&(n-=(e.padding[_O]||0)+(e.padding[wO]||0)),e.border&&(n-=4),n}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||C0.stringWidth(a.text));let n=e.length,r=this.width,i=e.map(a=>{if(a.width)return n--,r-=a.width,a.width}),o=n?Math.floor(r/n):0;return i.map((a,l)=>a===void 0?Math.max(o,Kpt(e[l])):a)}};function w_e(t,e,n){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?n:"  ":""}s(w_e,"addBorder");function Kpt(t){let e=t.padding||[],n=1+(e[_O]||0)+(e[wO]||0);return t.border?n+4:n}s(Kpt,"_minWidth");function Jpt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(Jpt,"getWindowWidth");function Xpt(t,e){t=t.trim();let n=C0.stringWidth(t);return n<e?" ".repeat(e-n)+t:t}s(Xpt,"alignRight");function Zpt(t,e){t=t.trim();let n=C0.stringWidth(t);return n>=e?t:" ".repeat(e-n>>1)+t}s(Zpt,"alignCenter");var C0;function __e(t,e){return C0=e,new Ere({width:t?.width||Jpt(),wrap:t?.wrap})}s(__e,"cliui");f();var S_e=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Ire(t){return t.replace(S_e,"")}s(Ire,"stripAnsi");function R_e(t,e){let[n,r]=t.match(S_e)||["",""];t=Ire(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return n&&r&&(i=`${n}${i}${r}`),i}s(R_e,"wrap");function Tre(t){return __e(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:Ire,wrap:R_e})}s(Tre,"ui");f();var s5=require("path"),SO=require("fs");function wre(t,e){let n=(0,s5.resolve)(".",t),r;for((0,SO.statSync)(n).isDirectory()||(n=(0,s5.dirname)(n));;){if(r=e(n,(0,SO.readdirSync)(n)),r)return(0,s5.resolve)(n,r);if(n=(0,s5.dirname)(r=n),r===n)break}}s(wre,"default");var j_e=require("util"),V_e=require("fs"),$_e=require("url");f();var N_e=require("util"),DO=require("path");f();function YI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let n="",r=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);r&&(r=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?r=!0:a!=="-"&&a!=="_"&&(n+=a)}return n}}s(YI,"camelCase");function RO(t,e){let n=t.toLowerCase();e=e||"-";let r="";for(let i=0;i<t.length;i++){let o=n.charAt(i),a=t.charAt(i);o!==a&&i>0?r+=`${e}${n.charAt(i)}`:r+=a}return r}s(RO,"decamelize");function kO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(kO,"looksLikeNumber");f();f();function k_e(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,n=null,r=null,i=null,o=[];for(let a=0;a<t.length;a++){if(n=r,r=t.charAt(a),r===" "&&!i){n!==" "&&e++;continue}r===i?i=null:(r==="'"||r==='"')&&!i&&(i=r),o[e]||(o[e]=""),o[e]+=r}return o}s(k_e,"tokenizeArgString");f();var Gf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(Gf||(Gf={}));var U1,BO=class{static{s(this,"YargsParser")}constructor(e){U1=e}parse(e,n){let r=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),i=k_e(e),o=typeof e=="string",a=emt(Object.assign(Object.create(null),r.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},r.configuration),c=Object.assign(Object.create(null),r.default),u=r.configObjects||[],d=r.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=r.__||U1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(r.array||[]).filter(Boolean).forEach(function(Z){let ne=typeof Z=="object"?Z.key:Z,Ge=Object.keys(Z).map(function(Pe){return{boolean:"bools",string:"strings",number:"numbers"}[Pe]}).filter(Boolean).pop();Ge&&(v[Ge][ne]=!0),v.arrays[ne]=!0,v.keys.push(ne)}),[].concat(r.boolean||[]).filter(Boolean).forEach(function(Z){v.bools[Z]=!0,v.keys.push(Z)}),[].concat(r.string||[]).filter(Boolean).forEach(function(Z){v.strings[Z]=!0,v.keys.push(Z)}),[].concat(r.number||[]).filter(Boolean).forEach(function(Z){v.numbers[Z]=!0,v.keys.push(Z)}),[].concat(r.count||[]).filter(Boolean).forEach(function(Z){v.counts[Z]=!0,v.keys.push(Z)}),[].concat(r.normalize||[]).filter(Boolean).forEach(function(Z){v.normalize[Z]=!0,v.keys.push(Z)}),typeof r.narg=="object"&&Object.entries(r.narg).forEach(([Z,ne])=>{typeof ne=="number"&&(v.nargs[Z]=ne,v.keys.push(Z))}),typeof r.coerce=="object"&&Object.entries(r.coerce).forEach(([Z,ne])=>{typeof ne=="function"&&(v.coercions[Z]=ne,v.keys.push(Z))}),typeof r.config<"u"&&(Array.isArray(r.config)||typeof r.config=="string"?[].concat(r.config).filter(Boolean).forEach(function(Z){v.configs[Z]=!0}):typeof r.config=="object"&&Object.entries(r.config).forEach(([Z,ne])=>{(typeof ne=="boolean"||typeof ne=="function")&&(v.configs[Z]=ne)})),Qe(r.key,a,r.default,v.arrays),Object.keys(c).forEach(function(Z){(v.aliases[Z]||[]).forEach(function(ne){c[ne]=c[Z]})});let _=null;tt();let k=[],B=Object.assign(Object.create(null),{_:[]}),N={};for(let Z=0;Z<i.length;Z++){let ne=i[Z],Ge=ne.replace(/^-{3,}/,"---"),Pe,be,ze,it,ht,Ot;if(ne!=="--"&&/^-/.test(ne)&&It(ne))U(ne);else if(Ge.match(/^---+(=|$)/)){U(ne);continue}else if(ne.match(/^--.+=/)||!l["short-option-groups"]&&ne.match(/^-.+=/))it=ne.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(ke(it[1],v.arrays)?Z=me(Z,it[1],i,it[2]):ke(it[1],v.nargs)!==!1?Z=re(Z,it[1],i,it[2]):ae(it[1],it[2],!0));else if(ne.match(E)&&l["boolean-negation"])it=ne.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ae(be,ke(be,v.arrays)?[!1]:!1));else if(ne.match(/^--.+/)||!l["short-option-groups"]&&ne.match(/^-[^-]+/))it=ne.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ke(be,v.arrays)?Z=me(Z,be,i):ke(be,v.nargs)!==!1?Z=re(Z,be,i):(ht=i[Z+1],ht!==void 0&&(!ht.match(/^-/)||ht.match(b))&&!ke(be,v.bools)&&!ke(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),Z++):ae(be,vt(be))));else if(ne.match(/^-.\..+=/))it=ne.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&ae(it[1],it[2]);else if(ne.match(/^-.\..+/)&&!ne.match(b))ht=i[Z+1],it=ne.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ht!==void 0&&!ht.match(/^-/)&&!ke(be,v.bools)&&!ke(be,v.counts)?(ae(be,ht),Z++):ae(be,vt(be)));else if(ne.match(/^-[^-]+/)&&!ne.match(b)){ze=ne.slice(1,-1).split(""),Pe=!1;for(let cn=0;cn<ze.length;cn++){if(ht=ne.slice(cn+2),ze[cn+1]&&ze[cn+1]==="="){Ot=ne.slice(cn+3),be=ze[cn],ke(be,v.arrays)?Z=me(Z,be,i,Ot):ke(be,v.nargs)!==!1?Z=re(Z,be,i,Ot):ae(be,Ot),Pe=!0;break}if(ht==="-"){ae(ze[cn],ht);continue}if(/[A-Za-z]/.test(ze[cn])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ht)&&ke(ht,v.bools)===!1){ae(ze[cn],ht),Pe=!0;break}if(ze[cn+1]&&ze[cn+1].match(/\W/)){ae(ze[cn],ht),Pe=!0;break}else ae(ze[cn],vt(ze[cn]))}be=ne.slice(-1)[0],!Pe&&be!=="-"&&(ke(be,v.arrays)?Z=me(Z,be,i):ke(be,v.nargs)!==!1?Z=re(Z,be,i):(ht=i[Z+1],ht!==void 0&&(!/^(-|--)[^-]/.test(ht)||ht.match(b))&&!ke(be,v.bools)&&!ke(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),Z++):ae(be,vt(be))))}else if(ne.match(/^-[0-9]$/)&&ne.match(b)&&ke(ne.slice(1),v.bools))be=ne.slice(1),ae(be,vt(be));else if(ne==="--"){k=i.slice(Z+1);break}else if(l["halt-at-non-option"]){k=i.slice(Z);break}else U(ne)}Y(B,!0),Y(B,!1),ie(B),O(),te(B,v.aliases,c,!0),K(B),l["set-placeholder-key"]&&le(B),Object.keys(v.counts).forEach(function(Z){pe(B,Z.split("."))||ae(Z,0)}),p&&k.length&&(B[m]=[]),k.forEach(function(Z){B[m].push(Z)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(B).filter(Z=>Z!=="--"&&Z.includes("-")).forEach(Z=>{delete B[Z]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(Z=>a[Z])).forEach(Z=>{l["camel-case-expansion"]&&Z.includes("-")&&delete B[Z.split(".").map(ne=>YI(ne)).join(".")],delete B[Z]});function U(Z){let ne=ue("_",Z);(typeof ne=="string"||typeof ne=="number")&&B._.push(ne)}s(U,"pushPositional");function re(Z,ne,Ge,Pe){let be,ze=ke(ne,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(Pe)||(_=Error(y("Argument unexpected for: %s",ne))),ae(ne,vt(ne)),Z;let it=ye(Pe)?0:1;if(l["nargs-eats-options"])Ge.length-(Z+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",ne))),it=ze;else{for(be=Z+1;be<Ge.length&&(!Ge[be].match(/^-[^0-9]/)||Ge[be].match(b)||It(Ge[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",ne)))}let ht=Math.min(it,ze);for(!ye(Pe)&&ht>0&&(ae(ne,Pe),ht--),be=Z+1;be<ht+Z+1;be++)ae(ne,Ge[be]);return Z+ht}s(re,"eatNargs");function me(Z,ne,Ge,Pe){let be=[],ze=Pe||Ge[Z+1],it=ke(ne,v.nargs);if(ke(ne,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(Pe)&&/^-/.test(ze)&&!b.test(ze)&&!It(ze)){if(c[ne]!==void 0){let ht=c[ne];be=Array.isArray(ht)?ht:[ht]}}else{ye(Pe)||be.push(G(ne,Pe,!0));for(let ht=Z+1;ht<Ge.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=Ge[ht],/^-/.test(ze)&&!b.test(ze)&&!It(ze)));ht++)Z=ht,be.push(G(ne,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ne))),ae(ne,be),Z}s(me,"eatArray");function ae(Z,ne,Ge=o){if(/-/.test(Z)&&l["camel-case-expansion"]){let ze=Z.split(".").map(function(it){return YI(it)}).join(".");H(Z,ze)}let Pe=G(Z,ne,Ge),be=Z.split(".");he(B,be,Pe),v.aliases[Z]&&v.aliases[Z].forEach(function(ze){let it=ze.split(".");he(B,it,Pe)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),ht=[].concat(be);ht.shift(),it=it.concat(ht),(v.aliases[Z]||[]).includes(it.join("."))||he(B,it,Pe)}),ke(Z,v.normalize)&&!ke(Z,v.arrays)&&[Z].concat(v.aliases[Z]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return ne},set(ht){ne=typeof ht=="string"?U1.normalize(ht):ht}})})}s(ae,"setArg");function H(Z,ne){v.aliases[Z]&&v.aliases[Z].length||(v.aliases[Z]=[ne],h[ne]=!0),v.aliases[ne]&&v.aliases[ne].length||H(ne,Z)}s(H,"addNewAlias");function G(Z,ne,Ge){Ge&&(ne=tmt(ne)),(ke(Z,v.bools)||ke(Z,v.counts))&&typeof ne=="string"&&(ne=ne==="true");let Pe=Array.isArray(ne)?ne.map(function(be){return ue(Z,be)}):ue(Z,ne);return ke(Z,v.counts)&&(ye(Pe)||typeof Pe=="boolean")&&(Pe=_re()),ke(Z,v.normalize)&&ke(Z,v.arrays)&&(Array.isArray(ne)?Pe=ne.map(be=>U1.normalize(be)):Pe=U1.normalize(ne)),Pe}s(G,"processValue");function ue(Z,ne){return!l["parse-positional-numbers"]&&Z==="_"||!ke(Z,v.strings)&&!ke(Z,v.bools)&&!Array.isArray(ne)&&(kO(ne)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ne}`)))||!ye(ne)&&ke(Z,v.numbers))&&(ne=Number(ne)),ne}s(ue,"maybeCoerceNumber");function ie(Z){let ne=Object.create(null);te(ne,v.aliases,c),Object.keys(v.configs).forEach(function(Ge){let Pe=Z[Ge]||ne[Ge];if(Pe)try{let be=null,ze=U1.resolve(U1.cwd(),Pe),it=v.configs[Ge];if(typeof it=="function"){try{be=it(ze)}catch(ht){be=ht}if(be instanceof Error){_=be;return}}else be=U1.require(ze);$(be)}catch(be){be.name==="PermissionDenied"?_=be:Z[Ge]&&(_=Error(y("Invalid JSON config file: %s",Pe)))}})}s(ie,"setConfig");function $(Z,ne){Object.keys(Z).forEach(function(Ge){let Pe=Z[Ge],be=ne?ne+"."+Ge:Ge;typeof Pe=="object"&&Pe!==null&&!Array.isArray(Pe)&&l["dot-notation"]?$(Pe,be):(!pe(B,be.split("."))||ke(be,v.arrays)&&l["combine-arrays"])&&ae(be,Pe)})}s($,"setConfigObject");function O(){typeof u<"u"&&u.forEach(function(Z){$(Z)})}s(O,"setConfigObjects");function Y(Z,ne){if(typeof d>"u")return;let Ge=typeof d=="string"?d:"",Pe=U1.env();Object.keys(Pe).forEach(function(be){if(Ge===""||be.lastIndexOf(Ge,0)===0){let ze=be.split("__").map(function(it,ht){return ht===0&&(it=it.substring(Ge.length)),YI(it)});(ne&&v.configs[ze.join(".")]||!ne)&&!pe(Z,ze)&&ae(ze.join("."),Pe[be])}})}s(Y,"applyEnvVars");function K(Z){let ne,Ge=new Set;Object.keys(Z).forEach(function(Pe){if(!Ge.has(Pe)&&(ne=ke(Pe,v.coercions),typeof ne=="function"))try{let be=ue(Pe,ne(Z[Pe]));[].concat(v.aliases[Pe]||[],Pe).forEach(ze=>{Ge.add(ze),Z[ze]=be})}catch(be){_=be}})}s(K,"applyCoercions");function le(Z){return v.keys.forEach(ne=>{~ne.indexOf(".")||typeof Z[ne]>"u"&&(Z[ne]=void 0)}),Z}s(le,"setPlaceholderKeys");function te(Z,ne,Ge,Pe=!1){Object.keys(Ge).forEach(function(be){pe(Z,be.split("."))||(he(Z,be.split("."),Ge[be]),Pe&&(g[be]=!0),(ne[be]||[]).forEach(function(ze){pe(Z,ze.split("."))||he(Z,ze.split("."),Ge[be])}))})}s(te,"applyDefaultsAndAliases");function pe(Z,ne){let Ge=Z;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(be){Ge=Ge[be]||{}});let Pe=ne[ne.length-1];return typeof Ge!="object"?!1:Pe in Ge}s(pe,"hasKey");function he(Z,ne,Ge){let Pe=Z;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(Ot){Ot=B_e(Ot),typeof Pe=="object"&&Pe[Ot]===void 0&&(Pe[Ot]={}),typeof Pe[Ot]!="object"||Array.isArray(Pe[Ot])?(Array.isArray(Pe[Ot])?Pe[Ot].push({}):Pe[Ot]=[Pe[Ot],{}],Pe=Pe[Ot][Pe[Ot].length-1]):Pe=Pe[Ot]});let be=B_e(ne[ne.length-1]),ze=ke(ne.join("."),v.arrays),it=Array.isArray(Ge),ht=l["duplicate-arguments-array"];!ht&&ke(be,v.nargs)&&(ht=!0,(!ye(Pe[be])&&v.nargs[be]===1||Array.isArray(Pe[be])&&Pe[be].length===v.nargs[be])&&(Pe[be]=void 0)),Ge===_re()?Pe[be]=_re(Pe[be]):Array.isArray(Pe[be])?ht&&ze&&it?Pe[be]=l["flatten-duplicate-arrays"]?Pe[be].concat(Ge):(Array.isArray(Pe[be][0])?Pe[be]:[Pe[be]]).concat([Ge]):!ht&&!!ze==!!it?Pe[be]=Ge:Pe[be]=Pe[be].concat([Ge]):Pe[be]===void 0&&ze?Pe[be]=it?Ge:[Ge]:ht&&!(Pe[be]===void 0||ke(be,v.counts)||ke(be,v.bools))?Pe[be]=[Pe[be],Ge]:Pe[be]=Ge}s(he,"setKey");function Qe(...Z){Z.forEach(function(ne){Object.keys(ne||{}).forEach(function(Ge){v.aliases[Ge]||(v.aliases[Ge]=[].concat(a[Ge]||[]),v.aliases[Ge].concat(Ge).forEach(function(Pe){if(/-/.test(Pe)&&l["camel-case-expansion"]){let be=YI(Pe);be!==Ge&&v.aliases[Ge].indexOf(be)===-1&&(v.aliases[Ge].push(be),h[be]=!0)}}),v.aliases[Ge].concat(Ge).forEach(function(Pe){if(Pe.length>1&&/[A-Z]/.test(Pe)&&l["camel-case-expansion"]){let be=RO(Pe,"-");be!==Ge&&v.aliases[Ge].indexOf(be)===-1&&(v.aliases[Ge].push(be),h[be]=!0)}}),v.aliases[Ge].forEach(function(Pe){v.aliases[Pe]=[Ge].concat(v.aliases[Ge].filter(function(be){return Pe!==be}))}))})})}s(Qe,"extendAliases");function ke(Z,ne){let Ge=[].concat(v.aliases[Z]||[],Z),Pe=Object.keys(ne),be=Ge.find(ze=>Pe.includes(ze));return be?ne[be]:!1}s(ke,"checkAllAliases");function Ze(Z){let ne=Object.keys(v);return[].concat(ne.map(Pe=>v[Pe])).some(function(Pe){return Array.isArray(Pe)?Pe.includes(Z):Pe[Z]})}s(Ze,"hasAnyFlag");function Fe(Z,...ne){return[].concat(...ne).some(function(Pe){let be=Z.match(Pe);return be&&Ze(be[1])})}s(Fe,"hasFlagsMatching");function ft(Z){if(Z.match(b)||!Z.match(/^-[^-]+/))return!1;let ne=!0,Ge,Pe=Z.slice(1).split("");for(let be=0;be<Pe.length;be++){if(Ge=Z.slice(be+2),!Ze(Pe[be])){ne=!1;break}if(Pe[be+1]&&Pe[be+1]==="="||Ge==="-"||/[A-Za-z]/.test(Pe[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(Ge)||Pe[be+1]&&Pe[be+1].match(/\W/))break}return ne}s(ft,"hasAllShortFlags");function It(Z){return l["unknown-options-as-args"]&&yt(Z)}s(It,"isUnknownOptionAsArg");function yt(Z){return Z=Z.replace(/^-{3,}/,"--"),Z.match(b)||ft(Z)?!1:!Fe(Z,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(yt,"isUnknownOption");function vt(Z){return!ke(Z,v.bools)&&!ke(Z,v.counts)&&`${Z}`in c?c[Z]:ce(Oe(Z))}s(vt,"defaultValue");function ce(Z){return{[Gf.BOOLEAN]:!0,[Gf.STRING]:"",[Gf.NUMBER]:void 0,[Gf.ARRAY]:[]}[Z]}s(ce,"defaultForType");function Oe(Z){let ne=Gf.BOOLEAN;return ke(Z,v.strings)?ne=Gf.STRING:ke(Z,v.numbers)?ne=Gf.NUMBER:ke(Z,v.bools)?ne=Gf.BOOLEAN:ke(Z,v.arrays)&&(ne=Gf.ARRAY),ne}s(Oe,"guessType");function ye(Z){return Z===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(Z=>ke(Z,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",Z)),!0):ke(Z,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",Z)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,B),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function emt(t){let e=[],n=Object.create(null),r=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});r;){r=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),r=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(n[o]=i)}),n}s(emt,"combineAliases");function _re(t){return t!==void 0?t+1:1}s(_re,"increment");function B_e(t){return t==="__proto__"?"___proto___":t}s(B_e,"sanitizeKey");function tmt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(tmt,"stripQuotes");var L_e=require("fs");var Sre,Rre,kre,D_e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,P_e=(Rre=(Sre=process==null?void 0:process.versions)===null||Sre===void 0?void 0:Sre.node)!==null&&Rre!==void 0?Rre:(kre=process==null?void 0:process.version)===null||kre===void 0?void 0:kre.slice(1);if(P_e&&Number(P_e.match(/^([^.]+)/)[1])<D_e)throw Error(`yargs parser supports a minimum Node.js version of ${D_e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var nmt=process?process.env:{},F_e=new BO({cwd:process.cwd,env:s(()=>nmt,"env"),format:N_e.format,normalize:DO.normalize,resolve:DO.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,L_e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),tD=s(function(e,n){return F_e.parse(e.slice(),n).argv},"Parser");tD.detailed=function(t,e){return F_e.parse(t.slice(),e)};tD.camelCase=YI;tD.decamelize=RO;tD.looksLikeNumber=kO;var M_e=tD;var km=require("path");f();function rmt(){return imt()?0:1}s(rmt,"getProcessArgvBinIndex");function imt(){return omt()&&!process.defaultApp}s(imt,"isBundledElectronApp");function omt(){return!!process.versions.electron}s(omt,"isElectronApp");function Q_e(){return process.argv[rmt()]}s(Q_e,"getProcessArgvBin");f();var As=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var a5=require("fs"),O_e=require("util"),U_e=require("path");var q_e={fs:{readFileSync:a5.readFileSync,writeFile:a5.writeFile},format:O_e.format,resolve:U_e.resolve,exists:s(t=>{try{return(0,a5.statSync)(t).isFile()}catch{return!1}},"exists")};f();var Rm,Bre=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let n=e.shift(),r=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(r=e.pop()),r=r||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r(),Rm.format.apply(Rm.format,[this.cache[this.locale][n]||n].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?n:r;this.cache[this.locale][n]&&(a=this.cache[this.locale][n][i===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:r},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),Rm.format.apply(Rm.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.cache[this.locale][n]=e[n])}_taggedLiteral(e,...n){let r="";return e.forEach(function(i,o){let a=n[o+1];r+=i,typeof a<"u"&&(r+="%s")}),this.__.apply(this,[r].concat([].slice.call(n,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,n=this.writeQueue[0],r=n.directory,i=n.locale,o=n.cb,a=this._resolveLocaleFile(r,i),l=JSON.stringify(this.cache[i],null,2);Rm.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},n=this._resolveLocaleFile(this.directory,this.locale);try{Rm.fs.readFileSync&&(e=JSON.parse(Rm.fs.readFileSync(n,"utf-8")))}catch(r){if(r instanceof SyntaxError&&(r.message="syntax error in "+n),r.code==="ENOENT")e={};else throw r}this.cache[this.locale]=e}_resolveLocaleFile(e,n){let r=Rm.resolve(e,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(r)&&~n.lastIndexOf("_")){let i=Rm.resolve(e,"./",n.split("_")[0]+".json");this._fileExistsSync(i)&&(r=i)}return r}_fileExistsSync(e){return Rm.exists(e)}};function W_e(t,e){Rm=e;let n=new Bre(t);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}s(W_e,"y18n");var smt=s(t=>W_e(t,q_e),"y18n"),G_e=smt;var amt="require is not supported by ESM",H_e="loading a directory of commands is not supported yet for ESM",nD;try{nD=(0,$_e.fileURLToPath)(importMetaUrlShim)}catch{nD=process.cwd()}var lmt=nD.substring(0,nD.lastIndexOf("node_modules")),z_e={assert:{notStrictEqual:PO.notStrictEqual,strictEqual:PO.strictEqual},cliui:Tre,findUp:wre,getEnv:s(t=>process.env[t],"getEnv"),inspect:j_e.inspect,getCallerFile:s(()=>{throw new As(H_e)},"getCallerFile"),getProcessArgvBin:Q_e,mainFilename:lmt||process.cwd(),Parser:M_e,path:{basename:km.basename,dirname:km.dirname,extname:km.extname,relative:km.relative,resolve:km.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:V_e.readFileSync,require:s(()=>{throw new As(amt)},"require"),requireDirectory:s(()=>{throw new As(H_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:G_e({directory:(0,km.resolve)(nD,"../../../locales"),updateFiles:!1})};f();f();f();function ku(t,e,n,r){n.assert.notStrictEqual(t,e,r)}s(ku,"assertNotStrictEqual");function Dre(t,e){e.assert.strictEqual(typeof t,"string")}s(Dre,"assertSingleKey");function l5(t){return Object.keys(t)}s(l5,"objectKeys");f();function ys(t){return!!t&&!!t.then&&typeof t.then=="function"}s(ys,"isPromise");f();f();f();function lv(t){let n=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),r=/\.*[\][<>]/g,i=n.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(r,""),demanded:[],optional:[]};return n.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===n.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(r,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(r,"").split("|"),variadic:c})}),o}s(lv,"parseCommand");var cmt=["first","second","third","fourth","fifth","sixth"];function xn(t,e,n){function r(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[lv(`cmd ${t}`),e,n]}s(r,"parseArgs");try{let i=0,[o,a,l]=r(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new As(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new As(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=Y_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&K_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=Y_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&K_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(xn,"argsert");function Y_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(Y_e,"guessType");function K_e(t,e,n){throw new As(`Invalid ${cmt[n]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(K_e,"argumentTypeError");var NO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,n,r=!0,i=!1){if(xn("<array|function> [boolean] [boolean] [boolean]",[e,n,r],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=n,a.global=r}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=n,o.global=r,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,n){let r=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...r[n]||[],n];return i.option?!o.includes(i.option):!0}),e.option=n,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function J_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(J_e,"commandMiddlewareFactory");function KI(t,e,n,r){return n.reduce((i,o)=>{if(o.applyBeforeValidation!==r)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(ys(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return ys(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(KI,"applyMiddleware");f();function JI(t,e,n=r=>{throw r}){try{let r=umt(t)?t():t;return ys(r)?r.then(i=>e(i)):e(r)}catch(r){return n(r)}}s(JI,"maybeAsyncResult");function umt(t){return typeof t=="function"}s(umt,"isFunction");f();function Pre(t){if(typeof require>"u")return null;for(let e=0,n=Object.keys(require.cache),r;e<n.length;e++)if(r=require.cache[n[e]],r.exports===t)return r;return null}s(Pre,"whichModule");var c5=/(^\*)|(^\$0)/,Nre=class{static{s(this,"CommandInstance")}constructor(e,n,r,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=r,this.validation=n}addDirectory(e,n,r,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:n,filename:r},e,i)}addHandler(e,n,r,i,o,a){let l=[],c=J_e(o);if(i=i||(()=>{}),Array.isArray(e))if(dmt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(pmt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(X_e(r)){this.addHandler([e].concat(l),n,r.builder,r.handler,r.middlewares,r.deprecated);return}if(typeof e=="string"){let u=lv(e);l=l.map(m=>lv(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>c5.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(c5,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),n!==!1&&this.usage.command(e,n,d,l,a),this.handlers[u.cmd]={original:e,description:n,handler:i,builder:r||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,n,r,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=n.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,n,r.aliases,u,i,o,a);return ys(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,n)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,n)}applyBuilderUpdateUsageAndParse(e,n,r,i,o,a,l,c){let u=n.builder,d=r;if(LO(u)){r.getInternalMethods().getUsageInstance().freeze();let p=u(r.getInternalMethods().reset(i),c);if(ys(p))return p.then(m=>(d=eSe(m)?m:r,this.parseAndUpdateUsage(e,n,d,o,a,l)))}else fmt(u)&&(r.getInternalMethods().getUsageInstance().freeze(),d=r.getInternalMethods().reset(i),Object.keys(n.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,n,d,o,a,l)}parseAndUpdateUsage(e,n,r,i,o,a){e&&r.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(r)&&r.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,n),n.description);let l=r.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return ys(l)?l.then(c=>({aliases:r.parsed.aliases,innerArgv:c})):{aliases:r.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,n){let r=c5.test(n.original)?n.original.replace(c5,"").trim():n.original,i=e.filter(o=>!c5.test(o));return i.push(r),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,n,r,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);r=JI(r,d=>(u(d),d))}if(n.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(r,u,!1,!1),r=KI(r,a,l,!1),r=JI(r,d=>{let p=n.handler(d);return ys(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),ys(r)&&!a.getInternalMethods().hasParseCallback()&&r.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),r}applyMiddlewareAndGetResult(e,n,r,i,o,a,l){let c={};if(o)return r;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(n,r,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(n.middlewares),d=KI(r,l,u,!0);return ys(d)?d.then(p=>this.handleValidationAndGetResult(e,n,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,n,d,i,a,l,u,c)}populatePositionals(e,n,r,i){n._=n._.slice(r.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,n._.length);o.length;){let c=o.shift();this.populatePositional(c,n,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,n,l)}return n._=r.commands.concat(n._.map(c=>""+c)),this.postProcessPositionals(n,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,n,r){let i=e.cmd[0];e.variadic?r[i]=n._.splice(0).map(String):n._.length&&(r[i]=[String(n._.shift())])}cmdToParseOptions(e){let n={array:[],default:{},alias:{},demand:{}},r=lv(e);return r.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a,n.demand[o]=!0}),r.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a}),n}postProcessPositionals(e,n,r,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(r.default,o.default);for(let u of Object.keys(r.alias))o.alias[u]=(o.alias[u]||[]).concat(r.alias[u]);o.array=o.array.concat(r.array),o.config={};let a=[];if(Object.keys(n).forEach(u=>{n[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(n);Object.keys(n).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(n[d]||(n[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,n){let{default:r}=e.getOptions();return Object.prototype.hasOwnProperty.call(r,n)||Object.prototype.hasOwnProperty.call(r,this.shim.Parser.camelCase(n))}isInConfigs(e,n){let{configObjects:r}=e.getOptions();return r.some(i=>Object.prototype.hasOwnProperty.call(i,n))||r.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(n)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let r=c5.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(r,this.defaultCommand.description)}let n=this.defaultCommand.builder;if(LO(n))return n(e,!0);X_e(n)||Object.keys(n).forEach(r=>{e.option(r,n[r])})}moduleName(e){let n=Pre(e);if(!n)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(n.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:n,desc:r}){for(let i of[e,n,r]){if(typeof i=="string"||i===!1)return i;ku(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();ku(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Z_e(t,e,n,r){return new Nre(t,e,n,r)}s(Z_e,"command");function X_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(X_e,"isCommandBuilderDefinition");function dmt(t){return t.every(e=>typeof e=="string")}s(dmt,"isCommandAndAliases");function LO(t){return typeof t=="function"}s(LO,"isCommandBuilderCallback");function fmt(t){return typeof t=="object"}s(fmt,"isCommandBuilderOptionDefinitions");function pmt(t){return typeof t=="object"&&!Array.isArray(t)}s(pmt,"isCommandHandlerDefinition");f();f();function cv(t={},e=()=>!0){let n={};return l5(t).forEach(r=>{e(r,t[r])&&(n[r]=t[r])}),n}s(cv,"objFilter");f();function uv(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let n=e;n._handle&&n.isTTY&&typeof n._handle.setBlocking=="function"&&n._handle.setBlocking(t)})}s(uv,"setBlocking");function mmt(t){return typeof t=="boolean"}s(mmt,"isBoolean");function nSe(t,e){let n=e.y18n.__,r={},i=[];r.failFn=s(function(G){i.push(G)},"failFn");let o=null,a=null,l=!0;r.showHelpOnFail=s(function(G=!0,ue){let[ie,$]=typeof G=="string"?[!0,G]:[G,ue];return t.getInternalMethods().isGlobalContext()&&(a=$),o=$,l=ie,r},"showHelpOnFailFn");let c=!1;r.fail=s(function(G,ue){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let $=i.length-1;$>=0;--$){let O=i[$];if(mmt(O)){if(ue)throw ue;if(G)throw Error(G)}else O(G,ue,r)}else{if(t.getExitProcess()&&uv(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(G||ue)&&ie.error(G||ue);let $=o||a;$&&((G||ue)&&ie.error(""),ie.error($))}if(ue=ue||new As(G),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ue);throw ue}},"fail");let u=[],d=!1;r.usage=(H,G)=>H===null?(d=!0,u=[],r):(d=!1,u.push([H,G||""]),r),r.getUsage=()=>u,r.getUsageDisabled=()=>d,r.getPositionalGroupName=()=>n("Positionals:");let p=[];r.example=(H,G)=>{p.push([H,G||""])};let m=[];r.command=s(function(G,ue,ie,$,O=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([G,ue||"",ie,$,O])},"command"),r.getCommands=()=>m;let h={};r.describe=s(function(G,ue){Array.isArray(G)?G.forEach(ie=>{r.describe(ie,ue)}):typeof G=="object"?Object.keys(G).forEach(ie=>{r.describe(ie,G[ie])}):h[G]=ue},"describe"),r.getDescriptions=()=>h;let g=[];r.epilog=H=>{g.push(H)};let y=!1,v;r.wrap=H=>{y=!0,v=H},r.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=re(),y=!0),v);let b="__yargsString__:";r.deferY18nLookup=H=>b+H,r.help=s(function(){if(k)return k;_();let G=t.customScriptName?t.$0:e.path.basename(t.$0),ue=t.getDemandedOptions(),ie=t.getDemandedCommands(),$=t.getDeprecatedOptions(),O=t.getGroups(),Y=t.getOptions(),K=[];K=K.concat(Object.keys(h)),K=K.concat(Object.keys(ue)),K=K.concat(Object.keys(ie)),K=K.concat(Object.keys(Y.default)),K=K.filter(N),K=Object.keys(K.reduce((Fe,ft)=>(ft!=="_"&&(Fe[ft]=!0),Fe),{}));let le=r.getWrap(),te=e.cliui({width:le,wrap:!!le});if(!d){if(u.length)u.forEach(Fe=>{te.div({text:`${Fe[0].replace(/\$0/g,G)}`}),Fe[1]&&te.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),te.div();else if(m.length){let Fe=null;ie._?Fe=`${G} <${n("command")}>
`:Fe=`${G} [${n("command")}]
`,te.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){te.div(n("Commands:"));let Fe=t.getInternalMethods().getContext(),ft=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((yt,vt)=>yt[0].localeCompare(vt[0])));let It=G?`${G} `:"";m.forEach(yt=>{let vt=`${It}${ft}${yt[0].replace(/^\$0 ?/,"")}`;te.span({text:vt,padding:[0,2,0,2],width:E(m,le,`${G}${ft}`)+4},{text:yt[1]});let ce=[];yt[2]&&ce.push(`[${n("default")}]`),yt[3]&&yt[3].length&&ce.push(`[${n("aliases:")} ${yt[3].join(", ")}]`),yt[4]&&(typeof yt[4]=="string"?ce.push(`[${n("deprecated: %s",yt[4])}]`):ce.push(`[${n("deprecated")}]`)),ce.length?te.div({text:ce.join(" "),padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}let pe=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);K=K.filter(Fe=>!t.parsed.newAliases[Fe]&&pe.every(ft=>(Y.alias[ft]||[]).indexOf(Fe)===-1));let he=n("Options:");O[he]||(O[he]=[]),B(K,Y.alias,O,he);let Qe=s(Fe=>/^--/.test(FO(Fe)),"isLongSwitch"),ke=Object.keys(O).filter(Fe=>O[Fe].length>0).map(Fe=>{let ft=O[Fe].filter(N).map(It=>{if(pe.includes(It))return It;for(let yt=0,vt;(vt=pe[yt])!==void 0;yt++)if((Y.alias[vt]||[]).includes(It))return vt;return It});return{groupName:Fe,normalizedKeys:ft}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ft})=>{let It=ft.reduce((yt,vt)=>(yt[vt]=[vt].concat(Y.alias[vt]||[]).map(ce=>Fe===r.getPositionalGroupName()?ce:(/^[0-9]$/.test(ce)?Y.boolean.includes(vt)?"-":"--":ce.length>1?"--":"-")+ce).sort((ce,Oe)=>Qe(ce)===Qe(Oe)?0:Qe(ce)?1:-1).join(", "),yt),{});return{groupName:Fe,normalizedKeys:ft,switches:It}});if(ke.filter(({groupName:Fe})=>Fe!==r.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ft})=>!Fe.every(It=>Qe(ft[It])))&&ke.filter(({groupName:Fe})=>Fe!==r.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ft})=>{Fe.forEach(It=>{Qe(ft[It])&&(ft[It]=hmt(ft[It],4))})}),ke.forEach(({groupName:Fe,normalizedKeys:ft,switches:It})=>{te.div(Fe),ft.forEach(yt=>{let vt=It[yt],ce=h[yt]||"",Oe=null;ce.includes(b)&&(ce=n(ce.substring(b.length))),Y.boolean.includes(yt)&&(Oe=`[${n("boolean")}]`),Y.count.includes(yt)&&(Oe=`[${n("count")}]`),Y.string.includes(yt)&&(Oe=`[${n("string")}]`),Y.normalize.includes(yt)&&(Oe=`[${n("string")}]`),Y.array.includes(yt)&&(Oe=`[${n("array")}]`),Y.number.includes(yt)&&(Oe=`[${n("number")}]`);let ye=s(ne=>typeof ne=="string"?`[${n("deprecated: %s",ne)}]`:`[${n("deprecated")}]`,"deprecatedExtra"),tt=[yt in $?ye($[yt]):null,Oe,yt in ue?`[${n("required")}]`:null,Y.choices&&Y.choices[yt]?`[${n("choices:")} ${r.stringifiedValues(Y.choices[yt])}]`:null,U(Y.default[yt],Y.defaultDescription[yt])].filter(Boolean).join(" ");te.span({text:FO(vt),padding:[0,2,0,2+tSe(vt)],width:E(It,le)+4},ce);let Z=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!Z?te.div({text:tt,padding:[0,0,0,2],align:"right"}):te.div()}),te.div()}),p.length&&(te.div(n("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,G)}),p.forEach(Fe=>{Fe[1]===""?te.div({text:Fe[0],padding:[0,2,0,2]}):te.div({text:Fe[0],padding:[0,2,0,2],width:E(p,le)+4},{text:Fe[1]})}),te.div()),g.length>0){let Fe=g.map(ft=>ft.replace(/\$0/g,G)).join(`
`);te.div(`${Fe}
`)}return te.toString().replace(/\s*$/,"")},"help");function E(H,G,ue){let ie=0;return Array.isArray(H)||(H=Object.values(H).map($=>[$])),H.forEach($=>{ie=Math.max(e.stringWidth(ue?`${ue} ${FO($[0])}`:FO($[0]))+tSe($[0]),ie)}),G&&(ie=Math.min(ie,parseInt((G*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),G=t.getOptions();(Object.keys(G.alias)||[]).forEach(ue=>{G.alias[ue].forEach(ie=>{h[ie]&&r.describe(ue,h[ie]),ie in H&&t.demandOption(ue,H[ie]),G.boolean.includes(ie)&&t.boolean(ue),G.count.includes(ie)&&t.count(ue),G.string.includes(ie)&&t.string(ue),G.normalize.includes(ie)&&t.normalize(ue),G.array.includes(ie)&&t.array(ue),G.number.includes(ie)&&t.number(ue)})})}s(_,"normalizeAliases");let k;r.cacheHelpMessage=function(){k=this.help()},r.clearCachedHelpMessage=function(){k=void 0},r.hasCachedHelpMessage=function(){return!!k};function B(H,G,ue,ie){let $=[],O=null;return Object.keys(ue).forEach(Y=>{$=$.concat(ue[Y])}),H.forEach(Y=>{O=[Y].concat(G[Y]),O.some(K=>$.indexOf(K)!==-1)||ue[ie].push(Y)}),$}s(B,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),r.showHelp=H=>{let G=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:G[H])(r.help())},r.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):n("generated-value"),")"].join(""),r.stringifiedValues=s(function(G,ue){let ie="",$=ue||", ",O=[].concat(G);return!G||!O.length||O.forEach(Y=>{ie.length&&(ie+=$),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function U(H,G){let ue=`[${n("default:")} `;if(H===void 0&&!G)return null;if(G)ue+=G;else switch(typeof H){case"string":ue+=`"${H}"`;break;case"object":ue+=JSON.stringify(H);break;default:ue+=H}return`${ue}]`}s(U,"defaultString");function re(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(re,"windowWidth");let me=null;r.version=H=>{me=H},r.showVersion=H=>{let G=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:G[H])(me)},r.reset=s(function(G){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=cv(h,ue=>!G[ue]),r},"reset");let ae=[];return r.freeze=s(function(){ae.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),r.unfreeze=s(function(G=!1){let ue=ae.pop();ue&&(G?(h={...ue.descriptions,...h},m=[...ue.commands,...m],u=[...ue.usages,...u],p=[...ue.examples,...p],g=[...ue.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=ue)},"unfreeze"),r}s(nSe,"usage");function Lre(t){return typeof t=="object"}s(Lre,"isIndentedText");function hmt(t,e){return Lre(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(hmt,"addIndentation");function tSe(t){return Lre(t)?t.indentation:0}s(tSe,"getIndentation");function FO(t){return Lre(t)?t.text:t}s(FO,"getText");f();f();var rSe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,iSe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Fre=class{static{s(this,"Completion")}constructor(e,n,r,i){var o,a,l;this.yargs=e,this.usage=n,this.command=r,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,n,r,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(LO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,r),this.optionCompletions(a,e,n,r),this.choicesFromOptionsCompletions(a,e,n,r),this.choicesFromPositionalsCompletions(a,e,n,r),i(null,a)}commandCompletions(e,n,r){let i=this.yargs.getInternalMethods().getContext().commands;!r.match(/^-/)&&i[i.length-1]!==r&&!this.previousArgHasChoices(n)&&this.usage.getCommands().forEach(o=>{let a=lv(o[0]).cmd;if(n.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,n,r,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(n)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(n,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,n,r,i){if(this.previousArgHasChoices(n)){let o=this.getPreviousArgChoices(n);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,n,r,i){if(i===""&&e.length>0&&this.previousArgHasChoices(n))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[r._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let n=e[e.length-1],r="";if(!n.startsWith("-")&&e.length>1&&(r=n,n=e[e.length-2]),!n.startsWith("-"))return;let i=n.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!r||c.startsWith(r))}previousArgHasChoices(e){let n=this.getPreviousArgChoices(e);return n!==void 0&&n.length>0}argsContainKey(e,n,r){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(n)||r&&i(`no-${n}`))return!0;if(this.aliases){for(let o of this.aliases[n])if(i(o))return!0}return!1}completeOptionKey(e,n,r,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(r)&&p(e)?"-":"--";n.push(m+u),i&&n.push(m+"no-"+u)}customCompletion(e,n,r,i){if(ku(this.customCompletionFunction,null,this.shim),Amt(this.customCompletionFunction)){let o=this.customCompletionFunction(r,n);return ys(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return ymt(this.customCompletionFunction)?this.customCompletionFunction(r,n,(o=i)=>this.defaultCompletion(e,n,r,o),o=>{i(null,o)}):this.customCompletionFunction(r,n,o=>{i(null,o)})}getCompletion(e,n){let r=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,r,n):a=>this.defaultCompletion(e,a,r,n);return ys(i)?i.then(o):o(i)}generateCompletionScript(e,n){let r=this.zshShell?iSe:rSe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),r=r.replace(/{{app_name}}/g,i),r=r.replace(/{{completion_command}}/g,n),r.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function oSe(t,e,n,r){return new Fre(t,e,n,r)}s(oSe,"completion");function Amt(t){return t.length<3}s(Amt,"isSyncCompletionFunction");function ymt(t){return t.length>3}s(ymt,"isFallbackCompletionFunction");f();f();function sSe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let n=[],r;for(r=0;r<=e.length;r++)n[r]=[r];let i;for(i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:r>1&&i>1&&e.charAt(r-2)===t.charAt(i-1)&&e.charAt(r-1)===t.charAt(i-2)?n[r][i]=n[r-2][i-2]+1:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]}s(sSe,"levenshtein");var aSe=["$0","--","_"];function lSe(t,e,n){let r=n.y18n.__,i=n.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!aSe.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let B=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+B;N<p._.length&&p._.slice(N).forEach(U=>{U=String(U),!_.commands.includes(U)&&!E.includes(U)&&E.push(U)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{aSe.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=r("Invalid values:");g.forEach(v=>{y+=`
  ${r("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){xn("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(ku(m,void 0,n),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${r("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){xn("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[n.Parser.camelCase(m)]!==void 0&&p[n.Parser.camelCase(h)]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=sSe(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(r("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=cv(a,m=>!p[m]),c=cv(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();ku(p,void 0,n),{implied:a,conflicting:c}=p},"unfreeze"),o}s(lSe,"validation");f();var Mre=[],rD;function MO(t,e,n,r){rD=r;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=xmt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}Cmt(a),Mre.push(a),i=o?JSON.parse(rD.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=MO(i,rD.path.dirname(a),n,rD)}return Mre=[],n?cSe(i,t):Object.assign({},i,t)}s(MO,"applyExtends");function Cmt(t){if(Mre.indexOf(t)>-1)throw new As(`Circular extended configurations: '${t}'.`)}s(Cmt,"checkForCircularExtends");function xmt(t,e){return rD.path.resolve(t,e)}s(xmt,"getPathToDefaultConfig");function cSe(t,e){let n={};function r(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(r,"isObject"),Object.assign(n,t);for(let i of Object.keys(e))r(e[i])&&r(n[i])?n[i]=cSe(t[i],e[i]):n[i]=e[i];return n}s(cSe,"mergeDeep");var In=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},fe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Sa,XI,iD,Hf,x0,QO,dv,ZI,OO,jf,UO,Vf,Eg,v0,$f,qO,u5,Ql,Un,WO,GO,b0,e2,d5,t2,fv,HO,Nr,n2,r2,i2,Gr,jO,Ig,la;function RSe(t){return(e=[],n=t.process.cwd(),r)=>{let i=new zre(e,n,r,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(RSe,"YargsFactory");var uSe=Symbol("copyDoubleDash"),dSe=Symbol("copyDoubleDash"),Qre=Symbol("deleteFromParserHintObject"),fSe=Symbol("emitWarning"),pSe=Symbol("freeze"),mSe=Symbol("getDollarZero"),o2=Symbol("getParserConfiguration"),hSe=Symbol("getUsageConfiguration"),Ore=Symbol("guessLocale"),gSe=Symbol("guessVersion"),ASe=Symbol("parsePositionalNumbers"),Ure=Symbol("pkgUp"),pv=Symbol("populateParserHintArray"),f5=Symbol("populateParserHintSingleValueDictionary"),qre=Symbol("populateParserHintArrayDictionary"),Wre=Symbol("populateParserHintDictionary"),Gre=Symbol("sanitizeKey"),Hre=Symbol("setKey"),jre=Symbol("unfreeze"),ySe=Symbol("validateAsync"),CSe=Symbol("getCommandInstance"),xSe=Symbol("getContext"),vSe=Symbol("getHasOutput"),bSe=Symbol("getLoggerInstance"),ESe=Symbol("getParseContext"),ISe=Symbol("getUsageInstance"),TSe=Symbol("getValidationInstance"),VO=Symbol("hasParseCallback"),wSe=Symbol("isGlobalContext"),s2=Symbol("postProcess"),_Se=Symbol("rebase"),Vre=Symbol("reset"),oD=Symbol("runYargsParserAndExecuteCommands"),$re=Symbol("runValidation"),SSe=Symbol("setHasOutput"),a2=Symbol("kTrackManuallySetKeys"),zre=class{static{s(this,"YargsInstance")}constructor(e=[],n,r,i){this.customScriptName=!1,this.parsed=!1,Sa.set(this,void 0),XI.set(this,void 0),iD.set(this,{commands:[],fullCommands:[]}),Hf.set(this,null),x0.set(this,null),QO.set(this,"show-hidden"),dv.set(this,null),ZI.set(this,!0),OO.set(this,{}),jf.set(this,!0),UO.set(this,[]),Vf.set(this,void 0),Eg.set(this,{}),v0.set(this,!1),$f.set(this,null),qO.set(this,!0),u5.set(this,void 0),Ql.set(this,""),Un.set(this,void 0),WO.set(this,void 0),GO.set(this,{}),b0.set(this,null),e2.set(this,null),d5.set(this,{}),t2.set(this,{}),fv.set(this,void 0),HO.set(this,!1),Nr.set(this,void 0),n2.set(this,!1),r2.set(this,!1),i2.set(this,!1),Gr.set(this,void 0),jO.set(this,{}),Ig.set(this,null),la.set(this,void 0),In(this,Nr,i,"f"),In(this,fv,e,"f"),In(this,XI,n,"f"),In(this,WO,r,"f"),In(this,Vf,new NO(this),"f"),this.$0=this[mSe](),this[Vre](),In(this,Sa,fe(this,Sa,"f"),"f"),In(this,Gr,fe(this,Gr,"f"),"f"),In(this,la,fe(this,la,"f"),"f"),In(this,Un,fe(this,Un,"f"),"f"),fe(this,Un,"f").showHiddenOpt=fe(this,QO,"f"),In(this,u5,this[dSe](),"f")}addHelpOpt(e,n){let r="help";return xn("[string|boolean] [string]",[e,n],arguments.length),fe(this,$f,"f")&&(this[Qre](fe(this,$f,"f")),In(this,$f,null,"f")),e===!1&&n===void 0?this:(In(this,$f,typeof e=="string"?e:r,"f"),this.boolean(fe(this,$f,"f")),this.describe(fe(this,$f,"f"),n||fe(this,Gr,"f").deferY18nLookup("Show help")),this)}help(e,n){return this.addHelpOpt(e,n)}addShowHiddenOpt(e,n){if(xn("[string|boolean] [string]",[e,n],arguments.length),e===!1&&n===void 0)return this;let r=typeof e=="string"?e:fe(this,QO,"f");return this.boolean(r),this.describe(r,n||fe(this,Gr,"f").deferY18nLookup("Show hidden options")),fe(this,Un,"f").showHiddenOpt=r,this}showHidden(e,n){return this.addShowHiddenOpt(e,n)}alias(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[qre](this.alias.bind(this),"alias",e,n),this}array(e){return xn("<array|string>",[e],arguments.length),this[pv]("array",e),this[a2](e),this}boolean(e){return xn("<array|string>",[e],arguments.length),this[pv]("boolean",e),this[a2](e),this}check(e,n){return xn("<function> [boolean]",[e,n],arguments.length),this.middleware((r,i)=>JI(()=>e(r,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&fe(this,Gr,"f").fail(o.toString(),o):fe(this,Gr,"f").fail(fe(this,Nr,"f").y18n.__("Argument check failed: %s",e.toString())),r),o=>(fe(this,Gr,"f").fail(o.message?o.message:o.toString(),o),r)),!1,n),this}choices(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[qre](this.choices.bind(this),"choices",e,n),this}coerce(e,n){if(xn("<object|string|array> [function]",[e,n],arguments.length),Array.isArray(e)){if(!n)throw new As("coerce callback must be provided");for(let r of e)this.coerce(r,n);return this}else if(typeof e=="object"){for(let r of Object.keys(e))this.coerce(r,e[r]);return this}if(!n)throw new As("coerce callback must be provided");return fe(this,Un,"f").key[e]=!0,fe(this,Vf,"f").addCoerceMiddleware((r,i)=>{let o;return Object.prototype.hasOwnProperty.call(r,e)?JI(()=>(o=i.getAliases(),n(r[e])),l=>{r[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])r[u]=l;return r},l=>{throw new As(l.message)}):r},e),this}conflicts(e,n){return xn("<string|object> [string|array]",[e,n],arguments.length),fe(this,la,"f").conflicts(e,n),this}config(e="config",n,r){return xn("[object|string] [string|function] [function]",[e,n,r],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=MO(e,fe(this,XI,"f"),this[o2]()["deep-merge-config"]||!1,fe(this,Nr,"f")),fe(this,Un,"f").configObjects=(fe(this,Un,"f").configObjects||[]).concat(e),this):(typeof n=="function"&&(r=n,n=void 0),this.describe(e,n||fe(this,Gr,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{fe(this,Un,"f").config[i]=r||!0}),this)}completion(e,n,r){return xn("[string] [string|boolean|function] [function]",[e,n,r],arguments.length),typeof n=="function"&&(r=n,n=void 0),In(this,x0,e||fe(this,x0,"f")||"completion","f"),!n&&n!==!1&&(n="generate completion script"),this.command(fe(this,x0,"f"),n),r&&fe(this,Hf,"f").registerFunction(r),this}command(e,n,r,i,o,a){return xn("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,n,r,i,o,a],arguments.length),fe(this,Sa,"f").addHandler(e,n,r,i,o,a),this}commands(e,n,r,i,o,a){return this.command(e,n,r,i,o,a)}commandDir(e,n){xn("<string> [object]",[e,n],arguments.length);let r=fe(this,WO,"f")||fe(this,Nr,"f").require;return fe(this,Sa,"f").addDirectory(e,r,fe(this,Nr,"f").getCallerFile(),n),this}count(e){return xn("<array|string>",[e],arguments.length),this[pv]("count",e),this[a2](e),this}default(e,n,r){return xn("<object|string|array> [*] [string]",[e,n,r],arguments.length),r&&(Dre(e,fe(this,Nr,"f")),fe(this,Un,"f").defaultDescription[e]=r),typeof n=="function"&&(Dre(e,fe(this,Nr,"f")),fe(this,Un,"f").defaultDescription[e]||(fe(this,Un,"f").defaultDescription[e]=fe(this,Gr,"f").functionDescription(n)),n=n.call()),this[f5](this.default.bind(this),"default",e,n),this}defaults(e,n,r){return this.default(e,n,r)}demandCommand(e=1,n,r,i){return xn("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,n,r,i],arguments.length),typeof n!="number"&&(r=n,n=1/0),this.global("_",!1),fe(this,Un,"f").demandedCommands._={min:e,max:n,minMsg:r,maxMsg:i},this}demand(e,n,r){return Array.isArray(n)?(n.forEach(i=>{ku(r,!0,fe(this,Nr,"f")),this.demandOption(i,r)}),n=1/0):typeof n!="number"&&(r=n,n=1/0),typeof e=="number"?(ku(r,!0,fe(this,Nr,"f")),this.demandCommand(e,n,r,r)):Array.isArray(e)?e.forEach(i=>{ku(r,!0,fe(this,Nr,"f")),this.demandOption(i,r)}):typeof r=="string"?this.demandOption(e,r):(r===!0||typeof r>"u")&&this.demandOption(e),this}demandOption(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[f5](this.demandOption.bind(this),"demandedOptions",e,n),this}deprecateOption(e,n){return xn("<string> [string|boolean]",[e,n],arguments.length),fe(this,Un,"f").deprecatedOptions[e]=n,this}describe(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[Hre](e,!0),fe(this,Gr,"f").describe(e,n),this}detectLocale(e){return xn("<boolean>",[e],arguments.length),In(this,ZI,e,"f"),this}env(e){return xn("[string|boolean]",[e],arguments.length),e===!1?delete fe(this,Un,"f").envPrefix:fe(this,Un,"f").envPrefix=e||"",this}epilogue(e){return xn("<string>",[e],arguments.length),fe(this,Gr,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,n){return xn("<string|array> [string]",[e,n],arguments.length),Array.isArray(e)?e.forEach(r=>this.example(...r)):fe(this,Gr,"f").example(e,n),this}exit(e,n){In(this,v0,!0,"f"),In(this,dv,n,"f"),fe(this,jf,"f")&&fe(this,Nr,"f").process.exit(e)}exitProcess(e=!0){return xn("[boolean]",[e],arguments.length),In(this,jf,e,"f"),this}fail(e){if(xn("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new As("Invalid first argument. Expected function or boolean 'false'");return fe(this,Gr,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,n){return xn("<array> [function]",[e,n],arguments.length),n?fe(this,Hf,"f").getCompletion(e,n):new Promise((r,i)=>{fe(this,Hf,"f").getCompletion(e,(o,a)=>{o?i(o):r(a)})})}getDemandedOptions(){return xn([],0),fe(this,Un,"f").demandedOptions}getDemandedCommands(){return xn([],0),fe(this,Un,"f").demandedCommands}getDeprecatedOptions(){return xn([],0),fe(this,Un,"f").deprecatedOptions}getDetectLocale(){return fe(this,ZI,"f")}getExitProcess(){return fe(this,jf,"f")}getGroups(){return Object.assign({},fe(this,Eg,"f"),fe(this,t2,"f"))}getHelp(){if(In(this,v0,!0,"f"),!fe(this,Gr,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[oD](fe(this,fv,"f"),void 0,void 0,0,!0);if(ys(n))return n.then(()=>fe(this,Gr,"f").help())}let e=fe(this,Sa,"f").runDefaultBuilderOn(this);if(ys(e))return e.then(()=>fe(this,Gr,"f").help())}return Promise.resolve(fe(this,Gr,"f").help())}getOptions(){return fe(this,Un,"f")}getStrict(){return fe(this,n2,"f")}getStrictCommands(){return fe(this,r2,"f")}getStrictOptions(){return fe(this,i2,"f")}global(e,n){return xn("<string|array> [boolean]",[e,n],arguments.length),e=[].concat(e),n!==!1?fe(this,Un,"f").local=fe(this,Un,"f").local.filter(r=>e.indexOf(r)===-1):e.forEach(r=>{fe(this,Un,"f").local.includes(r)||fe(this,Un,"f").local.push(r)}),this}group(e,n){xn("<string|array> <string>",[e,n],arguments.length);let r=fe(this,t2,"f")[n]||fe(this,Eg,"f")[n];fe(this,t2,"f")[n]&&delete fe(this,t2,"f")[n];let i={};return fe(this,Eg,"f")[n]=(r||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return xn("<string>",[e],arguments.length),fe(this,Un,"f").hiddenOptions.push(e),this}implies(e,n){return xn("<string|object> [number|string|array]",[e,n],arguments.length),fe(this,la,"f").implies(e,n),this}locale(e){return xn("[string]",[e],arguments.length),e===void 0?(this[Ore](),fe(this,Nr,"f").y18n.getLocale()):(In(this,ZI,!1,"f"),fe(this,Nr,"f").y18n.setLocale(e),this)}middleware(e,n,r){return fe(this,Vf,"f").addMiddleware(e,!!n,r)}nargs(e,n){return xn("<string|object|array> [number]",[e,n],arguments.length),this[f5](this.nargs.bind(this),"narg",e,n),this}normalize(e){return xn("<array|string>",[e],arguments.length),this[pv]("normalize",e),this}number(e){return xn("<array|string>",[e],arguments.length),this[pv]("number",e),this[a2](e),this}option(e,n){if(xn("<string|object> [object]",[e,n],arguments.length),typeof e=="object")Object.keys(e).forEach(r=>{this.options(r,e[r])});else{typeof n!="object"&&(n={}),this[a2](e),fe(this,Ig,"f")&&(e==="version"||n?.alias==="version")&&this[fSe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),fe(this,Un,"f").key[e]=!0,n.alias&&this.alias(e,n.alias);let r=n.deprecate||n.deprecated;r&&this.deprecateOption(e,r);let i=n.demand||n.required||n.require;i&&this.demand(e,i),n.demandOption&&this.demandOption(e,typeof n.demandOption=="string"?n.demandOption:void 0),n.conflicts&&this.conflicts(e,n.conflicts),"default"in n&&this.default(e,n.default),n.implies!==void 0&&this.implies(e,n.implies),n.nargs!==void 0&&this.nargs(e,n.nargs),n.config&&this.config(e,n.configParser),n.normalize&&this.normalize(e),n.choices&&this.choices(e,n.choices),n.coerce&&this.coerce(e,n.coerce),n.group&&this.group(e,n.group),(n.boolean||n.type==="boolean")&&(this.boolean(e),n.alias&&this.boolean(n.alias)),(n.array||n.type==="array")&&(this.array(e),n.alias&&this.array(n.alias)),(n.number||n.type==="number")&&(this.number(e),n.alias&&this.number(n.alias)),(n.string||n.type==="string")&&(this.string(e),n.alias&&this.string(n.alias)),(n.count||n.type==="count")&&this.count(e),typeof n.global=="boolean"&&this.global(e,n.global),n.defaultDescription&&(fe(this,Un,"f").defaultDescription[e]=n.defaultDescription),n.skipValidation&&this.skipValidation(e);let o=n.describe||n.description||n.desc,a=fe(this,Gr,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),n.hidden&&this.hide(e),n.requiresArg&&this.requiresArg(e)}return this}options(e,n){return this.option(e,n)}parse(e,n,r){xn("[string|array] [function|boolean|object] [function]",[e,n,r],arguments.length),this[pSe](),typeof e>"u"&&(e=fe(this,fv,"f")),typeof n=="object"&&(In(this,e2,n,"f"),n=r),typeof n=="function"&&(In(this,b0,n,"f"),n=!1),n||In(this,fv,e,"f"),fe(this,b0,"f")&&In(this,jf,!1,"f");let i=this[oD](e,!!n),o=this.parsed;return fe(this,Hf,"f").setParsed(this.parsed),ys(i)?i.then(a=>(fe(this,b0,"f")&&fe(this,b0,"f").call(this,fe(this,dv,"f"),a,fe(this,Ql,"f")),a)).catch(a=>{throw fe(this,b0,"f")&&fe(this,b0,"f")(a,this.parsed.argv,fe(this,Ql,"f")),a}).finally(()=>{this[jre](),this.parsed=o}):(fe(this,b0,"f")&&fe(this,b0,"f").call(this,fe(this,dv,"f"),i,fe(this,Ql,"f")),this[jre](),this.parsed=o,i)}parseAsync(e,n,r){let i=this.parse(e,n,r);return ys(i)?i:Promise.resolve(i)}parseSync(e,n,r){let i=this.parse(e,n,r);if(ys(i))throw new As(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return xn("<object>",[e],arguments.length),In(this,GO,e,"f"),this}pkgConf(e,n){xn("<string> [string]",[e,n],arguments.length);let r=null,i=this[Ure](n||fe(this,XI,"f"));return i[e]&&typeof i[e]=="object"&&(r=MO(i[e],n||fe(this,XI,"f"),this[o2]()["deep-merge-config"]||!1,fe(this,Nr,"f")),fe(this,Un,"f").configObjects=(fe(this,Un,"f").configObjects||[]).concat(r)),this}positional(e,n){xn("<string> <object>",[e,n],arguments.length);let r=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];n=cv(n,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:r.includes(a));let i=fe(this,iD,"f").fullCommands[fe(this,iD,"f").fullCommands.length-1],o=i?fe(this,Sa,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return l5(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(n[a]=!0):l[e]&&!(a in n)&&(n[a]=l[e])}),this.group(e,fe(this,Gr,"f").getPositionalGroupName()),this.option(e,n)}recommendCommands(e=!0){return xn("[boolean]",[e],arguments.length),In(this,HO,e,"f"),this}required(e,n,r){return this.demand(e,n,r)}require(e,n,r){return this.demand(e,n,r)}requiresArg(e){return xn("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&fe(this,Un,"f").narg[e]?this:(this[f5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,n){return xn("[string] [string]",[e,n],arguments.length),e=e||this.$0,fe(this,u5,"f").log(fe(this,Hf,"f").generateCompletionScript(e,n||fe(this,x0,"f")||"completion")),this}showHelp(e){if(xn("[string|function]",[e],arguments.length),In(this,v0,!0,"f"),!fe(this,Gr,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[oD](fe(this,fv,"f"),void 0,void 0,0,!0);if(ys(r))return r.then(()=>{fe(this,Gr,"f").showHelp(e)}),this}let n=fe(this,Sa,"f").runDefaultBuilderOn(this);if(ys(n))return n.then(()=>{fe(this,Gr,"f").showHelp(e)}),this}return fe(this,Gr,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,n){return xn("[boolean|string] [string]",[e,n],arguments.length),fe(this,Gr,"f").showHelpOnFail(e,n),this}showVersion(e){return xn("[string|function]",[e],arguments.length),fe(this,Gr,"f").showVersion(e),this}skipValidation(e){return xn("<array|string>",[e],arguments.length),this[pv]("skipValidation",e),this}strict(e){return xn("[boolean]",[e],arguments.length),In(this,n2,e!==!1,"f"),this}strictCommands(e){return xn("[boolean]",[e],arguments.length),In(this,r2,e!==!1,"f"),this}strictOptions(e){return xn("[boolean]",[e],arguments.length),In(this,i2,e!==!1,"f"),this}string(e){return xn("<array|string>",[e],arguments.length),this[pv]("string",e),this[a2](e),this}terminalWidth(){return xn([],0),fe(this,Nr,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return xn("<object>",[e],arguments.length),In(this,ZI,!1,"f"),fe(this,Nr,"f").y18n.updateLocale(e),this}usage(e,n,r,i){if(xn("<string|null|undefined> [string|boolean] [function|object] [function]",[e,n,r,i],arguments.length),n!==void 0){if(ku(e,null,fe(this,Nr,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,n,r,i);throw new As(".usage() description must start with $0 if being used as alias for .command()")}else return fe(this,Gr,"f").usage(e),this}usageConfiguration(e){return xn("<object>",[e],arguments.length),In(this,jO,e,"f"),this}version(e,n,r){let i="version";if(xn("[boolean|string] [string] [string]",[e,n,r],arguments.length),fe(this,Ig,"f")&&(this[Qre](fe(this,Ig,"f")),fe(this,Gr,"f").version(void 0),In(this,Ig,null,"f")),arguments.length===0)r=this[gSe](),e=i;else if(arguments.length===1){if(e===!1)return this;r=e,e=i}else arguments.length===2&&(r=n,n=void 0);return In(this,Ig,typeof e=="string"?e:i,"f"),n=n||fe(this,Gr,"f").deferY18nLookup("Show version number"),fe(this,Gr,"f").version(r||void 0),this.boolean(fe(this,Ig,"f")),this.describe(fe(this,Ig,"f"),n),this}wrap(e){return xn("<number|null|undefined>",[e],arguments.length),fe(this,Gr,"f").wrap(e),this}[(Sa=new WeakMap,XI=new WeakMap,iD=new WeakMap,Hf=new WeakMap,x0=new WeakMap,QO=new WeakMap,dv=new WeakMap,ZI=new WeakMap,OO=new WeakMap,jf=new WeakMap,UO=new WeakMap,Vf=new WeakMap,Eg=new WeakMap,v0=new WeakMap,$f=new WeakMap,qO=new WeakMap,u5=new WeakMap,Ql=new WeakMap,Un=new WeakMap,WO=new WeakMap,GO=new WeakMap,b0=new WeakMap,e2=new WeakMap,d5=new WeakMap,t2=new WeakMap,fv=new WeakMap,HO=new WeakMap,Nr=new WeakMap,n2=new WeakMap,r2=new WeakMap,i2=new WeakMap,Gr=new WeakMap,jO=new WeakMap,Ig=new WeakMap,la=new WeakMap,uSe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[dSe](){return{log:s((...e)=>{this[VO]()||console.log(...e),In(this,v0,!0,"f"),fe(this,Ql,"f").length&&In(this,Ql,fe(this,Ql,"f")+`
`,"f"),In(this,Ql,fe(this,Ql,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[VO]()||console.error(...e),In(this,v0,!0,"f"),fe(this,Ql,"f").length&&In(this,Ql,fe(this,Ql,"f")+`
`,"f"),In(this,Ql,fe(this,Ql,"f")+e.join(" "),"f")},"error")}}[Qre](e){l5(fe(this,Un,"f")).forEach(n=>{if((i=>i==="configObjects")(n))return;let r=fe(this,Un,"f")[n];Array.isArray(r)?r.includes(e)&&r.splice(r.indexOf(e),1):typeof r=="object"&&delete r[e]}),delete fe(this,Gr,"f").getDescriptions()[e]}[fSe](e,n,r){fe(this,OO,"f")[r]||(fe(this,Nr,"f").process.emitWarning(e,n),fe(this,OO,"f")[r]=!0)}[pSe](){fe(this,UO,"f").push({options:fe(this,Un,"f"),configObjects:fe(this,Un,"f").configObjects.slice(0),exitProcess:fe(this,jf,"f"),groups:fe(this,Eg,"f"),strict:fe(this,n2,"f"),strictCommands:fe(this,r2,"f"),strictOptions:fe(this,i2,"f"),completionCommand:fe(this,x0,"f"),output:fe(this,Ql,"f"),exitError:fe(this,dv,"f"),hasOutput:fe(this,v0,"f"),parsed:this.parsed,parseFn:fe(this,b0,"f"),parseContext:fe(this,e2,"f")}),fe(this,Gr,"f").freeze(),fe(this,la,"f").freeze(),fe(this,Sa,"f").freeze(),fe(this,Vf,"f").freeze()}[mSe](){let e="",n;return/\b(node|iojs|electron)(\.exe)?$/.test(fe(this,Nr,"f").process.argv()[0])?n=fe(this,Nr,"f").process.argv().slice(1,2):n=fe(this,Nr,"f").process.argv().slice(0,1),e=n.map(r=>{let i=this[_Se](fe(this,XI,"f"),r);return r.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<r.length?i:r}).join(" ").trim(),fe(this,Nr,"f").getEnv("_")&&fe(this,Nr,"f").getProcessArgvBin()===fe(this,Nr,"f").getEnv("_")&&(e=fe(this,Nr,"f").getEnv("_").replace(`${fe(this,Nr,"f").path.dirname(fe(this,Nr,"f").process.execPath())}/`,"")),e}[o2](){return fe(this,GO,"f")}[hSe](){return fe(this,jO,"f")}[Ore](){if(!fe(this,ZI,"f"))return;let e=fe(this,Nr,"f").getEnv("LC_ALL")||fe(this,Nr,"f").getEnv("LC_MESSAGES")||fe(this,Nr,"f").getEnv("LANG")||fe(this,Nr,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[gSe](){return this[Ure]().version||"unknown"}[ASe](e){let n=e["--"]?e["--"]:e._;for(let r=0,i;(i=n[r])!==void 0;r++)fe(this,Nr,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(n[r]=Number(i));return e}[Ure](e){let n=e||"*";if(fe(this,d5,"f")[n])return fe(this,d5,"f")[n];let r={};try{let i=e||fe(this,Nr,"f").mainFilename;!e&&fe(this,Nr,"f").path.extname(i)&&(i=fe(this,Nr,"f").path.dirname(i));let o=fe(this,Nr,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});ku(o,void 0,fe(this,Nr,"f")),r=JSON.parse(fe(this,Nr,"f").readFileSync(o,"utf8"))}catch{}return fe(this,d5,"f")[n]=r||{},fe(this,d5,"f")[n]}[pv](e,n){n=[].concat(n),n.forEach(r=>{r=this[Gre](r),fe(this,Un,"f")[e].push(r)})}[f5](e,n,r,i){this[Wre](e,n,r,i,(o,a,l)=>{fe(this,Un,"f")[o][a]=l})}[qre](e,n,r,i){this[Wre](e,n,r,i,(o,a,l)=>{fe(this,Un,"f")[o][a]=(fe(this,Un,"f")[o][a]||[]).concat(l)})}[Wre](e,n,r,i,o){if(Array.isArray(r))r.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(r))for(let a of l5(r))e(a,r[a]);else o(n,this[Gre](r),i)}[Gre](e){return e==="__proto__"?"___proto___":e}[Hre](e,n){return this[f5](this[Hre].bind(this),"key",e,n),this}[jre](){var e,n,r,i,o,a,l,c,u,d,p,m;let h=fe(this,UO,"f").pop();ku(h,void 0,fe(this,Nr,"f"));let g;e=this,n=this,r=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){In(e,Un,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){In(n,jf,y,"f")}}.value,groups:{set value(y){In(r,Eg,y,"f")}}.value,output:{set value(y){In(i,Ql,y,"f")}}.value,exitError:{set value(y){In(o,dv,y,"f")}}.value,hasOutput:{set value(y){In(a,v0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){In(l,n2,y,"f")}}.value,strictCommands:{set value(y){In(c,r2,y,"f")}}.value,strictOptions:{set value(y){In(u,i2,y,"f")}}.value,completionCommand:{set value(y){In(d,x0,y,"f")}}.value,parseFn:{set value(y){In(p,b0,y,"f")}}.value,parseContext:{set value(y){In(m,e2,y,"f")}}.value}=h,fe(this,Un,"f").configObjects=g,fe(this,Gr,"f").unfreeze(),fe(this,la,"f").unfreeze(),fe(this,Sa,"f").unfreeze(),fe(this,Vf,"f").unfreeze()}[ySe](e,n){return JI(n,r=>(e(r),r))}getInternalMethods(){return{getCommandInstance:this[CSe].bind(this),getContext:this[xSe].bind(this),getHasOutput:this[vSe].bind(this),getLoggerInstance:this[bSe].bind(this),getParseContext:this[ESe].bind(this),getParserConfiguration:this[o2].bind(this),getUsageConfiguration:this[hSe].bind(this),getUsageInstance:this[ISe].bind(this),getValidationInstance:this[TSe].bind(this),hasParseCallback:this[VO].bind(this),isGlobalContext:this[wSe].bind(this),postProcess:this[s2].bind(this),reset:this[Vre].bind(this),runValidation:this[$re].bind(this),runYargsParserAndExecuteCommands:this[oD].bind(this),setHasOutput:this[SSe].bind(this)}}[CSe](){return fe(this,Sa,"f")}[xSe](){return fe(this,iD,"f")}[vSe](){return fe(this,v0,"f")}[bSe](){return fe(this,u5,"f")}[ESe](){return fe(this,e2,"f")||{}}[ISe](){return fe(this,Gr,"f")}[TSe](){return fe(this,la,"f")}[VO](){return!!fe(this,b0,"f")}[wSe](){return fe(this,qO,"f")}[s2](e,n,r,i){return r||ys(e)||(n||(e=this[uSe](e)),(this[o2]()["parse-positional-numbers"]||this[o2]()["parse-positional-numbers"]===void 0)&&(e=this[ASe](e)),i&&(e=KI(e,this,fe(this,Vf,"f").getMiddleware(),!1))),e}[Vre](e={}){In(this,Un,fe(this,Un,"f")||{},"f");let n={};n.local=fe(this,Un,"f").local||[],n.configObjects=fe(this,Un,"f").configObjects||[];let r={};n.local.forEach(a=>{r[a]=!0,(e[a]||[]).forEach(l=>{r[l]=!0})}),Object.assign(fe(this,t2,"f"),Object.keys(fe(this,Eg,"f")).reduce((a,l)=>{let c=fe(this,Eg,"f")[l].filter(u=>!(u in r));return c.length>0&&(a[l]=c),a},{})),In(this,Eg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{n[a]=(fe(this,Un,"f")[a]||[]).filter(l=>!r[l])}),o.forEach(a=>{n[a]=cv(fe(this,Un,"f")[a],l=>!r[l])}),n.envPrefix=fe(this,Un,"f").envPrefix,In(this,Un,n,"f"),In(this,Gr,fe(this,Gr,"f")?fe(this,Gr,"f").reset(r):nSe(this,fe(this,Nr,"f")),"f"),In(this,la,fe(this,la,"f")?fe(this,la,"f").reset(r):lSe(this,fe(this,Gr,"f"),fe(this,Nr,"f")),"f"),In(this,Sa,fe(this,Sa,"f")?fe(this,Sa,"f").reset():Z_e(fe(this,Gr,"f"),fe(this,la,"f"),fe(this,Vf,"f"),fe(this,Nr,"f")),"f"),fe(this,Hf,"f")||In(this,Hf,oSe(this,fe(this,Gr,"f"),fe(this,Sa,"f"),fe(this,Nr,"f")),"f"),fe(this,Vf,"f").reset(),In(this,x0,null,"f"),In(this,Ql,"","f"),In(this,dv,null,"f"),In(this,v0,!1,"f"),this.parsed=!1,this}[_Se](e,n){return fe(this,Nr,"f").path.relative(e,n)}[oD](e,n,r,i=0,o=!1){let a=!!r||o;e=e||fe(this,fv,"f"),fe(this,Un,"f").__=fe(this,Nr,"f").y18n.__,fe(this,Un,"f").configuration=this[o2]();let l=!!fe(this,Un,"f").configuration["populate--"],c=Object.assign({},fe(this,Un,"f").configuration,{"populate--":!0}),u=fe(this,Nr,"f").Parser.detailed(e,Object.assign({},fe(this,Un,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,fe(this,e2,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===fe(this,$f,"f")&&d[y]?h=!0:y===fe(this,Ig,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&fe(this,Gr,"f").clearCachedHelpMessage();try{if(this[Ore](),n)return this[s2](d,l,!!r,!1);fe(this,$f,"f")&&[fe(this,$f,"f")].concat(m[fe(this,$f,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),In(this,qO,!1,"f");let y=fe(this,Sa,"f").getCommands(),v=fe(this,Hf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==fe(this,x0,"f")){let B=fe(this,Sa,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[s2](B,l,!!r,!1)}else if(!E&&k!==fe(this,x0,"f")){E=k;break}!fe(this,Sa,"f").hasDefaultCommand()&&fe(this,HO,"f")&&E&&!b&&fe(this,la,"f").recommendCommands(E,y)}fe(this,x0,"f")&&d._.includes(fe(this,x0,"f"))&&!v&&(fe(this,jf,"f")&&uv(!0),this.showCompletionScript(),this.exit(0))}if(fe(this,Sa,"f").hasDefaultCommand()&&!b){let E=fe(this,Sa,"f").runCommand(null,this,u,0,o,h||g||o);return this[s2](E,l,!!r,!1)}if(v){fe(this,jf,"f")&&uv(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${fe(this,Hf,"f").completionKey}`)+1);return fe(this,Hf,"f").getCompletion(E,(_,k)=>{if(_)throw new As(_.message);(k||[]).forEach(B=>{fe(this,u5,"f").log(B)}),this.exit(0)}),this[s2](d,!l,!!r,!1)}if(fe(this,v0,"f")||(h?(fe(this,jf,"f")&&uv(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(fe(this,jf,"f")&&uv(!0),a=!0,fe(this,Gr,"f").showVersion("log"),this.exit(0))),!a&&fe(this,Un,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>fe(this,Un,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new As(u.error.message);if(!v){let E=this[$re](m,{},u.error);r||(p=KI(d,this,fe(this,Vf,"f").getMiddleware(),!0)),p=this[ySe](E,p??d),ys(p)&&!r&&(p=p.then(()=>KI(d,this,fe(this,Vf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof As)fe(this,Gr,"f").fail(y.message,y);else throw y}return this[s2](p??d,l,!!r,!0)}[$re](e,n,r,i){let o={...this.getDemandedOptions()};return a=>{if(r)throw new As(r.message);fe(this,la,"f").nonOptionCount(a),fe(this,la,"f").requiredArguments(a,o);let l=!1;fe(this,r2,"f")&&(l=fe(this,la,"f").unknownCommands(a)),fe(this,n2,"f")&&!l?fe(this,la,"f").unknownArguments(a,e,n,!!i):fe(this,i2,"f")&&fe(this,la,"f").unknownArguments(a,e,{},!1,!1),fe(this,la,"f").limitedChoices(a),fe(this,la,"f").implications(a),fe(this,la,"f").conflicting(a)}}[SSe](){In(this,v0,!0,"f")}[a2](e){if(typeof e=="string")fe(this,Un,"f").key[e]=!0;else for(let n of e)fe(this,Un,"f").key[n]=!0}};function eSe(t){return!!t&&typeof t.getInternalMethods=="function"}s(eSe,"isYargsInstance");var vmt=RSe(z_e),kSe=vmt;f();f();f();var BSe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function DSe(t,e,n){let r=or.createAndMarkAsIssued({authSource:e,authType:n});return Bt(t,BSe.NewGitHubLogin,r)}s(DSe,"telemetryNewGitHubLogin");function PSe(t,e){let n=or.createAndMarkAsIssued({authType:e});return Bt(t,BSe.GitHubLoginSuccess,n)}s(PSe,"telemetryGitHubLoginSuccess");var Yre=class extends cs{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function bmt(t,e,{serverUrl:n}){let r={method:"POST",headers:{Accept:"application/json",...tm(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",n).href;try{i=await t.get(Kr).fetch(o,r)}catch(a){throw a instanceof Error&&NB(a)?new cs(`Could not log in with device flow on ${n}: ${a.message}`):a}if(!i.ok)throw new cs(`Could not log in with device flow on ${n}: HTTP ${i.status}`);return await i.json()}s(bmt,"requestDeviceFlowStage1");async function Emt(t,e,n,{serverUrl:r}){let i={method:"POST",headers:{Accept:"application/json",...tm(t)},json:{client_id:n,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(Kr).fetch(new URL("login/oauth/access_token",r).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new Yre(a):new cs(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(Emt,"requestDeviceFlowStage2");async function Imt(t,e){PSe(t,"deviceFlow");let r=await(await Bf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in r)throw new cs(`Error retrieving user information: ${String(r.errors)}`);return r}s(Imt,"requestUserInfo");var l2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,n,r){try{return await this.getTokenUnguarded(e,n,r)}catch(i){throw e.get(Iu).notifyUser(e,i),i}}async getTokenUnguarded(e,n,r){DSe(e,"unknown","deviceFlow");let i=await bmt(e,n,r),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await Emt(e,i.device_code,n,r);if(a-=c,l=u.access_token,l){let d=await Imt(e,{...r,accessToken:l});return{...r,githubAppId:n,login:d.login,accessToken:l}}c=u.interval??c}throw new cs("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var E0=class{static{s(this,"CitationManager")}},$O=class extends E0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,n){}};f();f();f();var Tmt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Ho=class{constructor(){this.capabilities={...Tmt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let n;for(n in e){let r=e[n];r!==void 0&&(this.capabilities[n]=r)}}getCapabilities(){return this.capabilities}};f();f();f();f();function q1(t,e){let n=I0(t,e);return n===-1?void 0:t[n]}s(q1,"findLastMonotonous");function I0(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(I0,"findLastIdxMonotonous");function NSe(t,e){let n=c2(t,e);return n===t.length?void 0:t[n]}s(NSe,"findFirstMonotonous");function c2(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(c2,"findFirstIdxMonotonousOrArrLen");var sD=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let r of this._array)if(this._prevFindLastPredicate(r)&&!e(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let n=I0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=n+1,n===-1?void 0:this._array[n]}};f();var Kre=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?zO.isErrorNoTelemetry(e)?new zO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(n=>{n(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},LSe=new Kre;function u2(t){LSe.onUnexpectedError(t)}s(u2,"onBugIndicatingError");function p5(t){wmt(t)||LSe.onUnexpectedError(t)}s(p5,"onUnexpectedError");var Jre="Canceled";function wmt(t){return t instanceof Tg?!0:t instanceof Error&&t.name===Jre&&t.message===Jre}s(wmt,"isCancellationError");var Tg=class extends Error{static{s(this,"CancellationError")}constructor(){super(Jre),this.name=this.message}};function aD(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(aD,"illegalArgument");function FSe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(FSe,"illegalState");var zO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let n=new t;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},fr=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function d2(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}s(d2,"equals");function*m5(t,e){let n,r;for(let i of t)r!==void 0&&e(r,i)?n.push(i):(n&&(yield n),n=[i]),r=i;n&&(yield n)}s(m5,"groupAdjacentBy");function QSe(t,e){for(let n=0;n<=t.length;n++)e(n===0?void 0:t[n-1],n===t.length?void 0:t[n])}s(QSe,"forEachAdjacent");function OSe(t,e){for(let n=0;n<t.length;n++)e(n===0?void 0:t[n-1],t[n],n+1===t.length?void 0:t[n+1])}s(OSe,"forEachWithNeighbors");function USe(t){return t.filter(e=>!!e)}s(USe,"coalesce");function qSe(t,e){for(let n of e)t.push(n)}s(qSe,"pushMany");var WSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function n(c){return c>0}l.isGreaterThan=n,s(n,"isGreaterThan");function r(c){return c===0}l.isNeitherLessOrGreaterThan=r,s(r,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(WSe||={});function T0(t,e){return(n,r)=>e(t(n),t(r))}s(T0,"compareBy");var w0=s((t,e)=>t-e,"numberComparator");function GSe(t){return(e,n)=>-t(e,n)}s(GSe,"reverseOrder");var YO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let n=this.firstIdx;for(;n<this.items.length&&e(this.items[n]);)n++;let r=n===this.firstIdx?null:this.items.slice(this.firstIdx,n);return this.firstIdx=n,r}takeFromEndWhile(e){let n=this.lastIdx;for(;n>=0&&e(this.items[n]);)n--;let r=n===this.lastIdx?null:this.items.slice(n+1,this.lastIdx+1);return this.lastIdx=n,r}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let n=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,n}},MSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(n=>(e(n),!0))}toArray(){let e=[];return this.iterate(n=>(e.push(n),!0)),e}filter(e){return new t(n=>this.iterate(r=>e(r)?n(r):!0))}map(e){return new t(n=>this.iterate(r=>n(e(r))))}some(e){let n=!1;return this.iterate(r=>(n=e(r),!n)),n}findFirst(e){let n;return this.iterate(r=>e(r)?(n=r,!1):!0),n}findLast(e){let n;return this.iterate(r=>(e(r)&&(n=r),!0)),n}findLastMaxBy(e){let n,r=!0;return this.iterate(i=>((r||WSe.isGreaterThan(e(i,n)))&&(r=!1,n=i),!0)),n}};f();function $Se(t,e){let n=Object.create(null);for(let r of t){let i=e(r),o=n[i];o||(o=n[i]=[]),o.push(r)}return n}s($Se,"groupBy");var jSe,VSe,HSe=class{constructor(e,n){this.toKey=n;this._map=new Map;this[jSe]="SetWithKey";for(let r of e)this.add(r)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let n=this.toKey(e);return this._map.set(n,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,n){this._map.forEach(r=>e.call(n,r,r,this))}[(VSe=Symbol.iterator,jSe=Symbol.toStringTag,VSe)](){return this.values()}};f();function Xre(t,e){let n=this,r=!1,i;return function(){if(r)return i;if(r=!0,e)try{i=t.apply(n,arguments)}finally{e()}else i=t.apply(n,arguments);return i}}s(Xre,"createSingleCallFunction");f();var Zre;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function n(){return e}_.empty=n,s(n,"empty");function*r(k){yield k}_.single=r,s(r,"single");function i(k){return t(k)?k:r(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let B=k.length-1;B>=0;B--)yield k[B]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,B){let N=0;for(let U of k)if(B(U,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,B){for(let N of k)if(B(N))return N}_.find=d,s(d,"find");function*p(k,B){for(let N of k)B(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,B){let N=0;for(let U of k)yield B(U,N++)}_.map=m,s(m,"map");function*h(k,B){let N=0;for(let U of k)yield*B(U,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let B of k)yield*B}_.concat=g,s(g,"concat");function y(k,B,N){let U=N;for(let re of k)U=B(U,re);return U}_.reduce=y,s(y,"reduce");function*v(k,B,N=k.length){for(B<-k.length&&(B=0),B<0&&(B+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);B<N;B++)yield k[B]}_.slice=v,s(v,"slice");function b(k,B=Number.POSITIVE_INFINITY){let N=[];if(B===0)return[N,k];let U=k[Symbol.iterator]();for(let re=0;re<B;re++){let me=U.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return U}}]}_.consume=b,s(b,"consume");async function E(k){let B=[];for await(let N of k)B.push(N);return Promise.resolve(B)}_.asyncToArray=E,s(E,"asyncToArray")})(Zre||={});f();var eie=class{constructor(e,n){this.uri=e;this.value=n}static{s(this,"ResourceMapEntry")}};function Smt(t){return Array.isArray(t)}s(Smt,"isEntries");var YSe,KO=class t{constructor(e,n){this[YSe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=n??t.defaultToKey;else if(Smt(e)){this.map=new Map,this.toKey=n??t.defaultToKey;for(let[r,i]of e)this.set(r,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,n){return this.map.set(this.toKey(e),new eie(e,n)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,n){typeof n<"u"&&(e=e.bind(n));for(let[r,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(YSe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},KSe,zSe=class{constructor(e,n){this[KSe]="ResourceSet";!e||typeof e=="function"?this._map=new KO(e):(this._map=new KO(n),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,n){this._map.forEach((r,i)=>e.call(n,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(KSe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var JSe,tie=class{constructor(){this[JSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let r=this._map.get(e);if(r)return n!==0&&this.touch(r,n),r.value}set(e,n,r=0){let i=this._map.get(e);if(i)i.value=n,r!==0&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[(JSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.previous,r--;this._tail=n,this._size=r,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}},nie=class extends tie{static{s(this,"Cache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},JO=class extends nie{static{s(this,"LRUCache")}constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}};var h5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,n){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(n)}delete(e,n){let r=this.map.get(e);r&&(r.delete(n),r.size===0&&this.map.delete(e))}forEach(e,n){let r=this.map.get(e);r&&r.forEach(n)}get(e){let n=this.map.get(e);return n||new Set}};var Rmt=!1,g5=null;var XSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let n=this.livingDisposables.get(e);return n||(n={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,n)),n}trackDisposable(e){let n=this.getDisposableData(e);n.source||(n.source=new Error().stack)}setParent(e,n){let r=this.getDisposableData(e);r.parent=n}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,n){let r=n.get(e);if(r)return r;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),n):e;return n.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,r])=>r.source!==null&&!this.getRootParent(r,e).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(e=10,n){let r;if(n)r=n;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(r=u.filter(p=>!(p.parent&&d.has(p.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new h5;for(let c of r){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}r.sort(T0(c=>c.idx,w0));let a="",l=0;for(let c of r.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${r.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=$Se([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${r.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return r.length>e&&(a+=`


... and ${r.length-e} more leaking disposables

`),{leaks:r,details:a}}};function kmt(t){g5=t}s(kmt,"setDisposableTracker");if(Rmt){let t="__is_disposable_tracked__";kmt(new class{trackDisposable(e){let n=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(n)},3e3)}setParent(e,n){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function A5(t){return g5?.trackDisposable(t),t}s(A5,"trackDisposable");function y5(t){g5?.markAsDisposed(t)}s(y5,"markAsDisposed");function rie(t,e){g5?.setParent(t,e)}s(rie,"setParentOfDisposable");function Bmt(t,e){if(g5)for(let n of t)g5.setParent(n,e)}s(Bmt,"setParentOfDisposables");function ZSe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(ZSe,"isDisposable");function XO(t){if(Zre.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(r){e.push(r)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(XO,"dispose");function e5e(...t){let e=Ra(()=>XO(t));return Bmt(t,e),e}s(e5e,"combinedDisposable");function Ra(t){let e=A5({dispose:Xre(()=>{y5(e),t()})});return e}s(Ra,"toDisposable");var Bu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;A5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(y5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{XO(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return rie(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),rie(e,null))}},jo=class{constructor(){this._store=new Bu;A5(this),rie(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){y5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var zf=class extends jo{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(Ps(e,n=>{this.processUserInfoQuotaSnapshot(n.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let n=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(n)try{let r=new URLSearchParams(n),i=parseInt(r.get("ent")||"0",10),o=parseFloat(r.get("ov")||"0.0"),a=r.get("ovPerm")==="true",l=parseFloat(r.get("rem")||"0.0"),c=r.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(r){console.error("Failed to parse quota header",r)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var t5e=qe(require("events"));var ZO="CompletionRequested",wg=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new t5e.default;notifyRequest(e,n,r,i,o){return this.#e.emit(ZO,{completionId:n,completionState:e,telemetryData:r,cancellationToken:i,options:o})}onRequest(e){let n=Vc(this.ctx,e,`event.${ZO}`);return this.#e.on(ZO,n),sr.Disposable.create(()=>this.#e.off(ZO,n))}};f();var iie=class extends Error{constructor(n){super(`No instance of ${n.name} has been registered`);this.ctor=n;this.name="UnregisteredContextError",this.code=n.name}static{s(this,"UnregisteredContextError")}},C5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let n=this.tryGet(e);if(n)return n;throw new iie(e)}tryGet(e){let n=this.instances.get(e);if(n)return n}set(e,n){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,n),this.instances.set(e,n)}forceSet(e,n){this.assertIsInstance(e,n),this.instances.set(e,n)}assertIsInstance(e,n){if(!(n instanceof e)){let r=JSON.stringify(n);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${r}).`)}}};f();f();f();var eU=class t{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=i5e(r.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+r.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=n5e(r.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=r.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=n5e(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return e=this.ensureBeforeEOL(e,n[o]),{line:o,character:e-n[o]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,o=Math.min(r+e.character,i);return this.ensureBeforeEOL(o,r)}ensureBeforeEOL(e,n){for(;e>n&&r5e(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},mv;(function(t){function e(i,o,a,l){return new eU(i,o,a,l)}s(e,"create"),t.create=e;function n(i,o,a){if(i instanceof eU)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(n,"update"),t.update=n;function r(i,o){let a=i.getText(),l=oie(o.map(Dmt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(r,"applyEdits"),t.applyEdits=r})(mv||(mv={}));function oie(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);oie(r,e),oie(i,e);let o=0,a=0,l=0;for(;o<r.length&&a<i.length;)e(r[o],i[a])<=0?t[l++]=r[o++]:t[l++]=i[a++];for(;o<r.length;)t[l++]=r[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(oie,"mergeSort");function n5e(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);r5e(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}s(n5e,"computeLineOffsets");function r5e(t){return t===13||t===10}s(r5e,"isEOL");function i5e(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}s(i5e,"getWellformedRange");function Dmt(t){let e=i5e(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(Dmt,"getWellformedEdit");f();var o5e;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(o5e||(o5e={}));var sie;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(sie||(sie={}));var s5e;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(s5e||(s5e={}));var tU;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(tU||(tU={}));var Jc;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=tU.MAX_VALUE),i===Number.MAX_VALUE&&(i=tU.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}s(n,"is"),t.is=n})(Jc||(Jc={}));var ts;(function(t){function e(r,i,o,a){if(Ve.uinteger(r)&&Ve.uinteger(i)&&Ve.uinteger(o)&&Ve.uinteger(a))return{start:Jc.create(r,i),end:Jc.create(o,a)};if(Jc.is(r)&&Jc.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Jc.is(i.start)&&Jc.is(i.end)}s(n,"is"),t.is=n})(ts||(ts={}));var nU;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&ts.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}s(n,"is"),t.is=n})(nU||(nU={}));var a5e;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&ts.is(i.targetRange)&&Ve.string(i.targetUri)&&ts.is(i.targetSelectionRange)&&(ts.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(a5e||(a5e={}));var aie;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(aie||(aie={}));var l5e;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&ts.is(i.range)&&aie.is(i.color)}s(n,"is"),t.is=n})(l5e||(l5e={}));var c5e;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.undefined(i.textEdit)||v5.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,v5.is))}s(n,"is"),t.is=n})(c5e||(c5e={}));var u5e;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(u5e||(u5e={}));var d5e;(function(t){function e(r,i,o,a,l,c){let u={startLine:r,endLine:i};return Ve.defined(o)&&(u.startCharacter=o),Ve.defined(a)&&(u.endCharacter=a),Ve.defined(l)&&(u.kind=l),Ve.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}s(n,"is"),t.is=n})(d5e||(d5e={}));var lie;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&nU.is(i.location)&&Ve.string(i.message)}s(n,"is"),t.is=n})(lie||(lie={}));var f5e;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(f5e||(f5e={}));var p5e;(function(t){t.Unnecessary=1,t.Deprecated=2})(p5e||(p5e={}));var m5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&Ve.string(r.href)}s(e,"is"),t.is=e})(m5e||(m5e={}));var rU;(function(t){function e(r,i,o,a,l,c){let u={range:r,message:i};return Ve.defined(o)&&(u.severity=o),Ve.defined(a)&&(u.code=a),Ve.defined(l)&&(u.source=l),Ve.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function n(r){var i;let o=r;return Ve.defined(o)&&ts.is(o.range)&&Ve.string(o.message)&&(Ve.number(o.severity)||Ve.undefined(o.severity))&&(Ve.integer(o.code)||Ve.string(o.code)||Ve.undefined(o.code))&&(Ve.undefined(o.codeDescription)||Ve.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(o.source)||Ve.undefined(o.source))&&(Ve.undefined(o.relatedInformation)||Ve.typedArray(o.relatedInformation,lie.is))}s(n,"is"),t.is=n})(rU||(rU={}));var x5;(function(t){function e(r,i,...o){let a={title:r,command:i};return Ve.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}s(n,"is"),t.is=n})(x5||(x5={}));var v5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){let a=o;return Ve.objectLiteral(a)&&Ve.string(a.newText)&&ts.is(a.range)}s(i,"is"),t.is=i})(v5||(v5={}));var cie;(function(t){function e(r,i,o){let a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(cie||(cie={}));var b5;(function(t){function e(n){let r=n;return Ve.string(r)}s(e,"is"),t.is=e})(b5||(b5={}));var h5e;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function n(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){let a=o;return v5.is(a)&&(cie.is(a.annotationId)||b5.is(a.annotationId))}s(i,"is"),t.is=i})(h5e||(h5e={}));var uie;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&hie.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(uie||(uie={}));var die;(function(t){function e(r,i,o){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||b5.is(i.annotationId))}s(n,"is"),t.is=n})(die||(die={}));var fie;(function(t){function e(r,i,o,a){let l={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||b5.is(i.annotationId))}s(n,"is"),t.is=n})(fie||(fie={}));var pie;(function(t){function e(r,i,o){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||b5.is(i.annotationId))}s(n,"is"),t.is=n})(pie||(pie={}));var mie;(function(t){function e(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>Ve.string(i.kind)?die.is(i)||fie.is(i)||pie.is(i):uie.is(i)))}s(e,"is"),t.is=e})(mie||(mie={}));var g5e;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)}s(n,"is"),t.is=n})(g5e||(g5e={}));var A5e;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}s(n,"is"),t.is=n})(A5e||(A5e={}));var hie;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}s(n,"is"),t.is=n})(hie||(hie={}));var y5e;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}s(n,"is"),t.is=n})(y5e||(y5e={}));var gie;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){let r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e})(gie||(gie={}));var lD;(function(t){function e(n){let r=n;return Ve.objectLiteral(n)&&gie.is(r.kind)&&Ve.string(r.value)}s(e,"is"),t.is=e})(lD||(lD={}));var C5e;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(C5e||(C5e={}));var x5e;(function(t){t.PlainText=1,t.Snippet=2})(x5e||(x5e={}));var v5e;(function(t){t.Deprecated=1})(v5e||(v5e={}));var b5e;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.newText)&&ts.is(i.insert)&&ts.is(i.replace)}s(n,"is"),t.is=n})(b5e||(b5e={}));var E5e;(function(t){t.asIs=1,t.adjustIndentation=2})(E5e||(E5e={}));var I5e;(function(t){function e(n){let r=n;return r&&(Ve.string(r.detail)||r.detail===void 0)&&(Ve.string(r.description)||r.description===void 0)}s(e,"is"),t.is=e})(I5e||(I5e={}));var T5e;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})(T5e||(T5e={}));var w5e;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(w5e||(w5e={}));var iU;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){let i=r;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}s(n,"is"),t.is=n})(iU||(iU={}));var _5e;(function(t){function e(n){let r=n;return!!r&&Ve.objectLiteral(r)&&(lD.is(r.contents)||iU.is(r.contents)||Ve.typedArray(r.contents,iU.is))&&(n.range===void 0||ts.is(n.range))}s(e,"is"),t.is=e})(_5e||(_5e={}));var S5e;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(S5e||(S5e={}));var R5e;(function(t){function e(n,r,...i){let o={label:n};return Ve.defined(r)&&(o.documentation=r),Ve.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(R5e||(R5e={}));var k5e;(function(t){t.Text=1,t.Read=2,t.Write=3})(k5e||(k5e={}));var B5e;(function(t){function e(n,r){let i={range:n};return Ve.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(B5e||(B5e={}));var D5e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(D5e||(D5e={}));var P5e;(function(t){t.Deprecated=1})(P5e||(P5e={}));var N5e;(function(t){function e(n,r,i,o,a){let l={name:n,kind:r,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(N5e||(N5e={}));var L5e;(function(t){function e(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}s(e,"create"),t.create=e})(L5e||(L5e={}));var F5e;(function(t){function e(r,i,o,a,l,c){let u={name:r,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&ts.is(i.range)&&ts.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(F5e||(F5e={}));var M5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(M5e||(M5e={}));var oU;(function(t){t.Invoked=1,t.Automatic=2})(oU||(oU={}));var Q5e;(function(t){function e(r,i,o){let a={diagnostics:r};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,rU.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))&&(i.triggerKind===void 0||i.triggerKind===oU.Invoked||i.triggerKind===oU.Automatic)}s(n,"is"),t.is=n})(Q5e||(Q5e={}));var O5e;(function(t){function e(r,i,o){let a={title:r},l=!0;return typeof i=="string"?(l=!1,a.kind=i):x5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,rU.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||x5.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||mie.is(i.edit))}s(n,"is"),t.is=n})(O5e||(O5e={}));var U5e;(function(t){function e(r,i){let o={range:r};return Ve.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&ts.is(i.range)&&(Ve.undefined(i.command)||x5.is(i.command))}s(n,"is"),t.is=n})(U5e||(U5e={}));var q5e;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(q5e||(q5e={}));var W5e;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&ts.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}s(n,"is"),t.is=n})(W5e||(W5e={}));var G5e;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&ts.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(G5e||(G5e={}));var H5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(H5e||(H5e={}));var j5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(j5e||(j5e={}));var V5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}s(e,"is"),t.is=e})(V5e||(V5e={}));var $5e;(function(t){function e(r,i){return{range:r,text:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&ts.is(i.range)&&Ve.string(i.text)}s(n,"is"),t.is=n})($5e||($5e={}));var z5e;(function(t){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&ts.is(i.range)&&Ve.boolean(i.caseSensitiveLookup)&&(Ve.string(i.variableName)||i.variableName===void 0)}s(n,"is"),t.is=n})(z5e||(z5e={}));var Y5e;(function(t){function e(r,i){return{range:r,expression:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&ts.is(i.range)&&(Ve.string(i.expression)||i.expression===void 0)}s(n,"is"),t.is=n})(Y5e||(Y5e={}));var K5e;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&ts.is(r.stoppedLocation)}s(n,"is"),t.is=n})(K5e||(K5e={}));var Aie;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(Aie||(Aie={}));var yie;(function(t){function e(r){return{value:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&(i.tooltip===void 0||Ve.string(i.tooltip)||lD.is(i.tooltip))&&(i.location===void 0||nU.is(i.location))&&(i.command===void 0||x5.is(i.command))}s(n,"is"),t.is=n})(yie||(yie={}));var J5e;(function(t){function e(r,i,o){let a={position:r,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Jc.is(i.position)&&(Ve.string(i.label)||Ve.typedArray(i.label,yie.is))&&(i.kind===void 0||Aie.is(i.kind))&&i.textEdits===void 0||Ve.typedArray(i.textEdits,v5.is)&&(i.tooltip===void 0||Ve.string(i.tooltip)||lD.is(i.tooltip))&&(i.paddingLeft===void 0||Ve.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Ve.boolean(i.paddingRight))}s(n,"is"),t.is=n})(J5e||(J5e={}));var X5e;(function(t){function e(n){return{kind:"snippet",value:n}}s(e,"createSnippet"),t.createSnippet=e})(X5e||(X5e={}));var Z5e;(function(t){function e(n,r,i,o){return{insertText:n,filterText:r,range:i,command:o}}s(e,"create"),t.create=e})(Z5e||(Z5e={}));var e4e;(function(t){function e(n){return{items:n}}s(e,"create"),t.create=e})(e4e||(e4e={}));var t4e;(function(t){t.Invoked=0,t.Automatic=1})(t4e||(t4e={}));var n4e;(function(t){function e(n,r){return{range:n,text:r}}s(e,"create"),t.create=e})(n4e||(n4e={}));var r4e;(function(t){function e(n,r){return{triggerKind:n,selectedCompletionInfo:r}}s(e,"create"),t.create=e})(r4e||(r4e={}));var i4e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&sie.is(r.uri)&&Ve.string(r.name)}s(e,"is"),t.is=e})(i4e||(i4e={}));var o4e;(function(t){function e(o,a,l,c){return new Cie(o,a,l,c)}s(e,"create"),t.create=e;function n(o){let a=o;return!!(Ve.defined(a)&&Ve.string(a.uri)&&(Ve.undefined(a.languageId)||Ve.string(a.languageId))&&Ve.uinteger(a.lineCount)&&Ve.func(a.getText)&&Ve.func(a.positionAt)&&Ve.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(o4e||(o4e={}));var Cie=class{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Jc.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return Jc.create(o,e-n[o])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}},Ve;(function(t){let e=Object.prototype.toString;function n(h){return typeof h<"u"}s(n,"defined"),t.defined=n;function r(h){return typeof h>"u"}s(r,"undefined"),t.undefined=r;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Ve||(Ve={}));var Mo=class{static{s(this,"LocationFactory")}static{this.range=ts.create.bind(ts)}static{this.position=Jc.create.bind(Jc)}},W1=class t{constructor(e,n,r){this.uri=e;this._textDocument=n;this.detectedLanguageId=r}static{s(this,"CopilotTextDocument")}static withChanges(e,n,r){let i=mv.create(e.clientUri,e.clientLanguageId,r,e.getText());return mv.update(i,n,r),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let n=mv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return mv.update(n,e.map(r=>({text:r.newText,range:r.range})),this.version),new t(this.uri,n,this.detectedLanguageId)}static create(e,n,r,i,o=JS({uri:e,languageId:n})){return new t(ml(e),mv.create(e,n,r,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let n=typeof e=="number"?e:e.line;if(n<0||n>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let r=ts.create(n,0,n+1,0),i=this.getText(r).replace(/\r\n$|\r$|\n$/g,""),o=ts.create(Jc.create(n,0),Jc.create(n,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var cD={isBlocked:!1,reason:"VALID_FILE"},sU={isBlocked:!1,reason:"NO_MATCHING_POLICY"},s4e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},f2={all:"all",repo:"repo"},G1=new Tt("contentExclusion");f();f();var aU=class{static{s(this,"PolicyEvaluator")}};f();f();f();var a4e=new Tt("repository"),p2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let n=this.getAll(e);return n?n[n.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,n){e in this.data||(this.data[e]=[]),this.data[e].push(n)}getSectionValues(e,n){let r=`${e}.`.toLowerCase(),i=`.${n}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(r)&&o.endsWith(i)).map(o=>o.slice(r.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((n,[r,i])=>(i.forEach(o=>n.add(r,o)),n),new t)}normalizeKey(e){let n=e.split(".");return n[0]=n[0].toLowerCase(),n[n.length-1]=n[n.length-1].toLowerCase(),n.join(".")}},Bm=class{static{s(this,"GitConfigLoader")}},lU=class extends Bm{constructor(n){super();this.loaders=n}static{s(this,"GitFallbackConfigLoader")}async getConfig(n,r){for(let i of this.loaders){let o=await i.getConfig(n,r);if(o)return o}}};f();var l4e=require("os");var cU=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Vx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Vx.parse(this.url)}catch(n){this._error=n;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let n=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");n&&(this._hostname=n)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,l4e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let n=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(n),this.setPath(this.url.substring(n.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var uU=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,n){let r=await e.get(Bm).getConfig(e,n);if(!r)return;let i=this.getRemotes(r),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let n=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(r=>({name:r,url:new cU(this.applyInsteadOfRules(n,e.get(`remote.${r}.url`)??""))})).filter(r=>r.url.isRemote())}applyInsteadOfRules(e,n){for(let r of e)if(n.startsWith(r.insteadOf))return r.base+n.slice(r.insteadOf.length);return n}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(n=>({base:n,insteadOf:e.get(`url.${n}.insteadof`)})).sort((n,r)=>r.base.length-n.base.length)}};var Pmt=100,xie=class{constructor(e,n){this.baseFolder=e;this.remote=n;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let n=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");n&&(this._tenant=n.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let n=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");n?(this._adoOrganization=n.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},H1=class t{constructor(e){this.ctx=e;this.remoteResolver=new uU;this.cache=new Ln(Pmt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let n,r=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(r,o),o}r.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(r,i),i;n=e,e=f0(e)}while(e!==n);this.updateCache(r,void 0)}updateCache(e,n){e.forEach(r=>this.cache.set(r,n))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new xie(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,n){try{let r=e.get(po),i=ko(n,".git");if((await r.stat(i)).type&1)return await this.getConfigLocationForGitfile(r,n,i);let a=ko(i,"config");return await r.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,n,r){let o=(await e.readFileString(r)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=RI(n,o[1]),l=ko(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=ko(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=ko(a,"commondir");a=RI(a,(await e.readFileString(u)).trimEnd());let d=ko(a,"config");return await e.stat(d),d}static async tryStat(e,n){try{return await e.stat(n)}catch{return}}};f();var c4e=s((t,e)=>{if(Jx.Check(t,e))return e;let n=`Typebox schema validation failed:
${[...Jx.Errors(t,e)].map(r=>`${r.path} ${r.message}`).join(`
`)}`;throw new Error(n)},"assertShape");f();f();f();var fU=new WeakMap;function pU(t,e){if(t==null||typeof t!="object")return String(t);let n,r="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&fU.has(t))return fU.get(t);switch(fU.set(t,"~"+ ++e),o){case"[object Set]":n=Array.from(t);case"[object Array]":for(n||(n=t),r+="a";i<n.length;r+=pU(n[i++],e));break;case"[object Object]":for(r+="o",n=Object.keys(t).sort();i<n.length;r+=n[i]+pU(t[n[i++]],e));break;case"[object Map]":for(r+="o",n=Array.from(t.keys()).sort();i<n.length;r+=n[i]+pU(t.get(n[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return fU.set(t,r),r}s(pU,"t");function mU(t){return pU(t,0)}s(mU,"r");var vie=new WeakMap;function u4e(t,e,n=mU(e)){let r,i,o=vie.get(t);o||(vie.set(t,o=[[],i=[],r=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=r[d++];u.r(m));}s(p,"o"),vie.delete(t),t(i).then(function(m){if(m.length!==r.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?r[d-1].r(u):r[d-1].s(u));},p)}));let a=o[0].indexOf(n);if(~a)return o[2][a].p;let l=o[0].push(n)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(u4e,"n");var d4e=new WeakMap;function Nmt(t,e,n,r=mU(n)){if(e||(e=d4e.get(t)),e||d4e.set(t,e=new Map),e.has(r))return Promise.resolve(e.get(r));let i=u4e(t,n,r);return e.set(r,i),i.catch(()=>e.delete(r)),i}s(Nmt,"n");function f4e(t,e){return function(n,r){return Nmt(t,e,n,r)}}s(f4e,"o");f();var P4e=qe(T4e(),1);f();var dD=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Wmt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},fD=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Gmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),w4e=s(t=>t.join(""),"rangesToString"),_4e=s((t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=n+1,a=!1,l=!1,c=!1,u=!1,d=n,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===n+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(Wmt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-n,!0];o+=v.length,_?i.push(b):r.push(b),l=l||E;continue e}}if(c=!1,p){y>p?r.push(fD(p)+"-"+fD(y)):y===p&&r.push(fD(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){r.push(fD(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}r.push(fD(y)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let y=r[0].length===2?r[0].slice(-1):r[0];return[Gmt(y),!1,d-n,!1]}let m="["+(u?"^":"")+w4e(r)+"]",h="["+(u?"":"^")+w4e(i)+"]";return[r.length&&i.length?"("+m+"|"+h+")":r.length?m:h,l,d-n,!0]},"parseClass");f();var hv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var Hmt=new Set(["!","?","+","*","@"]),S4e=s(t=>Hmt.has(t),"isExtglobType"),jmt="(?!(?:^|/)\\.\\.?(?:$|/))",hU="(?!\\.)",Vmt=new Set(["[","."]),$mt=new Set(["..","."]),zmt=new Set("().*{}+?[]^$\\!"),Ymt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Iie="[^/]",R4e=Iie+"*?",k4e=Iie+"+?",E5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#r=[];#n;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#n=n,this.#e=this.#n?this.#n.#e:this,this.#l=this.#e===this?r:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#n?this.#n.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#c=this.#r.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let n=e,r=n.#n;for(;r;){for(let i=n.#o+1;!r.type&&i<r.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#r[i])}n=r,r=n.#n}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#n===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#n?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#n?.isStart())return!1;if(this.#o===0)return!0;let e=this.#n;for(let n=0;n<this.#o;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#n?.type==="!")return!0;if(!this.#n?.isEnd())return!1;if(!this.type)return this.#n?.isEnd();let e=this.#n?this.#n.#r.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#u(e,n,r,i){let o=!1,a=!1,l=-1,c=!1;if(n.type===null){let h=r,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&S4e(y)&&e.charAt(h)==="("){n.push(g),g="";let v=new t(y,n);h=t.#u(e,v,h,i),n.push(v);continue}g+=y}return n.push(g),h}let u=r+1,d=new t(null,n),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(S4e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,n);continue}if(h===")")return m===""&&n.#r.length===0&&(n.#d=!0),d.push(m),m="",n.push(...p,d),u;m+=h}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],u}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#u(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${n}$`,l),{_src:n,_glob:e})}get options(){return this.#l}toRegExpSource(e){let n=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&$mt.has(this.#r[0]))){let g=Vmt,y=n&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!n&&!e&&g.has(u.charAt(0));d=y?jmt:v?hU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#n?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,hv(u),this.#t=!!this.#t,this.#i]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(n);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#t=void 0,[c,hv(this.toString()),!1,!1]}let a=!r||e||n||!hU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!n?hU:"")+k4e;else{let c=this.type==="!"?"))"+(this.isStart()&&!n&&!e?hU:"")+R4e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,hv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,o,a]=n.toRegExpSource(e);return this.#i=this.#i||a,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#m(e,n,r=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(zmt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=_4e(e,l);if(p){o+=u,a=a||d,l+=p-1,n=n||m;continue}}if(c==="*"){r&&e==="*"?o+=k4e:o+=R4e,n=!0;continue}if(c==="?"){o+=Iie,n=!0;continue}o+=Ymt(c)}return[o,hv(e),!!n,a]}};f();var Tie=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var ka=s((t,e,n={})=>(dD(e),!n.nocomment&&e.charAt(0)==="#"?!1:new I5(e,n).match(t)),"minimatch"),Kmt=/^\*+([^+@!?\*\[\(]*)$/,Jmt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),Xmt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),Zmt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),eht=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),tht=/^\*+\.\*+$/,nht=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),rht=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),iht=/^\.\*+$/,oht=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),sht=/^\*+$/,aht=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),lht=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),cht=/^\?+([^+@!?\*\[\(]*)?$/,uht=s(([t,e=""])=>{let n=N4e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocase"),dht=s(([t,e=""])=>{let n=L4e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocaseDot"),fht=s(([t,e=""])=>{let n=L4e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTestDot"),pht=s(([t,e=""])=>{let n=N4e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTest"),N4e=s(([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},"qmarksTestNoExt"),L4e=s(([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},"qmarksTestNoExtDot"),F4e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",B4e={win32:{sep:"\\"},posix:{sep:"/"}},mht=F4e==="win32"?B4e.win32.sep:B4e.posix.sep;ka.sep=mht;var Kf=Symbol("globstar **");ka.GLOBSTAR=Kf;var hht="[^/]",ght=hht+"*?",Aht="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",yht="(?:(?!(?:\\/|^)\\.).)*?",Cht=s((t,e={})=>n=>ka(n,t,e),"filter");ka.filter=Cht;var Yf=s((t,e={})=>Object.assign({},t,e),"ext"),xht=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ka;let e=ka;return Object.assign(s((r,i,o={})=>e(r,i,Yf(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Yf(t,o))}static defaults(i){return e.defaults(Yf(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Yf(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Yf(t,o))}},unescape:s((r,i={})=>e.unescape(r,Yf(t,i)),"unescape"),escape:s((r,i={})=>e.escape(r,Yf(t,i)),"escape"),filter:s((r,i={})=>e.filter(r,Yf(t,i)),"filter"),defaults:s(r=>e.defaults(Yf(t,r)),"defaults"),makeRe:s((r,i={})=>e.makeRe(r,Yf(t,i)),"makeRe"),braceExpand:s((r,i={})=>e.braceExpand(r,Yf(t,i)),"braceExpand"),match:s((r,i,o={})=>e.match(r,i,Yf(t,o)),"match"),sep:e.sep,GLOBSTAR:Kf})},"defaults");ka.defaults=xht;var M4e=s((t,e={})=>(dD(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,P4e.default)(t)),"braceExpand");ka.braceExpand=M4e;var vht=s((t,e={})=>new I5(t,e).makeRe(),"makeRe");ka.makeRe=vht;var bht=s((t,e,n={})=>{let r=new I5(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t},"match");ka.match=bht;var D4e=/[?*]|[+@!]\(.*?\)|\[|\]/,Eht=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),I5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){dD(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||F4e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!D4e.test(o[2]))&&!D4e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let a=i;for(;r[a+1]==="**";)a++;a>i&&r.splice(i+1,a-i);let l=r[i+1],c=r[i+2],u=r[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;n=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<r.length-1;a++){let l=r[a];a===1&&l===""&&r[0]===""||(l==="."||l==="")&&(n=!0,r.splice(a,1),a--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let a=r[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){n=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<n.length;)if(e[i]===n[o])a.push(l==="b"?n[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&n[o]===e[i+1])a.push(e[i]),i++;else if(r&&n[o]==="**"&&e[i]===n[o+1])a.push(n[o]),o++;else if(e[i]==="*"&&n[o]&&(this.options.dot||!n[o].startsWith("."))&&n[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(n[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(n[o]),i++,o++}else return!1;return e.length===n.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),E=!b&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[B,N]=[e[_],n[k]];B.toLowerCase()===N.toLowerCase()&&(n[k]=B,k>_?n=n.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var a=0,l=0,c=e.length,u=n.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=n[l],p=e[a];if(this.debug(n,d,p),d===!1)return!1;if(d===Kf){this.debug("GLOBSTAR",[n,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,n,h,g),this.matchOne(e.slice(m),n.slice(h),r))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,n,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,m,n,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return r;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return M4e(this.pattern,this.options)}parse(e){dD(e);let n=this.options;if(e==="**")return Kf;if(e==="")return"";let r,i=null;(r=e.match(sht))?i=n.dot?lht:aht:(r=e.match(Kmt))?i=(n.nocase?n.dot?eht:Zmt:n.dot?Xmt:Jmt)(r[1]):(r=e.match(cht))?i=(n.nocase?n.dot?dht:uht:n.dot?fht:pht)(r):(r=e.match(tht))?i=n.dot?rht:nht:(r=e.match(iht))&&(i=oht);let o=E5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?ght:n.dot?Aht:yht,i=new Set(n.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?Eht(d):d===Kf?Kf:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==Kf||h===Kf||(h===void 0?m!==void 0&&m!==Kf?u[p+1]="(?:\\/|"+r+"\\/)?"+m:u[p]=r:m===void 0?u[p-1]=h+"(?:\\/|"+r+")?":m!==Kf&&(u[p-1]=h+"(?:\\/|\\/"+r+"\\/)"+m,u[p+1]=Kf))}),u.filter(d=>d!==Kf).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(r.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return ka.defaults(e).Minimatch}};ka.AST=E5;ka.Minimatch=I5;ka.escape=Tie;ka.unescape=hv;var wie="contentExclusion",gU=class extends aU{static{s(this,"CopilotContentExclusion")}#e;#t=new Ln(1e4);#i=new Ln(200);constructor(e){super(),this.#e=e}async evaluate(e,n){try{e=RI(e).toString();let r=await this.getGitRepo({uri:e}),i=await this.#r(r?.url??f2.all);if(!i)return sU;let o=r?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,n);if(l.isBlocked)return l}catch(r){return G1.exception(this.#e,r,`${wie}.evaluate`),s4e}return cD}evaluateFilePathRules(e,n,r){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=cD,a,l=Rte(e.replace(n,""));e:for(let c of r)for(let u of c.paths)if(ka(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=_ie(c,"FILE_BLOCKED_PATH"),a=u;break e}return G1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:n,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,n,r){let i=n.filter(l=>l.ifAnyMatch),o=n.filter(l=>l.ifNoneMatch);if(!r||i.length===0&&o.length===0)return cD;let a=this.evaluateFileContent(i,o,r);return G1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,n,r){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>Q4e(a)).some(a=>a.test(r)))return _ie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of n)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>Q4e(a)).some(a=>a.test(r)))return _ie(i,"FILE_BLOCKED_TEXT_BASED");return cD}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(n=>this.#o(n)))}catch(e){wa(this.#e,e,`${wie}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#r(e){if(this.#n?.length)return this.#n;let n=await this.#o(e.toLowerCase());if(n.length!==0)return n}#n;setTestingRules(e){this.#n=e}#o=f4e(async e=>{let n=await this.#e.get(Gn).getGitHubSession();if(!n)throw new cs("No token found");let r=n.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(r,n.apiUrl),o=e.includes(f2.all);e.filter(u=>u!==f2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==f2.all).join(",")),i.searchParams.set("scope",o?f2.all:f2.repo);let l=await Bf(this.#e,n,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new rg(l)}return this.#s("fetch.success"),c4e(_ht,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let r=await this.#e.get(H1).getRepo(f0(e));if(!r||!r?.remote)return;let i=r.remote.getUrlForApi();if(i)return{baseFolder:r.baseFolder,url:i}}#s(e,n,r){Bt(this.#e,`${wie}.${e}`,or.createAndMarkAsIssued(n,r))}};function Q4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}s(Q4e,"stringToRegex");function _ie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(_ie,"fileBlockedEvaluationResult");var Iht=I.Object({name:I.String(),type:I.String()}),Tht=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:Iht}),Sie=I.Array(Tht),wht=I.Object({rules:Sie,last_updated_at:I.String(),scope:I.String()}),_ht=I.Array(wht);var Ol=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new gU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let n=await this.ctx.get(Tn).getTextDocumentValidation(e.document),r=n.status==="invalid",i=n.status==="invalid"?n.reason:void 0;this.updateStatusIcon(r,i)},"onDidChangeActiveTextEditor");this.ctx.get(Tn).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),Ps(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,n,r){let i=Go(e)!==void 0;if(i||G1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,n),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){G1.error(this.ctx,"Error tracking telemetry",u)}return r==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,n){this.#e&&(e?this.ctx.get(Ji).setInactive(n??"Copilot is disabled"):this.ctx.get(Ji).clearInactive())}#i(e,n,r,i){let o=n+e;if(this.evaluateResultCache.get(o)===r.reason)return!1;if(this.evaluateResultCache.set(o,r.reason??"UNKNOWN"),r.reason===sU.reason)return G1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${n}`),!1;let l={isBlocked:r.isBlocked?"true":"false",reason:r.reason??"UNKNOWN"},c={elapsedMs:i};return Bt(this.ctx,e,or.createAndMarkAsIssued(l,c)),Bt(this.ctx,e,or.createAndMarkAsIssued({...l,path:n},c),1),G1.debug(this.ctx,`[${e}] ${n}`,r),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function j1(t,e,n){let r=await t.get(Ol).evaluate(e.uri,n);return r.isBlocked?{status:"invalid",reason:r.message??"Document is blocked by repository policy"}:{status:"valid"}}s(j1,"isDocumentValid");var Tn=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),n=[];for(let r of e)(await j1(this.ctx,r,r.getText())).status==="valid"&&n.push(r);return n}getTextDocumentUnsafe(e){let n=ml(e.uri);return this.getTextDocumentsUnsafe().find(r=>r.uri===n)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(n=>{if(n.status==="valid")return n.document})}validateTextDocument(e,n){return j1(this.ctx,e,n)}async getTextDocumentValidation(e){try{let n=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return n===void 0?this.notFoundResult(e):this.validateTextDocument(e,n)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let n=this.getTextDocumentUnsafe(e);if(!n)return this.notFoundResult(e);let r=await this.validateTextDocument(e,n.getText());return r.status==="valid"?{status:"valid",document:n}:r}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(po).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(po).readFileString(e)}getWorkspaceFolder(e){let n=ml(e.uri);return this.getWorkspaceFolders().find(r=>n.startsWith(ml(r.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let n=ml(e.uri);for(let r of this.getWorkspaceFolders()){let i=ml(r.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(n.startsWith(i))return n.slice(i.length)}return Ti(n)}};function Cs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(Cs,"statusFromTextDocumentResult");var Cr=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Tn).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let r=await this.ctx.get(Tn).getTextDocumentWithValidation({uri:e});if(r.status!=="notfound")return r;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await j1(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:W1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(po).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(po).stat(e)).size/1024/1024}};f();f();var Du=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}static{s(this,"Deferred")}};function _g(t,e=void 0){return new Promise(n=>setTimeout(()=>n(e),t))}s(_g,"delay");f();var Rie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let n of this.observers)n.next(e)}error(e){for(let n of this.observers)n.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},AU=class extends Rie{static{s(this,"ReplaySubject")}subscribe(e){let n=super.subscribe(e);return this._value!==void 0&&e.next(this._value),n}next(e){this._value=e,super.next(e)}};var xd=class{constructor(e){this.ctx=e;this.#e=new Tt("AsyncCompletionManager");this.requests=new Ln(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,n){for(let[r,i]of this.requests)if(kie(e,n,i))return!0;return!1}updateCompletion(e,n){let r=this.requests.get(e);r!==void 0&&(r.partialCompletionText=n,r.subject.next(r))}queueCompletionRequest(e,n,r,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,n.substring(n.lastIndexOf(`
`)+1));let a=new AU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,n,r,i,o){let a=this.ctx.get(Rt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,n,r,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,n,r,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,n,r,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Du,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(kie(n,r,d)){if(d.state===0){let p=n.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)kie(n,r,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,n){e===this.mostRecentRequestId&&n.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${n.headerRequestId}`),n.cancellationTokenSource.cancel(),this.requests.delete(n.headerRequestId))}};function kie(t,e,n){if(n.prompt.suffix!==e.suffix||!t.startsWith(n.prefix))return!1;let r=t.substring(n.prefix.length);return n.state===0?n.choice.completionText.startsWith(r)&&n.choice.completionText.trimEnd().length>r.length:n.partialCompletionText===void 0?!0:n.partialCompletionText.startsWith(r)}s(kie,"isCandidate");f();f();var mD=class{constructor(e){this.maxSize=e;this.root=new pD;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,n){let{node:r,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of r.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new pD;r.removeChild(o),r.addChild(l,c),c.addChild(o.slice(l.length),a),r=c,i=i.slice(l.length);break}if(i.length>0){let o=new pD;r.addChild(i,o),r=o}}r.value=n,this.leafNodes.add(r),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:n,remainingKey:r})=>n.value!==void 0?{remainingKey:r,value:n.value}:void 0).filter(n=>n!==void 0)}delete(e){let{node:n,remainingKey:r}=this.findClosestNode(e);r.length>0||this.deleteNode(n)}findClosestNode(e){let n=!0,r=this.root,i=[{node:r,remainingKey:e}];for(;e.length>0&&n;){n=!1;for(let[o,a]of r.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),r=a,n=!0;break}}return{node:r,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:n,edge:r}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),n.removeChild(r),n.addChild(r+o,a);return}if(n.removeChild(r),n.parent===void 0)return;let i=n.parent;if(n.value===void 0&&n.childCount===1){let[o,a]=Array.from(n.children)[0],l=i.edge+o;n.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let n of this.leafNodes)(e===void 0||n.touched<e.touched)&&(e=n);return e}},pD=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,n){this._children.set(e,n),n.parent={node:this,edge:e}}removeChild(e){let n=this._children.get(e);n&&(n.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Dm=class{constructor(){this.cache=new mD(100)}static{s(this,"CompletionsCache")}findAll(e,n){return this.cache.findAll(e).flatMap(({remainingKey:r,value:i})=>i.content.filter(o=>o.suffix===n&&o.choice.completionText.startsWith(r)&&o.choice.completionText.length>r.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(r.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:r.length})})))}append(e,n,r){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:n,choice:r}]})}else this.cache.set(e,{content:[{suffix:n,choice:r}]})}clear(){this.cache=new mD(100)}};f();f();f();var Sg=class{constructor(e,n,r){this.languageId=e;this.prefix=n;this.completion=r}static{s(this,"BlockTrimmer")}static isSupported(e){return $c.isSupported(e)}async withParsedStatementTree(e){var r=[];try{let n=mX(r,$c.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await n.build();return await e(n)}catch(i){var o=i,a=!0}finally{hX(r,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let n;if(e&&this.isCompoundStatement(e))n=e;else if(e){let r=e.parent;for(;r&&!this.isCompoundStatement(r);)r=r.parent;n=r}if(n){let r=this.asCompletionOffset(n.node.endIndex);if(r&&this.completion.substring(r).trim()!=="")return r}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let n=this.asCompletionOffset(e.node.endIndex),r=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,n??0),Math.max(0,r??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var yU=class extends Sg{constructor(n,r,i,o=3,a=7){super(n,r,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async n=>{let r=n.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(r);return i=this.trimAtFirstBlankLine(i),r&&(i=this.trimAtStatementChange(r,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let n=this.completion.match(/\S/);return n&&n.index!==void 0?this.prefix.length+n.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(n){let r=[...this.trimmedCompletion(n).matchAll(/\r?\n\s*\r?\n/g)];for(;r.length>0&&(n===void 0||n>r[0].index);){let i=r.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return n}trimAtStatementChange(n,r){let i=this.prefix.length,o=this.prefix.length+(r??this.completion.length);if(n.node.endIndex>i&&this.isCompoundStatement(n))return n.nextSibling&&n.node.endIndex<o?this.asCompletionOffset(n.node.endIndex):r;let a=n,l=n.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):r}};async function O4e(t,e){var l=[];try{let n=t.getText();let r=t.offsetAt(e);let i=mX(l,$c.create(t.detectedLanguageId,n,0,n.length));await i.build();let o=i.statementAt(r);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(r<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{hX(l,u,d)}}s(O4e,"getBlockPositionType");f();f();var V1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function U4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?n=.031231253521808708:n=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?n=.06751619128429062:n=.09625089153176467:n=.027268163053989804:t[308]>1e-35?n=.060174483556283756:n=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?n=-.03969241799174589:n=.01086816842550381:t[31]>1e-35?n=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?n=-.04224490699947552:n=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?n=-.13448447971850278:n=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?n=-.07256260662659254:t[4]>60.50000000000001?n=-.08227503453609311:n=-.020596416747563847:n=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?n=-.10046536995362734:t[133]>1e-35?n=-.06407649822752297:t[225]>1e-35?n=.08035785003303324:t[92]>1e-35?n=.018901360933204676:t[20]>1e-35?n=.05252546973665552:t[8]>2592.5000000000005?n=-.040543705016462955:n=-.011236043818320725:t[9]>17.500000000000004?n=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?n=.03527165701669741:n=-.0071847350825815035:t[127]>1e-35?n=.024373016379595405:t[9]>2.5000000000000004?n=-.0035090719709448288:n=-.03514829488063766;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?r=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?r=-.003764520033319488:r=.06570817919969299:t[4]>61.50000000000001?r=.028346156293069538:r=.0908154644362606:r=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?r=.0019305229020073053:r=.09279357295883772:r=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?r=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?r=.044727478132905285:t[115]>1e-35?r=.10245804828855934:t[9]>17.500000000000004?r=-.03353173647469207:t[2]>98.50000000000001?r=-.10048106638102179:r=-.05484231104348874:t[31]>1e-35?r=.016807537467116516:t[9]>6.500000000000001?r=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?r=-.01882594250504289:r=-.05585658862796076:r=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?r=-.09262278043707878:t[133]>1e-35?r=-.058454257768893625:t[32]>1e-35?r=-.09769348447126434:t[25]>1e-35?r=-.0725430043727677:t[122]>1e-35?r=-.10047841601578077:r=-.00580671054458958:t[9]>13.500000000000002?r=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?r=-.0076376731757173515:r=.03394923033036848:t[127]>1e-35?r=.02070489091204209:r=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let U;t[131]>1e-35?U=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?U=.07473600489975568:t[0]>93.50000000000001?U=-.021596848506011502:U=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?U=.10264284346448256:U=.031042487183181262:U=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?U=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?U=.006271403149804702:U=-.030013637555715046:t[0]>4449.500000000001?U=-.06556876058654929:U=.06437994816903034:t[32]>1e-35?U=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?U=-.09349726304052086:t[210]>1e-35?U=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?U=-.029188394315052574:U=.017219308333820193:U=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?U=-.04428555753857688:U=.0001456106867817353:t[5]>213.50000000000003?U=.01740292726636365:U=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?U=.03410288911259329:t[121]>1e-35?U=-.06056527462120627:t[8]>2592.5000000000005?U=.12166808844363577:t[191]>1e-35?U=.11669879218998758:U=-.001664858391716235:U=-.01262927450503166:U=-.04506589951879664:t[227]>1e-35?U=-.08548904959752329:U=.02156080776537726;let re;t[306]>1e-35?t[149]>1e-35?re=-.1389218965136736:re=-.032218642644416894:t[13]>1e-35?re=.006465035217331847:t[50]>1e-35?re=-.1381687930130022:t[179]>1e-35?re=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?re=-.03262719498763048:re=.023342916702125613:t[191]>1e-35?re=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?re=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?re=-.09989343595668776:re=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?re=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?re=-.09165257825246746:t[9]>32.50000000000001?re=.02484870392366004:re=-.008499493096971395:t[8]>24.500000000000004?re=.02459679192828244:re=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?re=.0015644546318714849:re=-.06579524865022705:re=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?re=.03331853632960164:re=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?re=-.019091477207111116:re=.037878468575478504:t[94]>1e-35?re=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?re=.16919658785098224:t[243]>1e-35?re=-.06580584936754524:re=.01567555159935563:t[129]>1e-35?re=.06721746994993226:t[10]>32.50000000000001?re=-.046394462507797975:re=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let ae;t[306]>1e-35?ae=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?ae=-.09091897542577475:ae=.04042943082645558:t[218]>1e-35?ae=.056254985867151:ae=-.053848117950183044:ae=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?ae=.021581808008986944:ae=-.05639286496176611:ae=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?ae=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?ae=.023885302967553288:ae=.1617794086125622:t[212]>1e-35?ae=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?ae=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?ae=.01894935813286188:ae=-.06449356357429188:ae=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?ae=-.034718828212885515:ae=.0898976288814321:t[1]>17.500000000000004?ae=-.15440137451988326:ae=-.03864183216821465:ae=.009988507307006308:ae=-.08540311947043305:t[50]>1e-35?ae=-.13323659732101975:t[134]>1e-35?ae=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?ae=.08082476177379844:ae=-.041665761903645876:t[179]>1e-35?ae=-.12405023987936657:t[39]>1e-35?ae=-.06247416524997478:t[138]>1e-35?ae=-.10724031753676487:ae=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let G;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?G=-.03461119351456781:G=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?G=-.12404435523286539:G=-.0034376913880382956:G=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?G=.0037507103585310234:G=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?G=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?G=-.04832024079663151:t[37]>1e-35?G=-.037103393468366934:G=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?G=.032539071163832034:t[5]>1643.5000000000002?G=.036408625378035665:t[0]>1500.5000000000002?G=-.1346358322854993:G=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?G=-.1133991164577881:t[9]>52.50000000000001?G=-.024478640359723122:G=.03673777861098756:G=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?G=.002583438691776944:G=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?G=-.02141222346712401:G=.06392462314316179:t[4]>12.500000000000002?G=.08700122294434816:t[8]>267.50000000000006?G=.056923170082743224:G=-.07716309825583327:t[32]>1e-35?G=-.03961343943752142:G=.002674914122888783:t[1]>42.50000000000001?G=-.05217539654421676:t[145]>1e-35?G=.09553630282946368:G=-.009424791262477729;let ue;t[183]>1e-35?ue=-.05753337139158443:t[308]>1e-35?ue=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ue=-.10477869875380448:ue=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ue=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ue=-.04442302951713574:ue=.00012409888451734224:ue=-.092199119633697:t[225]>1e-35?ue=.13773072450201831:t[0]>2882.5000000000005?ue=.0028540012229920533:t[298]>1e-35?ue=.07134486044361629:ue=.014297412329837425:t[145]>1e-35?ue=.05608385321902638:t[92]>1e-35?ue=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ue=-.0039957800609801315:ue=.0776927564241081:t[203]>1e-35?ue=-.05502900859432093:t[105]>1e-35?ue=.06062892720841595:ue=-.009574839629252128:t[31]>1e-35?ue=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ue=.08818126313644752:t[8]>161.50000000000003?ue=.014353968957885408:ue=-.022240738532827903:t[210]>1e-35?ue=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ue=-.043902062079383485:ue=-.014741559220396223:ue=-.00934935734853194:t[6]>32.50000000000001?ue=.1514593126307404:ue=.010771222510801532:t[10]>22.500000000000004?ue=.01412495209334078:ue=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let $;t[294]>1e-35?$=-.042529778074638265:t[266]>1e-35?$=-.1180276669679798:t[134]>1e-35?$=-.026818144353279623:t[183]>1e-35?$=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?$=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?$=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?$=-.03049646619610203:t[1]>50.50000000000001?$=.20634590755061122:$=.06956378103625731:t[0]>3770.5000000000005?$=-.07946414366134913:t[19]>1e-35?$=.17083312065604694:t[2]>21.500000000000004?$=-.02327981978127724:$=.129717297518715:t[145]>1e-35?$=.006891245076133524:$=-.0789123467863741:t[3]>99.50000000000001?$=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?$=.06447639919732716:$=-.05457561977645972:t[306]>1e-35?$=-.029995903305383882:t[191]>1e-35?$=.030596508110850414:t[242]>1e-35?$=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?$=.09518584795377832:$=-.018197744600833596:t[13]>1e-35?$=.006751790086127549:t[148]>1e-35?$=.01904174573618417:t[99]>1e-35?$=.025287735102561926:t[4]>14.500000000000002?$=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?$=-.09467943982430241:t[243]>1e-35?$=-.02521824751996268:$=.005437570718352172:$=-.022476214821960674;let O;t[0]>384.50000000000006?t[84]>1e-35?O=-.06088131453064195:t[147]>1e-35?O=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?O=.04219361472548491:O=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?O=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?O=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?O=-.11431764534511478:O=.013549717238356157:O=-.020987333767091276:t[6]>2.5000000000000004?O=-.02914877855133127:O=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?O=-.10087072787978416:t[37]>1e-35?O=-.030467397753331196:t[229]>1e-35?O=-.1017559811057469:t[4]>20.500000000000004?O=-.00413177742240167:t[20]>1e-35?O=.05213315982685969:O=.0037921635866823133:t[8]>51.50000000000001?O=.07327913092421544:t[6]>49.50000000000001?O=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?O=.02744420891894289:O=.11288946357194463:O=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?O=-.012329314369909049:O=.026816658655600168:O=-.0872405354618811:O=.007872673500247845:t[1]>42.50000000000001?O=-.04309044198258254:t[145]>1e-35?O=.07572529147860785:t[7]>5.500000000000001?O=-.013837187093264945:t[1]>17.500000000000004?O=.04208698439539668:O=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let K;t[8]>2915.5000000000005?t[297]>1e-35?K=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?K=-.01034964686484714:K=-.07357437440667927:K=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?K=-.09476398869062203:t[9]>72.50000000000001?K=-.0757383854264379:K=.02806542779508718:K=-.05147742568418084:K=.10212721564444344:K=.0518263760642861:K=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?K=-.10669213185972036:K=.027050434286384796:t[302]>1e-35?K=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?K=.06354599160071946:t[1]>67.50000000000001?K=.05317447949011187:K=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?K=-.09369289448773599:t[0]>2215.5000000000005?K=.04077965380363924:t[0]>807.5000000000001?K=-.0591771776458298:K=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?K=-.016323380219241672:K=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?K=.03720704290087811:K=-.008730548158766654:t[4]>80.50000000000001?K=-.05346644687473197:K=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?K=.019984510398089086:K=-.03917825025861855:t[9]>170.50000000000003?K=-.09759719821334525:K=-.0023586682752856298;let le;t[183]>1e-35?t[17]>1e-35?le=.030100940443356424:t[10]>1.5000000000000002?le=-.10861112216742408:le=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?le=-.032062878390325456:le=-.10808232631806887:t[8]>1641.5000000000002?le=-.06147013392655731:t[4]>12.500000000000002?le=.03324767551088266:t[145]>1e-35?le=.028851633810612017:le=-.054871239091792784:t[134]>1e-35?le=-.023813968121342108:t[266]>1e-35?le=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?le=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?le=-.025350325484720576:le=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?le=.056817276537534815:le=-.07674158463557636:le=-.06335553143454145:t[1]>56.50000000000001?le=.16390494217299284:le=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?le=.041717597065890205:le=-.10357913492269129:t[10]>29.500000000000004?le=.1365512866715726:le=.020600048310575665:le=.09708785634773187:le=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?le=-.03146213719547347:le=.11784024316238083:le=-.050940520532045355:le=-.047988344143075616:t[191]>1e-35?le=.028764654731460032:le=.0011911575567860023;let te;t[294]>1e-35?t[10]>50.50000000000001?te=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?te=-.05103908560370243:te=.05002066201169583:te=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?te=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?te=.127983140816313:te=-.05436534163636867:te=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?te=-.009504203657088933:t[8]>819.5000000000001?te=.18689664822602375:te=.03635576744011826:te=-.029862411809998525:t[223]>1e-35?te=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?te=-.09405026597863717:t[0]>4153.500000000001?te=.053577663326799765:te=-.05062127873995668:te=.06512222894425874:t[39]>1e-35?te=-.04985311717827547:t[51]>1e-35?te=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?te=-.02860634573675884:te=.08863753005590103:te=.11158892111063744:t[0]>655.5000000000001?te=-.031005736641654926:te=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?te=-.00843386136334982:te=-.05273594615999777:te=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?te=-.015774115523598486:te=.10147367091236065:te=-.048307000563071016:te=.002118376117677254;let pe;t[8]>1014.5000000000001?t[9]>137.50000000000003?pe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?pe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?pe=.07211107542565391:pe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?pe=-.0751486415451188:t[1]>59.50000000000001?pe=.13459005084554104:pe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?pe=.06715575425741895:pe=-.005895690393702183:t[8]>2915.5000000000005?pe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?pe=-.00029068886245881074:pe=.0613467393188786:t[148]>1e-35?pe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?pe=.003887223773199377:pe=-.08553893131979015:pe=.025654192706396767:pe=-.05651733979610658:pe=-.02039913645229667:t[2]>7.500000000000001?pe=-.1058450646728524:pe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?pe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?pe=.1283258201586378:pe=-.01718135372229775:pe=-.07702452408491414:t[125]>1e-35?pe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?pe=.04273051857848212:pe=-.04533122948101463:t[2]>196.50000000000003?pe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?pe=.0231032972703664:pe=-.04807386814498683:pe=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let ke;t[131]>1e-35?t[1]>93.50000000000001?ke=-.05706887458825395:t[2]>1.5000000000000002?ke=.011446637886629108:ke=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?ke=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?ke=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?ke=.026278724448495064:ke=.17053138400480508:t[0]>4463.500000000001?ke=-.06482289890096041:ke=.03026516489536295:ke=-.031785170717683144:ke=.1312690622980455:t[13]>1e-35?ke=.14336922540461444:ke=.03523850945454039:ke=-.015407465968975714:t[39]>1e-35?ke=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?ke=-.0659975068798723:ke=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?ke=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?ke=.057409156184759516:ke=.2024322059866388:ke=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?ke=.010648654146284154:t[308]>1e-35?ke=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?ke=.12364025998551711:ke=-.02247495081065243:t[1]>22.500000000000004?ke=-.0726295464624251:ke=.03481895086048152:t[0]>4331.500000000001?ke=-.04775443357020673:ke=.07172377425057568:t[2]>89.50000000000001?ke=-.11782645274716962:ke=.00010092665257989378;let Ze;t[147]>1e-35?Ze=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Ze=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Ze=-.016101990375700172:t[0]>2579.5000000000005?Ze=-.13045089661551845:Ze=-.02874367814784938:Ze=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Ze=.17084176915326055:Ze=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Ze=.10591712319944074:Ze=-.024082167264285:Ze=.16497698867036126:Ze=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ze=-.021012910475524206:Ze=-.13058422554298485:t[0]>1102.5000000000002?Ze=.10955864175201457:Ze=-.03566689354348996:t[1]>11.500000000000002?Ze=-.02093884208606101:Ze=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Ze=-.013861861436128482:Ze=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Ze=.10163873449625677:Ze=-.02779270277623805:t[1]>26.500000000000004?Ze=-.08035058228527389:Ze=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Ze=-.007028075523033826:Ze=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Ze=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Ze=-.0032075580718124892:Ze=-.04442829143298883:Ze=-.06597073245775804:Ze=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ft;t[179]>1e-35?ft=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ft=-.07595415373151816:ft=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ft=.022822510448266862:ft=.17491569312933697:ft=-.058362287133533565:t[2]>2.5000000000000004?ft=-.03633895806364428:ft=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ft=-.07294848747514579:ft=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ft=-.07009535282685533:t[8]>2640.0000000000005?ft=-.051761240111316276:t[131]>1e-35?ft=-.06245774419231631:ft=.03495606662854905:ft=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ft=.0015036626973581122:ft=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ft=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ft=.022343994371919224:ft=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ft=.07724450228328664:t[0]>3853.5000000000005?ft=-.15671707454435677:t[10]>28.500000000000004?ft=-.10179090671841723:ft=.014878216919760927:ft=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ft=.14054154485273487:ft=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ft=-.08632985141410315:ft=.005524157938954954:ft=-.08802502622523681:ft=-.0004649168897260341;let It;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?It=-.007458687464321174:It=-.09444966249102484:t[1]>23.500000000000004?It=.08564129697360716:It=-.07105002902845851:It=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?It=-.10326216566705966:t[1]>26.500000000000004?It=.0050539832484585365:It=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?It=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?It=.05783632021087773:t[10]>17.500000000000004?It=-.06720598671764105:t[1]>47.50000000000001?It=.097495825172558:It=-.013372242800584872:It=-.06463226787713715:t[42]>1e-35?It=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?It=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?It=.11051270080118503:It=.027719462817590454:t[8]>597.5000000000001?It=-.08441503592016869:It=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?It=-.12190088985091102:It=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?It=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?It=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?It=.016585157185448045:It=-.11032043771149425:It=.01586986028570486:t[8]>388.50000000000006?It=-.10592413013261853:It=.04930703248769364:t[13]>1e-35?It=.003621937787920821:It=-.0013786331198611841;let yt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?yt=.009769895322846493:yt=-.10620052926943656:t[9]>19.500000000000004?yt=.03781202525403449:t[9]>14.500000000000002?yt=-.11485785321365344:t[9]>6.500000000000001?yt=.07677177833073881:t[0]>4342.500000000001?yt=-.07079285609687631:t[49]>1e-35?yt=.06156814809246001:yt=-.014788509042554625:yt=-.032659201618470655:t[5]>5207.500000000001?yt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?yt=-.03094160322187924:t[1]>29.500000000000004?yt=.09474646043921069:yt=.023445783928231618:yt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?yt=-.07164443768784848:t[1]>29.500000000000004?yt=.089473622509272:t[8]>597.5000000000001?yt=-.08155349903101317:yt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?yt=-.004003900679358653:t[190]>1e-35?yt=-.09236113461485262:t[8]>3198.5000000000005?yt=-.0124130160451179:yt=.018453070064009328:t[15]>1e-35?yt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?yt=-.0009580759587680961:yt=-.03227283036698222:yt=.01369287669536875:t[1]>50.50000000000001?yt=-.04213060332500437:t[35]>1e-35?yt=-.11508095777767471:t[190]>1e-35?yt=-.08611884672400155:t[297]>1e-35?yt=.05723551879433584:yt=-.004829340082311461;let vt;t[183]>1e-35?vt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?vt=-.11753465135886734:vt=-.007515490299047085:vt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?vt=-.12371142493530439:t[1]>36.50000000000001?vt=.032189417575190435:vt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?vt=-.0784518658439288:t[2]>54.50000000000001?vt=.12477882322370665:vt=.000313468482399738:vt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?vt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?vt=.0353146070135579:vt=-.06327619611098285:vt=.02813577701641991:vt=-.12354390728506215:t[34]>1e-35?vt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?vt=-.01245803535276381:vt=-.07169472553475001:t[1]>11.500000000000002?vt=.12989984824561698:vt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?vt=.010390226893521422:t[10]>14.500000000000002?vt=.16790888126487719:vt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?vt=-.043398307129729134:vt=.09963544907820426:t[9]>30.500000000000004?vt=-.13540713124984502:t[9]>17.500000000000004?vt=.0509435850590757:vt=-.04761897852404613:t[4]>78.50000000000001?vt=.09197086656470652:vt=.0006771050176682337;let ce;t[122]>1e-35?t[6]>36.50000000000001?ce=.05686884451670743:ce=-.05334759543084309:t[266]>1e-35?ce=-.08603579519816038:t[157]>1e-35?ce=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ce=-.0499592651503952:t[0]>725.5000000000001?ce=.11780353905132664:ce=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ce=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ce=-.03190157229022304:ce=.07985197845805492:ce=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ce=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ce=-.027174047777029083:ce=.057117284879796476:t[3]>43.50000000000001?ce=-.0016147040913107311:ce=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ce=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ce=-.01466076988151239:ce=.13375695925484857:ce=-.04885873081899647:t[0]>5566.500000000001?ce=.11086813028591343:t[8]>992.5000000000001?ce=-.07622304217072383:ce=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ce=.03285858361708423:ce=-.12354858211764992:ce=.0672788301823281:t[15]>1e-35?ce=.08658836986585006:ce=-.02741484278509758:t[290]>1e-35?ce=-.08161310335133287:t[135]>1e-35?ce=-.04824156054814152:ce=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let Z;t[179]>1e-35?Z=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?Z=.1470294450403005:Z=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?Z=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?Z=.07965955447707423:t[10]>10.500000000000002?Z=-.09236156404262426:Z=.03396273196231458:Z=-.13246465021467432:Z=.07092822261735353:Z=-.08753829085942:Z=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?Z=.004705878789890202:Z=.13775378964952867:Z=-.04770928980587811:t[10]>29.500000000000004?Z=.011221519891071544:t[0]>3853.5000000000005?Z=.06365381191628273:Z=.15506252245336827:t[1]>37.50000000000001?Z=-.07254777021042061:Z=.026514587757252385:t[308]>1e-35?Z=.04115804816617256:t[10]>26.500000000000004?Z=.02077721353011946:t[5]>3548.5000000000005?Z=-.1280907116663952:Z=-.021974774274438:t[306]>1e-35?Z=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?Z=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?Z=-.005710865560475598:t[94]>1e-35?Z=-.06751507982853555:Z=.027250040757588703:t[9]>52.50000000000001?Z=.07060357924595577:Z=-.030297760713011795:Z=-.0006005400085266517;let ne;t[113]>1e-35?ne=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ne=-.06996356565314456:ne=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ne=-.08317707559926495:t[21]>1e-35?ne=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ne=-.010538203005984922:ne=.08454819465349446:t[9]>124.50000000000001?ne=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ne=-.08542251249346582:t[9]>50.50000000000001?ne=-.023428882537657472:ne=.010042500833979073:ne=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ne=.03006025206979096:t[9]>108.50000000000001?ne=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ne=.04222035773042132:ne=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ne=-.07209095448054853:ne=.028065954981903313:ne=.08714651929917122:ne=-.006678820669279169:t[10]>40.50000000000001?ne=.006982396294941626:ne=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ne=-.09351114982645548:t[4]>3.5000000000000004?ne=-.004837550129223451:ne=-.08324141237464677:t[303]>1e-35?ne=.10703037493990825:t[9]>156.50000000000003?ne=-.10803018621648303:t[116]>1e-35?ne=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ne=.10261721665006701:ne=.018994509090668264:ne=.0011244262442038839;let Ge;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?Ge=-.08404263465005328:t[0]>3682.5000000000005?Ge=.041259223920298876:t[1]>29.500000000000004?Ge=-.09541257493441671:Ge=.001482192721625409:Ge=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?Ge=-.08268996098437432:t[230]>1e-35?Ge=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?Ge=-913218977737457e-19:t[4]>10.500000000000002?Ge=-.056334165674005156:t[127]>1e-35?Ge=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?Ge=-.04231200150318989:t[10]>42.50000000000001?Ge=.10182973257894812:Ge=.015934763950068445:Ge=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?Ge=-.041117068322885315:Ge=.1167767830037126:Ge=.13611206992387337:t[10]>41.50000000000001?Ge=-.07120286010564107:Ge=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?Ge=-.07702290997669524:t[198]>1e-35?Ge=.08776558554437136:Ge=-.008290740324975692:t[2]>32.50000000000001?Ge=.07198457624219955:Ge=.005463113714361629:Ge=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ge=.03295785445437507:Ge=.15140250150674536:Ge=-.035613213948910254:t[186]>1e-35?Ge=.06849425535860769:t[96]>1e-35?Ge=.06028225812727254:Ge=-.007582543288662308;let Pe;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pe=.08396556264106572:Pe=-.0562516995099192:Pe=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Pe=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Pe=.0052017514017035915:Pe=-.11194119432743639:Pe=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Pe=-.025692451287403446:Pe=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Pe=-.11892250746801664:t[10]>22.500000000000004?Pe=.07548493166973796:Pe=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Pe=.13750699058082427:t[18]>1e-35?Pe=.06535408879552801:Pe=-.054118179035040674:Pe=.1344282838979622:t[0]>3982.5000000000005?Pe=-.10409582202467015:t[19]>1e-35?Pe=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Pe=.012705935670766466:Pe=.14149359442527545:Pe=-.047977876173706004:t[20]>1e-35?Pe=.057945228080337946:t[0]>3642.5000000000005?Pe=-.008726535792122467:Pe=-.08424769891378858:t[34]>1e-35?Pe=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Pe=.01196849566739346:Pe=.1614642278429876:Pe=-.043022338150701625:t[3]>5.500000000000001?Pe=-.03907848255033881:Pe=.018280601026175593:Pe=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let ht;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?ht=-.01192072916082109:ht=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?ht=.06874032717466054:t[4]>40.50000000000001?ht=-.07752510020707537:t[1]>76.50000000000001?ht=-.09944032260703917:t[8]>1381.5000000000002?ht=-.054466635810800745:t[1]>32.50000000000001?ht=.05974084520839573:ht=-.0384718740755954:ht=-.11374190719134032:t[0]>2151.5000000000005?ht=-.13703645155803298:ht=.004833344758654556:t[297]>1e-35?t[212]>1e-35?ht=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?ht=.013539805885738608:ht=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?ht=.09941880179344399:ht=-.01608127391210995:ht=.08025226531247417:t[9]>67.50000000000001?ht=.13525448212444113:t[6]>61.50000000000001?ht=-.05511099182158894:t[94]>1e-35?ht=-.06821509831783572:t[128]>1e-35?ht=.11361314817714643:ht=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?ht=-.09954181329804547:t[197]>1e-35?ht=.10102833149755386:t[188]>1e-35?ht=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?ht=-.03781554214742005:ht=.09927933385592314:ht=-.020006000056720083:ht=-.10520473615957895:ht=-.12006990846253787:ht=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let cn;t[147]>1e-35?t[1]>53.50000000000001?cn=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?cn=-.030504020655417463:cn=.07102458639110094:cn=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?cn=.055304563442710876:t[1]>53.50000000000001?cn=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?cn=-.1568835288372895:cn=-.0279829124400056:cn=.04493843959601833:cn=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?cn=-.054133834303687026:t[9]>48.50000000000001?cn=.11263810289007213:t[9]>9.500000000000002?cn=-.02202034562838259:t[4]>45.50000000000001?cn=-.03410927569045158:cn=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?cn=-.029687297407295893:cn=.10673602850001934:t[4]>42.50000000000001?cn=.0036275562945108117:cn=-.0760789221330622:cn=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?cn=.08274426793676076:cn=-.07076234425516396:cn=.13890177606150175:cn=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?cn=-.09250637750836187:cn=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?cn=-.01897867921812603:cn=.04890781705365262:cn=-.11569892307597907:t[2]>106.50000000000001?cn=.09032697440623969:cn=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Hn;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Hn=.0011484728213539738:Hn=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Hn=-.09828874964938798:t[8]>1586.5000000000002?Hn=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Hn=.011938269926919522:Hn=.17541983715953954:t[19]>1e-35?Hn=.023002786011088672:Hn=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Hn=.06508934844183291:Hn=-.10168553534835639:Hn=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Hn=.021140806225203937:Hn=-.1167833342453639:t[2]>33.50000000000001?Hn=.13163585734056618:Hn=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Hn=.06314479201263888:Hn=-.09639088327091713:t[10]>29.500000000000004?Hn=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Hn=40577156464836036e-21:Hn=.12322387121810757:Hn=-.03697224045046014:t[1]>22.500000000000004?Hn=.016474835887320276:Hn=.16919298733903063:Hn=.07633203630214054:Hn=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hn=.14150493354700563:Hn=-.01831155354975749:t[1]>28.500000000000004?Hn=-.07952557178685365:t[10]>28.500000000000004?Hn=.0665695554984927:Hn=-.053640139319277094:Hn=.0004754840665898665;let Yn;t[76]>1e-35?Yn=-.06814884255939921:t[179]>1e-35?Yn=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Yn=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Yn=.004193658608848433:Yn=-.1066968975983452:t[8]>302.50000000000006?Yn=.05476730110440451:Yn=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Yn=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Yn=.013555772109446666:Yn=-.09856116699770784:Yn=.0284329611813383:t[2]>52.50000000000001?Yn=.04008708444763762:t[9]>29.500000000000004?Yn=-.1289599546008197:Yn=-.018566534248335896:t[8]>747.5000000000001?Yn=.02236484980076122:Yn=.1148871655157582:t[8]>3084.0000000000005?Yn=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Yn=.03164751204281298:Yn=.11752140436184891:t[9]>42.50000000000001?Yn=-.07180559595410106:t[22]>1e-35?Yn=.09325040416256854:Yn=-.016041122807939914:Yn=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Yn=-.010718250133458515:Yn=.09818827994853763:Yn=.010180038981174032:Yn=-.039472162599295535:t[9]>170.50000000000003?Yn=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Yn=-.08674788057474031:Yn=.02077653508548371:Yn=-.0003536561382007414;let pr;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?pr=.018337297491457794:pr=-.05926206443180149:pr=.024026520855881126:t[288]>1e-35?t[184]>1e-35?pr=.10747078482128616:t[126]>1e-35?pr=-.10550625192391357:t[7]>71.50000000000001?pr=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?pr=.1317396472229434:pr=-.025035791351328947:pr=-.0728334305864372:t[8]>963.5000000000001?pr=.023642201723096064:pr=.183010326734258:t[128]>1e-35?pr=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?pr=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?pr=-.1088876900335281:pr=.02758317023002635:pr=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?pr=-.01928020117446408:pr=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?pr=.07893723375925096:pr=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?pr=-.10301657587280551:pr=.005787463140224318:pr=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?pr=-.019296977889522397:pr=-.07274529751752634:t[1]>30.500000000000004?pr=-.050368901143148286:pr=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?pr=.0015332402792773946:pr=.09930153676749967:pr=-.06370844564357069:pr=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let He;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?He=-.03042091758483443:t[10]>14.500000000000002?He=.09816619204768777:He=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?He=-.02381165060401718:He=-.10950361804974783:He=.03538211665111128:t[212]>1e-35?t[19]>1e-35?He=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?He=-.06371052144380579:He=.0835500621252692:He=-.10408255929333915:t[1]>74.50000000000001?He=.13208968122712403:t[1]>64.50000000000001?He=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?He=.09922816902423433:He=.016366955328796718:He=.1592412560903584:t[1]>39.50000000000001?He=.05409467990258923:He=-.08260633210459611:He=-.06307205775247567:t[9]>36.50000000000001?He=.040253940015648144:He=.14202568969471283:He=-.028761848341594044:He=.08994073058773508:t[0]>807.5000000000001?He=-.043427848826323195:He=.04573516446846493:t[20]>1e-35?t[188]>1e-35?He=-.0758877731600639:t[23]>1e-35?He=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?He=.08124700978741987:He=.013296063087086852:t[7]>5.500000000000001?He=-.01640196088612987:He=-.12685498840146067:He=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let At;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?At=-.10504730480402079:t[5]>3341.5000000000005?At=.11087894671081754:At=-.0406668834674614:At=.03308382165616109:t[8]>104.50000000000001?At=-.10431436764549162:At=.0073928337244891455:t[4]>34.50000000000001?At=-.10571751512748416:At=-.006081128814142983:t[13]>1e-35?At=.1299673566095023:t[4]>60.50000000000001?At=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?At=.04857126072645073:At=-.03431365358104773:t[4]>16.500000000000004?At=.04101865986596709:At=.16480274980378218:t[10]>26.500000000000004?At=.03673978504199255:t[10]>9.500000000000002?At=-.10996402743800027:t[308]>1e-35?At=.0553693735082498:At=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?At=.010902983761213922:At=.1325118659895645:At=-.064362945508595:t[1]>66.50000000000001?At=.033416767779331176:At=-.054080316225040496:t[42]>1e-35?At=-.07762364337810815:t[10]>1089.5000000000002?At=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?At=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?At=.0220102041325908:At=-.06516708740003069:At=.012833498905748267:t[224]>1e-35?At=-.007038418272997865:At=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let yn;t[40]>1e-35?t[0]>1937.5000000000002?yn=-.06421671152073961:yn=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?yn=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?yn=-.03520420769287065:t[8]>1085.5000000000002?yn=-.019817352506127633:yn=.11444439424520964:yn=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?yn=-.010490117519863269:yn=.08104430117757461:t[121]>1e-35?t[243]>1e-35?yn=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?yn=.06619344145920268:t[0]>4091.5000000000005?yn=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?yn=.10016091391222309:yn=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?yn=-.019511460451434884:yn=-.11643672465055221:t[2]>18.500000000000004?yn=.07848228087333317:t[8]>55.50000000000001?yn=.032583027899956235:yn=-.11209832692153521:t[11]>1e-35?yn=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?yn=-.09996887746328006:t[9]>2.5000000000000004?yn=.02157682011863397:yn=-.05247727848991843:yn=.07409150201483244:t[1]>38.50000000000001?yn=-.11378466075449625:t[224]>1e-35?yn=-.10741749127732923:t[1]>26.500000000000004?yn=.07343136534146562:yn=-.07013573628594773:t[25]>1e-35?yn=-.04626669734164317:yn=.05518333197956482:yn=.00032434010867555516;let vn;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?vn=.026313251010808853:vn=-.08997339150292381:vn=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?vn=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?vn=.0905155504503746:t[8]>1049.5000000000002?vn=-.062312558183394054:t[8]>719.5000000000001?vn=.09583836191410239:t[0]>3719.5000000000005?vn=-.0778097309430818:vn=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?vn=-.12920865648544927:t[0]>2699.5000000000005?vn=-.07086587879041864:vn=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?vn=-.11377786322600797:vn=-.009486325820117998:t[1]>55.50000000000001?vn=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?vn=-.07938291201004219:t[2]>36.50000000000001?vn=.01520046732530246:vn=.13649854049662832:vn=-.07145015938528873:t[8]>407.50000000000006?vn=-.00350257360822279:vn=.11332047082193297:vn=-.10060624458629897:vn=.05429496612497562:t[8]>1446.5000000000002?vn=.006073419197482838:vn=-.08718676350883998:vn=-.11532497988252638:vn=.10766270463068293:t[34]>1e-35?vn=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?vn=-.0004109812623829506:vn=.021601073497455662:vn=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let nn;t[76]>1e-35?nn=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?nn=.013633653464240465:nn=-.10164319411983509:nn=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?nn=.00632864847804078:nn=-.08393000368134668:nn=.07870508617440916:t[284]>1e-35?nn=.1092302727710421:nn=-.0025505047582483234:t[248]>1e-35?nn=.07101822393621864:t[274]>1e-35?nn=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?nn=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?nn=.025081789181021243:nn=-.014813325803582618:t[9]>33.50000000000001?nn=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?nn=.11926990418060353:nn=.01852125513565268:nn=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?nn=-.1178464984373743:t[283]>1e-35?nn=.043370859226927405:t[5]>4320.500000000001?nn=-.01103141226366587:t[8]>1104.5000000000002?nn=-.023053423988095886:nn=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?nn=.000579145585864887:nn=.03389152834202143:t[128]>1e-35?nn=-.14527722052568462:t[210]>1e-35?nn=-.08915971541902741:t[7]>9.500000000000002?nn=-.03307314577076116:t[18]>1e-35?nn=-.05521712302023565:nn=.009315605032770029:nn=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let wn;t[3]>7.500000000000001?t[157]>1e-35?wn=-.07514182877923786:wn=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?wn=.028692053800951845:wn=.14081686716133598:wn=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?wn=.0037139292567243084:wn=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?wn=.01202688580305612:wn=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?wn=.043935495082738626:wn=-.05639305759669704:t[247]>1e-35?wn=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?wn=.10331836202616368:wn=.0006926658459781341:t[96]>1e-35?wn=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?wn=-.0741403257305367:wn=.022900127535540854:t[7]>3.5000000000000004?wn=.038110741403836294:wn=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?wn=-.09552842289807008:t[1]>27.500000000000004?wn=.012505935885798007:wn=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?wn=-.1046104767723845:wn=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?wn=.023466328488582572:wn=.11730925774586994:wn=-.04771965631104874:wn=.17059689880751394:wn=-.08181850955999449:t[26]>1e-35?wn=-.12727482696678769:wn=-.014343123272734182;let Mn;t[147]>1e-35?t[1]>53.50000000000001?Mn=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Mn=-.02763546051134888:Mn=.06423344777499343:Mn=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Mn=.049825139823021586:t[7]>22.500000000000004?Mn=-.01131680751379858:t[0]>2579.5000000000005?Mn=-.10673674485369694:Mn=-.015387212937189957:Mn=.04347325151148724:t[179]>1e-35?Mn=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Mn=.0650355590939066:Mn=-.0473332870892226:Mn=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Mn=.11139543329789044:t[126]>1e-35?Mn=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Mn=.06370903833231022:t[10]>29.500000000000004?Mn=.03415223859607161:t[10]>3.5000000000000004?Mn=-.07415518117873297:Mn=-.0014119203473324082:Mn=.12617652343819508:t[9]>41.50000000000001?Mn=-.10311145857176976:t[8]>2757.5000000000005?Mn=-.08106484219011428:t[7]>71.50000000000001?Mn=-.09783384432091176:t[1]>88.50000000000001?Mn=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Mn=-.008884084501608536:Mn=.061339437777743616:Mn=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Mn=.01526664064166223:Mn=.13534828515415498:Mn=-.06985484465894776:Mn=.0005758961943178744;let Kn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Kn=-.029152732370514342:Kn=.07173628916139178:t[1]>36.50000000000001?Kn=-.08859111297255318:Kn=.0018030071815630785:Kn=.13652461563759322:Kn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Kn=-.07145140450454163:t[21]>1e-35?Kn=-.07422841663493233:Kn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Kn=.11864240653986852:t[3]>33.50000000000001?Kn=-.08821209591953476:Kn=.05706392280054726:Kn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Kn=.01953613016837112:Kn=-.059781039130025006:t[148]>1e-35?Kn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Kn=.07207826841738371:t[202]>1e-35?Kn=.08163917539410503:Kn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Kn=-.06858280496900336:Kn=-.1781828899516648:Kn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Kn=.018232649414147116:Kn=-.04419781124222661:Kn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Kn=.11452368095776105:Kn=-.036496437259924026:Kn=-.040445338739465486:Kn=.0816572651001145:Kn=-.08968914517368663:Kn=.0002826343082585516;let Ur;t[189]>1e-35?t[0]>5269.500000000001?Ur=-.08839493050459957:t[10]>85.50000000000001?Ur=.10046908365702462:t[8]>2592.5000000000005?Ur=-.09632233975926387:t[8]>2000.5000000000002?Ur=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Ur=.035504970430426296:t[1]>31.500000000000004?Ur=-.1133764813142531:Ur=-.01138280942244812:t[8]>1125.5000000000002?Ur=.09800530246229806:Ur=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Ur=.07316772160107896:Ur=-.059095014819051765:Ur=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Ur=-.09150209066166894:t[8]>3084.0000000000005?Ur=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Ur=-.04449234460408263:Ur=.05568837973347338:Ur=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Ur=.12741077850267066:Ur=.007372371864985329:t[2]>39.50000000000001?Ur=.02295917234617787:Ur=.14966532083907075:t[1]>39.50000000000001?Ur=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Ur=-.02511861881285652:t[1]>27.500000000000004?Ur=.08683660011672288:Ur=.02956214835267301:t[9]>15.500000000000002?Ur=-.016538805462996232:Ur=.04352738094981517:Ur=-.05561856645643868:t[9]>170.50000000000003?Ur=-.07996752635874248:t[179]>1e-35?Ur=-.09065975936933919:Ur=-.00042817975060427177;let Yr;t[39]>1e-35?t[4]>25.500000000000004?Yr=.03443173196222934:Yr=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Yr=-.0013415395759330318:Yr=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Yr=.002297618040307216:Yr=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Yr=-.015297257305397608:Yr=.09651828834062742:Yr=-.06636003334371929:t[10]>11.500000000000002?Yr=.17631616138309397:t[0]>1639.5000000000002?Yr=3804386478092585e-20:Yr=-.09099296398683193:Yr=-.06874415876172972:t[0]>2151.5000000000005?Yr=-.1311264883406766:Yr=.00809052010141122:t[253]>1e-35?Yr=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Yr=.045038497754638605:Yr=-.07770167665661752:Yr=-.08596294280650517:Yr=.08538655727027213:Yr=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Yr=.054627956617973275:t[1]>61.50000000000001?Yr=-.11994465088415499:t[4]>8.500000000000002?Yr=.06676200239406452:Yr=-.027503148069376867:t[8]>676.5000000000001?Yr=-.10363964928357075:t[4]>8.500000000000002?Yr=-.07589816227175682:Yr=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Yr=.009093153189012338:Yr=-.06119765876605404:Yr=.0004668642103528348;let Fr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Fr=-.10100794502567233:Fr=.08000205636470442:Fr=-.11945419826856896:t[113]>1e-35?Fr=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Fr=.1224302423880318:Fr=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Fr=.0019277012166729114:t[1]>28.500000000000004?Fr=-.054445821715687494:Fr=.045645722976713245:t[30]>1e-35?Fr=.13402660155331655:Fr=.008921176001777645:Fr=-.058547426505451076:Fr=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Fr=-.13526418192218206:Fr=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Fr=.0007263224246135398:Fr=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Fr=-.11575657261278308:Fr=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Fr=-.01995960178292952:Fr=.11216586049153021:Fr=-.10050961087149474:Fr=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Fr=.10303451081526649:Fr=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Fr=-.043799548968209395:Fr=-.12451444314954115:t[4]>12.500000000000002?Fr=-.03838117361958468:Fr=.06504990789767144:t[57]>1e-35?Fr=.06890006938293915:Fr=.0003914274695562949;let jr;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?jr=.004271749009686975:jr=-.10523878297127605:jr=.04633982158107851:jr=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?jr=-.08655730561951676:t[8]>919.5000000000001?jr=-.0676453705610183:t[7]>18.500000000000004?jr=-.027787974193650575:jr=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?jr=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?jr=-.03473877164537313:t[8]>719.5000000000001?jr=.10471053866934404:jr=.008236107678382981:t[4]>57.50000000000001?jr=.09412219478825269:t[10]>66.50000000000001?jr=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?jr=-.040681323751002293:jr=.06374650297561021:jr=.12884615227401788:t[10]>5.500000000000001?jr=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?jr=-.05474068967150784:jr=.03744700650806603:jr=-.07846396348680855:t[1]>42.50000000000001?jr=.018972315810821302:jr=.10953621007604744:t[5]>4439.500000000001?jr=.010999776705494586:t[1]>40.50000000000001?jr=-.12394200059775967:t[10]>2.5000000000000004?jr=.013528093962849453:jr=-.09222088417048682:jr=-.12662967149701485:jr=.09327296405849603:t[3]>99.50000000000001?jr=-.013581954439986752:jr=.0005526498251862075;let nr;t[187]>1e-35?t[243]>1e-35?nr=-.08392792551692502:t[10]>68.50000000000001?nr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?nr=-.0825306209711224:nr=.049559996084532945:nr=-.1064938580886302:nr=.03353240732240275:nr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?nr=.16966001471529374:t[1]>57.50000000000001?nr=-.005772777673676247:nr=.09383677041525058:t[8]>747.5000000000001?nr=.054068175469351235:nr=-.049968216310277036:t[8]>753.5000000000001?nr=-.0679383555784074:t[4]>8.500000000000002?nr=-.059757341189735386:nr=.05701083682780414:nr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?nr=.05820296128730006:nr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?nr=.15340611616954566:nr=.04385036188666874:t[0]>4449.500000000001?nr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?nr=.004840354641006495:nr=.09967827580276283:nr=.11605363537391578:t[9]>19.500000000000004?nr=-.0735831692725717:nr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?nr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?nr=-.02442182361342386:nr=.10334853004243093:nr=-.030431948680167104:nr=-956078595250818e-19;let Vr;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Vr=-.040232505718244854:t[0]>3030.5000000000005?Vr=.0634109586813073:Vr=-.04043617034245621:Vr=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Vr=-.007859096946435131:Vr=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Vr=.05515771679628051:Vr=-.04214471312668263:Vr=-.09589322222261765:t[193]>1e-35?Vr=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Vr=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Vr=-.08152604001147906:t[11]>1e-35?Vr=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Vr=.13100930780107503:t[10]>25.500000000000004?Vr=.05921074710011526:Vr=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Vr=.0009447118243153454:Vr=-.09820565036865991:Vr=.057146909749745546:t[0]>2115.5000000000005?Vr=-.12331216726611678:Vr=.007281983677694285:t[2]>56.50000000000001?Vr=.012310154675612615:Vr=-.08873665774670461:t[6]>25.500000000000004?Vr=.134708740821879:t[9]>5.500000000000001?Vr=-.0805901581148979:t[224]>1e-35?Vr=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Vr=.10842593386554122:t[2]>13.500000000000002?Vr=.06466798320378395:Vr=-.08578130788886655:Vr=-.03590892078300114:Vr=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let q;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?q=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?q=.020637047900190317:q=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?q=-.04632587527094407:q=.08603684785510396:q=-.05101401015448496:q=.025466432054358498:q=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?q=.020385355430046367:q=.12032592051335252:q=-.012387370292173013:t[2]>23.500000000000004?q=-.12568545484492677:q=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?q=.043528764484784536:q=.14352071657196003:q=-.009332833816977268:q=.11186782227735846:q=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?q=-.05649104643152564:q=.03884200719305747:t[42]>1e-35?q=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?q=-.04103416502526736:q=.04881823954656287:t[4]>15.500000000000002?q=.009342724662897898:t[0]>3969.5000000000005?q=-.025637309961309498:q=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?q=-.08185697075265091:t[0]>2215.5000000000005?q=.030063975892297354:t[0]>807.5000000000001?q=-.03924325550733229:q=.0415330999189793:q=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let ee;t[7]>17.500000000000004?t[115]>1e-35?ee=.08741852531696623:t[167]>1e-35?ee=.10078975495600809:ee=-.0018324767784017562:t[290]>1e-35?ee=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?ee=.1379733311640402:ee=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?ee=-.09360083033774169:ee=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?ee=-.015599362579530679:t[0]>4593.500000000001?ee=-.12029549262691491:ee=-.018917032256501397:ee=.04632831686576592:ee=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?ee=-.05894883236412263:ee=.05213944998315824:ee=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?ee=.07577412405680808:ee=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?ee=-.0277076900736147:t[1]>65.50000000000001?ee=-.023587471585763506:ee=.10184896592433082:ee=-.057699270527916825:ee=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?ee=.06566902102799584:t[10]>25.500000000000004?ee=-.07033633753181047:ee=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?ee=-.08108035861059537:ee=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?ee=-.12431182772561139:ee=.01886235886984271:ee=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let Re;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Re=.029186512383291244:t[7]>1.5000000000000002?Re=-.14984127276725573:t[1]>40.50000000000001?Re=.032757060730648144:Re=-.07675575422749602:t[6]>8.500000000000002?Re=.10599766037117893:Re=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Re=-.051394622947855385:Re=.03237141302699347:Re=.12526173027943244:Re=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Re=-.07383912482657777:t[0]>5147.500000000001?Re=.07008813937042091:t[10]>38.50000000000001?Re=-.06779203808365307:Re=-.013782769999524498:Re=.0880038869117715:Re=-.12846294176070952:t[281]>1e-35?Re=-.06810806903850834:t[10]>227.50000000000003?Re=-.08937977001661111:t[10]>130.50000000000003?Re=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Re=.011036530162093841:Re=-.11500797478569702:Re=.03702229366129399:Re=.07242026683784307:t[189]>1e-35?Re=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Re=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Re=-.02608892716555304:Re=.09609599320761308:t[9]>105.50000000000001?Re=-.06848127135991534:Re=.0023675721254089715:t[86]>1e-35?Re=-.11049635625500497:Re=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let Rn;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Rn=.057446442918106:Rn=-.04404018270156349:Rn=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Rn=-.05930486238817954:t[1]>29.500000000000004?Rn=.06955866121256543:t[8]>597.5000000000001?Rn=-.06538593556505168:Rn=.06212512595497445:Rn=.00021102929959182257:t[9]>90.50000000000001?Rn=.0958061289119631:t[102]>1e-35?Rn=.07172059675638813:t[1]>47.50000000000001?Rn=-.03879798603977766:t[297]>1e-35?Rn=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Rn=.003805910996312012:Rn=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Rn=.11252376801858695:t[288]>1e-35?Rn=-.10293901912180432:Rn=.014669268837893872:t[1]>42.50000000000001?Rn=-.05988274123836837:t[145]>1e-35?Rn=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Rn=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Rn=-.03366718308159971:Rn=.11936550608549797:t[1]>31.500000000000004?Rn=-.07454716789539667:Rn=.027859650621164217:t[10]>10.500000000000002?Rn=-.11806374092321247:Rn=-.03506042229223101:Rn=-.0007080765837654515:t[10]>6.500000000000001?Rn=-.028077713664996503:t[2]>7.500000000000001?Rn=.15803724124216814:Rn=.0351381284833169:Rn=-.07877953381054767;let mn;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?mn=.14144941521975005:mn=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?mn=.10514088112381886:t[7]>18.500000000000004?mn=-.10370643555956745:mn=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?mn=-.0508129468802936:t[224]>1e-35?mn=-.037816066368733595:t[10]>43.50000000000001?mn=.07793408602607932:mn=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?mn=.036972453794202324:mn=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?mn=.09475302525132188:mn=-.03580104945898193:mn=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?mn=-.1282448778804823:mn=-.014395808269207212:mn=-.008940927190750592:mn=-.1459118815453748:t[0]>4897.500000000001?mn=-.09733068457286576:t[1]>57.50000000000001?mn=.06575271409540207:mn=-.019556422817450115:mn=-.10623959222984136:t[18]>1e-35?mn=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?mn=.008125645893104896:mn=-.11084368630465868:mn=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?mn=-.05854904579626861:t[4]>5.500000000000001?mn=.02985784951394175:mn=-.03247600140149334:mn=-.11152899295304973:mn=-.00035424577714215764;let ur;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?ur=-.06563670567578264:ur=.067656954313663:ur=-.10388217548685377:t[8]>2302.5000000000005?ur=.07190621943790435:t[4]>67.50000000000001?ur=.060020507643618604:t[4]>38.50000000000001?ur=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?ur=-.06568134366461277:t[8]>1075.5000000000002?ur=-.004768057709758692:ur=.11785959165999467:ur=-.05080221682879267:ur=.14814206127494542:ur=-.07241946332311736:t[253]>1e-35?ur=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?ur=-.02471195342450034:ur=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?ur=-.10741850739482771:ur=.010051635824944:ur=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?ur=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?ur=-.08992396138178163:ur=.010944365997007212:ur=.06221307021813793:ur=.1286024087559141:t[127]>1e-35?ur=.06568148624531012:t[10]>40.50000000000001?ur=-.07567979134643352:t[5]>5647.500000000001?ur=.07594672895572069:ur=-.018158016446439187:t[6]>55.50000000000001?ur=.009293422430111872:t[4]>45.50000000000001?ur=-.017749818406964022:t[2]>46.50000000000001?ur=.01714136511113982:ur=-724762291423549e-19;let mr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?mr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?mr=.07084726276890757:mr=-.11232323677722932:mr=.04812773089510436:mr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?mr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?mr=.0879462816013881:mr=-.002966662093626573:t[306]>1e-35?mr=-.04588085188342676:mr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?mr=-.006600332774461143:mr=.1272481351557754:mr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?mr=.011884312066620044:mr=.11678751052403374:t[4]>8.500000000000002?mr=.03627129613273813:mr=-.12132783497902287:mr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?mr=-.06830131718398992:t[0]>5147.500000000001?mr=.062360406249609306:t[4]>4.500000000000001?mr=-.013162203864592055:mr=-.07153029184927609:mr=.07628618062271557:mr=-.12085065687320373:t[190]>1e-35?mr=-.045816889524231186:t[137]>1e-35?mr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?mr=.025895337822752502:mr=-.06503949350616421:t[10]>227.50000000000003?mr=-.09989456525790491:t[10]>130.50000000000003?mr=.08616651057030683:mr=.0001234981796706021;let bn;t[8]>1014.5000000000001?t[9]>137.50000000000003?bn=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?bn=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?bn=-.141732381961068:bn=-.0317152307496497:bn=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?bn=.12191801556691254:bn=-.0003444689085397977:bn=.005739668504631604:t[146]>1e-35?t[308]>1e-35?bn=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?bn=-.05676033995381961:bn=.10933961076803381:t[4]>26.500000000000004?bn=-.11667582544549814:t[8]>1765.5000000000002?bn=.032174455312047705:bn=-.0755016390126608:t[293]>1e-35?bn=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?bn=.026571311956824436:t[15]>1e-35?bn=.06175459479851121:bn=-.018778084411148754:t[9]>40.50000000000001?bn=-.09420232889965811:bn=-.004578248021263184:t[2]>1.5000000000000002?bn=.005453714644971445:bn=-.03907138175699279:bn=-.055296364182154736:t[23]>1e-35?bn=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?bn=-.09358146510580179:bn=.060524657996178094:bn=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?bn=-.12698331085931538:bn=.006059605604079918:t[2]>196.50000000000003?bn=-.09451315810804783:bn=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let Mr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Mr=-.06904501553217077:Mr=.05696231672035904:Mr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Mr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Mr=-.011419256378538392:t[0]>3830.5000000000005?Mr=.140315841503076:Mr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Mr=-.04027822909411164:Mr=.03176085103667189:Mr=.06779515865838849:t[4]>15.500000000000002?Mr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Mr=.06124039747298539:Mr=-.04312732764434027:Mr=.09161522761808062:Mr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Mr=.11211681010488772:t[13]>1e-35?Mr=.06725735814960367:Mr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Mr=.11743605068905603:Mr=-.011309033539148687:Mr=-.07896094707523052:Mr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Mr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Mr=.02836295848998302:Mr=.12210680366745175:Mr=-.058302317470509096:t[5]>4144.500000000001?Mr=.06123341960495106:Mr=-.03840046906926525:Mr=-.05221474543453495:Mr=.03988215485860711:Mr=-.00033074684693083496;let js=Sht(e+n+r+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+B+N+U+re+me+ae+H+G+ue+ie+$+O+Y+K+le+te+pe+he+Qe+ke+Ze+Fe+ft+It+yt+vt+ce+Oe+ye+tt+Z+ne+Ge+Pe+be+ze+it+ht+Ot+cn+Lt+Hn+Yn+pr+Ae+He+ut+At+Xt+Gt+yn+vn+jt+nn+Jt+wn+Mn+Kn+Ur+Yr+Fr+jr+nr+Vr+_e+q+ge+ve+ee+M+Re+$e+qt+Rn+mn+ur+mr+bn+Ht+Mr);return[1-js,js]}s(U4e,"multilineModelPredict");function Sht(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(Sht,"sigmoid");var Rht={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},q4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function W4e(t,e,n,r=!0){let i=t.split(`
`);if(r&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Rht[n]??[]).some(l=>o.includes(l))}s(W4e,"hasComment");var CU=class{static{s(this,"PromptFeatures")}constructor(e,n){let[r,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=n,this.length=e.length,this.firstLineLength=r.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=W4e(e,-2,n),this.rstripSecondToLastLineHasComment=W4e(e.trimEnd(),-2,n),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let n=e.split(`
`),r=n.length,i=n[0],o=n[r-1];return o==""&&r>1&&(o=n[r-2]),[i,o]}},Bie=class{static{s(this,"MultilineModelFeatures")}constructor(e,n,r){this.language=r,this.prefixFeatures=new CU(e,r),this.suffixFeatures=new CU(n,r)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let n=new Array(Object.keys(q4e).length+1).fill(0);n[q4e[this.language]??0]=1;let r=new Array(Object.keys(V1).length+1).fill(0);r[V1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(V1).length+1).fill(0);i[V1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(V1).length+1).fill(0);o[V1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(V1).length+1).fill(0);return a[V1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(n,r,i,o,a)}};function kht(t,e){return new Bie(t.prefix,t.suffix,e)}s(kht,"constructMultilineFeatures");function G4e(t,e){let n=kht(t,e).constructFeatures();return U4e(n)[1]}s(G4e,"requestMultilineScore");f();f();f();f();async function*$1(t,e){for await(let n of t)yield e(n)}s($1,"asyncIterableMap");async function*H4e(t,e){for await(let n of t)await e(n)&&(yield n)}s(H4e,"asyncIterableFilter");async function*hD(t,e){for await(let n of t){let r=await e(n);r!==void 0&&(yield r)}}s(hD,"asyncIterableMapFilter");async function*j4e(...t){for(let e of t)yield*e}s(j4e,"asyncIterableConcat");f();async function gD(t,e,n,r){let i=or.createAndMarkAsIssued({messageId:e,conversationId:n});return await t.get(Rt).updateExPValuesAndAssignments(r,i)}s(gD,"createTelemetryWithExpWithId");function hl(t,{turn:e,conversation:n}={},r){return gD(t,e?.telemetryId??"",n?.telemetryId??"",r)}s(hl,"createTelemetryWithExpWithTurn");function AD(t,e,n,r,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:r,messageCharLen:n};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(Bht(l))),a=a.extendedBy(u,d),a}s(AD,"extendUserMessageTelemetryData");function Bht(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(n=>n.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(Bht,"mapSkillResolutionsForTelemetry");function V4e(t,e,n,r,i,o,a){return r!=null&&(a=a.extendedBy({offTopic:r.toString()})),xU(t,o,e,n,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(V4e,"createUserMessageTelemetryData");function $4e(t,e,n,r,i,o,a,l){let c=Pht(r);return xU(t,a,n,r,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s($4e,"createModelMessageTelemetryData");function z4e(t,e,n,r,i,o,a){xU(t,o,n,r,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:n},{messageCharLen:r.length},a)}s(z4e,"createOffTopicMessageTelemetryData");function Y4e(t,e,n,r,i,o,a,l,c){let u=xU(t,l,n,r,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:n,suggestionId:a},{promptTokenLen:i,messageCharLen:r.length},c);return Dht(t,n,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(Y4e,"createSuggestionMessageTelemetryData");var K4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function J4e(t,e,n){let r=await hl(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Pu(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},n,"index.codesearch",r)}s(J4e,"telemetryIndexCodesearch");function xU(t,e,n,r,i,o,a){let l=a??or.createAndMarkAsIssued(),c={messageText:r,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=an();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=yc(n);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,d,1),u}s(xU,"telemetryMessage");function X4e(t,e,n,r){Pu(t,r,{uiKind:e},{},"conversation.suggestionShown",n)}s(X4e,"createSuggestionShownTelemetryData");function Dht(t,e,n,r,i,o,a,l){Pu(t,l,{suggestion:n,messageId:r,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(Dht,"createSuggestionSelectedTelemetryData");function Pu(t,e,n,r,i,o){let a=o??or.createAndMarkAsIssued();e&&(n.languageId=e.detectedLanguageId,r.documentLength=e.getText().length,r.documentLineCount=e.lineCount);let l=a.extendedBy(n,r);return Bt(t,i,l),l}s(Pu,"telemetryUserAction");function w5(t,e,n){let r=n.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",r,1)}s(w5,"logEngineMessages");function yc(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(yc,"telemetryPrefixForUiKind");function Pht(t){let e=t.split(`
`),n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(r.length>0&&o==="```"?n.push(r.pop()):r.length===0&&r.push(o.substring(3)))}return n}s(Pht,"getCodeBlocks");function Z4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(Z4e,"uiKindToIntent");function gv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(gv,"conversationSourceToUiKind");function eRe(t,e,n,r,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:n.toString(),uiKind:"agentPanel"},a={totalTimeMs:r};nRe(t,"round",i.extendedBy(o,a))}s(eRe,"createAgentRoundTelemetryData");function tRe(t,e,n,r,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:n.name,toolType:n.type,toolProviderId:n.toolProvider.id,toolCallId:r,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};nRe(t,"toolCall",l.extendedBy(c,u))}s(tRe,"createToolInvocationTelemetryData");function nRe(t,e,n){return Bt(t,`${yc("agentPanel")}.${e}`,n)}s(nRe,"logAgenticEvent");f();f();function m2(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(m2,"toString");var _0=new Tt("streamChoices"),Die=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new Lie;this.tool_calls=[];this.function_call=new Nie;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let n of e.delta.tool_calls){let r=n.index;this.tool_calls[r]||(this.tool_calls[r]=new Pie),this.tool_calls[r].update(n)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function Nht(t){let e=t.split(`
`),n=e.pop();return[e.filter(r=>r!=""),n]}s(Nht,"splitChunk");var Pie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},Nie=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},Lie=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([n,r])=>{r.forEach(i=>this.update_namespace(n,i))})}update_namespace(e,n){this.current[e]||(this.current[e]=[]);let r=this.current[e],i=r.findIndex(o=>o.id===n.id);i>=0?r[i]=n:r.push(n)}for(e){return this.current[e]??[]}},Av=class t{constructor(e,n,r,i,o,a,l){this.ctx=e;this.expectedNumChoices=n;this.response=r;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=h2(this.response);this.stats=new Fie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,n,r,i,o,a){let l=r.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,n,r,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),_0.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),_0.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let n="",r=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;_0.debug(this.ctx,"chunk",a.toString());let[l,c]=Nht(n+a.toString());n=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(r,i,o,e);return}r=null;let p;try{p=JSON.parse(d)}catch{_0.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Lht(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?_0.error(this.ctx,"Error in response:",p.error.message):_0.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){n="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];_0.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new Die);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>yD(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){r=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Zx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(n.length>0)try{let a=JSON.parse(n);a.error!==void 0&&_0.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{_0.error(this.ctx,`Error parsing extraData: ${n}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,n,r,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>yD(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:n??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:n,usage:r},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(_0.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(n=>n==null)}};function vU(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(_0.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),_0.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),_0.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=yD(e.solution);return bU(t,r,o,e.index,e.requestId,i,n)}s(vU,"prepareSolutionForReturn");function yD(t){let e=t.text.join(""),n=Fht(t),r=Mht(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:n,function_call:r,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(yD,"convertToAPIJsonData");function Lht(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Lht,"isCopilotConfirmation");function rRe(t,e,n){if(!t)return{};try{return JSON.parse(t)}catch(r){throw new Error(`Failed to parse JSON for ${e} '${n}': ${m2(r)}. Input: '${t}'`)}}s(rRe,"parseCallArguments");function Fht(t){let e=[];for(let n of t.tool_calls)if(n.name){let r=n.arguments.join("").trim(),i=rRe(r,"tool call",n.name);e.push({type:"function",function:{name:n.name,arguments:i},approxNumTokens:n.arguments.length+1})}return e}s(Fht,"extractToolCalls");function Mht(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),n=rRe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:n}}}s(Mht,"extractFunctionCall");var Fie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let n=this.choices.get(e);return n||(n=new Mie,this.choices.set(e,n)),n}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,n])=>`${e}: ${n.yieldedTokens} -> ${n.seenTokens}`).join(", ")}},Mie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function EU(t,e){return t!==null&&typeof t=="object"&&e in t}s(EU,"hasKey");function Nu(t,e){return EU(t,e)?t[e]:void 0}s(Nu,"getKey");var oRe=qe(ri());var Zs=new Tt("fetchCompletions");function h2(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(h2,"getRequestId");function _5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(_5,"getProcessingTime");function sRe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(sRe,"uiKindToIntent");var vd=class{static{s(this,"OpenAIFetcher")}};function Qht(t,e,n,r){return $x(t,e,"proxy","v1/engines",n,r)}s(Qht,"getProxyEngineUrl");function IU(t,e,n,r){for(let[i,o]of Object.entries(t)){if(n.includes(i))continue;let a=o;if(i==="extra"&&r){let l={...a};for(let c of r)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(IU,"sanitizeRequestOptionTelemetry");async function iRe(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(Ji),m=Qht(t,a,n,r),h=c.extendedBy({endpoint:r,engineName:n,uiKind:l},OS(e));IU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=Qs(),y=sRe(l);return aI(t,m,a.token,y,i,o,u,d).then(v=>{let b=h2(v);h.extendWithRequestId(b);let E=Qs()-g;return h.measurements.totalTimeMs=E,Zs.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Zs.debug(t,"request.response properties",h.properties),Zs.debug(t,"request.response measurements",h.measurements),Zs.debug(t,"prompt:",e),Bt(t,"request.response",h),v}).catch(v=>{if(Mc(v))throw Bt(t,"request.cancel",h),v;p.setWarning(Nu(v,"message")??"");let b=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",b),h.properties.message=String(Nu(v,"name")??""),h.properties.code=String(Nu(v,"code")??""),h.properties.errno=String(Nu(v,"errno")??""),h.properties.type=String(Nu(v,"type")??"");let E=Qs()-g;throw h.measurements.totalTimeMs=E,Zs.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Zs.debug(t,"request.error properties",h.properties),Zs.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),v}).finally(()=>{BIe(t,e,h)})}s(iRe,"fetchWithInstrumentation");async function Oht(t,e,n,r,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:n,uiKind:l});IU(o,d,["messages"]),d.properties.headerRequestId=i,Bt(t,"request.sent",d);let p=Qs(),m=sRe(l),h={...Yx(t)};try{let g=await aI(t,r,a.token,m,i,o,u,h),y=h2(g);d.extendWithRequestId(y);let v=Qs()-p;return d.measurements.totalTimeMs=v,Zs.info(t,`Request ${i} at <${r}> finished with ${g.status} status after ${v}ms`),Zs.debug(t,"request.response properties",d.properties),Zs.debug(t,"request.response measurements",d.measurements),Zs.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",d),g}catch(g){if(Mc(g))throw Bt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",y),d.properties.message=String(Nu(g,"name")??""),d.properties.code=String(Nu(g,"code")??""),d.properties.errno=String(Nu(g,"errno")??""),d.properties.type=String(Nu(g,"type")??"");let v=Qs()-p;throw d.measurements.totalTimeMs=v,Zs.info(t,`Request ${i} at <${r}> rejected with ${String(g)} after ${v}ms`),Zs.debug(t,"request.error properties",d.properties),Zs.debug(t,"request.error measurements",d.measurements),Bt(t,"request.error",d),g}finally{w5(t,e,d)}}s(Oht,"fetchChatWithInstrumentation");function Qie(t){return H4e(t,e=>e.completionText.trim().length>0)}s(Qie,"postProcessChoices");var Uht="github.copilot.completions.quotaExceeded",CD=class extends vd{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="completions",c=await e.get(Gn).getToken(),u=await this.fetchWithParameters(e,l,n,c,r,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Zs.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,n);return this.handleError(e,a,h,u,c)}let p=Av.create(e,n.count,u,r,[],o).processSSE(i),m=$1(p,h=>vU(e,h,r));return{type:"success",choices:Qie(m),getProcessingTime:s(()=>_5(u),"getProcessingTime")}}async fetchAndStreamChat(e,n,r,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:n,model:l.id,stream:!0,...c},m=r.extendedBy({endpoint:d,model:l.name}),h=e.get(Ji),g=await e.get(Gn).getToken(),y=await Oht(e,n,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Zs.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=or.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=Av.create(e,1,y,m,[],oRe.CancellationToken.None).processSSE(),E=$1(b,_=>vU(e,_,r));return{type:"success",choices:Qie(E),getProcessingTime:s(()=>_5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="speculation",c=await e.get(Gn).getToken(),u={prompt:{prefix:n.prompt,suffix:"",isFimEnabled:!1},speculation:n.speculation,ourRequestId:an(),engineModelId:n.engineModelId,uiKind:n.uiKind,headers:n.headers,stops:n.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,r,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Zs.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=Av.create(e,1,d,r,[],o).processSSE(i),h=$1(m,g=>vU(e,g,r));return{type:"success",choices:Qie(h),getProcessingTime:s(()=>_5(d),"getProcessingTime")}}createTelemetryData(e,n,r){return or.createAndMarkAsIssued({endpoint:e,engineName:r.engineModelId,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchSpeculationWithParameters(e,n,r,i,o,a){let l={prompt:r.prompt.prefix,speculation:r.speculation,temperature:0,stream:!0,stop:r.stops??[]};return await _g(0),a?.isCancellationRequested?"not-sent":await iRe(e,r.prompt,r.engineModelId,n,r.ourRequestId,l,i,r.uiKind,o,a,r.headers)}async fetchWithParameters(e,n,r,i,o,a){let l=e.get(Rt).disableLogProb(o),c={prompt:r.prompt.prefix,suffix:r.prompt.suffix,max_tokens:wU(e),temperature:S5(e,r.count),top_p:TU(e),n:r.count,stop:aRe(e,r.languageId),stream:!0,extra:r.extra};(r.requestLogProbs||!l)&&(c.logprobs=2);let u=F1(r.repoInfo);return u!==void 0&&(c.nwo=u),r.postOptions&&Object.assign(c,r.postOptions),r.prompt.context&&(c.extra.context=r.prompt.context),await _g(0),a?.isCancellationRequested?"not-sent":await iRe(e,r.prompt,r.engineModelId,n,r.ourRequestId,c,i,r.uiKind,o,a,r.headers)}async handleError(e,n,r,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",n.setError("Completions limit reached",{command:Uht,title:"Learn More"});let c=Ps(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(n.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return n.setError(a),Zs.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Zs.error(e,l),n.setWarning(l),r.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Zs.warn(e,`Response status was ${i.status}:`,a),n.setWarning(`Last response was a ${i.status} error: ${a}`),r.properties.error=`Response status was ${i.status}: ${a}`):(n.setWarning(`Last response was a ${i.status} error`),r.properties.error=`Response status was ${i.status}`);return r.properties.status=String(i.status),Bt(e,"request.shownWarning",r),i.status===401||i.status===403?(e.get(Gn).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Zs.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Zs.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Zs.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function bU(t,e,n,r,i,o,a){return kIe(t,e,n,i,r),{completionText:e,meanLogProb:qht(t,n),meanAlternativeLogProb:Wht(t,n),choiceIndex:r,requestId:i,blockFinished:o,tokens:n.tokens,numTokens:n.tokens.length,telemetryData:a,copilotAnnotations:n.copilot_annotations,clientCompletionId:an(),finishReason:n.finish_reason}}s(bU,"convertToAPIChoice");function qht(t,e){if(e?.logprobs?.token_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)n+=e.logprobs.token_logprobs[o],r+=1;return r>0?n/r:void 0}catch(n){ar.exception(t,n,"Error calculating mean prob")}}s(qht,"calculateMeanLogProb");function Wht(t,e){if(e?.logprobs?.top_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],n+=Math.max(...Object.values(a)),r+=1}return r>0?n/r:void 0}catch(n){ar.exception(t,n,"Error calculating mean prob")}}s(Wht,"calculateMeanAlternativeLogProb");function S5(t,e){return nm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(S5,"getTemperatureForSamples");var Ght={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function aRe(t,e){return Ght[e??""]??[`


`,"\n```"]}s(aRe,"getStops");function TU(t){return 1}s(TU,"getTopP");function wU(t){return I8}s(wU,"getMaxSolutionTokens");var Oie=class t{constructor(e,n){this.index=e;this.documentPrefix=n;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let n=new t(this.index,this.documentPrefix);return n.startOffset=this.startOffset,n.text=this.text.substring(0,this.startOffset+e),n.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,n}},_U=class{constructor(e,n,r,i,o,a){this.ctx=e;this.prefix=n;this.languageId=r;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,n)=>{let r=n.index??0,i=this.getCompletion(r,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),n.finished&&await this.trimAll(n,i),o}return n.finished?await this.trimAll(n,i):await this.trimOnce(n,i)}}getCompletion(e,n){let r=this.completions.get(e);return r||(r=new Oie(e,this.prefix),this.completions.set(e,r)),r.updateText(n),r}async trimOnce(e,n){let r=await this.trim(n);return r===void 0?{yieldSolution:!1,continueStreaming:!0}:n.isFirstCompletion?(n.trimAt(r),{yieldSolution:!0,continueStreaming:!0,finishOffset:r}):(this.cacheCompletion(e,n,r),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,n){let r,i;do r=await this.trim(n),n.isFirstCompletion?(i=r,n.trimAt(r??n.effectiveText.length)):this.cacheCompletion(e,n,r);while(r!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new yU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,n,r){let i=n.trimAt(r??n.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=bU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,r!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,n,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,n,r){if(e.copilotAnnotations===void 0)return;let i=r.addedToPrefix.length,a=i+e.completionText.length>=n.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();f();var Jf=class{constructor(){this.cache=new Ln(100)}static{s(this,"SpeculativeRequestCache")}set(e,n){this.cache.set(e,n)}async request(e){let n=this.cache.get(e);n!==void 0&&(this.cache.delete(e),await n())}};var SU=new Tt("getCompletions");function RU(t,e,n){(ui(t,wt.EnableSpeculativeRequestsShown)??t.get(Rt).enableSpeculativeRequestsShown(n.telemetry))&&t.get(Jf).request(n.clientCompletionId),n.telemetry.markAsDisplayed(),n.telemetry.properties.reason=R5(n.resultType),Bt(t,`${e}.shown`,n.telemetry)}s(RU,"telemetryShown");function lRe(t,e,n){let r=e+".accepted";Bt(t,r,n)}s(lRe,"telemetryAccepted");function cRe(t,e,n){let r=e+".rejected";Bt(t,r,n)}s(cRe,"telemetryRejected");function Rg(t,e={}){return{...e,telemetryBlob:t}}s(Rg,"mkCanceledResultTelemetry");function Os(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Os,"mkBasicResultTelemetry");function uRe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let n=Qs()-e.telemetryBlob.issuedTime,r=R5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:r,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return SU.debug(t,`ghostText produced from ${r} in ${Math.round(n)}ms with foundOffset ${a}${l}`),hte(t,"ghostText.produced",o,{timeToProduceMs:n,foundOffset:a}),e.value}if(SU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}hte(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(uRe,"handleGhostTextResultTelemetry");function R5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(R5,"resultTypeToString");f();f();f();async function Hht(t){if(t.isCancellationRequested)return;let e=new Du,n=t.onCancellationRequested(()=>{e.resolve(),n.dispose()});await e.promise}s(Hht,"cancellationTokenToPromise");async function dRe(t,e){if(e){let n=Hht(e);await Promise.race([t,n])}else await t}s(dRe,"raceCancellation");function Uie(t){return Array.isArray(t)}s(Uie,"isArrayOfT");async function fRe(t,e){let n=new Map,r=[];for(let[i,o]of t.entries()){let a=(async()=>{let l=await jht(o,e);n.set(i,l)})();r.push(a)}return await Promise.allSettled(r.values()),n}s(fRe,"resolveAll");async function jht(t,e){let n;return t instanceof Promise?n=await Vht(t,e):n=await $ht(t,e),n}s(jht,"resolve");async function Vht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;r={status:"full",resolutionTime:0,value:Uie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await dRe(i,e),r.resolutionTime=performance.now()-n,r}s(Vht,"resolvePromise");async function $ht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;r.status!="partial"&&(r={status:"partial",resolutionTime:0,value:[]}),r.value.push(o)}e?.isCancellationRequested||(r.status!=="partial"?r={status:"full",resolutionTime:0,value:[]}:r.status="full")}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await dRe(i,e),r.resolutionTime=performance.now()-n,r}s($ht,"resolveIterable");f();var zht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Yht="ms-vscode.cpptools",Kht="CppCompletionContextProvider";function pRe(t,e,n,r){(e.includes(Kht)||e.length===1&&e[0]==="*")&&hRe(t,n,r)}s(pRe,"fillInCppVSActiveExperiments");function mRe(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(Yht))&&hRe(t,n,r)}s(mRe,"fillInCppVSCodeActiveExperiments");function hRe(t,e,n){try{let r=zht,i=t.get(Rt).cppContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){ar.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){ar.exception(t,r,"fillInCppActiveExperiments")}}s(hRe,"addActiveExperiments");f();function kU(t,e,n){try{let r=t.get(Rt).csharpContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return ar.debug(t,"Failed to get the active C# experiments for the Context Provider API",r),!1}return!0}s(kU,"fillInCSharpActiveExperiments");f();var yv="fallbackContextProvider",BU={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function gRe(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(yv))&&Jht(t,n,r)}s(gRe,"fillInMultiLanguageActiveExperiments");function Jht(t,e,n){try{let r=Xht(t,n);for(let[i,o]of Object.entries(r))e.set(i,o)}catch(r){ar.exception(t,r,"fillInMultiLanguageActiveExperiments")}}s(Jht,"addActiveExperiments");function Xht(t,e){let n=BU,r=t.get(Rt).multiLanguageContextProviderParams(e);if(r)try{n=JSON.parse(r)}catch(i){ar.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return n}s(Xht,"getMultiLanguageContextProviderParamsFromExp");function ARe(t){let e={...BU};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(ARe,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var Zht="typescript-ai-context-provider";function yRe(t,e,n,r){if(!(e.length===1&&e[0]==="*"||e.includes(Zht)))return!1;try{let i=t.get(Rt).tsContextProviderParams(r);if(i){let o=JSON.parse(i);for(let[a,l]of Object.entries(o))n.set(a,l)}}catch(i){return ar.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(yRe,"fillInTsActiveExperiments");f();var CRe=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),xRe=I.Intersect([I.Object({name:I.String(),value:I.String()}),CRe]),vRe=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),CRe]),egt=[xRe,vRe],tgt=I.Union(egt),ngt=new Map([["Trait",hs.Compile(xRe)],["CodeSnippet",hs.Compile(vRe)]]),rgt=s(t=>t,"ensureTypesAreEqual");rgt(!0);var igt=I.Object({contextItems:I.Array(tgt)}),ogt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),qie=I.Object({id:I.String()}),sgt=I.Intersect([qie,ogt]),agt=I.Intersect([qie,igt]),bRe=I.Object({providers:I.Array(sgt)}),ERe=I.Object({providers:I.Array(qie)}),Wie=I.Object({providers:I.Array(agt),updating:I.Optional(I.Array(I.String()))}),DU=I.Intersect([qIe,I.Object({contextItems:I.Optional(Wie)})]);function PU(t,e){return t.map(n=>{let r=n.data.filter(i=>i.type===e);return r.length>0?{...n,data:r}:void 0}).filter(n=>n!==void 0)}s(PU,"filterContextItemsByType");function IRe(t){let e=[],n=0;return t.forEach(r=>{let i=!1;for(let[o,a]of ngt.entries())if(a.Check(r)){e.push({...r,type:o}),i=!0;break}i||n++}),[e,n]}s(IRe,"filterSupportedContextItems");function lgt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(lgt,"validateContextItemId");function TRe(t,e){let n=new Set,r=[];for(let i of e){let o=i.id??an();if(!lgt(o)){let a=an();ar.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(n.has(o)){let a=an();ar.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}n.add(o),r.push({...i,id:o})}return r}s(TRe,"addOrValidateContextItemsIDs");f();var Ul=class{constructor(e=()=>new Gie){this.createStatistics=e;this.statistics=new Ln(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let n=this.statistics.get(e);if(n)return n;let r=this.createStatistics();return this.statistics.set(e,r),r}getPreviousStatisticsForCompletion(e){let n=Array.from(this.statistics.keys());for(let r=n.length-1;r>=0;r--){let i=n[r];if(i!==e)return this.statistics.peek(i)}}},Gie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,n){let r=this._expectations.get(e)??[];this._expectations.set(e,[...r,...n])}clearExpectations(){this._expectations.clear()}setLastResolution(e,n){this._lastResolution.set(e,n)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[n,r]of this._expectations){if(r.length===0)continue;let i=this._lastResolution.get(n)??"none";if(i==="none"||i==="error"){this._statistics.set(n,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of r){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/r.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(n,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function wRe(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(wRe,"componentStatisticsToPromptMatcher");var _Re=qe(ri());var Ba=class{static{s(this,"ContextProviderRegistry")}},kg=class{static{s(this,"DefaultContextProviders")}},B5=class extends kg{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(n){this.ids.push(n)}getIds(){return this.ids}},Hie=class extends Ba{constructor(n,r){super();this.ctx=n;this.match=r;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(n){if(n.id.includes(",")||n.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${n.id} is invalid.`);if(this._providers.find(r=>r.id===n.id))throw new Error(`A context provider with id ${n.id} has already been registered`);this._providers.push(n)}unregisterContextProvider(n){this._providers=this._providers.filter(r=>r.id!==n)}get providers(){return this._providers.slice()}async resolveAllProviders(n,r,i,o,a){if(o?.isCancellationRequested)return ar.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;kU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(r,i),d=u.filter(_=>_[1]>0);if(u.filter(_=>_[1]<=0).forEach(([_,k])=>{let B={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(B)}),d.length===0)return c;if(o?.isCancellationRequested)return ar.debug(this.ctx,"Resolving context providers cancelled"),[];mRe(this.ctx,d.map(_=>_[0].id),l,i),gRe(this.ctx,d.map(_=>_[0].id),l,i),yRe(this.ctx,d.map(_=>_[0].id),l,i);let m=new _Re.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=MB(this.ctx)&&!jL(this.ctx)?0:cgt(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:n,documentContext:r,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ul).getPreviousStatisticsForCompletion(n)?.get(_.id);k&&(b.previousUsageStatistics=k);let B=_.resolver.resolve(b,m.token);v.set(_.id,B)}let E=await fRe(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let B=E.get(_.id);if(B){if(B.status==="error")uQ(B.reason)||ar.error(this.ctx,`Error resolving context from ${_.id}: `,B.reason),c.push({providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let N=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(ar.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let H=_.resolver.resolveOnTimeout(b);Uie(H)?N.push(...H):H&&N.push(H),N.length>0&&(B.status="partial")}catch(H){ar.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,H)}let[U,re]=IRe(N);re&&ar.error(this.ctx,`Dropped ${re} context items from ${_.id} due to invalid schema`);let me=TRe(this.ctx,U),ae={providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:me};c.push(ae)}this.ctx.get(Ul).getStatisticsForCompletion(n).setLastResolution(_.id,B.status)}else ar.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(n,r){let i=LU(this.ctx,r),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,n);return[l,c]}))}},jie=class extends Ba{constructor(n){super();this.delegate=n;this._cachedContextItems=new Ln(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(n){this.delegate.registerContextProvider(n)}unregisterContextProvider(n){this.delegate.unregisterContextProvider(n)}get providers(){return this.delegate.providers}async resolveAllProviders(n,r,i,o,a){let l=this._cachedContextItems.get(n);if(n&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(n,r,i,o,a);return c.length>0&&n&&this._cachedContextItems.set(n,c),c}};function NU(t,e){return new jie(new Hie(t,e))}s(NU,"getContextProviderRegistry");function SRe(t,e,n){let r=t.get(Ul).getStatisticsForCompletion(e);return n.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=r.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(SRe,"telemetrizeContextItems");function RRe(t){return t.matchScore>0&&t.resolution!=="error"}s(RRe,"matchContextItems");function LU(t,e){let n=Vie(t,e),r=ui(t,wt.ContextProviders)??[];if(n.length===1&&n[0]==="*"||r.length===1&&r[0]==="*")return["*"];let i=t.get(kg).getIds();return Array.from(new Set([...i,...n,...r]))}s(LU,"getActiveContextProviders");function Vie(t,e){return MB(t)?["*"]:t.get(Rt).contextProviders(e)}s(Vie,"getExpContextProviders");function $ie(t,e){return LU(t,e).length>0}s($ie,"useContextProviderAPI");function cgt(t,e){let n=ui(t,wt.ContextProviderTimeBudget);return n!==void 0&&typeof n=="number"?n:t.get(Rt).contextProviderTimeBudget(e)}s(cgt,"getContextProviderTimeBudget");var Xf=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Ln(25)}static{s(this,"ContextProviderBridge")}schedule(e,n,r,i,o){let a=this.ctx.get(Ba),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(n,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},r,i,o?.data);this.scheduledResolutions.set(n,m)}async resolution(e){let n=this.scheduledResolutions.get(e);return n?await n:[]}};f();f();var FU=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let i=await M1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(n);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?r(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return r(o)}})}async isBlockBodyFinished(e,n,r){let i=(e+n).trimEnd(),o=await this.getNextBlockAtPosition(i,r,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,i=>i.startIndex)}},MU=class extends FU{constructor(n,r,i,o,a){super(n,o,a);this.blockEmptyMatch=r;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let i=await this.getNextBlockAtPosition(n,r,o=>{o.startIndex<r&&(r=o.startIndex);let a=n.substring(r,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(n,r){return r=BRe(n,r),this.isBlockStart(ugt(n,r))&&this.isBlockBodyEmpty(n,r)}};function ugt(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}s(ugt,"getLineAtOffset");function BRe(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}s(BRe,"rewindToNearestNonWs");function kRe(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,i=e.substring(r,n);if(/^\s*$/.test(i))return i}s(kRe,"indent");function dgt(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=kRe(t,n),i=kRe(e,n);return r!==void 0&&i!==void 0&&r.startsWith(i)}s(dgt,"outdented");var Bg=class extends FU{constructor(n,r,i,o,a,l,c){super(n,r,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let i=n.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&QTe(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let o=r;o<n.length&&n.charAt(o)!=`
`;o++)if(/\S/.test(n.charAt(o)))return!1;r=BRe(n,r);let i=await M1(this.languageId,n);try{let o=i.rootNode.descendantForIndex(r-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&dgt(d,p,n)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=r}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,r):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,r);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},fgt={python:new Bg("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Bg("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Bg("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Bg("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new MU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new MU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Bg("csharp",{},new Map([]),[],"block",null,!0),java:new Bg("java",{},new Map([]),[],"block",null,!0),php:new Bg("php",{},new Map([]),[],"block",null,!0),cpp:new Bg("cpp",{},new Map([]),[],"block",null,!0)};function zie(t){if(!g0(t))throw new Error(`Language ${t} is not supported`);return fgt[aQ(t)]}s(zie,"getBlockParser");async function DRe(t,e,n){return g0(t)?zie(t).isEmptyBlockStart(e,n):!1}s(DRe,"isEmptyBlockStart");async function PRe(t,e,n,r){if(g0(t))return zie(t).isBlockBodyFinished(e,n,r)}s(PRe,"isBlockBodyFinished");async function NRe(t,e,n){if(g0(t))return zie(t).getNodeStart(e,n)}s(NRe,"getNodeStart");var d6n=new Tt("parseBlock");function xD(t,e,n){let r=e.getText(Mo.range(Mo.position(0,0),n)),i=e.offsetAt(n),o=e.detectedLanguageId;return a=>PRe(o,r,a,i)}s(xD,"parsingBlockFinished");function OU(t,e){return DRe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(OU,"isEmptyBlockStartUtil");async function LRe(t,e,n,r){let o=e.getText(Mo.range(Mo.position(0,0),n))+r,a=await NRe(e.detectedLanguageId,o,e.offsetAt(n));if(a)return e.positionAt(a)}s(LRe,"getNodeStartUtil");var pgt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),mgt=new RegExp(`^(${pgt.join("|")})`);function hgt(t){return mgt.test(t.trimLeft().toLowerCase())}s(hgt,"isContinuationLine");function QU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(QU,"indentationOfLine");function UU(t,e){let n=t.getText(),r=t.offsetAt(e);return Yie(n,r,t.detectedLanguageId)}s(UU,"contextIndentation");function Yie(t,e,n){let r=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=QU(d[h]),y=h,h+=m;if(n==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=QU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(r,r.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=QU(r[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(Yie,"contextIndentationFromText");var ggt=!1;function Agt(t,e,n){let r=t.split(`
`),i=n!==void 0,o=n?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&r[0].trim()!==""&&a++,!i&&ggt&&r[0].trim()===""&&a++,i||a++,r.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<r.length;c++){let u=r[c];c==0&&o!==void 0&&(u=o+u);let d=QU(u);if(d!==void 0&&(d<l||d===l&&!hgt(u)))return r.slice(0,c).join(`
`).length}return"continue"}s(Agt,"completionCutOrContinue");function FRe(t,e){return async n=>{let r=Agt(n,t,e);return r==="continue"?void 0:r}}s(FRe,"indentationBlockFinished");f();f();f();f();f();f();var ygt={tokenizerName:"o200k_base"};function Cgt(t){return{...ygt,...t}}s(Cgt,"cursorContextOptions");function vD(t,e={}){let n=Cgt(e),r=Bo(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let i=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(i=i.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(i=r.takeLastLinesTokens(i,n.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:r.tokenLength(i),tokenizerName:n.tokenizerName}}s(vD,"getCursorContext");f();f();var xgt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function MRe(t){let e=xgt[t.semantics],n=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${n} ${e} from ${t.relativePath}:`:`Compare ${n} ${e}:`,snippet:t.snippet}}s(MRe,"announceSnippet");var Kie=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var Jie=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=Igt.get(e.languageId)??Egt}tokenize(e){return new Set(vgt(e).filter(n=>!this.stopsForLanguage.has(n)))}},QRe=new Kie(20),D5=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Jie(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,i)=>r.score>i.score?1:-1):n=="descending"?e.sort((r,i)=>r.score>i.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=QRe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(r.length&&d>0&&r[r.length-1].endLine>d){r[r.length-1].score<h&&(r[r.length-1].score=h,r[r.length-1].startLine=d,r[r.length-1].endLine=p);continue}r.push({score:h,startLine:d,endLine:p})}return l&&QRe.put(o,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<n;a++)if(i[a].score!==0){let l=r.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function vgt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(vgt,"splitIntoWords");var bgt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Egt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...bgt]),Igt=new Map([]);f();function qU(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let i=0;i<r-t+1;i++)n.push([i,i+t]);return n}s(qU,"getBasicWindowDelineations");var WU=class t extends D5{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return qU(this.windowLength,e)}_getCursorContextInfo(e){return vD(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return Tgt(e,n)}};function Tgt(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}s(Tgt,"computeScore");f();var GU=class t extends D5{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return qU(this.windowLength,e)}_getCursorContextInfo(e){return vD(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):vD(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return wgt(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await M1(this.referenceDoc.languageId,e);let i=r.rootNode.namedDescendantForIndex(n);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function wgt(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}s(wgt,"computeScore");var _gt=0,Sgt=60,Rgt=4,kgt=1,Bgt=20,Dgt=1e4,ORe={snippetLength:Sgt,threshold:_gt,maxTopSnippets:Rgt,maxCharPerFile:Dgt,maxNumberOfFiles:Bgt,maxSnippetsPerFile:kgt,useSubsetMatching:!1};var Xie={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function Pgt(t,e){return(e.useSubsetMatching?GU.FACTORY(e.snippetLength):WU.FACTORY(e.snippetLength)).to(t)}s(Pgt,"getMatcher");async function URe(t,e,n){let r=Pgt(t,n);return n.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<n.maxCharPerFile&&o.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>n.threshold).sort((o,a)=>o.score-a.score).slice(-n.maxTopSnippets)}s(URe,"getSimilarSnippets");function qRe(t,e){return{...Xie,useSubsetMatching:Zie(t,e)}}s(qRe,"getCppSimilarFilesOptions");function WRe(t){return Xie.maxTopSnippets}s(WRe,"getCppNumberOfSnippets");var Ngt=new Map([["cpp",qRe]]);function HU(t,e,n){let r=Ngt.get(n);return r?r(t,e):{...ORe,useSubsetMatching:Zie(t,e)}}s(HU,"getSimilarFilesOptions");var Lgt=new Map([["cpp",WRe]]);function GRe(t,e){let n=Lgt.get(e);return n?n(t):LTe}s(GRe,"getNumberOfSnippets");function Zie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||ui(t,wt.UseSubsetMatching))??!1}s(Zie,"useSubsetMatching");f();f();var Fgt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Mgt(t){return Fgt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Mgt,"isOomError");function Cv(t,e,n,r=ar){if(!Mc(e)){if(e instanceof Error){let i=e;Mgt(i)?t.get(Ji).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ji).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ji).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ji).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ji).setWarning("Current working directory does not exist")}r.exception(t,e,n)}}s(Cv,"handleException");function HRe(t){process.addListener("uncaughtException",n=>{Cv(t,n,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",n=>{if(!e)try{e=!0,Cv(t,n,"unhandledRejection")}finally{e=!1}})}s(HRe,"registerDefaultHandlers");f();f();var Qgt="content_excluded";async function jRe(t,e,n,r){let i=PU(n,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(Tn),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ul).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,Qgt]]),m}).map(d=>d.data)}s(jRe,"getCodeSnippetsFromContextItems");function VRe(t,e){let n=t.get(Tn);return e.map(r=>({snippet:r,relativePath:n.getRelativePath(r)}))}s(VRe,"addRelativePathToCodeSnippets");f();function ca(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(ca,"Text");function xv(t){return t.children}s(xv,"Chunk");f();function Pn(t,e,n){let r=[];Array.isArray(e.children)?r=e.children:e.children&&(r=[e.children]);let i={...e,children:r};return n&&(i.key=n),{type:t,props:i}}s(Pn,"functionComponentFunction");function Pm(t){return{type:"f",children:t}}s(Pm,"fragmentFunction");Pm.isFragmentFunction=!0;var jU=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(bd,u=>{u.codeSnippets!==n&&r(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!n||n.length===0||!i)return;let a=VRe(t.ctx,n),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(Pn(ca,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Pn(ca,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Pn(ca,{children:"---"}))}),Pn(xv,{children:d})})},"CodeSnippets");f();function eoe(t){return t.children}s(eoe,"CompletionsContext");function toe(t){return t.children}s(toe,"StableCompletionsContext");function noe(t){return t.children}s(noe,"AdditionalCompletionsContext");function VU(t){return t.name===eoe.name||t.name===toe.name||t.name===noe.name}s(VU,"isContextNode");f();f();f();function $Re(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let n=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<t.length;r++)n[r][0]=r;for(let r=0;r<e.length;r++)n[0][r]=r;for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)n[i][r]=Math.min((i==0?r:n[i-1][r])+1,(r==0?i:n[i][r-1])+1,(i==0||r==0?Math.max(i,r):n[i-1][r-1])+(t[i]==e[r]?0:1));return{score:n[t.length-1][e.length-1]}}s($Re,"findEditDistanceScore");var zRe=50;function roe(t){let e=t*4,n=t*.1;return Math.floor(e+n)}s(roe,"approximateMaxCharacters");function bD(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(bd,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=roe(a);return Pn(Pm,{children:[Pn(g2,{document:n,position:i,maxCharacters:m}),Pn($U,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(bD,"CurrentFile");function g2(t){if(t.document===void 0||t.position===void 0)return Pn(ca,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Pn(ca,{children:e})}s(g2,"BeforeCursor");function $U(t,e){let[n,r]=e.useState("");if(t.document===void 0||t.position===void 0)return Pn(ca,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Pn(ca,{});if(n===o)return Pn(ca,{children:n});let a=o;if(n!==""){let l=Bo(t.tokenizer),c=l.takeFirstTokens(o,zRe);c.tokens.length>0&&100*$Re(c.tokens,l.takeFirstTokens(n,zRe).tokens)?.score<(t.suffixMatchThreshold??iQ)*c.tokens.length&&(a=n)}return a!==n&&r(a),Pn(ca,{children:a})}s($U,"AfterCursor");function YRe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(bd,u=>{let d=u.document;(u.document.uri!==n?.uri||d.getText()!==n?.getText())&&r(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=roe(a);return Pn(g2,{document:n,position:i,maxCharacters:c})}s(YRe,"DocumentPrefix");function KRe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(bd,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=roe(a);return Pn($U,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(KRe,"DocumentSuffix");f();var zU=class{static{s(this,"WishlistElision")}elide(e,n,r,i,o){if(n<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(r,i,n,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,n){let r=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=n.tokenLength(m);return c+=h,r+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),r]}elideSuffix(e,n,r,i,o){let a=e.value;if(a.length===0||n<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:r+Math.max(0,n)};i<r&&(n=n+(r-i),r=i);let l=o.takeFirstTokens(a,n);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:r+Math.max(0,n-l.tokens.length)}}elidePrefix(e,n,r,i){let o=this.removeLowWeightPrefixBlocks(e,n,r),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,n,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=n&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,n,r){let i=r;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=n)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,n,r){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=n)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=r.takeLastTokens(a.line,n);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${n} tokens`;throw new Error(l)}return[o,i]}};function JRe(t){return t.map(e=>e.elidedValue).join("")}s(JRe,"makePrompt");function XRe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(XRe,"makePrefixPrompt");function ZRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let n=Math.max(...Array.from(e.keys()),-1),r=[];for(let i=0;i<=n;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();r.push(a)}else r.push("")}return r}s(ZRe,"makeContextPrompt");f();var P5=class{constructor(e,n=ioe()){this.snapshot=e;this.transformers=n}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,n,r,i){let o=this.transformers.reduce((l,c)=>c(e,n,l),{...i});if(r(e,n,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,r,o)}};function ioe(){return[(t,e,n)=>{n.weight===void 0&&(n.weight=1);let r=t.props?.weight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,weight:i*n.weight}},(t,e,n)=>{if(t.name===xv.name){let r=n.chunks?new Set(n.chunks):new Set;return r.add(t.path),{...n,chunks:r}}return n},(t,e,n)=>t.props?.source!==void 0?{...n,source:t.props.source}:n]}s(ioe,"defaultTransformers");f();var ED={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},ooe={};for(let[t,e]of Object.entries(ED))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)ooe[n]=t;else ooe[t]=t;function tke(t){return ooe[t]}s(tke,"mdCodeBlockLangToLanguageId");var Ogt={start:"//",end:""},Ugt=["php","plaintext"],soe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function nke(t){return Object.values(soe).includes(t.trim())}s(nke,"isShebangLine");function qgt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(qgt,"hasLanguageMarker");function Wgt(t,e){let n=ED[e]?ED[e].lineComment:Ogt;if(n){let r=n.end==""?"":" "+n.end;return`${n.start} ${t}${r}`}return""}s(Wgt,"comment");function N5(t,e){if(t==="")return"";let n=t.endsWith(`
`),i=(n?t.slice(0,-1):t).split(`
`).map(o=>Wgt(o,e)).join(`
`);return n?i+`
`:i}s(N5,"commentBlockAsSingles");function rke(t){let{languageId:e}=t;return Ugt.indexOf(e)===-1&&!qgt(t)?e in soe?soe[e]:`Language: ${e}`:""}s(rke,"getLanguageMarker");function ike(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(ike,"getPathMarker");function ID(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(ID,"newLineEnded");function oke(t){return eke(typeof t=="string"?t:"plaintext")}s(oke,"getLanguage");function eke(t){return ED[t]!==void 0?{languageId:t,...ED[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(eke,"_getLanguage");var Ggt=5,L5=class{constructor(){this.renderId=0;this.formatPrefix=JRe}static{s(this,"CompletionsPromptRenderer")}render(e,n,r){let i=this.renderId++,o=performance.now();try{if(r?.isCancellationRequested)return{status:"cancelled"};let a=n.delimiter??"",l=n.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,n.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,n),h=performance.now(),g=new zU,{blocks:[y,...v]}=g.elide(c,p,u,m,Bo(l)),b=performance.now(),E=this.formatPrefix(v),_=this.formatContext?this.formatContext(v):void 0,k=y.elidedValue,B=v.reduce((N,U)=>N+U.elidedTokens,0);return d.push(...Hgt([...v,y])),{prefix:E,prefixTokens:B,suffix:k,suffixTokens:y.elidedTokens,context:_,status:"ok",metadata:{renderId:i,tokenizer:l,elisionTimeMs:b-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((N,U)=>N+(U.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,n){let r=e?.value??"",i=n.promptTokenLimit,o=n.suffixPercent;if(r.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=r.length>0?i-Ggt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,n,r){let i=[],o=[],a=[],l=!1;if(new P5(e,aoe).walkSnapshot((d,p,m)=>{if(d===e||(d.name===bD.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:TD(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let g=d.value.endsWith(n)?d.value:d.value+n,y=g;m.type==="prefix"?y=d.value:nke(d.value)?y=g:y=N5(g,r),i.push({type:m.type==="prefix"?"prefix":"context",value:TD(y),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source})}return!0}),!l)throw new Error(`Node of type ${bD.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},aoe=[...ioe(),(t,e,n)=>VU(t)?{...n,type:"context"}:n,(t,e,n)=>t.name===g2.name?{...n,type:"prefix"}:n,(t,e,n)=>t.name===$U.name?{...n,type:"suffix"}:n];function Hgt(t){return t.map(e=>{let n={componentPath:e.componentPath};return e.tokens!==0&&(n.expectedTokens=e.tokens,n.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(n.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(n.source=e.source),n})}s(Hgt,"computeComponentStatistics");function TD(t){return t.replace(/\r\n?/g,`
`)}s(TD,"normalizeLineEndings");f();var YU=s((t,e)=>{let[n,r]=e.useState();if(e.useData(bd,i=>{i.document.uri!==n?.uri&&r(i.document)}),n){let i=t.ctx.get(Tn),o=i.getRelativePath(n),a={uri:n.uri,source:n.getText(),relativePath:o,languageId:n.detectedLanguageId},l=i.findNotebook(n);return a.relativePath&&!l?Pn(jgt,{docInfo:a}):Pn(Vgt,{docInfo:a})}},"DocumentMarker"),jgt=s(t=>Pn(ca,{children:ike(t.docInfo)}),"PathMarker"),Vgt=s(t=>Pn(ca,{children:rke(t.docInfo)}),"LanguageMarker");f();f();f();f();function wD(t,e="Unreachable"){throw new Error(e)}s(wD,"assertNever");function ql(t,e="unexpected state"){if(!t)throw new fr(`Assertion Failed: ${e}`)}s(ql,"assert");function Lu(t){if(!t()){debugger;t(),p5(new fr("Assertion Failed"))}}s(Lu,"assertFn");function vv(t,e){let n=0;for(;n<t.length-1;){let r=t[n],i=t[n+1];if(!e(r,i))return!1;n++}return!0}s(vv,"checkAdjacentItems");f();f();f();f();f();var z1=s((t,e)=>t===e,"strictEquals");f();f();var xs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},_D=class{constructor(){this._first=xs.Undefined;this._last=xs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===xs.Undefined}clear(){let e=this._first;for(;e!==xs.Undefined;){let n=e.next;e.prev=xs.Undefined,e.next=xs.Undefined,e=n}this._first=xs.Undefined,this._last=xs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,n){let r=new xs(e);if(this._first===xs.Undefined)this._first=r,this._last=r;else if(n){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first!==xs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==xs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==xs.Undefined&&e.next!==xs.Undefined){let n=e.prev;n.next=e.next,e.next.prev=n}else e.prev===xs.Undefined&&e.next===xs.Undefined?(this._first=xs.Undefined,this._last=xs.Undefined):e.next===xs.Undefined?(this._last=this._last.prev,this._last.next=xs.Undefined):e.prev===xs.Undefined&&(this._first=this._first.next,this._first.prev=xs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==xs.Undefined;)yield e.element,e=e.next}};f();var $gt=globalThis.performance&&typeof globalThis.performance.now=="function",F5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=$gt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var ske=!1,zgt=!1,A2;(ie=>{ie.None=s(()=>jo.None,"None");function e($){if(zgt){let{onDidAddListener:O}=$,Y=SD.create(),K=0;$.onDidAddListener=()=>{++K===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),O?.()}}}s(e,"_addLeakageTraceLogic");function n($,O){return h($,()=>{},0,void 0,!0,void 0,O)}ie.defer=n,s(n,"defer");function r($){return(O,Y=null,K)=>{let le=!1,te;return te=$(pe=>{if(!le)return te?te.dispose():le=!0,O.call(Y,pe)},null,K),le&&te.dispose(),te}}ie.once=r,s(r,"once");function i($,O){return ie.once(ie.filter($,O))}ie.onceIf=i,s(i,"onceIf");function o($,O,Y){return p((K,le=null,te)=>$(pe=>K.call(le,O(pe)),null,te),Y)}ie.map=o,s(o,"map");function a($,O,Y){return p((K,le=null,te)=>$(pe=>{O(pe),K.call(le,pe)},null,te),Y)}ie.forEach=a,s(a,"forEach");function l($,O,Y){return p((K,le=null,te)=>$(pe=>O(pe)&&K.call(le,pe),null,te),Y)}ie.filter=l,s(l,"filter");function c($){return $}ie.signal=c,s(c,"signal");function u(...$){return(O,Y=null,K)=>{let le=e5e(...$.map(te=>te(pe=>O.call(Y,pe))));return m(le,K)}}ie.any=u,s(u,"any");function d($,O,Y,K){let le=Y;return o($,te=>(le=O(le,te),le),K)}ie.reduce=d,s(d,"reduce");function p($,O){let Y,K={onWillAddFirstListener(){Y=$(le.fire,le)},onDidRemoveLastListener(){Y?.dispose()}};O||e(K);let le=new S0(K);return O?.add(le),le.event}s(p,"snapshot");function m($,O){return O instanceof Array?O.push($):O&&O.add($),$}s(m,"addAndReturnDisposable");function h($,O,Y=100,K=!1,le=!1,te,pe){let he,Qe,ke,Ze=0,Fe,ft={leakWarningThreshold:te,onWillAddFirstListener(){he=$(yt=>{Ze++,Qe=O(Qe,yt),K&&!ke&&(It.fire(Qe),Qe=void 0),Fe=s(()=>{let vt=Qe;Qe=void 0,ke=void 0,(!K||Ze>1)&&It.fire(vt),Ze=0},"doFire"),typeof Y=="number"?(clearTimeout(ke),ke=setTimeout(Fe,Y)):ke===void 0&&(ke=0,queueMicrotask(Fe))})},onWillRemoveListener(){le&&Ze>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,he.dispose()}};pe||e(ft);let It=new S0(ft);return pe?.add(It),It.event}ie.debounce=h,s(h,"debounce");function g($,O=0,Y){return ie.debounce($,(K,le)=>K?(K.push(le),K):[le],O,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y($,O=(K,le)=>K===le,Y){let K=!0,le;return l($,te=>{let pe=K||!O(te,le);return K=!1,le=te,pe},Y)}ie.latch=y,s(y,"latch");function v($,O,Y){return[ie.filter($,O,Y),ie.filter($,K=>!O(K),Y)]}ie.split=v,s(v,"split");function b($,O=!1,Y=[],K){let le=Y.slice(),te=$(Qe=>{le?le.push(Qe):he.fire(Qe)});K&&K.add(te);let pe=s(()=>{le?.forEach(Qe=>he.fire(Qe)),le=null},"flush"),he=new S0({onWillAddFirstListener(){te||(te=$(Qe=>he.fire(Qe)),K&&K.add(te))},onDidAddFirstListener(){le&&(O?setTimeout(pe):pe())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return K&&K.add(he),he.event}ie.buffer=b,s(b,"buffer");function E($,O){return s((K,le,te)=>{let pe=O(new k);return $(function(he){let Qe=pe.evaluate(he);Qe!==_&&K.call(le,Qe)},void 0,te)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(O){return this.steps.push(O),this}forEach(O){return this.steps.push(Y=>(O(Y),Y)),this}filter(O){return this.steps.push(Y=>O(Y)?Y:_),this}reduce(O,Y){let K=Y;return this.steps.push(le=>(K=O(K,le),K)),this}latch(O=(Y,K)=>Y===K){let Y=!0,K;return this.steps.push(le=>{let te=Y||!O(le,K);return Y=!1,K=le,te?le:_}),this}evaluate(O){for(let Y of this.steps)if(O=Y(O),O===_)break;return O}}function B($,O,Y=K=>K){let K=s((...he)=>pe.fire(Y(...he)),"fn"),le=s(()=>$.on(O,K),"onFirstListenerAdd"),te=s(()=>$.removeListener(O,K),"onLastListenerRemove"),pe=new S0({onWillAddFirstListener:le,onDidRemoveLastListener:te});return pe.event}ie.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function N($,O,Y=K=>K){let K=s((...he)=>pe.fire(Y(...he)),"fn"),le=s(()=>$.addEventListener(O,K),"onFirstListenerAdd"),te=s(()=>$.removeEventListener(O,K),"onLastListenerRemove"),pe=new S0({onWillAddFirstListener:le,onDidRemoveLastListener:te});return pe.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function U($,O){return new Promise(Y=>r($)(Y,null,O))}ie.toPromise=U,s(U,"toPromise");function re($){let O=new S0;return $.then(Y=>{O.fire(Y)},()=>{O.fire(void 0)}).finally(()=>{O.dispose()}),O.event}ie.fromPromise=re,s(re,"fromPromise");function me($,O){return $(Y=>O.fire(Y))}ie.forward=me,s(me,"forward");function ae($,O,Y){return O(Y),$(K=>O(K))}ie.runAndSubscribe=ae,s(ae,"runAndSubscribe");class H{constructor(O,Y){this._observable=O;this._counter=0;this._hasChanged=!1;let K={onWillAddFirstListener:s(()=>{O.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{O.removeObserver(this)},"onDidRemoveLastListener")};Y||e(K),this.emitter=new S0(K),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(O){this._counter++}handlePossibleChange(O){}handleChange(O,Y){this._hasChanged=!0}endUpdate(O){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function G($,O){return new H($,O).emitter.event}ie.fromObservable=G,s(G,"fromObservable");function ue($){return(O,Y,K)=>{let le=0,te=!1,pe={beginUpdate(){le++},endUpdate(){le--,le===0&&($.reportChanges(),te&&(te=!1,O.call(Y)))},handlePossibleChange(){},handleChange(){te=!0}};$.addObserver(pe),$.reportChanges();let he={dispose(){$.removeObserver(pe)}};return K instanceof Bu?K.add(he):Array.isArray(K)&&K.push(he),he}}ie.fromObservableLight=ue,s(ue,"fromObservableLight")})(A2||={});var loe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new F5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},ake=-1;var coe=class t{constructor(e,n,r=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=n;this.name=r;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,n){let r=this.threshold;if(r<=0||n<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new uoe(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[r,i]of this._stacks)(!e||n<i)&&(e=[r,i],n=i);return e}},SD=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},uoe=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,n){super(e),this.name="ListenerLeakError",this.stack=n}},doe=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,n){super(e),this.name="ListenerRefusalError",this.stack=n}},Ygt=0,M5=class{constructor(e){this.value=e;this.id=Ygt++}static{s(this,"UniqueContainer")}},Kgt=2,Jgt=s((t,e)=>{if(t instanceof M5)e(t);else for(let n=0;n<t.length;n++){let r=t[n];r&&e(r)}},"forEachListener"),S0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=ake>0||this._options?.leakWarningThreshold?new coe(e?.onListenerError??p5,this._options?.leakWarningThreshold??ake):void 0,this._perfMon=this._options?._profName?new loe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(ske){let e=this._listeners;queueMicrotask(()=>{Jgt(e,n=>n.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,n,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new doe(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||p5)(d),jo.None}if(this._disposed)return jo.None;n&&(e=e.bind(n));let i=new M5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=SD.create(),o=this._leakageMon.check(i.stack,this._size+1)),ske&&(i.stack=a??SD.create()),this._listeners?this._listeners instanceof M5?(this._deliveryQueue??=new foe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=Ra(()=>{o?.(),this._removeListener(i)});return r instanceof Bu?r.add(l):Array.isArray(r)&&r.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,r=n.indexOf(e);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*Kgt<=n.length){let o=0;for(let a=0;a<n.length;a++)n[a]?n[o++]=n[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=o}}_deliver(e,n){if(!e)return;let r=this._options?.onListenerError||p5;if(!r){e.value(n);return}try{e.value(n)}catch(i){r(i)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof M5)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var foe=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,n,r){this.i=0,this.end=r,this.current=e,this.value=n}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var Fu=class{constructor(e,n,r){this.owner=e;this.debugNameSource=n;this.referenceFn=r}static{s(this,"DebugNameData")}getDebugName(e){return dke(e,this)}},lke=new Map,poe=new WeakMap;function dke(t,e){let n=poe.get(t);if(n)return n;let r=Xgt(t,e);if(r){let i=lke.get(r)??0;i++,lke.set(r,i);let o=i===1?r:`${r}#${i}`;return poe.set(t,o),o}}s(dke,"getDebugName");function Xgt(t,e){let n=poe.get(t);if(n)return n;let r=e.owner?eAt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return r+i}else return r+o;let a=e.referenceFn;if(a!==void 0&&(i=KU(a),i!==void 0))return r+i;if(e.owner!==void 0){let l=Zgt(e.owner,t);if(l!==void 0)return r+l}}s(Xgt,"computeDebugName");function Zgt(t,e){for(let n in t)if(t[n]===e)return n}s(Zgt,"findKey");var cke=new Map,uke=new WeakMap;function eAt(t){let e=uke.get(t);if(e)return e;let n=tAt(t),r=cke.get(n)??0;r++,cke.set(n,r);let i=r===1?n:`${n}#${r}`;return uke.set(t,i),i}s(eAt,"formatOwner");function tAt(t){let e=t.constructor;return e?e.name:"Object"}s(tAt,"getClassName");function KU(t){let e=t.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(r?r[1]:void 0)?.trim()}s(KU,"getFunctionName");f();var y2;function XU(t){y2?y2 instanceof JU?y2.loggers.push(t):y2=new JU([y2,t]):y2=t}s(XU,"addLogger");function Us(){return y2}s(Us,"getLogger");var moe;function fke(t){moe=t}s(fke,"setLogObservableFn");function pke(t){moe&&moe(t)}s(pke,"logObservable");var JU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let n of this.loggers)n.handleObservableCreated(e)}handleOnListenerCountChanged(e,n){for(let r of this.loggers)r.handleOnListenerCountChanged(e,n)}handleObservableUpdated(e,n){for(let r of this.loggers)r.handleObservableUpdated(e,n)}handleAutorunCreated(e){for(let n of this.loggers)n.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let n of this.loggers)n.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,n,r){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,n,r)}handleAutorunStarted(e){for(let n of this.loggers)n.handleAutorunStarted(e)}handleAutorunFinished(e){for(let n of this.loggers)n.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,n,r){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,n,r)}handleDerivedCleared(e){for(let n of this.loggers)n.handleDerivedCleared(e)}handleBeginTransaction(e){for(let n of this.loggers)n.handleBeginTransaction(e)}handleEndTransaction(e){for(let n of this.loggers)n.handleEndTransaction(e)}};var mke;function hke(t){mke=t}s(hke,"_setRecomputeInitiallyAndOnChange");var gke;function Ake(t){gke=t}s(Ake,"_setKeepObserved");var hoe;function yke(t){hoe=t}s(yke,"_setDerivedOpts");var ZU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,n){let r=n===void 0?void 0:e,i=n===void 0?e:n;return hoe({owner:r,debugName:s(()=>{let o=KU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!r)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return hoe({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,n){return e.add(mke(this,n)),this}keepObserved(e){return e.add(gke(this)),this}get debugValue(){return this.get()}},bv=class extends ZU{constructor(){super();this.observers=new Set;Us()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(n){let r=this.observers.size;this.observers.add(n),r===0&&this.onFirstObserverAdded(),r!==this.observers.size&&Us()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(n){let r=this.observers.delete(n);r&&this.observers.size===0&&this.onLastObserverRemoved(),r&&Us()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let n=!!Us();return pke(this),n||Us()?.handleObservableCreated(this),this}};function tq(t,e){let n=new Q5(t,e);try{t(n)}finally{n.finish()}}s(tq,"transaction");function goe(t,e,n){t?e(t):tq(e,n)}s(goe,"subtransaction");var Q5=class{constructor(e,n){this._fn=e;this._getDebugName=n;this.updatingObservers=[];Us()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():KU(this._fn)}updateObserver(e,n){this.updatingObservers.push({observer:e,observable:n}),e.beginUpdate(n)}finish(){let e=this.updatingObservers;for(let n=0;n<e.length;n++){let{observer:r,observable:i}=e[n];r.endUpdate(i)}this.updatingObservers=null,Us()?.handleEndTransaction(this)}};function Nm(t,e){let n;return typeof t=="string"?n=new Fu(void 0,t,void 0):n=new Fu(t,void 0,void 0),new eq(n,e,z1)}s(Nm,"observableValue");var eq=class extends bv{constructor(n,r,i){super();this._debugNameData=n;this._equalityComparator=i;this._value=r,Us()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(n,r,i){if(i===void 0&&this._equalityComparator(this._value,n))return;let o;r||(r=o=new Q5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(n),Us()?.handleObservableUpdated(this,{oldValue:a,newValue:n,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)r.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(n){this._value=n}};f();f();function C2(t){return new O5(new Fu(void 0,void 0,t),t,void 0,void 0)}s(C2,"autorun");function Aoe(t,e){return new O5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Aoe,"autorunOpts");function nq(t,e){return new O5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(nq,"autorunHandleChanges");function yoe(t,e){let n=new Bu,r=nq({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{n.clear(),e(i,o,n)});return Ra(()=>{r.dispose(),n.dispose()})}s(yoe,"autorunWithStoreHandleChanges");function Coe(t){let e=new Bu,n=Aoe({owner:void 0,debugName:void 0,debugReferenceFn:t},r=>{e.clear(),t(r,e)});return Ra(()=>{n.dispose(),e.dispose()})}s(Coe,"autorunWithStore");var O5=class{constructor(e,n,r,i){this._debugNameData=e;this._runFn=n;this.createChangeSummary=r;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Us()?.handleAutorunCreated(this),this._runIfNeeded(),A5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Us()?.handleAutorunDisposed(this),y5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Us()?.handleAutorunStarted(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,n)}catch(r){u2(r)}finally{this._isRunning=!1}}}finally{this.disposed||Us()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Lu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,n){if(this._isDependency(e)){Us()?.handleAutorunDependencyChanged(this,e,n);try{(this._handleChange?this._handleChange({changedObservable:e,change:n,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(r){u2(r)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new fr("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let n=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),n}};(e=>e.Observer=O5)(C2||={});f();function rq(t,e){return new x2(new Fu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??z1)}s(rq,"derivedOpts");yke(rq);var x2=class extends bv{constructor(n,r,i,o,a=void 0,l){super();this._debugNameData=n;this._computeFn=r;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Us()?.handleDerivedCleared(this);for(let n of this.dependencies)n.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let r;try{this._isReaderValid=!0,r=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this.state===1){for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;let r=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=r&&!this._equalityComparator(i,this.value),Us()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:r})}catch(a){u2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(n){if(this._isUpdating)throw new fr("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let r=this.updateCount===1;if(this.state===3&&(this.state=1,!r))for(let i of this.observers)i.handlePossibleChange(this);if(r)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(n){if(this.updateCount--,this.updateCount===0){let r=[...this.observers];for(let i of r)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Lu(()=>this.updateCount>=0)}handlePossibleChange(n){if(this.state===3&&this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){this.state=1;for(let r of this.observers)r.handlePossibleChange(this)}}handleChange(n,r){if(this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){Us()?.handleDerivedDependencyChanged(this,n,r);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:n,change:r,didChange:s(a=>a===n,"didChange")},this.changeSummary):!0}catch(a){u2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(n){if(!this._isReaderValid)throw new fr("The reader object cannot be used outside its compute function!");n.addObserver(this);let r=n.get();return this.dependencies.add(n),this.dependenciesToBeRemoved.delete(n),r}addObserver(n){let r=!this.observers.has(n)&&this.updateCount>0;super.addObserver(n),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(n)?this._removedObserverToCallEndUpdateOn.delete(n):n.beginUpdate(this))}removeObserver(n){this.observers.has(n)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(n)),super.removeObserver(n)}};f();f();function xoe(...t){let e,n,r;return t.length===3?[e,n,r]=t:[n,r]=t,new Ev(new Fu(e,void 0,r),n,r,()=>Ev.globalTransaction,z1)}s(xoe,"observableFromEvent");var Ev=class extends bv{constructor(n,r,i,o,a){super();this._debugNameData=n;this.event=r;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(n=>{let r=this._getValue(n),i=this.value,o=!this.hasValue||!this._equalityComparator(i,r),a=!1;o&&(this.value=r,this.hasValue&&(a=!0,goe(this._getTransaction(),l=>{Us()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Us()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let n=this.getDebugName();return"From Event"+(n?`: ${n}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(n=>{n.Observer=Ev;function e(r,i){let o=!1;Ev.globalTransaction===void 0&&(Ev.globalTransaction=r,o=!0);try{i()}finally{o&&(Ev.globalTransaction=void 0)}}n.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(xoe||={});function xke(t){let e=new iq(!1,void 0);return t.addObserver(e),Ra(()=>{t.removeObserver(e)})}s(xke,"keepObserved");Ake(xke);function vke(t,e){let n=new iq(!0,e);return t.addObserver(n),e?e(t.get()):t.reportChanges(),Ra(()=>{t.removeObserver(n)})}s(vke,"recomputeInitiallyAndOnChange");hke(vke);var iq=class{constructor(e,n){this._forceRecompute=e;this._handleValue=n;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,n){}};function Zf(t,e,n,r){let i=new oq(n,r);return rq({debugReferenceFn:n,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new oq(n)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Zf,"mapObservableArrayCached");var oq=class{constructor(e,n){this._map=e;this._keySelector=n;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let n=[],r=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)r.delete(o);else{let l=new Bu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}n.push(a.out)}for(let i of r)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=n}getItems(){return this._items}};function voe(t,e){let n;return yoe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((r,i)=>{if(r.didChange(t)){let o=r.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(r,i)=>{let o=t.read(r),a=n;i.didChange&&(n=o,e(o,a,i.deltas))})}s(voe,"runOnChange");f();f();f();var bke=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),sq;(r=>{function t(i){return i===r.None||i===r.Cancelled||i instanceof U5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}r.isCancellationToken=t,s(t,"isCancellationToken"),r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:A2.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:bke})})(sq||={});var U5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?bke:(this._emitter||(this._emitter=new S0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Y1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new U5),this._token}cancel(){this._token?this._token instanceof U5&&this._token.cancel():this._token=sq.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof U5&&this._token.dispose():this._token=sq.None}};f();var aq;function Eke(t){aq||(aq=new kD,XU(aq)),aq.addFilteredObj(t)}s(Eke,"logObservableToConsole");var kD=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return nAt([q5(oAt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[q5(" "),ep(RD(e.oldValue,70),{color:"red",strikeThrough:!0}),q5(" "),ep(RD(e.newValue,60),{color:"green"})]:[q5(" (unchanged)")]:[q5(" "),ep(RD(e.newValue,60),{color:"green"}),q5(" (initial)")]}handleObservableCreated(e){if(e instanceof x2){let n=e;if(this.changedObservablesSets.set(n,new Set),!1){let i=[];n.__debugUpdating=i;let o=n.beginUpdate;n.beginUpdate=l=>(i.push(l),o.apply(n,[l]));let a=n.endUpdate;n.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",n.debugName,l.debugName),i.splice(c,1),a.apply(n,[l])}}}}handleOnListenerCountChanged(e,n){}handleObservableUpdated(e,n){if(this._isIncluded(e)){if(e instanceof x2){this._handleDerivedRecomputed(e,n);return}console.log(...this.textToConsoleArgs([W5("observable value changed"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n)]))}}formatChanges(e){if(e.size!==0)return ep(" (changed deps: "+[...e].map(n=>n.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(n)}_handleDerivedRecomputed(e,n){if(!this._isIncluded(e))return;let r=this.changedObservablesSets.get(e);r&&(console.log(...this.textToConsoleArgs([W5("derived recomputed"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([W5("derived cleared"),ep(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,n){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([W5("observable from event triggered"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(n)}handleAutorunStarted(e){let n=this.changedObservablesSets.get(e);n&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([W5("autorun"),ep(e.debugName,{color:"BlueViolet"}),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),n.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let n=e.getDebugName();n===void 0&&(n=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([W5("transaction"),ep(n,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function nAt(t){let e=new Array,n=[],r="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(r+=`%c${a.text}`,e.push(a.style),a.data&&n.push(...a.data)):"data"in a&&n.push(...a.data)}s(i,"process"),i(t);let o=[r,...e];return o.push(...n),o}s(nAt,"consoleTextToArgs");function q5(t){return ep(t,{color:"black"})}s(q5,"normalText");function W5(t){return ep(sAt(`${t}: `,10),{color:"black",bold:!0})}s(W5,"formatKind");function ep(t,e={color:"black"}){function n(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(n,"objToCss");let r={color:e.color};return e.strikeThrough&&(r["text-decoration"]="line-through"),e.bold&&(r["font-weight"]="bold"),{text:t,style:n(r)}}s(ep,"styled");function RD(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?rAt(t,e):iAt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(RD,"formatValue");function rAt(t,e){let n="[ ",r=!0;for(let i of t){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${RD(i,e-n.length)}`}return n+=" ]",n}s(rAt,"formatArray");function iAt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let n="{ ",r=!0;for(let[i,o]of Object.entries(t)){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${i}: ${RD(o,e-n.length)}`}return n+=" }",n}s(iAt,"formatObject");function oAt(t,e){let n="";for(let r=1;r<=e;r++)n+=t;return n}s(oAt,"repeat");function sAt(t,e){for(;t.length<e;)t+=" ";return t}s(sAt,"padStr");fke(Eke);var aAt=!1;aAt&&XU(new kD);f();var v2;(n=>{n.PlainText="plaintext";function e(r){return r}n.create=e,s(e,"create")})(v2||={});f();f();f();function Ike(t){return t}s(Ike,"identity");var lq=class{constructor(e,n){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=Ike):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let n=this._computeKey(e);return this.lastArgKey!==n&&(this.lastArgKey=n,this.lastCache=this._fn(e)),this.lastCache}},K1=class{constructor(e,n){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=Ike):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let n=this._computeKey(e);if(this._map2.has(n))return this._map2.get(n);let r=this._fn(e);return this._map.set(e,r),this._map2.set(n,r),r}};f();f();var Dg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function b2(t){return t<0?0:t>4294967295?4294967295:t|0}s(b2,"toUint32");function boe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(boe,"escapeRegExpCharacters");function Pg(t){return t.split(/\r\n|\r|\n/)}s(Pg,"splitLines");function BD(t,e){let n=Math.min(t.length,e.length),r;for(r=0;r<n;r++)if(t.charCodeAt(r)!==e.charCodeAt(r))return r;return n}s(BD,"commonPrefixLength");function H5(t,e){let n=Math.min(t.length,e.length),r,i=t.length-1,o=e.length-1;for(r=0;r<n;r++)if(t.charCodeAt(i-r)!==e.charCodeAt(o-r))return r;return n}s(H5,"commonSuffixLength");var cAt=/^[\t\n\r\x20-\x7E]*$/;function Eoe(t){return cAt.test(t)}s(Eoe,"isBasicASCII");var MQn=String.fromCharCode(65279);var Tke=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=uAt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let n=this._data,r=n.length/3,i=1;for(;i<=r;)if(e<n[3*i])i=2*i;else if(e>n[3*i+1])i=2*i+1;else return n[3*i+2];return 0}};function uAt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(uAt,"getGraphemeBreakRawData");var wke=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Dg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new lq({getCacheKey:JSON.stringify},e=>{function n(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(n,"arrayToMap");function r(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(r,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=n(o[d]);l=i(l,p)}let c=n(o._common),u=r(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Dg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},_ke=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&t.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return t.getData()}};f();var kt=class t{constructor(e,n){this.start=e;this.endExclusive=n;if(e>n)throw new fr(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,n){return new t(e,n)}static addRange(e,n){let r=0;for(;r<n.length&&n[r].endExclusive<e.start;)r++;let i=r;for(;i<n.length&&n[i].start<=e.endExclusive;)i++;if(r===i)n.splice(r,0,e);else{let o=Math.min(e.start,n[r].start),a=Math.max(e.endExclusive,n[i-1].endExclusive);n.splice(r,i-r,new t(o,a))}}static tryCreate(e,n){if(!(e>n))return new t(e,n)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,n){return new t(e,e+n)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(n<=r)return new t(n,r)}intersectionLength(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-n)}intersects(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<r}intersectsOrTouches(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<=r}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new fr(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new fr(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let n=[];for(let r=this.start;r<this.endExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.start;n<this.endExclusive;n++)e(n)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new fr(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var ir=class t{static{s(this,"Position")}constructor(e,n){this.lineNumber=e,this.column=n}with(e=this.lineNumber,n=this.column){return e===this.lineNumber&&n===this.column?this:new t(e,n)}delta(e=0,n=0){return this.with(this.lineNumber+e,this.column+n)}equals(e){return t.equals(this,e)}static equals(e,n){return!e&&!n?!0:!!e&&!!n&&e.lineNumber===n.lineNumber&&e.column===n.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<n.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<=n.column}static compare(e,n){let r=e.lineNumber|0,i=n.lineNumber|0;if(r===i){let o=e.column|0,a=n.column|0;return o-a}return r-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,n,r,i){e>r||e===r&&n>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=n):(this.startLineNumber=e,this.startColumn=n,this.endLineNumber=r,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<e.startColumn||n.lineNumber===e.endLineNumber&&n.column>e.endColumn)}static strictContainsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<=e.startColumn||n.lineNumber===e.endLineNumber&&n.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<=e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,n){let r,i,o,a;return n.startLineNumber<e.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===e.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),n.endLineNumber>e.endLineNumber?(o=n.endLineNumber,a=n.endColumn):n.endLineNumber===e.endLineNumber?(o=n.endLineNumber,a=Math.max(n.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(r,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,n){let r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,d=n.endColumn;return r<l?(r=l,i=c):r===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),r>o||r===o&&i>a?null:new t(r,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,n){return!e&&!n?!0:!!e&&!!n&&e.startLineNumber===n.startLineNumber&&e.startColumn===n.startColumn&&e.endLineNumber===n.endLineNumber&&e.endColumn===n.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new ir(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new ir(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,n){return new t(this.startLineNumber,this.startColumn,e,n)}setStartPosition(e,n){return new t(e,n,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,n=e){return new t(e.lineNumber,e.column,n.lineNumber,n.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<e.startColumn)}static areIntersecting(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<=n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,n){if(e&&n){let o=e.startLineNumber|0,a=n.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=n.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=n.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=n.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(n?1:0)}static compareRangesUsingEnds(e,n){return e.endLineNumber===n.endLineNumber?e.endColumn===n.endColumn?e.startLineNumber===n.startLineNumber?e.startColumn-n.startColumn:e.startLineNumber-n.startLineNumber:e.endColumn-n.endColumn:e.endLineNumber-n.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,n){return n?e.startLineNumber<n.startLineNumber&&n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,n.startLineNumber),new t(n.endLineNumberExclusive,e.endLineNumberExclusive)]:n.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=n.endLineNumberExclusive?[]:n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(n.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(n.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let n=new E2(e[0].slice());for(let r=1;r<e.length;r++)n=n.getUnion(new E2(e[r].slice()));return n.ranges}static join(e){if(e.length===0)throw new fr("lineRanges cannot be empty");let n=e[0].startLineNumber,r=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)n=Math.min(n,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new t(n,r)}static ofLength(e,n){return new t(e,e+n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,n){if(e>n)throw new fr(`startLineNumber ${e} cannot be after endLineNumberExclusive ${n}`);this.startLineNumber=e,this.endLineNumberExclusive=n}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let n=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(n<=r)return new t(n,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let n=[];for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)e(n)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new kt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,n){return new t(this.startLineNumber-e,this.endLineNumberExclusive+n)}},E2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let n=c2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),r=I0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)this._normalizedRanges.splice(n,0,e);else if(n===r-1){let i=this._normalizedRanges[n];this._normalizedRanges[n]=i.join(e)}else{let i=this._normalizedRanges[n].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(n,r-n,i)}}contains(e){let n=q1(this._normalizedRanges,r=>r.startLineNumber<=e);return!!n&&n.endLineNumberExclusive>e}intersects(e){let n=q1(this._normalizedRanges,r=>r.startLineNumber<e.endLineNumberExclusive);return!!n&&n.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let n=[],r=0,i=0,o=null;for(;r<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(r<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[r],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,r++):(a=c,i++)}else r<this._normalizedRanges.length?(a=this._normalizedRanges[r],r++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(o),o=a)}return o!==null&&n.push(o),new t(n)}subtractFrom(e){let n=c2(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),r=I0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)return new t([e]);let i=[],o=e.startLineNumber;for(let a=n;a<r;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let n=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[r],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&n.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?r++:i++}return new t(n)}getWithDelta(e){return new t(this._normalizedRanges.map(n=>n.delta(e)))}};var Wl=class t{constructor(e,n){this.lineCount=e;this.columnCount=n}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,n){return n.isLessThan(e)?t.zero:e.lineCount===n.lineCount?new t(0,n.columnCount-e.columnCount):new t(n.lineCount-e.lineCount,n.columnCount)}static betweenPositions(e,n){return e.lineNumber===n.lineNumber?new t(0,n.column-e.column):new t(n.lineNumber-e.lineNumber,n.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let n=0,r=0;for(let i of e)i===`
`?(n++,r=0):r++;return new t(n,r)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new ir(e.lineNumber,e.column+this.columnCount):new ir(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Gl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new Ioe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Pg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},Ioe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=I0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new ir(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Wl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Wl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Lm=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(n=>n.id===e))}};var cq=class extends jo{constructor(n,r,i,o,a,l){super();this.id=n;this.workspaceRoot=l;this.value=Nm(this,r),this.selection=Nm(this,i),this.languageId=Nm(this,o),this._register(Ra(a))}static{s(this,"MutableObservableDocument")}applyEdit(n,r=void 0){let i=this.value.get().apply(n);this.value.set(i,r,n)}updateSelection(n,r=void 0){this.selection.set(n,r)}};f();f();function J1(t,e,n){let r=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return nq({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=r.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}n(a)})}s(J1,"autorunWithChanges");f();var Ng=class extends jo{static{s(this,"RecentEditsProvider")}};function dAt(t,e=!1,n=void 0,r){if(e&&(n===void 0||r===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-n)<=r||Math.abs(o-n)<=r))}s(dAt,"editIsTooCloseToCursor");var uq=s((t,e)=>{let[n,r]=e.useState();return e.useData(bd,async i=>{if(!i.document)return;let o=t.ctx.get(Ng);if(o.isEnabled())o.start();else return;let a=o.config,l=o.getRecentEdits(),c=new Set,u=t.ctx.get(Tn),d=[];for(let m=l.length-1;m>=0&&!(d.length>=a.maxEdits);m--){let h=l[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!c.has(h.file);if(c.size+(g?1:0)>a.maxFiles)break;let v=h.file===i.document?.uri,b=v?i.position.line:void 0;if(dAt(h,v,b,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){c.add(h.file);let k=u.getRelativePath({uri:h.file});d.unshift(ID(`File: ${k}`)+ID(_))}}if(d.length===0){r(void 0);return}let p=ID("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+ID("End of recent edits");r(p)}),n?Pn(xv,{children:Pn(ca,{children:n})}):void 0},"RecentEdits");f();f();f();f();var Toe=new Ln;function Ske(t){return[...t].sort((e,n)=>{let r=Toe.get(e.uri)??0;return(Toe.get(n.uri)??0)-r})}s(Ske,"sortByAccessTimes");var Rke=s(t=>t.get(Tn).onDidFocusTextDocument(e=>{e&&Toe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var dq=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,n,r,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>I2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&n.startsWith("file:")&&l.uri!==n&&fq(r,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,n,r){let i=new Map,o=new Map;return i=await this.truncateDocs(Ske(await this.docManager.textDocuments()),e,n,r),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function kke(t,e,n){return async function(...r){return await Promise.race([t.apply(this,r),new Promise(i=>{setTimeout(i,e,n)})])}}s(kke,"shortCircuit");f();function pAt(...t){return JSON.stringify(t,(e,n)=>typeof n=="object"?n:String(n))}s(pAt,"defaultHash");function woe(t,e={}){let{hash:n=pAt,cache:r=new Map}=e;return function(...i){let o=n.apply(this,i);if(r.has(o))return r.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw r.delete(o),l})),r.set(o,a),a}}s(woe,"memoize");var Bke={entries:[],traits:[]},pq={entries:new Map,traits:[]},_oe=class extends Ln{constructor(n,r=2*60*1e3){super(n);this.defaultEvictionTimeMs=r;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(n){let r=this._cacheTimestamps.get(n);return r?++r.retryCount:(this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),0)}has(n){return this.isValid(n)?super.has(n):(this.deleteExpiredEntry(n),!1)}get(n){let r=super.get(n);if(this.isValid(n))return r;this.deleteExpiredEntry(n)}set(n,r){let i=super.set(n,r);return this.isValid(n)||this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(n){let r=this._cacheTimestamps.get(n);return r!==void 0&&Date.now()-r.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(n){this._cacheTimestamps.has(n)&&this._cacheTimestamps.delete(n),super.delete(n)}},gl=new Tt("relatedFiles"),mAt=1e3,mq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},T2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,n,r){let i=await this.getRelatedFilesResponse(e,n,r);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{gl.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){gl.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){gl.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){gl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(po).readFileString(e)}catch(n){gl.debug(this.context,n)}}async isContentExcluded(e,n){try{return(await this.context.get(Ol).evaluate(e,n)).isBlocked}catch(r){gl.exception(this.context,r,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},hAt=3,Dke=new _oe(mAt);async function Pke(t,e,n,r,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,n,r)}catch(c){gl.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(Dke.bumpRetryCount(e.uri)>=hAt?a=pq:a=void 0);let l=performance.now()-o;if(gl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new mq;return a}s(Pke,"getRelatedFiles");var Soe=woe(Pke,{cache:Dke,hash:s((t,e,n,r,i)=>`${e.uri}`,"hash")});Soe=kke(Soe,200,pq);async function hq(t,e,n,r,i,o=!1){let a=t.get(T2),l=pq;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await Pke(t,c,n,r,a):await Soe(t,c,n,r,a)}catch(c){l=pq,c instanceof mq&&Bt(t,"getRelatedFilesList",n)}return gl.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(hq,"getRelatedFilesAndTraits");function fq(t,e){return T8(t)===T8(e)}s(fq,"considerNeighborFile");var I2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,n,r,i,o,a,l){let c=e.get(Tn);t.instance===void 0&&(t.instance=new dq(c));let u={...await t.instance.getNeighborFiles(n,r,t.MAX_NEIGHBOR_FILES),traits:[]};if(gAt(e,i))return u;let d=await c.getTextDocument({uri:n});if(!d)return gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${n}`),u;let p=c.getWorkspaceFolder(d);if(!p)return gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${n} is not under the workspace folder`),u;let m=await hq(e,d,i,o,a,l);return m.entries.size===0?(gl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${n}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,n){let r=n.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(r)?e.toString().slice(r.length):t.basename(e)}};function gAt(t,e){return t.get(Rt).excludeRelatedFiles(e)||ui(t,wt.ExcludeRelatedFiles)}s(gAt,"isExcludeRelatedFilesActive");function Nke(t,e){return t.get(Rt).includeNeighboringFiles(e)||ui(t,wt.IncludeNeighboringFiles)}s(Nke,"isIncludeNeighborFilesActive");var gq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState([]);e.useData(bd,async c=>{c.document.uri!==n?.uri&&o([]),r(c.document);let u=I2.defaultEmptyResult();c.turnOffSimilarFiles||(u=await I2.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data));let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=Aq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...MRe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||HU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(Tn).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await URe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),Pn(Pm,{children:[...i.map((c,u)=>Pn(AAt,{snippet:c}))]})},"SimilarFiles"),AAt=s((t,e)=>Pn(xv,{children:[Pn(ca,{children:t.snippet.headline}),Pn(ca,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var yq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(bd,a=>{a.traits!==n&&r(a.traits);let l=T8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!n||n.length===0||!i))return Pn(Pm,{children:[Pn(ca,{children:`Consider this related information:
`}),...n.map(a=>Pn(ca,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function Lke(t,e){return ui(t,wt.UseSplitContextPrompt)??t.get(Rt).enablePromptContextProxyField(e)}s(Lke,"shouldUseSplitContextPrompt");function Fke(t){return Pn(Pm,{children:[Pn(toe,{children:[Pn(YU,{ctx:t,weight:.7}),Pn(yq,{weight:.6}),Pn(jU,{ctx:t,weight:.9}),Pn(gq,{ctx:t,weight:.8})]}),Pn(KRe,{weight:1}),Pn(noe,{children:Pn(uq,{ctx:t,weight:.99})}),Pn(YRe,{weight:1})]})}s(Fke,"splitContextCompletionsPrompt");f();var Mke=0;function yAt(){Mke=0}s(yAt,"resetContextIndex");function CAt(){return Mke++}s(CAt,"getNextContextIndex");var Cq=class extends L5{constructor(){super(...arguments);this.formatPrefix=XRe;this.formatContext=ZRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(n,r){let i=[],o=[],a=[],l=!1;if(yAt(),new P5(n,xAt).walkSnapshot((d,p,m)=>{if(d===n||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===g2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:TD(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let y=g==="prefix",v=y||d.value.endsWith(r)?d.value:d.value+r;i.push({type:y?"prefix":"context",value:TD(v),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,index:y?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${g2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},xAt=[...aoe,(t,e,n)=>VU(t)?{...n,index:CAt()}:n];f();function Qke(t,e,n){let r=PU(n,"Trait");for(let o of r)vAt(t,e,o.data,o.providerId);return r.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(Qke,"getTraitsFromContextItems");function vAt(t,e,n,r){let i=t.get(Ul).getStatisticsForCompletion(e);n.forEach(o=>{i.addExpectations(r,[[o,"included"]])})}s(vAt,"setupExpectationsForTraits");var bAt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function Oke(t,e,n,r,i,o){if(n.length>0){let a={};a.detectedLanguageId=r,a.languageId=i;for(let c of n){let u=bAt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return Bt(e,t,l)}}s(Oke,"ReportTraitsTelemetry");f();f();f();var xq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let n=this.currentIndex;if(this.states[n]===void 0){let i=typeof e=="function"?e():e;this.states[n]=i}let r=s(i=>{let o=typeof i=="function"?i(this.states[n]):i;this.states[n]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[n],r]}hasChanged(){return this.stateChanged}},vq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,n){this.consumers.push(r=>{if(e(r))return n(r)})}async updateData(e){if(this.consumers.length>0){let n=performance.now();for(let r of this.consumers)await r(e);this.measureUpdateTime(performance.now()-n)}}};var bq=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,n,r,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,n,r);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,n,r){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${n}[${r}]`,props:{value:e},component:e};if(EAt(e.type)){let i=e.type(e.props.children),o=n!=="$"?`[${r}]`:"",a=`${n}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(n,r,e,e.type)}}virtualizeFunctionComponent(e,n,r,i){let o=r.props.key?`["${r.props.key}"]`:`[${n}]`,a=`${e}${o}.${i.name}`,l=new koe(this.getOrCreateLifecycleData(a)),c=i(r.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:r.props,children:p,component:r,lifecycle:l}}ensureUniqueKeys(e){let n=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&n.set(o,(n.get(o)||0)+1)}let r=Array.from(n.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(r.length>0)throw new Error(`Duplicate keys found: ${r.join(", ")}`)}collectChildPaths(e){let n=[];if(e?.children)for(let r of e.children)r&&(n.push(r.path),n.push(...this.collectChildPaths(r)));return n}cleanupState(e,n){for(let r of e)n.includes(r)||this.lifecycleData.delete(r)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new Roe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,n){if(!n)throw new Error("Can't pump data into undefined node.");await n.lifecycle?.dataHook.updateData(e);for(let r of n.children||[])await this.recursivelyPumpData(e,r)}},Roe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},koe=class{constructor(e){this.lifecycleData=e;this.stateHook=new xq(e.state),this.dataHook=new vq(n=>{e._updateTimeMs=n})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,n){this.dataHook.useData(e,n)}isRemountRequired(){return this.stateHook.hasChanged()}};function EAt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(EAt,"isFragmentFunction");var DD=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new bq(e)}snapshotNode(e,n){if(!e)return;if(n?.isCancellationRequested)return"cancelled";let r=[];for(let i of e.children??[]){let o=this.snapshotNode(i,n);if(o==="cancelled")return"cancelled";o!==void 0&&r.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:r,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let n=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!n)throw new Error("Invalid virtual prompt tree");let r=this.snapshotNode(n,e);return r==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:r,status:"ok"}}catch(n){return{snapshot:void 0,status:"error",error:n}}}createPipe(){return this.reconciler.createPipe()}};var Fm=class{static{s(this,"CompletionsPromptFactory")}};function Eq(t,e,n){return new Doe(new Poe(new Noe(t,e,n)))}s(Eq,"createCompletionsPromptFactory");var Doe=class extends Fm{constructor(n){super();this.delegate=n}static{s(this,"SequentialCompletionsPromptFactory")}prompt(n,r){return this.lastPromise=this.promptAsync(n,r),this.lastPromise}async promptAsync(n,r){if(await this.lastPromise,r?.isCancellationRequested)return j5;try{return await this.delegate.prompt(n,r)}catch{return Loe}}},IAt=1200,Poe=class extends Fm{constructor(n){super();this.delegate=n}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(n,r){let i=new sr.CancellationTokenSource,o=i.token;return r?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(n,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(jke)},IAt)})])}};function bd(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(bd,"isCompletionRequestData");var Boe={default:{promptFunction:Uke,renderer:L5},splitContext:{promptFunction:Fke,renderer:Cq}};function Uke(t){return Pn(Pm,{children:[Pn(eoe,{children:[Pn(YU,{ctx:t,weight:.7}),Pn(yq,{weight:.6}),Pn(jU,{ctx:t,weight:.9}),Pn(gq,{ctx:t,weight:.8}),Pn(uq,{ctx:t,weight:.99})]}),Pn(bD,{weight:1})]})}s(Uke,"defaultCompletionsPrompt");var Noe=class extends Fm{constructor(n,r,i){super();this.ctx=n;this.promptOrdering=i??"default",this.virtualPrompt=r??new DD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(n,r){try{return await this.createPromptUnsafe(n,r)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:n,completionState:r,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=Aq(this.ctx,i,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,c,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(n,r,i,a,o);if(await this.updateComponentData(r.textDocument,r.position,h,g,i,y,l,a,o,u,o?.tokenizer),a?.isCancellationRequested)return j5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return j5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},a);if(_.status==="cancelled")return j5;if(_.status==="error")return this.errorPrompt(_.error);let[k,B]=V5(_.prefix),N={..._,prefix:k},U;if($ie(this.ctx,i)){let me=wRe(_.metadata.componentStatistics);this.ctx.get(Ul).getStatisticsForCompletion(n).computeMatch(me),U=SRe(this.ctx,n,v),ar.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(U)}'`)}let re=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,re,m,B,U)}async updateComponentData(n,r,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(n,r,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(n,r,i,o,a={}){let l=[],c,u,d=!1;if($ie(this.ctx,i)){l=await this.ctx.get(Xf).resolution(n);let{textDocument:p}=r,m=l.filter(RRe);TAt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=Qke(this.ctx,n,m),Oke("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await jRe(this.ctx,n,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(n,r,i,o){if(o?.isCancellationRequested)return j5;if((await this.ctx.get(Ol).evaluate(n.uri,n.getText(),"UPDATE")).isBlocked)return Hke;if((i>0?n.getText().length:n.offsetAt(r))<Wke)return Gke}createRequestData(n,r,i,o,a,l,c,u,d,p,m){return{document:n,position:r,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(n){n.prefix.length===0&&n.suffix.length===0&&this.reset()}successPrompt(n,r,i,o,a){return{type:"prompt",prompt:{prefix:n.prefix,prefixTokens:n.prefixTokens,suffix:n.suffix,suffixTokens:n.suffixTokens,context:n.context,isFimEnabled:n.suffix.length>0},computeTimeMs:r-i,trailingWs:o,neighborSource:new Map,metadata:n.metadata,contextProvidersTelemetry:a}}errorPrompt(n){return wa(this.ctx,n,"PromptComponents.CompletionsPromptFactory"),this.reset(),Loe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new DD(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(n){this.promptOrdering!==n&&(this.promptOrdering=n,this.reset())}completionsPrompt(){return(Boe[this.promptOrdering]?.promptFunction??Uke)(this.ctx)}getRenderer(){let n=Boe[this.promptOrdering]??Boe.default;return new n.renderer}};function TAt(t,e,n,r){let i=["cpp","c"];return Nke(t,r)||i.includes(e)||!n.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(TAt,"similarFilesEnabled");async function qke(t){try{await PI}catch(e){Cv(t,e,"initializeTokenizers")}}s(qke,"waitForTokenizers");var Wke=10,Gke={type:"contextTooShort"},Hke={type:"copilotContentExclusion"},Loe={type:"promptError"},j5={type:"promptCancelled"},jke={type:"promptTimeout"};function V5(t){let e=t.split(`
`),n=e[e.length-1],r=n.length-n.trimEnd().length,i=t.slice(0,t.length-r),o=t.slice(i.length);return[n.length==r?i:t,o]}s(V5,"trimLastLine");function $5(t,e,n,r,i,o={}){let l=t.get(Tn).findNotebook(n.textDocument),c=l?.getCellFor(n.textDocument);l&&c&&(n=_At(n,l,c)),r.extendWithConfigProperties(t),r.sanitizeKeys();let u=Lke(t,r);return t.get(Fm).prompt({completionId:e,completionState:n,telemetryData:r,promptOpts:{...o,separateContext:u}},i)}s($5,"extractPrompt");function wAt(t,e){let n=t.document.detectedLanguageId,r=t.document.getText();return n===e?r:N5(r,e)}s(wAt,"addNeighboringCellsToPrompt");function _At(t,e,n){let i=e.getCells().filter(l=>l.index<n.index&&fq(n.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>wAt(l,n.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(_At,"applyEditsForNotebook");function Aq(t,e,n){let i=t.get(Rt).maxPromptCompletionTokens(e)-wU(t),o=GRe(e,n),a=HU(t,e,n),l=t.get(Rt).suffixPercent(e),c=t.get(Rt).suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(c<0||c>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${c}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:l,suffixMatchThreshold:c}}s(Aq,"getPromptOptions");f();f();var Vke=2.98410452738298,$ke=-.838732736843507,zke=1.50314646255716,Yke=-.237798634012662,Iq={python:.314368072478742},Kke={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var SAt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function RAt(t,e){let n=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),r=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(n),o=e.get(r);return o+(i-o)*(t-r)/(n-r)}s(RAt,"linearInterpolation");var z5=class{static{s(this,"Regressor")}constructor(e,n,r){this.name=e,this.coefficient=n,this.transformation=r||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},Foe=class{constructor(e,n,r){this.link=SAt;if(this.intercept=e,this.coefficients=n,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),r)for(let i in r)this.logitsToQuantiles.set(r[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,n){let r=this.intercept;for(let i of this.coefficients){let o=n[i.name];if(o===void 0)return NaN;r+=i.contribution(o)}return this.link.link(r)}quantile(e,n){let r=this.predict(e,n);return RAt(r,this.logitsToQuantiles)}},Jke=new Foe(Vke,[new z5("compCharLen",$ke,t=>Math.log(1+t)),new z5("meanLogProb",zke),new z5("meanAlternativeLogProb",Yke)].concat(Object.entries(Iq).map(t=>new z5(t[0],t[1]))),Kke);function Xke(t,e){let n={...e.measurements};return Object.keys(Iq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),Jke.predict(t,n)}s(Xke,"ghostTextScoreConfidence");function Zke(t,e){let n={...e.measurements};return Object.keys(Iq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),Jke.quantile(t,n)}s(Zke,"ghostTextScoreQuantile");f();f();var kAt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function Tq(t){let e=t.slice();return e.reverse(),e3e(e)||e3e(e.filter(n=>n.trim().length>0))}s(Tq,"isRepetitive");function e3e(t){let e=BAt(t);for(let n of kAt){if(t.length<n.last_tokens_to_consider)continue;if(n.last_tokens_to_consider-1-e[n.last_tokens_to_consider-1]<=n.max_token_sequence_length)return!0}return!1}s(e3e,"isRepeatedPattern");function BAt(t){let e=Array(t.length).fill(0);e[0]=-1;let n=-1;for(let r=1;r<t.length;r++){for(;n>=0&&t[n+1]!==t[r];)n=e[n];t[n+1]===t[r]&&n++,e[r]=n}return e}s(BAt,"kmp_prefix_function");function DAt(t,e,n,r){let i="}";try{i=MTe(e.detectedLanguageId)??"}"}catch{}return PAt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},n,r,i)}s(DAt,"maybeSnipCompletion");function PAt(t,e,n,r){let i=NAt(n),o=i.lines;if(o.length===1)return n;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===r))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return n}s(PAt,"maybeSnipCompletionImpl");function NAt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(NAt,"splitByNewLine");function LAt(t,e,n,r){let i="",o=e.line+1,a=r?n.trim():n;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,r&&(i=i.trim()),i===a)return!0;o++}return!1}s(LAt,"matchesNextLine");function PD(t,e,n,r,i,o){if(Tq(r.tokens)){let l=or.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),Bt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...r};if(LAt(e,n,a.completionText,!i)){let l=or.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),Bt(t,"completion.alreadyInDocument",l),Bt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=DAt(t,e,n,a.completionText),a.completionText?a:void 0}s(PD,"postProcessChoiceInContext");function t3e(t,e,n){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(n.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=n.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(t3e,"checkSuffix");var o3e=qe(Tx());var eo=new Tt("ghostText");var MAt=200,n3e=20;async function s3e(t,e,n,r,i,o,a){eo.debug(t,`Getting ${o} from network`),n=n.extendedBy();let l=e.isCycling?3:1,c=S5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:GTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=ui(t,wt.ModelAlwaysTerminatesSingleline)??t.get(Rt).modelAlwaysTerminatesSingleline(n),m=e.blockMode==="moremultiline"&&Sg.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(n.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(vd).fetchAndStreamCompletions(t,y,n,i,r);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Os(n)}:v.type==="canceled"?(eo.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:Rg(n)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Mc(y))return{type:"canceled",reason:"network request aborted",telemetryData:Rg(n,{cancelledNetworkRequest:!0})};if(eo.exception(t,y,"Error on ghost text request"),t.get(Iu).notifyUser(t,y),H_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Os(n)}}}s(s3e,"genericGetCompletionsFromNetwork");function Moe(t,e,n){if(n||(n=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&n.findIndex(r=>r.completionText.trim()===t.completionText.trim())===-1)return t}s(Moe,"postProcessChoices");async function QAt(t,e,n,r,i){return s3e(t,e,n,r,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return eo.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Os(n)};if(r?.isCancellationRequested)return eo.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:Rg(n)};let d=u.value;if(d===void 0)return eo.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Os(n)};l3e(t,"performance",d,o,a),eo.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=Moe(d,e);p&&(wq(t,e,p),eo.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;eo.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=Moe(g,e,h);y&&(h.push(y),wq(t,e,y))}})();return nm(t)&&await m,p?{type:"success",value:[Qoe(p,{forceSingleLine:!1}),m],telemetryData:Os(n),telemetryBlob:n,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Os(n)}})}s(QAt,"getCompletionsFromNetwork");async function OAt(t,e,n,r,i){return s3e(t,e,n,r,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(r?.isCancellationRequested)return eo.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:Rg(n)};let d=Moe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)wq(t,e,u);l3e(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Os(n),telemetryBlob:n,resultType:3}})}s(OAt,"getAllCompletionsFromNetwork");function Qoe(t,e){let n={...t};if(e.forceSingleLine){let{completionText:r}=n,i=r.match(/^\r?\n/);i?n.completionText=i[0]+r.split(`
`)[1]:n.completionText=r.split(`
`)[0]}return n}s(Qoe,"makeGhostAPIChoice");function r3e(t){return e=>{let n=e?.split(`
`)??[];if(n.length>t+1)return n.slice(0,t+1).join(`
`).length}}s(r3e,"takeNLines");async function UAt(t,e,n,r,i,o,a,l,c){let u=t.get(Rt).multilineAfterAcceptLines(c),d=t.get(Im).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(d){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:r3e(u),stop:[`

`],maxTokens:n3e*u}:{blockMode:"server",requestMultiline:!0,finishedCb:s(p=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let p;try{p=await YAt(t,d,e.textDocument,e.position,o,l,r)}catch{p={requestMultiline:!1}}if(!a&&p.requestMultiline&&t.get(Rt).singleLineUnlessAccepted(c)&&(p.requestMultiline=!1),p.requestMultiline){let m;return r.trailingWs.length>0&&!r.prompt.prefix.endsWith(r.trailingWs)?m=Mo.position(e.position.line,Math.max(e.position.character-r.trailingWs.length,0)):m=e.position,{blockMode:d,requestMultiline:!0,...i3e(t,d,e.textDocument,m,p.blockPosition,n,!0,r.prompt,c)}}if(a){let m={blockMode:"parsing",requestMultiline:!0,finishedCb:r3e(u),stop:[`

`],maxTokens:n3e*u};return d==="moremultiline"&&(m.blockMode="moremultiline"),m}return{blockMode:d,requestMultiline:!1,...i3e(t,d,e.textDocument,e.position,p.blockPosition,n,!1,r.prompt,c)}}}}s(UAt,"getGhostTextStrategy");function i3e(t,e,n,r,i,o,a,l,c){if(a&&e==="moremultiline"&&Sg.isSupported(n.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Rt).longLookaheadSize(c):t.get(Rt).shortLookaheadSize(c);return{finishedCb:new _U(t,o,n.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...l,prefix:l.prefix+p}};wq(t,h,m)}).getFinishedCallback(),maxTokens:MAt}}return{finishedCb:a?xD(t,n,r):u=>{}}}s(i3e,"buildFinishedCallback");var qAt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function WAt(t,e,n){let r=ui(t,wt.CompletionsDebounce)??t.get(Rt).completionsDebounce(n)??e.debounceMs;if(r===void 0)return 0;let i=Qs()-n.issuedTime;return Math.max(0,r-i)}s(WAt,"getRemainingDebounceMs");async function GAt(t,e,n,r,i,o){let a=r.issuedTime,l=[];function c(E){let _=Qs();l.push([E,_-a]),a=_}s(c,"recordPerformance"),c("telemetry");let u=t.get(Rt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Os(r)};let d=jAt(e.textDocument,e.position);if(d===void 0)return eo.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Os(r)};let p=i,m=new sr.CancellationTokenSource;i=m.token;let h=Zx(t,r),g={...qAt,...o,tokenizer:h.tokenizer},y=await $5(t,n,e,r,i,g);if(c("prompt"),y.type==="copilotContentExclusion")return eo.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Os(r)};if(y.type==="contextTooShort")return eo.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Os(r)};if(y.type==="promptError")return eo.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Os(r)};if(g.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y};if(y.type==="promptCancelled")return eo.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Os(r)};if(y.type==="promptTimeout")return eo.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Os(r)};if(y.prompt.prefix.length===0&&y.prompt.suffix.length===0)return eo.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Os(r)};if(i?.isCancellationRequested)return eo.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Os(r)};let v=WAt(t,g,r);return v>0&&(eo.debug(t,`Debouncing ghost text request for ${v}ms`),await _g(v),p?.isCancellationRequested)?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:Os(r)}:t.get(Ji).withProgress(async()=>{let[E]=V5(e.textDocument.getText(Mo.range(Mo.position(0,0),e.position))),_=t.get(Ed).hasAcceptedCurrentCompletion(E,y.prompt.suffix),k=y.prompt,B=await UAt(t,e,E,y,g.isCycling,d,_,g.isSpeculative,r);if(c("strategy"),i?.isCancellationRequested)return eo.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Os(r)};let N=HAt(t,E,k,B.requestMultiline);c("cache");let U=ev(t,e.textDocument.uri),re={blockMode:B.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:U,engineModelId:h.modelId,ourRequestId:n,prefix:E,prompt:y.prompt,multiline:B.requestMultiline,indentation:UU(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,stop:B.stop,maxTokens:B.maxTokens,afterAccept:_};re.headers={...re.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let me=e1t(t,e.textDocument,re,e.position,y,r,h,g);if(N===void 0&&!g.isCycling&&t.get(xd).shouldWaitForAsyncCompletions(E,y.prompt)){let K=await t.get(xd).getFirstMatchingRequestWithTimeout(n,E,y.prompt,g.isSpeculative,me);if(c("asyncWait"),K){let le=!B.requestMultiline;N=[[Qoe(K[0],{forceSingleLine:le})],4]}if(p?.isCancellationRequested)return eo.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Os(me)}}let ae=B.blockMode==="moremultiline"&&Sg.isSupported(e.textDocument.detectedLanguageId);if(N!==void 0&&(N[0]=N[0].map(K=>PD(t,e.textDocument,e.position,K,ae,eo)).filter(K=>K!==void 0)),N!==void 0&&N[0].length===0)return eo.debug(t,`Found empty inline suggestions locally via ${R5(N[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Os(me)};if(N!==void 0&&N[0].length>0&&(!g.isCycling||N[0].length>1))eo.debug(t,`Found inline suggestions locally via ${R5(N[1])}`);else{if(g.isCycling){let K=await OAt(t,re,me,i,B.finishedCb);if(K.type==="success"){let le=N?.[0]??[];K.value[0].forEach(te=>{le.findIndex(pe=>pe.completionText.trim()===te.completionText.trim())===-1&&le.push(te)}),N=[le,3]}else if(N===void 0)return K}else{if(i?.isCancellationRequested)return eo.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:Rg(me)};let le=QAt(t,re,me,i,s((pe,he)=>(t.get(xd).updateCompletion(n,pe),B.finishedCb(pe,he)),"finishedCb"));t.get(xd).queueCompletionRequest(n,E,y.prompt,m,le);let te=await t.get(xd).getFirstMatchingRequest(n,E,y.prompt,g.isSpeculative);if(te===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Os(me)};N=[[te[0]],4]}c("network")}if(N===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Os(me)};let[H,G]=N,ue=H.map(K=>PD(t,e.textDocument,e.position,K,ae,eo)).filter(K=>K!==void 0),ie=ui(t,wt.CompletionsDelay)??u.completionsDelay(r),$=Qs()-r.issuedTime,O=Math.max(ie-$,0);if(G!==2&&!g.isCycling&&O>0&&(eo.debug(t,`Waiting ${O}ms before returning completion`),await _g(O),p?.isCancellationRequested))return eo.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:Rg(me)};let Y=[];for(let K of ue){let le=ZAt(t,e.textDocument,re,K,me),te=d?t3e(e.textDocument,e.position,K):0,he={completion:KAt(K.choiceIndex,K.completionText,y.trailingWs),telemetry:le,isMiddleOfTheLine:d,suffixCoverage:te,copilotAnnotations:K.copilotAnnotations,clientCompletionId:K.clientCompletionId};Y.push(he)}return p?.isCancellationRequested?(eo.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:Rg(me)}):(me.properties.clientCompletionId=Y[0]?.clientCompletionId,me.measurements.foundOffset=Y?.[0]?.telemetry?.measurements?.foundOffset??-1,eo.debug(t,`Produced ${Y.length} results from ${R5(G)} at ${me.measurements.foundOffset} offset`),n!==t.get(Ed).currentRequestId?(eo.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:Rg(me)}):(g.isSpeculative||t.get(Ed).setGhostText(E,y.prompt.suffix,ue,G),c("complete"),{type:"success",value:[Y,G],telemetryData:Os(me),telemetryBlob:me,resultType:G,performanceMetrics:l}))})}s(GAt,"getGhostTextWithoutAbortHandling");async function Ooe(t,e,n,r){let i=an();t.get(Ed).currentRequestId=i;let o=await XAt(t,e.textDocument,i,r);await PI.catch(()=>{});try{return t.get(Xf).schedule(e,i,o,n,r),t.get(wg).notifyRequest(e,i,o,n,r),await GAt(t,e,i,o,n,r)}catch(a){if(Mc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:Rg(o,{cancelledNetworkRequest:!0})};throw a}}s(Ooe,"getGhostText");function HAt(t,e,n,r){let i=t.get(Ed).getCompletionsForUserTyping(e,n.suffix),o=JAt(t,e,n.suffix,r);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(HAt,"getLocalInlineSuggestion");function jAt(t,e){let n=VAt(e,t),r=$At(e,t);return n&&!r?void 0:n&&r}s(jAt,"isInlineSuggestion");function VAt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(VAt,"isMiddleOfTheLine");function $At(t,e){let r=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(r)}s($At,"isValidMiddleOfTheLinePosition");function zAt(t,e){return e.lineAt(t).text.trim().length===0}s(zAt,"isNewLine");var X1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function YAt(t,e,n,r,i,o,a){if(t.get(X1).requestMultilineOverride)return{requestMultiline:!0};if(n.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",or.createAndMarkAsIssued({languageId:n.detectedLanguageId,lineCount:String(n.lineCount),currentLine:String(r.line)}));else{if(e=="moremultiline"&&Sg.isSupported(n.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await O4e(n,r)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(n.detectedLanguageId)&&zAt(r,n))return{requestMultiline:!0};let c=!1;return!i&&g0(n.detectedLanguageId)?c=await OU(n,r):i&&g0(n.detectedLanguageId)&&(c=await OU(n,r)||await OU(n,n.lineAt(r).range.end)),c||["javascript","javascriptreact","python"].includes(n.detectedLanguageId)&&(c=G4e(a.prompt,n.detectedLanguageId)>.5),{requestMultiline:c}}return{requestMultiline:!1}}s(YAt,"shouldRequestMultiline");function wq(t,e,n){t.get(Dm).append(e.prefix,e.prompt.suffix,n)}s(wq,"appendToCache");function KAt(t,e,n){if(n.length>0){if(e.startsWith(n))return{completionIndex:t,completionText:e,displayText:e.substring(n.length),displayNeedsWsOffset:!1};{let r=e.substring(0,e.length-e.trimStart().length);return n.startsWith(r)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(KAt,"adjustLeadingWhitespace");function JAt(t,e,n,r){let i=t.get(Dm).findAll(e,n);return i.length===0?(eo.debug(t,"Found no completions in cache"),[]):(eo.debug(t,`Found ${i.length} completions in cache`),i.map(o=>Qoe(o,{forceSingleLine:!r})))}s(JAt,"getCompletionsFromCache");async function XAt(t,e,n,r){let i={headerRequestId:n};r?.opportunityId&&(i.opportunityId=r.opportunityId),r?.selectedCompletionInfo?.text&&(i.completionsActive="true"),r?.isSpeculative&&(i.reason="speculative");let o=or.createAndMarkAsIssued(i);return await t.get(Rt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(XAt,"createTelemetryWithExp");function ZAt(t,e,n,r,i){let o=r.requestId,a={choiceIndex:r.choiceIndex.toString(),clientCompletionId:r.clientCompletionId};r.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(r.generatedChoiceIndex+1)+r.choiceIndex).toString());let l={compCharLen:r.completionText.length,numLines:r.completionText.trim().split(`
`).length};r.meanLogProb&&(l.meanLogProb=r.meanLogProb),r.meanAlternativeLogProb&&(l.meanAlternativeLogProb=r.meanAlternativeLogProb);let c=r.telemetryData.extendedBy(a,l);return c.issuedTime=i.issuedTime,c.measurements.timeToProduceMs=performance.now()-i.issuedTime,a3e(c,e),c.extendWithRequestId(o),c.measurements.confidence=Xke(t,c),c.measurements.quantile=Zke(t,c),eo.debug(t,`Extended telemetry for ${r.telemetryData.properties.headerRequestId} with retention confidence ${c.measurements.confidence} (expected as good or better than about ${c.measurements.quantile} of all suggestions)`),c}s(ZAt,"telemetryWithAddData");function e1t(t,e,n,r,i,o,a,l){let c={languageId:e.detectedLanguageId};c.afterAccept=n.afterAccept.toString(),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);a3e(u,e);let d=n.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(n.multiline),u.properties.isCycling=JSON.stringify(n.isCycling);let p=e.lineAt(r.line),m=e.getText(Mo.range(p.range.start,r)),h=e.getText(Mo.range(r,p.range.end)),g=Array.from(i.neighborSource.entries()).map(E=>[E[0],E[1].map(_=>(0,o3e.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:n.blockMode},v={...OS(i.prompt),promptEndPos:e.offsetAt(r),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=u.extendedBy(y,v);return Bt(t,"ghostText.issued",b),u}s(e1t,"telemetryIssued");function a3e(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(a3e,"addDocumentTelemetry");function l3e(t,e,n,r,i){let o=Date.now()-r,a=o-i,l=n.telemetryData.extendedBy({},{completionCharLen:n.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:n.meanLogProb||NaN,meanAlternativeLogProb:n.meanAlternativeLogProb||NaN});l.extendWithRequestId(n.requestId),Bt(t,`ghostText.${e}`,l)}s(l3e,"telemetryPerformance");var Ed=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,n,r,i){i!==2&&(this.prefix=e,this.suffix=n,this.choices=r)}getCompletionsForUserTyping(e,n){let r=this.getRemainingPrefix(e,n);if(r!==void 0&&c3e(this.choices[0].completionText,r))return t1t(this.choices,r)}hasAcceptedCurrentCompletion(e,n){let r=this.getRemainingPrefix(e,n);if(r===void 0)return!1;let i=r===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,n){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===n&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function t1t(t,e){return t.filter(n=>c3e(n.completionText,e)).map(n=>({...n,completionText:n.completionText.substring(e.length)}))}s(t1t,"adjustChoicesStart");function c3e(t,e){return t.startsWith(e)&&t.length>e.length}s(c3e,"startsWithAndExceeds");f();f();f();var w2=class{constructor(e,n,r){this._referenceCount=0;this._isDisposed=!1;this._offset=r;let i=e.get(Tn);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===n){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,n){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},n)}};f();var Uoe=class t{constructor(e,n,r=[],i,o,a){this._textDocument=e;this._position=n;this.originalPosition=i??sr.Position.create(n.line,n.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...r]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,n,r){return new t(e,n,r??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(r=>r.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let n={range:e.range,newText:e.text};return this.applyEdits([n],!0)}applyEdits(e,n=!1){if(n&&e.length>1)throw new Error("Selected completion info should be a single edit");let r=this._textDocument,i=this._position,o=r.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=r.getText(l),d=r.offsetAt(l.end);if(r=r.applyEdits([{range:l,newText:c}]),o<r.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:sr.Position.create(i.line,i.character)};n&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=r.positionAt(o);let p={range:l,newText:c,positionAfterEdit:sr.Position.create(i.line,i.character)};n&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(r,i,a)}};function Lg(t,e){return new Uoe(t,e)}s(Lg,"createCompletionState");f();function qoe(t,e,n=(r,i)=>r===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let r=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?r[u]=1:r[u]=n(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=r,r=d,d=a,a=i,i=d,l=e[u],r[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+r[p-1],g=n(t[p-1],l,p-1,u)+o[p-1];r[p]=Math.min(h,m,g),r[p]===g?i[p]=a[p-1]:r[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)r[u]<r[c]&&(c=u);return{distance:r[c],startOffset:i[c],endOffset:c}}s(qoe,"editDistance");function n1t(){return new Map}s(n1t,"emptyLexDictionary");function r1t(t){let e=new Array(t.size);for(let[n,r]of t)e[r]=n;return e}s(r1t,"reverseLexDictionary");function*i1t(t){let e="",n;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(n||={});let r=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===r&&o!==2?e+=i:(e.length>0&&(yield e),e=i,r=o)}e.length>0&&(yield e)}s(i1t,"lexGeneratorWords");function u3e(t,e,n,r){let i=[],o=0;for(let a of n(t))r(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(u3e,"lexicalAnalyzer");function d3e(t){return t!==" "}s(d3e,"notSingleSpace");function f3e(t,e,n=i1t){let[r,i]=u3e(t,n1t(),n,d3e),[o,a]=u3e(e,i,n,d3e);if(o.length===0||r.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:r.length,needleLexLength:o.length};let l=r1t(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[r[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=qoe(r.map(y=>y[0]),o.map(y=>y[0]),p),h=r[m.startOffset][1],g=m.endOffset<r.length?r[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:r.length,needleLexLength:o.length}}s(f3e,"lexEditDistance");f();function p3e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(p3e,"computeCompCharLen");function m3e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(m3e,"computeCompletionText");function h3e(t,e,n){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||n===3?e:e-t.range.end.character+t.range.start.character}s(h3e,"computePartialLength");var Iv=new Tt("postInsertion"),g3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],A3e=50,o1t=1500,s1t=.5,a1t=500,Woe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function y3e(t,e,n,r,i){let o=await t.get(Cr).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return Iv.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,r),u=a.positionAt(r),d=await $5(t,n.properties.headerRequestId,Lg(a,u),n),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(r,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(r),h=Yie(c,r,a.detectedLanguageId),y=await FRe(h,void 0)(m),v=Math.min(l.length,r+(y?y*2:a1t)),b=l.substring(r,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(y3e,"captureCode");function _q(t,e,n,r,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{Iv.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),cRe(t,e,u)});let o=new w2(t,r,n-1),a=new w2(t,r,n),l=s(async c=>{Iv.debug(t,`Original offset: ${n}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await y3e(t,r,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:d.prefix,context:d.context}),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:n,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});Iv.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");g3e.filter(c=>c.captureRejection).map(c=>o.push(Vc(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(_q,"postRejectionTasks");function _2(t,e,n,r,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:p3e(a,n)});Iv.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),lRe(t,e,c);let u=n;n=m3e(n,a);let d=n.trim(),p=new w2(t,i,r),m=new w2(t,i,r+n.length),h=s(async g=>{await d1t(t,e,d,r,i,g,c,p,m)},"stillInCodeCheck");if(Woe.triggerPostInsertionSynchroneously&&nm(t)){let g=h({seconds:0,captureCode:Woe.captureCode,captureRejection:Woe.captureRejection});t.get(ba).register(g)}else g3e.map(g=>p.push(Vc(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Vc(t,l1t,"post insertion citation check")(t,i,u,n,r,l)}s(_2,"postInsertionTasks");async function l1t(t,e,n,r,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(Tn).getTextDocument({uri:e});if(a){let l=Goe(a.getText(),r,A3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=c1t(n.length,r.length,l.start_offset);if(c===void 0){Iv.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+u1t(n.length,r.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(E0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(l1t,"citationCheck");function c1t(t,e,n){if(!(e<t&&n>e))return n}s(c1t,"computeCitationStart");function u1t(t,e,n){return e<t?Math.min(n,e):n}s(u1t,"computeCitationEnd");function Goe(t,e,n,r){let i=t.substring(Math.max(0,r-n),Math.min(t.length,r+e.length+n)),o=f3e(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=qoe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,r-n),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=s1t?1:0}}s(Goe,"find");async function d1t(t,e,n,r,i,o,a,l,c){let u=await t.get(Cr).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=Goe(p,n,A3e,l.offset);m.stillInCodeHeuristic||(m=Goe(p,n,o1t,l.offset)),Iv.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${n}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${r}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await y3e(t,i,h,l.offset,c.offset),b={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});Iv.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",E,1)}}}s(d1t,"checkStillInCode");var Hoe=new Tt("ghostText"),Mu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},n){this.#t=e,this.#e=n,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function f1t(t){let e=[];return t.shownCompletions.forEach(n=>{if(n.displayText&&n.telemetry){let r,i;t.partiallyAcceptedLength?(r=n.displayText.substring(t.partiallyAcceptedLength-1),i=n.telemetry.extendedBy({compType:"partial"},{compCharLen:r.length})):(r=n.displayText,i=n.telemetry);let o={completionText:r,completionTelemetryData:i,offset:n.offset};e.push(o)}}),e}s(f1t,"computeRejectedCompletions");function joe(t,e){let n=t.get(Mu);if(!n.position||!n.uri)return;let r=f1t(n);r.length>0&&_q(t,"ghostText",e??r[0].offset,n.uri,r),n.resetState(),n.resetPartialAcceptanceState()}s(joe,"rejectLastShown");function C3e(t,e,n,r){let i=t.get(Mu);return i.position&&i.uri&&!(i.position.line===n.line&&i.position.character===n.character&&i.uri.toString()===e.uri.toString())&&r!==2&&joe(t,e.offsetAt(i.position)),i.setState(e,n),i.index}s(C3e,"setLastShown");function x3e(t,e){let n=t.get(Mu);if(n.index=e.index,!n.shownCompletions.find(r=>r.index===e.index)&&(e.uri===n.uri&&n.position?.line===e.position.line&&n.position?.character==e.position.character&&n.shownCompletions.push(e),e.displayText)){let r=e.resultType!==0;Hoe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${r}`),e.telemetry.measurements.compCharLen=e.displayText.length,RU(t,"ghostText",e)}}s(x3e,"handleGhostTextShown");function Sq(t,e){let n=t.get(Mu);n.resetState(),Hoe.debug(t,"Ghost text post insert");let r={compType:"full"};return n.resetPartialAcceptanceState(),_2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,r,e.copilotAnnotations)}s(Sq,"handleGhostTextPostInsert");function v3e(t,e,n,r=0){let i=t.get(Mu);Hoe.debug(t,"Ghost text partial post insert");let o=h3e(e,n,r);if(o)return i.partiallyAcceptedLength=n,_2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(v3e,"handlePartialGhostTextPostInsert");f();f();f();f();f();var Y5="[...]",p1t=0,Tv=-1;function Fg(){return p1t++}s(Fg,"getAvailableNodeId");function m1t(t,e){let n=t.children.map(r=>r.elisionMarker??e);return[...t.text.entries()].map(([r,i])=>r===0?i:n[r-1]+i).join("")}s(m1t,"elideChildren");function b3e(t=Y5){return e=>m1t(e,t).length-(e.elisionMarker??t).length}s(b3e,"getBasicCostFunction");f();var K5=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let n=Math.floor(this.heap.length/2)-1;n>=0;n--)this.siftDown(n)}get size(){return this.heap.length}insert(e,n){let r={item:e,priority:n};this.heap.push(r);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],n=this.heap.pop();return this.heap.length>0&&(this.heap[0]=n,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let n=this.heap[e];for(;e>0;){let r=Math.floor((e-1)/2);if(this.heap[r].priority>=n.priority)break;this.heap[e]=this.heap[r],e=r}this.heap[e]=n}siftDown(e){let n=this.heap[e],r=this.heap.length-1;for(;e<r;){let i=e,o=2*e+1,a=o+1;if(o<=r&&this.heap[o].priority>this.heap[i].priority&&(i=o),a<=r&&this.heap[a].priority>this.heap[i].priority&&(i=a),i===e)break;this.heap[e]=this.heap[i],e=i}this.heap[e]=n}};var ND=class{constructor(e,n,r,i,o=0,a=!1,l=Y5){this.id=e;this.text=n;this.children=r;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=l;this.requireRenderedChild=!1;if(n.length!==r.length+1)throw new Error(`Text fragments length (${n.length}) must be equal to children length (${r.length}) + 1`);this.cost=Math.max(i,1),this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/this.cost}render(e=void 0,n=[],r){let i=new Set(Array.isArray(n)?n:[n]);if((e??this.cost)<this.cost||i.has(this.id))return this.elisionMarker;if(e===void 0){let d=s(m=>i.has(m.id),"elider"),p=[];return this.recursivelyRender(p,d),p.join("")}let o=new Set,a=[],l=[],c=new K5([{item:this,priority:this.value}]),u=e;for(;u>0&&c.size>0;){let{item:d}=c.pop();if(!i.has(d.id)&&d.cost<=u){u-=d.cost,o.add(d.id),a.push(d);for(let p of d.children)c.insert(p,p.value);d.requireRenderedChild&&l.push(d)}}for(let d=l.length-1;d>=0;d--){let p=l[d];p.children.some(m=>o.has(m.id))||o.delete(p.id)}for(;o.size>0;){let d=[],p=s(g=>!o.has(g.id),"elider");this.recursivelyRender(d,p);let m=d.join("");if(r===void 0)return m;let h=r(m);if(h<=e)return m;for(;a.length>0&&h>e;){let g=a.pop();h-=g.cost,o.delete(g.id)}if(a.length===0)return this.elisionMarker}return this.elisionMarker}updateWeights(e){let n=this.recursivelyRectifyWeights(e);for(let{item:r,priority:i}of n.clear())for(let o of r.nodes)o.weight=i*o.cost}recursivelyRender(e,n,r=!1){if(n(this))return e.length>=2&&(r||e[e.length-2]===this.elisionMarker&&e[e.length-1].trim().length===0)?(e.pop(),!0):(e.push(this.elisionMarker),!0);let i=!1;for(let[o,a]of this.children.entries())e.push(this.text[o]??""),i=a.recursivelyRender(e,n,a.canMerge&&i);return e.push(this.text[this.text.length-1]??""),!1}recursivelyRectifyWeights(e){let n=this.children.map(a=>a.recursivelyRectifyWeights(e)),r=Math.max(0,e?e(this):this.weight);if(r===0&&n.reduce((a,l)=>a+l.size,0)===0)return this.weight=0,new K5([]);let i=new K5(n.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:r};for(this.requireRenderedChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.requireRenderedChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function Voe(t,e,n=Y5,r){if(r?.has(t.id))return r.get(t.id);let i=t.children.map(l=>Voe(l,e,n));n=t.elisionMarker??n;let o=e(t),a=new ND(t.id,t.text,i,o,0,t.canMerge,n);return r?.set(a.id,a),a}s(Voe,"snapshot");f();f();var h1t={RelatedFilesShim:.2,FileDirectoryDocumentProvider:.05,SymbolContextProvider:.2,TreeProximityProvider:1,ExtensionReferenceProvider:.8,RecentDocumentProvider:.1,RecentCompletionsRequestProvider:1.5,ExtensionActivityProvider:8.5};function J5(){return h1t}s(J5,"getProviderWeights");var g1t={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10/Math.log(2),MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3};function X5(){return g1t}s(X5,"getFeatureConfig");f();function LD(t,e,n){let r=t.get(e);return r===void 0&&(r=n(e),t.set(e,r)),r}s(LD,"setDefault");function A1t(t){return t.id!==void 0}s(A1t,"isNodeItem");var Rq=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let n=new Map;for(let{uri:r,weight:i}of e)n.set(r,(n.get(r)??0)+i);this.documents=[...n.entries()].map(([r,i])=>({uri:r,weight:i})).sort((r,i)=>i.weight-r.weight),this.docWeights=n,this.nodes=e.filter(({id:r})=>r!==Tv),this.nodeWeights=new Map(e.map(({id:r,weight:i})=>[r,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},kq=class{constructor(e){this.activeContext=e;this.config=X5();this.providerWeights=J5();this.providerContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new Rq([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(){return this.weights}updateWeights(){let e=new Map,n=0,r=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.providerContext.entries()){let l=this.providerWeights[i]??0;if(l<=0||o.length===0)continue;let c=Math.exp(-Math.max(0,(this.prevUpdateTime??a)-a)/r);l*=c,n+=l,this.aggregateWeights(o,e,l,!0)}if(n>0){if(this.weights.nodes.length>0){let i=n*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let l=o.get(Tv);if(l!==void 0&&l>0){o.delete(Tv);let c=a.getAllIds(),u=l/c.length;for(let d of c)o.set(d,(o.get(d)??0)+u)}}this.prevItems=this.truncateAndNormalize(e),this.weights=new Rq(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,n){let r=performance.now(),i=this.addUriAndId(n),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.providerContext.set(e,{items:a,updateTime:r})}addUriAndId(e){return e.filter(n=>n.weight>0).map(n=>{let r=A1t(n)?n.id:Tv,i=n.uri??this.activeContext.getUri(r);return{weight:n.weight,uri:i,id:r}}).filter(n=>n.uri!==void 0)}aggregateWeights(e,n,r=1,i=!1){for(let{uri:o,id:a,weight:l}of e){if(l<=0)continue;let c=LD(n,o,()=>new Map),u=Tv;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),c.set(u,(c.get(u)??0)+l*r)}}truncateAndNormalize(e){let n=[],r=new Map;for(let[c,u]of e.entries()){let d=this.activeContext.normalizeUri(c);if(d!==void 0)for(let[p,m]of u.entries())p===Tv?r.set(d,m):n.push({uri:d,id:p,weight:m})}n.sort((c,u)=>u.weight-c.weight);for(let{uri:c,weight:u}of n.slice(this.config.MaxActiveNodes,n.length))r.set(c,(r.get(c)??0)+u);let i=[...r.entries()].sort((c,u)=>u[1]-c[1]).slice(0,this.config.MaxActiveFiles).map(([c,u])=>({uri:c,id:Tv,weight:u})),o=n.slice(0,this.config.MaxActiveNodes).concat(i).sort((c,u)=>u.weight-c.weight),a=o.reduce((c,u)=>c+u.weight,0);return a<=0?[]:o.map(c=>({...c,weight:c.weight/a}))}};f();f();f();var Bq=class{constructor(e,n,r,i=!1){this.id=e;this.parts=n;this.text=r;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(n=>n.id));for(let n of this.syntaxRoots)yield*I3e(n,e)}findChild(e,n){if(e<this.startOffset||n>this.endOffset||n<e)return;let r=0,i=this.parts.length-1,o;for(;r<=i;){let l=Math.floor((r+i)/2);if(o=this.parts[l],o.root.startOffset<=e&&o.root.endOffset>=n)break;o.root.endOffset<e?r=l+1:i=l-1}if(o===void 0||i<r)return;r=0,i=o.children.length-1;let a;for(;r<=i;){let l=Math.floor((r+i)/2);if(a=o.children[l],a.startOffset<=e&&a.endOffset>=n)break;a.endOffset<e?r=l+1:i=l-1}if(!(a===void 0||i<r))return a}},Dq=class{constructor(e,n,r){this._parsedDocument=e;this.minSize=n;this.updateId=Fg();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(n,1),this.maxSize=Math.max(r??2*this.minSize,this.minSize+1),this._root=this.buildTree([])}static{s(this,"ContextDocument")}get uri(){return this.parsedDocument.document.uri}get version(){return this.updateId}get parsedDocument(){return this._parsedDocument}get document(){return this.parsedDocument.document}get rootId(){return this._root.id}get root(){return this._root}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,n){let r=this.parsedDocument.findNode(e,n);for(;!this.syntaxToAbstract.has(r.id);){if(r.parent===null)return this.root;r=r.parent}let i=this.syntaxToAbstract.get(r.id);if(n===void 0)return i;let o=i;for(;o!==void 0;)i=o,o=i.findChild(e,n);return i}dispose(){this._parsedDocument.dispose()}update(e,n){if(this.uri!==e.document.uri)throw new Error("Can't update ContextDocument using mismatched URI");let r=[],i=[];this.recursivelyRemapNodes(this.root,e,n,r);let o=this._parsedDocument;try{this._parsedDocument=e,this._root=this.buildTree(i)}finally{o.dispose()}return this.updateId=Fg(),{invalidated:r,created:i}}recursivelyRemapNodes(e,n,r,i){let o=!0;for(let u of e.children)o=o&&this.recursivelyRemapNodes(u,n,r,i);if(!o)return this.invalidateNode(e,i),!1;let a=[];for(let{root:u,children:d}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e,i),!1;a.push({root:p,children:d})}let l=E3e(a,n.document);for(let[u,d]of l.entries())if(e.text[u]!==d)return this.invalidateNode(e,i),!1;let c=new Bq(e.id,a,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of c.parts)this.syntaxToAbstract.set(u.id,c);return this.nodeById.set(e.id,c),!0}invalidateNode(e,n){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id),n.push(e.id)}createNode(e,n,r=!1){e.sort((a,l)=>a.root.startOffset-l.root.startOffset);let i=E3e(e,this.document),o=new Bq(Fg(),e,i,r);for(let{root:a}of e)this.syntaxToAbstract.set(a.id,o);return this.nodeById.set(o.id,o),n.push(o.id),o}isValidRoot(e){return e.length===1&&e[0].root.id===this.parsedDocument.root.id}buildTree(e){let n=this.parsedDocument.root,r=this.buildRecursively(n,e);return r.length===1&&this.isValidRoot(r[0].parts)?r[0]:this.createNode([{root:n,children:r}],e)}buildRecursively(e,n){if(this.syntaxToAbstract.has(e.id)){let l=this.syntaxToAbstract.get(e.id);return l.parts[0].root.id===e.id?[l]:[]}let r=e.endOffset-e.startOffset;if(r<this.minSize)return[];let i=e.children.map(l=>({root:l,children:this.buildRecursively(l,n)})),o=i.flatMap(l=>l.children),a=o.reduce((l,c)=>l+(c.endOffset-c.startOffset),0);return e.canMergeChildren&&(o=this.mergeChildren(i,n),a=o.reduce((l,c)=>l+(c.endOffset-c.startOffset),0)),e.canBeNode&&r-a>=this.minSize?[this.createNode([{root:e,children:o}],n)]:o}mergeChildren(e,n){if(e.length===0)return[];e.sort((h,g)=>h.root.startOffset-g.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,i=[];for(let h of e){let g=h.root.endOffset-h.root.startOffset;for(let y of h.children){let v=y.endOffset-y.startOffset;g-=v,r-=v}i.push(g)}if(r<this.minSize)return e.flatMap(h=>h.children);let o=[0],a=0,l=null,c={line:-1,size:-1},u=e[0].root.startOffset,d=e[0].root.range.start.line;for(let h=0;h<e.length;h++){let g=e[h];if(a+=i[h]+g.root.startOffset-u,a>this.minSize&&a<this.maxSize){let y={line:g.root.range.start.line-d,size:g.root.startOffset-u};(y.line>c.line||y.line==c.line&&y.size>c.size)&&(c=y,l=h)}u=g.root.endOffset,d=g.root.range.end.line,a>=this.maxSize&&(l=l??h,o.push(l+1),h=l,a=0,l=null,c={line:-1,size:-1},u=e[h+1]?.root.startOffset,d=e[h+1]?.root.range.start.line)}o.length==1?o.push(e.length):o[o.length-1]!==e.length&&(o[o.length-1]=e.length);let p=[],m=!1;for(let h=0;h<o.length-1;h++){let g=e.slice(o[h],o[h+1]);p.push(this.createNode(g,n,m)),m=!0}return p}};function E3e(t,e){if(t.length===0)return[""];let n=[],r=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,l)=>a.startOffset-l.startOffset)){let a=e.positionAt(o.startOffset);n.push(e.getText({start:r,end:a})),r=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return n.push(e.getText({start:r,end:i})),n}s(E3e,"buildText");function*I3e(t,e){yield t;for(let n of t.children)e.has(n.id)||(yield*I3e(n,e))}s(I3e,"walk");f();f();f();function T3e(t){return t.search(/^[a-zA-Z_]{3,}\w*$/)>=0}s(T3e,"isSymbol");var Pq=class{constructor(e,n,r,i,o,a){this.id=e;this.raw=n;this.children=r;this.parent=null;let l={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},c=a.getText(l),u=c.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.text="",this.range={start:m,end:m};return}let d=c.search(/\S(?!.*\S)/s),p=a.offsetAt(l.start);this.startOffset=p+u,this.endOffset=p+d+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)},this.text=a.getText(this.range)}static{s(this,"IndentationNode")}get type(){return this.raw.type}get isLeaf(){return this.children.length===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return!1}get isText(){return!0}findNode(e,n){let r=0,i=this.children.length-1,o;for(;r<=i;){let a=Math.floor((r+i)/2);if(o=this.children[a],o.startOffset<=e&&o.endOffset>=n)break;o.endOffset<e?r=a+1:i=a-1}return o===void 0||i<r?this:o.findNode(e,n)}},$oe=class{constructor(e,n){this.document=e;this.root=n}static{s(this,"IndentationParsedDocument")}findNode(e,n){return this.root.findNode(e,n??e)}dispose(){}};function zoe(t,e,n){let r=t.subs.map(c=>({subtree:c,node:zoe(c,e,n)})).filter(c=>c.node!==null).sort((c,u)=>c.node.startOffset-u.node.startOffset),i=[],o=e;for(let c=r.length-1;c>=0;c--){let{subtree:u,node:d}=r[c];if(d.range.end.line>=o){let p=zoe(u,o,n);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(d),o=Math.min(d.range.start.line,o)}i.sort((c,u)=>c.startOffset-u.startOffset);let a=e,l=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),l=Math.max(l,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),l=Math.max(l,t.lineNumber),t.type==="blank"&&a===l))return null;if(l=Math.min(l,e-1),a<=l){let c=new Pq(Fg(),t,i,a,l,n);for(let u of i)u.parent=c;return c}return null}s(zoe,"recursivelyBuildNode");function w3e(t){let e=HI(t.getText(),t.detectedLanguageId),n=zoe(e,t.lineCount,t)??new Pq(Fg(),e,[],0,t.lineCount-1,t);return new $oe(t,n)}s(w3e,"parse");function y1t(t,e){return{document:w3e(e),remapper:s(()=>{},"remapper")}}s(y1t,"update");var _3e={parse:w3e,update:y1t,dispose:s(function(){},"dispose")};f();f();var R3e=qe(oQ());function S3e(t){return{line:t.row,character:t.column}}s(S3e,"asPosition");var tp=class t{constructor(e){this.node=e}static{s(this,"TreeSitterNode")}get raw(){return this.node}get id(){return this.node.id}get type(){return this.node.type}get text(){return this.node.text}get startOffset(){return this.node.startIndex}get endOffset(){return this.node.endIndex}get range(){return{start:S3e(this.node.startPosition),end:S3e(this.node.endPosition)}}get parent(){let e=this.node.parent;return e!==null?this.createNode(e):null}get children(){return this.node.namedChildren.map(e=>this.createNode(e))}get isLeaf(){return this.node.namedChildCount===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return this.isLeaf&&T3e(this.text)}get isText(){return this.isLeaf&&this.text.search(/\s/)>=0}createNode(e){return new t(e)}},FD=class{constructor(e,n,r){this.textDocument=e;this.syntaxTree=n;this.nodeFactory=r}static{s(this,"TreeSitterDocument")}get document(){return this.textDocument}get root(){return this.nodeFactory(this.syntaxTree.rootNode)}findNode(e,n){let r=n===void 0?this.syntaxTree.rootNode.namedDescendantForIndex(e):this.syntaxTree.rootNode.namedDescendantForIndex(e,n);return this.nodeFactory(r)}dispose(){this.syntaxTree.delete()}},wv=class{constructor(e,n){this.language=e;this.nodeFactory=n;this.parser=new R3e.default;this.parser.setLanguage(e)}static{s(this,"TreeSitterParser")}parse(e){let n=this.parser.parse(e.getText());return new FD(e,n,this.nodeFactory)}update(e,n){if(!(e instanceof FD))throw new Error("Can only update documents created from this parser");let r=this.parser.parse(n.getText());return{document:new FD(n,r,this.nodeFactory),remapper:s(()=>{},"remapper")}}dispose(){this.parser.delete()}};var C1t=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),x1t=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),Nq=class t extends tp{static{s(this,"CPPNode")}get canBeNode(){return C1t.has(this.type)}get canMergeChildren(){return x1t.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};f();var v1t=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),b1t=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),Lq=class t extends tp{static{s(this,"JavaNode")}get canBeNode(){return v1t.has(this.type)}get canMergeChildren(){return b1t.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string_literal"||this.type==="line_comment"||this.type==="block_comment"}createNode(e){return new t(e)}};f();var E1t=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),I1t=new Set(["module","block","parameters","dictionary","list"]),Fq=class t extends tp{static{s(this,"PythonNode")}get canBeNode(){return E1t.has(this.type)}get canMergeChildren(){return I1t.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};f();var T1t=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),w1t=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),Mq=class t extends tp{static{s(this,"TypeScriptNode")}get canBeNode(){return T1t.has(this.type)}get canMergeChildren(){return w1t.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};var k3e=qe(oQ());async function B3e(t){await k3e.default.init();try{let e=await lne(t);switch(t){case"python":return new wv(e,n=>new Fq(n));case"typescript":return new wv(e,n=>new Mq(n));case"java":return new wv(e,n=>new Lq(n));case"cpp":return new wv(e,n=>new Nq(n));default:return new wv(e,n=>new tp(n))}}catch{return _3e}}s(B3e,"getParser");f();var Koe=class{constructor(e,n){this.created=e;this.invalidated=n;this.updatedDocuments=Array.from(new Set([...e.entries(),...n.entries()].filter(([r,i])=>i.size>0).map(([r,i])=>r)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,n){return n===void 0?Array.from(e.entries()).flatMap(([r,i])=>[...i].map(o=>({uri:r,id:o}))):Array.from(e.get(n)??[]).map(r=>({uri:n,id:r}))}},Qq=class{constructor(e,n){this.item=e;this.disposalCallback=n}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},Oq=class{constructor(e){this.ctx=e;this.config=X5();this.providerWeights=J5();this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.cachedDocuments=new HL;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Ln(5e3);this.invalidDocumentCache=new lI(this.config.MaxActiveNodes,this.config.InvalidCacheTime)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(Tn).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let n=this.nodeToDoc.get(e);if(n===void 0)return;let r=this.getDocument(n);if(r===void 0)return;let i=r.document.getNode(e);if(i!==void 0)return{...r,node:i}}getDocument(e){let n=this.activeDocuments.get(e);if(n!==void 0)return{document:n,isActive:!0};let r=this.cachedDocuments.get(e);if(r!==void 0)return{document:r.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){if(this.uriCache.has(e))return this.uriCache.get(e)??void 0;let n=ml(e);if(!QI.includes(d2e(n)))return;let i=this.ctx.get(Tn).getWorkspaceFolder({uri:n})!==void 0?n:null;return this.uriCache.set(e,i),i??void 0}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.activeDocuments.values())e.dispose();this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let n of e){let r=this.normalizeUri(n);r!==void 0&&(this.targetSet.add(r),this.updateDocument(r))}for(let n of[...this.activeDocuments.keys()])this.targetSet.has(n)||this.deactivateDocument(n)}}popChanges(){let e=new Koe(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let n=this.pendingUpdates.get(e);n!==void 0&&await n}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let n=this.activeDocuments.get(e);n!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new Qq(n,r=>this.disposeDocument(r))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let n=new Du;this.pendingUpdates.set(e,n.promise);let r;this.activeDocuments.has(e)?r=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(r=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(r===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),r=await this.createUpdatedDocument(e,r)),r!==void 0&&(this.isStarted()?this.targetSet.has(e)?this.activeDocuments.set(e,r):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new Qq(r,i=>this.disposeDocument(i)))):r.dispose()),this.pendingUpdates.delete(e),n.resolve()}async createUpdatedDocument(e,n){let r=await this.readTextDocument(e);if(r===void 0){n!==void 0&&this.disposeDocument(n);return}let i;try{i=await this.getParser(r.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),n!==void 0&&this.disposeDocument(n);return}if(n!==void 0)if(r.detectedLanguageId!==n.document.detectedLanguageId)this.disposeDocument(n);else{let{document:l,remapper:c}=i.update(n.parsedDocument,r),u=n.update(l,c);return this.recordDocumentChanges(e,u),n}let o=i.parse(r),a=new Dq(o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:a.getAllIds(),invalidated:[]}),a}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()}),e.dispose()}recordDocumentChanges(e,n){let r=LD(this.createdNodes,e,()=>new Set),i=LD(this.invalidatedNodes,e,()=>new Set);for(let o of n.created)r.add(o),this.nodeToDoc.set(o,e);for(let o of n.invalidated)r.has(o)?r.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let n=this.parsers.get(e);return n===void 0&&(n=await B3e(e),this.parsers.set(e,n)),n}async readTextDocument(e){if(this.invalidDocumentCache.has(e))return;let n=await this.ctx.get(Cr).getOrReadTextDocument({uri:e});if(n.status!=="valid"||n.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return n.document}handleDocumentChange(e){let n=e.document.uri;this.isKnownDocument(n)&&this.staleDocuments.add(n)}};f();var Uq=class{constructor(e){this.ctx=e;this.documents=new Map;this.elisionMarker=Y5;this.nodeCache=new Ln(1e4);this.costFunction=b3e(this.elisionMarker),this.root=this.createRootNode()}static{s(this,"WorkspacePromptComponent")}getRoot(){return this.root}snapshot(e,n){this.documents.clear();for(let{uri:r}of e.documents){let i=n.getDocument(r);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document);this.documents.set(r,Voe(o,this.costFunction,this.elisionMarker,this.nodeCache))}this.root=this.createRootNode(),this.root.updateWeights(r=>e.getNodeWeight(r.id)??0)}createRootNode(){let e=new Array(this.documents.size+1).fill(""),n=[...this.documents.values()];return new ND(Fg(),e,n,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:Fg(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,n){let i=this.ctx.get(Tn).getRelativePath({uri:e});return N5(`Related portions of ${i??e}:
`,n)}};var D3e=qe(require("events"));var MD=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Du;this.config=X5();this.providerWeights=J5();this.emitter=new D3e.default;this.forceUpdateInterrupt=new Du;this.emitter.setMaxListeners(27),this.contextManager=new Oq(e),this.coordinator=new kq(this.contextManager),this.promptComponent=new Uq(e),this.tokenEventDisposable=Ps(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=ui(this.ctx,wt.UseWorkspaceContextCoordinator);if(e===void 0)try{let n=await this.ctx.get(Rt).updateExPValuesAndAssignments();e=this.isEnabled(n)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return ui(this.ctx,wt.UseWorkspaceContextCoordinator)??this.ctx.get(Rt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.forceUpdateInterrupt=new Du,this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,n){this.isActive()&&this.coordinator.pushWorkspaceContext(e,n)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}getPromptComponent(){return this.promptComponent.getRoot()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),sr.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),sr.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}async forceUpdate(){return this.forceUpdateInterrupt.promise}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights();this.promptComponent.snapshot(e,this.contextManager);let n=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:r})=>r);if(this.contextManager.trySetActiveDocuments(n),await this.contextManager.flushUpdates(),this.forceUpdateInterrupt.resolve(),this.forceUpdateInterrupt=new Du,this.isActive()){this.promptComponent.snapshot(e,this.contextManager);let r=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:r};this.emitter.emit(t.UpdateEventName,i),await _g(r)}}}catch(e){Cv(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function P3e(t){let e=new C5;return e.set(mc,t),e.set(Cg,new Cg),e.set(zi,new zi),e.set(Dm,new Dm),e.set(ym,new ym),e.set(Rt,new Rt(e)),e.set(sg,new sg),e.set(lc,new lc(e)),e.set(Ll,new Ll),e.set(Iu,new Iu),e.set(vd,new CD),e.set(Im,new VS),e.set(xm,new y8),e.set(ba,new ba),e.set(wg,new wg(e)),e.set(Cr,new Cr(e)),e.set(MD,new MD(e)),e.set(Fm,Eq(e)),e.set(Mu,new Mu),e.set(Ed,new Ed),e.set(X1,X1.default),e.set(H1,new H1(e)),e.set(Lf,new Lf(e)),e.set(Ml,new Ml),e.set(xd,new xd(e)),e.set(Ho,new Ho),e.set(zf,new zf(e)),e.set(Jf,new Jf),e}s(P3e,"createCommonContext");f();f();var qq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var Z5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var $zn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),QD=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,n){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Rt).updateExPValuesAndAssignments(),a=await this.ctx.get(vd).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},n);switch(a.type){case"success":return a;case"canceled":throw new qq(a.reason);case"failed":throw new Z5(a.reason)}}};f();f();var N3e=qe(require("node:util"));function L3e(t,...e){return`[${t}] ${_1t(e)}`}s(L3e,"formatLogMessage");function _1t(t){return N3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(_1t,"format");function Wq(t){return bye(t)}s(Wq,"verboseLogging");var Gq=class extends Va{constructor(n){super();this.console=n}static{s(this,"ConsoleLog")}logIt(n,r,i,...o){r==1?this.console.error(`[${i}]`,...o):(r==2||Wq(n))&&this.console.warn(`[${i}]`,...o)}};f();var F3e=require("node:util");var e4=class extends yg{static{s(this,"TelemetryLogSenderImpl")}sendError(e,n,...r){II(e,"log",or.createAndMarkAsIssued({context:n,level:_I[1],message:S1t(...r)}),1)}sendException(e,n,r){wa(e,n,r)}};function S1t(...t){return t.map(e=>(0,F3e.inspect)(e)).join(" ")}s(S1t,"telemetryMessage");f();var KFe=qe(require("crypto")),JFe=qe(require("fs")),vH=qe(zFe()),XFe=require("tls"),ZFe=qe(YFe());var cR=new Tt("certificates"),rl=class{static{s(this,"RootCertificateReader")}};function bH(t,e=process.platform){return new vue(t,[new bue,new Eue,R3t(t,e)])}s(bH,"getRootCertificateReader");function R3t(t,e){switch(e){case"linux":return new Iue(t);case"darwin":return new Tue(t);case"win32":return new wue(t);default:return new _ue}}s(R3t,"createPlatformReader");var xue=class extends rl{constructor(n,r){super();this.ctx=n;this.delegate=r}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(n){return cR.warn(this.ctx,"Failed to read root certificates:",n),[]}}},vue=class extends rl{constructor(n,r){super();this.ctx=n;this.delegates=r.map(i=>new xue(n,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(n=>n.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(n){let r=Date.now(),i=n.filter(o=>{try{let a=new KFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>r}catch(a){return cR.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return n.length!==i.length&&cR.info(this.ctx,`Removed ${n.length-i.length} expired certificates`),i}},bue=class extends rl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return XFe.rootCertificates}},Eue=class extends rl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await eMe(e):[]}},Iue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let n=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await eMe(r);cR.debug(this.ctx,`Read ${i.length} certificates from ${r}`),n=n.concat(i)}return n}},Tue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let n=vH.get({excludeBundled:!1,format:vH.Format.pem});return cR.debug(this.ctx,`Read ${n.length} certificates from Mac keychain`),n}},wue=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let n=ZFe.all();return cR.debug(this.ctx,`Read ${n.length} certificates from Windows store`),n}},_ue=class extends rl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function eMe(t){let e;try{e=await JFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let n=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!n)return[];let r=n.filter(o=>o.length>0),i=new Set(r);return Array.from(i)}s(eMe,"readCertsFromFile");f();var fMe=qe(require("http"));var eBt=407,Ec=new Tt("proxySocketFactory"),iA=class{static{s(this,"ProxySocketFactory")}},sT=class extends Error{static{s(this,"ProxySocketError")}constructor(e,n,r){super(e),this.code=n?.code,this.syscall=n?.syscall,this.errno=n?.errno,/^Failed to establish a socket connection to proxies:/.test(n?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(n?.message??"")?this.code="ProxyInitializeSecurityContext":n?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(n?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),r!==void 0&&(this.code=r)}};function EH(t){return new kue(t,new Bue(t))}s(EH,"getProxySocketFactory");var kue=class extends iA{constructor(n,r,i=new r9,o=process.platform){super();this.ctx=n;this.delegate=r;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Ln(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(n,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(Ec.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(n,r));try{return await this.delegate.createSocket(n,r)}catch(i){if(i instanceof sT&&i.code===`ProxyStatusCode${eBt}`){Ec.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(n,r);if(o)return Ec.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),o}throw i}}async reauthorize(n,r){let i=await this.authorize(r);i&&(Ec.debug(this.ctx,"Proxy re-authorization successful, received token"),n.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(n,r){let i=await this.authorize(r);if(Ec.debug(this.ctx,"Proxy authorization successful, received token"),i)return Ec.debug(this.ctx,"Trying to create socket with proxy authorization"),n.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(n,r)}async authorize(n){Ec.debug(this.ctx,"Loading kerberos module");let r=await this.kerberosLoader.load(),i=this.computeSpn(n);Ec.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await r.initializeClient(i);Ec.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Ec.debug(this.ctx,"Received kerberos server response"),a}computeSpn(n){let r=n.kerberosServicePrincipal;if(r)return Ec.debug(this.ctx,"Using configured kerberos spn",r),r;let i=this.platform==="win32"?`HTTP/${n.hostname}`:`HTTP@${n.hostname}`;return Ec.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(n){return`${n.hostname}:${n.port}`}},Bue=class extends iA{constructor(n){super();this.ctx=n;this.userAgent=`GithubCopilot/${this.ctx.get(zi).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(n,r){let i=this.createConnectRequestOptions(n,r);return new Promise((o,a)=>{Ec.debug(this.ctx,"Attempting to establish connection to proxy");let l=fMe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{Ec.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new sT(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new sT(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Ec.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{Ec.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new sT(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{Ec.debug(this.ctx,"Proxy socket connection timeout"),a(new sT(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(n,r){let i=`${n.hostname}:${n.port}`,o={hostname:r.hostname,port:r.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:n.timeout};return n.localAddress&&(o.localAddress=n.localAddress),this.configureProxyAuthorization(o,n,r.authorization),o}configureProxyAuthorization(n,r,i){n.headers["Proxy-Authorization"]=[],i&&n.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof r.headers?.["Proxy-Authorization"]=="string"&&n.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}},r9=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>qe(dMe()))}};f();var gMe=require("node:os");var tBt=new Tt("repository"),aT="\\\\",AMe="(?:[#;].*)",fR=`(?:[^"${aT}]|${aT}.)`,nBt="[0-9A-Za-z-]",pMe=`[A-Za-z]${nBt}*`,yMe=`\\s*${AMe}?$`,CMe=`(?:[^"${aT};#]|${aT}.)`,rBt=`(?:"${fR}*"|"${fR}*(?<strCont>${aT})$)`,iBt=`(?:${CMe}|${rBt})+`,oBt=`(?:(?<cont>${aT})$)`,xMe=`(?<value>${iBt})${oBt}?${yMe}`,mMe=new RegExp(`^${xMe}`),sBt=new RegExp(`^(?<value>${fR}*(?:(?<strCont>${aT})$|(?<quote>")))`),aBt=new RegExp(`^\\s*(?:(?<key>${pMe})\\s*=\\s*${xMe}|(?<soloKey>${pMe})${yMe})`),lBt=new RegExp(`(?<value>${CMe}+)|"(?<string>${fR}*)"`,"g"),hMe="[-.0-9A-Za-z]+",cBt=`\\s+"(?<ext>${fR}*)"`,uBt=`\\s+"(?<extOnly>${fR}*)"`,dBt=new RegExp(`^\\s*\\[(?:(?<simple>${hMe})${cBt}|${uBt}|(?<simpleOnly>${hMe}))\\]`),fBt=new RegExp(`^\\s*${AMe}$`),Due=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(dBt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(aBt);if(e){if(e.groups?.key){let n=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),n)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let n=e,r=[this.matchedValue(n)];for(;n?.groups?.cont||n?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}n.groups.strCont?(n=this.line.match(sBt),n?(r.push(this.matchedValue(n)),n.groups?.quote&&(n=this.line.slice(n[0].length).match(mMe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(n=this.line.match(mMe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))}return this.normalizeValue(r.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let n=!1,r=[...e.matchAll(lBt)].map(i=>i.groups?.value?(n=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(n=!1,this.unescapeValue(i.groups.string))).join("");return n?r.trimEnd():r}unescapeValue(e){let n={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(r,i)=>n[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){fBt.test(this.line)&&(this.line="")}},IH=class extends Bm{static{s(this,"GitParsingConfigLoader")}async getConfig(e,n){let r=await H1.getRepoConfigLocation(e,n);if(!r)return;let i=await this.getParsedConfig(e,r);if(i)return this.mergeConfig(await this.baseConfig(e,r),i)}mergeConfig(...e){return e.filter(n=>n!==void 0).reduce((n,r)=>n.concat(r),new p2)}async getParsedConfig(e,n,r=!0){let i=await this.tryLoadConfig(e,n,r);if(!i)return;let o=new Due(i),a=new p2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,n,r){try{return await e.get(po).readFileString(n)}catch(i){(r||!(i instanceof Error)||i.code!=="ENOENT")&&tBt.warn(e,`Failed to load git config from ${JSON.stringify(n)}:`,i);return}}async baseConfig(e,n){let r=await this.commondirConfigUri(e,n),i=ko(this.xdgConfigUri(),"git","config"),o=ko(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),r?await this.getParsedConfig(e,r,!1):void 0)}async commondirConfigUri(e,n){if(Ti(n).toLowerCase()!=="config.worktree")return;let r=f0(n),i=ko(r,"commondir");try{let o=(await e.get(po).readFileString(i)).trimEnd();return ko(RI(r,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?pl(process.env.XDG_CONFIG_HOME):ko(this.homeUri(),".config")}homeUri(){return pl((0,gMe.homedir)())}};f();var vMe=require("child_process");var TH=class extends Bm{static{s(this,"GitCLIConfigLoader")}runCommand(e,n,r){return new Promise((i,o)=>{(0,vMe.execFile)(n,r,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,n,r,i){try{return await this.runCommand(n,r,i)}catch(o){a4e.info(e,`Failed to run command '${r}' in ${n}:`,o);return}}async getConfig(e,n){let r=Go(n);if(r===void 0)return;let i=await this.tryRunCommand(e,r,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let n=new p2;for(let r of e.split("\0").filter(i=>i)){let i=r.split(`
`,1)[0],o=r.slice(i.length+1);n.add(i,o)}return n}extraArgs(){return[]}};f();var EMe=qe(require("node:events"));var bMe="onWorkspaceChanged",O0=class{constructor(){this.emitter=new EMe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(bMe,e)}emit(e){this.emitter.emit(bMe,e)}};function IMe(t){let e=P3e(t);return pBt(e),e.set(rl,bH(e)),e.set(iA,EH(e)),e.set(Bm,new lU([new TH,new IH])),e.set(O0,new O0),e.set(QD,new QD(e)),e}s(IMe,"createProductionContext");function pBt(t){t.set(xf,xf.fromEnvironment(!1)),t.set(yg,new e4),t.set(Va,new Gq(console))}s(pBt,"setupRudimentaryLogging");var Prr=new Tt("context");f();f();var Fn=new Tt("chat");f();f();var yl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(yl||{});function $n(t){return t?(t=U0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s($n,"getTextPart");var TMe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),wMe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function ib(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(ib,"parseToolCallArguments");function _Me(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(_Me,"toOpenAIToolCall");function SMe(t,e,n,r,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return n.tool_calls&&(c.tool_calls=n.tool_calls),w5(t,[c],l),{message:e,choiceIndex:r,requestId:i,blockFinished:o,finishReason:a,tokens:n.tokens,numTokens:n.tokens.length,tool_calls:n.tool_calls,function_call:n.function_call,telemetryData:l}}s(SMe,"convertToChatCompletion");function i9(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(i9,"isChatCompletionContentPartArray");function wH(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(wH,"isChatMessageArray");function U0(t){if(typeof t=="string")return t;if(i9(t))return t;if(wH(t)){let e=t.filter(r=>r.role==="assistant"),n=[];for(let r of e)Array.isArray(r.content)?n.push(...r.content):n.push({type:"text",text:r.content});return n}return""}s(U0,"resolveAsChatMessageContent");function o9(t,e){return(typeof t=="string"||i9(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(o9,"appendChatMessageContent");function Pue(t,e){if(t){if(typeof t=="string"||i9(t))return[{role:"assistant",content:t}];if(wH(t))return e?t:t.filter(n=>n.role!=="tool").map(n=>n.tool_calls?{...n,tool_calls:void 0,tool_call_id:void 0}:n)}else return[];return[]}s(Pue,"resolveResponseAsChatMessages");f();var Nue=new Tt("streamMessages");function RMe(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Nue.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),Nue.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Nue.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=yD(e.solution),a={role:"assistant",content:r};return SMe(t,a,o,e.index,e.requestId,i,e.reason??"",n)}s(RMe,"prepareChatCompletionForReturn");var gp=new Tt("fetchChat"),_H=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,n,r,i,o){let a=await this.fetchWithParameters(e,n.endpoint,n,r,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){gp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(n.endpoint,e,n);return this.handleError(e,l,a)}if(e.get(zf).processQuotaHeaders(a.headers),n.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??an(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:$n(u.content).split(" "),requestId:{headerRequestId:d,deploymentId:"",serverExperiments:""},telemetryData:r,numTokens:0},m=$n(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>_5(a),"getProcessingTime")}}else{let c=Av.create(e,n.count,a,r,[],o).processSSE(i);return{type:"success",chatCompletions:$1(c,d=>RMe(e,d,r)),getProcessingTime:s(()=>_5(a),"getProcessingTime")}}}createTelemetryData(e,n,r){return or.createAndMarkAsIssued({endpoint:e,engineName:r.engineName,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchWithParameters(e,n,r,i,o){let a={messages:r.messages,tools:r.tools,tool_choice:r.tool_choice,model:r.model,temperature:S5(e,r.count),top_p:TU(e),n:r.count,stop:[`


`],copilot_thread_id:r.copilot_thread_id},l=F1(r.repoInfo);return l!==void 0&&(a.nwo=l),r.postOptions&&Object.assign(a,r.postOptions),r.intent&&(a.intent=r.intent,r.intent_model&&(a.intent_model=r.intent_model),r.intent_tokenizer&&(a.intent_tokenizer=r.intent_tokenizer),r.intent_threshold&&(a.intent_threshold=r.intent_threshold),r.intent_content&&(a.intent_content=r.intent_content)),o?.isCancellationRequested?"not-sent":await mBt(e,r.messages,r.copilotApiBaseUrl,r.engineName,n,r.ourRequestId,a,r.authToken,r.uiKind,i,r.llmInteraction,o)}async handleError(e,n,r){if(r.clientError&&!r.headers.get("x-github-request-id")){let a=`Last response was a ${r.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;gp.error(e,a),n.properties.error=`Response status was ${r.status} with no x-github-request-id header`}else n.properties.error=`Response status was ${r.status}`;if(n.properties.status=String(r.status),Bt(e,"request.shownWarning",n),r.status===401)try{let a=await r.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(r.status===401||r.status===403)return e.get(Gn).resetToken(r.status),{type:"failed",reason:`token expired or invalid: ${r.status}`,code:r.status};if(r.status===499)return gp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:r.status};let i=await r.text();if(r.status===466)return gp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:r.status};if(r.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:r.status};if(r.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:r.status};if(r.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:r.status};if(r.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Gn).getToken();if(r.status===402){if(i.includes("free_quota_exceeded")){let c=r.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:r.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:r.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:r.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:r.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:r.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:r.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:r.status}}}return{type:"failed",reason:"Quota Exceeded.",code:r.status}}return r.status===503?{type:"failed",reason:i,code:r.status}:(gp.error(e,"Unhandled status from server:",r.status,i),{type:"failed",reason:`unhandled status from server: ${r.status} ${i}`,code:r.status})}};async function mBt(t,e,n,r,i,o,a,l,c,u,d,p){let m=ko(n,r,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:r,uiKind:c});IU(a,h,["messages"]),h.properties.headerRequestId=o,Bt(t,"request.sent",h);let g=Qs(),y=Z4e(c),v={...Yx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{hBt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>_Me(E)))}),aI(t,m,l,y,o,a,p,v).then(b=>{let E=h2(b);h.extendWithRequestId(E);let _=Qs()-g;return h.measurements.totalTimeMs=_,gp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),gp.debug(t,"request.response properties",h.properties),gp.debug(t,"request.response measurements",h.measurements),gp.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",h),b}).catch(b=>{if(Mc(b))throw b;let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(Nu(b,"name")??""),h.properties.code=String(Nu(b,"code")??""),h.properties.errno=String(Nu(b,"errno")??""),h.properties.type=String(Nu(b,"type")??"");let _=Qs()-g;throw h.measurements.totalTimeMs=_,gp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),gp.debug(t,"request.error properties",h.properties),gp.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),b}).finally(()=>{w5(t,e,h)})}s(mBt,"fetchWithInstrumentation");function hBt(t){return"tool_calls"in t}s(hBt,"isChatMessageWithToolCalls");var na=class{constructor(e){this.ctx=e;this.fetcher=new _H}static{s(this,"ChatMLFetcher")}async fetchResponse(e,n,r,i){let o=an(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Gn).getToken(),u=$x(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,n,r)}async fetch(e,n,r,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),n||(()=>{}),r);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,n,r,i){let o=[],a=hD(n.chatCompletions,c=>this.postProcess(c,i));Fn.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)Fn.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:$n(c.message?.content)??"",toolCalls:c.tool_calls,requestId:r,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:r};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:r};case"length":return{type:"length",reason:"Response too long.",requestId:r,truncatedValue:$n(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:r};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:r}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>$n(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:r}}return{type:"no_choices",reason:"Response contained no choices.",requestId:r}}postProcess(e,n){return Tq(e.tokens)?(n.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",n,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,n){return Fn.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:n}}processFailedResponse(e,n){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:n}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:n}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:n}:{type:"failed",reason:e.reason,requestId:n,code:e.type==="failed"?e.code:void 0}}processError(e,n){return Mc(e)?{type:"canceled",reason:"network request aborted",requestId:n}:(Fn.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};f();var oA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var ob=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var gBt=".github/copilot-instructions.md",ABt=".github/git-commit-instructions.md",yBt="global-copilot-instructions",CBt="global-git-commit-instructions",sA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,n){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:n}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,n){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:n}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let n=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&n.push({kind:1,content:[this.globalCopilotInstructions],reference:yBt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&n.push({kind:1,content:[this.globalGitCommitInstructions],reference:CBt}),n}async _collectInstructionsFromFile(e,n,r,i,o,a){try{let l=ko(n.uri,r),c=(await e.get(po).readFileString(l)).trim();if(!c)return;(await j1(e,{uri:l},c)).status==="valid"&&o.push({kind:a,content:[{instruction:c,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,n,r={}){let i=[];if(!n.length)return i;let o=n.flatMap(a=>{let l=[];return r.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,a,gBt,r.languageId,i,0)),r.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,a,ABt,void 0,i,0)),l});return await Promise.all(o),i}};f();var Ic=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},SH=class extends Ic{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(n,r){this.items.push({editConversationId:n.editConversationId,editTurnId:n.editTurnId,...r})}};f();f();f();function RH(){return an()}s(RH,"uuidV4");f();var sb=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var aA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var s9="filepath:",Cl="...existing code...",Lue="copilot-edited-file";f();function pR(t){let e=t.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(e,r=>r[1].length+1));return"`".repeat(n)}s(pR,"getFenceForCodeBlock");var q0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=pR(this.params.code),n=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&n.push(`// ${s9} ${aa(this.params.uri)}`),n.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),n}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var Fue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},a9=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),n=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(n.push({role:"assistant",content:this.props.inProgressRewriteContent}),n.push({role:"user",content:"Please continue providing the next part of the response."})),n}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((n,r)=>{let i=$n(r.content);return r.role==="system"?`${n}<SYSTEM>
${i}
</SYSTEM>


`:n+i},"")}]}transformToSpeculationPrompt(e,n,r){return e.reduce((o,a)=>{if(a.role==="system"){let l=$n(a.content).endsWith(`
`)?$n(a.content):`${$n(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${Lue}>.
</SYSTEM>


`}return o+$n(a.content)},"")+`


The resulting document:
<${Lue}>
${r}${n}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let n=[];return n.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Cl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),n.join(`
`)}buildUserMessage(e){let n=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new q0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});n.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else n.push("I am in an empty editor.");let i=new Fue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&n.push(i);let o=new q0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return n.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),n.join(`
`)}};f();var Ay=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Cr).getOrReadTextDocument({uri:e})}};f();var Na=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var xBt=1e3,vBt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:lr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},mR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new Tt("CopilotEditsCodeMapper")}async mapCode(e,n,r,i,o=!1){if(!e.resource)throw new aA("No uri found in code block");if(r.isCancellationRequested)throw new sb;e.code.includes(Cl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let a=await this.ctx.get(Cr).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new aA(v);throw this.logger.error(this.ctx,v,b),b}let l=a.document.getText();if(l.length===0&&!e.code.includes(Cl))return i&&await this.reportCodeBlock(e,i),e.code;let c=new a9({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx)}),u=await c.render();u=c.transformToFastApplyMessage(u),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let d=await this.ctx.get(Rt).updateExPValuesAndAssignments(),p=RH(),m=[],h=0,g=0,y=l.length+e.code.length+xBt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:vBt,messages:u,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:n,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${p} in iteration ${g} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(na).fetchResponse(v,r,d);if(this.logger.debug(this.ctx,`Received map code response ${p} in iteration ${g} with result: ${JSON.stringify(E,null,2)}`),h=this.calculateResponseLength(E,m,h),E.type==="length"){if(h>y)throw new aA(`Code mapper might be in a loop: Rewritten length: ${h}, Document length: ${l.length}, Code block length ${e.code.length}`);u=await new a9({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=m.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:pR(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new aA(k)}}else{if(E.type==="canceled")throw new Na;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new aA(_)}}g+=1}}calculateResponseLength(e,n,r){return e.type==="success"?(n.push(e.value),r+=e.value.length):e.type==="length"&&(n.push(e.truncatedValue),r+=e.truncatedValue.length),r}async reportCodeBlock(e,n){await n({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await n({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var nu=class extends Error{constructor(n){super(n.message);this.editConversationError=n;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var ab=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,n){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return n||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return n||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var kH=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var lb=class{constructor(e,n){this.request=e;this.id=an();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];n&&n.length>0&&(this.workingSet=n)}static{s(this,"EditTurn")}},Mue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(n=>n.id===e)}getTurns(){return[...this.turns]}},BH=class{constructor(e=[],n="panel",r="en"){this._id=an();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=n,this.userLanguage=r,this.turnsManager=new Mue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new kH(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var DH=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,n){switch(n.type){case"success":return n.value;case"offTopic":{e.currentTurn.status="off-topic";let r="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:r,type:"offtopic-detection"},new nu({message:r,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:jx,type:"user"},new nu({message:jx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:n.reason,type:"server"},new nu({message:ab.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw e.currentTurn.status="filtered",new nu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new nu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new nu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new nu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new nu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new nu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new nu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new nu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*BMe(t){yield t}s(BMe,"stringToAsyncIterable");f();f();var lA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,n,r={}){try{let i=e.get(sA),o=i.getGlobalInstructions(r),a=await i.readFromWorkspaces(e,n,r),l=[...o,...a];return this.processInstructions(l,r)}catch{return}}static processInstructions(e,n={}){if(!e||e.length===0)return;let r=[];for(let o of e){let a=this.createInstructionElement(o,n);a&&r.push(a)}return r.length===0?void 0:`${n.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${r.join(`
`)}</instructions>`}static createInstructionElement(e,n={}){let r=[];for(let i of e.content)i.languageId?n.languageId&&i.languageId===n.languageId&&r.push(`For ${i.languageId} code: ${i.instruction}`):r.push(i.instruction);if(r.length!==0)return r.join(`
`)}static async appendToUserMessage(e,n,r="",i={}){if(!n||n.length===0)return r;let o=await t.getInstructions(e,n,i);return o?o+`

`+r:r}};f();var yy=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,n){let r=e.mapToUriInWorkingSet(n);return r||pl(n)}static uriToPath(e){let n=Go(e);if(n)return n;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var PH=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),n=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)n.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&n.push({role:"assistant",content:i.response.message});let r=await lA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return n.push({role:"user",content:r}),n}getExampleFilePath(e){return this.getFilePath(yy.posixFilePathToUri(e))}getFilePath(e){return yy.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let n of this.props.workingSet){let r=await this.props.textDocumentProvider.getByUri(n.uri);r.status==="valid"&&e.set(n.uri,r.document)}return e}buildSystemMessage(e){let n=[];return n.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${s9} ${this.exampleFilePath}`,`// ${Cl}`,"{ changed code }",`// ${Cl}`,"{ changed code }",`// ${Cl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&n.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&n.push(`You use the ${this.props.modelName} large language model.`),n.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${s9} ${this.tsExampleFilePath}`,"class Person {",`   // ${Cl}`,"   age: number;",`   // ${Cl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),n.join(`
`)}buildUserMessage(e){let n=[];if(e.size>0){n.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[r,i]of e){let o=new q0({code:i.getText(),languageId:i.detectedLanguageId,uri:r});n.push("<file>",...o.renderAsArray(),"</file>")}}return n.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Cl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&n.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),n.push("</reminder>"),n.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),n.join(`
`)}};f();f();var NH=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:n}=await this._source.next();n?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}async readUntil(e){let n="";for(;!this.endOfStream;){let r=this.readImmediateExcept(e);if(n+=r,await this.peek(1)===e)break}return n}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let n=this._buffer.indexOf(e);return this.readImmediate(n===-1?this._buffer.length:n)}readImmediate(e){let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}};var Que="<file>",l9="```",u9="###",EBt=/^(`+)([^ \n]*)/,c9="filepath:";async function*PMe(t,e){let n=new NH(t[Symbol.asyncIterator]()),r=[];for(;!n.endOfStream;){for(;!n.endOfStream;){let y=await n.peek(Math.max(l9.length,Que.length,u9.length));if(y.startsWith(Que)||y.startsWith(l9))break;if(y.startsWith(u9)){let v=await n.readLineIncludingLF(),b=v.substring(u9.length).trim();await e(b)?r.length=0:r.push(v)}else await DMe(n,r)}if(n.endOfStream)break;let i=await n.readLineIncludingLF(),o=i.startsWith(Que);for(;!n.endOfStream&&!i.startsWith(l9);)i=await n.readLineIncludingLF();if(n.endOfStream)break;let a=i.match(EBt),l=a?a[2]:void 0,c=oke(l?tke(l):void 0),u=[`${c.lineComment.start} ${c9}`,`:: ${c9}`,`<!-- ${c9}`,`// ${c9}`,`# ${c9}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!n.endOfStream;){let y=await n.peek(Math.max(l9.length,d));if(y.startsWith(l9)){let v=await n.readLineIncludingLF();if(!o)break;if(await n.peek(m.length)===m){await n.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await n.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await DMe(n,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:r.join("")},r.length=0}}s(PMe,"getCodeBlocksFromResponse");async function DMe(t,e){for(;!t.endOfStream;){let n=t.readImmediateExcept(`
`);if(n.length>0&&e?.push(n),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(DMe,"pipeOneLine");function NMe(t){if(t.startsWith(`${u9} `))return"";let e=t.indexOf(`
${u9} `);return e===-1?"":t.substring(0,e)+`
`}s(NMe,"parseOverallDescription");f();f();var LH=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var IBt=new Tt("CopilotEditsConversations"),il=class{constructor(e){this.editConversations=new Ln(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",n){let r=new BH([],e,n);return this.editConversations.set(r.id,r),r}destroy(e){this.editConversations.delete(e)!==!0&&IBt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,n){return this.get(e).addTurn(n),n}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getEditConversation(e)}getEditConversation(e){let n=this.editConversations.get(e);if(!n)throw new LH(`Conversation with id ${e} does not exist`);return n}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let n=this.getAll();for(let r of n)if(r.hasTurn(e))return r}};f();f();var ra=class{static{s(this,"ModelConfigurationProvider")}},FH=class extends ra{constructor(n){super();this.ctx=n}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(n,r){let i=[];for(let o of n){let a=await this.getFirstMatchingChatModelConfiguration(o,r);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Fn.error(this.ctx,`No model configuration found for families: ${n.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(wu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(n){let r=await this.ctx.get(wu).getMetadata(),i=wBt(r,n);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(n,r){let i=await this.getFirstMatchingModelMetadata({family:n,type:"chat",supports:r});if(i!==void 0)return n===lr.Gpt35turbo||n===lr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:Uue(6144,i),maxResponseTokens:Oue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===lr.Gpt4||n===lr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:Uue(10240,i),maxResponseTokens:Oue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===lr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:await TBt(this.ctx,i),maxResponseTokens:Oue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(n){let r=await this.getFirstMatchingModelMetadata({family:n,type:"embeddings"});if(r!==void 0)switch(n){case PM.textEmbedding3Small:return{modelId:r.id,modelFamily:n,maxBatchSize:r.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function TBt(t,e){let n=t.get(Rt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatMaxRequestTokens(r);return i===-1&&(i=16384),Uue(i,e)}s(TBt,"getExpRequestTokens");function Uue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(Uue,"getRequestTokens");function Oue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(Oue,"getResponseTokens");function wBt(t,e){return t.filter(n=>n.capabilities.type!==e.type||n.capabilities.family!==e.family&&!(n.is_chat_fallback===!0&&n.id===e.family)||n.capabilities.family===e.family&&n.id!==e.family&&n.is_chat_fallback===!0?!1:n.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(r=>e.supports?.[r]===n.capabilities.supports?.[r]))}s(wBt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,n,r,i){if(r)return e.get(ra).getBestChatModelConfig([r]);if(e.get(zf).quotaExhausted&&!(await e.get(Gn).getToken()).userInfo?.isFreeUser){let o=await e.get(wu).getFallbackModel();if(o)return e.get(ra).getBestChatModelConfig([o?.id])}return e.get(ra).getBestChatModelConfig(Pf(n),i)}static transformMessages(e,n){return n===lr.O1Ga||n===lr.O1Mini?e.map(r=>r.role!=="user"?{role:"user",content:r.content}:r):e}};var Cy=class{constructor(e,n){this.chatFetcher=n;this.ctx=e,this.chatFetcher=this.chatFetcher??new na(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,n){try{await this.reportBegin(e);let r=await this.getEditCodeResult(e,n),i=DH.processResult(e,r);await this.parseAndSendProgressBack(e,i,n),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(r){if(r instanceof sb)await this.reportEnd(e,{message:jx});else if(r instanceof nu)await this.reportEnd(e,r.editConversationError);else{let i=r instanceof Error?r.message:String(r);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,n){await this.abortIfCancelled(e,n);let r=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Rt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,n);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(r,o.modelFamily);return await this.abortIfCancelled(e,n),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},n,i)}async buildEditCodePromptMessages(e){let n=e.currentTurn,r=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new PH({userMessage:n.request.message,workspaceFolder:n.workspaceFolder,workingSet:n.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new Ay(this.ctx),modelName:r.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,n){if(n.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:jx,type:"user"},new sb;this.ctx.get(il).get(e.editConversationId)}async parseAndSendProgressBack(e,n,r){try{let i=BMe(n),o=new mR(this.ctx),a=s(async u=>yy.pathToUri(e,u),"createUri"),l=[],c=NMe(n);c&&await this.ctx.get(Ic).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,r);for await(let u of PMe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),r,async d=>{await this.ctx.get(Ic).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,n)}catch(i){if(i instanceof aA||i instanceof Z5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof sb)e.currentTurn.status="cancelled",e.currentTurn.response={message:jx,type:"user"},await this.reportEnd(e,{message:jx});else throw i}}async reportNoCodeBlocks(e,n){await this.ctx.get(Ic).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:n})}async reportBegin(e){await this.ctx.get(Ic).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,n){await this.ctx.get(Ic).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:n})}};f();var hR=class extends Tu{constructor(n,r={}){super();this.env=r;this.recalculateUrlDefaults(n,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(n,r){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(n,r);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&n.get(Gn).resetToken(),n.get(hd).updateSessionConfig(o)}recalculateUrlDefaults(n,r){let{serverUrl:i,apiUrl:o}=zx({serverUrl:CM(n,r.serverUrl),apiUrl:CM(n,r.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var Olr=new Tt("exp");function LMe(t){let e=t.get(Rt);e.registerStaticFilters(RBt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>ui(t,wt.DebugOverrideEngine)||ui(t,wt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>AM()?"copilot-web":t.get(Jn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>que(!t.get(zi).isProduction()&&t.get(Jn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(Jn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>_Bt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(Jn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>que(t.get(Jn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>SBt(t)),e.registerDynamicFilterGroup(()=>{let n={};for(let r of t.get(Jn).getRelatedPluginInfo()){let i=Cf+r.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(DB).includes(i)){nL(t,{reason:`A filter could not be registered for the unrecognized related plugin "${r.name}".`});continue}n[i]=que(r.version)}return n})}s(LMe,"setupExperimentationService");function _Bt(t){let e=t.get(Jn).getEditorPluginInfo();return e.name==="copilot"&&Ag(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(_Bt,"getPluginRelease");function SBt(t){let e=t.get(Jn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(SBt,"getTargetPopulation");function RBt(t){return kBt(t)}s(RBt,"createAllFilters");function kBt(t){let e=t.get(Ko);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(zi).isProduction()?TI(t):"1.999.0"}}s(kBt,"createDefaultFilters");function que(t){return t.split("-")[0]}s(que,"trimVersionSuffix");f();var d9=(n=>(n.enabled="enabled",n.disabled="disabled",n))(d9||{}),xy=Symbol("onMCPToolsListChanged"),Ap=class{static{s(this,"McpManager")}};f();var Km=class{static{s(this,"McpRuntimeNotifier")}},MH=class extends Km{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var gR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var Wue=class{constructor(e,n){this.baseDebounceTime=e;this.expectedTotalTime=n;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),n=Date.now()-this.providerInvocationTime;return Math.max(0,e-n)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},QH=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let r=this._getExpectedTotalTime(200);return new Wue(200,r)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var No;(r=>{function t(i){return new Gue(i)}r.ok=t,s(t,"ok");function e(i){return new Hue(i)}r.error=e,s(e,"error");function n(i){return r.error(new Error(i))}r.fromString=n,s(n,"fromString")})(No||={});var Gue=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Hue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();f();var FMe=-1;function AR(){return FMe!==-1?FMe:Date.now()}s(AR,"now");function MMe(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(MMe,"lineRangeDistance");f();f();var yp=class t{constructor(e){this.edits=e;let n=-1;for(let r of e){if(!(r.replaceRange.start>=n))throw new fr(`Edits must be disjoint and sorted. Found ${r} after ${n}`);n=r.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(ol.fromJson))}static from(e){let n=e.map(i=>new ol(kt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return n.reverse(),new t(n)}static single(e,n){return new t([new ol(e,n)])}normalize(){let e=[],n;for(let r of this.edits)r.newText.length===0&&r.replaceRange.length===0||(n&&n.replaceRange.endExclusive===r.replaceRange.start?n=new ol(n.replaceRange.join(r.replaceRange),n.newText+r.newText):(n&&e.push(n),n=r));return n&&e.push(n),new t(e)}normalizeEOL(e){return new t(this.edits.map(n=>n.normalizeEOL(e)))}isNoop(e){return this.edits.every(n=>n.isNoop(e))}toString(){return`[${this.edits.map(n=>n.toString()).join(", ")}]`}apply(e){let n=[],r=0;for(let i of this.edits)n.push(e.substring(r,i.replaceRange.start)),n.push(i.newText),r=i.replaceRange.endExclusive;return n.push(e.substring(r)),n.join("")}compose(e){return BBt(this,e)}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(new ol(kt.ofStartAndLength(i.replaceRange.start+r,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),r+=i.newText.length-i.replaceRange.length;return new t(n)}getNewTextRanges(){let e=[],n=0;for(let r of this.edits)e.push(kt.ofStartAndLength(r.replaceRange.start+n,r.newText.length)),n+=r.newText.length-r.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(n.push(new ol(l.replaceRange.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.replaceRange.length):(n.push(new ol(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(n)}removeCommonSuffixPrefix(e){let n=[];for(let r of this.edits){let i=r.removeCommonSuffixPrefix(e);i.isEmpty||n.push(i)}return new t(n)}applyToOffset(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return r.replaceRange.start+n;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRange(e){return new kt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRangeOrUndefined(e){let n=this.applyToOffsetOrUndefined(e.start);if(n===void 0)return;let r=this.applyToOffsetOrUndefined(e.endExclusive);if(r!==void 0)return new kt(n,r)}applyInverseToOffset(e){let n=0;for(let r of this.edits){let i=r.newText.length;if(r.replaceRange.start<=e-n){if(e-n<r.replaceRange.start+i)return r.replaceRange.start;n+=i-r.replaceRange.length}else break}return e-n}},ol=class t{constructor(e,n){this.replaceRange=e;this.newText=n}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(kt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let n=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),r=BD(n,this.newText),i=Math.min(n.length-r,this.newText.length-r,H5(n,this.newText)),o=new kt(this.replaceRange.start+r,this.replaceRange.endExclusive-i),a=this.newText.substring(r,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let n=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,n)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function BBt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;n.shift(),r.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)r.push(new ol(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new ol(kt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));n.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new kt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);r.push(new ol(h,m))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return new yp(r).normalize()}s(BBt,"joinEdits");var Is=class t{constructor(e){this.edits=e;ql(vv(e,(n,r)=>n.range.endExclusive<=r.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(n=>Gs.deserialize(n)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,n){return new t([Gs.replace(e,n)])}static insert(e,n){return new t([Gs.insert(e,n)])}static fromOffsetEdit(e){return new t(e.edits.map(n=>Gs.replace(n.replaceRange,n.newText)))}static compose(e){let n;for(let r of e)n===void 0?n=r:n=n.compose(r);return n??t.empty}static trySwap(e,n){let r=e.inverse((a,l)=>" ".repeat(l-a)),i=n.tryRebase(r);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new yp(this.edits.map(e=>new ol(e.range,e.newText)))}compose(e){return DBt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let n="",r=0;for(let i of this.edits)n+=e.substring(r,i.range.start),n+=i.newText,r=i.range.endExclusive;return n+=e.substring(r),n}normalize(){let e=[],n;for(let r of this.edits)if(!(r.newText.length===0&&r.range.length===0))if(n&&n.range.endExclusive===r.range.start){let i=n.data?.merge(r.data)??void 0;n=Gs.replaceWithData(n.range.join(r.range),n.newText+r.newText,i)}else n&&e.push(n),n=r;return n&&e.push(n),new t(e)}normalizeOnSource(e){let n=this.apply(e),i=Gs.replace(kt.ofLength(e.length),n).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Gs.replaceWithData(kt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new OH(i)}if(this.edits.length!==e.arrayLength)throw aD(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let n=[],r=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=r[o];n.push(a);for(let l=o;l<r.length;++l){let c=a.newText.length-a.range.length,u=r[l];r[l]=Gs.replaceWithData(kt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new OH(n)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let n=this.toOffsetEdit(),r=n.applyInverseToOffset(e.start),i=n.applyInverseToOffset(e.endExclusive);return new kt(r,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let n=0;n<this.edits.length;++n)if(!this.edits[n].equals(e.edits[n]))return!1;return!0}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(Gs.replace(kt.ofStartAndLength(i.range.start+r,i.newText.length),e(i.range.start,i.range.endExclusive))),r+=i.newText.length-i.range.length;return new t(n)}inverseOnString(e){return this.inverse((n,r)=>e.substring(n,r))}mapData(e){return t.create(this.edits.map(n=>n.mapData(e)))}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)if(!a)n.push(Gs.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(n.push(Gs.replace(l.range.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.range.length)}else break}return new t(n)}};function DBt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;n.shift(),r.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.range.length}if(!l)r.push(Gs.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&r.push(Gs.replaceWithData(kt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Gs.replaceWithData(kt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);n.unshift(m),i-=m.newText.length-m.range.length}let p=new kt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);r.push(Gs.replaceWithData(p,o.newText,o.data))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return Is.create(r).normalize()}s(DBt,"joinEdits");var Gs=class t{constructor(e,n,r){this.range=e;this.newText=n;this.data=r}static{s(this,"SingleEdit")}static deserialize(e){return new t(new kt(e[0],e[1]),e[2],void 0)}static replace(e,n){return new t(e,n,void 0)}static insert(e,n){return new t(new kt(e,e),n,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,n,r){return new t(e,n,r)}static insertWithData(e,n,r){return new t(new kt(e,e),n,r)}static deleteWithData(e,n){return new t(e,"",n)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Is.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let n=this.range.substring(e),r=PBt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaStart(r),this.newText.substring(r),this.data)}removeCommonSuffix(e){let n=this.range.substring(e),r=NBt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaEnd(-r),this.newText.substring(0,this.newText.length-r),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function PBt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;return n}s(PBt,"commonPrefixLength");function NBt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[t.length-1-n]===e[e.length-1-n];)n++;return n}s(NBt,"commonSuffixLength");var ru=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Lu(()=>null.base.equals(this.base.apply(e))),Lu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return uA.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},OH=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Is.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new cA(this.edits.map(e=>e.toEdit()))}},cA=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Is.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let n=e,r=[];for(let i of this.edits){let o=Is.trySwap(n,i);if(!o)return;r.push(o.e1),n=o.e2}return{edits:new t(r),editLast:n}}mapData(e){return new t(this.edits.map(n=>n.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(n=>Is.deserialize(n)))}toHumanReadablePatch(e){let n=e,r=[];for(let i of this.edits){let o=Lo.fromEdit(new ru(n,i));r.push(o.humanReadablePatch(n.getLines())),n=n.apply(i)}return r.join(`
---
`)}};f();var yR=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,n){let r=e.edits.map(i=>new vy(n.getTransformer().getRange(i.range),i.newText));return new t(r)}toEdit(e){let n=this.edits.map(r=>Gs.replace(e.getTransformer().getOffsetRange(r.range),r.newText));return Is.create(n)}mapEdits(e){return new t(this.edits.map(e))}},vy=class t{constructor(e,n){this.range=e;this.newText=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new fr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}static fromSingleEdit(e,n){return new t(n.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.newText+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}toSingleEdit(e){let r=e.getTransformer().getOffsetRange(this.range);return Gs.replace(r,this.newText)}};var Lo=class t{constructor(e){this.edits=e;ql(vv(e,(n,r)=>n.lineRange.endLineNumberExclusive<=r.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(n=>Jm.deserialize(n)))}static fromEdit(e){let n=yR.fromEdit(e.edit,e.base);return t.fromTextEdit(n,e.base)}static fromTextEdit(e,n){let r=e.edits,i=[],o=[];for(let a=0;a<r.length;a++){let l=r[a],c=a+1<r.length?r[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=vy.joinEdits(o,n);o.length=0;let d=Jm.fromSingleTextEdit(u,n);i.push(d)}return new t(i)}static createFromUnsorted(e){let n=e.slice();return n.sort(T0(r=>r.lineRange.startLineNumber,w0)),new t(n)}isEmpty(){return this.edits.length===0}toEdit(e){let n=[];for(let r of this.edits){let i=r.toSingleEdit(e);n.push(i)}return Is.create(n)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],n=0;for(let r of this.edits)e.push(Yt.ofLength(r.lineRange.startLineNumber+n,r.newLines.length)),n+=r.newLines.length-r.lineRange.length;return e}mapLineNumber(e){let n=0;for(let r of this.edits){if(r.lineRange.endLineNumberExclusive>e)break;n+=r.newLines.length-r.lineRange.length}return e+n}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,n){return this.inverse(n).mapLineRange(e)}touches(e){return this.edits.some(n=>e.edits.some(r=>n.lineRange.intersect(r.lineRange)))}rebase(e){return new t(this.edits.map(n=>new Jm(e.mapLineRange(n.lineRange),n.newLines)))}humanReadablePatch(e){let n=[];function r(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");n.push(`${p} ${m} ${h} ${d}`)}s(r,"pushLine");function i(){n.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of m5(this.edits,(c,u)=>MMe(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)r(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];r(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];r(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)r(u,u+o,"unmodified",e[u-1])}return n.join(`
`)}apply(e){let n=[],r=0;for(let i of this.edits){for(;r<i.lineRange.startLineNumber-1;)n.push(e[r]),r++;for(let o of i.newLines)n.push(o);r=i.lineRange.endLineNumberExclusive-1}for(;r<e.length;)n.push(e[r]),r++;return n}inverse(e){let n=this.getNewLineRanges();return new t(this.edits.map((r,i)=>new Jm(n[i],e.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1))))}},Jm=class t{constructor(e,n){this.lineRange=e;this.newLines=n}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,n){let r=Pg(e.newText),i=e.range.startLineNumber,o=n.getValueOfRange(zt.fromPositions(new ir(e.range.startLineNumber,1),e.range.getStartPosition()));r[0]=o+r[0];let a=e.range.endLineNumber+1,l=n.getTransformer().getLineLength(e.range.endLineNumber)+1,c=n.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new ir(e.range.endLineNumber,l)));r[r.length-1]=r[r.length-1]+c;let u=e.range.startColumn===n.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&r[0].length===o.length&&(i++,r.shift()),r.length>0&&i<a&&d&&r[r.length-1].length===c.length&&(a--,r.pop()),new t(new Yt(i,a),r)}toLineEdit(){return new Lo([this])}toSingleTextEdit(e){if(this.newLines.length===0){let n=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===n.lineCount+2){let r;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;r=new ir(o,a)}else r=new ir(1,1);let i=n.addToPosition(new ir(1,1));return new vy(zt.fromPositions(r,i),"")}else return new vy(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let n,r,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(n=o-1,r=e.getTransformer().getLineLength(n)+1,i=this.newLines.map(a=>`
`+a).join("")):(n=o,r=1,i=this.newLines.map(a=>a+`
`).join("")),new vy(zt.fromPositions(new ir(n,r)),i)}else{let n=this.lineRange.endLineNumberExclusive-1,r=e.getTransformer().getLineLength(n)+1,i=new zt(this.lineRange.startLineNumber,1,n,r),o=this.newLines.join(`
`);return new vy(i,o)}}toSingleEdit(e){let n=this.toSingleTextEdit(e),r=e.getTransformer().getOffsetRange(n.range);return Gs.replace(r,n.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let n=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;n<r&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(n);)n++,i++;let o=0;for(;n<r&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(r-1);)r--,o++;return i===0&&o===0?this:new t(new Yt(n,r),this.newLines.slice(i,this.newLines.length-o))}},LBt;(e=>{function t(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="number"&&typeof n[1]=="number"&&Array.isArray(n[2])&&n[2].every(r=>typeof r=="string")}e.is=t,s(t,"is")})(LBt||={});var uA=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedLineEdit")}static fromEdit(e){let n=Lo.fromEdit(e);return new t(e.base,n)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new ru(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(r=>!r.lineRange.isEmpty||r.newLines.length>0,"isNotEmptyEdit"),n=this.edit.edits.map(r=>r.removeCommonSuffixPrefixLines(this.base)).filter(r=>e(r));return new t(this.base,new Lo(n))}};f();var UH=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,n){let r=Array.from(e.keys()).sort((i,o)=>n(e[i],e[o]));return new t(r)}apply(e){if(e.length!==this.arrayLength)throw aD(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((n,r)=>e[this._indexMap[r]])}mapIndexBack(e){let n=this._indexMap.at(e);if(n===void 0)throw aD(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return n}inverse(){let e=this._indexMap.slice();for(let n=0;n<this._indexMap.length;n++)e[this._indexMap[n]]=n;return new t(e)}};f();f();var w9=qe(th());function ZQe(t){return t.map(Q8t).join(`
`)}s(ZQe,"stringifyChatMessages");function Q8t({role:t,content:e}){if(t!==w9.Raw.ChatRole.User&&t!==w9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let n=t===w9.Raw.ChatRole.User?"User":"System",r=e.at(0);return r?.type!==w9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${n}
------
${r.text}
==================`}s(Q8t,"stringifyMessage");f();f();var O8t=Symbol("MicrotaskDelay");function U8t(t){let e=new Y1,n=t(e.token),r=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Tg)});Promise.resolve(n).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return r.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return r.finally(i)}}}s(U8t,"createCancelablePromise");function _y(t,e){return e?new Promise((n,r)=>{let i=setTimeout(()=>{o.dispose(),n()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),r(new Tg)})}):U8t(n=>_y(t,n))}s(_y,"timeout");var mj=class{constructor(e,n){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof n=="number"&&this.setIfNotSet(e,n)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,n){if(this._isDisposed)throw new fr("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},n)}setIfNotSet(e,n){if(this._isDisposed)throw new fr("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},n))}};var _9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,n)=>{this.completeCallback=e,this.errorCallback=n})}complete(e){return new Promise(n=>{this.completeCallback(e),this.outcome={outcome:0,value:e},n()})}error(e){return new Promise(n=>{this.errorCallback(e),this.outcome={outcome:1,value:e},n()})}cancel(){return this.error(new Tg)}},q8t;(n=>{async function t(r){let i,o=await Promise.all(r.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}n.settled=t,s(t,"settled");function e(r){return new Promise(async(i,o)=>{try{await r(i,o)}catch(a){o(a)}})}n.withAsyncBody=e,s(e,"withAsyncBody")})(q8t||={});var S9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(n=>{n.emitMany(e)})}static fromPromise(e){return new t(async n=>{n.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async n=>{await Promise.all(e.map(async r=>n.emitOne(await r)))})}static merge(e){return new t(async n=>{await Promise.all(e.map(async r=>{for await(let i of r)n.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new S0,queueMicrotask(async()=>{let r={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await A2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,n){return new t(async r=>{for await(let i of e)r.emitOne(n(i))})}map(e){return t.map(this,e)}static filter(e,n){return new t(async r=>{for await(let i of e)n(i)&&r.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,n=>!!n)}coalesce(){return t.coalesce(this)}static async toPromise(e){let n=[];for await(let r of e)n.push(r);return n}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var hj=class{constructor(e){this._deferred=new _9;this._asyncIterable=new S9(i=>{if(n){i.reject(n);return}return r&&i.emitMany(r),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let n,r;this._emitFn=i=>{r||(r=[]),r.push(i)},this._errorFn=i=>{n||(n=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();f();var Aj=!1,yj=!1,gj=!1,W8t=!1,G8t=!1,eOe=!1,H8t=!1,j8t=!1,V8t=!1,$8t=!1;var Sy,Ry=globalThis,xp;typeof Ry.vscode<"u"&&typeof Ry.vscode.process<"u"?xp=Ry.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(xp=process);var tOe=typeof xp?.versions?.electron=="string",z8t=tOe&&xp?.type==="renderer";typeof xp=="object"?(Aj=xp.platform==="win32",yj=xp.platform==="darwin",gj=xp.platform==="linux",W8t=gj&&!!xp.env.SNAP&&!!xp.env.SNAP_REVISION,H8t=tOe,V8t=!!xp.env.CI||!!xp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,G8t=!0):typeof navigator=="object"&&!z8t?(Sy=navigator.userAgent,Aj=Sy.indexOf("Windows")>=0,yj=Sy.indexOf("Macintosh")>=0,j8t=(Sy.indexOf("Macintosh")>=0||Sy.indexOf("iPad")>=0||Sy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,gj=Sy.indexOf("Linux")>=0,$8t=Sy?.indexOf("Mobi")>=0,eOe=!0):console.error("Unable to resolve platform.");var Mde=0;yj?Mde=1:Aj?Mde=3:gj&&(Mde=2);var hT=Aj,nOe=yj;var Y8t=eOe&&typeof Ry.importScripts=="function",Pdr=Y8t?Ry.origin:void 0;var mA=Sy;var K8t=typeof Ry.postMessage=="function"&&!Ry.importScripts,Ndr=(()=>{if(K8t){let t=[];Ry.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),Ry.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();var J8t=!!(mA&&mA.indexOf("Chrome")>=0),Ldr=!!(mA&&mA.indexOf("Firefox")>=0),Fdr=!!(!J8t&&mA&&mA.indexOf("Safari")>=0),Mdr=!!(mA&&mA.indexOf("Edg/")>=0),Qdr=!!(mA&&mA.indexOf("Android")>=0);var gT,Qde=globalThis.vscode;if(typeof Qde<"u"&&typeof Qde.process<"u"){let t=Qde.process;gT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?gT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:gT={get platform(){return hT?"win32":nOe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var R9=gT.cwd,rOe=gT.env,iOe=gT.platform,Hdr=gT.arch;var Z8t=65,eDt=97,tDt=90,nDt=122,xb=46,Jl=47,Ld=92,yb=58,rDt=63,Cj=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function iDt(t,e){if(t===null||typeof t!="object")throw new Cj(e,"Object",t)}s(iDt,"validateObject");function ma(t,e){if(typeof t!="string")throw new Cj(e,"string",t)}s(ma,"validateString");var Fd=iOe==="win32";function ai(t){return t===Jl||t===Ld}s(ai,"isPathSeparator");function Ode(t){return t===Jl}s(Ode,"isPosixPathSeparator");function Cb(t){return t>=Z8t&&t<=tDt||t>=eDt&&t<=nDt}s(Cb,"isWindowsDeviceRoot");function xj(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Jl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==xb||i.charCodeAt(i.length-2)!==xb){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===xb&&l!==-1?++l:l=-1}return i}s(xj,"normalizeString");function oDt(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(oDt,"formatExt");function oOe(t,e){iDt(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${oDt(e.ext)}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(oOe,"_format");var ha={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ma(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=R9():(o=rOe[`=${e}`]||R9(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Ld)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)ai(d)&&(l=1,u=!0);else if(ai(d))if(u=!0,ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else Cb(d)&&o.charCodeAt(1)===yb&&(c=o.slice(0,2),l=2,a>2&&ai(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=xj(n,!r,"\\",ai),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return Ode(o)?"\\":t;if(ai(o))if(i=!0,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else Cb(o)&&t.charCodeAt(1)===yb&&(r=t.slice(0,2),n=2,e>2&&ai(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?xj(t.slice(n),!i,"\\",ai):"";return a.length===0&&!i&&(a="."),a.length>0&&ai(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){ma(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return ai(n)||e>2&&Cb(n)&&t.charCodeAt(1)===yb&&ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];ma(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&ai(n.charCodeAt(0))){++i;let o=n.length;o>1&&ai(n.charCodeAt(1))&&(++i,o>2&&(ai(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ha.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e)return"";let n=ha.resolve(t),r=ha.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Ld;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Ld;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Ld;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Ld;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Ld&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Ld)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Ld?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Ld)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Ld&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ha.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Ld){if(e.charCodeAt(1)===Ld){let n=e.charCodeAt(2);if(n!==rDt&&n!==xb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Cb(e.charCodeAt(0))&&e.charCodeAt(1)===yb&&e.charCodeAt(2)===Ld)return`\\\\?\\${e}`;return t},dirname(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return ai(i)?t:".";if(ai(i)){if(n=r=1,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else Cb(i)&&t.charCodeAt(1)===yb&&(n=e>2&&ai(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(ai(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&ma(e,"suffix"),ma(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&Cb(t.charCodeAt(0))&&t.charCodeAt(1)===yb&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(ai(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(ai(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===yb&&Cb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(ai(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===xb?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:oOe.bind(null,"\\"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(ai(i)){if(r=1,ai(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!ai(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&ai(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!ai(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(Cb(i)&&t.charCodeAt(1)===yb){if(n<=2)return e.root=e.dir=t,e;if(r=2,ai(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),ai(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===xb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},sDt=(()=>{if(Fd){let t=/\\/g;return()=>{let e=R9().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>R9()})(),Fa={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:sDt();ma(i,`paths[${r}]`),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Jl)}return e=xj(e,!n,"/",Ode),n?`/${e}`:e.length>0?e:"."},normalize(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Jl,n=t.charCodeAt(t.length-1)===Jl;return t=xj(t,!e,"/",Ode),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ma(t,"path"),t.length>0&&t.charCodeAt(0)===Jl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];ma(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":Fa.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e||(t=Fa.resolve(t),e=Fa.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Jl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Jl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Jl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Jl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Jl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Jl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Jl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Jl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Jl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===xb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:oOe.bind(null,"/"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Jl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Jl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===xb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Fa.win32=ha.win32=ha;Fa.posix=ha.posix=Fa;var Vdr=Fd?ha.normalize:Fa.normalize,$dr=Fd?ha.isAbsolute:Fa.isAbsolute,zdr=Fd?ha.join:Fa.join,Ydr=Fd?ha.resolve:Fa.resolve,Kdr=Fd?ha.relative:Fa.relative,Jdr=Fd?ha.dirname:Fa.dirname,sOe=Fd?ha.basename:Fa.basename,aOe=Fd?ha.extname:Fa.extname,Xdr=Fd?ha.format:Fa.format,Zdr=Fd?ha.parse:Fa.parse,e0r=Fd?ha.toNamespacedPath:Fa.toNamespacedPath,t0r=Fd?ha.sep:Fa.sep,n0r=Fd?ha.delimiter:Fa.delimiter;var lDt=/^\w[\w\d+.-]*$/,cDt=/^\//,uDt=/^\/\//;function dDt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!lDt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!cDt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(uDt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(dDt,"_validateUri");function fDt(t,e){return!t&&!e?"file":t}s(fDt,"_schemeFix");function pDt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(pDt,"_referenceResolution");var zo="",rh="/",mDt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,bb=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||zo,this.authority=e.authority||zo,this.path=e.path||zo,this.query=e.query||zo,this.fragment=e.fragment||zo):(this.scheme=fDt(e,a),this.authority=n||zo,this.path=pDt(this.scheme,r||zo),this.query=i||zo,this.fragment=o||zo,dDt(this,a))}get fsPath(){return Ude(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=zo),r===void 0?r=this.authority:r===null&&(r=zo),i===void 0?i=this.path:i===null&&(i=zo),o===void 0?o=this.query:o===null&&(o=zo),a===void 0?a=this.fragment:a===null&&(a=zo),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new vb(n,r,i,o,a)}static parse(e,n=!1){let r=mDt.exec(e);return r?new vb(r[2]||zo,vj(r[4]||zo),vj(r[5]||zo),vj(r[7]||zo),vj(r[9]||zo),n):new vb(zo,zo,zo,zo,zo)}static file(e){let n=zo;if(hT&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let r=e.indexOf(rh,2);r===-1?(n=e.substring(2),e=rh):(n=e.substring(2,r),e=e.substring(r)||rh)}return new vb("file",n,e,zo,zo)}static from(e,n){return new vb(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return hT&&e.scheme==="file"?r=t.file(ha.join(Ude(e,!0),...n)).path:r=Fa.join(e.path,...n),e.with({path:r})}toString(e=!1){return qde(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new vb(e);return n._formatted=e.external??null,n._fsPath=e._sep===uOe?e.fsPath??null:null,n}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var uOe=hT?1:void 0,vb=class extends bb{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=Ude(this,!1)),this._fsPath}toString(n=!1){return n?qde(this,!0):(this._formatted||(this._formatted=qde(this,!1)),this._formatted)}toJSON(){let n={$mid:1};return this._fsPath&&(n.fsPath=this._fsPath,n._sep=uOe),this._formatted&&(n.external=this._formatted),this.path&&(n.path=this.path),this.scheme&&(n.scheme=this.scheme),this.authority&&(n.authority=this.authority),this.query&&(n.query=this.query),this.fragment&&(n.fragment=this.fragment),n}},dOe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function lOe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=dOe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(lOe,"encodeURIComponentFast");function hDt(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=dOe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(hDt,"encodeURIComponentMinimal");function Ude(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,hT&&(n=n.replace(/\//g,"\\")),n}s(Ude,"uriToFsPath");function qde(t,e){let n=e?hDt:lOe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=rh,r+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:lOe(c,!1,!1)),r}s(qde,"_asFormatted");function fOe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+fOe(t.substr(3)):t}}s(fOe,"decodeURIComponentGraceful");var cOe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function vj(t){return t.match(cOe)?t.replace(cOe,e=>fOe(e)):t}s(vj,"percentDecode");f();var ih=class t{constructor(e){this.uri=e;this._uri=bb.parse(ml(this.uri))}static{s(this,"DocumentId")}static{this._cache=new K1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return sOe(this.uri)}get extension(){return aOe(this.uri)}toUri(){return this._uri}};var k9=class t{constructor(e,n){this.firstEditStrategy=e;this.maxLinesPerEdit=n}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},bj=class t{constructor(e,n,r,i,o){this.id=e;this.documents=n;this.activeDocumentIdx=r;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new Y1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new _9;ql(n.length>0),ql(r>=0&&r<n.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(n=>n.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(n=>B9.deserialize(n)),e.activeDocumentIdx,[],k9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((n,r)=>` * [${r+1}/${this.documents.length}] ${r===this.activeDocumentIdx?"(active document) ":""}`+n.toMarkdown()).join(`

`)}`}},B9=class t{constructor(e,n,r,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=n;this.languageId=r;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Gl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(ih.create(e.id),e.workspaceRoot?bb.parse(e.workspaceRoot):void 0,v2.create(e.languageId),e.documentLinesBeforeEdit,Lo.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Gl(e.documentBeforeEdits),cA.deserialize(e.recentEdits),new Gl(e.documentAfterEditsNoShortening),n=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,n){this.nextEdit=e;this.telemetry=n}static{s(this,"StatelessNextEditResult")}static noEdit(e,n){let r=No.error(e),i=n.build(r);return new t(r,i)}static edit(e,n){let r=No.ok(e),i=n.build(r);return new t(r,i)}},Eb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let r=Date.now()-this.startTime,i=this._prompt?ZQe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:wD(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:r,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,n){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=n,ql(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function gDt(t,...e){let n=t;for(let r of e)n=r(n);return n}s(gDt,"chainStatelessNextEditProviders");var TR=class{constructor(e,n){this.ID=e;this._providers=n;let r={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=gDt(r,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,n){return this._impl.provideNextEdit(e,n)}},wR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,n){let r=await this._baseProvider.provideNextEdit(e,n);if(r.nextEdit.isError())return r;let i=r.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return r;if(a.length===0)return new Ri(No.error({kind:"filteredOut",message:"uncategorized"}),r.telemetry);let l=UH.createSortPermutation(a,T0(u=>u.lineRange.startLineNumber,w0)),c=new Lo(l.apply(a));return new Ri(No.ok({edit:c,permutation:l.inverse()}),r.telemetry)}},_R=class extends wR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,n){return n.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,n){let r=e.lineRange.toOffsetRange().slice(n),i=e.newLines,o=i.length===0;if(o&&r.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let l=r[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},SR=class extends wR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,n){return n.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,n,r){return n.startLineNumber>1&&e.lineRange.startLineNumber===1||n.endLineNumberExclusive<r&&e.lineRange.endLineNumberExclusive===n.length}};f();f();var ADt=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),yDt=new Map(Object.entries(ADt).map(([t,e])=>[t,{languageId:t,...e}]));function mOe(t){return Wde(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(mOe,"getLanguage");function Wde(t){return yDt.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(Wde,"_getLanguage");f();var RR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Md.isRange(e)&&typeof e.newText=="string":!1}static replace(e,n){return new t(e,n)}static insert(e,n){return t.replace(new Md(e,e),n)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let n=new t(new Md(new Io(0,0),new Io(0,0)),"");return n.newEol=e,n}get range(){return this._range}set range(e){if(e&&!Md.isRange(e))throw Ib("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Ib("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Ib("newEol");this._newEol=e}constructor(e,n){this._range=e,this._newText=n}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Io=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isBefore(n)&&(n=i)}return n}static Max(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isAfter(n)&&(n=i)}return n}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:n,character:r}=e;return typeof n=="number"&&typeof r=="number"}get line(){return this._line}get character(){return this._character}constructor(e,n){if(e<0)throw Ib("line must be non-negative");if(n<0)throw Ib("character must be non-negative");this._line=e,this._character=n}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,n=0){if(e===null||n===null)throw Ib();let r;return typeof e>"u"?r=0:typeof e=="number"?r=e:(r=typeof e.lineDelta=="number"?e.lineDelta:0,n=typeof e.characterDelta=="number"?e.characterDelta:0),r===0&&n===0?this:new t(this.line+r,this.character+n)}with(e,n=this.character){if(e===null||n===null)throw Ib();let r;return typeof e>"u"?r=this.line:typeof e=="number"?r=e:(r=typeof e.line=="number"?e.line:this.line,n=typeof e.character=="number"?e.character:this.character),r===this.line&&n===this.character?this:new t(r,n)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Md=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Io.isPosition(e.start)&&Io.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,n,r,i){let o,a;if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof i=="number"?(o=new Io(e,n),a=new Io(r,i)):Io.isPosition(e)&&Io.isPosition(n)&&(o=e,a=n),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Io.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let n=Io.Max(e.start,this._start),r=Io.Min(e.end,this._end);if(!n.isAfter(r))return new t(n,r)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let n=Io.Min(e.start,this._start),r=Io.Max(e.end,this.end);return new t(n,r)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,n=this.end){if(e===null||n===null)throw Ib();let r;return e?Io.isPosition(e)?r=e:(r=e.start||this.start,n=e.end||this.end):r=this.start,r.isEqual(this._start)&&n.isEqual(this.end)?this:new t(r,n)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return CDt(this)}};function Ib(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(Ib,"illegalArgument");function CDt(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(CDt,"getDebugDescriptionOfRange");f();function hOe(t){let n=t.split(/\r?\n/).map(xDt),r=n.filter(o=>o===1).length,i=n.filter(o=>o===2).length;return r>i}s(hOe,"looksLikeCode");function xDt(t){if(t.length===0)return 0;let e=0,n=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Eoe(t)||(e+=1);{Eoe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(n+=1),t.match(/^\s/)&&(n+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;n+=o}return e>n?2:n>e?1:0}s(xDt,"guessLineType");var kR;(n=>{function t(r){return r.length===0?[]:r.split(/\r\n|\r|\n/g)}n.fromString=t,s(t,"fromString");function e(r){if(r.lineCount===0)return[];let i=[];for(let o=0;o<r.lineCount;o++)i.push(r.lineAt(o).text);return i}n.fromDocument=e,s(e,"fromDocument")})(kR||={});function vDt(t){return t.replace(/^\s+/g,"")}s(vDt,"trimLeadingWhitespace");function Gde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(Gde,"isImportStatement");var bDt=new K1(t=>{let e=mOe(t),{start:n,end:r}=e.lineComment,i=`(?:${boe(n)})`,o=r?`(?:${boe(r)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function Hde(t,e){let n=t.match(bDt.get(e));if(!n)return;let r=n.index;if(typeof r>"u")return;let i=t.substring(0,r),o=n[0],a=vDt(n[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(Hde,"extractEndLineComment");function Ij(t,e){let n=Hde(t,e);if(!(n&&n.content.trim().length>0&&hOe(n.commentWithoutTokens)))return n}s(Ij,"extractExplicativeEndLineComment");var BR=class t extends wR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,n,r){return e.newLines.some(i=>Gde(i,n))||EDt(e,r).some(i=>Gde(i,n))}filterEdit(e,n){let r=e.languageId;return n.filter(o=>!t.isImportChange(o,r,e.documentLinesBeforeEdit))}};function EDt(t,e){return USe(t.lineRange.mapToLineArray(n=>e[n-1]))}s(EDt,"getOldLines");f();var Vde=qe(th());f();f();f();var oh;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function r(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=r,s(r,"getServiceDependencies")})(oh||={});var hA=Qd("instantiationService");function IDt(t,e,n){e[oh.DI_TARGET]===e?e[oh.DI_DEPENDENCIES].push({id:t,index:n}):(e[oh.DI_DEPENDENCIES]=[{id:t,index:n}],e[oh.DI_TARGET]=e)}s(IDt,"storeServiceDependency");function Qd(t){if(oh.serviceIds.has(t))return oh.serviceIds.get(t);let e=s(function(n,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");IDt(e,n,i)},"id");return e.toString=()=>t,oh.serviceIds.set(t,e),e}s(Qd,"createDecorator");f();f();var H0=class{static{s(this,"SyncDescriptor")}constructor(e,n=[],r=!1){this.ctor=e,this.staticArguments=n,this.supportsDelayedInstantiation=r}};f();var jde=class{constructor(e,n){this.key=e;this.data=n;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},D9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let n of this._nodes.values())n.outgoing.size===0&&e.push(n);return e}insertEdge(e,n){let r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(n);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){let n=this._hashFn(e);this._nodes.delete(n);for(let r of this._nodes.values())r.outgoing.delete(n),r.incoming.delete(n)}lookupOrInsertNode(e){let n=this._hashFn(e),r=this._nodes.get(n);return r||(r=new jde(n,e),this._nodes.set(n,r)),r}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[n,r]of this._nodes)e.push(`${n}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,n]of this._nodes){let r=new Set([e]),i=this._findCycle(n,r);if(i)return i}}_findCycle(e,n){for(let[r,i]of e.outgoing){if(n.has(r))return[...n,r].join(" -> ");n.add(r);let o=this._findCycle(i,n);if(o)return o;n.delete(r)}}};f();var AT=class{constructor(...e){this._entries=new Map;for(let[n,r]of e)this.set(n,r)}static{s(this,"ServiceCollection")}set(e,n){let r=this._entries.get(e);return this._entries.set(e,n),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var TDt=!1,Tj=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},wj=class t{constructor(e=new AT,n=!1,r,i=TDt){this._services=e;this._strict=n;this._parent=r;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(hA,this),this._globalGraph=i?r?._globalGraph??new D9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,XO(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)ZSe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,n){this._throwIfDisposed();let r=this,i=new class extends t{dispose(){r._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),n?.add(i),i}invokeFunction(e,...n){this._throwIfDisposed();let r=P9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw FSe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,r);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...n)}finally{i=!0,r.stop()}}createInstance(e,...n){this._throwIfDisposed();let r,i;return e instanceof H0?(r=P9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(n),r)):(r=P9.traceCreation(this._enableTracing,e),i=this._createInstance(e,n,r)),r.stop(),i}_createInstance(e,n=[],r){let i=oh.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,r);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:n.length;if(n.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${n.length} static arguments`);let l=a-n.length;l>0?n=n.concat(new Array(l)):n=n.slice(0,a)}return Reflect.construct(e,n.concat(o))}_setCreatedServiceInstance(e,n){if(this._services.get(e)instanceof H0)this._services.set(e,n);else if(this._parent)this._parent._setCreatedServiceInstance(e,n);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let n=this._services.get(e);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):n}_getOrCreateServiceInstance(e,n){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let r=this._getServiceInstanceOrDescriptor(e);return r instanceof H0?this._safeCreateAndCacheServiceInstance(e,r,n.branch(e,!0)):(n.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,n,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,n,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,n,r){let i=new D9(c=>c.id.toString()),o=0,a=[{id:e,desc:n,_trace:r}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new Tj(i);for(let u of oh.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof H0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new Tj(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof H0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,n,r=[],i,o){if(this._services.get(e)instanceof H0)return this._createServiceInstance(e,n,r,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,n,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${n.name}`)}_createServiceInstance(e,n,r=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(n,r,o);return a.add(l),l}}_throwIfStrict(e,n){if(n&&console.warn(e),this._strict)throw new Error(e)}};var P9=class t{constructor(e,n){this.type=e;this.name=n;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,n){return e?new t(2,n.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,n){return e?new t(1,n.name):t._None}static{this._totals=0}branch(e,n){let r=new t(3,e.toString());return this._dep.push([e,n,r]),r}stop(){let e=Date.now()-this._start;t._totals+=e;let n=!1;function r(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){n=!0,l.push(`${c}CREATES -> ${u}`);let m=r(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(r,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||n)&&t.all.add(i.join(`
`))}};var _j=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new AT(...e):e??new AT}static{s(this,"InstantiationServiceBuilder")}define(e,n){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,n)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new wj(this._collection,!0)}};var Rj=Qd("ITelemetrySender"),sh=Qd("IChatMLFetcher");var Sj=class{constructor(){this._stream=new hj;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,n){n.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(n.codeVulnAnnotations=void 0),n.codeVulnAnnotations&&(n.codeVulnAnnotations=n.codeVulnAnnotations.filter(r=>!this._seenAnnotationTypes.has(r.details.type)),n.codeVulnAnnotations.forEach(r=>this._seenAnnotationTypes.add(r.details.type))),this._stream.emitOne({text:e,delta:n})}resolve(){this._stream.resolve()}},kj=Qd("IEndpointProvider");f();var ky=Qd("IParserService");f();var DR=class{static{s(this,"DiffChange")}constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},N9=class{constructor(e,n=!0){this.lines=e;this.trimWhitespace=n}static{s(this,"LineSequence")}getElements(){let e=[];for(let n=0,r=this.lines.length;n<r;n++)e[n]=this.trimWhitespace?this.lines[n].trim():this.lines[n];return e}getCharCount(){let e=0;for(let n of this.lines)e+=n.length;return e}},L9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},Tb=class{static{s(this,"Debug")}static Assert(e,n){if(!e)throw new Error(n)}},wb=class{static{s(this,"MyArray")}static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}};var Bj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},F9=class t{static{s(this,"LcsDiff")}constructor(e,n){let[r,i]=t._getElements(e),[o,a]=t._getElements(n);this._originalStringElements=r,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let n=e.getElements(),r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=this._stringHash(n[i],0);return[n,r]}static _numberHash(e,n){return(n<<5)-n+e|0}static _stringHash(e,n){n=this._numberHash(149417,n);for(let r=0,i=e.length;r<i;r++)n=this._numberHash(e.charCodeAt(r),n);return n}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._originalStringElements[e]===this._modifiedStringElements[n]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,n,r,i){return this.ComputeDiffRecursive(e,n,r,i)}ComputeDiffRecursive(e,n,r,i){for(;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let d;return r<=i?(Tb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),d=[new DR(e,0,r,i-r+1)]):e<=n?(Tb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new DR(e,n-e+1,r,0)]):(Tb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Tb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,n,r,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,r,u),p=this.ComputeDiffRecursive(c+1,n,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,n,r,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new Bj,B=n,N=r,U=h[0]-v[0]-i,re=-1073741824,me=this.m_forwardHistory.length-1;do{let ae=U+e;ae===B||ae<N&&u[ae-1]<u[ae+1]?(p=u[ae+1],g=p-U-i,p<re&&k.MarkNextChange(),re=p,k.AddModifiedElement(p+1,g),U=ae+1-e):(p=u[ae-1]+1,g=p-U-i,p<re&&k.MarkNextChange(),re=p-1,k.AddOriginalElement(p,g+1),U=ae-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],B=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new Bj,B=a,N=l,U=h[0]-v[0]-c,re=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let ae=U+o;ae===B||ae<N&&d[ae-1]>=d[ae+1]?(p=d[ae+1]-1,g=p-U-c,p>re&&k.MarkNextChange(),re=p+1,k.AddOriginalElement(p+1,g+1),U=ae+1-o):(p=d[ae-1],g=p-U-c,p>re&&k.MarkNextChange(),re=p,k.AddModifiedElement(p+1,g+1),U=ae-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],B=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,n,r,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=n-e+(i-r),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-r,E=n-e,_=e-r,k=n-i,N=(E-b)%2===0;y[b]=e,v[E]=n;for(let U=1;U<=h/2+1;U++){let re=0,me=0;u=this.ClipDiagonalBound(b-U,U,b,g),d=this.ClipDiagonalBound(b+U,U,b,g);for(let ae=u;ae<=d;ae+=2){ae===u||ae<d&&y[ae-1]<y[ae+1]?l=y[ae+1]:l=y[ae-1]+1,c=l-(ae-b)-_;let H=l;for(;l<n&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[ae]=l,l+c>re+me&&(re=l,me=c),!N&&Math.abs(ae-E)<=U-1&&l>=v[ae])return o[0]=l,a[0]=c,H<=v[ae]&&U<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-U,U,E,g),m=this.ClipDiagonalBound(E+U,U,E,g);for(let ae=p;ae<=m;ae+=2){ae===p||ae<m&&v[ae-1]>=v[ae+1]?l=v[ae+1]-1:l=v[ae-1],c=l-(ae-E)-k;let H=l;for(;l>e&&c>r&&this.ElementsAreEqual(l,c);)l--,c--;if(v[ae]=l,N&&Math.abs(ae-b)<=U&&l<=y[ae])return o[0]=l,a[0]=c,H>=y[ae]&&U<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}if(U<=1447){let ae=new Int32Array(d-u+2);ae[0]=b-u+1,wb.Copy2(y,u,ae,1,d-u+1),this.m_forwardHistory.push(ae),ae=new Int32Array(m-p+2),ae[0]=E-p+1,wb.Copy2(v,p,ae,1,m-p+1),this.m_reverseHistory.push(ae)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N)}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){let i=new Array(e.length+n.length-1);return wb.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],wb.Copy(n,1,i,e.length,n.length-1),i}else{let i=new Array(e.length+n.length);return wb.Copy(e,0,i,0,e.length),wb.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Tb.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Tb.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(l=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new DR(i,o,a,l),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;let o=r,a=i-r-1,l=n%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function gOe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(gOe,"isObject");function Dj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(Dj,"assertType");function AOe(t){let e=new Set;return JSON.stringify(t,(n,r)=>{if(gOe(r)||Array.isArray(r)){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}s(AOe,"safeStringify");var Pj=!1,Yde=!0,wDt=200,M9=class{constructor(e,n){this.ID=e;this._parserService=n;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,n){let r=new Eb(e),i=e.getActiveDocument(),o=yT(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},r);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(...BDt(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,n);if(n.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r):Ri.noEdit({kind:"fetchFailure",error:new Error(AOe(g.err))},r);let{result:y,ttft:v}=g.val;if(v!==void 0&&r.setTtft(v),y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},r);let b=Nj(i.languageId,l,d,void 0,y,m),E=await Xde(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new Lo([E]);return Ri.edit({edit:_},r)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},r)}};M9=xu([Ds(1,ky)],M9);var PR=class extends M9{constructor(n,r){super(PR.ID,n);this._chatMLFetcher=r}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(n,r,i){if(i.isCancellationRequested)return No.error({kind:"cancel"});let o=await Kde(this.ID,this._chatMLFetcher,[{role:Vde.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:Vde.OpenAI.ChatRole.User,content:n}],{convergence:r},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),No.ok({ignored:a,result:l,ttft:c})}};PR=xu([Ds(0,ky),Ds(1,sh)],PR);async function Kde(t,e,n,r,i){let o=new Sj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=SDt(c,r),d=e.fetchOne(n,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?No.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):No.ok({ttft:l,ignored:p,result:m})}s(Kde,"fetchUntilConvergence");function yT(t){let e=new kt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:_Dt(t)}s(yT,"getOrDeduceSelectionFromLastEdit");function _Dt(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],n=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(n.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[n.endLineNumberExclusive-2],l=H5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(_Dt,"deduceSelectionFromLastEdit");async function SDt(t,e){let n=RDt(t,e.ignoreReplyTextBefore),r=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=r.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of n){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(r.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||r.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(SDt,"fetchCompletionUntilConvergence");function RDt(t,e){let n=[],r=[];return new S9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||n[l]){i.emitOne({kind:"completion",index:l,text:c});continue}r[l]=(r[l]??"")+c;let u=r[l].match(e);!u||typeof u.index>"u"||(n[l]=!0,i.emitOne({kind:"ignore",index:l,text:r[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:r[l].substring(u.index+u[0].length)}),r[l]=void 0)}for(let o=0;o<r.length;o++)typeof r[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:r[o]})})}s(RDt,"getTextAfterFirstPattern");function kDt(t,e,n){let r=e.startLineNumber,i=e.endLineNumberExclusive,o=n.slice(0);for(;r+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;r+1<i&&o.length>0;){let a=t[r-1],l=o[0];if(a!==l)break;r++,o.shift()}return new Jm(new Yt(r,i),o)}s(kDt,"createReducedLineEdit");var NR=class{constructor(e,n,r,i){this.languageId=e;this.oldLines=n;this.oldLines=n,this.edit=kDt(n,r,i);let o=new Lo([this.edit]);this.newLines=o.apply(n)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let n=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),r=this.edit.newLines;return o(n,r)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new $de(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),n=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),r=!1,i=new N9(this.oldLines,r),o=new N9(this.newLines,r),a=new F9(i,o),l=e(a.ComputeDiff(),i,o),c=n(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(d2(this.newLines,u))return new zde(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return COe(this.languageId,this.oldLines,u);function d(p,m){let h=new L9(p),g=new L9(m),v=new F9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,B=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:B}}}},$de=class{constructor(e,n,r,i,o){this.originalStart=e;this.originalLength=n;this.modifiedStart=r;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},zde=class{constructor(e,n,r,i,o,a){this.languageId=e;this.oldLines=n;this.edit=r;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Lo([this.edit]);{let n=this.groupInHunks();return new Lo(n.map(r=>{let i=r[0],o=r[r.length-1];return new Jm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!Yde)return this;let e=this.groupInHunks(),n=[];for(let r of e)r.every(o=>o.originalLength===0)||r.reduce((a,l)=>a+l.editDistance,0)>wDt&&(n=n.concat(r));if(n.length===this.diff.length)return null;if(n.length>0){let r=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(r)}return this}containWithinLines(e){let n=this.groupInHunks(),r=[];for(let i of n)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!Jde(new Yt(a,l),e)){r=r.concat(i);break}}if(r.length===this.diff.length)return null;if(r.length>0){let i=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let n of this.diff){let r=e.length>0?e[e.length-1]:null;if(!r){e.push([n]);continue}let i=r[r.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,n.originalStart);if(o.length>1){e.push([n]);continue}if(o[0].trim().length>10){e.push([n]);continue}if(r.reduce((c,u)=>c+u.originalLength,0)>1){e.push([n]);continue}r.push(n)}return e}_recreateNewLinesWithoutDiffs(e){let n=[],r=0;for(let i of e)n=n.concat(this.newLines.slice(r,i.modifiedStart)),n=n.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),r=i.modifiedStart+i.modifiedLength;return n=n.concat(this.newLines.slice(r)),n}async resolveParseErrorCountIfPossible(e,n){let r=new Lo([this.edit]),i=n(r);this.parseErrorCount=await Q9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(n=>this._createPossibleEditFromLines(n).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let n of this.diff){let r=this.oldLines.slice(n.originalStart,n.originalStart+n.originalLength),i=this.newLines.slice(n.modifiedStart,n.modifiedStart+n.modifiedLength);if(n.modifiedLength===0){if(r.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,0,...r),e(a)}continue}if(n.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,n.modifiedLength),e(a)}continue}for(let o=0;o<r.length&&o<i.length;o++){let a=r[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,1),e(d)}}}for(let o=1;o<=r.length&&o<=i.length;o++){let a=r[r.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],n=0,r=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(n,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);r=r||l,e=e.concat(c),n=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(n)),r?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,n){if(n.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=Ij(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let r=e.map(c=>Ij(c,this.languageId)),i=n.map(c=>Ij(c,this.languageId)),o=r.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:n};if(o>0)return{hasChanges:!1,newDiffModifiedLines:n};let l=!1;for(let c=0;c<n.length;c++){let u=n[c],d=i[c];if(!d)continue;let{content:p}=d;n[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:n}}_createPossibleEditFromLines(e){return COe(this.languageId,this.oldLines,e)}};function Jde(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Jde,"editIsInsideEditWindow");function COe(t,e,n){let i=e.length+1,o=n.slice(0);return new NR(t,e,new Yt(1,i),o).resolveDiff()}s(COe,"createPossibleEditFromLines");function Nj(t,e,n,r,i,o){if(i.trim().length===0)return[];let a=kR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new NR(t,e,v,b))},"generateEdit");function d(){r&&u(r,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(n.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=n.endLineNumberExclusive-1;_<e.length;_++){let B=e.slice(_,_+v).join(`
`);E===B&&u(new Yt(n.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...Nj(t,e,n,r,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let B=b(k);E.has(B)||(E.add(B),_.push(k))}return _}}s(Nj,"generatePossibleEdits");async function Xde(t,e,n,r){let a=e.filter(p=>p.hasEditWithinFirstLines(r.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=Pj?await Q9(t,n.languageId,n.documentAfterEditsNoShortening.value):"unknown";if(Pj){let p=s(m=>{let h=n.documentAfterEditsNoShortening;return n.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(Xde,"selectBestEdit");function BDt(t){let n=[],r=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&n.push("[...]"),u?n.push(`-${r[c]}`):n.push(`${r[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;n.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<r.length;)i-o+2<=2&&l(i,!1),i++;return n.push("[...]"),n}s(BDt,"summariseDocDiff");function xOe(t){let e=[];for(let n of t.recentEdit.edits){let r=t.documentLinesBeforeEdit.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1),i=n.newLines;if(r.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=n.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${r.length} +${o},${i.length} @@`),e.push(...r.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(xOe,"summarizeEditsAsUnifiedDiff");async function Q9(t,e,n){return await t.getTreeSitterAST({languageId:e,getText:s(()=>n,"getText")})?.getParseErrorCount()??"unknown"}s(Q9,"getParseErrorCount");f();var By=qe(th());f();var O9=Qd("ITokenizerProvider");var _b=class extends By.PromptRenderer{constructor(n,r,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,n,r,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(n,r,i,o={validate:!0}){return n.invokeFunction(a=>{let l=a.get(O9);return new _b(r,i,o,l,n,a.get(sh))})}createElement(n,...r){return this._instantiationService.createInstance(n.ctor,n.props,...r)}async render(n,r,i){let o=await super.render(n,r);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===By.Raw.ChatRole.System&&d.role===By.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===By.Raw.ChatCompletionContentPartKind.Text&&m.type===By.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:By.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==By.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(n){return(await super.render(void 0,n)).tokenCount}};_b=xu([Ds(3,O9),Ds(4,hA),Ds(5,sh)],_b);f();var vOe=qe(th());var Lj=class extends vOe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var CT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=I0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new ir(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Wl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Wl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Zde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new kt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Md(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},ah=class extends Zde{constructor(n){super();this.value=n;this._transformer=new CT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(n){let r=this._transformer.getOffset(new ir(n+1,1)),i=r+this.getLineLength(n);return this.value.substring(r,i)}getLineLength(n){return this._transformer.getLineLength(n+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(n){return n.substring(this.value)}getPositionAtOffset(n){return DDt(this._transformer.getPosition(n))}getOffsetAtPosition(n){return n=this._validatePosition(n),this._transformer.getOffset(PDt(n))}_validatePosition(n){if(n.line<0)return new Io(0,0);let r=this._transformer.textLength.lineCount+1;if(n.line>=r){let o=this._transformer.getLineLength(r);return new Io(r-1,o)}if(n.character<0)return new Io(n.line,0);let i=this._transformer.getLineLength(n.line+1);return n.character>i?new Io(n.line,i):n}};function DDt(t){return new Io(t.lineNumber-1,t.column-1)}s(DDt,"corePositionToVSCodePosition");function PDt(t){return new ir(t.line+1,t.character+1)}s(PDt,"vsCodePositionToCorePosition");f();f();function bOe(t){if(t.length===0)return 1/0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}s(bOe,"min");f();function e0e(t,e){let n=e(t);return{...n,range:[n.range.start,n.range.endExclusive],children:n.children?.map(r=>e0e(r,e))}}s(e0e,"toAstNode");function EOe(t,e){let n=c2(e,a=>a.endExclusive>=t.start),r=I0(e,a=>a.start<=t.endExclusive)+1;if(n===r)return[t];let i=[],o=t.start;for(let a=n;a<r;a++){let l=e[a];l.start>o&&i.push(new kt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new kt(o,t.endExclusive)),i}s(EOe,"subtractRange");f();f();f();var Fj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,n){e=b2(e);let r=this.values,i=this.prefixSum,o=n.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(n,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,n){return e=b2(e),n=b2(n),this.values[e]===n?!1:(this.values[e]=n,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,n){e=b2(e),n=b2(n);let r=this.values,i=this.prefixSum;if(e>=r.length)return!1;let o=r.length-e;return n>=o&&(n=o),n===0?!1:(this.values=new Uint32Array(r.length-n),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+n),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=b2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let n=this.prefixSumValidIndex[0]+1;n===0&&(this.prefixSum[0]=this.values[0],n++),e>=this.values.length&&(e=this.values.length-1);for(let r=n;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let n=0,r=this.values.length-1,i=0,o=0,a=0;for(;n<=r;)if(i=n+(r-n)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)r=i-1;else if(e>=o)n=i+1;else break;return new t0e(i,e-a)}};var t0e=class{constructor(e,n){this.index=e;this.remainder=n;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=n}static{s(this,"PrefixSumIndexOfResult")}};var U9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Pg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let n=new Uint32Array(this._lines.length);for(let r=0;r<this._lines.length;r++)n[r]=this._lines[r].length+this._eol.length;this._lineStarts=new Fj(n)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:n}=e;for(let r=n.length-1;r>=0;r--){let i=n[r],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,n){if(n.length===0)return;let r=Pg(n);if(r.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]+this._lines[e.line].substring(e.character));return}r[r.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]);let i=new Uint32Array(r.length-1);for(let o=1;o<r.length;o++)this._lines.splice(e.line+1+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,n){this._lines[e]=n,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let n=this._lineStarts.getIndexOf(e),r=this._lines[n.index].length;return new Io(n.index,Math.min(n.remainder,r))}toRange(e){return new Md(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new kt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let n=e.map(r=>new RR(this.validateRange(r.range),r.newText));return new yp(n.map(r=>new ol(this.toOffsetRange(r.range),r.newText)))}toTextEdits(e){return e.edits.map(n=>new RR(this.toRange(n.replaceRange),n.newText))}validatePosition(e){if(!(e instanceof Io))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:n,character:r}=e,i=!1;if(n<0)n=0,r=0,i=!0;else if(n>=this._lines.length)n=this._lines.length-1,r=this._lines[n].length,i=!0;else{let o=this._lines[n].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new Io(n,r):e}validateRange(e){return new Md(this.validatePosition(e.start),this.validatePosition(e.end))}};var Mj=class{constructor(e,n){this.originalText=e;this.edits=n;this._positionOffsetTransformer=new Dg(()=>new U9(this.text));this._originalPositionOffsetTransformer=new Dg(()=>new U9(this.originalText));this._text=new Dg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let n=this.originalPositionOffsetTransformer.toOffsetRange(e),r=this.projectOffsetRange(n);return this.positionOffsetTransformer.toRange(r)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let n=this.positionOffsetTransformer.toOffsetEdit(e),r=this.projectBackOffsetEdit(n);return this.originalPositionOffsetTransformer.toTextEdits(r)}};var n0e=class{constructor(e,n,r,i,o){this.parent=e;this.overlayNode=n;this.range=r;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},vT=class extends Mj{constructor(n,r){super(n.getText(),r);this.baseDocument=n}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function Oj(t,e,n){let r=[],i=[],o=[];for(let l=0;l<n.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=n[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=IOe(u,c),g=r0e.fromRootNode(h,p),y=i0e.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(U=>U.node.range.intersectsOrTouches(m)?(U.node.children.length===0&&U.markAsSurviving(),!0):!1),r.push(y),i.push(y.getTextFragment());let v=s(U=>m?U.range.endExclusive<m.start?m.start-U.range.endExclusive:U.range.start>m.endExclusive?3*(U.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new K1(U=>m?U.children.length===0?U.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:bOe(U.children.map(re=>b.get(re)))+1:0),E=new K1(U=>{let re=U.parent?E.get(U.parent):Number.MAX_SAFE_INTEGER,me=b.get(U);return Math.min(re,me)}),_=!!e.tryPreserveTypeChecking,k=s(U=>_&&U.node?.kind==="import_statement"?0:100*E.get(U)+U.depth+10*(v(U)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(B!==void 0){let U=k;k=s(re=>{let me=U(re);return me===!1?!1:re.node?B(re.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let U of N){if(!U.node.node)continue;let re=k(U.node);re!==!1&&o.push({idx:l,node:U,cost:re})}}o.sort(T0(l=>l.cost,w0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),r.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=r[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=n[l],d=new vT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=r[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:EOe(kt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:e0e(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(Oj,"summarizeDocumentsSyncImpl");function IOe(t,e,n=void 0){let r=new kt(t.startIndex,t.endIndex),i=[],o=new n0e(n,t,r,i,e);for(let a of t.children)i.push(IOe(a,e,o));return o}s(IOe,"createRemovableNodeFromOverlayNode");var r0e=class t{constructor(e,n,r,i,o,a){this.node=e;this.range=n;this.children=r;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,n){let r=new kt(0,n.length);if(e.range.equals(r))return t.fromNode(e,n);let i=new kt(0,e.range.start),o=new kt(e.range.endExclusive,n.length),a=[],l=new t(void 0,r,a,0,null,n);return i.isEmpty||a.push(new t(void 0,i,[],0,l,n)),a.push(t.fromNode(e,n,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,n)),l}static fromNode(e,n,r=0,i=null){let o=[],a=new t(e,e.range,o,r,i,n);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new kt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],r,a,n)),o.push(t.fromNode(u,n,r+1,a)),l=u.range.endExclusive}let c=new kt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],r,a,n))}return a}getLeadingWs(){return NDt(this.document,this.range)}getTrailingWs(){return LDt(this.document,this.range)}};function NDt(t,e){let n=e.substring(t),r=n.length-n.trimStart().length;return n.substring(0,r)}s(NDt,"getLeadingWs");function LDt(t,e){let n=e.substring(t),r=n.length-n.trimEnd().length;return n.substring(n.length-r)}s(LDt,"getTrailingWs");var i0e=class t{constructor(e,n,r,i,o){this.node=e;this.parent=n;this.childNodes=r;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,n,r){return t.fromNodeParent(e,null,n,r)}static fromNodeParent(e,n,r,i){let o=[],a=new t(e,n,o,r,i);for(let l of e.children){let c=t.fromNodeParent(l,a,r,i);o.push(c)}return a}visitAll(e){if(e(this))for(let n of this.childNodes)n.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Sb(this.node.range,this.node.document);if(!this._surviving)return new xT("");let e=Array.from(m5(this.childNodes.map(r=>({node:r,fragment:r.getTextFragment()})),(r,i)=>r.fragment.length===0==(i.fragment.length===0)));for(let r=0;r<e.length;r++){let i=e[r],o=i[0].fragment.length===0;if(o&&r>0&&r<e.length-1){let a=e[r-1].at(-1),l=e[r+1].at(0);if(a.fragment instanceof Sb&&l.fragment instanceof Sb){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[r-1][e[r-1].length-1].fragment=c,i.length=1,i[0].fragment=new xT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[r+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(r>0||r<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new xT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let n=[];for(let r of e)for(let i of r)FDt(n,i.fragment);return Qj.from(n)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let n of this.childNodes)n._getDescendantsAndSelf(e)}},q9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let n=[],r=0,i="";function o(l){(r!==l||i.length>0)&&(n.push(new ol(new kt(r,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof Qj)for(let c of l.fragments)a(c);else l instanceof xT?i+=l.text:l instanceof Sb&&(o(l.range.start),r=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new yp(n)}},xT=class extends q9{constructor(n){super();this.text=n}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Sb=class t extends q9{constructor(n,r){super();this.range=n;this.originalText=r}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let n=this.text.trimStart();return n.length===this.length?this:new t(new kt(this.range.endExclusive-n.length,this.range.endExclusive),this.originalText)}trimEnd(){let n=this.text.trimEnd();return n.length===this.length?this:new t(new kt(this.range.start,this.range.start+n.length),this.originalText)}startsWith(n){return this.text.startsWith(n)}endsWith(n){return this.text.endsWith(n)}tryJoin(n){return this.range.endExclusive===n.range.start?new t(new kt(this.range.start,n.range.endExclusive),this.originalText):null}},Qj=class t extends q9{constructor(n){super();this.fragments=n;this.length=this.fragments.reduce((n,r)=>n+r.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(n){return n.length===0?new xT(""):n.length===1?n[0]:new t(n)}get text(){return this.fragments.map(n=>n.text).join("")}};function FDt(t,e){if(e.length===0)return;let n=t[t.length-1];if(n&&n instanceof Sb&&e instanceof Sb){let r=n.tryJoin(e);if(r){t[t.length-1]=r;return}}t.push(e)}s(FDt,"pushFragment");f();var Uj=qe(th());function W9(t){if(Array.isArray(t))return t.map(n=>W9(n));let e=(0,Uj.toMode)(Uj.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let n of e.content)n.type==="text"&&(n.text=n.text.trimEnd());return e}s(W9,"rawMessageToCAPI");f();f();var qj=class{constructor(e,n,r,i){this.startIndex=e;this.endIndex=n;this.kind=r;this.children=i;if(e>n)throw new fr("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new fr("Invalid child startIndex");if(a.endIndex>n)throw new fr("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function n(r,i=""){e.push(`${i}${r.kind} [${r.startIndex}, ${r.endIndex}]`),r.children.forEach(o=>n(o,i+"    "))}return s(n,"toString"),n(this),e.join(`
`)}};function wOe(t,e,n){let r=t.getText().split(/\r\n|\r|\n/g),i=n||{tabSize:4},o={getLineCount:s(()=>r.length,"getLineCount"),getLineContent:s(a=>r[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=MDt(o,e),[l]=_Oe(t,a,void 0);return l.adjust(t,SOe(e)),l.toOverlayNode(t,!0)}catch{return new Wj(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(wOe,"getStructureUsingIndentation");function _Oe(t,e,n){if(typeof n<"u"&&n>=e.length)throw new Error(`Invalid region index ${n}`);let r=typeof n>"u"?1:e.getStartLineNumber(n),i=typeof n>"u"?t.getLineCount():e.getEndLineNumber(n),o=[],a=null;for(n=typeof n>"u"?0:n+1;n<e.length;){let l=e.getStartLineNumber(n),c=e.getEndLineNumber(n);if(l>i||c>i)break;let u=a;if([a,n]=_Oe(t,e,n),u&&a.startLineNumber<=u.endLineNumber)throw new fr("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<r)throw new fr("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Wj(r,i,o),n]}s(_Oe,"createFoldingRangeTree");var Wj=class{constructor(e,n,r){this.startLineNumber=e;this.endLineNumber=n;this.children=r;if(e>n)throw new fr("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,n){n?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,n){if(this.endLineNumber<n){let r=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(r),o=/^<\/\w/.test(r);(i||o)&&this.endLineNumber++}for(let r=this.children.length-1;r>=0;r--){let i=this.children[r],o=r+1<this.children.length?this.children[r+1].startLineNumber-1:n;i._adjustRegular(e,o)}}toOverlayNode(e,n){let r=[],i=n&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=o0e(e,a,a,"LINE",[]);l&&r.push(l)}r.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=o0e(e,o,o,"LINE",[]);a&&r.push(a)}return o0e(e,this.startLineNumber,this.endLineNumber,"FOLD",r)}};function o0e(t,e,n,r,i){let o=t.getOffsetAtPosition(new Io(e-1,0)),a=n<t.getLineCount()?new Io(n,0):new Io(n-1,t.getLineLength(n-1)),l=t.getOffsetAtPosition(a);return new qj(o,l,r,i)}s(o0e,"createOverlayNode");function MDt(t,e){return QDt(t,SOe(e))}s(MDt,"generateFoldingRegions");function SOe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(SOe,"isOffSide");function QDt(t,e){let n=t.getOptions().tabSize,r=new s0e,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=UDt(l,n),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&r.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return r.toIndentRanges()}s(QDt,"_computeRanges");var ODt=65535,bT=16777215,TOe=4278190080,s0e=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,n,r){if(e>bT||n>bT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=n,this._length++,r<1e3&&(this._indentOccurrences[r]=(this._indentOccurrences[r]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,i=0;r>=0;r--,i++)e[i]=this._startIndexes[r],n[i]=this._endIndexes[r];return new a0e(e,n)}};function UDt(t,e){let n=0,r=0,i=t.length;for(;r<i;){let o=t.charCodeAt(r);if(o===32)n++;else if(o===9)n=n-n%e+e;else break;r++}return r===i?-1:n}s(UDt,"computeIndentLevel");var a0e=class{static{s(this,"FoldingRegions")}constructor(e,n){this._startIndexes=e,this._endIndexes=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],n=s((r,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=r&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let r=0,i=this._startIndexes.length;r<i;r++){let o=this._startIndexes[r],a=this._endIndexes[r];if(o>bT||a>bT)throw new Error("startLineNumber or endLineNumber must not exceed "+bT);for(;e.length>0&&!n(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(r),this._startIndexes[r]=o+((l&255)<<24),this._endIndexes[r]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&bT}getEndLineNumber(e){return this._endIndexes[e]&bT}getParentIndex(e){this.ensureParentIndices();let n=((this._startIndexes[e]&TOe)>>>24)+((this._endIndexes[e]&TOe)>>>16);return n===ODt?-1:n}contains(e,n){return this.getStartLineNumber(e)<=n&&this.getEndLineNumber(e)>=n}findIndex(e){let n=0,r=this._startIndexes.length;if(r===0)return-1;for(;n<r;){let i=Math.floor((n+r)/2);e<this.getStartLineNumber(i)?r=i:n=i+1}return n-1}findRange(e){let n=this.findIndex(e);if(n>=0){if(this.getEndLineNumber(n)>=e)return n;for(n=this.getParentIndex(n);n!==-1;){if(this.contains(n,e))return n;n=this.getParentIndex(n)}}return-1}};f();function ET(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(ET,"fromUnknown");var xl=qe(th());var Gj="current-version",j0="next-version",kOe=2,BOe=10,DOe=.7,qDt=/```[^\n]*\n/,Dy=class extends TR{constructor(n,r,i){super(Dy.ID,[o=>new BR(o),o=>new _R(o),o=>new SR(o)]);this.fetcher=n;this._parserService=r;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new QH}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(n,r){if(n.getActiveDocument().id!==r.getActiveDocument().id||n.documents.length!==r.documents.length)return!1;let i=new Map(n.documents.map(a=>[a.id,a]));for(let a of r.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=yT(a),u=c?l0e(a,c):null,d=yT(l),p=d?l0e(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(kOe,BOe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(n,r){let i=new Eb(n),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(n,i,o,r)}catch(c){return Ri.noEdit({kind:"unexpected",error:ET(c)},i)}let l=o.getArtificalDelay();return l>0&&await _y(l),a}async doGetNextEdit(n,r,i,o){return n.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(n,i,o,r):Ri.noEdit({kind:"activeDocumentHasNoEdits"},r)}async sendRequestAndProcessResult(n,r,i,o){let a=await this.createPrompt(n,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(r,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),n.fetchIssued=!0;let b=await Kde(this.ID,this.fetcher,W9(p),{convergence:g,ignoreReplyTextBefore:qDt,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:ET(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${j0}>
`,B=b.val.ignored.indexOf(k);B>=0&&(E=b.val.ignored.substring(B+k.length))}if(E=WDt(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=GDt(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=HDt(l,k);if(B.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Pj){let re=await Q9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=B.apply(y.documentAfterEditsNoShortening.value);if(await Q9(this._parserService,y.languageId,me)>re)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=jDt(y,B);let N=_.edits[0].lineRange.startLineNumber,U=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Jde(new Yt(N,U),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=Nj(y.languageId,v,m,h,E,void 0),B=await Xde(this._parserService,k,y,{requireEditWithinNLines:100});if(!B)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Lo([B])}return VDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):$Dt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):zDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):YDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(n,r){let i=n.getDebounceTime();r.setDebounceTime(i),await _y(i)}async createPrompt(n,r){let i=n.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=yT(i);if(c===null)return;let u=l0e(i,c),d=new ah(i.documentAfterEditsNoShortening.value),p=await XDt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=KDt(i.documentAfterEditsLines,c.startLineNumber),ae=Math.max(1,Math.min(me,c.startLineNumber-kOe)),H=c.startLineNumber-ae,G=Math.min(l.length,c.endLineNumber+BOe),ue=G-c.endLineNumber,ie=u.line-H,$=u.line+ue,O=new Md(ie,0,$,d.getLineLength($));return{firstEditableLineInShortenedDocument:ae,lastEditableLineInShortenedDocument:G,editWindow:O}}(),y=Oj(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:B}=await this._renderPrompt({request:n,activeDocumentSlice:E,languageId:i.languageId},r),N=E.split(/\r\n|\r|\n/).length,U=y.projectRange(g),re=y.positionOffsetTransformer.toOffsetRange(U);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(U.start.line+1,U.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:re.start,maxCompletionLineCount:N+20}}async _renderPrompt(n,r){let o=await _b.create(this._instantiationService,u0e,n).render(void 0,r,{trace:!1}),a=o.metadata.get(zj)?.prediction,l=!!o.metadata.get(jj);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};Dy=xu([Ds(0,sh),Ds(1,ky),Ds(2,hA)],Dy);function WDt(t){function e(n,r,i){let o=n.lastIndexOf(r);if(o===-1)return n;let a=n.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${j0}>`,`
`),t=e(t,`\`\`\`
</${j0}>`,`
`),t=e(t,`</${j0}>`,`
`),t}s(WDt,"removeSuffixFromReply");function l0e(t,e){let n=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),r=t.toOffsetOnDocumentAfterEditsNoShortening(n);return new ah(t.documentAfterEditsNoShortening.value).getPositionAtOffset(r)}s(l0e,"getCursorPositionInOuterDocument");function GDt(t,e,n,r){let i=kR.fromString(e.text),o=kR.fromString(r.trimEnd()),l=new NR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(n);if(!c)return null;let u=Yde?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(GDt,"generateSummarizedEditWindowEdit");function HDt(t,e){let n=e.toEdit(new Gl(t.text));return t.projectBackOffsetEdit(n.toOffsetEdit())}s(HDt,"convertSummarizedEditWindowEditToOuterDocumentEdit");function jDt(t,e){let n=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Gs.replace(new kt(a,a+i.replaceRange.length),i.newText)}),r=new ru(t.documentAfterEdits,Is.create(n));return Lo.fromEdit(r)}s(jDt,"convertOuterDocumentEditToProjectedEdit");function VDt(t,e){let n=e.toEdit(t.documentAfterEdits),r=POe(t.documentAfterEdits.value,n),i=new Hj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(POe(o,a)),o=a.apply(o);return!!i.isUndoneBy(r)}s(VDt,"editWouldUndo");function $Dt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!QOe(n))return!1;for(let r=t.recentEdits.edits.length-1;r>=0;r--){let i=t.recentEdits.edits[r],o=n.tryRebase(i);if(!o)return!0;n=o}return!1}s($Dt,"editWouldDeleteWhatWasJustInserted");function zDt(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!QOe(n))return!1;for(let r of n.edits){let i=t.documentAfterEdits.value.substring(r.range.start,r.range.endExclusive);if(Hde(i,t.languageId))return!0}return!1}s(zDt,"editWouldDeleteAComment");function YDt(t,e){if(e.edits.length!==1)return!1;let n=e.edits[0];if(!n.lineRange.isEmpty)return!1;let r=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(n.newLines.filter(r));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(r));return c0e(o,i)/i.size>.8}s(YDt,"editWouldDuplicateExistingLines");function QOe(t){let e=t.edits.reduce((r,i)=>r+i.range.length,0);return t.edits.reduce((r,i)=>r+i.newText.length,0)===0&&e>0}s(QOe,"editIsDeletion");function KDt(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(KDt,"findLineNumberAboveWithContent");var Hj=class t{constructor(e=new Set,n=new Set){this.inserted=e;this.deleted=n}static{s(this,"InformationDelta")}combine(e){return new t(LOe(this.inserted,e.inserted),LOe(this.deleted,e.deleted))}isUndoneBy(e){let n=FOe(e.inserted,e.deleted),r=FOe(e.deleted,e.inserted),i=c0e(r,this.inserted),o=c0e(n,this.deleted);return r.size>6&&i/r.size>DOe||n.size>6&&o/n.size>DOe}};function POe(t,e){let n=new Set,r=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of NOe(c))r.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of NOe(l))n.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(JDt(l.newText,c.newText)))}return new Hj(n,r)}s(POe,"getInformationDelta");function JDt(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.slice(0,t.length-r),o=e.slice(r);if(i===o)return i}return""}s(JDt,"trimOverlap");function NOe(t){let e=[];for(let n=4;n<t.length;n++){let r=t.slice(n-4,n);e.push(r)}return e}s(NOe,"to4grams");function LOe(t,e){let n=new Set;for(let r of t)n.add(r);for(let r of e)n.add(r);return n}s(LOe,"setUnion");function FOe(t,e){let n=new Set;for(let r of t)e.has(r)||n.add(r);return n}s(FOe,"setMinus");function c0e(t,e){let n=0;for(let r of t)e.has(r)&&n++;return n}s(c0e,"setIntersectionCount");async function XDt(t,e){let r=await t.getTreeSitterAST(e)?.getStructure();return r||wOe(new ah(e.getText()),e.languageId,void 0)}s(XDt,"getStructure");var u0e=class extends xl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,n){let{request:r,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${j0}>`,`\`\`\`${o}`,`${i}`,"```",`</${j0}>`].join(`
`),l=(0,xl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new zj(a)}),vscpp(xl.SystemMessage,{priority:1e3},vscpp(Lj,null),this._getInstructions()),vscpp(xl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp(Vj,{doc:c}))):vscpp(xl.Chunk,{priority:100+u},vscpp(Vj,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp($j,{doc:c}))):vscpp(xl.Chunk,{priority:200+u},vscpp($j,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(xl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new jj}),"Here is the piece of code I am currently editing in"," ",r.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Gj,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Gj,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Gj,"> and </",Gj,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",j0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",j0,">IDENTICAL</",j0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",j0,">.")}}},jj=class extends xl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Vj=class extends xl.PromptElement{static{s(this,"OriginalDocument")}async render(e,n){let{doc:r}=this.props,i=[];for(let o=0;o<r.documentLinesBeforeEdit.length;o++){let a=r.documentLinesBeforeEdit[o];i.push(`${r.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,r.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},$j=class extends xl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,n){let{doc:r}=this.props,i=[];return i.push("```"),i.push(`---${r.getDisplayPath()}:`),i.push(`+++${r.getDisplayPath()}:`),i.push(...xOe(r)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},zj=class extends xl.PromptMetadata{constructor(n){super();this.prediction=n}static{s(this,"PredictionMetadata")}};f();f();function OOe(t,e){let n=[];for(let[r,i]of t.entries())i===e&&n.push(r);return n}s(OOe,"findIndexes");function ZDt(t,e,n,r=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=OOe(n,e[o]).slice(0,r);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=n[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=OOe(t,e[l]).slice(-r).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(ZDt,"deduplicateEditRegion");function UOe(t,e,n){let r=t.getLines(),i=r.slice(0,e[0]),o=r.slice(e[1]+1);return{updatedEditWindow:ZDt(i,n.split(/\r?\n/),o).join(`
`)}}s(UOe,"postProcessUpdatedEditWindow");f();var Yj=qe(th());function qOe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Yj.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Yj.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(qOe,"getTextPart");function ePt(t){return{type:Yj.Raw.ChatCompletionContentPartKind.Text,text:t}}s(ePt,"toTextPart");function d0e(t){return[ePt(t)]}s(d0e,"toTextParts");f();var Kj=Qd("IDiffService");var g0e=qe(th());f();var Jj="<|cursor|>",IT="<|code_to_edit|>",LR="<|/code_to_edit|>",GOe="<|area_around_code_to_edit|>",HOe="<|/area_around_code_to_edit|>",tPt="<|current_file_content|>",nPt="<|/current_file_content|>",rPt="<|edit_diff_history|>",iPt="<|/edit_diff_history|>",oPt="<|recently_viewed_code_snippets|>",sPt="<|/recently_viewed_code_snippets|>",aPt="<|recently_viewed_code_snippet|>",lPt="<|/recently_viewed_code_snippet|>",jOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${IT} and ${LR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Jj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${IT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${IT} and ${LR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${IT} or ${LR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function VOe(t,e,n,r){let i=t.getActiveDocument(),o=dPt(t,r),a=cPt(t,r,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${oPt}
${o}
${sPt}

${tPt}
current_file_path: ${l}
${e}
${nPt}

${rPt}
${a}
${iPt}

${n}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Jj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${IT}\` and \`${LR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(VOe,"getUserPrompt");function cPt(t,e,n){let r=[];for(let a of t.xtabEditHistory.reverse()){let l=uPt(a);if(l===null)continue;let c=e(l);if(n-=c,n<0)break;r.push(l)}let i=r.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(cPt,"getEditDiffHistory");function uPt(t){let e=[],n=Lo.fromEdit(t.edit);for(let i of n.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(uPt,"generateDocDiff");function WOe(t,e,n=!1){let r=n?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[aPt,r,e,lPt].join(`
`)}s(WOe,"formatCodeSnippet");function dPt(t,e,n=2e3,r=!1){n=n||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);r&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(WOe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>n;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(WOe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(dPt,"getRecentCodeSnippets");function f0e(t,e,n){if(!t.length)return[0,0];let r=n*4,i=0,o=e?t.length-1:0;for(;i<r;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(f0e,"truncateCode");var $Oe=2,zOe=10,p0e=15,m0e=1e3,h0e=2e3;var vp=class extends TR{constructor(n,r,i){super(vp.ID,[o=>new BR(o),o=>new _R(o),o=>new SR(o)]);this.diffService=n;this._chatMLFetcher=r;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(n,r){let i=new Eb(n);try{if(n.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(n,r,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:ET(o)},i)}}async doGetNextEdit(n,r,i){let o=n.getActiveDocument(),a=yT(o);if(a===null)return No.error({kind:"uncategorized",error:ET(new Error("NoSelection"))});let l=s(le=>Math.floor(le.length/4),"computeTokens"),c=new ir(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Jj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-p0e),y=Math.min(h.length,m+p0e+1),v=$Oe,b=zOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),B;B=d.split(/\r?\n/).slice(E,_);let N=[E,_],U=h.slice(E,_),re=[GOe,...h.slice(g,E),IT,...U,LR,...h.slice(_,y),HOe].join(`
`),me=re,ae;{let le=l(re),te=0;if(le>=h0e)ae=re,te=g;else{let pe=Math.floor((h0e-le)/2),[he]=f0e(h.slice(0,g),!0,pe),[,Qe]=f0e(h.slice(y),!1,pe);te=Math.max(he,m-m0e);let ke=Math.min(Qe+y,m+m0e+1);ae=[...h.slice(te,g),re,...h.slice(y,ke)].join(`
`)}}let H=VOe(n,ae,me,l),G=[{role:g0e.Raw.ChatRole.System,content:d0e(jOe)},{role:g0e.Raw.ChatRole.User,content:d0e(H)}];if(i.setPrompt(G),await this.debounce(i),r.isCancellationRequested)return No.error({kind:"gotCancelled",message:"afterDebounce"});n.fetchIssued=!0;let ue=new F5,ie,$=await this._endpointProvider.getEndpointInfo(this.ID),O=await this._chatMLFetcher.fetchOne(W9(G),async(le,te,pe)=>{ie===void 0&&(ie=ue.elapsed())},{id:$.id,name:$.name},{temperature:0},r);if(O.type==="canceled")return No.error({kind:"gotCancelled",message:"afterFetchCall"});if(O.type==="quotaExceeded")return No.error({kind:"quotaExceeded"});if(O.type!=="success")return No.error({kind:"fetchFailure",error:ET(O)});ie&&i.setTtft(ie),i.setResponse(O.value);let Y=vp.getBacktickSection(O.value);return await this.generateReturnEditFormat(o,k,B.join(`
`),Y,N,i)}async generateReturnEditFormat(n,r,i,o,a,l){let{updatedEditWindow:c}=UOe(n.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Jm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?No.error({kind:"noSuggestions"}):No.ok({editWindow:r,edit:new Lo(p)})}static getBacktickSection(n){return n.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(n){let r=Date.now()-n.startTime,i=Math.max(0,vp.DEBOUNCE_MS-r);n.setDebounceTime(i),await _y(i)}};vp=xu([Ds(0,Kj),Ds(1,sh),Ds(2,kj)],vp);f();var Xj=class t extends jo{constructor(n,r=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=r;this.idToEntry=new Map,this.history=new _D,Zf(this,n.openDocuments,(i,o)=>{o.add(J1(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;ql(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new ru(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=Lo.fromEdit(p),h=Lo.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new ru(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(n,r){let i={docId:n,edit:r},o=this.history.push(i);if(this.idToEntry.set(n,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var A0e=class t{constructor(e){this.edits=e;Lu(()=>vv(e,(n,r)=>n.range.getEndPosition().isBeforeOrEqual(r.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,n){let r=e.edits.map(i=>new gA(n.getTransformer().getRange(i.replaceRange),i.newText));return new t(r)}static single(e,n){return new t([new gA(e,n)])}static insert(e,n){return new t([new gA(zt.fromPositions(e,e),n)])}normalize(){let e=[];for(let n of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(n.range.getStartPosition())){let r=e[e.length-1];e[e.length-1]=new gA(r.range.plusRange(n.range),r.text+n.text)}else n.isEmpty||e.push(n);return new t(e)}mapPosition(e){let n=0,r=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=Wl.ofText(o.text);if(e.isBefore(l)){let u=new ir(a.lineNumber+n,a.column+(a.lineNumber+n===r?i:0)),d=c.addToPosition(u);return Zj(u,d)}a.lineNumber+n!==r&&(i=0),n+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,r=l.lineNumber+n}return new ir(e.lineNumber+n,e.column+(e.lineNumber+n===r?i:0))}mapRange(e){function n(a){return a instanceof ir?a:a.getStartPosition()}s(n,"getStart");function r(a){return a instanceof ir?a:a.getEndPosition()}s(r,"getEnd");let i=n(this.mapPosition(e.getStartPosition())),o=r(this.mapPosition(e.getEndPosition()));return Zj(i,o)}inverseMapPosition(e,n){return this.inverse(n).mapPosition(e)}inverseMapRange(e,n){return this.inverse(n).mapRange(e)}apply(e){let n="",r=new ir(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=Zj(r,l);u.isEmpty()||(n+=e.getValueOfRange(u)),n+=o.text,r=c}let i=Zj(r,e.endPositionExclusive);return i.isEmpty()||(n+=e.getValueOfRange(i)),n}applyToString(e){let n=new C0e(e);return this.apply(n)}inverse(e){let n=this.getNewRanges();return new t(this.edits.map((r,i)=>new gA(n[i],e.getValueOfRange(r.range))))}getNewRanges(){let e=[],n=0,r=0,i=0;for(let o of this.edits){let a=Wl.ofText(o.text),l=ir.lift({lineNumber:o.range.startLineNumber+r,column:o.range.startColumn+(o.range.startLineNumber===n?i:0)}),c=a.createRange(l);e.push(c),r=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,n=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new fr;if(this.edits.length===1)return this.edits[0];let n=this.edits[0].range.getStartPosition(),r=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new gA(zt.fromPositions(n,r),i)}equals(e){return d2(this.edits,e.edits,(n,r)=>n.equals(r))}},gA=class t{constructor(e,n){this.range=e;this.text=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new fr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,n){return e.range.equalsRange(n.range)&&e.text===n.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new A0e([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.text+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}removeCommonPrefix(e){let n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=BD(n,r),o=Wl.ofText(n.substring(0,i)).addToPosition(this.range.getStartPosition()),a=r.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let n=this.text.replaceAll(`\r
`,`
`),r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=BD(n,r);n=n.substring(i),r=r.substring(i);let o=H5(n,r);return n=n.substring(0,n.length-o),r=r.substring(0,r.length-o),n===""}};function Zj(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new fr("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(Zj,"rangeFromPositions");var eV=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new ir(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new CT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Pg(e)}},y0e=class extends eV{constructor(n,r){ql(r>=1);super();this._getLineContent=n;this._lineCount=r}static{s(this,"LineBasedText")}getValueOfRange(n){if(n.startLineNumber===n.endLineNumber)return this._getLineContent(n.startLineNumber).substring(n.startColumn-1,n.endColumn-1);let r=this._getLineContent(n.startLineNumber).substring(n.startColumn-1);for(let i=n.startLineNumber+1;i<n.endLineNumber;i++)r+=`
`+this._getLineContent(i);return r+=`
`+this._getLineContent(n.endLineNumber).substring(0,n.endColumn-1),r}getLineLength(n){return this._getLineContent(n).length}get length(){let n=this._getLineContent(this._lineCount);return new Wl(this._lineCount-1,n.length)}},TT=class extends y0e{static{s(this,"ArrayText")}constructor(e){super(n=>e[n-1],e.length)}},C0e=class extends eV{constructor(n){super();this.value=n;this._t=new CT(this.value)}static{s(this,"StringText")}getValueOfRange(n){return this._t.getOffsetRange(n).substring(this.value)}get length(){return this._t.textLength}};f();var FR=class{constructor(e,n,r){this.changes=e;this.moves=n;this.hitTimeout=r}static{s(this,"LinesDiff")}},MR=class t{static{s(this,"MovedText")}constructor(e,n){this.lineRangeMapping=e,this.changes=n}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var bp=class t{static{s(this,"LineRangeMapping")}static inverse(e,n,r){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,n+1),new Yt(a,r+1));return l.modified.isEmpty||i.push(l),i}static clip(e,n,r){let i=[];for(let o of e){let a=o.original.intersect(n),l=o.modified.intersect(r);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,n){this.original=e,this.modified=n}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),n=this.modified.toInclusiveRange();if(e&&n)return new Od(e,n);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new fr("not a valid diff");return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Od(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,n){if(YOe(this.original.endLineNumberExclusive,e)&&YOe(this.modified.endLineNumberExclusive,n))return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Od(zt.fromPositions(new ir(this.original.startLineNumber,1),QR(new ir(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new ir(this.modified.startLineNumber,1),QR(new ir(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Od(zt.fromPositions(QR(new ir(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),QR(new ir(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(QR(new ir(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),n),QR(new ir(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));throw new fr}};function QR(t,e){if(t.lineNumber<1)return new ir(1,1);if(t.lineNumber>e.length)return new ir(e.length,e[e.length-1].length+1);let n=e[t.lineNumber-1];return t.column>n.length+1?new ir(t.lineNumber,n.length+1):t}s(QR,"normalizePosition");function YOe(t,e){return t>=1&&t<=e.length}s(YOe,"isValidLineNumber");var Rb=class t extends bp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(n,r,e)}constructor(e,n,r){super(e,n),this.innerChanges=r}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Od=class t{static{s(this,"RangeMapping")}static fromEdit(e){let n=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,n[o]))}static fromEditJoin(e){let n=e.getNewRanges(),r=e.edits.map((i,o)=>new t(i.range,n[o]));return t.join(r)}static join(e){if(e.length===0)throw new fr("Cannot join an empty list of range mappings");let n=e[0];for(let r=1;r<e.length;r++)n=n.join(e[r]);return n}static assertSorted(e){for(let n=1;n<e.length;n++){let r=e[n-1],i=e[n];if(!(r.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&r.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new fr("Range mappings must be sorted")}}constructor(e,n){this.originalRange=e,this.modifiedRange=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let n=e.getValueOfRange(this.modifiedRange);return new gA(this.originalRange,n)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function x0e(t,e,n,r=!1){let i=[];for(let o of m5(t.map(a=>pPt(a,e,n)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new Rb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Lu(()=>!r&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||n.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:vv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s(x0e,"lineRangeMappingFromRangeMappings");function pPt(t,e,n){let r=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+r<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+r<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=n.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(r=1);let o=new Yt(t.originalRange.startLineNumber+r,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+r,t.modifiedRange.endLineNumber+1+i);return new Rb(o,a,[t])}s(pPt,"getLineRangeMapping");f();var yA=class t{constructor(e,n){this.diffs=e;this.hitTimeout=n}static{s(this,"DiffAlgorithmResult")}static trivial(e,n){return new t([new Yo(kt.ofLength(e.length),kt.ofLength(n.length))],!1)}static trivialTimedOut(e,n){return new t([new Yo(kt.ofLength(e.length),kt.ofLength(n.length))],!0)}},Yo=class t{constructor(e,n){this.seq1Range=e;this.seq2Range=n}static{s(this,"SequenceDiff")}static invert(e,n){let r=[];return QSe(e,(i,o)=>{r.push(t.fromOffsetPairs(i?i.getEndExclusives():AA.zero,o?o.getStarts():new AA(n,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+n)))}),r}static fromOffsetPairs(e,n){return new t(new kt(e.offset1,n.offset1),new kt(e.offset2,n.offset2))}static assertSorted(e){let n;for(let r of e){if(n&&!(n.seq1Range.endExclusive<=r.seq1Range.start&&n.seq2Range.endExclusive<=r.seq2Range.start))throw new fr("Sequence diffs must be sorted");n=r}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let n=this.seq1Range.intersect(e.seq1Range),r=this.seq2Range.intersect(e.seq2Range);if(!(!n||!r))return new t(n,r)}getStarts(){return new AA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new AA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},AA=class t{constructor(e,n){this.offset1=e;this.offset2=n}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},kb=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},tV=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new fr("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var OR=class{constructor(e,n){this.width=e;this.height=n;this.array=[];this.array=new Array(e*n)}static{s(this,"Array2D")}get(e,n){return this.array[e+n*this.width]}set(e,n,r){this.array[e+n*this.width]=r}};function H9(t){return t===32||t===9}s(H9,"isSpace");var G9=class t{constructor(e,n,r){this.range=e;this.lines=n;this.source=r;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=n[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let n=this.chrKeys.get(e);return n===void 0&&(n=this.chrKeys.size,this.chrKeys.set(e,n)),n}computeSimilarity(e){let n=0,r=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<r;i++)n+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-n/(this.totalCount+e.totalCount)}};var nV=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,n,r=kb.instance,i){if(e.length===0||n.length===0)return yA.trivial(e,n);let o=new OR(e.length,n.length),a=new OR(e.length,n.length),l=new OR(e.length,n.length);for(let g=0;g<e.length;g++)for(let y=0;y<n.length;y++){if(!r.isValid())return yA.trivialTimedOut(e,n);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===n.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=n.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Yo(new kt(g+1,u),new kt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=n.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new yA(c,!1)}};f();var UR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,n,r=kb.instance){if(e.length===0||n.length===0)return yA.trivial(e,n);let i=e,o=n;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new v0e;c.set(0,a(0,0));let u=new b0e;u.set(0,c.get(0)===0?null:new rV(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!r.isValid())return yA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),B=k-d;if(b++,k>i.length||B>o.length)continue;let N=a(k,B);c.set(d,N);let U=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new rV(U,k,B,N-k):U),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Yo(new kt(y,h),new kt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new yA(m,!1)}},rV=class{constructor(e,n,r,i){this.prev=e;this.x=n;this.y=r;this.length=i}static{s(this,"SnakePath")}},v0e=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let r=this.negativeArr;this.negativeArr=new Int32Array(r.length*2),this.negativeArr.set(r)}this.negativeArr[e]=n}else{if(e>=this.positiveArr.length){let r=this.positiveArr;this.positiveArr=new Int32Array(r.length*2),this.positiveArr.set(r)}this.positiveArr[e]=n}}},b0e=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){e<0?(e=-e-1,this.negativeArr[e]=n):this.positiveArr[e]=n}};f();f();var Bb=class{constructor(e,n,r){this.lines=e;this.range=n;this.considerWhitespaceChanges=r;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!r){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new kt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(n=>String.fromCharCode(n)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let n=XOe(e>0?this.elements[e-1]:-1),r=XOe(e<this.elements.length?this.elements[e]:-1);if(n===7&&r===8)return 0;if(n===8)return 150;let i=0;return n!==r&&(i+=10,n===0&&r===1&&(i+=1)),i+=JOe(n),i+=JOe(r),i}translateOffset(e,n="right"){let r=I0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[r];return new ir(this.range.startLineNumber+r,1+this.lineStartOffsets[r]+i+(i===0&&n==="left"?0:this.trimmedWsLengthsByLineIdx[r]))}translateRange(e){let n=this.translateOffset(e.start,"right"),r=this.translateOffset(e.endExclusive,"left");return r.isBefore(n)?zt.fromPositions(r,r):zt.fromPositions(n,r)}findWordContaining(e){if(e<0||e>=this.elements.length||!qR(this.elements[e]))return;let n=e;for(;n>0&&qR(this.elements[n-1]);)n--;let r=e;for(;r<this.elements.length&&qR(this.elements[r]);)r++;return new kt(n,r)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!qR(this.elements[e]))return;let n=e;for(;n>0&&qR(this.elements[n-1])&&!KOe(this.elements[n]);)n--;let r=e;for(;r<this.elements.length&&qR(this.elements[r])&&!KOe(this.elements[r]);)r++;return new kt(n,r)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,n){return this.elements[e]===this.elements[n]}extendToFullLines(e){let n=q1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,r=NSe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new kt(n,r)}};function qR(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(qR,"isWordChar");function KOe(t){return t>=65&&t<=90}s(KOe,"isUpperCase");var mPt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function JOe(t){return mPt[t]}s(JOe,"getCategoryBoundaryScore");function XOe(t){return t===10?8:t===13?7:H9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(XOe,"getCategory");function eUe(t,e,n,r,i,o){let{moves:a,excludedChanges:l}=gPt(t,e,n,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=APt(c,r,i,e,n,o);return qSe(a,u),a=yPt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&hPt(p,h=>h.length>=2)>=2}),a=CPt(t,a),a}s(eUe,"computeMovedLines");function hPt(t,e){let n=0;for(let r of t)e(r)&&n++;return n}s(hPt,"countWhere");function gPt(t,e,n,r){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new G9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new G9(c.modified,n,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new bp(c.range,d.range)),l.add(c.source),l.add(d.source)),!r.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(gPt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function APt(t,e,n,r,i,o){let a=[],l=new h5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(T0(m=>m.modified.startLineNumber,w0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${n[g-1]}:${n[g+1-1]}:${n[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(GSe(T0(m=>m.modifiedLineRange.length,w0)));let u=new E2,d=new E2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new bp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(T0(m=>m.original.startLineNumber,w0));let p=new sD(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=q1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=q1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,U=h.modified.startLineNumber-k-1;if(N>r.length||U>i.length||u.contains(U)||d.contains(N)||!ZOe(r[N-1],i[U-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let B;for(B=0;B<_;B++){let N=h.original.endLineNumberExclusive+B,U=h.modified.endLineNumberExclusive+B;if(N>r.length||U>i.length||u.contains(U)||d.contains(N)||!ZOe(r[N-1],i[U-1],o))break}B>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+B)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+B))),(k>0||B>0)&&(a[m]=new bp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+B),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+B)))}return a}s(APt,"computeUnchangedMoves");function ZOe(t,e,n){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new UR().compute(new Bb([t],new zt(1,1,1,t.length),!1),new Bb([e],new zt(1,1,1,e.length),!1),n),o=0,a=Yo.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{H9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)H9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(ZOe,"areLinesSimilar");function yPt(t){if(t.length===0)return t;t.sort(T0(n=>n.original.startLineNumber,w0));let e=[t[0]];for(let n=1;n<t.length;n++){let r=e[e.length-1],i=t[n],o=i.original.startLineNumber-r.original.endLineNumberExclusive,a=i.modified.startLineNumber-r.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=r.join(i);continue}e.push(i)}return e}s(yPt,"joinCloseConsecutiveMoves");function CPt(t,e){let n=new sD(t);return e=e.filter(r=>{let i=n.findLastMonotonous(l=>l.original.startLineNumber<r.original.endLineNumberExclusive)||new bp(new Yt(1,1),new Yt(1,1)),o=q1(t,l=>l.modified.startLineNumber<r.modified.endLineNumberExclusive);return i!==o}),e}s(CPt,"removeMovesInSameDiff");f();function E0e(t,e,n){let r=n;return r=tUe(t,e,r),r=tUe(t,e,r),r=xPt(t,e,r),r}s(E0e,"optimizeSequenceDiffs");function tUe(t,e,n){if(n.length===0)return n;let r=[];r.push(n[0]);for(let o=1;o<n.length;o++){let a=r[r.length-1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){r[r.length-1]=new Yo(new kt(a.seq1Range.start,l.seq1Range.endExclusive-c),new kt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}r.push(l)}let i=[];for(let o=0;o<r.length-1;o++){let a=r[o+1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){r[o+1]=new Yo(new kt(l.seq1Range.start+c,a.seq1Range.endExclusive),new kt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return r.length>0&&i.push(r[r.length-1]),i}s(tUe,"joinSequenceDiffsByShifting");function xPt(t,e,n){if(!t.getBoundaryScore||!e.getBoundaryScore)return n;for(let r=0;r<n.length;r++){let i=r>0?n[r-1]:void 0,o=n[r],a=r+1<n.length?n[r+1]:void 0,l=new kt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new kt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?n[r]=nUe(o,t,e,l,c):o.seq2Range.isEmpty&&(n[r]=nUe(o.swap(),e,t,c,l).swap())}return n}s(xPt,"shiftSequenceDiffs");function nUe(t,e,n,r,i){let a=1;for(;t.seq1Range.start-a>=r.start&&t.seq2Range.start-a>=i.start&&n.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<r.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&n.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+n.getBoundaryScore(p)+n.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(nUe,"shiftDiffToBetterPosition");function rUe(t,e,n){let r=[];for(let i of n){let o=r[r.length-1];if(!o){r.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?r[r.length-1]=new Yo(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):r.push(i)}return r}s(rUe,"removeShortMatches");function I0e(t,e,n,r,i=!1){let o=Yo.invert(n,t.length),a=[],l=new AA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=r(t,d.offset1),h=r(e,d.offset2);if(!m||!h)return;let g=new Yo(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=r(t,E.seq1Range.start),B=r(e,E.seq2Range.start),N=new Yo(k,B),U=N.intersect(E);if(v+=U.seq1Range.length,b+=U.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return vPt(n,a)}s(I0e,"extendDiffsToEntireWordIfAppropriate");function vPt(t,e){let n=[];for(;t.length>0||e.length>0;){let r=t[0],i=e[0],o;r&&(!i||r.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=o.seq1Range.start?n[n.length-1]=n[n.length-1].join(o):n.push(o)}return n}s(vPt,"mergeSequenceDiffs");function iUe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let l=[r[0]];for(let c=1;c<r.length;c++){let p=function(h,g){let y=new kt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=r[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}r=l}while(i++<10&&o);return r}s(iUe,"removeVeryShortMatchingLinesBetweenDiffs");function oUe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let c=[r[0]];for(let u=1;u<r.length;u++){let m=function(g,y){let v=new kt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,B=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,U=t.countLinesIn(y.seq1Range),re=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),ae=y.seq2Range.length,H=2*40+50;function G(ue){return Math.min(ue,H)}return s(G,"cap"),Math.pow(Math.pow(G(_*40+k),1.5)+Math.pow(G(B*40+N),1.5),1.5)+Math.pow(Math.pow(G(U*40+re),1.5)+Math.pow(G(me*40+ae),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=r[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}r=c}while(i++<10&&o);let a=[];return OSe(r,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new kt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new kt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Yo.fromOffsetPairs(c?c.getEndExclusives():AA.zero,d?d.getStarts():AA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(oUe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var j9=class{constructor(e,n){this.trimmedHash=e;this.lines=n}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let n=e===0?0:sUe(this.lines[e-1]),r=e===this.lines.length?0:sUe(this.lines[e]);return 1e3-(n+r)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,n){return this.lines[e]===this.lines[n]}};function sUe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(sUe,"getIndentation");var iV=class{constructor(){this.dynamicProgrammingDiffing=new nV;this.myersDiffingAlgorithm=new UR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,n,r){if(e.length<=1&&d2(e,n,(B,N)=>B===N))return new FR([],[],!1);if(e.length===1&&e[0].length===0||n.length===1&&n[0].length===0)return new FR([new Rb(new Yt(1,e.length+1),new Yt(1,n.length+1),[new Od(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,n.length,n[n.length-1].length+1))])],[],!1);let i=r.maxComputationTimeMs===0?kb.instance:new tV(r.maxComputationTimeMs),o=!r.ignoreTrimWhitespace,a=new Map;function l(B){let N=a.get(B);return N===void 0&&(N=a.size,a.set(B,N)),N}s(l,"getOrCreateHash");let c=e.map(B=>l(B.trim())),u=n.map(B=>l(B.trim())),d=new j9(c,e),p=new j9(u,n),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(B,N)=>e[B]===n[N]?n[N].length===0?.1:1+Math.log(1+n[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=E0e(d,p,h),h=iUe(d,p,h);let y=[],v=s(B=>{if(o)for(let N=0;N<B;N++){let U=b+N,re=E+N;if(e[U]!==n[re]){let me=this.refineDiff(e,n,new Yo(new kt(U,U+1),new kt(re,re+1)),i,o,r);for(let ae of me.mappings)y.push(ae);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let B of h){Lu(()=>B.seq1Range.start-b===B.seq2Range.start-E);let N=B.seq1Range.start-b;v(N),b=B.seq1Range.endExclusive,E=B.seq2Range.endExclusive;let U=this.refineDiff(e,n,B,i,o,r);U.hitTimeout&&(g=!0);for(let re of U.mappings)y.push(re)}v(e.length-b);let _=x0e(y,new TT(e),new TT(n)),k=[];return r.computeMoves&&(k=this.computeMoves(_,e,n,c,u,i,o,r)),Lu(()=>{function B(U,re){if(U.lineNumber<1||U.lineNumber>re.length)return!1;let me=re[U.lineNumber-1];return!(U.column<1||U.column>me.length+1)}s(B,"validatePosition");function N(U,re){return!(U.startLineNumber<1||U.startLineNumber>re.length+1||U.endLineNumberExclusive<1||U.endLineNumberExclusive>re.length+1)}s(N,"validateRange");for(let U of _){if(!U.innerChanges)return!1;for(let re of U.innerChanges)if(!(B(re.modifiedRange.getStartPosition(),n)&&B(re.modifiedRange.getEndPosition(),n)&&B(re.originalRange.getStartPosition(),e)&&B(re.originalRange.getEndPosition(),e)))return!1;if(!N(U.modified,n)||!N(U.original,e))return!1}return!0}),new FR(_,k,g)}computeMoves(e,n,r,i,o,a,l,c){return eUe(e,n,r,i,o,a).map(p=>{let m=this.refineDiff(n,r,new Yo(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=x0e(m.mappings,new TT(n),new TT(r),!0);return new MR(p,h)})}refineDiff(e,n,r,i,o,a){let c=bPt(r).toRangeMapping2(e,n),u=new Bb(e,c.originalRange,o),d=new Bb(n,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Yo.assertSorted(h),h=E0e(u,d,h),m&&Yo.assertSorted(h),h=I0e(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Yo.assertSorted(h),a.extendToSubwords&&(h=I0e(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Yo.assertSorted(h)),h=rUe(u,d,h),m&&Yo.assertSorted(h),h=oUe(u,d,h),m&&Yo.assertSorted(h);let g=h.map(y=>new Od(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Od.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function bPt(t){return new bp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(bPt,"toLineRangeMapping");var oV=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,n,r){let i=await EPt(e,n,r);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new MR(new bp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new Rb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Od(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function EPt(t,e,n){let r=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new iV().computeDiff(r,i,n),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(EPt,"computeDiff");f();var T0e=qe(require("crypto"));var V9=T0e.randomUUID.bind(T0e);var hUe=qe(th()),k0e=qe(f9());f();var sV=Qd("ISnippyService");f();f();var $9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),aV=65;function IPt(t){let e=0,n;$9.lastIndex=0;do if(n=$9.exec(t),n&&(e+=1),e>=aV)break;while(n);return e}s(IPt,"lexemeLength");function TPt(t,e){let n=0,r;$9.lastIndex=0;do if(r=$9.exec(t),r&&(n+=1,n>=e))return $9.lastIndex;while(r);return t.length}s(TPt,"offsetFirstLexemes");function aUe(t,e){let n=t.split("").reverse().join(""),r=TPt(n,e);return n.length-r}s(aUe,"offsetLastLexemes");function w0e(t){return IPt(t)>=aV}s(w0e,"hasMinLexemeLength");f();f();var lUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.matched_source=="string"&&typeof n.occurrences=="string"&&typeof n.capped=="boolean"&&typeof n.cursor=="string"&&typeof n.github_url=="string"}e.is=t,s(t,"is")})(lUe||={});var _0e;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.kind=="string"&&typeof n.reason=="string"&&typeof n.code=="number"&&typeof n.msg=="string"}e.is=t,s(t,"is")})(_0e||={});var cUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"snippets"in n&&Array.isArray(n.snippets)&&n.snippets.every(lUe.is)}e.is=t,s(t,"is")})(cUe||={});var S0e;(e=>{function t(n){if(_0e.is(n))return No.error(n);if(cUe.is(n))return No.ok(n)}e.to=t,s(t,"to")})(S0e||={});var uUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.commit_id=="string"&&typeof n.license=="string"&&typeof n.nwo=="string"&&typeof n.path=="string"&&typeof n.url=="string"}e.is=t,s(t,"is")})(uUe||={});var dUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.has_next_page=="boolean"&&typeof n.cursor=="string"}e.is=t,s(t,"is")})(dUe||={});var fUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.count=="object"&&Object.values(n.count).every(r=>typeof r=="string")}e.is=t,s(t,"is")})(fUe||={});var pUe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"file_matches"in n&&Array.isArray(n.file_matches)&&n.file_matches.every(uUe.is)&&"page_info"in n&&dUe.is(n.page_info)&&"license_stats"in n&&fUe.is(n.license_stats)}e.is=t,s(t,"is")})(pUe||={});var R0e;(e=>{function t(n){if(_0e.is(n))return No.error(n);if(pUe.is(n))return No.ok(n)}e.to=t,s(t,"to")})(R0e||={});var lV=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let n={source:e};return this.fetch("Match",n,S0e.to)}async fetchFilesForMatch(e){let n={cursor:e};return this.fetch("FilesForMatch",n,R0e.to)}async fetch(e,n,r){let i=this.ctx.get(Kr),o=await this.ctx.get(Gn).getToken(),a=$x(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...tm(this.ctx),"X-GitHub-Api-Version":ig},c=new AbortController,u=await i.fetch(a,{method:"POST",headers:l,json:n,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return r(d)}};var mUe=new Tt("[CODE REFERENCING]"),WR=class{constructor(e,n){this.instantiationService=n;this.ctx=e,this.fetcher=this.instantiationService.createInstance(lV,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,n,r){let i=this.computeSourceToCheck(n,r);if(!i)return;let a=await this.ctx.get(Tn).getTextDocument({uri:e.toString()});if(!a){mUe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){mUe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(E0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,n){if(n.newText==="")return;let r=Is.single(n),o=r.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(r),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!w0e(c)){let m=a.value.slice(0,o.start),h=aUe(m,aV);l=h,c=a.value.slice(h,o.start+n.newText.length)}if(!w0e(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};WR=xu([Ds(1,hA)],WR);async function gUe(t){let e=new _j;return e.define(Rj,new B0e(t)),e.define(Kj,new oV),e.define(ky,new H0(D0e,[!0])),e.define(sV,new H0(WR,[t])),e.define(sh,await N0e.Create(t)),e.define(O9,new H0(L0e)),e.define(kj,new P0e(t)),e.seal()}s(gUe,"createInstantiationService");var B0e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,n,r){let i=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),a=or.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},D0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},P0e=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==vp.ID)throw new Error(`Unsupported provider ID: ${e}`);let n=await this.ctx.get(Rt).updateExPValuesAndAssignments();return{id:this.ctx.get(Rt).getNESXTabModelID(n),name:"xtab-4o-mini-finetuned"}}},N0e=class t{constructor(e,n){this.ctx=e;this.modelConfiguration=n}static{s(this,"CLSChatMLFetcher")}static async Create(e){let n=await xo.getModelConfiguration(e,"nesStubs");return new t(e,n)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,n,r,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=V9(),c=await this.ctx.get(vd).fetchAndStreamChat(this.ctx,a,gg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(n)return await n(u,0,{text:d.text})},r,i,o);if(c.type==="success"){let u=[];if(n)for await(let p of c.choices)if(p.finishReason!=="snippy")await n(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return c.type==="failed"&&c.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:c.reason}:{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:qOe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(n=>n.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},L0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new cV("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let n=this.tokenizers.get(e.tokenizer);return n||(n=new cV(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,n)),n}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},cV=class{constructor(e){this.mode=hUe.OutputMode.Raw;this.tokenizer=Bo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===k0e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let n=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let r of e.content)if(r.type===k0e.ChatCompletionContentPartKind.Text)n+=this.tokenLength(r.text);else throw new Error(`Unsupported message content part type: ${r.type}`);else throw new Error("Unsupported message content type");return n}countMessagesTokens(e){let n=0;for(let r of e)n+=this.countMessageTokens(r);return n}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var uV=class extends jo{constructor(n){super();this.workspace=n;this._garbageCollector=new Q0e(20);this._documentCaches=new Map;Zf(this,n.openDocuments,(r,i)=>{let o=new F0e(r.id,r.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(J1(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(n,r){let i=this._documentCaches.get(n);i&&i.reject(r)}isRejected(n,r){let i=this._documentCaches.get(n);return i?i.isRejected(r):!1}},F0e=class{constructor(e,n,r){this.docId=e;this._garbageCollector=r;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let n of[...this._rejectedEdits])n.handleEdit(e)}reject(e){if(this.isRejected(e))return;let n=new M0e(e.toEdit(),()=>{this._rejectedEdits.delete(n)});this._rejectedEdits.add(n),this._garbageCollector.put(n)}isRejected(e){for(let n of this._rejectedEdits)if(n.isRejected(e))return!0;return!1}},M0e=class{constructor(e,n){this._edit=e;this._onDispose=n}static{s(this,"RejectedEdit")}handleEdit(e){let n=this._edit.tryRebase(e);n?this._edit=n:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},Q0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var z9=class{constructor(e,n){this.prev=null;this.next=null;this.key=e,this.value=n}static{s(this,"Node")}},dV=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new z9("",null),this._tail=new z9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let n=e.prev,r=e.next;n.next=r,r.prev=n}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let n=this._cache.get(e);if(n)return this._removeNode(n),this._cache.delete(e),n.value}get(e){let n=this._cache.get(e);if(n)return this._moveToHead(n),n.value}keys(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.key),n=n.next;return e}getValues(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.value),n=n.next;return e}put(e,n){let r=this._cache.get(e);if(r)r.value=n,this._moveToHead(r);else if(r=new z9(e,n),this._cache.set(e,r),this._addNode(r),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var fV=class extends jo{constructor(n){super();this.workspace=n;this._documentCaches=new Map;this._sharedCache=new dV(50);Zf(this,n.openDocuments,(r,i)=>{let o=new O0e(r.id,r.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(J1(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(n,r,i){let o=this._documentCaches.get(n);o&&o.setNextEdits(r,i)}lookupNextEdit(n){let r=this._documentCaches.get(n);if(r)return r.lookupNextEdit()}},O0e=class{constructor(e,n,r){this.docId=e;this._sharedCache=r;this._value=n}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,n){let r=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(r.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:n,documentBeforeEdit:r}),r=r.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),n=this._sharedCache.get(e);if(n)return n}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var pV=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,n,r,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,n=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),r=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:n,activeDocumentEditsCount:r,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},GR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let n=this._map.get(e);n&&n.builder.setAsShown()}scheduleSendingTelemetry(e,n){let r=setTimeout(()=>{this._doSendTelemetry(n),this._map.delete(e)},12e4);this._map.set(e,{builder:n,timeout:r})}sendTelemetryFor(e,n){let r=this._map.get(e);if(!r)return;this._map.delete(e),clearTimeout(r.timeout);let i=r.builder;i.setAcceptance(n),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let n=e.build(),{opportunityId:r,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:U,promptCharCount:re,isDefaultEndpoint:me,hadLowLogProbSuggestion:ae,nonTerminatingError:H,nEditsSuggested:G,kthEditPicked:ue,lineDistanceToMostRecentEdit:ie,debounceTime:$,hasNextEdit:O,nextEditLogprob:Y,maxLinesPerEdit:K,noNextEditReasonKind:le,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:he,fetchTime:Qe,fetchResult:ke,fetchError:Ze,fetchStartedAfterMs:Fe}=n;this._sendTelemetryToBoth({opportunityId:r,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:le,noNextEditReasonMessage:te,firstEditStrategy:pe,firstPickStrategyOverride:he,fetchResult:ke,fetchError:Ze},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:U,promptCharCount:re,hadLowLogProbSuggestion:this._boolToNum(ae),nEditsSuggested:G,kthEditPicked:ue,lineDistanceToMostRecentEdit:ie,debounceTime:$,fetchStartedAfterMs:Fe,fetchTime:Qe,hasNextEdit:this._boolToNum(O),nextEditLogprob:Y,maxLinesPerEdit:K})}_sendTelemetryToBoth(e,n){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,n)}_boolToNum(e){return e===void 0?void 0:e?1:0}};GR=xu([Ds(0,Rj)],GR);f();var HR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var wT=!1,AUe=300,jR=class extends jo{constructor(n,r,i,o,a,l,c){super();this._workspace=n;this._statelessNextEditProvider=r;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new uV(this._workspace);this._nextEditCache=new fV(this._workspace);this._recentlyShownCache=new W0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Zf(this,this._workspace.openDocuments,(u,d)=>{d.add(voe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(GR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(n,r){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===n&&i.documentAfterEditsNoShortening.value!==r.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(n,r,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(n);if(!o)return{result:void 0};let a=o.value.get(),l=new pV(this._statelessNextEditProvider.ID);l.setOpportunityId(r.requestUuid??V9());let c=this._recentlyShownCache.get(n,a),u=this._nextEditCache.lookupNextEdit(n),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await _y(AUe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await _y(AUe);else{h=new q0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,n,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:wD(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(n,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new HR(void 0);if(this._rejectionCollector.isRejected(n,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new HR(void 0);ql(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new HR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(n,a,[d,h]),y}async _shortenDocument(n,r){let i=n.lastEdit.getEditedState(),{document:o,clippedRange:a}=r==="noShortening"?this.getProjectedDocumentNoShortening(n.lastEdit):r==="clipping"?this.getProjectedDocumentClipping(n.lastEdit):await this.getProjectedDocumentSummarizedDocument(n.languageId,n.lastEdit),l=Is.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=U0e(n.lastEdits.swap(l)),d=c.compose(),p=new vT(new ah(n.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new Gl(o.text),g=uA.fromEdit(new ru(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new Gl(p.text).getTransformer().getRange(y));let b=n.lastSelection?p.projectOffsetRange(n.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(n.docId),_=s(U=>{let me=new uA(new Gl(p.text),U).toEdit();return yUe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(U=>p.projectBack(U),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(U=>p.project(U),"toProjectedOffset"),N=new B9(n.docId,E,n.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,B,n.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:n.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(n,r,i,o){let a=await this._historyContextProvider.getHistoryContext(r);if(!a)return No.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=U0e(a.getDocumentAndIdx(r)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(U=>this._shortenDocument(U,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new bj(n.headerRequestId,u.map(U=>U.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,wT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let U=this._hookupCancellation(g,o);try{y=await g.result}finally{U.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let U=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let re=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{re.dispose(),U()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return No.error({kind:"noSuggestions"});let _=new uA(new Gl(d.projectedDocument.text),b).toEdit(),k=yUe(_,d.projectedDocument),B=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(B);return No.ok(N)}_hookupCancellation(n,r){let i=new Bu,o=!1,a=s(()=>{o||(o=!0,n.liveDependentants--)},"removeDependant"),l=i.add(new mj);return i.add(r.onCancellationRequested(()=>{if(a(),n.liveDependentants>0){wT&&console.log(`=> ignoring UI cancellation signal for ${n.seqid} because others depend on this request`);return}if(!n.fetchIssued){wT&&console.log(`=> canceling ${n.seqid} due to UI cancellation signal`),n.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(n.liveDependentants>0){wT&&console.log(`=> ignoring timer cancellation signal for ${n.seqid} because others depend on this request`);return}wT&&console.log(`=> canceling ${n.seqid} due to timer after UI cancellation signal`),n.cancellationTokenSource.cancel()},500)})),i.add(Ra(()=>{a()})),n.liveDependentants++,i}_findExistingPendingRequest(n){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,n))return this._pendingStatelessNextEditRequest}handleShown(n){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(n)}handleAcceptance(n,r){this._telemetrySender.sendTelemetryFor(r,"accepted"),this.runSnippy(n,r),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(n,r){Dj(r.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&r.result&&(this._recentlyShownCache.remove(r.result.edit),this._rejectionCollector.reject(n,r.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(r,"rejected")}getProjectedDocumentNoShortening(n){return{document:new vT(new ah(n.base.value),new yp([])),clippedRange:new Yt(1,n.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(n){let r=n.base.getTransformer(),i=r.getRange(n.edit.getRange()??new kt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,r.textLength.lineCount+1),c=U0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new vT(new ah(n.base.value),new yp(u.map(p=>ol.delete(r.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new k9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(n,r){let i=await RPt(this._parseService,{getText:s(()=>r.base.value,"getText"),languageId:n});if(!i)return this.getProjectedDocumentClipping(r);let o=new ah(r.base.value),a=r.edit.edits.at(0)?.range??new kt(0,0),l;if(r.edit.edits.length!==0){let h=r.edit.edits.at(0),g=r.edit.edits.at(-1);l=o.offsetRangeToRange(new kt(h.range.start,g.range.endExclusive))}let c=CUe(o.offsetRangeToRange(a)),u=Oj(200*50,{costFnOverride:s((h,g,y)=>{let v=CUe(y.offsetRangeToRange(h.range)),b=SPt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=r.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(n,r){r.result!==void 0&&this._snippyService.handlePostInsertion(n.toUri(),r.result.documentBeforeEdits,r.result.edit)}};jR=xu([Ds(4,ky),Ds(5,hA),Ds(6,sV)],jR);function yUe(t,e){let n=e.projectBackOffsetEdit(t.toOffsetEdit());return Is.fromOffsetEdit(n)}s(yUe,"projectBackEdit");function CUe(t){return new Yt(t.start.line+1,t.end.line+1)}s(CUe,"lineRangeFromVSCodeRange");function SPt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(SPt,"lineRangeDist");async function RPt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(RPt,"getStructure");function U0e(t){if(!t)throw new fr("expected value to be defined, but it was not");return t}s(U0e,"assertDefined");var q0e=class{constructor(){this.headerRequestId=V9()}static{s(this,"NextEditFetchRequest")}},W0e=class{constructor(){this._cache=new JO(10)}static{s(this,"RecentlyShownCache")}add(e,n,r){let i=this._key(e,n);this._cache.set(i,r)}get(e,n){let r=this._key(e,n);return this._cache.get(r)}remove(e){for(let n of this._cache)if(n[1][0]===e){this._cache.delete(n[0]);break}}_key(e,n){return e.uri+";"+n.value}};f();f();f();f();var _T=0;function mV(t){return t===0}s(mV,"lengthIsZero");var V0=2**26;function VR(t,e){return t*V0+e}s(VR,"toLength");function Py(t){let e=t,n=Math.floor(e/V0),r=e-n*V0;return new Wl(n,r)}s(Py,"lengthToObj");function Y9(t,e){let n=t+e;return e>=V0&&(n=n-t%V0),n}s(Y9,"lengthAdd");function xUe(t,e){return t.reduce((n,r)=>Y9(n,e(r)),_T)}s(xUe,"sumLengths");function G0e(t,e){return t===e}s(G0e,"lengthEquals");function K9(t,e){let n=t,r=e;if(r-n<=0)return _T;let o=Math.floor(n/V0),a=Math.floor(r/V0),l=r-a*V0;if(o===a){let c=n-o*V0;return VR(0,l-c)}else return VR(a-o,l)}s(K9,"lengthDiffNonNegative");function vUe(t,e){let n=t,r=Math.floor(n/V0),i=n-r*V0,o=e,a=Math.floor(o/V0),l=o-a*V0;return new zt(r+1,i+1,a+1,l+1)}s(vUe,"lengthsToRange");f();var $R=class{constructor(e,n,r){this.startOffset=e;this.endOffset=n;this.newLength=r}static{s(this,"TextEditInfo")}toString(){return`[${Py(this.startOffset)}...${Py(this.endOffset)}) -> ${Py(this.newLength)}`}};function EUe(t,e){if(t.length===0)return e;if(e.length===0)return t;let n=new YO(bUe(t)),r=bUe(e);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=n.dequeue();function o(u){if(u===void 0){let p=n.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!mV(u);){let[p,m]=i.splitAt(u);d.push(p),u=K9(p.lengthAfter,u),i=m??n.dequeue()}return mV(u)||d.push(new J9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&G0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new $R(m.startOffset,d,Y9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=_T;for(let u of r){let d=o(u.lengthBefore);if(u.modified){let p=xUe(d,h=>h.lengthBefore),m=Y9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=Y9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(EUe,"combineTextEditInfos");var J9=class t{constructor(e,n,r){this.modified=e;this.lengthBefore=n;this.lengthAfter=r}static{s(this,"LengthMapping")}splitAt(e){let n=K9(e,this.lengthAfter);return G0e(n,_T)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,_T,n)]:[new t(this.modified,e,e),new t(this.modified,n,n)]}toString(){return`${this.modified?"M":"U"}:${Py(this.lengthBefore)} -> ${Py(this.lengthAfter)}`}};function bUe(t){let e=[],n=_T;for(let r of t){let i=K9(n,r.startOffset);mV(i)||e.push(new J9(!1,i,i));let o=K9(r.startOffset,r.endOffset);e.push(new J9(!0,o,r.newLength)),n=r.endOffset}return e}s(bUe,"toLengthMapping");var X9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let n=e.edits.map(r=>new hV(r.range,Wl.ofText(r.newText)));return new t(n)}static _fromTextEditInfo(e){let n=e.map(r=>{let i=Py(r.newLength);return new hV(vUe(r.startOffset,r.endOffset),new Wl(i.lineCount,i.columnCount))});return new t(n)}_toTextEditInfo(){return this.edits.map(e=>new $R(VR(e.range.startLineNumber-1,e.range.startColumn-1),VR(e.range.endLineNumber-1,e.range.endColumn-1),VR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let n=this._toTextEditInfo(),r=e._toTextEditInfo(),i=EUe(n,r);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},hV=class{constructor(e,n){this.range=e;this.newLength=n}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var gV=class{constructor(e){this.documents=e;ql(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(n=>n.docId===e)}getDocumentAndIdx(e){let n=this.documents.findIndex(r=>r.docId.uri===e.uri);if(n!==-1)return{doc:this.documents[n],idx:n}}},AV=class{constructor(e,n,r,i,o){this.docId=e;this.languageId=n;this.base=r;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new ru(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var yV=class extends jo{constructor(){super();this.branch=Nm("branchName",void 0);this._register(Coe((n,r)=>{this.init(r)}))}static{s(this,"ObservableGitStub")}async init(n){}};var xV=class extends jo{constructor(n,r=!1){super();this._documentState=new Map;this._lastDocuments=new j0e(50);this.workspace=n,this._lastGitCheckout=void 0,this._started=!1,r||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let n=new yV;this._register(C2(r=>{r.readObservable(n.branch)!==void 0&&(this._lastGitCheckout=AR(),this._documentState.forEach(o=>o.applyAllEdits()))})),Zf(this,this.workspace.openDocuments,(r,i)=>{let o=r.selection.get().at(0),a=new H0e(r.id,r.value.get().value,r.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(J1(this,{value:r.value,selection:r.selection,languageId:r.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Ra(()=>{let l=this._documentState.get(r.id);l&&this._lastDocuments.remove(l),this._documentState.delete(r.id)}))},r=>r.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(n,r=5,i=100){let o=this._documentState.get(n);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(n))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(r,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===n&&(l=!0),a.push(u.history),r-=u.editCount,r<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===n))return new gV(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let n=AR()-this._lastGitCheckout<2*1e3;return n||(this._lastGitCheckout=void 0),n}getRecentDocumentUris(){return this._lastDocuments.getItems().map(n=>n.docId.uri)}},H0e=class t{constructor(e,n,r,i){this.docId=e;this.languageId=r;this._edits=[];this._isUserDocument=!1;this._baseValue=new Gl(n),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,n){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let r=yR.fromEdit(e,this._currentValue),i=X9.fromTextEdit(r);if(n){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return CV(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&kPt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=AR(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:AR()})}getRecentEdit(e,n){if(!this._isUserDocument)return;let{editCount:r}=this._applyStaleEdits(e,n),i=new cA(this._edits.map(o=>o.edit));return{history:new AV(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:r}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,n){let r=this._currentValue,i=Is.empty,o=X9.empty,a,l=0,c=Is.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(AR()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();Dj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(n>0&&m>n)break;let h=CV(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||CV(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||CV(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let B=Is.trySwap(u.edit,c);if(B)c=B.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(r.value);r=r.apply(v);let b=u.edit.compose(i),E=Lo.fromEdit(new ru(r,b)),k=new uA(r,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new cA(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function CV(t,e){let n=0;for(let r of t)n+=e(r);return n}s(CV,"sum");function kPt(t,e){let n=e.getNewRanges();return t.edits.every(r=>BPt(r.range,n))}s(kPt,"editExtends");function BPt(t,e){return e.some(n=>t.start===n.endExclusive||t.endExclusive===n.start)}s(BPt,"doesTouch");var j0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let n=this._arr.indexOf(e);n!==-1?this._arr.splice(n,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let n=this._arr.indexOf(e);n!==-1&&this._arr.splice(n,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var IUe=10,lh=class{constructor(e){this.lastResultsById=new Ln(IUe);this.lastResultsByUri=new Ln(IUe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,n,r){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=ih.create(e),l=await i.getNextEdit(a,{triggerKind:1},r);if(l.result==null)return;let c=await this.ctx.get(Tn).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=an(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:n}},id:p}]}async handleAcceptance(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(this.lastResultsByUri.delete(r.documentId.uri),this.lastResultsById.delete(r.resultId),await n.handleAcceptance(r.documentId,r.nextEditResult))}async handleShown(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(r.isShown=!0,n.handleShown(r.nextEditResult))}async createNextEditProvider(){let e=await gUe(this.ctx),n;try{let o=await this.ctx.get(Rt).updateExPValuesAndAssignments(),a=DPt(this.ctx,o);n=e.createInstance(a?vp:Dy)}catch{n=e.createInstance(Dy)}let r=this.ctx.get(Lm),i=new xV(r);return await PI.catch(()=>{}),e.createInstance(jR,r,n,i,new Xj(r))}};function DPt(t,e){let n=ui(t,wt.NESXTab);return n!==void 0?n:t.get(Rt).enableNESXTab(e)}s(DPt,"shouldUseXTab");f();var TUe=qe(ri());var vV=class extends Lm{constructor(n){super();this._openDocuments=Nm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=n,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let n=this.ctx.get(Tn);for(let r of n.getTextDocumentsUnsafe())r&&this.addLspDocument(r.uri,r.clientLanguageId,r.getText());n.onDidOpenTextDocument(async r=>{this.addLspDocument(r.document.uri,r.document.languageId,r.document.text)}),n.onDidCloseTextDocument(async r=>{this.removeClosedLspDocument(r.document.uri)}),n.onDidChangeTextDocument(async r=>{this.onDidChangeLspDocument(r.document.uri,r.contentChanges)})}addLspDocument(n,r,i){let o=ih.create(n);return this.addDocument({id:o,initialValue:i,languageId:v2.create(r)},void 0)}onDidChangeLspDocument(n,r){let i=ih.create(n),o=this._documents.get(i);o&&o.applyLspContentChanges(r)}onUserPositionChange(n,r){let i=ih.create(n),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(r)}removeClosedLspDocument(n){let r=ih.create(n);this._documents.get(r)?.dispose()}addDocument(n,r=void 0){let i=this._documents.get(n.id);if(i)return i;let o=new V0e(n.id,new Gl(n.initialValue??""),[],n.languageId??v2.PlainText,()=>{this._documents.delete(n.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,r,{added:[],removed:[o]})},n.workspaceRoot);return this._documents.set(n.id,o),this._openDocuments.set([...this._openDocuments.get(),o],r,{added:[o],removed:[]}),o}async getDocument(n){if(await this.ctx.get(Tn).getTextDocument(n))return this._documents.get(n)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let n of this._documents.values())n.dispose();this._documents.clear()}getWorkspaceRoot(n){return this._documents.get(n)?.workspaceRoot}},V0e=class extends cq{static{s(this,"MutableObservableLspDocument")}constructor(e,n,r,i,o,a){super(e,n,r,i,o,a)}applyLspContentChanges(e){let n=this.editFromLspContentChanges(e);this.applyEdit(n.compose(),void 0)}updateSelectionFromLspPosition(e){let n=this.value.get().getTransformer().getOffset(new ir(e.lineNumber+1,e.column+1));this.updateSelection([new kt(n,n)])}editFromLspContentChanges(e){return new cA(e.map(r=>this.editFromLspContentChange(r)))}editFromLspContentChange(e){if(TUe.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),r=n.getOffset(new ir(e.range.start.line+1,e.range.start.character+1)),i=n.getOffset(new ir(e.range.end.line+1,e.range.end.character+1));if(r>i)throw new fr(`Invalid range: [${r}, ${i}) from ${JSON.stringify(e.range)}`);return Is.replace(new kt(r,i),e.text)}throw new Error("Full replacement edits are not supported")}};f();var wUe=require("crypto"),CA=qe(require("fs/promises")),_Ue=require("os"),Ny=qe(require("path"));var Ly=class{constructor(e){this.ctx=e;this.logger=new Tt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,n=process.arch;return this.rgPath=await this.resolvePathByOs(e,n),this.rgPath}async resolvePathByOs(e,n){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${n}`),n!=="arm64"&&n!=="x64")throw new Error(`Unsupported architecture: ${n}`);let r=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=Ny.extname(__filename)===".ts"?Ny.resolve(__dirname,"../../../packages/ripgrep/bin"):Ny.resolve(__dirname,"./bin"),o=Ny.resolve(i,e,n,r);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await CA.readFile(o),l=(0,wUe.createHash)("sha256").update(a).digest("hex"),c=Ny.join((0,_Ue.homedir)(),".cache/pkg",l);await CA.mkdir(c,{recursive:!0});let u=Ti(pl(o)),d=Ny.join(c,u);try{await CA.stat(d)}catch{await CA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await CA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var SUe=require("child_process"),$0e=require("perf_hooks");var Fy=new Tt("ripgrepProcessManager"),ch=class{constructor(e,n,r){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=n??this.maxProcesses,this.maxPendingTasks=r??this.maxPendingTasks,Fy.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){Fy.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(n){Fy.error(this.ctx,"Failed to kill process. ",n)}}),this.activeProcesses.clear()}execute(e,n,r,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){Fy.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){Fy.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}Fy.debug(this.ctx,`Adding task to queue: ${e} ${n.join(" ")}`),this.taskQueue.push({id:RH(),command:e,args:n,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:r});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);Fy.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),n=$0e.performance.now();Fy.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let r=(0,SUe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(r);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(r),r.stdout?.removeAllListeners(),r.stderr?.removeAllListeners(),r.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{r.killed||(r.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{r.killed||(r.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),r.stdout?.on("data",c=>{i+=c.toString()}),r.stderr?.on("data",c=>{o+=c.toString()}),r.on("close",c=>{let d=$0e.performance.now()-n;Fy.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),r.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(r){e.reject(new Error(`Error spawning process: ${r.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var zR=class extends Ng{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var RUe=100,kUe=1e3*60*5;function BUe(t){let e=new z0e(t);t.get(Ba).registerContextProvider(e),t.get(kg).add(e.id)}s(BUe,"registerRelatedFilesShim");var z0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new lI(RUe,kUe);this.relatedFilesCache=new lI(RUe,kUe);this.resolver={resolve:s(async(n,r)=>{let i=n.documentContext.uri,o=n.documentContext.languageId;return await this.getTraits(i,o,r)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,n,r){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,n,n,r),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,n,r,i){try{let o=await this.ctx.get(Rt).updateExPValuesAndAssignments({uri:e,languageId:r}),a={uri:e,clientLanguageId:n,detectedLanguageId:r},l=await hq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){Cv(this.ctx,o,"relatedFilesShim")}}};f();f();f();var DUe=qe(require("node:events"));var bV="onWorkspaceWatcherChanged";var EV=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.emitter=new DUe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(bV,Vc(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(bV,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(bV,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(bV,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var ou=class{constructor(e){this.ctx=e;this.watchers=new Ln(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let n=this.watchers.get(e.uri);if(n)return n;let r=this.getParentFolder(e.uri);return r?this.watchers.get(r):void 0}getParentFolder(e){return[...this.watchers.keys()].find(r=>{let i=r.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==r&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Fn.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let n=this.createWatcher(e);this.watchers.set(e.uri,n)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let n=[];for(let o of this.watchers.values())n.push(o.workspaceFolder);let r=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=n.filter(o=>o.uri!==e.uri&&o.uri.startsWith(r));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,n){this.getWatcher(e)?.onFileChange(n)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var YR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,n){}onFileChange(e){}},PPt="workspaceLifecycleManager",su=new Tt(PPt),xA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let n=Ps(e,async()=>{n.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?su.debug(this.ctx,`listener ${e.constructor.name} is already started`):(su.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):su.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);su.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(O0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Tn).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,n){let r=e.uri,i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return r!==i&&r.startsWith(i)}async onWorkspacesAdded(e,n){if(!e.length){su.debug(n,"No workspaces to add.");return}su.debug(n,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let r=[...this.watchedWorkspaces,...e];su.debug(n,`Combined workspaces: ${r.map(l=>l.uri).join(", ")}`);let i=r.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));su.debug(n,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));su.debug(n,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));su.debug(n,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){su.debug(n,`Terminating watching for removed workspace: ${l.uri}`),n.get(ou).terminateWatching(l);for(let u of this.activeListeners)su.debug(n,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;su.debug(n,`Starting to watch new workspace: ${l.uri}`);let c=n.get(ou);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){su.debug(n,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)su.debug(n,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)su.debug(n,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,n){if(e.length)for(let r of e){if(!r.uri)continue;n.get(ou).terminateWatching(r),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==r.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(r)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(n=>n!==e)}removeAllListeners(){this.activeListeners=[]}};function IV(t){t.set(xA,new xA(t))}s(IV,"setupWorkspaceLifecycleListener");f();f();var TV=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var NPt=64;var Pb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},vA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},Y0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,NPt)}},Db=class extends Y0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},ST=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},RT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Hi=class{static{s(this,"LanguageModelToolResult")}constructor(e,n){this.status=n,this.content=e}},NUe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),wV=(n=>(n.Accept="accept",n.Dismiss="dismiss",n))(wV||{}),LUe=I.Object({result:I.Enum(wV)});var Ep=class extends Db{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:Pb,type:"shared"})}};f();var LPt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),FPt=new Map;for(let[t,e]of LPt)FPt.set(e,t);f();function KR(t){return`[${Ti(t)}](${t})`}s(KR,"formatUriForFileWidget");function bA(t){let e=MPt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(bA,"resolvePathInput");function MPt(t){if(t.startsWith("/")||MUe()&&OPt(t)||MUe()&&t.startsWith("\\\\"))return pl(t)}s(MPt,"resolveFsUri");function MUe(){return process.platform==="win32"}s(MUe,"isWindows");function QPt(t){return t>=65&&t<=90||t>=97&&t<=122}s(QPt,"isWindowsDriveLetter");function OPt(t){return QPt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(OPt,"hasDriveLetter");function Z9(t){let e="";return t.length>0&&(e=t.map(n=>n instanceof Ci?n.value:n instanceof RT?"":n instanceof ST?JSON.stringify(n.value):"").join(`
`)),e===""?"(empty)":e}s(Z9,"parseToolResultToString");function _V(t){let{content:e}=t;return{message:Z9(e)}}s(_V,"formatToolErrorResult");function QUe(t){let{content:e}=t;return{data:e.map(n=>n instanceof Ci?{type:"text",value:n.value}:n instanceof RT?{type:"text",value:"<unsupported>"}:n instanceof ST?{type:"data",value:{mimeType:n.value.mimeType,data:n.value.data}}:{type:"text",value:""})}}s(QUe,"formatToolSuccessResult");var SV=class extends Ep{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,n,r){try{let i=await this.mapCode(n.input,e,r),o=await this.invokeClientEditFileTool(e,n,i,r);return this.getFinalEditFileResult(n,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new Ci(o)],"error")}}async mapCode(e,n,r){let{filePath:i}=e,o=bA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new mR(n.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},n.toLlmInteraction(),r,void 0,!0)}async invokeClientEditFileTool(e,n,r,i){let o=e.ctx.get(au).getToolByNameAndProvider("insert_edit_into_file",vA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(au).invokeTool(e,o.id,{toolInvocationToken:n.toolInvocationToken,input:{filePath:n.input.filePath,code:r,explanation:n.input.explanation},roundId:n.roundId,toolCallId:n.toolCallId},i)}getFinalEditFileResult(e,n){if(n.status!=="success")return n;let r=Z9(n.content),i=JS({uri:bA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new q0({code:r,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Hi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=bA(r.filePath);return{progressMessage:`Editing ${KR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var OUe=new Tt("findFilesTool"),RV=class t extends Ep{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Hi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Ly).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=n.input,l=e.turn.workspaceFolders;if(!l?.length)return new Hi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(ch),u={},d=l.map(async g=>{if(r.isCancellationRequested)throw new Error("Canceled");try{OUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],r,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);OUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(ko(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Hi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Hi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for files matching query: ${r.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var UUe=new Tt("findTextInFilesTool"),kV=class t extends Ep{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Hi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Ly).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=n.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Hi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(ch),p={},m=u.map(async v=>{if(r.isCancellationRequested)throw new Error("Canceled");try{UUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,r,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);UUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Hi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Hi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for text in files matching query: ${r.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var BV=class extends Ep{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,n,r){let{path:i}=n.input,o=bA(i),l=await e.ctx.get(po).readDirectory(o.toString());return l.length===0?new Hi([new Ci("Folder is empty")],"success"):new Hi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,n){let r=bA(e.input.path);return{progressMessage:`Reading directory ${KR(r)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var DV=class extends Ep{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,n,r){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=n.input,l=bA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(Cr).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new q0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Hi([new Ci(d.renderAsString(`
`))],"success")}else return new Hi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Hi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running read_file tool"};let i=bA(r.filePath);return{progressMessage:`Reading file ${KR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function qUe(){return[new BV,new DV,new SV,new RV,new kV]}s(qUe,"getAllClsTools");var au=class{constructor(e){this.ctx=e;this._toolRegistry=new TV;for(let n of qUe())this._toolRegistry.registerTool(n)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,n,r){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(n,r)??{}}async invokeTool(e,n,r,i){if(i.isCancellationRequested)throw new Na;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invoke?.(e,r,i)??new Hi([],"success")}async invokeToolConfirmation(e,n,r,i){if(i.isCancellationRequested)throw new Na;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invokeConfirmation?.(e,r,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,n){return this._toolRegistry.listTools().find(r=>r.name===e&&r.toolProvider.id===n.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let n=e.get(Pb.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(Pb.id)?.splice(e.get(Pb.id)?.indexOf(n)??0,1);let r=e.get(vA.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(vA.id)?.splice(e.get(vA.id)?.indexOf(r)??0,1);let i=new Map;n&&r&&i.set(n.nameForModel,n);let o=e.get(vA.id)??[],a=e.get(Pb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==Pb.id&&c!==vA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var kT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var HUe=require("crypto"),K0e=require("fs"),J0e=qe(require("path"));var WUe="symbolDatabaseLookup",GUe="multiLanguageContextProviderDocumentSymbols",BT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let n=await this.persistenceManager.read(WUe,e);return n||(n=await this.createDBFile(e)),J0e.default.join(this.persistenceManager.directory,GUe,n)}async init(){let e=J0e.default.join(this.persistenceManager.directory,GUe);await this.createIfNotExists(e)}async dirExists(e){try{return await K0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await K0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let n=`${(0,HUe.randomUUID)()}.db`;return await this.persistenceManager.update(WUe,e,n),n}async deleteDBFile(e){}};f();f();var DT=class{static{s(this,"FileSearch")}};f();var e6=class{constructor(e,n){this.workspaceUris=e;this.params=n}static{s(this,"FileWatcher")}};f();f();f();var PV=qe(require("path")),jUe=require("worker_threads");function VUe(t,e){return new jUe.Worker(PV.default.resolve(PV.default.extname(__filename)!==".ts"?__dirname:PV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(VUe,"createWorker");f();var NV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,n=!1){return new Promise((r,i)=>{n?this.outstandingPromises.unshift({factory:e,c:r,e:i}):this.outstandingPromises.push({factory:e,c:r,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let n=e.factory();n.then(e.c,e.e),n.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var $Ue=qe(ri());var LV="main.js",FV=class{constructor(e,n,r=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:n};this.worker=VUe(LV,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new NV(r)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new zQ(this.id++),$Ue.CancellationToken.None,!0)}async indexFile(e,n,r){return await this.postMessageInQueue(new jQ(this.id++,e,n),r)}async getAllFileNames(e,n){return this.postMessageInQueue(new VQ(this.id++,e),n)}getContext(e,n,r,i,o,a){return this.postMessageInQueue(new $Q(this.id++,e,n,r,i,o),a,!0)}tryCreateIndex(e,n,r){return this.postMessageInQueue(new GQ(this.id++,e,n),r)}async postMessageInQueue(e,n,r=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,n),r)}tryRemoveIndex(e,n){return this.postMessageAndWait(new HQ(this.id++,e),n)}async postMessageAndWait(e,n){if(this.fatalError)return Promise.reject(this.fatalError);let r=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=n.onCancellationRequested(()=>{this.worker.postMessage(new WQ(e.id))});try{return await r}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let n=this.promiseResolvers.get(e.id);if(!n)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,n.reject(e.error)):n.resolve(e.data)}handleUnexpectedError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith(LV+"'")&&(n=new Error(`Failed to load ${LV}`),n.code="CopilotPromptLoadFailure");let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(n=new Error(`${LV} exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.promiseResolvers.values())r.reject(n);this.promiseResolvers.clear(),this.fatalError=n}};var t6=qe(ri());var $0=new Tt(yv),PT=class{constructor(e,n,r,i,o){this.ctx=e;this.watcher=n;this.workspaceDatabasePersistenceManager=r;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,l)=>{if(a===1){$0.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,t6.CancellationToken.None);return}$0.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new FV(i,o);for(let a of i){let l=a.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{$0.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[n]of this.workspaceInit)if(e.startsWith(n))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let n=await qPt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(n.rootPath,n.databaseFilePath,t6.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let r=this.doWorkspaceIndex(e).then(()=>{$0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,r)}async doWorkspaceIndex(e){$0.debug(this.ctx,`indexing workspace ${e}`);let n=_ne.map(d=>`*${d}`);if(n.length===0)return;let i=`**/${_ne.length===1?n[0]:`{${n.join(",")}}`}`,o=this.ctx.get(DT),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,t6.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));$0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),$0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,n){try{$0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,n,t6.CancellationToken.None)}catch(r){$0.debug(this.ctx,`failed to index ${e} with ${r}`)}}languageId(e){return XTe(e)}};async function qPt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(qPt,"createIndexableWorkspaceFolder");f();f();var zUe=100,WPt=5e3,MV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,n,r,i,o,a,l,c){let u=Date.now(),d=this.get(r,i,n,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(n,r,i,o,l,c);let p=new sr.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(n,r,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(r,i,n,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,n,r,i){if(this.cachedValue&&this.cachedValue.uri===r&&!(Math.abs(this.cachedValue.cursorPosition-n)>zUe)){if(n>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,n).match(/[^A-Za-z0-9]/))return}else if(n<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>WPt))return this.cachedValue}}setBasedOnLastDelimiter(e,n,r,i,o,a){let l=e.substring(0,n),c=/[A-Za-z0-9]+$/.exec(l),u=n;c&&(u=c.index),n-u>zUe&&(u=n);let d={cursorPosition:u,uri:r,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:an(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var QV=class{constructor(e){this.id=yv;this.selector=Array.from(TQ.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Tn),this.resolver=new X0e(this.documentManager,e)}catch(n){throw $0.error(e,"Failed to create multi-language context provider",n),n}}static{s(this,"MultiLanguageContextProvider")}},X0e=class{constructor(e,n){this.ctx=n;this.documentManager=e,this.cachedContextFetcher=new MV}static{s(this,"MultiLanguageContextResolver")}resolve(e,n){return this.resolveImpl(e,n)}async resolveImpl(e,n){let r=this.ctx.get(kT).indexWatcher;if(!r)return[];if(r.isInitializing(e.documentContext.uri))return[];let i=r.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Lg(o,a);c=c.applyEdits(l);let u=ARe(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,n);return $0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(uQ(o))return[];throw $0.error(this.ctx,"Failed to get context",o),o}}};var n6=class extends YR{constructor(n){super();this.started=!1;this.ctx=n,this.ctx.get(xA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Ba).providers.some(n=>n.id===yv)){let n=this.ctx.get(BT);this.fileWatcher=new Z0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new PT(this.ctx,this.fileWatcher,n,[]),this.fileSearch=new efe(this.ctx),this.ctx.set(e6,this.fileWatcher),this.ctx.set(DT,this.fileSearch),this.ctx.set(PT,this.multiLanguageContextIndexWatcher),this.ctx.get(Ba).registerContextProvider(new QV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let n=await this.ctx.get(Rt).updateExPValuesAndAssignments(),r=LU(this.ctx,n);return r.includes(yv)||r.length===1&&r[0]==="*"}async onWorkspaceAdded(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,n.uri)}async onWorkspaceRemoved(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,n.uri)}async onWorkspaceSubfoldersTerminated(n,r){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(n,r)}async onFileChange(n){if(await this.isEnabled())for(let r of n.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(n.type),r.uri)}toFileWatcherType(n){switch(n){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},Z0e=class extends e6{constructor(n,r){super(n,r);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(n){this.fileChangeListeners.push(n)}onWorkspaceChange(n){this.workspaceChangeListeners.push(n)}dispose(){}async triggerFileChange(n,r){for(let i of this.fileChangeListeners)await i(n,r)}async triggerWorkspaceChange(n,r){for(let i of this.workspaceChangeListeners)await i(n,r)}},efe=class extends DT{constructor(n){super();this.ctx=n}static{s(this,"LspFileSearch")}async findFiles(n,r,i){return(await this.ctx.get(ou).getWatchedFiles(r)).map(a=>this.ctx.get(Tn).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var tfe=class extends kT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new n6(e),e.set(n6,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function YUe(t){let e=t.get(gc),n=new BT(e);t.set(BT,n),t.set(kT,new tfe(t))}s(YUe,"setupMultiLanguageContextProviderFeature");f();f();f();var EA=new Map;EA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});EA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});EA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});EA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});EA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});EA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var HPt=new Tt("sdk");function OV(t,e){EA.has(t.get(Jn).getEditorPluginInfo().name)||HPt.warn(t,...e)}s(OV,"deprecationWarning");var $ze=qe(xfe()),Ch=qe(Sm());f();f();f();var tr={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Tc=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(UWe(e))}};function ot(t,e){let n=hs.Compile(t);return async(r,i,o)=>{if(!n.Check(o)){let a=UWe(n.Errors(o));return[null,{code:tr.InvalidParams,message:a}]}return e(r,i,o)}}s(ot,"addMethodHandlerValidation");function UWe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(n=>`- ${n.path}: ${n.message}`).join(`
`)}`}s(UWe,"createErrorMessage");f();var vfe=qe(ri());f();var TA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var JV="github.copilot.finishDeviceFlow",bfe=class extends TA{constructor(){super(...arguments);this.name=JV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(n,r){let i=this.ctx.get(Sr).pendingSignIn;if(!i)throw new vfe.ResponseError(tr.InvalidRequest,"No pending sign in");try{await this.ctx.get(hc).open(i.verificationUri)}catch(o){p0.warn(this.ctx,"Failed to open",i.verificationUri),p0.exception(this.ctx,o,JV)}try{return await i.status}catch(o){throw new vfe.ResponseError(tr.DeviceFlowFailed,String(o))}finally{this.ctx.get(Sr).pendingSignIn=void 0}}},qWe=[bfe];f();f();var os=class extends Ln{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var u6="github.copilot.didAcceptCompletionItem",Efe=class extends TA{constructor(){super(...arguments);this.name=u6;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(n,[r]){let o=this.ctx.get(os).get(r);return o?(Sq(this.ctx,o),!0):!1}},WWe=[Efe];f();var UNt="github.copilot.didAcceptNextEditSuggestionItem",Ife=class extends TA{constructor(){super(...arguments);this.name=UNt;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(n,[r]){return await this.ctx.get(lh).handleAcceptance(r),!0}},GWe=[Ife];f();var wfe="github.copilot.didAcceptPanelCompletionItem",Tfe=class extends TA{constructor(){super(...arguments);this.name=wfe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(n,r){let[i]=r,a=this.ctx.get(os).get(i);return a?(_2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},HWe=[Tfe];var qNt=[...qWe,...WWe,...GWe,...HWe];function jWe(t,e){let n=new Map;for(let r of qNt){let i=new r(t),o=hs.Compile(i.arguments);n.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((r,i)=>{let o=n.get(r.command);if(!o)throw new Error(`Unknown command: ${r.command}`);let a=Qy(r.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(r.arguments))return o.command.handle(i,a);throw new Tc(o.typeCheck.Errors(r.arguments))}),[...n.keys()]}s(jWe,"registerCommands");f();var VWe=qe(require("node:events"));var uh=class extends FI{constructor(n){super(new $S,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...n},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(r=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${WNt(r.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(wt[r],this.env[o]),this.setConfig(wt[r],this.env[o]))}})}setConfig(n,r){super.setConfig(n,r??this.envSettings.get(n)),this.emitters.get(n)?.emit("change",r)}onConfigChange(n,r){this.emitters.has(n)||this.emitters.set(n,new VWe.default),this.emitters.get(n)?.on("change",r)}};function WNt(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(WNt,"camelCaseToSnakeCaseAllCaps");var GNt="unknown-editor",$We="unknown-editor-plugin",XV=class extends Jn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,n,r=[]){this._editorInfo=n,this._editorPluginInfo=e,this._relatedPluginInfo=r}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:GNt,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:$We,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function zWe(t){return t.getEditorPluginInfo().name!==$We}s(zWe,"hasValidInfo");f();var KWe=require("node:events");var YWe="initialize",Oy=class{constructor(){this.emitter=new KWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(YWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(YWe)}};f();var Uy=qe(Sm());var HNt=new Map([[4,Uy.MessageType.Log],[3,Uy.MessageType.Info],[2,Uy.MessageType.Warning],[1,Uy.MessageType.Error]]),ZV=class extends Va{static{s(this,"NotificationLogger")}logIt(e,n,r,...i){if(n==4&&!Wq(e)&&r!=="console")return;let o={type:HNt.get(n),message:L3e(r,...i)},a=e.get(Cn).connection;try{a.sendNotification(new Uy.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof Uy.ConnectionError)return;throw l}}};f();var JWe=qe(Za());var e$=class{constructor(e,n=!1){this.ctx=e;this.codeSnippets=n}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,n,r){this.ctx.get(Cn).connection.sendNotification(new JWe.NotificationType(this.notificationName),{type:"event",name:e,properties:n||{},measurements:r||{}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(e,n,r)}dispose(){return Promise.resolve()}};async function XWe(t){let e=t.get(Ll),n=e.deactivate();e.setReporter(new e$(t)),e.setRestrictedReporter(new e$(t,!0)),await n}s(XWe,"setupRedirectingTelemetryReporters");f();f();var t$=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,n){n?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var d6=qe(xfe());var ek=class extends t${static{s(this,"AgentInstallationManager")}async isNewInstall(e){let n=e.get(Jn).getEditorPluginInfo();return await e.get(gc).read("versions",n.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(gc).listSettings()).length>0}async markInstalled(e){let n=e.get(Jn).getEditorPluginInfo();await e.get(gc).update("versions",n.name,n.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let n=e.get(Jn).getEditorPluginInfo(),r=await e.get(gc).read("versions",n.name);return r===void 0&&await this.hasPersistedSettings(e)?!0:(0,d6.gt)((0,d6.coerce)(n.version),(0,d6.coerce)(r))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let n=e.get(Jn).getEditorPluginInfo();await e.get(gc).delete("versions",n.name),(await e.get(gc).listKeys("versions")).length===0&&await e.get(gc).deleteSetting("versions")}};f();var ZWe=require("events"),Sfe=qe(require("path")),n$=qe(Za());var _fe="didChangeWatchedFiles",jNt={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},dh=class t{constructor(e){this.ctx=e;this.emitter=new ZWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new n$.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Cn).connection}init(){this.ctx.get(Ho).getCapabilities().watchedFiles&&this.connection.onNotification(n$.DidChangeWatchedFilesNotification.type,n=>{"workspaceUri"in n&&typeof n.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(n)})}async getWatchedFiles(e){if(!this.ctx.get(Ho).getCapabilities().watchedFiles)return jNt;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=Sfe.extname(c).toLowerCase();if(!QI.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(_fe,e)}offDidChangeWatchedFiles(e){this.emitter.off(_fe,e)}async didChangeWatchedFilesHandler(e){let n=[],r=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=Sfe.extname(o.uri).toLowerCase();if(!QI.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:r.push(l);break;case 2:n.push(l);break;case 3:i.push(l);break}}this.emitter.emit(_fe,{workspaceFolder:{uri:e.workspaceUri},created:r,changed:n,deleted:i})}async getValidDocument(e){let r=await this.ctx.get(Cr).getOrReadTextDocument({uri:e});return r.status==="valid"?r.document:void 0}};f();f();var VNt=I.Object({uri:I.String({minLength:1})});async function $Nt(t,e,n){let r=await t.get(Cr).getOrReadTextDocument(n);return[{status:Cs(r),...r.status==="invalid"&&{reason:r.reason},...r.status==="notfound"&&{reason:r.message}},null]}s($Nt,"handleCheckFileStatusChecked");var eGe=ot(VNt,$Nt);f();var zNt=I.Object({});function tGe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(tGe,"calculatePercentRemaining");async function YNt(t,e,n){let r=await t.get(Sr).getSession();if(r){let i=await Dte(t,r);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:tGe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:tGe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:tr.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:tr.InternalError,message:"Not signed in"}]}s(YNt,"handleCheckQuotaChecked");var nGe=ot(zNt,YNt);f();var KNt=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function JNt(t,e,n){return[await t.get(Sr).checkAndUpdateStatus(n.options),null]}s(JNt,"handleCheckStatusChecked");var rGe=ot(KNt,JNt);f();f();f();f();f();f();function iGe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(iGe,"filterUnsupportedReferences");function oGe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(oGe,"convertToCopilotReferences");var sGe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var Nb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,n){let r=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(n.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(r,o,iGe(n.copilotReferences),n.copilotErrors??[],n.copilotConfirmation)}append(e,n,r,i,o){this.deltaApplier(e,n,r,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...n.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let n=[],r=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return n.push(...r),n.push(...i),n}};f();var sl=class{static{s(this,"ConversationInspector")}};f();var Rfe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var _s=class{constructor(e){this.ctx=e;this.progressEntries=new Ln(250)}static{s(this,"ConversationProgress")}async begin(e,n,r){let i={status:"open",handler:r};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,n)}async report(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,n,r)}async end(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,n,r))}async cancel(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,n,r))}getProgressEntry(e){let n=this.progressEntries.get(e.id);if(n===void 0)throw new Error(`No work done token for conversation ${e.id}`);return n.status!=="open"&&Fn.error(this.ctx,`Work done token for conversation ${e.id} is already ${n.status}, last updated at ${n.updatedAt}`),n}};f();f();var wA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let n=`${e.hostname}/${e.owner}/${e.repo}`,r=this.githubRepositoryInfoCache.get(n);if(r)return r;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(n,o),o}}async _doGetRepositoryInfo({owner:e,repo:n,hostname:r}){let i=await this.ctx.get(Sr).getSession({authAuthority:r});if(!i&&!(r==="github.com"||r.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${n}`,i?.apiUrl||`https://api.${r}`).href;return this.ctx.get(Kr).fetch(a,{method:"GET",headers:o})}};f();f();f();var lGe=qe(z0());var _A=class{constructor(e,n,r){this.doc=e;this.selection=n;this.visibleRange=r}static{s(this,"ElidableDocument")}fromSelectedCode(e){let n=this.getExpandedSelection(),r=n;if(e.trimNewLines){let o=this.doc.getText(n),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;r={start:this.getLineStart(n.start.line+a),end:this.expandLineToEnd(n.end.line-l)}}let i=new Dt([(0,lGe.default)(this.doc.getText(r)).trim()]);return[this.wrapInTicks(i),r]}fromAllCode(e){let n=this.getDocumentRange(),r=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,r)?i=r:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:n.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):n.start},a={start:i.start,end:r.start.line>0&&r.start.line>i.start.line?this.expandLineToEnd(r.start.line-1):i.start},l={start:r.end.line<this.doc.lineCount-1&&r.end.line<i.end.line?this.getLineStart(r.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):n.end,end:n.end},u=[[o,.6],[a,.8],[r,1],[l,.4],[c,.2]],d=new Dt(u.filter(([p,m])=>!tk(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:A0(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||tk(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,n){return e.start.line<=n.start.line&&e.end.line>=n.end.line}rangeEquals(e,n){return e.start.line==n.start.line&&e.end.line==n.end.line}wrapInTicks(e,n){return new Dt([["```"+this.doc.detectedLanguageId,1],[e,n??1],["```",1]])}addLineNumbers(e){let n=this.doc.getText(e).split(`
`),r=this.doc.lineCount.toString().length;return n.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(r," ")}:${o}`).join(`
`)}};function tk(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(tk,"isEmptyRange");var cGe=qe(require("path"));var uGe=I.Object({uri:I.String(),visibleRange:I.Optional(_a),selection:I.Optional(_a)}),kfe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument(e),i=Cs(r);if(await this.turnContext.collectFile(cu,e.uri,i),r.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new _A(r.document,e.selection,e.visibleRange),l=n.getRelativePath(r.document);if(i==="empty")return new Dt([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(tk(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Dt([...c,...u])}else if(r.status==="invalid")return new Dt([`The currently open file \`${cGe.basename(e.uri)}\` is content excluded.`])}},cu="current-editor",r$=class{constructor(e){this._resolver=e;this.id=cu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new kfe(e)}};f();f();var vl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(n=>n.id===e)}getDescriptors(){return[...this.skills]}},Bfe=class{constructor(e,n,r){this.delegate=e;this.stepId=n;this.stepTitle=r}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let n=await this.delegate.resolveSkill(e);return n||await e.steps.finish(this.stepId),n}catch(n){throw await e.steps.error(this.stepId,n instanceof Error?n.message:`Error resolving ${this.stepTitle}`),n}}},Dfe=class{constructor(e,n){this.delegate=e;this.stepId=n}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,n){try{let r=await this.delegate.processSkill(e,n);return await n.steps.finish(this.stepId),r}catch(r){throw await n.steps.error(this.stepId,r instanceof Error?r.message:`Error processing ${this.stepId}`),r}}},Xl=class{constructor(e,n,r,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=n;this.stepTitle=r;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new Bfe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new Dfe(this._processor(e),this.id)}};var dGe=I.Object({name:I.String(),url:I.String()}),fGe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(dGe)})),remotes:I.Optional(I.Array(dGe))}),Pfe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(SA,"git repository information");let n=[];return n.push([new Dt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(n.push([new Dt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&n.push([new Dt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):n.push([new Dt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&n.push([new Dt([`- Remotes: ${e.remotes.map(r=>r.name).join(", ")}`]),1]),new Dt(n)}},SA="git-metadata",i$=class extends Xl{static{s(this,"GitMetadataSkill")}constructor(e){super(SA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,n=>new Pfe(n))}};async function pGe(t){let e=await t.skillResolver.resolve(cu);if(e){let a=e.uri,l=ev(t.ctx,a);if(DTe(l))return{repoInfo:l,skillUsed:cu}}let n=await t.skillResolver.resolve(SA);if(!n||!n.remotes||n.remotes.length===0){Fn.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=n.remotes.find(a=>a.name==="origin")??n.remotes[0],o=nne(i.url);if(o)return{repoInfo:{baseFolder:{uri:n.path},url:i.url,...o},skillUsed:SA}}s(pGe,"extractRepoInfo");async function mGe(t){let e=[];return await XNt(t,e),await ZNt(t,e),await e7t(t,e),e}s(mGe,"skillsToReference");async function XNt(t,e){let n=await t7t(t);n&&e.push(n)}s(XNt,"addRepositoryReference");async function ZNt(t,e){let n=await n7t(t);n&&e.push(n)}s(ZNt,"addSelectionReference");async function e7t(t,e){let n=[],r=await i7t(t);r&&n.push(r),n.push(...await o7t(t)),n.length>0&&e.push(...n)}s(e7t,"addFileReferences");async function t7t(t){let e=await pGe(t);if(e){let n=t.ctx.get(wA),r=e.repoInfo.owner,i=e.repoInfo.repo,o=await n.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${r}/${i}`,data:{type:"repository",name:i,ownerLogin:r,id:o.id}}}}s(t7t,"gitMetadataToReference");async function n7t(t){let e=await t.skillResolver.resolve(cu);if(e&&e.selection){let r=await t.ctx.get(Cr).getOrReadTextDocument(e),i=Cs(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),r.status==="valid")return r7t(e,r.document)}}s(n7t,"currentEditorToSelectionReference");function r7t(t,e){if(t.selection&&!tk(t.selection)){let n=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:n}}}}s(r7t,"extractSelection");async function i7t(t){let e=await t.skillResolver.resolve(cu);if(e){let r=await t.ctx.get(Cr).getOrReadTextDocument(e),i=Cs(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),r.status==="valid")return{type:"client.file",id:r.document.uri,data:{content:r.document.getText(),language:r.document.detectedLanguageId}}}}s(i7t,"currentEditorToFileReference");async function o7t(t){let e=[],n=t.turn.request.references;if(n&&n.length>0){let r=t.ctx.get(Cr);for(let i of n)if(i.type==="file"){let o=await r.getOrReadTextDocument(i),a=Cs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(o7t,"fileReferenceToPlatformFileReference");f();f();f();f();var bGe=qe(a$()),Mfe=qe(require("path"));var EGe=500,h7t=Math.floor(.25*EGe),l$=class{static{s(this,"FixedSizeChunking")}async chunk(e,n){let r=[],i=Mfe.default.extname(__filename)===".ts"?Mfe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return r=await bGe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),B=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:B,end:B+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:n.tokenizer,directory:i,chunkSize:EGe,overlap:h7t}}),r}};var g7t="fixedSize",A7t=new Map([["fixedSize",l$]]);function IGe(t){let e=t==="default"?g7t:t,n=A7t.get(e);if(!n)throw new Error(`Chunking constructor for type ${t} not found`);return n}s(IGe,"getChunkingAlgorithm");f();f();var c$=qe(Tx()),RA=qe(require("fs")),TGe=require("os"),wp=qe(require("path")),nk=require("process");var Qfe=5e4,y7t=new Tt("workspaceChunks"),u$=class t{constructor(e,n){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let r=Ti(n.uri),i=(0,c$.SHA256)(n.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=wp.join(C7t(),"project-context",`${r}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let n=(0,c$.SHA256)(e).toString().substring(0,this.pathHashLength),r=wp.basename(e);return wp.join(this.cacheRootPath,`${r}.${n}.json`)}async getChunksCacheFromCacheFile(e){let n=await RA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(n)try{return JSON.parse(n)}catch{}}async getChunksCache(e){let n=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(n)}async setChunksCache(e,n){let r=this.getChunksCacheFile(e);try{await RA.promises.mkdir(wp.dirname(r),{recursive:!0}),await RA.promises.writeFile(r,JSON.stringify(n),{encoding:"utf8"})}catch(i){y7t.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let n=this.getChunksCacheFile(e);await RA.promises.rm(n).catch(()=>{})}async enumerateChunksCacheFileNames(){return await RA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let n of await this.enumerateChunksCacheFileNames()){let r=wp.join(this.cacheRootPath,n);if(!this.chunksCountCache.has(r)){let i=await this.getChunksCacheFromCacheFile(r);this.chunksCountCache.set(r,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(r)||0}return e}async*getChunksForFile({uri:e}){let n=await this.getChunksCache(e);n!==void 0&&(yield*n.documentChunks)}async*getChunksFromCacheFile(e){let n=await this.getChunksCacheFromCacheFile(e);yield*n?n.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let n=await this.enumerateChunksCacheFileNames();for(let r of n)yield*this.getChunksFromCacheFile(wp.join(this.cacheRootPath,r))}}async getFileHash(e){let n=Go(e),r="";return n&&(r=await RA.promises.readFile(n,{encoding:"utf8"}).catch(()=>"")),(0,c$.SHA256)(r).toString()}async addChunks({uri:e},n){let r=Array.isArray(n)?()=>Promise.resolve(n):n,i=Go(e);if(!i)return;async function o(p){try{return(await RA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await r();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let n=pl(e),r=await this.getChunksCache(n);return r===void 0?[]:(await this.removeChunksCache(n),r.documentChunks)}async deleteChunks({uri:e}){let n=Go(e);if(!n)return[];let r;try{r=await RA.promises.readdir(n)}catch{return await this.deleteChunksForSource(n)}let i=[];for(let o of r){let a=pl(wp.join(n,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await RA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function C7t(){return nk.env.XDG_CACHE_HOME&&wp.isAbsolute(nk.env.XDG_CACHE_HOME)?nk.env.XDG_CACHE_HOME+"/github-copilot":(0,TGe.platform)()==="win32"?nk.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":nk.env.HOME+"/.cache/github-copilot"}s(C7t,"getXdgCachePath");var Ofe=1e4;var d$=class{constructor(e,n,r){this.workspaceFolder=n;this.implementation=r;this._chunkLimiter=new qfe;this.status="notStarted",this.workspaceChunks=new u$(e,n),this.cancellationToken=new Ufe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,n){return n?await this.chunkFiles(e,n):await this.chunkWorkspace(e)}async chunkWorkspace(e){let n=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(n,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let r=await e.get(ou).getWatchedFiles(this.workspaceFolder);this._totalFileCount=r.length,r.length>Ofe&&(this._fileCountExceeded=!0,r=r.slice(0,Ofe));let i=r.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){wa(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(n,performance.now()),await this.workspaceChunks.getChunksCount()>Qfe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,n){await this.updateModelConfig(e);let r=n.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(r)}catch(i){wa(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>Qfe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>Ofe&&(this._fileCountExceeded=!0),j4e(...n.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,n){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(n,()=>this.implementation.chunk(n,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,n){this._chunkingTimeMs=n-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},Ufe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},qfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((n,r)=>{this.tasks.push({factory:e,resolve:n,reject:r}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:n,reject:r}=this.tasks.shift();this.runningTasks++;let i=e();i.then(n,r),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ga=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,n){let r=IGe(n),i=new r;return new d$(this.ctx,e,i)}getImplementation(e,n="default"){let r=this.getParentFolder(e);if(r)return this.workspaceChunkingProviders.get(r.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,n),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let n=[];for(let r of this.workspaceChunkingProviders.values())n.push(r.workspaceFolder);return n.find(r=>{let i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==r.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let n=this.getImplementation(e);return{fileCountExceeded:n.fileCountExceeded,chunkCountExceeded:n.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,n){let r=this.getImplementation(n);r.terminateChunking();let o=or.createAndMarkAsIssued().extendedBy(void 0,{fileCount:r.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(n.uri)}async clearChunks(e,n){this.terminateChunking(e,n),await this.getImplementation(n).clearChunks()}async deleteSubfolderChunks(e,n){return await this.getImplementation(e).deleteSubfolderChunks(n.uri)}async deleteFileChunks(e,n){let r=this.getImplementation(e),i=[];Array.isArray(n)||(n=[n]);for(let o of n)i.push(...await r.deleteFileChunks(o));return i}async chunk(e,n,r,i){let o;return r&&(Array.isArray(r)?o=r:i=r),i||(i="default"),o?await this.chunkFiles(e,n,o,i):await this.chunkFolder(e,n,i)}async chunkFolder(e,n,r="default"){let i=this.getImplementation(n,r),o=await i.chunk(e),l=or.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",l),o}async chunkFiles(e,n,r,i="default"){return await this.getImplementation(n,i).chunk(e,r)}};f();f();f();f();f();function p$(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(p$,"toChatModeEnum");var Lb=class{constructor(e,n){this.request=e;this.telemetryId=an();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=n??this.telemetryId}static{s(this,"Turn")}},f$=class t{constructor(e=[],n="panel",r="en",i){this.turns=e;this.source=n;this.userLanguage=r;this._telemetryId=an();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),n=new t(e,this.source,this.userLanguage,this.id);return n._telemetryId=this.telemetryId,n._timestamp=this.timestamp,n}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(n=>n.id===e)}};f();f();f();var wGe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},_Ge="Alright, This response contains a code citation.";f();var SGe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var RGe=qe(require("fs")),Vu=qe(require("path"));var Wfe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],Gfe="test_",m6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},h6=class{constructor(e,n,r=void 0){this.ctx=e;this.fileExists=n;this.baseUri=r}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let n=Ti(e),r=Vu.extname(n).replace(".",""),i=m6[r]??{location:"sameFolder",prefix:Gfe,suffix:Wfe},o=[];if(i.prefix&&o.push(i.prefix+n),i.suffix)for(let u of i.suffix??[]){let d=n.replace(`.${r}`,u+"."+r);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Go(f0(e)),l===void 0)return}else{let u=Go(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=Vu.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=pl(l);if(await this.fileExists(c))return ko(c,o[0])}parseTestFilePath(e){try{return pl(e)}catch(n){ar.error(this.ctx,`Failed to parse test file path: ${e}`,n);return}}async findImplFileForTestFile(e){let n=Ti(e),r=Vu.extname(n).replace(".",""),i=m6[r]??{location:"sameFolder",prefix:Gfe,suffix:Wfe},o=[];if(i.prefix&&o.push(n.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=n.substring(0,n.length-c.length-1-r.length)+"."+r;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=f0(e):l=this.determineImplFolder(e);for(let c of o){let u=ko(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let n=Go(e);if(n===void 0)return;let r=Vu.extname(Ti(e)).replace(".",""),i,o=m6[r]?.location??"sameFolder";o==="sameFolder"?i=Vu.dirname(n):i=this.determineTestFolder(n,o);let a=this.findFiles(i,`.${r}`,m6[r]);if(a.length>0)return pl(a[0])}findFiles(e,n,r){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${Vu.sep}${a}`;r?.prefix&&a.startsWith(r.prefix)&&o.push(l),r?.suffix&&r?.suffix.some(c=>a.endsWith(c+n))&&o.push(l)}return o}_readdir(e){return RGe.readdirSync(e,{withFileTypes:!0}).filter(n=>n.isFile()).map(n=>n.name)}determineTestFolder(e,n){let r=(this.baseUri&&Go(this.baseUri))??"",i=Vu.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,r,i,n);return[r,...o].filter(a=>a).join(Vu.sep)}getRelativeTestFolder(e,n,r,i){let o=Vu.dirname(e).replace(n,"");switch(r){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let n=Vu.extname(Ti(e)).replace(".",""),r=f0(e);switch(n){case"php":case"dart":case"py":return r.replace("tests","src");case"ps1":return r.replace("Tests","src");case"rb":return r.replace("/test","");case"cs":return r.replace("src/tests","src");case"java":case"scala":case"kt":return r.replace("src/test","src/main");default:return r.replace("test/","src/")}}};function g6(t){let e=Ti(t),n=Vu.extname(e),r=m6[n.replace(".","")];return r?!(r.suffix&&!r.suffix.some(o=>e.endsWith(o+n))||r.prefix&&!e.startsWith(r.prefix)):!!(Wfe.some(o=>e.endsWith(o+n))||e.startsWith(Gfe))}s(g6,"isTestFile");f();var kGe=["indexed","indexing","not_indexed"],Fb=class{constructor(){this._cache=new Ln(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,n,r){let i=e.ctx;if(!r)return!1;let o=`repos/${n}/copilot_internal/embeddings_index`,a=await Bf(i,r,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,n,r,i=!1){let o=F1(n);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,r);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function BGe(t,e,n,r){let i=Bo(e.tokenizer),o=n.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Gn).getToken(),c=kM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!r.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await x7t(t,c,u,e.modelId,p,r);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(BGe,"fetchEmbeddings");async function x7t(t,e,n,r,i,o){let a=an(),l=i.map(u=>u.text),c=await aI(t,e,n,void 0,a,{input:l,model:r,dimensions:1024},o,Yx(t));if(c.status!==200||o.isCancellationRequested){wa(t,new qy(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(x7t,"sendEmbeddingsRequest");f();f();var m$=class{static{s(this,"CosineSimilarityScoring")}score(e,n){let r=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(n.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*n[c],0)/(r*i)}terminateScoring(){}};var v7t="cosine",b7t=new Map([["cosine",m$]]);function DGe(t){let e=t==="default"?v7t:t,n=b7t.get(e);if(!n)throw new Error(`Scoring constructor for type ${t} not found`);return n}s(DGe,"getScoringAlgorithm");f();var Y0=class{constructor(){this.workspaceScoringProviders=new Ln(25)}static{s(this,"ScoringProvider")}createImplementation(e,n){let r=DGe(n);return new r}getImplementation(e,n,r="default"){let i=this.workspaceScoringProviders.get(n.uri);return i||(i=this.createImplementation(e,r),this.workspaceScoringProviders.set(n.uri,i)),i}score(e,n,r,i,o){return this.getImplementation(e,n,o).score(r,i)}terminateScoring(e,n,r){this.getImplementation(e,n,r).terminateScoring(),this.workspaceScoringProviders.delete(n.uri)}};var PGe={modelFamily:PM.textEmbedding3Small,scoringType:"default",dimensions:null};async function NGe(t,e,n,r,i,o,a,l=PGe){let c={...PGe,...l},u=I7t(t,e,n,r);Fn.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(ra).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await BGe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=T7t(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return Fn.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(B=>u.find(N=>N.id===B.id).id)}s(NGe,"rerankSnippets");function I7t(t,e,n,r){let i=r.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:n.toLowerCase()}),i}s(I7t,"formatEmbeddingsInput");function T7t(t,e,n,r,i){let o=t.get(Y0);return n.map(l=>({id:l.id,score:o.score(t,e,r.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(T7t,"scoreEmbeddings");f();f();f();var jfe=qe(a$());var w7t=.75,_7t=1.2,S7t=47,h$=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++}async query(e){let n=await g$();try{return await this.doQuery(e)}finally{await n.stopWorkerPool()}}async doQuery(e){let n=e.map(l=>l.toLowerCase()),r=await this.calculateIDFValues(n),i=Math.min(10*e.length,S7t),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(n,this.avgTokenCount,r,o)}async calculateIDFValues(e){let n=this.ctx.get(ga).getChunks(this.workspaceFolder),r=$1(n,o=>({...o,chunk:o.chunk.toLowerCase()})),i=$1(r,o=>o.chunk);return await R7t(e,i)}async calculateBM25Scores(e,n,r,i){let o=this.ctx.get(ga).getChunks(this.workspaceFolder),a=new Hfe(i);for await(let l of o){let c=await k7t({...l,chunk:l.chunk.toLowerCase()},e,n,r);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((n,r)=>n+r.tokenCount,0)}terminateRanking(){}};async function R7t(t,e){let n=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),r=new Int32Array(n),i=[],o=0;for await(let c of e){o++;let u=jfe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(r,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(n),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(R7t,"calculateIDFValues");async function k7t(t,e,n,r){return{score:await jfe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:n,idfValues:r,k1:_7t,b:w7t}}),...t}}s(k7t,"calculateBM25Score");var Hfe=class{constructor(e,n=-1/0){this.maxSize=e;this.minScore=n;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let n=this.store.at(0).score*(1-e);return this.store.filter(r=>r.score>=n)}return this.store}add(e){if(e.score<=this.minScore)return;let n=this.store.findIndex(r=>r.score<e.score);for(this.store.splice(n>=0?n:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var D7t="bm25",P7t=new Map([["bm25",h$]]);function LGe(t){let e=t==="default"?D7t:t,n=P7t.get(e);if(!n)throw new Error(`Ranking constructor for type ${t} not found`);return n}s(LGe,"getRankingAlgorithm");var wc=class{constructor(){this.workspaceRankingProviders=new Ln(25)}static{s(this,"RankingProvider")}createImplementation(e,n,r){let i=LGe(r);return new i(e,n)}getImplementation(e,n,r="default"){let i=this.workspaceRankingProviders.get(n.uri);return i||(i=this.createImplementation(e,n,r),this.workspaceRankingProviders.set(n.uri,i)),i}status(e,n,r){return this.getImplementation(e,n,r).status}async initialize(e,n,r,i="default"){await this.getImplementation(e,n,i).initialize(r)}async addChunks(e,n,r,i="default"){await this.getImplementation(e,n,i).addChunks(r)}async query(e,n,r,i){return this.getImplementation(e,n,i).query(r)}async terminateRanking(e,n,r){await this.getImplementation(e,n,r).terminateRanking(),this.workspaceRankingProviders.delete(n.uri)}deleteEmbeddings(e,n,r,i){return this.getImplementation(e,n,i).deleteEmbeddings(r)}};f();async function FGe(t,e){let n=t.ctx,r=await xo.getModelConfiguration(n,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:r},o=await n.get(_c).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:r,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new na(n),c=await hl(n,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Fn.debug(n,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";wa(n,new qy(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(FGe,"parseUserQuery");var MGe=qe(z0());var qy=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},A$=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,n){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");n===void 0&&(n=!0);let r=e.ctx,i=r.get(ga),o=i.status(e.turn.workspaceFolder),a=r.get(wc),l=a.status(r,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(n){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(r,c).then(u=>{if(i.status(c)==="completed")return a.initialize(r,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(r,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,n){let r=e.turn.workspaceFolder;if(!r)return[];let i=e.ctx,a=await i.get(ga).chunkCount(r);if(a===0)return[];n.chunkCount=a;let l,c=performance.now();try{l=await FGe(e,e.cancelationToken)}catch(g){let y=new qy(g);wa(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(n.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(wc),p=[],m=performance.now();try{let g=await d.query(i,r,l);n.localSnippetCount=g.length,p=g}catch(g){let y=new qy(g);wa(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return n.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,n,r){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=$n(e.turn.request.message),l=[];try{l=await NGe(o,i,a,n,5,e.cancelationToken,r)}catch(d){let p=new qy(d);wa(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(Cr);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=n.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=Mo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let n=this.collectInfoMessage(e);n&&await e.info(n);let r={...K4e},i=await this.collectLocalSnippets(e,r);if(i.length===0)return{snippets:[],measurements:r};let o=e.ctx;return Fn.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,r),measurements:r}}collectInfoMessage(e){let n=e.turn.workspaceFolder;if(!n)return;let o=e.ctx.get(ga).checkLimits(n);if(o.fileCountExceeded||o.chunkCountExceeded)return MGe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var OGe=qe(QGe()),x$=qe(a$()),UGe=qe(require("os")),qGe=qe(z0());var F7t=Math.min(Math.max(Math.ceil(UGe.cpus().length/2),1),10),A6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new OGe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await x$.start({maxWorkers:F7t})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await x$.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let n of e)await n.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},g$=A6.startWorkerPool.bind(A6);var VBr=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),zfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(rk);return}let n=[],r=this.turnContext.ctx.get(Cr),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await r.getOrReadTextDocument(o);if(u.status==="valid"){let d=new _A(u.document,c,c),p=new Dt([l]),h=g6(a)?.5:.8;n.push([`Code excerpt from file \`${Go(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(ik,a,Cs(u),c)}}if(n.length>0)return n.unshift([new Dt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Dt(n)}removeDuplicateSnippets(e){let n={};return e.forEach(r=>{let i=`${r.uri}#[${r.range.start.line},${r.range.start.character}]-[${r.range.end.line},${r.range.end.character}]`;n[i]||(n[i]=r)}),Object.values(n)}},rk="collect-project-context",y$=class extends YR{constructor(n,r=[new A$]){super();this.ctx=n;this.snippetProviders=r;this.ready=!1;this.ctx.get(xA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(n){if(!await this.isEnabled()||(this.workerPoolToken=await g$(),!n.uri))return;let r=this.ctx.get(ga),i=this.ctx.get(ou),o=this.ctx.get(wc),a=await r.chunk(this.ctx,n);r.status(n)!=="completed"&&i.terminateWatching(n),await o.initialize(this.ctx,n,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(n){if(!await this.isEnabled())return;let r=this.ctx.get(ga);if(!n)return;let i=r.getParentFolder(n);if(i){let l=await r.deleteSubfolderChunks(i,n);await this.ctx.get(wc).deleteEmbeddings(this.ctx,i,l);return}r.terminateChunking(this.ctx,n),await this.ctx.get(wc).terminateRanking(this.ctx,n),this.ctx.get(Y0).terminateScoring(this.ctx,n),r.workspaceCount===0&&await A6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(n,r){let i=this.ctx.get(ga),o=this.ctx.get(wc),a=this.ctx.get(Y0);for(let l of r)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,n)}async onFileChange(n){if(!await this.isEnabled())return;let r=await g$();try{let i=n.documents.map(c=>c.uri),o=n.workspaceFolder;if(!o)return;let a=this.ctx.get(ga),l=this.ctx.get(wc);if(n.type==="delete"||n.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(n.type==="create"||n.type==="update"){let c=await a.chunk(this.ctx,o,n.documents);await l.addChunks(this.ctx,o,c)}}finally{await r.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(n){await n.steps.start(rk,"Collecting relevant project context"),await n.info(qGe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let r=this.snippetProviders.map(async l=>l.snippetProviderStatus(n)),i=await Promise.all(r),o="not_indexed",a;for(let l of kGe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(n);if(await J4e(n,a.providerType,c),l.length===0){await n.steps.error(rk,"No project context found");return}return await n.steps.finish(rk),l}case"indexing":{await n.steps.error(rk,"Indexing repository, please try again later");return}case"not_indexed":{await n.steps.error(rk,"No project context available");return}}}},ik="project-context",C$=class extends Xl{static{s(this,"ProjectContextSkill")}constructor(e){super(ik,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,n=>new zfe(n),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var WGe=I.Object({labels:I.Array(I.String())}),Yfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let n=[];return n.push([new Dt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(r=>{n.push([new Dt([`- ${r}`]),.9]),this.turnContext.collectLabel(fh,r)}),new Dt(n)}},fh="project-labels",v$=class{constructor(e){this._resolver=e;this.id=fh;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Yfe(e)}};f();var b$=qe(z0());var HGe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},jGe=b$.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,VGe=b$.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,M7t=b$.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,Kfe=`

`,GGe=jGe+Kfe+VGe;function $Ge(t){let e=1;if(t.length===0)return{reply:GGe,vulnerabilities:e};if(t==="0")return{reply:GGe,vulnerabilities:0};if(t==="help")return{reply:M7t,vulnerabilities:e};let n=t.slice(-1);isNaN(Number(n))||(e=Number(n),t=t.slice(0,-1));let r="";for(let i of t)i==="p"?r+=jGe+Kfe:i==="c"&&(r+=VGe+Kfe);return{reply:r.trimEnd(),vulnerabilities:e}}s($Ge,"parseVulnerabilitiesInstructions");var zGe=qe(z0());var Q7t="Oops, your response got filtered. Vote down if you think this shouldn't have happened",O7t="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Jfe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,n){throw new Error(n.length>0?n:"Debug Fail")}},U7t=new Jfe,Xfe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Zl(O7t,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},q7t=new Xfe,Zfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,n){let r="warning";n.includes("info")&&(r="info");let i=n.replace("info","").replace("warning","").trim(),o=[{severity:r,message:i.length>0?i:"Debug Notification"}];return new Zl("Alright, I'm producing a notification",void 0,[],o)}},W7t=new Zfe,epe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Zl(Q7t,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},G7t=new epe,tpe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Zl(await KGe(e))}},H7t=new tpe,npe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[fh,cu]}instructions(e,n){return"Create a function that prints a christmas tree"}},j7t=new npe,rpe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Zl($n(e.turn.request.message))}},V7t=new rpe,ipe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,n){let r=e.ctx.get(ec).getLastTurnPrompts();if(r!==void 0&&r.size>0){let i="Here are the prompts used in the last turn:";return r.forEach((o,a)=>{i+=zGe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Zl(i)}return new Zl("No prompt available")}},$7t=new ipe,ope=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,n,r){let i,o;if(n.length>0){let a=n.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Zl(await JGe(e,r,i))}},z7t=new ope,spe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,n){let{reply:r,vulnerabilities:i}=$Ge(n);for(let o=0;o<i;o++)e.turn.annotations.push(HGe);return new Zl(r,void 0,e.turn.annotations)}},Y7t=new spe,ape=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(wGe),new Zl(_Ge,void 0,e.turn.annotations)}},K7t=new ape,lpe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Zl(SGe)}},J7t=new lpe,cpe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,n){return"Write out the OWASP top 10 with code examples in java"}},X7t=new cpe,upe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[ik]}},Z7t=new upe,dpe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Zl("Alright, I'm producing a notification",void 0,[],[],[],e)}},eLt=new dpe;function YGe(){return[U7t,q7t,W7t,G7t,j7t,H7t,V7t,$7t,z7t,Y7t,K7t,eLt,J7t,X7t,Z7t]}s(YGe,"getDebugTemplates");f();f();function Qb(t,e){if(t.length==0)return new Dt([]);let n=t.map((r,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(r)&&r.length==2&&(o*=r[1],r=r[0]),[r,o]});return new Dt(n)}s(Qb,"weighElidableList");var XGe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:_a}))}),fpe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Ob,e.uri,Cs(r)),r.status==="valid"){let i=n.getRelativePath(r.document);this.turnContext.collectLabel(Ob,`problems in ${i}`);let o=this.getElidableProblems(e,r,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Ob,"problem markers")}getElidableProblems(e,n,r){let i=[];return i.push(new Dt([`Problems and errors in the active document (\`${r}\`):`])),i.push(...this.createElidableProblems(e,n)),Qb(i,"linear")}createElidableProblems(e,n){return e.problems.map(r=>{let i=[];i.push(new Dt([`- "${r.message}" at line ${r.range.start.line}.`+(n.document?" Excerpt from the code:":"")]));let o=r.range,a;if(o&&(this.isEmpty(o)?a=n.document.lineAt(o.start).text:a=n.document.getText(o),a)){let l=n.document.detectedLanguageId;i.push(new Dt([["```"+l,1],[A0(a),.8],["```",1]]))}return new Dt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Dt([r])}},Ob="problems-in-active-document",E$=class extends Xl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Ob,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,n=>new fpe(n),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var I$=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let n=this.turnContext.ctx.get(Tn).getWorkspaceFolder(e),r=this.fileExistFn(),i=new h6(this.turnContext.ctx,r,n?.uri),o=await i.findTestFileForSourceFile(e.uri),a=g6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await r(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!g6(e))return;let r=this.turnContext.ctx.get(Tn).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new h6(this.turnContext.ctx,i,r?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${tLt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async asTestFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${nLt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async asExampleFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Dt([[`${rLt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Dt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let n=this.turnContext.ctx.get(Cr),r=await n.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(ph,e,Cs(r)),r.status==="valid"){let i=n.getRelativePath(r.document);return[A0(r.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(po).stat(e),!0}catch{return!1}}}},tLt="Code excerpt from the implementation source file",nLt="Code excerpt from the test file",rLt="Code excerpt from an example test file";var ZGe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),mpe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=new I$(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(ph,e.testFileUri,Cs(i)),i.status==="valid")return await r.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(ph,e.sourceFileUri,Cs(i)),i.status==="valid")return await r.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(ph,e.sourceFileUri,Cs(i)),i.status==="valid")return await r.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(ph,e.testFileUri,Cs(i)),i.status==="valid")return await r.fromTestFile(i.document)}}},ph="test-context",T$=class extends Xl{static{s(this,"TestContextSkill")}constructor(e){super(ph,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,n=>new mpe(n))}};f();var eHe=qe(z0());var tHe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:_a}))}),hpe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(MT,"test failures");let n=await this.createElidableFailures(e.failures);if(n){let r=new Dt(["The latest test run produced the following failures and errors:"]);return new Dt([[r,1],[n,1]])}}}async createElidableFailures(e){let n=this.turnContext.ctx.get(Cr),r=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await n.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(MT,o,Cs(l)),l.status==="valid"){let c=n.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);r.push([d,1])}}if(r.length>0)return new Dt(r)}groupFailuresByFile(e){let n=new Map;for(let r of e){let i=n.get(r.testFileUri)||[];i.push(r),n.set(r.testFileUri,i)}return n}createElidableFailuresOfDoc(e,n){let r=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${n}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Dt([eHe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new Dt(r)}appendCode(e,n,r){let i=[new Dt([`
The code of file \`${n}\` is:
`]),.6],o=[new Dt([["```"+r.detectedLanguageId,1],[A0(r.getText()),.9],["```",1]]),.7];return new Dt([[e,1],i,o])}},MT="test-failures",w$=class extends Xl{static{s(this,"TestFailuresSkill")}constructor(e){super(MT,"Test failures and errors of the latest test run","Collecting test failures",()=>e,n=>new hpe(n))}};var _p=qe(z0());var Zl=class{constructor(e,n,r=[],i=[],o=[],a){this.message=e;this.error=n;this.annotations=r;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},QT=class{constructor(e,n,r,i,o=[],a=[],l,c=!1){this.id=e;this.description=n;this.shortDescription=r;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,n,r="panel"){let i;return r==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+n}requiredSkills(){return this.skills}},iLt=new QT("tests","Generate unit tests","Generate Tests",_p.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[ph,MT],["chat-panel","editor"]),oLt=new QT("simplify","Simplify the code","Simplify This",_p.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],_p.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),sLt=new QT("fix","Fix problems and compile errors","Fix This",_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Ob],["editor","chat-panel","inline"],_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),aLt=new QT("explain","Explain how the code works","Explain This",_p.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],_p.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),lLt=new QT("doc","Document the current selection of code","Generate Docs",_p.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],_p.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),gpe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let n=Cpe(e.conversation),r=_p.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return n?new Zl(r+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${n}
\`\`\``):new Zl(r)}},cLt=new gpe,Ape=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let n=ype(e.ctx).filter(i=>i!=this),r=_p.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${n.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Zl(r)}},uLt=new Ape;function y6(){return[iLt,oLt,sLt,aLt,lLt,cLt,uLt,...YGe()]}s(y6,"getPromptTemplates");function ype(t){let e=y6();return!MB(t)&&!nm(t)&&(e=e.filter(n=>!n.id.startsWith("debug."))),e}s(ype,"getUserFacingPromptTemplates");var xpe=class{constructor(e,n){this.conversation=e;this.capabilities=n}static{s(this,"ConversationHolder")}},ki=class{constructor(e){this.ctx=e;this.conversations=new Ln(100)}static{s(this,"Conversations")}create({capabilities:e,source:n,userLanguage:r,conversationId:i}={}){let o=new f$([],n??"panel",r,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(vl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new xpe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,n,r,i,o,a,l,c){let u=this.get(e);return n.request.references=r&&r.length>0?r:[],i&&(n.request.activeEditor=i),o&&(n.workspaceFolder=o),a&&a.length>0&&(n.workspaceFolders=a),l&&l.length>0&&(n.ignoredSkills=l.map(d=>({skillId:d}))),c&&(n.agent={agentSlug:c.agentSlug},n.confirmationResponse=c),await this.determineAndApplyAgent(u,n),await this.determineAndApplyTemplate(u,n),u.addTurn(n),n}async determineAndApplyAgent(e,n){if(e.source==="panel"&&$n(n.request.message).trim().startsWith("@")){let[r,i]=this.extractKeywordAndQuestionFromRequest($n(n.request.message),"@");(await BA(this.ctx)).find(l=>l.slug===r)&&(n.request.message=i,n.request.type="user",n.agent={agentSlug:r})}}async determineAndApplyTemplate(e,n){if($n(n.request.message).trim().startsWith("/")){let[r,i]=this.extractKeywordAndQuestionFromRequest($n(n.request.message),"/"),o=y6().find(a=>a.id===r);if(o){n.request.message=i,n.request.type="user",await this.determineAndApplyAgent(e,n);let a=o.instructions?o.instructions(this.ctx,n.request.message,e.source):i;n.template={templateId:r,userQuestion:n.request.message},n.request.message=a,n.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,n){let[r,...i]=e.trim().split(" "),o=i.join(" ");return[r.replace(n,""),o]}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let n=this.ctx.get(vl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),r=this.getCapabilities(e).skills;return[...n,...r]}filterSupportedSkills(e,n){let r=this.getSupportedSkills(e);return n.filter(i=>r.includes(i))}getHolder(e){let n=this.conversations.get(e);if(!n)throw new Error(`Conversation with id ${e} does not exist`);return n}getAll(){let e=this.conversations.values();return Array.from(e).map(n=>n.conversation)}findByTurnId(e){for(let n of this.getAll()){let r=n.findTurn(e);if(r)return{conversation:n,turn:r}}}};f();function AHe(t){return typeof t>"u"||t===null}s(AHe,"isNothing");function dLt(t){return typeof t=="object"&&t!==null}s(dLt,"isObject");function fLt(t){return Array.isArray(t)?t:AHe(t)?[]:[t]}s(fLt,"toArray");function pLt(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}s(pLt,"extend");function mLt(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}s(mLt,"repeat");function hLt(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(hLt,"isNegativeZero");var gLt=AHe,ALt=dLt,yLt=fLt,CLt=mLt,xLt=hLt,vLt=pLt,bl={isNothing:gLt,isObject:ALt,toArray:yLt,repeat:CLt,isNegativeZero:xLt,extend:vLt};function yHe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}s(yHe,"formatError");function x6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yHe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(x6,"YAMLException$1");x6.prototype=Object.create(Error.prototype);x6.prototype.constructor=x6;x6.prototype.toString=s(function(e){return this.name+": "+yHe(this,e)},"toString");var qd=x6;function vpe(t,e,n,r,i){var o="",a="",l=Math.floor(i/2)-1;return r-e>l&&(o=" ... ",e=r-l+o.length),n-r>l&&(a=" ...",n=r+l-a.length),{str:o+t.slice(e,n).replace(/\t/g,"\u2192")+a,pos:r-e+o.length}}s(vpe,"getLine");function bpe(t,e){return bl.repeat(" ",e-t.length)+t}s(bpe,"padStart");function bLt(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=vpe(t.buffer,r[a-c],i[a-c],t.position-(r[a]-r[a-c]),p),l=bl.repeat(" ",e.indent)+bpe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=vpe(t.buffer,r[a],i[a],t.position,p),l+=bl.repeat(" ",e.indent)+bpe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=vpe(t.buffer,r[a+c],i[a+c],t.position-(r[a]-r[a+c]),p),l+=bl.repeat(" ",e.indent)+bpe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(bLt,"makeSnippet");var ELt=bLt,ILt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],TLt=["scalar","sequence","mapping"];function wLt(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}s(wLt,"compileStyleAliases");function _Lt(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(ILt.indexOf(n)===-1)throw new qd('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=wLt(e.styleAliases||null),TLt.indexOf(this.kind)===-1)throw new qd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(_Lt,"Type$1");var uu=_Lt;function nHe(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}s(nHe,"compileList");function SLt(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}s(SLt,"compileMap");function Ipe(t){return this.extend(t)}s(Ipe,"Schema$1");Ipe.prototype.extend=s(function(e){var n=[],r=[];if(e instanceof uu)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new qd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof uu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new qd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new qd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof uu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Ipe.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=nHe(i,"implicit"),i.compiledExplicit=nHe(i,"explicit"),i.compiledTypeMap=SLt(i.compiledImplicit,i.compiledExplicit),i},"extend");var RLt=Ipe,kLt=new uu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),BLt=new uu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),DLt=new uu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),PLt=new RLt({explicit:[kLt,BLt,DLt]});function NLt(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(NLt,"resolveYamlNull");function LLt(){return null}s(LLt,"constructYamlNull");function FLt(t){return t===null}s(FLt,"isNull");var MLt=new uu("tag:yaml.org,2002:null",{kind:"scalar",resolve:NLt,construct:LLt,predicate:FLt,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function QLt(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(QLt,"resolveYamlBoolean");function OLt(t){return t==="true"||t==="True"||t==="TRUE"}s(OLt,"constructYamlBoolean");function ULt(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(ULt,"isBoolean");var qLt=new uu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:QLt,construct:OLt,predicate:ULt,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function WLt(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(WLt,"isHexCode");function GLt(t){return 48<=t&&t<=55}s(GLt,"isOctCode");function HLt(t){return 48<=t&&t<=57}s(HLt,"isDecCode");function jLt(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!WLt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!GLt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!HLt(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}s(jLt,"resolveYamlInteger");function VLt(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}s(VLt,"constructYamlInteger");function $Lt(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bl.isNegativeZero(t)}s($Lt,"isInteger");var zLt=new uu("tag:yaml.org,2002:int",{kind:"scalar",resolve:jLt,construct:VLt,predicate:$Lt,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YLt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function KLt(t){return!(t===null||!YLt.test(t)||t[t.length-1]==="_")}s(KLt,"resolveYamlFloat");function JLt(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}s(JLt,"constructYamlFloat");var XLt=/^[-+]?[0-9]+e/;function ZLt(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bl.isNegativeZero(t))return"-0.0";return n=t.toString(10),XLt.test(n)?n.replace("e",".e"):n}s(ZLt,"representYamlFloat");function eFt(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bl.isNegativeZero(t))}s(eFt,"isFloat");var tFt=new uu("tag:yaml.org,2002:float",{kind:"scalar",resolve:KLt,construct:JLt,predicate:eFt,represent:ZLt,defaultStyle:"lowercase"}),nFt=PLt.extend({implicit:[MLt,qLt,zLt,tFt]}),rFt=nFt,CHe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xHe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function iFt(t){return t===null?!1:CHe.exec(t)!==null||xHe.exec(t)!==null}s(iFt,"resolveYamlTimestamp");function oFt(t){var e,n,r,i,o,a,l,c=0,u=null,d,p,m;if(e=CHe.exec(t),e===null&&(e=xHe.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(n,r,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(oFt,"constructYamlTimestamp");function sFt(t){return t.toISOString()}s(sFt,"representYamlTimestamp");var aFt=new uu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:iFt,construct:oFt,instanceOf:Date,represent:sFt});function lFt(t){return t==="<<"||t===null}s(lFt,"resolveYamlMerge");var cFt=new uu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:lFt}),Rpe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function uFt(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=Rpe;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}s(uFt,"resolveYamlBinary");function dFt(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=Rpe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):n===18?(l.push(a>>10&255),l.push(a>>2&255)):n===12&&l.push(a>>4&255),new Uint8Array(l)}s(dFt,"constructYamlBinary");function fFt(t){var e="",n=0,r,i,o=t.length,a=Rpe;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}s(fFt,"representYamlBinary");function pFt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(pFt,"isBinary");var mFt=new uu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:uFt,construct:dFt,predicate:pFt,represent:fFt}),hFt=Object.prototype.hasOwnProperty,gFt=Object.prototype.toString;function AFt(t){if(t===null)return!0;var e=[],n,r,i,o,a,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],a=!1,gFt.call(i)!=="[object Object]")return!1;for(o in i)if(hFt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(AFt,"resolveYamlOmap");function yFt(t){return t!==null?t:[]}s(yFt,"constructYamlOmap");var CFt=new uu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:AFt,construct:yFt}),xFt=Object.prototype.toString;function vFt(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],xFt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}s(vFt,"resolveYamlPairs");function bFt(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}s(bFt,"constructYamlPairs");var EFt=new uu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:vFt,construct:bFt}),IFt=Object.prototype.hasOwnProperty;function TFt(t){if(t===null)return!0;var e,n=t;for(e in n)if(IFt.call(n,e)&&n[e]!==null)return!1;return!0}s(TFt,"resolveYamlSet");function wFt(t){return t!==null?t:{}}s(wFt,"constructYamlSet");var _Ft=new uu("tag:yaml.org,2002:set",{kind:"mapping",resolve:TFt,construct:wFt}),vHe=rFt.extend({implicit:[aFt,cFt],explicit:[mFt,CFt,EFt,_Ft]}),qb=Object.prototype.hasOwnProperty,_$=1,bHe=2,EHe=3,S$=4,Epe=1,SFt=2,rHe=3,RFt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kFt=/[\x85\u2028\u2029]/,BFt=/[,\[\]\{\}]/,IHe=/^(?:!|!!|![a-z\-]+!)$/i,THe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function iHe(t){return Object.prototype.toString.call(t)}s(iHe,"_class");function DA(t){return t===10||t===13}s(DA,"is_EOL");function UT(t){return t===9||t===32}s(UT,"is_WHITE_SPACE");function Wd(t){return t===9||t===32||t===10||t===13}s(Wd,"is_WS_OR_EOL");function sk(t){return t===44||t===91||t===93||t===123||t===125}s(sk,"is_FLOW_INDICATOR");function DFt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(DFt,"fromHexCode");function PFt(t){return t===120?2:t===117?4:t===85?8:0}s(PFt,"escapedHexLen");function NFt(t){return 48<=t&&t<=57?t-48:-1}s(NFt,"fromDecimalCode");function oHe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(oHe,"simpleEscapeSequence");function LFt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(LFt,"charFromCodepoint");var wHe=new Array(256),_He=new Array(256);for(OT=0;OT<256;OT++)wHe[OT]=oHe(OT)?1:0,_He[OT]=oHe(OT);var OT;function FFt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||vHe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(FFt,"State$1");function SHe(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=ELt(n),new qd(e,n)}s(SHe,"generateError");function zn(t,e){throw SHe(t,e)}s(zn,"throwError");function R$(t,e){t.onWarning&&t.onWarning.call(null,SHe(t,e))}s(R$,"throwWarning");var sHe={YAML:s(function(e,n,r){var i,o,a;e.version!==null&&zn(e,"duplication of %YAML directive"),r.length!==1&&zn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&zn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&zn(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&R$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,n,r){var i,o;r.length!==2&&zn(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],IHe.test(i)||zn(e,"ill-formed tag handle (first argument) of the TAG directive"),qb.call(e.tagMap,i)&&zn(e,'there is a previously declared suffix for "'+i+'" tag handle'),THe.test(o)||zn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{zn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Ub(t,e,n,r){var i,o,a,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||zn(t,"expected valid JSON character");else RFt.test(l)&&zn(t,"the stream contains non-printable characters");t.result+=l}}s(Ub,"captureSegment");function aHe(t,e,n,r){var i,o,a,l;for(bl.isObject(n)||zn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,l=i.length;a<l;a+=1)o=i[a],qb.call(e,o)||(e[o]=n[o],r[o]=!0)}s(aHe,"mergeMappings");function ak(t,e,n,r,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&zn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&iHe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&iHe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)aHe(t,e,o[u],n);else aHe(t,e,o,n);else!t.json&&!qb.call(n,i)&&qb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,zn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}s(ak,"storeMappingPair");function kpe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):zn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(kpe,"readLineBreak");function al(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;UT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(DA(i))for(kpe(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&R$(t,"deficient indentation"),r}s(al,"skipSeparationSpace");function D$(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Wd(n)))}s(D$,"testDocumentSeparator");function Bpe(t,e){e===1?t.result+=" ":e>1&&(t.result+=bl.repeat(`
`,e-1))}s(Bpe,"writeFoldedLines");function MFt(t,e,n){var r,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Wd(h)||sk(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Wd(i)||n&&sk(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Wd(i)||n&&sk(i))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Wd(r))break}else{if(t.position===t.lineStart&&D$(t)||n&&sk(h))break;if(DA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,al(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Ub(t,o,a,!1),Bpe(t,t.line-c),o=a=t.position,l=!1),UT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Ub(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(MFt,"readPlainScalar");function QFt(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Ub(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else DA(n)?(Ub(t,r,i,!0),Bpe(t,al(t,!1,e)),r=i=t.position):t.position===t.lineStart&&D$(t)?zn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);zn(t,"unexpected end of the stream within a single quoted scalar")}s(QFt,"readSingleQuotedScalar");function OFt(t,e){var n,r,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Ub(t,n,t.position,!0),t.position++,!0;if(l===92){if(Ub(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),DA(l))al(t,!1,e);else if(l<256&&wHe[l])t.result+=_He[l],t.position++;else if((a=PFt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=DFt(l))>=0?o=(o<<4)+a:zn(t,"expected hexadecimal character");t.result+=LFt(o),t.position++}else zn(t,"unknown escape sequence");n=r=t.position}else DA(l)?(Ub(t,n,r,!0),Bpe(t,al(t,!1,e)),n=r=t.position):t.position===t.lineStart&&D$(t)?zn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}zn(t,"unexpected end of the stream within a double quoted scalar")}s(OFt,"readDoubleQuotedScalar");function UFt(t,e){var n=!0,r,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(al(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;n?E===44&&zn(t,"expected the node content, but found ','"):zn(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Wd(u)&&(p=m=!0,t.position++,al(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,lk(t,e,_$,!1,!0),v=t.tag,y=t.result,al(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),al(t,!0,e),lk(t,e,_$,!1,!0),b=t.result),h?ak(t,l,g,v,y,b,r,i,o):p?l.push(ak(t,null,g,v,y,b,r,i,o)):l.push(y),al(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(n=!0,E=t.input.charCodeAt(++t.position)):n=!1}zn(t,"unexpected end of the stream within a flow collection")}s(UFt,"readFlowCollection");function qFt(t,e){var n,r,i=Epe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Epe===i?i=p===43?rHe:SFt:zn(t,"repeat of a chomping mode identifier");else if((d=NFt(p))>=0)d===0?zn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?zn(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(UT(p)){do p=t.input.charCodeAt(++t.position);while(UT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!DA(p)&&p!==0)}for(;p!==0;){for(kpe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),DA(p)){c++;continue}if(t.lineIndent<l){i===rHe?t.result+=bl.repeat(`
`,o?1+c:c):i===Epe&&o&&(t.result+=`
`);break}for(r?UT(p)?(u=!0,t.result+=bl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=bl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=bl.repeat(`
`,c):t.result+=bl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,n=t.position;!DA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Ub(t,n,t.position,!1)}return!0}s(qFt,"readBlockScalar");function lHe(t,e){var n,r=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zn(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Wd(a))));){if(l=!0,t.position++,al(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,lk(t,e,EHe,!1,!0),o.push(t.result),al(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)zn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(lHe,"readBlockSequence");function WFt(t,e,n){var r,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zn(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Wd(r))E===63?(v&&(ak(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):zn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,l=t.lineStart,c=t.position,!lk(t,n,bHe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);UT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Wd(E)||zn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(ak(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)zn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)zn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),lk(t,e,S$,!0,i)&&(v?g=t.result:y=t.result),v||(ak(t,p,m,h,g,y,a,l,c),h=g=y=null),al(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)zn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&ak(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(WFt,"readBlockMapping");function GFt(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&zn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):zn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Wd(a);)a===33&&(r?zn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),IHe.test(i)||zn(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),BFt.test(o)&&zn(t,"tag suffix cannot contain flow indicator characters")}o&&!THe.test(o)&&zn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{zn(t,"tag name is malformed: "+o)}return n?t.tag=o:qb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:zn(t,'undeclared tag handle "'+i+'"'),!0}s(GFt,"readTagProperty");function HFt(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&zn(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Wd(n)&&!sk(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&zn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(HFt,"readAnchorProperty");function jFt(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Wd(r)&&!sk(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&zn(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),qb.call(t.anchorMap,n)||zn(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],al(t,!0,-1),!0}s(jFt,"readAlias");function lk(t,e,n,r,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=S$===n||EHe===n,r&&al(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;GFt(t)||HFt(t);)al(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||S$===n)&&(_$===n||bHe===n?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(lHe(t,v)||WFt(t,v,y))||UFt(t,y)?d=!0:(a&&qFt(t,y)||QFt(t,y)||OFt(t,y)?d=!0:jFt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&zn(t,"alias node should not have any properties")):MFt(t,y,_$===n)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&lHe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&zn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(qb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||zn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&zn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):zn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(lk,"composeNode");function VFt(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(al(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&zn(t,"directive name must not be less than one character in length");a!==0;){for(;UT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!DA(a));break}if(DA(a))break;for(n=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&kpe(t),qb.call(sHe,r)?sHe[r](t,r,i):R$(t,'unknown document directive "'+r+'"')}if(al(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,al(t,!0,-1)):o&&zn(t,"directives end mark is expected"),lk(t,t.lineIndent-1,S$,!1,!0),al(t,!0,-1),t.checkLineBreaks&&kFt.test(t.input.slice(e,t.position))&&R$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&D$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,al(t,!0,-1));return}if(t.position<t.length-1)zn(t,"end of the stream or a document separator is expected");else return}s(VFt,"readDocument");function RHe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new FFt(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,zn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)VFt(n);return n.documents}s(RHe,"loadDocuments");function $Ft(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=RHe(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}s($Ft,"loadAll$1");function zFt(t,e){var n=RHe(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new qd("expected a single document in the stream, but found more")}}s(zFt,"load$1");var YFt=$Ft,KFt=zFt,kHe={loadAll:YFt,load:KFt},BHe=Object.prototype.toString,DHe=Object.prototype.hasOwnProperty,Dpe=65279,JFt=9,v6=10,XFt=13,ZFt=32,eMt=33,tMt=34,Tpe=35,nMt=37,rMt=38,iMt=39,oMt=42,PHe=44,sMt=45,k$=58,aMt=61,lMt=62,cMt=63,uMt=64,NHe=91,LHe=93,dMt=96,FHe=123,fMt=124,MHe=125,du={};du[0]="\\0";du[7]="\\a";du[8]="\\b";du[9]="\\t";du[10]="\\n";du[11]="\\v";du[12]="\\f";du[13]="\\r";du[27]="\\e";du[34]='\\"';du[92]="\\\\";du[133]="\\N";du[160]="\\_";du[8232]="\\L";du[8233]="\\P";var pMt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],mMt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function hMt(t,e){var n,r,i,o,a,l,c;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&DHe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[a]=l;return n}s(hMt,"compileStyleMap");function gMt(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new qd("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+bl.repeat("0",r-e.length)+e}s(gMt,"encodeHex");var AMt=1,b6=2;function yMt(t){this.schema=t.schema||vHe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=hMt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?b6:AMt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(yMt,"State");function cHe(t,e){for(var n=bl.repeat(" ",e),r=0,i=-1,o="",a,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=l):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}s(cHe,"indentString");function wpe(t,e){return`
`+bl.repeat(" ",t.indent*e)}s(wpe,"generateNextLine");function CMt(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}s(CMt,"testImplicitResolving");function B$(t){return t===ZFt||t===JFt}s(B$,"isWhitespace");function E6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Dpe||65536<=t&&t<=1114111}s(E6,"isPrintable");function uHe(t){return E6(t)&&t!==Dpe&&t!==XFt&&t!==v6}s(uHe,"isNsCharOrWhitespace");function dHe(t,e,n){var r=uHe(t),i=r&&!B$(t);return(n?r:r&&t!==PHe&&t!==NHe&&t!==LHe&&t!==FHe&&t!==MHe)&&t!==Tpe&&!(e===k$&&!i)||uHe(e)&&!B$(e)&&t===Tpe||e===k$&&i}s(dHe,"isPlainSafe");function xMt(t){return E6(t)&&t!==Dpe&&!B$(t)&&t!==sMt&&t!==cMt&&t!==k$&&t!==PHe&&t!==NHe&&t!==LHe&&t!==FHe&&t!==MHe&&t!==Tpe&&t!==rMt&&t!==oMt&&t!==eMt&&t!==fMt&&t!==aMt&&t!==lMt&&t!==iMt&&t!==tMt&&t!==nMt&&t!==uMt&&t!==dMt}s(xMt,"isPlainSafeFirst");function vMt(t){return!B$(t)&&t!==k$}s(vMt,"isPlainSafeLast");function C6(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}s(C6,"codePointAt");function QHe(t){var e=/^\n* /;return e.test(t)}s(QHe,"needIndentIndicator");var OHe=1,_pe=2,UHe=3,qHe=4,ok=5;function bMt(t,e,n,r,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=r!==-1,g=-1,y=xMt(C6(t,0))&&vMt(C6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=C6(t,c),!E6(u))return ok;y=y&&dHe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=C6(t,c),u===v6)p=!0,h&&(m=m||c-g-1>r&&t[g+1]!==" ",g=c);else if(!E6(u))return ok;y=y&&dHe(u,d,l),d=u}m=m||h&&c-g-1>r&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?OHe:o===b6?ok:_pe:n>9&&QHe(t)?ok:a?o===b6?ok:_pe:m?qHe:UHe}s(bMt,"chooseScalarStyle");function EMt(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===b6?'""':"''";if(!t.noCompatMode&&(pMt.indexOf(e)!==-1||mMt.test(e)))return t.quotingType===b6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=r||t.flowLevel>-1&&n>=t.flowLevel;function c(u){return CMt(t,u)}switch(s(c,"testAmbiguity"),bMt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!r,i)){case OHe:return e;case _pe:return"'"+e.replace(/'/g,"''")+"'";case UHe:return"|"+fHe(e,t.indent)+pHe(cHe(e,o));case qHe:return">"+fHe(e,t.indent)+pHe(cHe(IMt(e,a),o));case ok:return'"'+TMt(e)+'"';default:throw new qd("impossible error: invalid scalar style")}}()}s(EMt,"writeScalar");function fHe(t,e){var n=QHe(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}s(fHe,"blockHeader");function pHe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(pHe,"dropEndingNewline");function IMt(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,n.lastIndex=u,mHe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",r+=l+(!i&&!o&&c!==""?`
`:"")+mHe(c,e),i=o}return r}s(IMt,"foldString");function mHe(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,l=0,c="";r=n.exec(t);)l=r.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(mHe,"foldLine");function TMt(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=C6(t,i),r=du[n],!r&&E6(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||gMt(n);return e}s(TMt,"escapeString");function wMt(t,e,n){var r="",i=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Gy(t,e,l,!1,!1)||typeof l>"u"&&Gy(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}s(wMt,"writeFlowSequence");function hHe(t,e,n,r){var i="",o=t.tag,a,l,c;for(a=0,l=n.length;a<l;a+=1)c=n[a],t.replacer&&(c=t.replacer.call(n,String(a),c)),(Gy(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Gy(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=wpe(t,e)),t.dump&&v6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(hHe,"writeBlockSequence");function _Mt(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",r!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Gy(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Gy(t,e,u,!1,!1)&&(d+=t.dump,r+=d));t.tag=i,t.dump="{"+r+"}"}s(_Mt,"writeFlowMapping");function SMt(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new qd("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!r||i!=="")&&(m+=wpe(t,e)),u=a[l],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),Gy(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&v6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=wpe(t,e)),Gy(t,e+1,d,!0,p)&&(t.dump&&v6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(SMt,"writeBlockMapping");function gHe(t,e,n){var r,i,o,a,l,c;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,BHe.call(l.represent)==="[object Function]")r=l.represent(e,c);else if(DHe.call(l.represent,c))r=l.represent[c](e,c);else throw new qd("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}s(gHe,"detectType");function Gy(t,e,n,r,i,o,a){t.tag=null,t.dump=n,gHe(t,n,!1)||gHe(t,n,!0);var l=BHe.call(t.dump),c=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(n),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(SMt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(_Mt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?hHe(t,e-1,t.dump,i):hHe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(wMt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&EMt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new qd("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Gy,"writeNode");function RMt(t,e){var n=[],r=[],i,o;for(Spe(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}s(RMt,"getDuplicateReferences");function Spe(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Spe(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)Spe(t[r[i]],e,n)}s(Spe,"inspectNode");function kMt(t,e){e=e||{};var n=new yMt(e);n.noRefs||RMt(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Gy(n,0,r,!0,!0)?n.dump+`
`:""}s(kMt,"dump$1");var BMt=kMt,DMt={dump:BMt};function Ppe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(Ppe,"renamed");var ODr=kHe.load,UDr=kHe.loadAll,Npe=DMt.dump;var qDr=Ppe("safeLoad","load"),WDr=Ppe("safeLoadAll","loadAll"),GDr=Ppe("safeDump","dump");var qT=qe(z0());var Lpe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},ec=class{constructor(){this.dump=new Ln(25);this.promptsDump=new Ln(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,n,r){let i=this.getDump(e);i.resolvedSkills[n]=r}getResolvedSkill(e,n){return this.getDump(e).resolvedSkills[n]}addResolution(e,n){this.getDump(e).resolutions.push(n)}getDump(e){let n=this.dump.get(e);return n||(n=new Lpe,this.dump.set(e,n)),n}addPrompt(e,n,r){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(r,n)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function WHe(t){let e=t.copy();return e.turns=e.turns.filter(n=>n.status!=="in-progress"&&(n.response===void 0||n.response?.type==="model")),e}s(WHe,"filterConversationTurns");function Cpe(t){return WHe(t).getLastTurn()?.id}s(Cpe,"getLastTurnId");async function KGe(t){let e=WHe(t.conversation),n=Cpe(t.conversation);if(!n)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(ec).getDump(n),o=LMt(i,e.turns);ar.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await FMt(i,t.ctx);return qT.default`
        ${NMt(t.conversation,n)}
        ${PMt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(KGe,"getConversationDump");function PMt(t){let e=t.get(Jn);return qT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(PMt,"getEditorInfoDumpMessage");function NMt(t,e){return qT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(NMt,"getInfoDumpMessage");async function JGe(t,e,n){let r=t.ctx.get(vl),i="# Available skills",o=r.getDescriptors().filter(a=>t.ctx.get(ki).getSupportedSkills(t.conversation.id).includes(a.id));if(n&&(o=o.filter(a=>a.id===n)),o.length===0)return`No skill with id ${n} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&$n(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${$n(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=qT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=r.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=qT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${Npe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=qT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(JGe,"getSkillsDump");function LMt(t,e){let n={state:{skills:t.resolvedSkills},turns:e.map((r,i)=>{let o={request:$n(r.request.message)};return r.response&&(o.response=$n(r.response.message)),o})};return Npe(n)}s(LMt,"toSimulationFormat");async function FMt(t,e){let n=t.resolutions.map(o=>o.files).flat(),r=n.filter((o,a)=>o&&n.indexOf(o)===a),i;for(let o of r)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(Cr).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();ar.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(FMt,"fileDump");f();function Fpe(t,e){let n=Bo(e.tokenizer),r=0;for(let i of t)r+=e.baseTokensPerMessage,i.role&&(r+=n.tokenize(i.role).length),i.name&&(r+=n.tokenize(i.name).length+e.baseTokensPerName),i.content&&(r+=n.tokenize($n(i.content)).length);return r+=e.baseTokensPerCompletion,r}s(Fpe,"countMessagesTokens");f();function GHe(t,e,n,r,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=r?`The user is using ${r} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=n?`The user is logged in as ${n} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(GHe,"chatBasePrompt");f();f();f();f();f();function HHe(t){let e=t.split(`
`),n=[],r=!1,i=[];for(let o of e)o.startsWith("```")?(r?(n.push([A0(i.join(`
`)),1]),i=[],n.push([new Dt([o]),1])):n.push([new Dt([o]),1]),r=!r):r?i.push(o):n.push([new Dt([o]),.8]);return r&&(n.push([A0(i.join(`
`)),1]),n.push([new Dt(["```"]),1])),new Dt(n)}s(HHe,"fromMessage");function ck(t){let e=Mpe(t),n=[];for(let r=0;r<e.length;r++){let i=e[r],o=jHe(i.request,r+1),a=i.response&&i.response?.type!=="meta"?jHe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&r!==e.length-1?`
`:"")),n.push(HHe(l))}return n.length>0?new Dt([[new Dt(["Consider the following conversation history:"]),1],[Qb(n,"inverseLinear"),1]]):null}s(ck,"fromHistory");var MMt=5;function Mpe(t,e){return t.filter(r=>(r.status==="success"||r.status==="in-progress")&&$n(r.request.message)!=""&&r.agent?.agentSlug===e).reverse().slice(0,MMt).reverse()}s(Mpe,"filterTurns");function jHe(t,e=0){let n;switch(t.type){case"user":case"template":n="User";break;case"model":n="GitHub Copilot";break;default:n=t.type}let r=$n(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${n}:${r}${$n(t.message)}`}s(jHe,"formatTurnMessage");f();f();f();var QMt=4,Qpe={skillIds:[]},P$=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,n,r,i,o){let a=e.conversation.getLastTurn().request.message;if(n.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:n,modelConfiguration:l},u=await this.ctx.get(_c).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,r,d);return m.type!=="success"&&(Fn.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,r,d)),await e.ctx.get(sl).inspectFetchResult(m),this.handleResult(m,d,$n(a),o,u.toolConfig)}else return Qpe}handleResult(e,n,r,i,o){if(e.type!=="success")return this.telemetryError(n,e),Qpe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,QMt);else return Fn.error(this.ctx,"Missing tool call in meta prompt response"),Qpe;let c=n.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:r});return Bt(this.ctx,`${yc(i)}.metaPrompt`,c,0),Bt(this.ctx,`${yc(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,n){let r=e.extendedBy({resultType:n.type,reason:n.reason??""});Bt(this.ctx,"conversation.promptContextError",r,1)}};f();f();f();var N$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let n=[];return de(e,n,"org.springframework.boot","Spring Boot"),de(e,n,"jakarta.jakartaee-api","Jakarta EE"),de(e,n,"javax:javaee-api","Java EE"),de(e,n,"org.apache.struts:struts2-core","Apache Struts"),de(e,n,"org.hibernate:hibernate-core","Hibernate"),de(e,n,"org.apache.wicket:wicket-core","Apache Wicket"),de(e,n,"javax.faces:jsf-api","JSF"),de(e,n,"org.grails:grails-core","Grails"),n}determineCoreLibraries(e){let n=[];return de(e,n,"com.google.guava","Google Guava"),de(e,n,"org.apache.commons:commons-lang3","Apache Commons Lang"),de(e,n,"org.apache.commons:commons-io","Apache Commons IO"),de(e,n,"joda-time:joda-time","Joda-Time"),de(e,n,"com.google.code.gson:gson","Google Gson"),de(e,n,"org.apache.commons:commons-math3","Apache Commons Math"),de(e,n,"org.apache.commons:commons-collections4","Apache Commons Collections"),de(e,n,"org.apache.commons:commons-net","Apache Commons Net"),de(e,n,"org.apache.poi:poi","Apache POI"),de(e,n,"com.fasterxml.jackson.core:jackson-databind","Jackson"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"org.junit.jupiter:junit-jupiter","JUnit"),de(e,n,"junit:junit","JUnit"),de(e,n,"org.testng:testng","TestNG"),de(e,n,"org.spockframework:spock-core","Spock"),de(e,n,"io.cucumber:cucumber-java","Cucumber"),de(e,n,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),n}determineTestingLibraries(e){let n=[];return de(e,n,"org.mockito","Mockito"),de(e,n,"org.assertj","AssertJ"),de(e,n,"org.hamcrest","Hamcrest"),de(e,n,"org.powermock","PowerMock"),de(e,n,"org.jmock","JMock"),de(e,n,"org.easymock","EasyMock"),de(e,n,"org.jmockit:jmockit","JMockit"),de(e,n,"com.github.tomakehurst:wiremock","WireMock"),de(e,n,"org.dbunit:dbunit","DBUnit"),de(e,n,"com.icegreen:greenmail","GreenMail"),de(e,n,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),de(e,n,"org.seleniumhq.selenium:selenium-java","Selenium"),de(e,n,"io.rest-assured:rest-assured","Rest-Assured"),de(e,n,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),de(e,n,"org.apache.jmeter:ApacheJMeter","JMeter"),n}},L$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"@types/node","Node.js"),de(e,n,"react-native","React Native"),n.find(r=>r.name==="React Native")||de(e,n,"react","React"),de(e,n,"angular","Angular"),de(e,n,"vue","Vue.js"),de(e,n,"ember","Ember.js"),de(e,n,"backbone","Backbone.js"),de(e,n,"meteor","Meteor"),de(e,n,"polymer","Polymer"),de(e,n,"aurelia","Aurelia"),de(e,n,"knockout","Knockout.js"),de(e,n,"dojo","Dojo Toolkit"),de(e,n,"mithril","Mithril.js"),de(e,n,"marionette","Marionette.js"),de(e,n,"marko","Marko.js"),de(e,n,"svelte","Svelte"),de(e,n,"hyperapp","Hyperapp"),de(e,n,"inferno","Inferno.js"),de(e,n,"preact","Preact"),de(e,n,"riot","Riot.js"),de(e,n,"moon","Moon.js"),de(e,n,"stencil","Stencil.js"),n}determineCoreLibraries(e){let n=[];return de(e,n,"lodash","Lodash"),de(e,n,"moment","Moment.js"),de(e,n,"axios","Axios"),de(e,n,"redux","Redux"),de(e,n,"recoil","Recoil"),de(e,n,"jquery","jQuery"),de(e,n,"d3","D3.js"),de(e,n,"underscore","Underscore.js"),de(e,n,"ramda","Ramda"),de(e,n,"immutable","Immutable.js"),de(e,n,"rxjs","RxJS"),de(e,n,"three","Three.js"),de(e,n,"socket.io","Socket.IO"),de(e,n,"express","Express.js"),de(e,n,"next","Next.js"),de(e,n,"puppeteer","Puppeteer"),de(e,n,"cheerio","Cheerio"),de(e,n,"nodemailer","Nodemailer"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"jest","Jest"),de(e,n,"mocha","Mocha"),de(e,n,"jasmine","Jasmine"),de(e,n,"ava","AVA"),de(e,n,"qunit","QUnit"),de(e,n,"tape","Tape"),n}determineTestingLibraries(e){let n=[];return de(e,n,"chai","Chai"),de(e,n,"sinon","Sinon"),de(e,n,"enzyme","Enzyme"),de(e,n,"protractor","Protractor"),de(e,n,"supertest","Supertest"),de(e,n,"nock","Nock"),de(e,n,"cypress","Cypress"),de(e,n,"@testing-library/react","React Testing Library"),n}},F$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"github.com/gorilla/mux","Gorilla Mux"),de(e,n,"github.com/go-chi/chi","Chi"),de(e,n,"github.com/gin-gonic/gin","Gin"),de(e,n,"github.com/labstack/echo","Echo"),de(e,n,"github.com/revel/revel","Revel"),de(e,n,"github.com/astaxie/beego","Beego"),de(e,n,"github.com/go-martini/martini","Martini"),de(e,n,"github.com/gobuffalo/buffalo","Buffalo"),de(e,n,"github.com/goji/goji","Goji"),de(e,n,"github.com/hoisie/web","Web.go"),n}determineCoreLibraries(e){let n=[];return de(e,n,"net/http","net/http"),de(e,n,"fmt","fmt"),de(e,n,"io","io"),de(e,n,"time","time"),de(e,n,"math","math"),de(e,n,"strconv","strconv"),de(e,n,"strings","strings"),de(e,n,"sort","sort"),de(e,n,"encoding/json","encoding/json"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"github.com/onsi/ginkgo","ginkgo"),de(e,n,"github.com/onsi/gomega","gomega"),de(e,n,"github.com/stretchr/testify","testify"),de(e,n,"gopkg.in/check.v1","gocheck"),de(e,n,"github.com/franela/goblin","goblin"),de(e,n,"github.com/DATA-DOG/godog","godog"),de(e,n,"github.com/stesla/gospec","gospec"),de(e,n,"github.com/rjeczalik/gotest","gotest"),de(e,n,"github.com/smartystreets/goconvey","goconvey"),n}determineTestingLibraries(e){let n=[];return de(e,n,"github.com/stretchr/testify","Testify"),de(e,n,"github.com/smartystreets/goconvey","GoConvey"),de(e,n,"github.com/onsi/ginkgo","Ginkgo"),de(e,n,"github.com/golang/mock","GoMock"),de(e,n,"gopkg.in/check.v1","GoCheck"),de(e,n,"github.com/franela/goblin","Goblin"),de(e,n,"github.com/DATA-DOG/godog","GoDog"),de(e,n,"github.com/onsi/gomega","Gomega"),de(e,n,"github.com/stesla/gospec","GoSpec"),de(e,n,"github.com/rjeczalik/gotest","GoTest"),n}},M$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"flask","Flask"),de(e,n,"django","Django"),de(e,n,"pyramid","Pyramid"),de(e,n,"tornado","Tornado"),de(e,n,"fastapi","FastAPI"),n}determineCoreLibraries(e){let n=[];return de(e,n,"requests","requests"),de(e,n,"numpy","numpy"),de(e,n,"pandas","pandas"),de(e,n,"scipy","scipy"),de(e,n,"matplotlib","matplotlib"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"pytest","Pytest"),de(e,n,"unittest","Unittest"),de(e,n,"doctest","Doctest"),de(e,n,"nose","Nose"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mock","Mock"),de(e,n,"hypothesis","Hypothesis"),de(e,n,"behave","Behave"),de(e,n,"lettuce","Lettuce"),de(e,n,"testify","Testify"),de(e,n,"pyhamcrest","PyHamcrest"),n}},Q$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"laravel/framework","Laravel"),de(e,n,"symfony/symfony","Symfony"),de(e,n,"slim/slim","Slim"),de(e,n,"cakephp/cakephp","CakePHP"),de(e,n,"yiisoft/yii2","Yii"),de(e,n,"zendframework/zendframework","Zend Framework"),de(e,n,"phalcon/cphalcon","Phalcon"),de(e,n,"bcosca/fatfree","Fat-Free"),de(e,n,"fuel/fuel","FuelPHP"),de(e,n,"phpixie/framework","PHPixie"),n}determineCoreLibraries(e){let n=[];return de(e,n,"monolog/monolog","Monolog"),de(e,n,"vlucas/phpdotenv","PHP dotenv"),de(e,n,"symfony/console","Symfony Console"),de(e,n,"guzzlehttp/guzzle","GuzzleHttp"),de(e,n,"ramsey/uuid","Ramsey UUID"),de(e,n,"doctrine/orm","Doctrine ORM"),de(e,n,"php-di/php-di","PHP-DI"),de(e,n,"phpunit/php-timer","PHPUnit Timer"),de(e,n,"symfony/finder","Symfony Finder"),de(e,n,"symfony/yaml","Symfony Yaml"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"phpunit/phpunit","PHPUnit"),de(e,n,"behat/behat","Behat"),de(e,n,"phpspec/phpspec","PHPSpec"),de(e,n,"codeception/codeception","Codeception"),de(e,n,"atoum/atoum","Atoum"),de(e,n,"pestphp/pest","PestPHP"),de(e,n,"kahlan/kahlan","Kahlan"),de(e,n,"peridot-php/peridot","Peridot"),de(e,n,"phake/phake","Phake"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockery/mockery","Mockery"),de(e,n,"php-mock/php-mock","PHP-Mock"),de(e,n,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),de(e,n,"padraic/mockery","Padraic Mockery"),de(e,n,"phpspec/prophecy","PHPSpec Prophecy"),de(e,n,"phpunit/php-invoker","PHPUnit Invoker"),de(e,n,"phpunit/php-token-stream","PHPUnit Token Stream"),de(e,n,"phpunit/php-code-coverage","PHPUnit Code Coverage"),de(e,n,"phpunit/php-timer","PHPUnit Timer"),de(e,n,"phpunit/php-text-template","PHPUnit Text Template"),n}},O$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"Microsoft.NETCore.App",".NET Core"),de(e,n,"Microsoft.AspNetCore.App","ASP.NET Core"),n}determineCoreLibraries(e){let n=[];return de(e,n,"EntityFramework","Entity Framework"),de(e,n,"Newtonsoft.Json","Newtonsoft.Json"),de(e,n,"AutoMapper","AutoMapper"),de(e,n,"Serilog","Serilog"),de(e,n,"Dapper","Dapper"),de(e,n,"Polly","Polly"),de(e,n,"FluentValidation","FluentValidation"),de(e,n,"MediatR","MediatR"),de(e,n,"Hangfire","Hangfire"),de(e,n,"RabbitMQ.Client","RabbitMQ.Client"),de(e,n,"MassTransit","MassTransit"),de(e,n,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),de(e,n,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),de(e,n,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),de(e,n,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"xunit","xUnit"),de(e,n,"NUnit","NUnit"),de(e,n,"SpecFlow","SpecFlow"),n}determineTestingLibraries(e){let n=[];return de(e,n,"Moq","Moq"),de(e,n,"FluentAssertions","FluentAssertions"),de(e,n,"Bogus","Bogus"),de(e,n,"RestSharp","RestSharp"),de(e,n,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),n}},U$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"flutter","Flutter"),de(e,n,"angular","AngularDart"),n}determineCoreLibraries(e){let n=[];return de(e,n,"dartx","dartx"),de(e,n,"provider","Provider"),de(e,n,"rxdart","RxDart"),de(e,n,"dio","Dio"),de(e,n,"json_serializable","json_serializable"),de(e,n,"freezed","Freezed"),de(e,n,"moor","Moor"),de(e,n,"hive","Hive"),de(e,n,"http","http"),de(e,n,"path","path"),de(e,n,"intl","intl"),de(e,n,"equatable","equatable"),de(e,n,"get_it","get_it"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"test","test"),de(e,n,"flutter_test","flutter_test"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockito","mockito"),de(e,n,"bloc_test","bloc_test"),n}},q$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"rails","Rails"),de(e,n,"sinatra","Sinatra"),de(e,n,"hanami","Hanami"),de(e,n,"grape","Grape"),de(e,n,"roda","Roda"),de(e,n,"padrino","Padrino"),de(e,n,"cuba","Cuba"),de(e,n,"ramaze","Ramaze"),de(e,n,"nyara","Nyara"),de(e,n,"rack","Rack"),n}determineCoreLibraries(e){let n=[];return de(e,n,"active_record","ActiveRecord"),de(e,n,"sequel","Sequel"),de(e,n,"rom","ROM"),de(e,n,"datamapper","DataMapper"),de(e,n,"mongoid","Mongoid"),de(e,n,"neo4j","Neo4j"),de(e,n,"redis","Redis"),de(e,n,"cassandra","Cassandra"),de(e,n,"couchrest","CouchRest"),de(e,n,"riak","Riak"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"rspec","RSpec"),de(e,n,"minitest","Minitest"),de(e,n,"cucumber","Cucumber"),de(e,n,"spinach","Spinach"),de(e,n,"turnip","Turnip"),de(e,n,"bacon","Bacon"),de(e,n,"shoulda","Shoulda"),de(e,n,"test-unit","Test::Unit"),de(e,n,"wrong","Wrong"),de(e,n,"contest","Contest"),n}determineTestingLibraries(e){let n=[];return de(e,n,"factory_bot","FactoryBot"),de(e,n,"faker","Faker"),de(e,n,"ffaker","FFaker"),de(e,n,"fabrication","Fabrication"),de(e,n,"machinist","Machinist"),de(e,n,"mocha","Mocha"),de(e,n,"flexmock","FlexMock"),de(e,n,"rr","RR"),de(e,n,"bourne","Bourne"),de(e,n,"not_a_mock","NotAMock"),n}},W$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"tokio","tokio"),de(e,n,"async-std","async-std"),de(e,n,"hyper","hyper"),de(e,n,"actix-web","actix-web"),de(e,n,"rocket","rocket"),n}determineCoreLibraries(e){let n=[];return de(e,n,"serde","serde"),de(e,n,"regex","regex"),de(e,n,"rand","rand"),de(e,n,"log","log"),de(e,n,"lazy_static","lazy_static"),de(e,n,"libc","libc"),de(e,n,"futures","futures"),de(e,n,"rayon","rayon"),de(e,n,"reqwest","reqwest"),de(e,n,"warp","warp"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"test-case","test-case"),de(e,n,"proptest","proptest"),de(e,n,"quickcheck","quickcheck"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockall","mockall"),de(e,n,"double","double"),de(e,n,"rstest","rstest"),de(e,n,"mockiato","mockiato"),de(e,n,"mock_derive","mock_derive"),de(e,n,"mocktopus","mocktopus"),de(e,n,"mockers","mockers"),de(e,n,"mock_it","mock_it"),n}},G$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(n=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(n.name))}determineApplicationFrameworks(e){return e.libraries.filter(n=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(n.name))}determineCoreLibraries(e){return e.libraries.filter(n=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(n.name))}determineTestingFrameworks(e){return e.libraries.filter(n=>["unity","criterion","cmocka","check","ctest","minunit"].includes(n.name))}determineTestingLibraries(e){return e.libraries.filter(n=>["cmock","fff","trompeloeil","fakeit"].includes(n.name))}};function de(t,e,n,r){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(n.toLowerCase())>-1);i&&e.push({name:r,version:i.version})}s(de,"addFromLibraries");var H$=class{constructor(e,n){this.languageId=e;this.delegates=n}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(n=>n.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(n=>n.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(n=>n.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(n=>n.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(n=>n.determineTestingLibraries(e)).flat()}};function $He(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s($He,"determineProgrammingLanguage");var VHe=[new N$,new L$,new F$,new M$,new Q$,new O$,new U$,new q$,new W$,new G$];function zHe(t){let e=VHe.find(n=>typeof n.languageId=="string"?n.languageId===t:Array.isArray(n.languageId)?n.languageId.includes(t):!1)??new H$(t,VHe);return new Ope(e)}s(zHe,"getMetadataLookup");var Ope=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let n=[];return e.forEach(r=>{n.find(i=>i.name===r.name)||n.push(r)}),n}};var YHe=I.Object({name:I.String(),version:I.Optional(I.String())}),KHe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(YHe),buildTools:I.Array(YHe)}),Upe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let n=[];n.push([new Dt([`The user is working on a project with the following characteristics:
`]),1]);let r=zHe(e.language.id);return this.addProgrammingLanguage(e,n),this.addBuildTools(e,n,r),this.addApplicationFramework(e,n,r),this.addCoreLibraries(e,n,r),this.addTestingFrameworks(e,n,r),this.addTestingLibraries(e,n,r),new Dt(n)}addProgrammingLanguage(e,n){let r=$He(e);this.turnContext.collectLabel(PA,r),n.push([new Dt([`- programming language: ${r}`]),1])}addBuildTools(e,n,r){this.addToPrompt(n,"- build tools:",r.determineBuildTools(e))}addApplicationFramework(e,n,r){this.addToPrompt(n,"- application frameworks:",r.determineApplicationFrameworks(e))}addCoreLibraries(e,n,r){this.addToPrompt(n,"- core libraries:",r.determineCoreLibraries(e))}addTestingFrameworks(e,n,r){this.addToPrompt(n,"- testing frameworks:",r.determineTestingFrameworks(e))}addTestingLibraries(e,n,r){this.addToPrompt(n,"- testing libraries:",r.determineTestingLibraries(e))}addToPrompt(e,n,r){if(r.length>0){r.forEach(o=>{this.turnContext.collectLabel(PA,`${o.name}${o.version?" "+o.version:""}`)});let i=r.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Dt([`${n}
${i}`]),1])}}},PA="project-metadata",j$=class{constructor(e){this._resolver=e;this.id=PA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Upe(e)}};f();var JHe=qe(require("path"));var qpe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Cr),r=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,n)).filter(a=>a!==void 0).flat();if(o.length>0)return r.push([new Dt(["The user wants you to consider the following referenced files when computing your answer."]),1]),r.push(...o),new Dt(r)}filterIncludedFiles(e){return e.filter(n=>n.type==="file"&&!this.turnContext.isFileIncluded(n.uri))}async toFileChunks(e,n){return await Promise.all(e.map(async r=>{if(r.type==="file"&&r.uri)return await this.elideReferencedFiles(n,r)}))}async elideReferencedFiles(e,n){let r=await e.getOrReadTextDocument(n),i=Cs(r);if(await this.turnContext.collectFile($$,n.uri,i),r.status==="valid"){let o=e.getRelativePath(r.document);if(i==="included"){let a=new _A(r.document,n.selection,n.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Dt([`The referenced file \`${o}\` is empty.`]),1]]}else if(r.status==="invalid")return[[new Dt([`The referenced file \`${JHe.basename(n.uri)}\` is content excluded.`]),1]]}},Wpe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},$$="references",V$=class{constructor(){this.id=$$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new Wpe}processor(e){return new qpe(e)}};var WT=s(()=>[PA,fh,$$,cu],"mandatorySkills"),z$=class{constructor(e,n){this.chatFetcher=n;this.metaPromptFetcher=new P$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,n,r,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!WT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),n,r,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!WT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!WT().includes(u)))}return l.push(...WT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(ki).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,n,r){let i=await this.getNonSelectableSkills(e),o=e.get(ki).getSupportedSkills(n.id),a=e.get(vl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,r)&&l.push(c)}return l}async getNonSelectableSkills(e){let n=await BA(e),r=(await Promise.all(n.map(i=>i.additionalSkills(e)))).flat();return[...WT(),...r]}isIgnoredSkill(e,n){return n.ignoredSkills?.some(r=>r.skillId===e)}};f();f();var Y$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(n=>n.roundId===e)}async start(e,n,r,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===n))Fn.error(this.ctx,`Tool call ${n} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:n,name:r,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,n){await this.update(e,n,r=>{r.status="completed"})}async result(e,n,r){await this.update(e,n,i=>{i.status="completed",i.result=r.data})}async cancel(e,n){await this.update(e,n,r=>{r.status="cancelled"})}async finishAll(e="completed"){let n=this.rounds.filter(r=>{let i=r.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return r.toolCalls=i,!0});n.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:n})}async error(e,n,r){await this.update(e,n,i=>{i.status="error",i.error=r||"Unknown error"})}async update(e,n,r){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===n);o?(r(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Fn.error(this.ctx,`Tool call ${n} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var K$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,n,r){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:n,description:r,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,n=>{n.status="completed"})}async cancel(e){await this.updateStep(e,n=>{n.status="cancelled"})}async finishAll(e="completed"){let n=this.steps.filter(r=>r.status==="running").map(r=>(r.status=e,r));n.length>0&&await this.progress.report(this.conversation,this.turn,{steps:n})}async error(e,n){return this.updateStep(e,r=>{r.status="failed",r.error={message:n||"Unknown error"}})}async updateStep(e,n){let r=this.steps.find(i=>i.id===e);r?(n(r),await this.progress.report(this.conversation,this.turn,{steps:[r]})):Fn.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var OMt="X-Initiator",UMt="X-Interaction-ID",qMt="X-Interaction-Type";var J$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},Gpe=class extends J${static{s(this,"User")}static id(){return"user"}},Hpe=class extends J${static{s(this,"Agent")}static id(){return"agent"}},jpe=class{static{s(this,"GenericLlmInteraction")}constructor(e,n,r){this.initiator=e.id(),this.interactionType=n,this.interactionId=r}toCapiHeaders(){return{[OMt]:this.initiator,[UMt]:this.interactionId,[qMt]:this.interactionType.toString()}}},Gd=class t extends jpe{static{s(this,"LlmInteraction")}static user(e,n){return new t(Gpe,e,n)}static agent(e,n){return new t(Hpe,e,n)}};var Wb=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.cancelationToken=i;this.skillResolver=new Vpe(this),this.steps=new K$(e,n,r,e.get(_s)),this.collector=new $pe(n,r,e.get(_s)),this.agentToolCalls=new Y$(e,n,r,e.get(_s))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Gd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Gd.agent("conversation-panel",this.turn.telemetryId):Gd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,n,r,i){let o={type:"file",collector:e,uri:n,status:r};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,n){this.collector.collect({type:"label",collector:e,label:n})}isFileIncluded(e){return this.collector.collectibles.some(n=>n.type==="file"&&n.status==="included"&&n.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,n){await this.ctx.get(_s).report(this.conversation,this.turn,{notifications:[{severity:n,message:e}]})}},X$=class extends Error{constructor(n,r){super(`Cycle detected while resolving skills: ${r.join(" -> ")} -> ${n}`);this.skillId=n;this.skillStack=r}static{s(this,"CycleError")}},I6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},Vpe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(ki).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let r=this.turnContext.ctx.get(ec).getResolvedSkill(this.turnContext.turn.id,e);if(r)return this.resolveStack.pop(),r;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new X$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let r=this.turnContext.ctx.get(vl).getSkill(e);try{let i=await r?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(ec).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof X$||i instanceof I6)throw i;Fn.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},$pe=class{constructor(e,n,r){this.conversation=e;this.turn=n;this.conversationProgress=r;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(n=>n.collector===e)}};async function XHe(t,e){let[n,r,i]=await WMt(t,e);return i.push(...jMt(t)),n.length>0||r.length>0?[new Dt([[new Dt(["Consider the additional context:"]),1],[Qb(n,"inverseLinear"),.9],...r]),i]:[null,i]}s(XHe,"fromSkills");async function WMt(t,e){let n=[],r=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await VMt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await GMt(t,a.skillId);l&&(WT().indexOf(a.skillId)===-1?r.push(l):i.push(l)),n.push(c)}return r.reverse(),i.reverse(),n.reverse(),[r,i,n]}s(WMt,"handleSkillsInReverse");async function GMt(t,e){let r=t.ctx.get(vl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=r?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await HMt(t,r,l,u,a,d):[void 0,await ez(t,r,"unprocessable",void 0,a,d)]}else return[void 0,await ez(t,r,"unresolvable",void 0,a)]}catch(i){if(Fn.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof I6)throw i;return[void 0,await ez(t,r,"failed")]}}s(GMt,"safelyProcessSkill");async function HMt(t,e,n,r,i,o){let a;return typeof r=="string"?a=new Dt([[r,1]]):a=r,[[a,n?.value()||0],await ez(t,e,"resolved",a,i,o)]}s(HMt,"handleProcessedSkill");async function ez(t,e,n,r,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:n,files:l,resolutionTimeMs:i,processingTimeMs:o};if(r){let u=await t.ctx.get(ra).getBestChatModelConfig(Pf("user")),d=r.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Bo(u.tokenizer).tokenLength(d)}return t.ctx.get(ec).addResolution(t.turn.id,c),c}s(ez,"determineResolution");function jMt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(jMt,"handleIgnoredSkills");async function VMt(t,e,n){if(e!==PA&&e!==fh)return!0;let r=t.ctx.get(Rt),i=await r.updateExPValuesAndAssignments({languageId:n});return r.ideChatEnableProjectMetadata(i)?e===PA:e===fh}s(VMt,"includeSkill");var ZHe=qe(z0());var GT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,n){let r=[],i=ck(e.conversation.turns.slice(0,-1));i!==null&&r.push([i,.6]);let[o,a]=await this.elidableSkills(e,n);return o!==null&&(i!==null&&r.push(["",.1]),r.push([o,.8])),[new Dt(r),a]}async elidableSkills(e,n){return await XHe(e,n)}async promptContent(e,n,r){let i;e.turn.workspaceFolder&&(i=await lA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=U0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,r);return[[{role:"system",content:n},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},tz=class extends GT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return ZHe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var eje=qe(z0());var nz=class extends GT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return eje.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var zpe=qe(z0());var rz=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let n=ck(e.turns.slice(0,-1)),r=[];return n!==null&&r.push([n,.6]),new Dt(r)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return zpe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(n=>`${this.skillToPrompt(n)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let n=TMe(e.map(r=>r.id));return I.Object({skillIds:I.Array(n,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(n){return{skillIds:ib(n).skillIds}}}}skillToPrompt(e){let n=e.description?e.description():e.id,r=`Skill Id: ${e.id}
Skill Description: ${n}`,i=e.examples?e.examples():[];return i.length>0&&(r+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),r}promptContent(e,n,r){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:n},{role:"user",content:o},{role:"system",content:this.suffix(r)},{role:"user",content:zpe.default`
                    This is the user's question: 
                    ${$n(i).trim()} 
                `.trim()}],[]]}};f();var tje=qe(z0());var iz=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let n=ib(e);return{suggestedTitle:n.suggestedTitle,followUp:n.followUp}}}}suffix(e){return tje.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let n=ck(e.turns.slice()),r=[];return n!==null&&r.push([n,.6]),new Dt(r)}promptContent(e,n,r){return[[{role:"system",content:n},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var $Mt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],oz=class extends GT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,n,r){if(r.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=U0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:n},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:$Mt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(n){let r=ib(n).keywords;if(!r||!Array.isArray(r))return{keywords:[]};let i=new Set;for(let o of r)if(!(!EU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!EU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var Ype=class{constructor(e,n,r){this.promptType=e;this.strategy=r;this.modelFamilies=Array.isArray(n)?n:[n]}static{s(this,"PromptStrategyDescriptor")}};function T6(t,e,n){return new Ype(t,e,n)}s(T6,"descriptor");var nje=[T6("user",Pf("user"),()=>new tz),T6("inline",Pf("inline"),()=>new nz),T6("meta",Pf("meta"),()=>new rz),T6("suggestions",Pf("suggestions"),()=>new iz),T6("synonyms",Pf("synonyms"),()=>new oz)],sz=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,n,r){let i=nje.find(o=>o.promptType===n&&o.modelFamilies.includes(r));if(!i)throw new Error(`No prompt strategy found for promptType: ${n} and modelFamily: ${r}`);return i.strategy(e)}get descriptors(){return nje}};var ije=require("console");var _c=class{constructor(e,n=new sz){this.ctx=e;this.promptStrategyFactory=n}static{s(this,"ConversationPromptEngine")}async toPrompt(e,n){let r=await this.promptStrategyFactory.createPromptStrategy(this.ctx,n.promptType,n.modelConfiguration.modelFamily),i=await this.ctx.get(Sr).getSession(),[o,a]=await r.promptContent(e,this.safetyPrompt(n.userSelectedModelName??n.modelConfiguration.uiName,i),n),[l,c]=this.elideChatMessages(o,n.modelConfiguration);return await this.ctx.get(sl).inspectPrompt({type:n.promptType,prompt:rje(l),tokens:c}),this.ctx.get(ec).addPrompt(e.turn.id,rje(l),n.promptType),{messages:l,tokens:c,skillResolutions:a,toolConfig:r.toolConfig?.(n)}}elideChatMessages(e,n){let r=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,ije.assert)(r.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,n),o=n.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:zMt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,Fpe(a,n)]}computeNonElidableTokens(e,n){let r=e.filter(i=>typeof i.content=="string");return r.push({role:"user",content:""}),Fpe(r,n)}safetyPrompt(e,n){let r=this.ctx.get(Jn).getEditorInfo().readableName??this.ctx.get(Jn).getEditorInfo().name,i=YMt(process.platform);return GHe(this.ctx,r,n?.login,i,e)}};function zMt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(zMt,"processResultOfElidableText");function rje(t){return t.map(e=>$n(e.content)).join(`

`)}s(rje,"debugChatMessages");function YMt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(YMt,"mapPlatformToOs");var uk=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,n,r,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(_c).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:r,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,n,c);if(d.type!=="success"&&(Fn.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,n,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Fn.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){Fn.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Fn.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Fn.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Fn.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var dk=class{constructor(e,n,r){this.turnContext=e;this.chatFetcher=n;this.computeSuggestions=r}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,n,r,i,o,a,l,c){switch(V4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ga).workspaceCount})),await this.turnContext.ctx.get(sl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(r,e.numTokens,e.requestId,n,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:$n(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:ab.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",r&&r.length>0?this.turnContext.turn.response={message:r,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,n,r,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},$4e(this.turnContext.ctx,this.turnContext.conversation,o,e,n,r,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:$n(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,n,r,i){let a=await new uk(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,n,r);if(a===void 0)return;let l=this.enrichFollowup(a,n,r,i);return Fn.debug(this.turnContext.ctx,"Computed followup",l),Fn.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,n,r,i){let o=r.extendedBy({messageSource:"chat.suggestions",suggestionId:an(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return X4e(this.turnContext.ctx,n,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,n,r){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",z4e(this.turnContext.ctx,this.turnContext.conversation,n,i,e.properties.messageId,r,e),{error:{message:i,responseIsFiltered:!0}}}};f();var az=I.Union([I.String(),I.Number()]),HT=I.Union([I.String(),I.Number()]),KMt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),lz=I.Object({uri:I.String(),position:I.Optional(Fl)}),w6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(_a),selection:I.Optional(_a),status:I.Optional(KMt),range:I.Optional(_a)}),JMt=I.Object({type:I.Literal("directory"),uri:I.String()}),fk=I.Union([w6,JMt,sGe]),Sp=I.Union([I.Literal("panel"),I.Literal("inline")]),XMt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),Kpe=I.Union([I.String(),I.Array(XMt)]),oje=I.Object({request:Kpe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(HT)});function cz(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(cz,"convertToMessageContent");function uz(t,e){if(t=U0(t),typeof t=="string")return t+e;let n=t.map(r=>r.type==="text").lastIndexOf(!0);if(n>=0){let r=[...t],i=r[n];return r[n]={type:"text",text:i.text+e},r}return[...t,{type:"text",text:e}]}s(uz,"appendToMessage");var dz=I.Union([I.Literal("Ask"),I.Literal("Agent")]),ZMt=I.Object({type:I.String(),description:I.String()}),sje=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),ZMt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),fz=I.Object({uri:I.String(),name:I.String()});var Jpe="generate-response",pz=class extends Error{constructor(n,r,i,o){super(n);this.authorizationUri=r;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},_6=class{constructor(e,n,r){this.agent=e;this.turnContext=n;this.chatFetcher=r;this.conversationProgress=n.ctx.get(_s),this.chatFetcher=this.chatFetcher??new na(n.ctx),this.postProcessor=new dk(n,this.chatFetcher,!1),this.conversation=n.conversation,this.turn=n.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,n,r,i){try{await this.processWithAgent(e,n,this.turnContext,i)}catch(o){Fn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof pz?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,n,r,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await hl(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(r);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await r.ctx.get(sl).inspectPrompt(l),await r.steps.start(Jpe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(r,a.messages,n,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,r),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let n=this.createMessagesFromHistory(e),r=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,n):n.push({role:"user",content:U0(e.turn.request.message),copilot_references:r.length>0?r:void 0}),{messages:n,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let n=this.turn.agent?.agentSlug;if(n){for(let r of e.conversation.turns)if(r.agent?.agentSlug===n&&r.agent.sessionId)return r.agent.sessionId}return an()}addConfirmationResponse(e,n){n.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return Mpe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(n=>{let r=[];if(n.request&&r.push({role:"user",content:U0(n.request.message)}),n.response&&n.response.type==="model"){let i=oGe(n.response.references);r.push({role:"assistant",content:U0(n.response.message),copilot_references:i.length>0?i:void 0})}return r})}async computeCopilotReferences(e){return await mGe(e)}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,n,r,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Nb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=uz(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Gn).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:n,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:$n(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,r,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,r,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),$n(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new pz("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,n,r,i){return AD(this.conversation,"conversationPanel",$n(this.turn.request.message).length,e.tokens,r?.templateId,void 0,n,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(Jpe,e.error.message):await n.steps.finish(Jpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var S6=class{constructor(e,n,r,i,o,a){this.id=e;this.slug=n;this.name=r;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new _6(this,e)}},mz=class extends S6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new _6(this,e)}};f();var eQt="github",mh=class{static{s(this,"RemoteAgentRegistry")}},hz=class extends mh{constructor(n){super();this.ctx=n;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let n=await DI(this.ctx,"/agents");return n.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await n.text())):(ar.error(this.ctx,"Failed to fetch agents from CAPI",{status:n.status,statusText:n.statusText}),[])}parseAgents(n){let r;try{r=JSON.parse(n).agents,Array.isArray(r)||ar.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return n.includes("access denied")||ar.warn(this.ctx,"Invalid remote agent response:",n,i),[]}return r.filter(i=>i.slug!==eQt).map(i=>new S6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var Xpe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[ik]}};async function BA(t){let e=[];return e.push(new mz),e.push(...await t.get(mh).agents()),e.push(new Xpe),e}s(BA,"getAgents");var tQt=I.Object({});async function nQt(t,e,n){return[(await BA(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(nQt,"handleConversationAgentsChecked");var aje=ot(tQt,nQt);f();f();var R6=qe(Za());function rQt(t,e,n){let r=or.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(n),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",r)}s(rQt,"telemetryVersionMismatch");async function hh(t,e,n){let i=t.get(Tn).getTextDocumentUnsafe(e);if(!i)throw new R6.ResponseError(tr.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await j1(t,e,i.getText());if(o.status==="invalid")throw t.get(Ji).setInactive(o.reason),new R6.ResponseError(tr.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw n?.isCancellationRequested||(rQt(t,i,e.version),Sc.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new R6.ResponseError(tr.ContentModified,"Document Version Mismatch");return i}s(hh,"getTextDocument");async function NA(t,e,n){let r=e.textDocument??e.doc;if(r)try{return await hh(t,r,n)}catch(i){if(i instanceof R6.ResponseError&&i.code===tr.CopilotNotAvailable)return;throw i}}s(NA,"getTextDocumentIfAvailable");var iQt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),oQt=I.Object({turnId:HT,codeBlockIndex:I.Number(),source:iQt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(lz),textDocument:I.Optional(md),position:I.Optional(Fl),conversationSource:I.Optional(Sp)});async function sQt(t,e,n){let r=await NA(t,n,e),i={totalCharacters:n.totalCharacters,copiedCharacters:n.copiedCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,currentLine:o.line});let a=gv(n.conversationSource),l=await hl(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a},i,`${yc(a)}.acceptedCopy`,l),["OK",null]}s(sQt,"handleConversationCodeCopyChecked");var lje=ot(oQt,sQt);f();var aQt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),lQt=I.Object({turnId:HT,source:aQt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(lz),textDocument:I.Optional(md),position:I.Optional(Fl),conversationSource:I.Optional(Sp)});async function cQt(t,e,n){let r=await NA(t,n,e),i={totalCharacters:n.totalCharacters,acceptedLength:n.acceptedLength??n.totalCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,insertionOffset:r.offsetAt(o),currentLine:o.line});let a=gv(n.conversationSource),l=await hl(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a,compType:n.acceptedLength&&n.acceptedLength<n.totalCharacters?"partial":"full"},i,`${yc(a)}.acceptedInsert`,l),["OK",null]}s(cQt,"handleConversationCodeInsertChecked");var cje=ot(lQt,cQt);f();f();var gz=I.Array(_a);function Az(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Az,"resolveAsActiveEditor");f();var uje=qe(Za());var yz=new uje.ProgressType,Zpe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,n,r){await e.get(Cn).connection.sendProgress(yz,this.progressToken,{kind:"begin",title:`Conversation ${n.id} Turn ${r.id}`,conversationId:n.id,turnId:r.id,agentSlug:r.agent?.agentSlug})}async report(e,n,r,i){await e.get(Cn).connection.sendProgress(yz,this.progressToken,{kind:"report",conversationId:n.id,turnId:r.id,...i})}async end(e,n,r,i){await e.get(Cn).connection.sendProgress(yz,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,...i})}async cancel(e,n,r,i){await e.get(Cn).connection.sendProgress(yz,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,cancellationReason:"CancelledByUser",error:i})}};function pk(t){return new Zpe(t.workDoneToken)}s(pk,"createProgressHandler");f();f();f();var Rc=class extends Error{constructor(n){super(n.message);this.conversationError=n;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var Hy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var mk=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var dje="```",k6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,uQt=String.raw`${dje}[\w]*?\n(?<codeblock>[\s\S]*?)\n${dje}`,dQt=new RegExp(k6+`
`+uQt,"gs"),eme=["replace","delete"];function tme(t,e){let n=t.matchAll(dQt),r=Array.from(n),i=[];for(let o of r){let a=o.groups;if(!a||!eme.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=nme([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(tme,"extractEditsFromTaggedCodeblocks");function nme(t,e){if(t.length===0)return;t.sort((r,i)=>r.start!==i.start?i.start-r.start:i.end-r.end);let n=e.getText().split(`
`);for(let r of t){let i=r.start,o=r.end,a=r.mode,l=r.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=n.length||o>=n.length)){if(a==="delete")n.splice(i,o-i+1);else if(a==="replace"){let c=n[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),n.splice(i,o-i+1,...l)}}}return n.join(`
`)}s(nme,"applyEditsToDocument");f();f();f();f();var jy=class{constructor(e,n,r=[]){this.textDocumentResult=e;this.range=n;this.descriptions=r;this.descriptions=r}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,n=new q0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),r=["<attachment>"];return r.push(...this.descriptions),r.push(...n.renderAsArray()),r.push("</attachment>"),r}};var fQt=new Tt("activeEditorPrompt");async function fje(t,e){let n=[],r=t.turnContext.turn.request.activeEditor;if(r){if(e.isCancellationRequested)throw new Na;let i=await t.textDocumentProvider.getByUri(r.uri);if(i.status==="valid")if(r.selection&&pQt(r.selection)){let o=new jy(i,r.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(r.uri)}, lines ${r.selection.start.line+1} to ${r.selection.end.line+1}:`]);n.push(...o.render());let a=new jy(i,void 0,["User's active file for additional context:"]);n.push(...a.render())}else if(r.visibleRange){let o=new jy(i,r.visibleRange,["User's current visible code:",`Excerpt from ${Ti(r.uri)}, lines ${r.visibleRange.start.line+1} to ${r.visibleRange.end.line+1}:`]);n.push(...o.render())}else{let o=new jy(i,void 0,["User's active file for additional context:"]);n.push(...o.render())}else fQt.warn(t.context,`Failed to read file in active editor ${r.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return n}s(fje,"processActiveEditor");function pQt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(pQt,"notEmptySelection");f();f();function pje(t){return t.reduce((n,r)=>n+r.value.length,0)+Math.max(0,t.length-1)}s(pje,"partsLength");async function hje(t,e=1/0,n){let r=mje(0,t,e),i=e-pje(r);for(;;){let o=!1,a=[];for(let l of r)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(n?.isCancellationRequested)return mQt();let u=mje(l.level+1,c,i-1);u.length&&(o=!0,i-=pje(u)+1,a.push(...u))}if(r=a,!o)break}return{files:r.map(o=>o.uri).filter(o=>o!==void 0),tree:r.map(o=>o.value).join(`
`)}}s(hje,"visualFileTree");function mje(t,e,n){let r="	".repeat(t),i=[],o=n;for(let a=0;a<e.length;++a){let l=e[a],c=r+l.name+(l.type===2?"/":"");if(c.length>o){let u=r+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(mje,"toParts");var mQt=s(()=>({tree:"",files:[]}),"emptyTree");var hQt=new Tt("fileReferencesPrompt");async function gje(t,e,n,r){let i=await Aje(t,e,n,r);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=pR(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(gje,"generateWorkspaceStructurePrompt");async function Aje(t,e,n,r){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await hje(await yje(t,i.uri,n,r),n.maxLength/e.length,r);return{label:o,uri:a,tree:l}})):[]}s(Aje,"generateWorkspaceStructure");async function yje(t,e,n,r){if(r.isCancellationRequested)return[];let i;try{i=await t.get(po).readDirectory(e)}catch{return[]}return r.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=ko(e,o);return n.excludeDotFiles&&o.startsWith(".")||yQt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>yje(t,l,n,r),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(yje,"buildFileList");var gQt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],AQt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function yQt(t){return!!(AQt.includes(Ti(t).toLowerCase())||Go(t)?.toLowerCase()?.split(/[/\\]/g)?.some(n=>gQt.includes(n)))}s(yQt,"shouldAlwaysIgnoreFile");async function Cz(t,e,n){if(n.length===0)return[];try{let r=n.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await Aje(t,r,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(r){return hQt.warn(t,`Failed to generate directory structure: ${String(r)}`),[]}}s(Cz,"processDirectoryReferences");var CQt=new Tt("fileReferencesPrompt");async function Cje(t,e){let n=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],r=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=n.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&r.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Na;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new jy(h,void 0,[]);g&&m.push(...g.render())}else CQt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),fje(t,e),Cz(t.context,e,r)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(Cje,"processFileReferences");var xje=new Tt("editAgentPrompt"),xz=class{constructor(e,n){this._toolsService=e;this.props=n;this.ctx=n.turnContext.ctx,this.turnContext=n.turnContext,this.currentTurn=n.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let n=this.turnContext.conversation.turns.slice(0,-1),r=this.createChatMessagesFromHistory(n),i=Pue(this.currentTurn.response?.message,!0),o=await lA.appendToUserMessage(this.ctx,this.props.workspaceFolders,$n(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...r,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return i9(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let n=[];for(let r of e)if(r.request&&n.push({role:"user",content:U0(r.request.message)}),r.response){let i=Pue(r.response.message,!0);i.forEach(o=>n.push(this.fixToolCallsInResponse(o,i)))}return n}fixToolCallsInResponse(e,n){if(e.tool_calls&&e.tool_calls.length){let r=e.tool_calls,i=[];for(let o of r)n.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):xje.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,n){let r={role:"assistant",content:e,tool_calls:n.length?n:void 0};this.currentTurn.response?this.currentTurn.response.message=o9(this.currentTurn.response.message,r):this.currentTurn.response={message:[r],type:"model"}}addToolCallResult(e,n){let r="";switch(e.status){case"error":r="Tool call failed with error: ";break;case"cancelled":r="Tool call is cancelled with result: ";break;default:case"success":r=""}let i=r+Z9(e.content),o={role:"tool",content:i,tool_call_id:n};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(wH(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===n)){xje.info(this.ctx,`Tool call result for ${n} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=o9(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,n=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${r?"or replace_string_in_file":""} tool instead.`),n&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),n&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),r?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${r?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${r?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${n?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${Cl}`),o.push("changed code"),o.push(`// ${Cl}`),o.push("changed code"),o.push(`// ${Cl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${Cl}`),o.push("	age: number;"),o.push(`	// ${Cl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,n){let r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await Cje({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},n);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(n)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${Cl}\` to represent regions of unchanged code.`),r&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(n=>` - ${Go(n.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await gje(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var vje=15,bje=128,hk=new Tt("toolCallingLoop"),vz=class t{constructor(e,n,r,i){this.turnContext=e;this.chatFetcher=n;this.modelConfiguration=r;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(_s),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(au),this.prompt=new xz(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new Ay(this.turnContext.ctx)}),this.requestId=an(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let n=0,r;for(;;){n++,this.abortIfCanceled(e),this.validateIteration(n,r);let i=performance.now(),o=await this.runOne(n,e);if(eRe(this.turnContext.ctx,this.turnContext,n,performance.now()-i,this.baseTelemetryWithExp),r={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,n){this.abortIfCanceled(n);let r=await this.prompt.render(n),i="",o=new Nb((u,d,p,m)=>{let h=u.trim().match(k6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(n);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(n);let l={messages:r,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(l),hk.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,n,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,n)}async processChatFetchResult(e,n,r,i,o){switch(this.abortIfCanceled(o),hk.debug(this.turnContext.ctx,`Processing fetch type: ${n.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(n,null,2)}`),n.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(r,[]),{response:n,round:{response:n.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Rc({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Na;case"failed":throw this.turn.status="error",new Rc({message:ab.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw this.turn.status="filtered",new Rc({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Rc({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Rc({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Rc({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Rc({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Rc({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Rc({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(n,r,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Rc({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,n,r,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(n,a);for(let l of a)await this.handleSingleToolCall(l,r,i,o);return{response:e,round:{response:n,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,n,r,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(n,e.function.name);if(o){let a=performance.now(),l="success";try{let c=ib(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,r,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(r,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:r,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=QUe(p);await this.turnContext.agentToolCalls.result(r,e.id,m)}else if(p.status==="error"){let m=_V(p);await this.turnContext.agentToolCalls.error(r,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(r,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof Hy||c instanceof Na)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Hi([new Ci("")],"cancelled"),e.id),new Hy(c.message);{hk.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${m2(c)}`,c),l="error";let u=new Hi([new Ci(m2(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=_V(u);await this.turnContext.agentToolCalls.error(r,e.id,d.message)}}finally{let c=performance.now()-a;tRe(this.turnContext.ctx,this.turnContext,o,e.id,r,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;hk.error(this.turnContext.ctx,a);let l=new Hi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=_V(l);await this.turnContext.agentToolCalls.error(r,e.id,c.message)}}getAvailableChatTools(e){return e.map(n=>({type:"function",function:{name:n.nameForModel,description:n.description,parameters:n.inputSchema}}))}findToolByName(e,n){return e.find(r=>r.nameForModel===n)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Na}async requestToolInvocationApproval(e,n,r,i,o,a,l,c){if(e.confirmationMessages&&n){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,r,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new Hy("Cancelled by user");case"accept":return Promise.resolve();default:throw new Hy(`Invalid confirmation result ${u.result}`)}}else hk.debug(this.turnContext.ctx,`Tool call confirmation not required for ${r} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${n}'`)}validateIteration(e,n){if(n&&e>vje)throw hk.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${vje} for turn ${this.turn.id}`),new mk}checkChatPayload(e){if(e.messages.length===0)throw new Rc({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>bje)throw new Rc({message:`You may not include more than ${bje} tools in your request.`,responseIsFiltered:!1})}};var bz=new Tt("agenticTurnProcessor"),Ez=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(_s),this.chatFetcher=this.chatFetcher??new na(e.ctx),this.turnSuggestions=new uk(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModelAndToolCall(e,n,this.turnContext,r,i,o)}catch(a){Fn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:Rfe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,n,r,i,o,a){if(n.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await hl(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});n.onCancellationRequested(async()=>{bz.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new vz(this.turnContext,this.chatFetcher,c,l).run(n);let d={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(n,l.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(d.suggestedTitle=p)}await this.endProgress(d)}catch(c){if(c instanceof Hy)bz.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Na)bz.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof mk)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:Rfe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof Rc)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw bz.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}async fetchSuggestedTitle(e,n){let r=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,n);if(r)return Fn.debug(this.turnContext.ctx,"Computed suggested title",r.suggestedTitle),r.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=o9(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var rme="collect-context",ime="generate-response",Iz=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(_s),this.chatFetcher=this.chatFetcher??new na(e.ctx),this.postProcessor=new dk(e,this.chatFetcher,n.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModel(e,n,this.turnContext,r,i,o)}catch(a){Fn.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,n,r,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await hl(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=y6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,n);return}let u=(await BA(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await r.steps.start(rme,"Collecting context"),await this.collectContext(r,n,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(ra).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(r,o?.detectedLanguageId??"",void 0,d);if(!p)await r.steps.error(rme,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await r.steps.finish(rme),await r.steps.start(ime,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,n,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,r),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let n=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(n&&n.type==="authorizationRequired")return{unauthorized:{...n,agentName:e.name,agentSlug:e.slug}}}catch(n){Fn.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,n);let r=n instanceof Error?n.message:String(n);return this.turn.status="error",this.turn.response={message:r,type:"meta"},{error:{message:r,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,n,r){if(!e.response)return;let i=await e.response(this.turnContext,n,r);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,n,r,i,o,a){let c=await new z$(this.turnContext.ctx,this.chatFetcher).collectContext(e,n,r,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,n,r,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new Nb((h,g,y,v)=>{let b=h.trim().match(k6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=uz(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:$n(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,n,r,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,n,u.appliedText,r,i,$n(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,n,r,i,o){let a;return i?(this.turn.request.type="follow-up",Y4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,$n(this.turn.request.message),e.tokens,i.type,i.id,o,n),a=AD(this.conversation,this.strategy.uiKind,$n(this.turn.request.message).length,e.tokens,i.type,i.id,n,e.skillResolutions)):a=AD(this.conversation,this.strategy.uiKind,$n(this.turn.request.message).length,e.tokens,r?.id,void 0,n,e.skillResolutions),a}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(ime,e.error.message):await n.steps.finish(ime)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Tz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,n,r,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:n,userSelectedModelName:i};return await this.ctx.get(_c).toPrompt(e,l)}extractEditsFromResponse(e,n){return[]}},wz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,n,r){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=r?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(ra).getBestChatModelConfig(Pf(a)),c={promptType:a,modelConfiguration:l,languageId:n};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(_c).toPrompt(e,c)}async processResponse(e){let n=[],r=$n(e.response?.message??"");if(r&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(r,this.currentDocument);i&&n.push(i)}return n}async getCurrentEditorSkill(e){let n=await e.skillResolver.resolve(cu);if(n)return n}async getDocumentIfValid(e){let n=await this.ctx.get(Cr).getOrReadTextDocument({uri:e});if(n.status==="valid")return n.document}async processInlineResponse(e,n){let i=tme(e,n).filter(a=>eme.includes(a.mode)),o=nme(i,n);if(o)return await this.ctx.get(sl).documentDiff({original:n.getText(),updated:o}),{uri:n.uri,text:o}}extractEditsFromResponse(e,n){return tme(e,n)}};f();f();var Eje=qe(Za()),Ije=qe(Sm());var $u=class{constructor(e,n,r){this.ctx=e;this.skillId=n;this.requestType=new Eje.ProtocolRequestType("conversation/context");this.typeCheck=hs.Compile(r)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let n=this.ctx.get(Cn).connection,r={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await n.sendRequest(this.requestType,r),[a,l]=o;if(l){let c=new Ije.ResponseError(l.code,l.message,l.data);Fn.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){Fn.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Tc(this.typeCheck.Errors(i));return i}}};var ome=class{constructor(e,n,r="",i="",o=[],a=[]){this.progressToken=e;this.chunks=n;this.followUp=r;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Vy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,n,r="",i="",o=[],a=[]){let l=new ome(e,n,r,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(n=>n.progressToken===e)}},_z=class{constructor(e,n){this.turnContext=e;this.syntheticTurn=n;this.conversationProgress=e.ctx.get(_s)}static{s(this,"SyntheticTurnProcessor")}async process(e,n){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,n)}catch(r){Fn.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,r);let i=r.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,n,r){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,n),await this.resolveSyntheticSkill(e,r),await this.processSyntheticChunks(e,r),await this.endSyntheticProgress(e,r),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=r.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,n){let r=this.turnContext.ctx.get(ki).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>r.skills.includes(o));for(let o of i){let l=await new $u(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!n.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,n){for(let r of e.chunks)n.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:r}),await _g(1))}async endSyntheticProgress(e,n){n.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:an()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var $y=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,n,r){let i=e.ctx.get(Vy).get(n);if(i)return new _z(e,i);let a=(await BA(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new wz(e.ctx):l=new Tz(e.ctx),r!==void 0&&(l.computeSuggestions=r),e.turn.chatMode==="Agent"?new Ez(e,l):new Iz(e,l)}};f();var Tje=qe(Za());var gk=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let n=new Set;for(let r of e){if(n.has(r.uri))throw new Tje.ResponseError(tr.InvalidParams,`Duplicate workspace folder uri ${r.uri}`);n.add(r.uri)}}};f();function Sz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(Sz,"resolveAsWorkspaceFolders");f();f();var xQt=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),Hd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,n)=>this._isCancelled?xQt(e,n):(this.handlers.push(e.bind(n)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(n=>n.isCancellationRequested),e.forEach(n=>{n.onCancellationRequested(r=>this.cancel(r))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(n=>n(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var zu=class{constructor(){this.tokens=new Ln(250)}static{s(this,"ProgressTokens")}add(e,n){let r=new sr.CancellationTokenSource,i=new Hd([n,r.token]);return this.tokens.set(e.toString(),r),i}cancel(e){let n=this.tokens.get(e.toString());n&&(n.cancel(),this.tokens.delete(e.toString()))}};var vQt=I.Object({conversationId:I.Optional(az),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(oje,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(md),textDocument:I.Optional(md),selection:I.Optional(_a),visibleRanges:I.Optional(gz),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(fk)),source:I.Optional(Sp),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(fz)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(dz),needToolCallConfirmation:I.Optional(I.Boolean())});async function bQt(t,e,n){gk.validate(n.workspaceFolders);let r=await NA(t,n,e),i=t.get(ki).create(n);await EQt(t,i,n,r);let o=i.turns[i.turns.length-1],a=pk(n),l=t.get(zu).add(a.progressToken,e),c=new Wb(t,i,o,l);return await(await t.get($y).createProcessor(c,a.progressToken,n.computeSuggestions)).process(a,l,void 0,r,n.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:n.model},null]}s(bQt,"handleConversationCreateChecked");async function EQt(t,e,n,r){for(let i of n.turns){let o=cz(i.request),a=new Lb({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=p$(n.chatMode),a.needToolCallConfirmation=n.needToolCallConfirmation;let l=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,c=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:Sz(l),u=Az({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});await t.get(ki).addTurn(e.id,a,n.references,u,l,c,n.ignoredSkills,void 0)}}s(EQt,"addTurns");var wje=ot(vQt,bQt);f();var IQt=I.Object({conversationId:I.String()});function TQt(t,e,n){return t.get(ki).destroy(n.conversationId),["OK",null]}s(TQt,"handleConversationDestroyChecked");var _je=ot(IQt,TQt);f();var wQt=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),_Qt=new Tt("conversationNotifyCodeAcceptance");async function SQt(t,e,n){let r=t.get(ki).findByTurnId(n.turnId);if(!r)return _Qt.warn(t,`Turn with id ${n.turnId} not found`),["OK",null];let i=await hl(t,r,{languageId:""});return Pu(t,void 0,{},{acceptedFileCount:n.acceptedFileCount,totalFileCount:n.totalFileCount},`${yc("agentPanel")}.codeAcceptance`,i),["OK",null]}s(SQt,"handleConversationNotifyCodeAcceptanceChecked");var Sje=ot(wQt,SQt);f();var RQt=I.Object({});function kQt(t,e,n){return[{path:t.get(gc).directory},null]}s(kQt,"handleConversationPersistenceChecked");var Rje=ot(RQt,kQt);f();f();var Bje=qe(require("node:events"));var sme=class{static{s(this,"TokenPreconditionCheck")}async check(e){let n=await e.get(Sr).getSession(),r=e.get(Ml);return n&&n.githubAppId&&n.githubAppId!==Cm?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:r.githubAppId}}},ame=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Gn).getToken()).envelope.chat_enabled?"ok":"failed"}}},BQt=[new sme,new ame],kje="onPreconditionsChanged",Rp=class{constructor(e,n=BQt){this.ctx=e;this.checks=n;this.emitter=new Bje.default;Ps(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let n=e.every(i=>i.status==="ok")?"ok":"failed",r={results:e,status:n};return this.emit(r),r}onChange(e){this.emitter.on(kje,e)}emit(e){this.emitter.emit(kje,e)}};var DQt=I.Object({forceCheck:I.Optional(I.Boolean())});async function PQt(t,e,n){let r=n.forceCheck??!1;return[await t.get(Rp).check(r),null]}s(PQt,"handleConversationPreconditionsChecked");var Dje=ot(DQt,PQt);f();var NQt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(md),textDocument:I.Optional(md),source:I.Optional(Sp)});async function LQt(t,e,n){let r=await NA(t,n,e),i=gv(n.source),o="unrated";n.rating>0?o="positive":n.rating<0&&(o="negative");let a=await hl(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{rating:o,uiKind:i},{},`${yc(i)}.messageRating`,a),["OK",null]}s(LQt,"handleConversationRatingChecked");var Pje=ot(NQt,LQt);f();f();var Rz=class extends Db{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:vA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,n){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,n,r){let i={name:this.name,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId};try{return await e.ctx.get(ob).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Na;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(oA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var FQt=I.Object({tools:I.Array(sje)});function MQt(t,e,n){return n.tools.forEach(r=>{t.get(au).registerTool(new Rz({name:r.name,description:r.description,inputSchema:r.inputSchema,confirmationMessages:r.confirmationMessages}))}),["OK",null]}s(MQt,"conversationRegisterToolsChecked");var Nje=ot(FQt,MQt);f();var QQt=I.Object({});function OQt(t,e,n){return[ype(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(OQt,"handleConversationTemplatesChecked");var Lje=ot(QQt,OQt);f();var UQt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:az,turnId:I.Optional(HT),message:Kpe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(md),textDocument:I.Optional(md),selection:I.Optional(_a),visibleRanges:I.Optional(gz),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(fk)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(fz)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:wMe,model:I.Optional(I.String()),chatMode:I.Optional(dz),needToolCallConfirmation:I.Optional(I.Boolean())});async function qQt(t,e,n){gk.validate(n.workspaceFolders);let r=await NA(t,n,e),i=t.get(ki),o=i.get(n.conversationId),a=cz(n.message),l=new Lb({message:a,type:"user"},n.turnId);l.chatMode=p$(n.chatMode),l.needToolCallConfirmation=n.needToolCallConfirmation;let c=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,u=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:Sz(c),d=Az({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});l=await i.addTurn(o.id,l,n.references,d,c,u,n.ignoredSkills,n.confirmationResponse);let p=pk(n),m=t.get(zu).add(p.progressToken,e),h=new Wb(t,o,l,m);return await(await t.get($y).createProcessor(h,p.progressToken,n.computeSuggestions)).process(p,m,n.followUp,r,n.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:n.model},null]}s(qQt,"handleConversationTurnChecked");var Fje=ot(UQt,qQt);f();var WQt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(Sp)});async function GQt(t,e,n){t.get(ki).deleteTurn(n.conversationId,n.turnId);let i=gv(n.source),o=await hl(t,t.get(ki).findByTurnId(n.turnId),{languageId:""});return Pu(t,void 0,{messageId:n.turnId,uiKind:i,conversationId:n.conversationId},{},`${yc(i)}.messageDelete`,o),["OK",null]}s(GQt,"handleConversationTurnDeleteChecked");var Mje=ot(WQt,GQt);f();var HQt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function jQt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(jQt,"buildSystemMessage");function VQt(t){let n=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),r=t.selection.start.line+1,i=t.selection.end.line+1,o=n.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>r&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${r} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(VQt,"buildUserMessage");function $Qt(t,e){let n=[],r=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=r.length)continue;let g=r[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};n.push(b)}return n}s($Qt,"parseReviewComments");async function zQt(t,e,n){if(!n.document.text)return[null,{code:tr.InvalidRequest,message:"Document text is required"}];if(!n.document.uri)return[null,{code:tr.InvalidRequest,message:"Document URI is required"}];if(!n.document.languageId)return[null,{code:tr.InvalidRequest,message:"Document language ID is required"}];let r=n.document.text.split(`
`);if(n.selection.start.line<0||n.selection.end.line>=r.length)return[null,{code:tr.InvalidRequest,message:"Invalid selection range"}];if(n.selection.start.line>n.selection.end.line)return[null,{code:tr.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(na),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:jQt()},{role:"user",content:VQt(n)}],l=await t.get(Rt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Gd.user("code-review",an())},e,l);if(c.type!=="success")return[null,{code:tr.InternalError,message:"Failed to generate code review"}];let u=$Qt(n.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(zQt,"handleCopilotCodeReviewChecked");var Qje=ot(HQt,zQt);f();f();var Gb=class{constructor(e,n,r,i,o){this.ctx=e;this.editConversation=n;this.currentTurn=r;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of r.workingSet)this.workingSetUriToPathMap.set(a.uri,yy.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[n,r]of this.workingSetUriToPathMap)if(r===e)return n}toLlmInteraction(){return Gd.user("conversation-edit-panel",this.editTurnId)}};f();async function kz(t,e,n,r){let o=t.get(il).create("panel","en"),a=new lb({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Gb(t,o,a,r,lr.Gpt4o),u=t.get(Ic);await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(kz,"streamMockedResult");f();var YQt=I.Object({enableMock:I.Boolean()}),LA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function KQt(t,e,n){return t.get(LA).setMockEnabled(n.enableMock),["OK",null]}s(KQt,"handleTestingSetCopilotEditsResponseChecked");var Oje=ot(YQt,KQt);var JQt=I.Object({request:I.String(),response:I.Optional(I.String())}),XQt=I.Union([I.Literal("panel")]),ZQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(JQt,{minItems:1}),workingSet:I.Optional(I.Array(w6)),source:I.Optional(XQt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function eOt(t,e){let n=t.create(e.source,e.userLanguage);for(let r of e.turns){let i=new lb({message:r.request,type:"user"},e.workingSet);r.response&&(i.response={message:r.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(n.id,i)}return n}s(eOt,"buildEditConversation");async function tOt(t,e,n){if(t.get(LA).isMockEnabled())return await kz(t,an(),an(),n.partialResultToken),[[],null];let r=eOt(t.get(il),n),i=r.getLastTurn(),o=new Gb(t,r,i,n.partialResultToken,n.model),a=t.get(zu).add(n.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(o,a),null]}s(tOt,"handleEditConversationCreateChecked");var Uje=ot(ZQt,tOt);f();var nOt=I.Object({editConversationId:I.String()});function rOt(t,e,n){return t.get(il).destroy(n.editConversationId),["OK",null]}s(rOt,"handleEditConversationDestroyChecked");var qje=ot(nOt,rOt);f();var iOt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(w6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function oOt(t,e,n){let r=t.get(e),i=new lb({message:n.message,type:"user"},n.workingSet);return n.workspaceFolder&&(i.workspaceFolder=n.workspaceFolder),t.addTurn(r.id,i),r}s(oOt,"buildEditConversation");async function sOt(t,e,n){if(t.get(LA).isMockEnabled())return await kz(t,n.editConversationId,an(),n.partialResultToken),[[],null];let r=t.get(il),i=oOt(r,n.editConversationId,n),o=i.getLastTurn(),a=new Gb(t,i,o,n.partialResultToken,n.model),l=t.get(zu).add(n.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(a,l),null]}s(sOt,"handleEditConversationTurnChecked");var Wje=ot(iOt,sOt);f();var aOt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(Sp)});async function lOt(t,e,n){t.get(il).deleteTurn(n.editConversationId,n.editTurnId);let i=await gD(t,n.editTurnId,n.editConversationId,{languageId:""});return Pu(t,void 0,{messageId:n.editTurnId,uiKind:"editsPanel",conversationId:n.editConversationId},{},`${yc("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(lOt,"handleEditConversationTurnDeleteChecked");var Gje=ot(aOt,lOt);f();var cOt=I.Object({}),uOt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(d9)}))}))});function dOt(t,e,n){return[t.get(Ap).getAllTools(),null]}s(dOt,"handleGetMCPToolsChecked");function fOt(t,e,n){for(let{name:i,tools:o}of n.servers)for(let{name:a,status:l}of o)t.get(Ap).updateMCPToolStatus(i,a,l);return[t.get(Ap).getAllTools(),null]}s(fOt,"handleUpdateMCPToolsStatusChecked");var Hje=ot(cOt,dOt),jje=ot(uOt,fOt);f();var pOt=I.Object({});async function mOt(t,e,n){let r=await t.get(Gn).getToken();return[hOt(await t.get(wu).getMetadata(),r),null]}s(mOt,"handleCopilotModelsChecked");function hOt(t,e){let n=e.getTokenValue("editor_preview_features")=="0",r=Lf.filterModelsWithEditorPreviewFeatures(t,n),i=[];return r.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!S2e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(hOt,"filterModels");var Vje=ot(pOt,mOt);f();var gOt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function AOt(t,e,n){return n.model&&n.status==="enabled"?await t.get(wu).acceptModelPolicy(n.model)?["OK",null]:[null,{code:tr.InternalError,message:"Failed to accept model policy"}]:[null,{code:tr.InvalidRequest,message:"Invalid model or status"}]}s(AOt,"handleCopilotModelsPolicyChecked");var $je=ot(gOt,AOt);f();f();f();f();function yOt(t,e){let n=e,r=t.lineAt(e.line);return r.isEmptyOrWhitespace||(n=r.range.end),n}s(yOt,"panelPositionForDocument");async function*zje(t){for await(let e of t){let n={...e};n.completionText=n.completionText.trimEnd(),yield n}}s(zje,"trimChoices");var Ak=class{constructor(e,n,r,i){this.textDocument=e;this.startPosition=n;this.cancellationToken=r;this.solutionCountTarget=i;this.targetPosition=yOt(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function lme(t,e){let n=await t;switch(n.status){case"Solution":await e.onSolution(n.solution),await lme(n.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(n.error);break}}s(lme,"reportSolutions");async function cme(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let n=await e.next();return n.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:n.value,next:cme(t,e)}}s(cme,"generateSolutionsStream");function Bz(t){return t.replace(/\s+/g,"")}s(Bz,"normalizeCompletionText");async function Yje(t,e,n,r){let i=e.targetPosition,o=e.textDocument,a=ev(t,o.uri),l=an(),c=or.createAndMarkAsIssued({headerRequestId:l,languageId:o.detectedLanguageId,source:n},{});e.savedTelemetryData=await t.get(Rt).updateExPValuesAndAssignments({uri:o.uri,languageId:o.detectedLanguageId},c);let u=await $5(t,l,Lg(o,i),e.savedTelemetryData);if(u.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(u.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(u.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(u.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(u.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let d=u.prompt,p=u.trailingWs;return p.length>0&&(e.startPosition=Mo.position(e.startPosition.line,e.startPosition.character-p.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...OS(d),solutionCount:e.solutionCountTarget,promptEndPos:o.offsetAt(i)}),r.debug(t,"prompt:",d),Bt(t,"solution.requested",e.savedTelemetryData),{prompt:d,trailingWs:p,telemetryData:e.savedTelemetryData,repoInfo:a,ourRequestId:l}}s(Yje,"setupPromptAndTelemetry");function Kje(t,e,n,r,i,o){let a=t.get(Im).forLanguage(t,e.detectedLanguageId,o),l=g0(e.detectedLanguageId),c=UU(e,n),u={language:e.detectedLanguageId,next_indent:c.next??0,prompt_tokens:r.prefixTokens??0,suffix_tokens:r.suffixTokens??0},d={};a==="parsing"&&!l&&(d.stop=[`

`,`\r
\r
`]);let p=Zx(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=c.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=l?xD(t,e,i.startPosition):()=>{},u.force_indent=c.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=l?xD(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:d,finishedCb:m,engineInfo:p}}s(Kje,"setupCompletionParams");var ume=new Tt("solutions");async function COt(t,e){let n=e.targetPosition,r=e.textDocument,i=await Yje(t,e,"open copilot",ume);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:l,repoInfo:c,ourRequestId:u}=i,{extra:d,postOptions:p,finishedCb:m,engineInfo:h}=Kje(t,r,n,o,e,l),g=e.cancellationToken,y={prompt:o,languageId:r.detectedLanguageId,repoInfo:c,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:d},v=await t.get(vd).fetchAndStreamCompletions(t,y,l.extendedBy(),m,g);if(v.type==="failed"||v.type==="canceled")return{status:"FinishedWithError",error:`${v.type}: ${v.reason}`};let b=v.choices;b=zje(b),b=hD(b,k=>PD(t,r,n,k,!1,ume));let E=hD(b,async k=>{let B=k.completionText;ume.info(t,`Open Copilot completion: [${k.completionText}]`);let N=await LRe(t,r,n,k.completionText)??Mo.position(n.line,0),[U]=V5(r.getText(Mo.range(N,n)));B=U+B;let re=k.completionText;a.length>0&&re.startsWith(a)&&(re=re.substring(a.length));let me=k.meanLogProb,ae=me!==void 0?Math.exp(me):0,H=l.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:re,insertText:B,range:Mo.range(N,n),meanProb:ae,meanLogProb:me||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:H,copilotAnnotations:k.copilotAnnotations}});return cme(g,E[Symbol.asyncIterator]())}s(COt,"launchSolutions");async function Dz(t,e,n){return t.get(Ji).withProgress(async()=>{let i=COt(t,e);return await lme(i,n)})}s(Dz,"runSolutions");var Xje=qe(Tx()),D6=qe(Za());f();f();function Pz(t,e){let n=t.split(`
`),r=e,i=e,o=n[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),r={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),r={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:n,start:r,end:i}}s(Pz,"parseChallengeDoc");var xOt=I.Object({text:I.String(),score:I.Number()}),vOt=I.Object({documents:I.Array(xOt),options:I.Optional(I.Object({}))});async function Nz(t,e,n){let r=an();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=Pz(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);n.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await n.onSolution({requestId:{headerRequestId:r,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:gg.createEmptyConfigForTesting()})}await n.onFinishedNormally()}s(Nz,"runTestSolutions");var gh=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function bOt(t,e,n){return t.forceSet(gh,new gh(n.documents)),["OK",null]}s(bOt,"handleTestingSetPanelCompletionDocumentsChecked");var Jje=ot(vOt,bOt);var Zje=hM.type;function EOt(t,e,n,r,i){let o=Bz(r.completionText),a=(0,Xje.SHA256)(o).toString();return t.get(os).set(a,{displayText:r.completionText,insertText:r.insertText,offset:n,uuid:a,range:r.range,uri:e.textDocument.uri,telemetry:r.telemetryData.extendedBy({},{rank:i-1}),index:r.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:r.copilotAnnotations,clientCompletionId:a}),{range:r.range,insertText:r.insertText,command:{command:wfe,title:`Accept completion ${i}`,arguments:[a]}}}s(EOt,"makeCompletion");function fme(t,e){return`${t}/${e}`}s(fme,"progressMessage");var dme=class{constructor(e,n,r){this.ctx=e;this.params=n;this.onCompletion=r;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}async onSolution(e){this.count+=1;let n=EOt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(n.command.arguments[0])||(this.items.set(n.command.arguments[0],n),await this.onCompletion(n)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(D6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:fme(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return IOt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(D6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function IOt(t,e,n=0){t!==void 0&&await e.connection.sendProgress(D6.WorkDoneProgress.type,t,{kind:"end",message:fme(n,10)})}s(IOt,"reportDone");var B6;async function TOt(t,e,n){let r=await hh(t,n.textDocument,e),i=n.position;n.workDoneToken!==void 0&&await t.get(Cn).connection.sendProgress(D6.WorkDoneProgress.type,n.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:fme(0,10),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=n.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(Cn).connection.sendProgress(hM.partialResult,l,{items:[d]})},"onCompletion"));let c=new dme(t,n,a),u=t.get(gh);if(u.documents){let d=u.documents;await Nz(i,d,c)}else{c.offset=r.offsetAt(i);let d=new Ak(r,i,e,10);await Dz(t,d,c)}return c.error!==void 0?[null,{code:tr.InternalError,message:c.error}]:[{items:o},null]}s(TOt,"handleChecked");async function wOt(t,e,n){B6&&(B6.cancel(),B6.dispose()),B6=new sr.CancellationTokenSource;let r=B6.token,i=new Hd([e,r]);try{return await TOt(t,i,n)}catch(o){if(r.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(wOt,"handleCheckedWithAbort");var eVe=ot(YIe,wOt);f();f();f();function SOt(t,e,n){let{apiUrl:r,serverUrl:i}=n||t.get(Tu).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,l=new URL("_ping",e.api).href,c=new URL("_ping",e.telemetry).href;function u(d){return new URL(d).host}return s(u,"label"),[{label:u(o),url:o},{label:u(r),url:r,session:n},{label:u(a),url:a},{label:u(l),url:l,session:n},{label:u(c),url:c}]}s(SOt,"urlsToCheck");async function tVe(t,e,n=xM(t),r){let i=SOt(t,n,r).map(async({label:o,url:a,session:l})=>{let{message:c,status:u}=await ROt(e,a,l);return{label:o,url:a,message:c,status:u}});return await Promise.all(i)}s(tVe,"checkReachability");async function ROt(t,e,n){try{let r=await t.fetch(e,{headers:n?{Authorization:`Bearer ${n.accessToken}`}:{}}),i=r.status>=200&&r.status<400?"reachable":"unreachable";return{message:`HTTP ${r.status}`+(r.statusText?` - ${r.statusText}`:""),status:i}}catch(r){return{message:String(r),status:"unreachable"}}}s(ROt,"determineReachability");var K0=qe(require("os")),yk=qe(require("tls"));async function rVe(t){let e=await t.get(Kr).getImplementation(),n=await t.get(Gn).getGitHubSession(),r=await t.get(Gn).getToken().catch(()=>{});return{sections:[BOt(t),kOt(t,n),DOt(t,e),await POt(t,e,r?.endpoints,n)]}}s(rVe,"collectDiagnostics");function iVe(t){return t.sections.map(NOt).join(K0.EOL+K0.EOL)+K0.EOL}s(iVe,"formatDiagnosticsAsMarkdown");function kOt(t,e){let n=e&&new URL(e.serverUrl).host,r;return e?n==="github.com"?r=e.login:r=`${e.login} (${n})`:r="not signed in",{name:"Copilot",items:{Version:TI(t),"GitHub Account":r,"Session ID":t.get(Ko).sessionId,"Send Restricted Telemetry":US(t)?"enabled":"disabled","Content Exclusion":t.get(Ol).enabled?"enabled":"unavailable"}}}s(kOt,"collectCopilotSection");function BOt(t){let e={Plugin:FOt(t),Editor:LOt(t),"Operating System":`${K0.type()} ${K0.release()} (${K0.arch()})`};return FA(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(BOt,"collectEnvironmentSection");function DOt(t,e){let n=t.get(mc).getHttpSettings(),r={Proxy:n.proxy||void 0,"Proxy Authorization":n.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":n.proxyKerberosServicePrincipal,"Proxy Strict SSL":n.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":yk.rootCertificates.length,"TLS Default Min Version":yk.DEFAULT_MIN_VERSION,"TLS Default Max Version":yk.DEFAULT_MAX_VERSION};return FA(r,"http_proxy"),FA(r,"https_proxy"),FA(r,"no_proxy"),FA(r,"SSL_CERT_FILE"),FA(r,"SSL_CERT_DIR"),FA(r,"OPENSSL_CONF"),FA(r,"NODE_EXTRA_CA_CERTS"),FA(r,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:r}}s(DOt,"collectNetworkConfigSection");async function POt(t,e,n,r){return{name:"Reachability",items:Object.fromEntries((await tVe(t,e,n,r)).map(({label:o,message:a})=>[o,a]))}}s(POt,"collectReachabilitySection");function nVe(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(nVe,"quoteCode");function FA(t,e){let n=process.env[e];n&&(t[nVe(e)]=nVe(n)),n!==process.env[e.toUpperCase()]&&FA(t,e.toUpperCase())}s(FA,"addEnvironmentVariable");function NOt(t){return`## ${t.name}`+K0.EOL+K0.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(K0.EOL)}s(NOt,"formatSectionAsMarkdown");function LOt(t){let e=t.get(Jn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(LOt,"getEditorDisplayVersion");function FOt(t){let e=t.get(Jn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(FOt,"getPluginDisplayVersion");var MOt=I.Object({});async function QOt(t){return[{report:iVe(await rVe(t))},null]}s(QOt,"handleDiagnosticsChecked");var oVe=ot(MOt,QOt);f();f();f();f();function sVe(t,e,n){function r(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(r,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>r(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>r(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),n){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return r(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(sVe,"normalizeIndentCharacter");function aVe(t,e,n,r,i,o,a){let l=r.lineAt(i),c=e.map(u=>{let d=Mo.range(Mo.position(i.line,0),Mo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=sVe(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=Mo.range(d.start,i);p=r.getText(h)+u.completion.displayText}return{uuid:an(),insertText:p,range:d,uri:r.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:r.offsetAt(i),resultType:n,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(n===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(aVe,"completionsFromGhostTextResults");async function pme(t,e,n,r={}){let i=0;r.selectedCompletionInfo?.text&&!r.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(r.selectedCompletionInfo),i=e.position.character-r.selectedCompletionInfo.range.end.character);let o=await Ooe(t,e,n,r);if(o.type!=="success")return o;let[a,l]=o.value;if(n?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=C3e(t,e.textDocument,e.position,l),u=aVe(t,a,l,e.textDocument,e.position,r.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(Rt),p=(ui(t,wt.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Sg.isSupported(e.textDocument.detectedLanguageId),m=ui(t,wt.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob),g=p||(m??h),y=ui(t,wt.EnableSpeculativeRequestsShown)??d.enableSpeculativeRequestsShown(o.telemetryBlob);if(g&&l!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let b={isSpeculative:!0,opportunityId:r.opportunityId},E=s(()=>Ooe(t,e,void 0,b),"fn");y?t.get(Jf).set(u[0].clientCompletionId,E):Promise.resolve().then(E)}let v=u.map(b=>{let{start:E,end:_}=b.range,k=sr.Range.create(E,sr.Position.create(_.line,_.character-i));return{...b,range:k}});return{...o,value:v}}s(pme,"getInlineCompletionsResult");async function Lz(t,e,n,r,i={}){OOt(t,e,n);let o=await pme(t,Lg(e,n),r,i);return uRe(t,o)}s(Lz,"getInlineCompletions");function OOt(t,e,n){let r=e.getText({start:{line:Math.max(n.line-1,0),character:0},end:n}),i=e.getText({start:n,end:{line:Math.min(n.line+2,e.lineCount-1),character:e.lineCount-1>n.line?0:n.character}});SU.debug(t,`Requesting for ${e.uri} at ${n.line}:${n.character}`,`between ${JSON.stringify(r)} and ${JSON.stringify(i)}.`)}s(OOt,"logCompletionLocation");var pVe=qe(Za());f();var lVe=require("crypto");var Ck=class{static{s(this,"LspClientContextProvider")}constructor(e,n,r){this.id=n,this.selector=r,this.resolver=new hme(e,this.id)}},hme=class{constructor(e,n){this.ctx=e;this.id=n;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,n){let r=[];if(this.contextItems.length>0)r=this.contextItems;else if(this.update){let i=this.ctx.get(Cn),o=(0,lVe.randomUUID)(),a=i.connection.onProgress(fM.type,o,l=>{r.push(...l)});n.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(fM.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},n);r.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(r)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function xk(t,e,n){try{let r=t.get(Ba),i=new Map;r.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof Ck&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof Ck&&(a.resolver.setUpdate(!0),a.resolver.data=n)})}catch(r){ar.error(t,"Failed to set context items on context providers",r)}}s(xk,"setContextItems");var mme={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function cVe(t,e,n){return e.map(i=>{try{if(typeof i=="string")return ka(n.uri,i,mme);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=n.languageId==(i.language||"")),"scheme"in i&&(o&&=ka(n.uri,i.scheme||"",mme)),"pattern"in i&&(o&&=ka(n.uri,i.pattern||"",mme)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(cVe,"match");f();var UOt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),jb=class{constructor(e,n){this.documents=e;this.basename=n}static{s(this,"ExternalTestingCompletionDocuments")}};function qOt(t,e,n){return t.forceSet(jb,new jb(n.documents,n.basename||"")),["OK",null]}s(qOt,"handleTestingSetCompletionDocumentsChecked");var uVe=new Tt("setCompletionDocuments"),fVe=ot(UOt,qOt);function Fz(t,e,n,r){let i=t.get(jb);if(i.documents){let o=r?3:1;if(n&&i.basename&&i.basename.trim().length>0){uVe.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=WOt(i,n);return a&&a.length>0?dVe(a,o,e):void 0}else return uVe.debug(t,"Returning completions for all pre-set documents"),dVe(i.documents,o,e)}}s(Fz,"getTestCompletions");function dVe(t,e,n){return t.slice(0,e).map(r=>{let{cursorLine:i,lines:o,start:a,end:l}=Pz(r,n);return{insertText:[i.slice(Math.min(a.character,n.character))].concat(o.slice(n.line+1)).join(`
`),range:{start:a,end:l}}})}s(dVe,"sliceAndMapCompletions");function WOt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(WOt,"getFilteredDocs");var mVe=I.Object({doc:I.Object({position:Fl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:f8,version:I.Number()}),contextItems:I.Optional(Wie)}),P6;async function hVe(t,e,n,r){P6&&(P6.cancel(),P6.dispose()),P6=new sr.CancellationTokenSource;let i=new Hd([e,P6.token]);n.contextItems&&xk(t,n.contextItems);let o=Fz(t,n.doc.position,n.doc.uri,r);if(o)return[{completions:o.map(m=>({uuid:an(),text:m.insertText,displayText:m.insertText,position:n.doc.position,range:m.range,docVersion:n.doc.version}))},null];let a;try{a=await hh(t,n.doc,i)}catch(p){if(!(p instanceof pVe.ResponseError))throw p;switch(p.code){case tr.CopilotNotAvailable:case tr.ContentModified:return[{completions:[]},null]}throw p}let l=n.doc.position,c=await Lz(t,a,l,i,{isCycling:r,formattingOptions:n.doc});if(!c)return[{completions:[]},null];let u=t.get(os);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(hVe,"handleGetCompletionsHelper");var gVe=ot(mVe,(t,e,n)=>hVe(t,e,n,!1)),AVe=ot(mVe,(t,e,n)=>hVe(t,e,n,!0));f();var yVe=qe(Tx()),vk=qe(Za());var GOt=I.Object({doc:I.Object({position:Fl,uri:f8,version:I.Number()}),panelId:I.String()});function HOt(t,e,n,r,i){let o=Bz(i.completionText),a=(0,yVe.SHA256)(o).toString();return t.get(os).set(a,{displayText:i.insertText,insertText:i.completionText,offset:r,uuid:a,range:n,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:n.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:n,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(HOt,"makeSolution");var gme=class{constructor(e,n,r){this.ctx=e;this.params=n;this.range=r;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}onSolution(e){return this.service.connection.sendNotification(new vk.NotificationType("PanelSolution"),HOt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return CVe(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new vk.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function CVe(t,e){return e.connection.sendNotification(new vk.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(CVe,"reportDone");var N6;async function jOt(t,e,n){N6&&(N6.cancel(),N6.dispose()),N6=new sr.CancellationTokenSource;let r=new Hd([e,N6.token]),i=n.doc.position,o=Mo.range(i,i),a=new gme(t,n,o),l=t.get(gh);if(l.documents){let c=l.documents;Nz(i,c,a)}else{let c;try{c=await hh(t,n.doc,r)}catch(d){if(!(d instanceof vk.ResponseError))throw d;switch(d.code){case tr.CopilotNotAvailable:case tr.ContentModified:return VOt(t,n)}throw d}a.offset=c.offsetAt(i);let u=new Ak(c,i,r,10);Dz(t,u,a)}return[{solutionCountTarget:10},null]}s(jOt,"handleGetPanelCompletionsChecked");async function VOt(t,e){return await CVe(e.panelId,t.get(Cn)),[{solutionCountTarget:0},null]}s(VOt,"produceEmptySolutions");var xVe=ot(GOt,jOt);f();var $Ot=I.Object({});function zOt(t,e,n){return[{version:t.get(zi).getDisplayVersion(),buildType:Ag(t),runtimeVersion:`node/${process.versions.node}`},null]}s(zOt,"handleGetVersionChecked");var vVe=ot($Ot,zOt);f();var YOt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function KOt(t,e){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&n.push(`
Current git branch name: ${e}`),t&&n.push(`
Respond in the following locale: ${t}`),n.join(`
`)}s(KOt,"buildSystemMessage");function JOt(t,e){let n=[];return t.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(r=>`- ${r}`).join(`
`),""),t.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(r=>`- ${r}`).join(`
`),""),n.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&n.push("<custom-instructions>",e,"</custom-instructions>"),n.join(`
`)}s(JOt,"buildUserMessage");async function XOt(t,e,n){if(n.changes.length===0)return[null,{code:tr.InvalidRequest,message:"No changes provided"}];let r=new na(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:n.workspaceFolder?n.workspaceFolder:pl(process.cwd())}],a=await lA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(ki),c=l.create({capabilities:{skills:[SA]}}),u=new Lb({message:"",type:"user"});await l.addTurn(c.id,u);let d=pk({workDoneToken:an()});await t.get(_s).begin(c,u,d);let h=(await new Wb(t,c,u,e).skillResolver.resolve(SA))?.head?.name,g=[{role:"system",content:await KOt(n.userLanguage,h)},{role:"user",content:JOt(n,a)}],y=await t.get(Rt).updateExPValuesAndAssignments(),v=await r.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Gd.user("git-commit",an())},e,y);if(v.type!=="success")return[null,{code:tr.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(XOt,"handleGitCommitGenerateChecked");var bVe=ot(YOt,XOt);f();var IVe=xte.type,L6;function EVe(t){return{title:"Completion Accepted",command:u6,arguments:[t]}}s(EVe,"makeCommand");async function ZOt(t,e,n){L6&&(L6.cancel(),L6.dispose());let r=n.context.triggerKind===1;L6=new sr.CancellationTokenSource;let i=L6.token,o=new Hd([e,i]);n.contextItems&&xk(t,n.contextItems,n.data);let a=Fz(t,n.position,n.textDocument.uri,r);if(a)return[{items:a.map(h=>({command:EVe(an()),...h}))},null];let l=await hh(t,n.textDocument,o),c=n.position,u=await Lz(t,l,c,o,{isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(!u)return e.isCancellationRequested?[null,{code:tr.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:tr.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(os);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:EVe(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(ZOt,"handleChecked");var TVe=ot(DU,(t,e,n)=>ZOt(t,e,n));f();var wVe=Ete.type,F6;async function tUt(t,e,n){F6&&(F6.cancel(),F6.dispose());let r=n.context.triggerKind===1;F6=new sr.CancellationTokenSource;let i=F6.token,o=new Hd([e,i]);n.contextItems&&xk(t,n.contextItems);let a=await hh(t,n.textDocument,o),l=await pme(t,Lg(a,n.position),o,{promptOnly:!0,isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(tUt,"handleChecked");var _Ve=ot(DU,(t,e,n)=>tUt(t,e,n));f();f();function Ame(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,n=t.indexOf("-----END CERTIFICATE-----"),r=30,i=t.substring(e,e+r)+"..."+t.substring(n-r,n-1);return bk(i)}s(Ame,"asReadableCert");function bk(t){return t.replace(/\s/g,"")}s(bk,"normalizeNewlines");var rUt=I.Object({});async function iUt(t){return[{certificates:(await t.get(rl).getAllRootCAs()).map(bk)},null]}s(iUt,"handleListCertificatesChecked");var SVe=ot(rUt,iUt);f();async function oUt(t,e,n){let r=t.get(lh);if(n.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=ml(n.textDocument.uri);t.get(Lm).onUserPositionChange(i,new ir(n.position.line,n.position.character));let o=await r.handleNextEditRequest(i,n.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:u6,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(oUt,"handleChecked");var RVe=ot($Ie,oUt);f();var sUt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function aUt(t,e,n){let r=t.get(os),i=r.get(n.uuid);if(i){r.delete(n.uuid);let o=lUt(n,i);_2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(aUt,"notifyAcceptedChecked");function lUt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(lUt,"getSuggestionStatus");var kVe=ot(sUt,aUt);f();var cUt=I.Object({uuids:I.Array(I.String())});function uUt(t,e,n){let r=t.get(os),i=n.uuids.flatMap(o=>r.get(o)??[]);if(i.length>0){let o=i[0];for(let l of n.uuids)r.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));_q(t,"ghostText",o.offset,o.uri,a),t.get(Mu).resetState()}return["OK",null]}s(uUt,"notifyRejectedChecked");var BVe=ot(cUt,uUt);f();var dUt=I.Object({uuid:I.String({minLength:1})});function fUt(t,e,n){let i=t.get(os).get(n.uuid);return i&&RU(t,i.triggerCategory,i),["OK",null]}s(fUt,"notifyShownChecked");var DVe=ot(dUt,fUt);f();var pUt=bRe;function mUt(t,e,n){let r=t.get(Ba),i={unregistered:[],registered:[]};return n.providers.forEach(o=>{try{let a=new Ck(t,o.id,o.selector);r.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(mUt,"registerContextProviders");var PVe=ot(pUt,mUt);f();f();var hUt=I.Object({uri:I.Optional(I.String())}),gUt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),LVe=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[u1e]:I.Optional(hUt),http:I.Optional(OTe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),Cme=Object.keys(LVe.properties).filter(t=>t!=="github"),AUt=I.Intersect([LVe,gUt]),yUt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),NVe=hs.Compile(yUt),yme=hs.Compile(AUt);async function FVe(t,e){if(!NVe.Check(e))throw new Tc(NVe.Errors(e));let n=Array.isArray(e.settings)?{}:e.settings;n&&xme(t,n),await M6(t,n)}s(FVe,"notifyChangeConfiguration");function xme(t,e){for(let i of yme.Errors(e)){let o=i.path.split("/")?.[1];Sc.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!yme.Check(e))throw new Tc(yme.Errors(e));let n=t.get(uh);n.setConfig(wt.ShowEditorCompletions,e.showEditorCompletions),n.setConfig(wt.DelayCompletions,e.delayCompletions),n.setConfig(wt.EnableAutoCompletions,e.enableAutoCompletions),n.setConfig(wt.FilterCompletions,e.filterCompletions),e.http&&vme(t,e.http);let r=e["github-enterprise"];r&&f2e(t,r.uri),e.github?.copilot&&CUt(t,e.github.copilot)}s(xme,"applySettingsToConfiguration");function CUt(t,e){let n=t.get(uh);for(let r of Object.values(wt)){let i=HTe(e,r);n.setConfig(r,i)}typeof e.mcp=="string"&&bUt(t,e.mcp),xUt(t,e.globalCopilotInstructions||""),vUt(t,e.globalGitCommitInstructions||"")}s(CUt,"applyCopilotConfiguration");function xUt(t,e){try{t.get(sA).setGlobalCopilotInstructions(e)}catch(n){Sc.error(t,"Failed to apply global Copilot instructions configuration",n)}}s(xUt,"applyGlobalCopilotInstructionsConfiguration");function vUt(t,e){try{t.get(sA).setGlobalGitCommitInstructions(e)}catch(n){Sc.error(t,"Failed to apply global Git commit instructions configuration",n)}}s(vUt,"applyGlobalGitCommitInstructionsConfiguration");function vme(t,e){let n=t.get(uh);e.proxy===void 0&&(e=UTe(n.env));try{n.setHttpSettings(N8(e))}catch(r){if(!(r instanceof TypeError))throw r;Sc.warn(t,"Invalid proxy URL",e.proxy,r),n.setHttpSettings({proxy:""})}}s(vme,"applyHttpConfiguration");async function bUt(t,e){try{let n=JSON.parse(e||"{}");await t.get(Ap).updateMCPServers(n)}catch(n){Sc.error(t,"Failed to apply MCP configuration",n)}}s(bUt,"applyMCPConfiguration");async function M6(t,e){if(!t.get(Ho).getCapabilities().redirectedTelemetry){let n=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(hd).initialize(n)}await t.get(Gn).primeToken()}s(M6,"initializePostConfigurationDependencies");var MVe=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),EUt=I.Object({editorInfo:MVe,editorPluginInfo:MVe,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function IUt(t,e,n){return t.get(Jn).setEditorAndPluginInfo(n.editorPluginInfo,n.editorInfo),OV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),n.editorConfiguration&&xme(t,n.editorConfiguration),await M6(t,n.editorConfiguration),["OK",null]}s(IUt,"handleSetEditorInfoChecked");var QVe=ot(EUt,IUt);f();var TUt=I.Object({options:I.Optional(I.Object({}))});async function wUt(t,e,n){let r=t.get(Sr).pendingSignIn?.status;if(r===void 0)return[null,{code:tr.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await r,[i,null]}catch(o){return[null,{code:tr.DeviceFlowFailed,message:String(o)}]}finally{t.get(Sr).pendingSignIn=void 0}}s(wUt,"handleSignInConfirmChecked");var OVe=ot(TUt,wUt);f();var _Ut=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function SUt(t,e,n){try{let r=t.get(Sr),i=await r.checkAndUpdateStatus({githubAppId:n.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=n.githubAppId??t.get(Ml).findAppIdToAuthenticate(),a=await t.get(l2).getToken(t,o,r.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(Ml).githubAppId=o,await t.get(Sr).setPersistedSession(c),await t.get(Sr).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Sr).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:JV,title:"Sign in with GitHub",arguments:[]}},null]}catch(r){if(!(r instanceof cs))throw r;return[null,{code:tr.DeviceFlowFailed,message:r.message}]}}s(SUt,"handleSignInInitiateChecked");var bme=ot(_Ut,SUt);f();var RUt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function kUt(t,e,n){let r=n.githubToken,i=n.user,o=n.githubAppId;return await t.get(Sr).setPersistedSession({accessToken:r,login:i,githubAppId:o}),[await t.get(Sr).checkAndUpdateStatus(),null]}s(kUt,"handleSignInWithGithubTokenChecked");var UVe=ot(RUt,kUt);f();var BUt=I.Object({options:I.Optional(I.Object({}))});async function DUt(t,e,n){return await t.get(Sr).deletePersistedSession(),[await t.get(Sr).checkAndUpdateStatus(),null]}s(DUt,"handleSignOutChecked");var qVe=ot(BUt,DUt);f();var PUt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Eme=class extends Error{constructor(n,r){super(n);this.code=r;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function NUt(t,e,n){let r=t.get(zi),i=t.get(Jn).getEditorPluginInfo(),o=n.properties||{},a;n.platform&&n.exception_detail&&EA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:UX(t),sensitive_context:{},deployed_to:r.getBuildType(),platform:n.platform,exception_detail:n.exception_detail},EA.get(i.name)),n.transaction&&(a.transaction=n.transaction),r.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new Eme(n.stacktrace??"N/A",i.name);return l.stack=void 0,wa(t,l,void 0,o,a),["OK",null]}s(NUt,"handleTelemetryExceptionChecked");var WVe=ot(PUt,NUt);f();f();function GVe(t={}){return{accessToken:an(),login:"test login",...t,...zx(t)}}s(GVe,"testGitHubSession");var Mz=class extends Sr{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},Ek=class extends Sr{constructor(n,r="",i){super(n,{});this.githubAppId=r;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};f();function LUt(t){return new kI({token:`test token ${an()}`,refresh_in:0,expires_at:0,...t},void 0)}s(LUt,"createTestCopilotToken");var Q6=class extends Gn{constructor(n){super();this.envelopeFn=n;this.wasReset=!1;this.ghSession=GVe()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(n=>LUt(n)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},Qz=class extends Q6{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},Ik=class extends Qz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var FUt=I.Object({options:I.Optional(I.Object({}))});async function MUt(t,e,n){let r=new Ik("tid=valid-copilot-token");return t.forceSet(Sr,new Ek(t,"",r)),t.get(Gn).resetToken(),t.get(Ji).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(MUt,"handleTestingAlwaysAuthChecked");var HVe=ot(FUt,MUt);f();var QUt=I.Object({messages:I.Array(I.Object({role:I.Enum(yl),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(lr)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function OUt(t,e,n){let r=new na(t),i=await t.get(ra).getBestChatModelConfig([n.modelFamily??lr.CopilotBase]),o=await gD(t,"","");return[await r.fetchResponse({modelConfiguration:i,messages:n.messages,uiKind:"conversationIntegrationTest",stop:n.stop,intentParams:{intent:!0},llmInteraction:Gd.user("test",an())},e,o),null]}s(OUt,"handleChatMLChecked");var jVe=ot(QUt,OUt);f();f();f();var Dk=qe(sze(),1),RXr={ALPN_HTTP2:Dk.default.ALPN_HTTP2,ALPN_HTTP2C:Dk.default.ALPN_HTTP2C,ALPN_HTTP1_1:Dk.default.ALPN_HTTP1_1,ALPN_HTTP1_0:Dk.default.ALPN_HTTP1_0},{fetch:kXr,context:aze,reset:BXr,noCache:DXr,h1:PXr,keepAlive:NXr,h1NoCache:LXr,keepAliveNoCache:FXr,cacheStats:MXr,clearCache:QXr,offPush:OXr,onPush:UXr,createUrl:qXr,timeoutSignal:WXr,Body:GXr,Headers:lze,Request:HXr,Response:jXr,AbortController:VXr,AbortError:oY,AbortSignal:$Xr,FetchBaseError:zXr,FetchError:YXr,ALPN_HTTP2:KXr,ALPN_HTTP2C:JXr,ALPN_HTTP1_1:XXr,ALPN_HTTP1_0:ZXr}=Dk.default;var uze=require("crypto"),dze=require("http"),fze=require("stream"),pze=require("util"),Nk=qe(Sm());var RGt=9e4,kGt=new Nk.ProtocolRequestType("copilot/fetch"),BGt=new Nk.ProtocolRequestType("copilot/fetchCancel"),DGt=new Nk.ProgressType,PGt=new Nk.ProtocolRequestType("copilot/fetchDisconnectAll"),MA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},Pk=class extends Kr{constructor(n){super();this.ctx=n;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${n.get(zi).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Cn).connection.sendRequest(PGt,{})}async fetch(n,r){r.headers||={},r.headers["user-agent"]=this.userAgent;let{signal:i}=r,o=this.ctx.get(Cn).connection,a=(0,uze.randomUUID)(),l=new sr.CancellationTokenSource,c=new fze.PassThrough,u=s(()=>{o.sendRequest(BGt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new oY("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new MA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new oY("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(DGt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new MA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new MA("Request timed out from lsp server"))},r.timeout??RGt),y=s(()=>{h(new oY("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(kGt,LGt(n,a,r),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,pze.inspect)(v.data)}`),h(new MA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new MA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new bx(p.status,dze.STATUS_CODES[p.status]??"",new lze(p.headers),()=>NGt(c),()=>c)}};function NGt(t){return new Promise((e,n)=>{let r="";t.on("error",n),t.on("end",()=>e(r)),t.on("data",i=>r+=String(i))})}s(NGt,"consumeStream");function LGt(t,e,n){let{timeout:r,method:i}=n,o=n.headers??{},a=n.json?JSON.stringify(n.json):n.body;return n.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:r,method:i,workDoneToken:e}}s(LGt,"convertOptionsToParams");var FGt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function MGt(t,e,n){let r=new Pk(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=n;l&&i.abort();let p=r.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof MA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof MA?y.message:String(y)}`},null]}}s(MGt,"handleTestingFetchChecked");var mze=ot(FGt,MGt);f();var QGt=I.Object({});async function OGt(t,e,n){return await t.get(ba).flush(),["OK",null]}s(OGt,"handleTestingFlushPromiseQueueChecked");var hze=ot(QGt,OGt);f();var UGt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function qGt(t,e,n){try{await t.get(xA).start();let r=t.get(PT),i=n.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await r.indexClient.getContext(n.filePath,n.code,n.offset,n.languageId,BU,e)}catch{}finally{l=(n.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(qGt,"handleTestingGetContextChecked");var gze=ot(UGt,qGt);f();var WGt=I.Object({uri:I.String()});async function GGt(t,e,n){let i=await t.get(Tn).getTextDocument(n);return[{uri:n.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(GGt,"handleGetDocumentChecked");var Aze=ot(WGt,GGt);f();var HGt=I.Object({options:I.Optional(I.Object({}))});async function jGt(t,e,n){t.forceSet(Sr,new Mz(t)),t.get(Gn).resetToken();try{await t.get(Gn).getToken()}catch{}return await new Promise(r=>setTimeout(r,0)),["OK",null]}s(jGt,"handleTestingNeverAuthChecked");var yze=ot(HGt,jGt);f();f();f();var nhe=class extends rl{constructor(n){super();this.certificates=n}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},Cze=s(t=>new nhe(t),"createTestCertificateReader");function ihe(t,e,n){let r=new rhe;r.set("x-github-request-id","1");for(let[i,o]of Object.entries(n||{}))r.set(i,o);return new bx(t,"status text",r,()=>Promise.resolve(e??""),()=>null)}s(ihe,"createFakeResponse");function xze(t,e,n){let r;return typeof e=="string"?r=e:r=JSON.stringify(e),ihe(t,r,Object.assign({"content-type":"application/json"},n))}s(xze,"createFakeJsonResponse");var V6=class extends Kr{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var sY=class extends V6{static{s(this,"NoFetchFetcher")}fetch(e,n){throw new Error("NoFetchFetcher does not support fetching")}};var rhe=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,n){this.headers.set(e.toLowerCase(),n)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,n){this.headers.set(e.toLowerCase(),n)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var ohe=class extends V6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,n){return e.endsWith("telemetry")?Promise.resolve(xze(200,this.fullConfig)):Promise.resolve(ihe(404,""))}},aY=class extends ohe{constructor(n,r){super(n);this.delegate=r}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(n,r){return n.endsWith("telemetry")?super.fetch(n,r):this.delegate.fetch(n,r)}};var VGt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function $Gt(t,e,n){if(n.expFlags){let r={AssignmentContext:"assignmentcontext",Parameters:{...n.expFlags}};t.forceSet(Kr,new aY(r,t.get(Kr)))}return["OK",null]}s($Gt,"handleTestingOverrideExpFlagsChecked");var vze=ot(VGt,$Gt);f();var zGt=I.Object({rules:Sie});function YGt(t,e,n){let r=t.get(Ol);return r?(r.setTestingRules(n.rules),["OK",null]):[null,{code:tr.InternalError,message:"Could not set content exclusion rules"}]}s(YGt,"handleTestingSetContentExclusionRulesChecked");var bze=ot(zGt,YGt);f();var KGt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(fk)),options:I.Optional(I.Object({}))});function JGt(t,e,n){return t.get(Vy).add(n.workDoneToken,n.chunks,n.followUp,n.suggestedTitle,n.skills,n.references),["OK",null]}s(JGt,"handleTestingSetSyntheticTurnsChecked");var Eze=ot(KGt,JGt);f();var XGt=I.Object({});async function ZGt(t,e,n){let r=t.get($a),i=t.get(Va);return await r.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(ZGt,"handleTriggerShowMessageChecked");var Ize=ot(XGt,ZGt);f();f();f();f();var Tze=qe(require("tls"));var lY=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(rl)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),r=Tze.createSecureContext({_vscodeAdditionalCaCerts:e}),i=r.context;for(let o of e)i.addCACert(o);return{secureContext:r,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let n=await this.#e;e.secureContext=n.secureContext,e.ca=n.certs,e.cert=n.certs}};var Lk=class extends Kr{constructor(n,r){super();this.name="HelixFetcher";this.certificateConfigurator=new lY(n),this.proxySocketFactory=n.get(iA),this.proxySocketTimeoutForTesting=r?.proxySocketTimeoutForTesting,n.get(mc).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(n,i)}),this.fetchApi=this.createFetchApi(n,n.get(mc).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(n,r){if(!n?.proxy)return;let i=new URL(n.proxy);return async o=>(o.rejectUnauthorized=n.proxyStrictSSL,o.timeout=r,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:n.proxyAuthorization,kerberosServicePrincipal:n.proxyKerberosServicePrincipal}))}createFetchApi(n,r){let i=n.get(zi),o=this.proxySocketTimeoutForTesting;return aze({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(r,o),rejectUnauthorized:r.proxyStrictSSL})}async fetch(n,r){let i=r.signal,o=!1;if(r.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},r.timeout),r.signal?.addEventListener("abort",()=>u.abort()),r.signal?.aborted&&u.abort(),i=u.signal}let a={...r,body:r.body?r.body:r.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(n,a).catch(u=>{throw o?new PB(`Request to <${n}> timed out after ${r.timeout}ms`,u):u});return new bx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var $6=require("fs"),wze=require("path");var Fk=class extends po{static{s(this,"LocalFileSystem")}async readFileString(e){return(await $6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:n,lstat:r,stat:i}=await this.statWithLink(aa(e));return{ctime:n.ctimeMs,mtime:n.mtimeMs,size:n.size,type:this.getFileType(n,r,i)}}async readDirectory(e){let n=aa(e),r=await $6.promises.readdir(n,{withFileTypes:!0}),i=[];for(let o of r){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,wze.join)(n,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let n=await $6.promises.lstat(e);if(n.isSymbolicLink())try{let r=await $6.promises.stat(e);return{lstat:n,stat:r,targetStat:r}}catch{}return{lstat:n,targetStat:n}}getFileType(e,n,r){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),n.isSymbolicLink()&&r&&(i|=64),i}};f();var cY=class extends mh{constructor(n=[]){super();this._agents=n}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var uY=class extends sl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(n){this.shouldInspect()&&this.prompts.push(n)}inspectFetchResult(n){this.shouldInspect()&&this.fetchResults.push(n)}documentDiff(n){this.shouldInspect()&&this.diffs.push(n)}};f();function eHt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(eHt,"fakeChatModelConfiguration");function tHt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(tHt,"fakeEmbeddingModelConfiguration");var dY=class extends ra{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let n=e[0];return Promise.resolve(eHt(n))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(tHt(e))}};f();var fY=class extends hc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Du}static{s(this,"TestUrlOpener")}open(n){return this.openedUrls.push(n),this.opened.resolve(),Promise.resolve()}},pY=class extends $a{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(n){this.actionToPerform=n}showWarningMessage(n,...r){this.sentMessages.push(n);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=r.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=r?Promise.resolve(r[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function _ze(t,e,n,r){return W1.create(a2e(t),e,n,r,e)}s(_ze,"createTextDocument");var she=class extends Tn{constructor(n){super(n);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(n){this._workspaceFolders=n.map(r=>({uri:r.uri,name:r.name??Ti(r.uri)}))}async readTextDocumentFromDisk(n){return super.readTextDocumentFromDisk(n)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(n,r,i){let o=_ze(n,r,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(n,r){let i=this._openTextDocuments.findIndex(a=>a.uri===n.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=_ze(n,o.clientLanguageId,o.version+1,r)}setNotebookDocument(n,r){this._notebookDocuments.set(n.uri.replace(/#.*/,""),r)}findNotebook({uri:n}){return this._notebookDocuments.get(n.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(n){switch(n.eventName){case"focus":this._focusSubscribers.forEach(r=>r(n.args));break;case"change":this._changeSubscribers.forEach(r=>r(n.args));break;case"open":this._openSubscribers.forEach(r=>r(n.args));break;case"close":this._closeSubscribers.forEach(r=>r(n.args));break}}},mY=class extends she{constructor(n){super(n);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(n){return Promise.resolve(this.contents.get(n))}setDiskContents(n,r){this.contents.set(n,r)}};var ahe=class extends Va{static{s(this,"NullLog")}logIt(...e){}};function nHt(t){let e=new C5;return e.set(mc,t),e.set(FI,t),e.set(zi,new zi),e.set(xf,new xf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(rl,Cze([])),e.set(iA,EH(e)),e.set(Cg,new Cg),e.set(xm,new wM),e.set(ym,new ym),e.set(sg,new sg),e.set(lc,new lc(e,"tid=test",!0)),e.set(Ll,new Ll),e.set($a,new pY),e.set(hc,new fY),e.set(yg,new e4),e.set(Va,new ahe),e.set(Iu,new Iu),e.set(Ko,new Ko("test-session","test-machine")),e.set(Tu,new hR(e)),e.set(hd,new hd(e,"copilot-test")),e.set(Rt,new Rt(e)),e.set(Dm,new Dm),e.set(Im,new VS),e.set(Gn,new Ik("tid=test")),e.set(Ji,new IM),e.set(ba,new ba),e.set(wg,new wg(e)),e.set(Fm,Eq(e)),e.set(Mu,new Mu),e.set(Ed,new Ed),e.set(X1,X1.default),e.set(O0,new O0),e.set(Lf,new Lf(e,!1)),e.set(Ml,new Ml),e.set(Cr,new Cr(e)),e.set(E0,new $O),e.set(Ul,new Ul),e.set(Ba,NU(e,async(n,r,i)=>r.find(o=>o==="*")?1:r.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Xf,new Xf(e)),rHt(e),e.set(xd,new xd(e)),e.set(Ho,new Ho),e.set(Ng,new zR),e.set(Jf,new Jf),e}s(nHt,"_createBaselineContext");function rHt(t){t.set(ki,new ki(t)),t.set(_s,new _s(t)),t.set(_c,new _c(t)),t.set(vl,new vl),t.set(ec,new ec),t.set(sl,new uY),t.set(Rp,new Rp(t,[])),t.set(ra,new dY),t.set(mh,new cY),t.set(wA,new wA(t)),t.set(Fb,new Fb),t.set(ga,new ga(t)),t.set(wc,new wc),t.set(Y0,new Y0)}s(rHt,"registerConversation");function Sze(){let t=nHt(new FI(new $S,new Map));return t.set(Kr,new sY),t.set(Jn,new lhe),t.set(Tn,new mY(t)),t.set(po,new Fk),t.set(Ol,new Ol(t)),t.set(il,new il(t)),t.set(Ic,new SH(t)),t.set(zf,new zf(t)),t.set(kg,new B5),t.set(Km,new MH),IV(t),t}s(Sze,"createLibTestingContext");var lhe=class extends Jn{constructor(n={name:"lib-tests-plugin",version:"2"},r={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=n;this.editorInfo=r;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var kze=qe(require("fs"));var Rze=`${process.env.HOME}/.copilot-testing-gh-token`,hY,gY;function Bze(t){let e=new Q6(iHt);t.forceSet(Gn,e)}s(Bze,"setIntegrationTokenManager");var iHt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(gY)return gY;let e=t||process.env.GITHUB_COPILOT_TOKEN||await oHt(),n=Sze(),r=new Lk(n);return n.forceSet(Kr,r),gY=vM(n,{...zx({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new cs('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),gY},"getEnvelope");async function oHt(){try{hY??=(await kze.promises.readFile(Rze)).toString().trim()}catch{hY??=process.env.GITHUB_TOKEN??""}if(!hY)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${Rze}. Run "npm run get_token" to get one.`);return hY}s(oHt,"getTestingGitHubToken");var sHt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function aHt(t,e,n){return Bze(t),t.forceSet(Sr,new Ek(t,n.githubAppId)),["OK",null]}s(aHt,"handleTestingUseTestingTokenChecked");var Dze=ot(sHt,aHt);f();var lHt=I.Object({});async function cHt(t,e,n){return await new ek().uninstall(t),["OK",null]}s(cHt,"handleUninstallChecked");var Pze=ot(lHt,cHt);f();var uHt=ERe;function dHt(t,e,n){let r=t.get(Ba),i={unregistered:[],notUnregistered:[]};return n.providers.forEach(o=>{try{r.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(dHt,"unregisterContextProviders");var Nze=ot(uHt,dHt);f();var che=qe(require("os"));var fHt=I.Object({expectedCertificate:I.String()});async function pHt(t,e,n){let i=(await bH(t).getAllRootCAs()).map(bk),o=bk(n.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Ame(o)}. Only found those installed on the system:${che.EOL}${i.map(a=>"- "+Ame(a)).join(che.EOL)}`},null]}s(pHt,"handleVerifyCertificateChecked");var Lze=ot(fHt,pHt);f();var mHt=I.Object({});async function hHt(){return[{status:!!await new r9().load()},null]}s(hHt,"handleVerifyKerberosChecked");var Fze=ot(mHt,hHt);f();var gHt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function AHt(t,e,n){let i=await t.get(Tn).getTextDocument(n);return i?i.getText()!==n.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${n.source}`},null]:i.version!==n.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${n.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${n.uri}>`},null]}s(AHt,"handleVerifyStateChecked");var Mze=ot(gHt,AHt);f();var yHt=I.Object({});function CHt(t,e,n){return[t.get(Tn).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(CHt,"handleVerifyWorkspaceStateChecked");var Qze=ot(yHt,CHt);var JT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function Oze(){let t=new Map;return t.set(IVe.method,TVe),t.set(wVe.method,_Ve),t.set("getCompletions",gVe),t.set("getCompletionsCycling",AVe),t.set("getPanelCompletions",xVe),t.set(Zje.method,eVe),t.set("getVersion",vVe),t.set("setEditorInfo",QVe),t.set("checkStatus",rGe),t.set("checkQuota",nGe),t.set("checkFileStatus",eGe),t.set("signInInitiate",bme),t.set("signIn",bme),t.set("signInConfirm",OVe),t.set("signInWithGithubToken",UVe),t.set("signOut",qVe),t.set("notifyShown",DVe),t.set("notifyAccepted",kVe),t.set("notifyRejected",BVe),t.set("telemetry/exception",WVe),t.set("textDocument/copilotInlineEdit",RVe),t.set("testing/overrideExpFlags",vze),t.set("testing/alwaysAuth",HVe),t.set("testing/neverAuth",yze),t.set("testing/useTestingToken",Dze),t.set("testing/setCompletionDocuments",fVe),t.set("testing/setPanelCompletionDocuments",Jje),t.set("testing/triggerShowMessageRequest",Ize),t.set("testing/flushPromiseQueue",hze),t.set("testing/getDocument",Aze),t.set("testing/chatml",jVe),t.set("testing/setSyntheticTurns",Eze),t.set("testing/fetch",mze),t.set("testing/setContentExclusionRules",bze),t.set("testing/setCopilotEditsResponse",Oje),t.set("testing/getContext",gze),t.set("uninstall",Pze),t.set("debug/diagnostics",oVe),t.set("debug/listCertificates",SVe),t.set("debug/verifyState",Mze),t.set("debug/verifyCertificate",Lze),t.set("debug/verifyKerberos",Fze),t.set("debug/verifyWorkspaceState",Qze),t.set("context/registerProviders",PVe),t.set("context/unregisterProviders",Nze),t.set("conversation/preconditions",Dje),t.set("conversation/persistence",Rje),t.set("conversation/create",wje),t.set("conversation/turn",Fje),t.set("conversation/turnDelete",Mje),t.set("conversation/destroy",_je),t.set("conversation/rating",Pje),t.set("conversation/copyCode",lje),t.set("conversation/insertCode",cje),t.set("conversation/templates",Lje),t.set("conversation/agents",aje),t.set("conversation/registerTools",Nje),t.set("conversation/notifyCodeAcceptance",Sje),t.set("copilot/models",Vje),t.set("copilot/setModelPolicy",$je),t.set("copilot/codeReview",Qje),t.set("git/commitGenerate",bVe),t.set("editConversation/create",Uje),t.set("editConversation/turn",Wje),t.set("editConversation/turnDelete",Gje),t.set("editConversation/destroy",qje),t.set("mcp/getTools",Hje),t.set("mcp/updateToolsStatus",jje),new JT(t)}s(Oze,"getAllMethods");f();f();f();var Uze=qe(Sm());var QA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new Uze.NotificationType(this.name)}};var uhe=class extends QA{constructor(){super(...arguments);this.name=gte.method;this.params=LIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(n){let r=this.ctx.get(Sr);n?.handle&&n?.accessToken?r.setTransientSession({accessToken:n.accessToken,login:n.handle,githubAppId:n.githubAppId}):r.setTransientSession(null)}},qze=[uhe];f();var dhe=class extends QA{constructor(){super(...arguments);this.name=vte.method;this.params=GIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],o=this.ctx.get(os).get(r);o&&x3e(this.ctx,o)}},fhe=class extends QA{constructor(){super(...arguments);this.name=Ite.method;this.params=zIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(n){let r=n.item.command.arguments[0];await this.ctx.get(lh).handleShown(r)}},phe=class extends QA{constructor(){super(...arguments);this.name=bte.method;this.params=HIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],i=n.acceptedLength,o=this.ctx.get(os),a=o.get(r);a&&(o.delete(r),i>=a.insertText.length?Sq(this.ctx,a):v3e(this.ctx,a,i))}},Wze=[dhe,fhe,phe];f();var AY=class extends QA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(n){this.ctx.get(zu).cancel(n.token)}};var xHt=[...qze,...Wze,AY];function Gze(t,e){for(let n of xHt){let r=new n(t),i=hs.Compile(r.params);e.onNotification(r.type,Vc(t,async o=>{Qy(o),i.Check(o)?await r.handle(o):Sc.error(t,`Notification ${r.name}:`,new Tc(i.Errors(o)))},`Notification ${r.name}`))}}s(Gze,"registerNotifications");f();var jze=qe(require("events")),yY=qe(Za());var Hze=new Tt("AgentTextDocumentConfiguration"),mhe=class{constructor(e){this.ctx=e;this.emitter=new jze.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,n,r,i){try{return W1.create(e,n,r,i)}catch(o){throw Hze.exception(this.ctx,o,".create"),o}}update(e,n,r){try{let i=[];for(let a of n)if(yY.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:r},contentChanges:i};return this.emitter.emit("change",o),W1.withChanges(e,n,r)}catch(i){throw Hze.exception(this.ctx,i,".update"),i}}},Yb=class extends Tn{constructor(n){super(n);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((n,r,i)=>(this.didFocusTextDocumentListeners.includes(n)||this.didFocusTextDocumentListeners.push(n),this.connection.onNotification(Cte.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(r,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new mhe(n),this._notebookDocuments=new yY.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(Cn).connection}init(n){this.connection.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(ml(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=ml(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(r=>{let i=ml(r.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...n)}didChangeWorkspaceFolders(n){n.added.forEach(r=>this.registerWorkspaceFolder(r)),n.removed.forEach(r=>this.unregisterWorkspaceFolder(r))}unregisterWorkspaceFolder(n){let r=this.workspaceFolders.findIndex(i=>i.uri===n.uri);r>=0&&this.workspaceFolders.splice(r,1)}registerWorkspaceFolder(n){this.workspaceFolders.push(n)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(n){return this._documents.get(ml(n.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(n){let r=this._notebookDocuments.findNotebookDocumentForCell(n.uri);if(r)return{getCells:s(()=>r.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=r.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(r.cells[o],o):void 0},"getCellFor")}}wrapCell(n,r){let i=this._notebookDocuments.getCellTextDocument(n);if(i)return{kind:n.kind,metadata:n.metadata??{},index:r,document:i}}};var Vze=hs.Compile(UIe);function Qy(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Qy(t[e]);else if(typeof t=="object"){let e=t;for(let n in e)e[n]===null?delete e[n]:e[n]=Qy(e[n])}return t}}s(Qy,"purgeNulls");var Cn=class{constructor(e,n){this.ctx=e;this.connection=n;this.initialized=!1;this.#i=this.ctx.get(Va)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,n=this.connection;n.onRequest(this.messageHandler.bind(this)),Gze(e,n);let r={name:"GitHub Copilot Language Server",version:e.get(zi).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await n.workspace.getConfiguration(["github.copilot",...Cme].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of Cme)d[p]=u.shift();c.settings=d}return FVe(e,Qy(c))}catch(u){Sc.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Yb).didChangeWorkspaceFolders(c),e.get(O0).emit(c)}catch(u){Sc.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),n.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Qy(c.initializationOptions);if(d){if(!Vze.Check(d))throw new Tc(Vze.Errors(d));let g=d,y=e.get(Jn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):Sc.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Ml).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await qke(e)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Yb).init(c.workspaceFolders??[]),Rke(this.ctx),e.get(O0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Ho).setCapabilities(u),"openURL"in u&&OV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,Sc.info(e,`${r.name} ${r.version} initialized`),p&&n.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await M6(e),this.installationTelemetryTimer=setTimeout(()=>{new ek().startup(e).catch(()=>{})},1e3),e.get(Oy).emit())},"onInitialized");return n.onInitialized(Vc(e,h,"onInitialized")),e.get(dh).init(),u?.token&&e.get(Sr).setTransientSession(null),u?.redirectedTelemetry&&await XWe(e),$ze.lt(process.versions.node,"20.8.0")&&Sc.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Ch.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:jWe(e,n)},inlineCompletionProvider:{}},serverInfo:r}}),n.onShutdown(async()=>{await(this.#e??=this.deactivate())}),n.onExit(()=>void this.onExit()),n.onDidChangeConfiguration(Vc(e,o,"onDidChangeConfiguration")),n.listen();let l=new ZV;this.ctx.forceSet(Va,l)}async messageHandler(e,n,r){let i=this.ctx.get(JT).handlers.get(e);if(!i)return new Ch.ResponseError(tr.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Ch.ResponseError(tr.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Ch.ResponseError(tr.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!zWe(this.ctx.get(Jn)))throw new Ch.ResponseError(tr.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(n)&&(n=n[0]),Qy(n);try{let[o,a]=await i(this.ctx,r,n);return a?new Ch.ResponseError(a.code,a.message,a.data):o}catch(o){if(r.isCancellationRequested)return new Ch.ResponseError(tr.RequestCancelled,"Request was canceled");if(o instanceof cs)return new Ch.ResponseError(tr.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof Ch.ResponseError||Sc.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(ch).dispose()}catch(e){Sc.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Va,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),joe(e),await Promise.race([new Promise(n=>setTimeout(n,100)),e.get(ba).flush()]),await Promise.race([new Promise(n=>setTimeout(n,1800)),e.get(Ll).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},Sc=new Tt("lsp");var CY=class t extends T2{constructor(n){super(n);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Cn)}static mapProviderNameToNeighboringFileType(n){let r="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(n){case r:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(n){let r={entries:[],traits:n.traits};for(let i of n.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};r.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),gl.warn(this.context,`unknown providerName ${i.providerName}`))}return r}async getRelatedFilesResponse(n,r,i){gl.debug(this.context,`Fetching related files for ${n.uri}`);let o=this.context.get(Ho).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,r,o),!o)return gl.debug(this.context,"`copilot/related` not supported"),Bke;try{let a=await this.service.connection.sendRequest(Tte.type,{textDocument:{uri:n.uri},data:n.data,telemetry:{properties:r.properties,measurements:r.measurements}},i);return this.convert(a)}catch(a){gl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(n,r,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(n,"copilotRelated.hasRelatedCapability",r)}catch(o){gl.exception(n,o,"copilotRelated")}}};f();var zze=qe(Za());var xY=new Tt("copilotTokenManager"),hhe=class t extends WS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new zze.ProtocolRequestType("copilot/token")}constructor(e,n=!1){super(e,n)}async fetchCopilotToken(){let e=this.ctx.get(Cn).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let n=await e.sendRequest(t.RequestType,{force:!1});if(!n?.envelope)throw xY.debug(this.ctx,"Envelope missing from copilot/token response"),new Df({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:r,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=n;if(xY.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new cs("Expired token in copilot/token response");if(i&&r){let u;if(l!==void 0){try{let d=new URL(l);d.protocol==="https:"&&d.hostname.startsWith("api.")?u=d.origin:xY.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}catch{xY.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(Tu).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Sr).setTransientSession({accessToken:r,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Df({reason:"NotSignedIn"});let c=new kI(a,void 0);return m8(this.ctx,c),c}catch(n){throw n instanceof Error?new cs(n.message,n):n}}},z6=class extends Gn{constructor(n,r=new WS(n,!0)){super();this.ctx=n;this.fallback=r;this.client=new hhe(n,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Ho).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(n){this.getDelegate().resetToken(n)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var vHt=new Tt("Public Code References"),vY=class extends E0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,n){let r=n.location?.start.line!==void 0?n.location.start.line+1:"-",i=n.location?.start.character!==void 0?n.location.start.character+1:"-",o=(n.matchingText??"").replace(/[\r\n]/g," ");vHt.info(e,`Text found matching public code in ${n.inDocumentUri} [Ln ${r}, Col ${i}] near ${o}...:`+n.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(n.version===void 0||n.location===void 0)&&e.get(Ho).getCapabilities().ipCodeCitation===!0&&await e.get(Cn).connection.sendNotification(Ate.type,{uri:n.inDocumentUri,version:n.version,range:n.location,matchingText:n.matchingText??"",citations:n.details})}};f();f();function Yze(t){bHt(t)}s(Yze,"activateExtensibilityPlatformFeature");function bHt(t){t.set(mh,new hz(t)),t.set(wA,new wA(t))}s(bHt,"registerContextDependencies");f();var Kze=I.String(),ghe=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(EY,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},EY="build-logs",bY=class extends Xl{static{s(this,"BuildLogsSkill")}constructor(e){super(EY,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,n=>new ghe(n))}};f();var Ahe=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.filterDirectoryReferences(e);if(n.length===0)return;let r=await Cz(this.turnContext.ctx,this.turnContext.cancelationToken,n);if(r.length>0){let i=[[new Dt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of r)i.push([new Dt([o]),1]);return new Dt(i)}}filterDirectoryReferences(e){return e.filter(n=>n.type==="directory")}},yhe=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},EHt="directory-references",IY=class{constructor(){this.id=EHt;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new yhe}processor(e){return new Ahe(e)}};f();var IHt=I.Object({uri:I.String(),visibleRange:I.Optional(_a),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),Jze=I.Object({files:I.Array(IHt)}),THt=3,Che=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let n=await this.getDocuments(e);if(n.length>0){let r=this.toElidableDocs(n),i=Qb(r,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let n=this.sortFiles(e.files);n=this.filterIncludedDocs(n);let r=this.turnContext.ctx.get(Cr),i=[];for(let o of n){let a=await r.getOrReadTextDocument(o),l=Cs(a);if(await this.turnContext.collectFile(wY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===THt))break}return i.reverse()}sortFiles(e){return e.sort((n,r)=>n.activeAt&&r.activeAt?new Date(n.activeAt).getTime()-new Date(r.activeAt).getTime():n.activeAt?-1:r.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(n=>!this.turnContext.isFileIncluded(n.uri))}toElidableDocs(e){return e.map(n=>{let[r,i]=n,o=this.turnContext.ctx.get(Cr).getRelativePath(r),a=new _A(r,void 0,i.visibleRange);return new Dt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Dt([r])}},wY="recent-files",TY=class extends Xl{static{s(this,"RecentFilesSkill")}constructor(e){super(wY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,n=>new Che(n))}};f();var Xze=I.String(),xhe=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(SY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},SY="runtime-logs",_Y=class extends Xl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(SY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,n=>new xhe(n))}};f();var RY=qe(Sm());var kY=class extends sl{constructor(n){super();this.ctx=n}static{s(this,"AgentConversationInspector")}shouldInspect(){return jL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Cn).connection}async inspectPrompt(n){return this.connection?.sendNotification(new RY.NotificationType("conversation/inspectPrompt"),n)}async inspectFetchResult(n){return this.connection?.sendNotification(new RY.NotificationType("conversation/inspectFetchResult"),n)}async documentDiff(n){return this.connection?.sendNotification(new RY.NotificationType("conversation/documentDiff"),n)}};f();var Zze=qe(Za());var Y6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Rp).onChange(n=>{this.sendNotification(n)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Cn).connection.sendNotification(new Zze.NotificationType(this.notificationEndpoint),e)}};function eYe(t){wHt(t),_Ht(t),Yze(t)}s(eYe,"activateConversationFeature");function wHt(t){t.set(ki,new ki(t)),t.set(ec,new ec),t.set(_c,new _c(t)),t.set(ra,new FH(t)),t.set(Vy,new Vy),t.set(_s,new _s(t)),t.set(Rp,new Rp(t)),t.set(Y6,new Y6(t)),t.set(wu,new DM(t,new BM(t))),t.set($y,new $y),t.set(Fb,new Fb),t.set(sl,new kY(t)),t.set(ga,new ga(t)),t.set(wc,new wc),t.set(Y0,new Y0)}s(wHt,"registerContextDependencies");function _Ht(t){let e=new vl;e.registerSkill(new C$(new y$(t))),e.registerSkill(new j$(new $u(t,PA,KHe))),e.registerSkill(new v$(new $u(t,fh,WGe))),e.registerSkill(new r$(new $u(t,cu,uGe))),e.registerSkill(new V$),e.registerSkill(new IY),e.registerSkill(new TY(new $u(t,wY,Jze))),e.registerSkill(new i$(new $u(t,SA,fGe))),e.registerSkill(new E$(new $u(t,Ob,XGe))),e.registerSkill(new _Y(new $u(t,SY,Xze))),e.registerSkill(new bY(new $u(t,EY,Kze))),e.registerSkill(new T$(new $u(t,ph,ZGe))),e.registerSkill(new w$(new $u(t,MT,tHe))),t.set(vl,e)}s(_Ht,"registerSkills");f();var tYe=qe(ri());var BY=class extends Ic{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,n){await this.ctx.get(Cn).connection.sendProgress(new tYe.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...n}])}};f();var nYe=qe(Za()),rYe=qe(Sm());var DY=class extends oA{constructor(){super(...arguments);this.requestType=new nYe.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=hs.Compile(LUe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new rYe.ResponseError(c.code,c.message,c.data);throw Fn.error(this.ctx,`ResponseError while invoking client tool confirmation ${r.name}`,u),new Error(`Failed to invoke client tool confirmation ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Tc(this.typeCheck.Errors(o));return o}};f();var iYe=qe(Za()),oYe=qe(Sm());var PY=class extends ob{constructor(){super(...arguments);this.requestType=new iYe.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=hs.Compile(NUe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new oYe.ResponseError(c.code,c.message,c.data);throw Fn.error(this.ctx,`ResponseError while invoking client tool ${r.name}`,u),new Error(`Failed to invoke client tool ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Tc(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(n){let r=n.content.map(i=>typeof i.value=="string"?new Ci(i.value):new RT(i.value));return new Hi(r,n.status??"success")}};f();f();function sYe(t,e,n){try{let r=t.get(Rt).javaContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return ar.debug(t,"Failed to get the active Java experiments for the Context Provider API",r),!1}return!0}s(sYe,"fillInJavaActiveExperiments");var vhe=qe(Sm());var SHt={type:new vhe.NotificationType("featureFlagsNotification")},RHt={type:new vhe.NotificationType("copilot/didChangeFeatureFlags")},K6=class{constructor(e){this.ctx=e;Ps(e,n=>this.sendNotification(n))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let n=this.ctx,i=await n.get(Rt).updateExPValuesAndAssignments(),o={};n.get(Rt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Vie(n,i);a.length>0&&(o.ExpContextProviders=a);let l=new Map;pRe(n,a,l,i),kU(n,l,i),sYe(n,l,i);for(let[d,p]of l.entries())o[d]=p;let c=n.get(Ho),u=n.get(Cn).connection;if(c.getCapabilities().didChangeFeatureFlags)await u.sendNotification(RHt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let d={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(d.xc=!0),await u.sendNotification(SHt.type,d)}}};f();var NY=class extends Ji{constructor(n){super();this.ctx=n;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(n){let r=n.kind;n.busy&&r!=="Error"&&(r="InProgress"),this.ctx.get(Cn).connection.sendNotification(wte.type,{busy:n.busy,kind:n.kind,status:r,message:n.message??""}),this.ctx.get(Cn).connection.sendNotification("didChangeStatus",{busy:n.busy,kind:n.kind,message:n.message})}};f();var aYe=new Fk;f();f();f();f();var Oo=new Tt("CopilotMCP");async function bhe(t,e){await t.get(Km).notifyLog(e)}s(bhe,"notifyMCPRuntimeLog");async function OA(t,e){await bhe(t,{...e,level:"error"})}s(OA,"notifyMCPRuntimeError");async function XT(t,e){await bhe(t,{...e,level:"warning"})}s(XT,"notifyMCPRuntimeWarning");async function fu(t,e){await bhe(t,{...e,level:"info"})}s(fu,"notifyMCPRuntimeInfo");f();var Ehe=/[^a-z0-9_-]/gi;var kHt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function lYe(){let t={};for(let e of kHt){let n=process.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(lYe,"getDefaultEnvironment");async function cYe(t,e,n){if(!e.description){let r=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Oo.warn(t,r),await XT(t,{message:r,server:n,tool:e.name}),e.description="<empty>"}if(Ehe.lastIndex=0,Ehe.test(e.name)){let r=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Oo.warn(t,r),await XT(t,{message:r,server:n,tool:e.name}),e._nameForModel=e.name.replace(Ehe,"_")}else e._nameForModel=e.name;return e}s(cYe,"normalizeTool");var LY=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let n="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),r=n;for(let i=2;this.seenPrefixes.has(r);i++)r=n+i;return this.seenPrefixes.add(r),r}};f();f();f();f();var io;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function n(i){throw new Error}s(n,"assertNever"),t.assertNever=n,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(r,"joinValues"),t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(io||(io={}));var The;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(The||(The={}));var pn=io.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zy=s(t=>{switch(typeof t){case"undefined":return pn.undefined;case"string":return pn.string;case"number":return isNaN(t)?pn.nan:pn.number;case"boolean":return pn.boolean;case"function":return pn.function;case"bigint":return pn.bigint;case"symbol":return pn.symbol;case"object":return Array.isArray(t)?pn.array:t===null?pn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pn.promise:typeof Map<"u"&&t instanceof Map?pn.map:typeof Set<"u"&&t instanceof Set?pn.set:typeof Date<"u"&&t instanceof Date?pn.date:pn.object;default:return pn.unknown}},"getParsedType"),St=io.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),BHt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),X0=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},r={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,io.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};X0.create=t=>new X0(t);var Ok=s((t,e)=>{let n;switch(t.code){case St.invalid_type:t.received===pn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,io.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:n=`Unrecognized key(s) in object: ${io.joinValues(t.keys,", ")}`;break;case St.invalid_union:n="Invalid input";break;case St.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${io.joinValues(t.options)}`;break;case St.invalid_enum_value:n=`Invalid enum value. Expected ${io.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:n="Invalid function arguments";break;case St.invalid_return_type:n="Invalid function return type";break;case St.invalid_date:n="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:io.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case St.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case St.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case St.custom:n="Invalid input";break;case St.invalid_intersection_types:n="Intersection results could not be merged";break;case St.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:n="Number must be finite";break;default:n=e.defaultError,io.assertNever(t)}return{message:n}},"errorMap"),pYe=Ok;function DHt(t){pYe=t}s(DHt,"setErrorMap");function FY(){return pYe}s(FY,"getErrorMap");var MY=s(t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),PHt=[];function tn(t,e){let n=FY(),r=MY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ok?void 0:Ok].filter(i=>!!i)});t.common.issues.push(r)}s(tn,"addIssueToContext");var pu=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return Lr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let o=await i.key,a=await i.value;r.push({key:o,value:a})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Lr;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}},Lr=Object.freeze({status:"aborted"}),Qk=s(t=>({status:"dirty",value:t}),"DIRTY"),Yu=s(t=>({status:"valid",value:t}),"OK"),whe=s(t=>t.status==="aborted","isAborted"),_he=s(t=>t.status==="dirty","isDirty"),ZT=s(t=>t.status==="valid","isValid"),Z6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function QY(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}s(QY,"__classPrivateFieldGet");function mYe(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}s(mYe,"__classPrivateFieldSet");var Nn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Nn||(Nn={}));var J6,X6,Pp=class{static{s(this,"ParseInputLazyPath")}constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},uYe=s((t,e)=>{if(ZT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new X0(t.common.issues);return this._error=n,this._error}}},"handleResult");function ei(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ei,"processCreateParams");var ti=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Zy(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Zy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pu,ctx:{common:e.parent.common,data:e.data,parsedType:Zy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(Z6(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;let i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return uYe(i,o)}"~validate"(e){var n,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return ZT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>ZT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zy(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Z6(i)?i:Promise.resolve(i));return uYe(r,o)}refine(e,n){let r=s(i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:St.custom,...r(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Z0({schema:this,typeName:kr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(n=>this["~validate"](n),"validate")}}optional(){return Dp.create(this,this._def)}nullable(){return qA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tC.create(this)}promise(){return Xb.create(this,this._def)}or(e){return sw.create([this,e],this._def)}and(e){return aw.create(this,e,this._def)}transform(e){return new Z0({...ei(this._def),schema:this,typeName:kr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new fw({...ei(this._def),innerType:this,defaultValue:n,typeName:kr.ZodDefault})}brand(){return new eN({typeName:kr.ZodBranded,type:this,...ei(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new pw({...ei(this._def),innerType:this,catchValue:n,typeName:kr.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return tN.create(this,e)}readonly(){return mw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},NHt=/^c[^\s-]{8,}$/i,LHt=/^[0-9a-z]+$/,FHt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MHt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QHt=/^[a-z0-9_-]{21}$/i,OHt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,UHt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qHt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WHt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ihe,GHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,HHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$Ht=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,hYe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",YHt=new RegExp(`^${hYe}$`);function gYe(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(gYe,"timeRegexSource");function KHt(t){return new RegExp(`^${gYe(t)}$`)}s(KHt,"timeRegex");function AYe(t){let e=`${hYe}T${gYe(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}s(AYe,"datetimeRegex");function JHt(t,e){return!!((e==="v4"||!e)&&GHt.test(t)||(e==="v6"||!e)&&jHt.test(t))}s(JHt,"isValidIP");function XHt(t,e){if(!OHt.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(XHt,"isValidJWT");function ZHt(t,e){return!!((e==="v4"||!e)&&HHt.test(t)||(e==="v6"||!e)&&VHt.test(t))}s(ZHt,"isValidCidr");var Kb=class t extends ti{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pn.string){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.string,received:o.parsedType}),Lr}let r=new pu,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")qHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"email",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Ihe||(Ihe=new RegExp(WHt,"u")),Ihe.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"emoji",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")MHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"uuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")QHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"nanoid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")NHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")LHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid2",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")FHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ulid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tn(i,{validation:"url",code:St.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"regex",code:St.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?AYe(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?YHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?KHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?UHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"duration",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?JHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ip",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?XHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"jwt",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?ZHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cidr",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?$Ht.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?zHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64url",code:St.invalid_string,message:o.message}),r.dirty()):io.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:St.invalid_string,...Nn.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Nn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Nn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Nn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Nn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Nn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Nn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Nn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Nn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Nn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Nn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Nn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Nn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Nn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Nn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Nn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Nn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Nn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Nn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Nn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Nn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Nn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Nn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Nn.errToObj(n)})}nonempty(e){return this.min(1,Nn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Kb.create=t=>{var e;return new Kb({checks:[],typeName:kr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};function ejt(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(ejt,"floatSafeRemainder");var ew=class t extends ti{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pn.number){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.number,received:o.parsedType}),Lr}let r,i=new pu;for(let o of this._def.checks)o.kind==="int"?io.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?ejt(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_finite,message:o.message}),i.dirty()):io.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Nn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Nn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Nn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Nn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Nn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Nn.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&io.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};ew.create=t=>new ew({checks:[],typeName:kr.ZodNumber,coerce:t?.coerce||!1,...ei(t)});var tw=class t extends ti{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pn.bigint)return this._getInvalidInput(e);let r,i=new pu;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):io.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.bigint,received:n.parsedType}),Lr}gte(e,n){return this.setLimit("min",e,!0,Nn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Nn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Nn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Nn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Nn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nn.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};tw.create=t=>{var e;return new tw({checks:[],typeName:kr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};var nw=class extends ti{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pn.boolean){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.boolean,received:r.parsedType}),Lr}return Yu(e.data)}};nw.create=t=>new nw({typeName:kr.ZodBoolean,coerce:t?.coerce||!1,...ei(t)});var rw=class t extends ti{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pn.date){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.date,received:o.parsedType}),Lr}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_date}),Lr}let r=new pu,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):io.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Nn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Nn.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};rw.create=t=>new rw({checks:[],coerce:t?.coerce||!1,typeName:kr.ZodDate,...ei(t)});var Uk=class extends ti{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==pn.symbol){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.symbol,received:r.parsedType}),Lr}return Yu(e.data)}};Uk.create=t=>new Uk({typeName:kr.ZodSymbol,...ei(t)});var iw=class extends ti{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.undefined,received:r.parsedType}),Lr}return Yu(e.data)}};iw.create=t=>new iw({typeName:kr.ZodUndefined,...ei(t)});var ow=class extends ti{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==pn.null){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.null,received:r.parsedType}),Lr}return Yu(e.data)}};ow.create=t=>new ow({typeName:kr.ZodNull,...ei(t)});var Jb=class extends ti{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Yu(e.data)}};Jb.create=t=>new Jb({typeName:kr.ZodAny,...ei(t)});var eC=class extends ti{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Yu(e.data)}};eC.create=t=>new eC({typeName:kr.ZodUnknown,...ei(t)});var xh=class extends ti{static{s(this,"ZodNever")}_parse(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.never,received:n.parsedType}),Lr}};xh.create=t=>new xh({typeName:kr.ZodNever,...ei(t)});var qk=class extends ti{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.void,received:r.parsedType}),Lr}return Yu(e.data)}};qk.create=t=>new qk({typeName:kr.ZodVoid,...ei(t)});var tC=class t extends ti{static{s(this,"ZodArray")}_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==pn.array)return tn(n,{code:St.invalid_type,expected:pn.array,received:n.parsedType}),Lr;if(i.exactLength!==null){let a=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(a||l)&&(tn(n,{code:a?St.too_big:St.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(tn(n,{code:St.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(tn(n,{code:St.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>i.type._parseAsync(new Pp(n,a,n.path,l)))).then(a=>pu.mergeArray(r,a));let o=[...n.data].map((a,l)=>i.type._parseSync(new Pp(n,a,n.path,l)));return pu.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Nn.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Nn.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Nn.toString(n)}})}nonempty(e){return this.min(1,e)}};tC.create=(t,e)=>new tC({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kr.ZodArray,...ei(e)});function Mk(t){if(t instanceof jd){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=Dp.create(Mk(r))}return new jd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof tC?new tC({...t._def,type:Mk(t.element)}):t instanceof Dp?Dp.create(Mk(t.unwrap())):t instanceof qA?qA.create(Mk(t.unwrap())):t instanceof UA?UA.create(t.items.map(e=>Mk(e))):t}s(Mk,"deepPartialify");var jd=class t extends ti{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=io.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==pn.object){let u=this._getOrReturnCtx(e);return tn(u,{code:St.invalid_type,expected:pn.object,received:u.parsedType}),Lr}let{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof xh&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Pp(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof xh){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tn(i,{code:St.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Pp(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>pu.mergeObjectSync(r,u)):pu.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Nn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((n,r)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Nn.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:kr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};return io.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}omit(e){let n={};return io.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}deepPartial(){return Mk(this)}partial(e){let n={};return io.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new t({...this._def,shape:s(()=>n,"shape")})}required(e){let n={};return io.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Dp;)o=o._def.innerType;n[r]=o}}),new t({...this._def,shape:s(()=>n,"shape")})}keyof(){return yYe(io.objectKeys(this.shape))}};jd.create=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:xh.create(),typeName:kr.ZodObject,...ei(e)});jd.strictCreate=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:xh.create(),typeName:kr.ZodObject,...ei(e)});jd.lazycreate=(t,e)=>new jd({shape:t,unknownKeys:"strip",catchall:xh.create(),typeName:kr.ZodObject,...ei(e)});var sw=class extends ti{static{s(this,"ZodUnion")}_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new X0(l.ctx.common.issues));return tn(n,{code:St.invalid_union,unionErrors:a}),Lr}if(s(i,"handleResults"),n.common.async)return Promise.all(r.map(async o=>{let a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of r){let u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new X0(c));return tn(n,{code:St.invalid_union,unionErrors:l}),Lr}}get options(){return this._def.options}};sw.create=(t,e)=>new sw({options:t,typeName:kr.ZodUnion,...ei(e)});var Xy=s(t=>t instanceof lw?Xy(t.schema):t instanceof Z0?Xy(t.innerType()):t instanceof cw?[t.value]:t instanceof uw?t.options:t instanceof dw?io.objectValues(t.enum):t instanceof fw?Xy(t._def.innerType):t instanceof iw?[void 0]:t instanceof ow?[null]:t instanceof Dp?[void 0,...Xy(t.unwrap())]:t instanceof qA?[null,...Xy(t.unwrap())]:t instanceof eN||t instanceof mw?Xy(t.unwrap()):t instanceof pw?Xy(t._def.innerType):[],"getDiscriminator"),OY=class t extends ti{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.object)return tn(n,{code:St.invalid_type,expected:pn.object,received:n.parsedType}),Lr;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Lr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let o of n){let a=Xy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:kr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ei(r)})}};function She(t,e){let n=Zy(t),r=Zy(e);if(t===e)return{valid:!0,data:t};if(n===pn.object&&r===pn.object){let i=io.objectKeys(e),o=io.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=She(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===pn.array&&r===pn.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=She(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===pn.date&&r===pn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(She,"mergeValues");var aw=class extends ti{static{s(this,"ZodIntersection")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=s((o,a)=>{if(whe(o)||whe(a))return Lr;let l=She(o.value,a.value);return l.valid?((_he(o)||_he(a))&&n.dirty(),{status:n.value,value:l.data}):(tn(r,{code:St.invalid_intersection_types}),Lr)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};aw.create=(t,e,n)=>new aw({left:t,right:e,typeName:kr.ZodIntersection,...ei(n)});var UA=class t extends ti{static{s(this,"ZodTuple")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.array)return tn(r,{code:St.invalid_type,expected:pn.array,received:r.parsedType}),Lr;if(r.data.length<this._def.items.length)return tn(r,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Lr;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...r.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Pp(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>pu.mergeArray(n,a)):pu.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};UA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new UA({items:t,typeName:kr.ZodTuple,rest:null,...ei(e)})};var UY=class t extends ti{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.object)return tn(r,{code:St.invalid_type,expected:pn.object,received:r.parsedType}),Lr;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in r.data)i.push({key:o._parse(new Pp(r,l,r.path,l)),value:a._parse(new Pp(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?pu.mergeObjectAsync(n,i):pu.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ti?new t({keyType:e,valueType:n,typeName:kr.ZodRecord,...ei(r)}):new t({keyType:Kb.create(),valueType:e,typeName:kr.ZodRecord,...ei(n)})}},Wk=class extends ti{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.map)return tn(r,{code:St.invalid_type,expected:pn.map,received:r.parsedType}),Lr;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new Pp(r,l,r.path,[u,"key"])),value:o._parse(new Pp(r,c,r.path,[u,"value"]))}));if(r.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Lr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Lr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}};Wk.create=(t,e,n)=>new Wk({valueType:e,keyType:t,typeName:kr.ZodMap,...ei(n)});var Gk=class t extends ti{static{s(this,"ZodSet")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.set)return tn(r,{code:St.invalid_type,expected:pn.set,received:r.parsedType}),Lr;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(tn(r,{code:St.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(tn(r,{code:St.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Lr;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}s(a,"finalizeSet");let l=[...r.data.values()].map((c,u)=>o._parse(new Pp(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new t({...this._def,minSize:{value:e,message:Nn.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Nn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};Gk.create=(t,e)=>new Gk({valueType:t,minSize:null,maxSize:null,typeName:kr.ZodSet,...ei(e)});var qY=class t extends ti{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.function)return tn(n,{code:St.invalid_type,expected:pn.function,received:n.parsedType}),Lr;function r(l,c){return MY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,FY(),Ok].filter(u=>!!u),issueData:{code:St.invalid_arguments,argumentsError:c}})}s(r,"makeArgsIssue");function i(l,c){return MY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,FY(),Ok].filter(u=>!!u),issueData:{code:St.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Xb){let l=this;return Yu(async function(...c){let u=new X0([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(r(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return Yu(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new X0([r(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new X0([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:UA.create(e).rest(eC.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||UA.create([]).rest(eC.create()),returns:n||eC.create(),typeName:kr.ZodFunction,...ei(r)})}},lw=class extends ti{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};lw.create=(t,e)=>new lw({getter:t,typeName:kr.ZodLazy,...ei(e)});var cw=class extends ti{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return tn(n,{received:n.data,code:St.invalid_literal,expected:this._def.value}),Lr}return{status:"valid",value:e.data}}get value(){return this._def.value}};cw.create=(t,e)=>new cw({value:t,typeName:kr.ZodLiteral,...ei(e)});function yYe(t,e){return new uw({values:t,typeName:kr.ZodEnum,...ei(e)})}s(yYe,"createZodEnum");var uw=class t extends ti{static{s(this,"ZodEnum")}constructor(){super(...arguments),J6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{expected:io.joinValues(r),received:n.parsedType,code:St.invalid_type}),Lr}if(QY(this,J6,"f")||mYe(this,J6,new Set(this._def.values),"f"),!QY(this,J6,"f").has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{received:n.data,code:St.invalid_enum_value,options:r}),Lr}return Yu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};J6=new WeakMap;uw.create=yYe;var dw=class extends ti{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),X6.set(this,void 0)}_parse(e){let n=io.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pn.string&&r.parsedType!==pn.number){let i=io.objectValues(n);return tn(r,{expected:io.joinValues(i),received:r.parsedType,code:St.invalid_type}),Lr}if(QY(this,X6,"f")||mYe(this,X6,new Set(io.getValidEnumValues(this._def.values)),"f"),!QY(this,X6,"f").has(e.data)){let i=io.objectValues(n);return tn(r,{received:r.data,code:St.invalid_enum_value,options:i}),Lr}return Yu(e.data)}get enum(){return this._def.values}};X6=new WeakMap;dw.create=(t,e)=>new dw({values:t,typeName:kr.ZodNativeEnum,...ei(e)});var Xb=class extends ti{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.promise&&n.common.async===!1)return tn(n,{code:St.invalid_type,expected:pn.promise,received:n.parsedType}),Lr;let r=n.parsedType===pn.promise?n.data:Promise.resolve(n.data);return Yu(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};Xb.create=(t,e)=>new Xb({type:t,typeName:kr.ZodPromise,...ei(e)});var Z0=class extends ti{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tn(r,a),a.fatal?n.abort():n.dirty()},"addIssue"),get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return Lr;let c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Lr:c.status==="dirty"||n.value==="dirty"?Qk(c.value):c});{if(n.value==="aborted")return Lr;let l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?Lr:l.status==="dirty"||n.value==="dirty"?Qk(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Lr:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Lr:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ZT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>ZT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);io.assertNever(i)}};Z0.create=(t,e,n)=>new Z0({schema:t,typeName:kr.ZodEffects,effect:e,...ei(n)});Z0.createWithPreprocess=(t,e,n)=>new Z0({schema:e,effect:{type:"preprocess",transform:t},typeName:kr.ZodEffects,...ei(n)});var Dp=class extends ti{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===pn.undefined?Yu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dp.create=(t,e)=>new Dp({innerType:t,typeName:kr.ZodOptional,...ei(e)});var qA=class extends ti{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===pn.null?Yu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};qA.create=(t,e)=>new qA({innerType:t,typeName:kr.ZodNullable,...ei(e)});var fw=class extends ti{static{s(this,"ZodDefault")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===pn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};fw.create=(t,e)=>new fw({innerType:t,typeName:kr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ei(e)});var pw=class extends ti{static{s(this,"ZodCatch")}_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Z6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new X0(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new X0(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};pw.create=(t,e)=>new pw({innerType:t,typeName:kr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ei(e)});var Hk=class extends ti{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==pn.nan){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.nan,received:r.parsedType}),Lr}return{status:"valid",value:e.data}}};Hk.create=t=>new Hk({typeName:kr.ZodNaN,...ei(t)});var tjt=Symbol("zod_brand"),eN=class extends ti{static{s(this,"ZodBranded")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},tN=class t extends ti{static{s(this,"ZodPipeline")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Lr:o.status==="dirty"?(n.dirty(),Qk(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})},"handleAsync")();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Lr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:kr.ZodPipeline})}},mw=class extends ti{static{s(this,"ZodReadonly")}_parse(e){let n=this._def.innerType._parse(e),r=s(i=>(ZT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return Z6(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};mw.create=(t,e)=>new mw({innerType:t,typeName:kr.ZodReadonly,...ei(e)});function dYe(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}s(dYe,"cleanParams");function CYe(t,e={},n){return t?Jb.create().superRefine((r,i)=>{var o,a;let l=t(r);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=dYe(e,r),m=(d=(u=p.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=dYe(e,r),u=(a=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):Jb.create()}s(CYe,"custom");var njt={object:jd.lazycreate},kr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kr||(kr={}));var rjt=s((t,e={message:`Input not instance of ${t.name}`})=>CYe(n=>n instanceof t,e),"instanceOfType"),xYe=Kb.create,vYe=ew.create,ijt=Hk.create,ojt=tw.create,bYe=nw.create,sjt=rw.create,ajt=Uk.create,ljt=iw.create,cjt=ow.create,ujt=Jb.create,djt=eC.create,fjt=xh.create,pjt=qk.create,mjt=tC.create,hjt=jd.create,gjt=jd.strictCreate,Ajt=sw.create,yjt=OY.create,Cjt=aw.create,xjt=UA.create,vjt=UY.create,bjt=Wk.create,Ejt=Gk.create,Ijt=qY.create,Tjt=lw.create,wjt=cw.create,_jt=uw.create,Sjt=dw.create,Rjt=Xb.create,fYe=Z0.create,kjt=Dp.create,Bjt=qA.create,Djt=Z0.createWithPreprocess,Pjt=tN.create,Njt=s(()=>xYe().optional(),"ostring"),Ljt=s(()=>vYe().optional(),"onumber"),Fjt=s(()=>bYe().optional(),"oboolean"),Mjt={string:s(t=>Kb.create({...t,coerce:!0}),"string"),number:s(t=>ew.create({...t,coerce:!0}),"number"),boolean:s(t=>nw.create({...t,coerce:!0}),"boolean"),bigint:s(t=>tw.create({...t,coerce:!0}),"bigint"),date:s(t=>rw.create({...t,coerce:!0}),"date")},Qjt=Lr,J=Object.freeze({__proto__:null,defaultErrorMap:Ok,setErrorMap:DHt,getErrorMap:FY,makeIssue:MY,EMPTY_PATH:PHt,addIssueToContext:tn,ParseStatus:pu,INVALID:Lr,DIRTY:Qk,OK:Yu,isAborted:whe,isDirty:_he,isValid:ZT,isAsync:Z6,get util(){return io},get objectUtil(){return The},ZodParsedType:pn,getParsedType:Zy,ZodType:ti,datetimeRegex:AYe,ZodString:Kb,ZodNumber:ew,ZodBigInt:tw,ZodBoolean:nw,ZodDate:rw,ZodSymbol:Uk,ZodUndefined:iw,ZodNull:ow,ZodAny:Jb,ZodUnknown:eC,ZodNever:xh,ZodVoid:qk,ZodArray:tC,ZodObject:jd,ZodUnion:sw,ZodDiscriminatedUnion:OY,ZodIntersection:aw,ZodTuple:UA,ZodRecord:UY,ZodMap:Wk,ZodSet:Gk,ZodFunction:qY,ZodLazy:lw,ZodLiteral:cw,ZodEnum:uw,ZodNativeEnum:dw,ZodPromise:Xb,ZodEffects:Z0,ZodTransformer:Z0,ZodOptional:Dp,ZodNullable:qA,ZodDefault:fw,ZodCatch:pw,ZodNaN:Hk,BRAND:tjt,ZodBranded:eN,ZodPipeline:tN,ZodReadonly:mw,custom:CYe,Schema:ti,ZodSchema:ti,late:njt,get ZodFirstPartyTypeKind(){return kr},coerce:Mjt,any:ujt,array:mjt,bigint:ojt,boolean:bYe,date:sjt,discriminatedUnion:yjt,effect:fYe,enum:_jt,function:Ijt,instanceof:rjt,intersection:Cjt,lazy:Tjt,literal:wjt,map:bjt,nan:ijt,nativeEnum:Sjt,never:fjt,null:cjt,nullable:Bjt,number:vYe,object:hjt,oboolean:Fjt,onumber:Ljt,optional:kjt,ostring:Njt,pipeline:Pjt,preprocess:Djt,promise:Rjt,record:vjt,set:Ejt,strictObject:gjt,string:xYe,symbol:ajt,transformer:fYe,tuple:xjt,undefined:ljt,union:Ajt,unknown:djt,void:pjt,NEVER:Qjt,ZodIssueCode:St,quotelessJson:BHt,ZodError:X0});var nN="2025-03-26",EYe=[nN,"2024-11-05","2024-10-07"],WY="2.0",IYe=J.union([J.string(),J.number().int()]),TYe=J.string(),Ojt=J.object({progressToken:J.optional(IYe)}).passthrough(),vh=J.object({_meta:J.optional(Ojt)}).passthrough(),ef=J.object({method:J.string(),params:J.optional(vh)}),rN=J.object({_meta:J.optional(J.object({}).passthrough())}).passthrough(),WA=J.object({method:J.string(),params:J.optional(rN)}),bh=J.object({_meta:J.optional(J.object({}).passthrough())}).passthrough(),GY=J.union([J.string(),J.number().int()]),wYe=J.object({jsonrpc:J.literal(WY),id:GY}).merge(ef).strict(),HY=s(t=>wYe.safeParse(t).success,"isJSONRPCRequest"),_Ye=J.object({jsonrpc:J.literal(WY)}).merge(WA).strict(),SYe=s(t=>_Ye.safeParse(t).success,"isJSONRPCNotification"),RYe=J.object({jsonrpc:J.literal(WY),id:GY,result:bh}).strict(),iN=s(t=>RYe.safeParse(t).success,"isJSONRPCResponse"),Zb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Zb||(Zb={}));var kYe=J.object({jsonrpc:J.literal(WY),id:GY,error:J.object({code:J.number().int(),message:J.string(),data:J.optional(J.unknown())})}).strict(),BYe=s(t=>kYe.safeParse(t).success,"isJSONRPCError"),eE=J.union([wYe,_Ye,RYe,kYe]),gw=bh.strict(),jY=WA.extend({method:J.literal("notifications/cancelled"),params:rN.extend({requestId:GY,reason:J.string().optional()})}),DYe=J.object({name:J.string(),version:J.string()}).passthrough(),Ujt=J.object({experimental:J.optional(J.object({}).passthrough()),sampling:J.optional(J.object({}).passthrough()),roots:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough())}).passthrough(),qjt=ef.extend({method:J.literal("initialize"),params:vh.extend({protocolVersion:J.string(),capabilities:Ujt,clientInfo:DYe})});var Wjt=J.object({experimental:J.optional(J.object({}).passthrough()),logging:J.optional(J.object({}).passthrough()),completions:J.optional(J.object({}).passthrough()),prompts:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough()),resources:J.optional(J.object({subscribe:J.optional(J.boolean()),listChanged:J.optional(J.boolean())}).passthrough()),tools:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough())}).passthrough(),Rhe=bh.extend({protocolVersion:J.string(),capabilities:Wjt,serverInfo:DYe,instructions:J.optional(J.string())}),PYe=WA.extend({method:J.literal("notifications/initialized")}),NYe=s(t=>PYe.safeParse(t).success,"isInitializedNotification"),VY=ef.extend({method:J.literal("ping")}),Gjt=J.object({progress:J.number(),total:J.optional(J.number())}).passthrough(),$Y=WA.extend({method:J.literal("notifications/progress"),params:rN.merge(Gjt).extend({progressToken:IYe})}),zY=ef.extend({params:vh.extend({cursor:J.optional(TYe)}).optional()}),YY=bh.extend({nextCursor:J.optional(TYe)}),LYe=J.object({uri:J.string(),mimeType:J.optional(J.string())}).passthrough(),FYe=LYe.extend({text:J.string()}),MYe=LYe.extend({blob:J.string().base64()}),Hjt=J.object({uri:J.string(),name:J.string(),description:J.optional(J.string()),mimeType:J.optional(J.string())}).passthrough(),jjt=J.object({uriTemplate:J.string(),name:J.string(),description:J.optional(J.string()),mimeType:J.optional(J.string())}).passthrough(),Vjt=zY.extend({method:J.literal("resources/list")}),khe=YY.extend({resources:J.array(Hjt)}),$jt=zY.extend({method:J.literal("resources/templates/list")}),Bhe=YY.extend({resourceTemplates:J.array(jjt)}),zjt=ef.extend({method:J.literal("resources/read"),params:vh.extend({uri:J.string()})}),Dhe=bh.extend({contents:J.array(J.union([FYe,MYe]))}),Yjt=WA.extend({method:J.literal("notifications/resources/list_changed")}),Kjt=ef.extend({method:J.literal("resources/subscribe"),params:vh.extend({uri:J.string()})}),Jjt=ef.extend({method:J.literal("resources/unsubscribe"),params:vh.extend({uri:J.string()})}),Xjt=WA.extend({method:J.literal("notifications/resources/updated"),params:rN.extend({uri:J.string()})}),Zjt=J.object({name:J.string(),description:J.optional(J.string()),required:J.optional(J.boolean())}).passthrough(),eVt=J.object({name:J.string(),description:J.optional(J.string()),arguments:J.optional(J.array(Zjt))}).passthrough(),tVt=zY.extend({method:J.literal("prompts/list")}),Phe=YY.extend({prompts:J.array(eVt)}),nVt=ef.extend({method:J.literal("prompts/get"),params:vh.extend({name:J.string(),arguments:J.optional(J.record(J.string()))})}),KY=J.object({type:J.literal("text"),text:J.string()}).passthrough(),JY=J.object({type:J.literal("image"),data:J.string().base64(),mimeType:J.string()}).passthrough(),XY=J.object({type:J.literal("audio"),data:J.string().base64(),mimeType:J.string()}).passthrough(),QYe=J.object({type:J.literal("resource"),resource:J.union([FYe,MYe])}).passthrough(),rVt=J.object({role:J.enum(["user","assistant"]),content:J.union([KY,JY,XY,QYe])}).passthrough(),Nhe=bh.extend({description:J.optional(J.string()),messages:J.array(rVt)}),oN=WA.extend({method:J.literal("notifications/prompts/list_changed")}),iVt=J.object({title:J.optional(J.string()),readOnlyHint:J.optional(J.boolean()),destructiveHint:J.optional(J.boolean()),idempotentHint:J.optional(J.boolean()),openWorldHint:J.optional(J.boolean())}).passthrough(),oVt=J.object({name:J.string(),description:J.optional(J.string()),inputSchema:J.object({type:J.literal("object"),properties:J.optional(J.object({}).passthrough())}).passthrough(),annotations:J.optional(iVt)}).passthrough(),sVt=zY.extend({method:J.literal("tools/list")}),Lhe=YY.extend({tools:J.array(oVt)}),ZY=bh.extend({content:J.array(J.union([KY,JY,XY,QYe])),isError:J.boolean().default(!1).optional()}),idi=ZY.or(bh.extend({toolResult:J.unknown()})),aVt=ef.extend({method:J.literal("tools/call"),params:vh.extend({name:J.string(),arguments:J.optional(J.record(J.unknown()))})}),sN=WA.extend({method:J.literal("notifications/tools/list_changed")}),OYe=J.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),lVt=ef.extend({method:J.literal("logging/setLevel"),params:vh.extend({level:OYe})}),Fhe=WA.extend({method:J.literal("notifications/message"),params:rN.extend({level:OYe,logger:J.optional(J.string()),data:J.unknown()})}),cVt=J.object({name:J.string().optional()}).passthrough(),uVt=J.object({hints:J.optional(J.array(cVt)),costPriority:J.optional(J.number().min(0).max(1)),speedPriority:J.optional(J.number().min(0).max(1)),intelligencePriority:J.optional(J.number().min(0).max(1))}).passthrough(),dVt=J.object({role:J.enum(["user","assistant"]),content:J.union([KY,JY,XY])}).passthrough(),fVt=ef.extend({method:J.literal("sampling/createMessage"),params:vh.extend({messages:J.array(dVt),systemPrompt:J.optional(J.string()),includeContext:J.optional(J.enum(["none","thisServer","allServers"])),temperature:J.optional(J.number()),maxTokens:J.number().int(),stopSequences:J.optional(J.array(J.string())),metadata:J.optional(J.object({}).passthrough()),modelPreferences:J.optional(uVt)})}),pVt=bh.extend({model:J.string(),stopReason:J.optional(J.enum(["endTurn","stopSequence","maxTokens"]).or(J.string())),role:J.enum(["user","assistant"]),content:J.discriminatedUnion("type",[KY,JY,XY])}),mVt=J.object({type:J.literal("ref/resource"),uri:J.string()}).passthrough(),hVt=J.object({type:J.literal("ref/prompt"),name:J.string()}).passthrough(),gVt=ef.extend({method:J.literal("completion/complete"),params:vh.extend({ref:J.union([hVt,mVt]),argument:J.object({name:J.string(),value:J.string()}).passthrough()})}),Mhe=bh.extend({completion:J.object({values:J.array(J.string()).max(100),total:J.optional(J.number().int()),hasMore:J.optional(J.boolean())}).passthrough()}),AVt=J.object({uri:J.string().startsWith("file://"),name:J.optional(J.string())}).passthrough(),yVt=ef.extend({method:J.literal("roots/list")}),CVt=bh.extend({roots:J.array(AVt)}),xVt=WA.extend({method:J.literal("notifications/roots/list_changed")}),odi=J.union([VY,qjt,gVt,lVt,nVt,tVt,Vjt,$jt,zjt,Kjt,Jjt,aVt,sVt]),sdi=J.union([jY,$Y,PYe,xVt]),adi=J.union([gw,pVt,CVt]),ldi=J.union([VY,fVt,yVt]),cdi=J.union([jY,$Y,Fhe,Xjt,Yjt,sN,oN]),udi=J.union([gw,Rhe,Mhe,Nhe,Phe,khe,Bhe,Dhe,ZY,Lhe]),hw=class extends Error{static{s(this,"McpError")}constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}};var vVt=6e4,eK=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(jY,n=>{let r=this._requestHandlerAbortControllers.get(n.params.requestId);r?.abort(n.params.reason)}),this.setNotificationHandler($Y,n=>{this._onprogress(n)}),this.setRequestHandler(VY,n=>({}))}_setupTimeout(e,n,r,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let n=this._timeoutInfo.get(e);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),new hw(Zb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){let n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=n=>{this._onerror(n)},this._transport.onmessage=(n,r)=>{iN(n)||BYe(n)?this._onresponse(n):HY(n)?this._onrequest(n,r):SYe(n)?this._onnotification(n):this._onerror(new Error(`Unknown message type: ${JSON.stringify(n)}`))},await this._transport.start()}_onclose(){var e;let n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new hw(Zb.ConnectionClosed,"Connection closed");for(let i of n.values())i(r)}_onerror(e){var n;(n=this.onerror)===null||n===void 0||n.call(this,e)}_onnotification(e){var n;let r=(n=this._notificationHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,n){var r,i,o,a;let l=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Zb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:n?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Zb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:n,...r}=e.params,i=Number(n),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(r)}_onresponse(e){let n=Number(e.id),r=this._responseHandlers.get(n);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),iN(e))r(e);else{let i=new hw(e.error.code,e.error.message,e.error.data);r(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,n,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=r??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};r?.onprogress&&(this._progressHandlers.set(g,r.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=r?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let B=n.parse(_.result);l(B)}catch(B){c(B)}}}),(p=r?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=r?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=r?.timeout)!==null&&m!==void 0?m:vVt,E=s(()=>v(new hw(Zb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,r?.maxTotalTimeout,E,(h=r?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r={...e,jsonrpc:"2.0"};await this._transport.send(r,n)}setRequestHandler(e,n){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>Promise.resolve(n(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(n(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function UYe(t,e){return Object.entries(e).reduce((n,[r,i])=>(i&&typeof i=="object"?n[r]=n[r]?{...n[r],...i}:i:n[r]=i,n),{...t})}s(UYe,"mergeCapabilities");var tK=class extends eK{static{s(this,"Client")}constructor(e,n){var r;super(n),this._clientInfo=e,this._capabilities=(r=n?.capabilities)!==null&&r!==void 0?r:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=UYe(this._capabilities,e)}assertCapability(e,n){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{let r=await this.request({method:"initialize",params:{protocolVersion:nN,capabilities:this._capabilities,clientInfo:this._clientInfo}},Rhe,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!EYe.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,i,o,a;switch(e){case"logging/setLevel":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!(!((n=this._capabilities.roots)===null||n===void 0)&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},gw,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},Mhe,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},gw,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},Nhe,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},Phe,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},khe,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},Bhe,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},Dhe,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},gw,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},gw,n)}async callTool(e,n=ZY,r){return this.request({method:"tools/call",params:e},n,r)}async listTools(e,n){return this.request({method:"tools/list",params:e},Lhe,n)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var qYe=qe(require("events"));var tE=class{constructor(e,n,r){this.transport=null;this.emitter=new qYe.default;this.ctx=e,this.mcp=new tK({name:n,version:r},{capabilities:{roots:{listChanged:!0}}}),this.name=n}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let n=new Error("Failed to initialize transport");throw Oo.error(this.ctx,"Transport initialization failed:",n),n}this.addListeners();try{await this.mcp.connect(this.transport)}catch(n){throw Oo.error(this.ctx,"Connection failed:",n),await OA(this.ctx,{message:`Failed to connect to MCP server: ${n instanceof Error?n.message:String(n)}`,server:this.name}),n}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let n=await this.mcp.listTools();e=Promise.all(n.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await cYe(this.ctx,o,this.name),o}));let r=`Discovered ${n.tools.length} tools`;fu(this.ctx,{message:r,server:this.name})}return e}async callTool(e,n){let r=new Hi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:n});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await OA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await OA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Oo.error(this.ctx,o),await OA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}return r}addListeners(){this.mcp.onclose=()=>{Oo.info(this.ctx,`MCP server ${this.name} connection closed.`),fu(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Oo.error(this.ctx,`MCP server ${this.name} error:`,e),OA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(Fhe,e=>{let n=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(n=`${e.params.logger}: ${n}`),e.params?.level){case"debug":case"info":case"notice":Oo.info(this.ctx,`MCP server ${this.name} log:`,n),fu(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"warning":Oo.warn(this.ctx,`MCP server ${this.name} log:`,n),XT(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Oo.error(this.ctx,`MCP server ${this.name} log:`,n),OA(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;default:Oo.info(this.ctx,`MCP server ${this.name} log:`,n),fu(this.ctx,{message:`Notification message: ${n}`,server:this.name});break}})}formatToolResult(e){let n=new Hi([],e.isError===!0?"error":"success");for(let r of e.content)r.type==="text"?n.content.push(new Ci(r.text)):(r.type==="image"||r.type==="audio")&&n.content.push(new ST({mimeType:r.mimeType,data:r.data}));return n}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var nK=class extends Error{static{s(this,"ParseError")}constructor(e,n){super(e),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function Qhe(t){}s(Qhe,"noop");function rK(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=Qhe,onError:n=Qhe,onRetry:r=Qhe,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=bVt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new nK(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:n(new nK(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(rK,"createParser");function bVt(t){let e=[],n="",r=0;for(;r<t.length;){let i=t.indexOf("\r",r),o=t.indexOf(`
`,r),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){n=t.slice(r);break}else{let l=t.slice(r,a);e.push(l),r=a+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,n]}s(bVt,"splitLines");var oK=class extends Event{static{s(this,"ErrorEvent")}constructor(e,n){var r,i;super(e),this.code=(r=n?.code)!=null?r:void 0,this.message=(i=n?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return r(WYe(this),n)}[Symbol.for("Deno.customInspect")](e,n){return e(WYe(this),n)}};function EVt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(EVt,"syntaxError");function Ohe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Ohe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Ohe(t.cause)}`:t.message:`${t}`}s(Ohe,"flattenError");function WYe(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(WYe,"inspectableError");var HYe=s(t=>{throw TypeError(t)},"__typeError"),$he=s((t,e,n)=>e.has(t)||HYe("Cannot "+n),"__accessCheck"),Bi=s((t,e,n)=>($he(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),El=s((t,e,n)=>e.has(t)?HYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),"__privateAdd"),Hs=s((t,e,n,r)=>($he(t,e,"write to private field"),e.set(t,n),n),"__privateSet"),nC=s((t,e,n)=>($he(t,e,"access private method"),n),"__privateMethod"),Vd,Aw,jk,iK,sK,cN,zk,uN,nE,Vk,Yk,$k,aN,Eh,Uhe,qhe,Whe,GYe,Ghe,Hhe,lN,jhe,Vhe,yw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,n){var r,i;super(),El(this,Eh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,El(this,Vd),El(this,Aw),El(this,jk),El(this,iK),El(this,sK),El(this,cN),El(this,zk),El(this,uN,null),El(this,nE),El(this,Vk),El(this,Yk,null),El(this,$k,null),El(this,aN,null),El(this,qhe,async o=>{var a;Bi(this,Vk).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){nC(this,Eh,lN).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?Hs(this,jk,new URL(o.url)):Hs(this,jk,void 0),u!==200){nC(this,Eh,lN).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){nC(this,Eh,lN).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Bi(this,Vd)===this.CLOSED)return;Hs(this,Vd,this.OPEN);let p=new Event("open");if((a=Bi(this,aN))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){nC(this,Eh,lN).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&Bi(this,Vk).feed(m.decode(v,{stream:!y})),y&&(g=!1,Bi(this,Vk).reset(),nC(this,Eh,jhe).call(this))}while(g)}),El(this,Whe,o=>{Hs(this,nE,void 0),!(o.name==="AbortError"||o.type==="aborted")&&nC(this,Eh,jhe).call(this,Ohe(o))}),El(this,Ghe,o=>{typeof o.id=="string"&&Hs(this,uN,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Bi(this,jk)?Bi(this,jk).origin:Bi(this,Aw).origin,lastEventId:o.id||""});Bi(this,$k)&&(!o.event||o.event==="message")&&Bi(this,$k).call(this,a),this.dispatchEvent(a)}),El(this,Hhe,o=>{Hs(this,cN,o)}),El(this,Vhe,()=>{Hs(this,zk,void 0),Bi(this,Vd)===this.CONNECTING&&nC(this,Eh,Uhe).call(this)});try{if(e instanceof URL)Hs(this,Aw,e);else if(typeof e=="string")Hs(this,Aw,new URL(e,IVt()));else throw new Error("Invalid URL")}catch{throw EVt("An invalid or illegal string was specified")}Hs(this,Vk,rK({onEvent:Bi(this,Ghe),onRetry:Bi(this,Hhe)})),Hs(this,Vd,this.CONNECTING),Hs(this,cN,3e3),Hs(this,sK,(r=n?.fetch)!=null?r:globalThis.fetch),Hs(this,iK,(i=n?.withCredentials)!=null?i:!1),nC(this,Eh,Uhe).call(this)}get readyState(){return Bi(this,Vd)}get url(){return Bi(this,Aw).href}get withCredentials(){return Bi(this,iK)}get onerror(){return Bi(this,Yk)}set onerror(e){Hs(this,Yk,e)}get onmessage(){return Bi(this,$k)}set onmessage(e){Hs(this,$k,e)}get onopen(){return Bi(this,aN)}set onopen(e){Hs(this,aN,e)}addEventListener(e,n,r){let i=n;super.addEventListener(e,i,r)}removeEventListener(e,n,r){let i=n;super.removeEventListener(e,i,r)}close(){Bi(this,zk)&&clearTimeout(Bi(this,zk)),Bi(this,Vd)!==this.CLOSED&&(Bi(this,nE)&&Bi(this,nE).abort(),Hs(this,Vd,this.CLOSED),Hs(this,nE,void 0))}};Vd=new WeakMap,Aw=new WeakMap,jk=new WeakMap,iK=new WeakMap,sK=new WeakMap,cN=new WeakMap,zk=new WeakMap,uN=new WeakMap,nE=new WeakMap,Vk=new WeakMap,Yk=new WeakMap,$k=new WeakMap,aN=new WeakMap,Eh=new WeakSet,Uhe=s(function(){Hs(this,Vd,this.CONNECTING),Hs(this,nE,new AbortController),Bi(this,sK)(Bi(this,Aw),nC(this,Eh,GYe).call(this)).then(Bi(this,qhe)).catch(Bi(this,Whe))},"connect_fn"),qhe=new WeakMap,Whe=new WeakMap,GYe=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Bi(this,uN)?{"Last-Event-ID":Bi(this,uN)}:void 0},cache:"no-store",signal:(t=Bi(this,nE))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),Ghe=new WeakMap,Hhe=new WeakMap,lN=s(function(t,e){var n;Bi(this,Vd)!==this.CLOSED&&Hs(this,Vd,this.CLOSED);let r=new oK("error",{code:e,message:t});(n=Bi(this,Yk))==null||n.call(this,r),this.dispatchEvent(r)},"failConnection_fn"),jhe=s(function(t,e){var n;if(Bi(this,Vd)===this.CLOSED)return;Hs(this,Vd,this.CONNECTING);let r=new oK("error",{code:e,message:t});(n=Bi(this,Yk))==null||n.call(this,r),this.dispatchEvent(r),Hs(this,zk,setTimeout(Bi(this,Vhe),Bi(this,cN)))},"scheduleReconnect_fn"),Vhe=new WeakMap,yw.CONNECTING=0,yw.OPEN=1,yw.CLOSED=2;function IVt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(IVt,"getBaseURL");f();f();var zhe;zhe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function TVt(t){return(await zhe).getRandomValues(new Uint8Array(t))}s(TVt,"getRandomValues");async function wVt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n="",r=await TVt(t);for(let i=0;i<t;i++){let o=r[i]%e.length;n+=e[o]}return n}s(wVt,"random");async function _Vt(t){return await wVt(t)}s(_Vt,"generateVerifier");async function SVt(t){let e=await(await zhe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(SVt,"generateChallenge");async function Yhe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await _Vt(t),n=await SVt(e);return{code_verifier:e,code_challenge:n}}s(Yhe,"pkceChallenge");f();var jYe=J.object({issuer:J.string(),authorization_endpoint:J.string(),token_endpoint:J.string(),registration_endpoint:J.string().optional(),scopes_supported:J.array(J.string()).optional(),response_types_supported:J.array(J.string()),response_modes_supported:J.array(J.string()).optional(),grant_types_supported:J.array(J.string()).optional(),token_endpoint_auth_methods_supported:J.array(J.string()).optional(),token_endpoint_auth_signing_alg_values_supported:J.array(J.string()).optional(),service_documentation:J.string().optional(),revocation_endpoint:J.string().optional(),revocation_endpoint_auth_methods_supported:J.array(J.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:J.array(J.string()).optional(),introspection_endpoint:J.string().optional(),introspection_endpoint_auth_methods_supported:J.array(J.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:J.array(J.string()).optional(),code_challenge_methods_supported:J.array(J.string()).optional()}).passthrough(),Khe=J.object({access_token:J.string(),token_type:J.string(),expires_in:J.number().optional(),scope:J.string().optional(),refresh_token:J.string().optional()}).strip(),Vdi=J.object({error:J.string(),error_description:J.string().optional(),error_uri:J.string().optional()}),RVt=J.object({redirect_uris:J.array(J.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:J.string().optional(),grant_types:J.array(J.string()).optional(),response_types:J.array(J.string()).optional(),client_name:J.string().optional(),client_uri:J.string().optional(),logo_uri:J.string().optional(),scope:J.string().optional(),contacts:J.array(J.string()).optional(),tos_uri:J.string().optional(),policy_uri:J.string().optional(),jwks_uri:J.string().optional(),jwks:J.any().optional(),software_id:J.string().optional(),software_version:J.string().optional()}).strip(),kVt=J.object({client_id:J.string(),client_secret:J.string().optional(),client_id_issued_at:J.number().optional(),client_secret_expires_at:J.number().optional()}).strip(),VYe=RVt.merge(kVt),$di=J.object({error:J.string(),error_description:J.string().optional()}).strip(),zdi=J.object({token:J.string(),token_type_hint:J.string().optional()}).strip();var $d=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function rE(t,{serverUrl:e,authorizationCode:n}){let r=await BVt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await LVt(e,{metadata:r,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(n!==void 0){let c=await t.codeVerifier(),u=await PVt(e,{metadata:r,clientInformation:i,authorizationCode:n,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await NVt(e,{metadata:r,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await DVt(e,{metadata:r,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(rE,"auth");async function BVt(t,e){var n;let r=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(r,{headers:{"MCP-Protocol-Version":(n=e?.protocolVersion)!==null&&n!==void 0?n:nN}})}catch(o){if(o instanceof TypeError)i=await fetch(r);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return jYe.parse(await i.json())}}s(BVt,"discoverOAuthMetadata");async function DVt(t,{metadata:e,clientInformation:n,redirectUrl:r}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await Yhe(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",n.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(r)),{authorizationUrl:a,codeVerifier:c}}s(DVt,"startAuthorization");async function PVt(t,{metadata:e,clientInformation:n,authorizationCode:r,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:n.client_id,code:r,code_verifier:i,redirect_uri:String(o)});n.client_secret&&c.set("client_secret",n.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return Khe.parse(await u.json())}s(PVt,"exchangeAuthorization");async function NVt(t,{metadata:e,clientInformation:n,refreshToken:r}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:n.client_id,refresh_token:r});n.client_secret&&a.set("client_secret",n.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return Khe.parse(await l.json())}s(NVt,"refreshAuthorization");async function LVt(t,{metadata:e,clientMetadata:n}){let r;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");r=new URL(e.registration_endpoint)}else r=new URL("/register",t);let i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return VYe.parse(await i.json())}s(LVt,"registerClient");var Jhe=class extends Error{static{s(this,"SseError")}constructor(e,n,r){super(`SSE error: ${n}`),this.code=e,this.event=r}},aK=class{static{s(this,"SSEClientTransport")}constructor(e,n){this._url=e,this._eventSourceInit=n?.eventSourceInit,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let n;try{n=await rE(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new $d;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(e.Authorization=`Bearer ${n.access_token}`)}return e}_startOrAuth(){return new Promise((e,n)=>{var r;this._eventSource=new yw(this._url.href,(r=this._eventSourceInit)!==null&&r!==void 0?r:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,n);return}let a=new Jhe(i.code,i.message,i);n(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){n(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=eE.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await rE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,n,r;(e=this._abortController)===null||e===void 0||e.abort(),(n=this._eventSource)===null||n===void 0||n.close(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e){var n,r,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(n=this._requestInit)===null||n===void 0?void 0:n.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await rE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var lK=class extends tE{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(n){return new aK(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(sN,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),fu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(oN,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),fu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();f();var FKe=qe(NKe(),1),dN=qe(require("node:process"),1),MKe=require("node:stream");f();var uK=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let n=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),l$t(n)}clear(){this._buffer=void 0}};function l$t(t){return eE.parse(JSON.parse(t))}s(l$t,"deserializeMessage");function LKe(t){return JSON.stringify(t)+`
`}s(LKe,"serializeMessage");var c$t=dN.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function u$t(){let t={};for(let e of c$t){let n=dN.default.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(u$t,"getDefaultEnvironment");var dK=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new uK,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new MKe.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,n)=>{var r,i,o,a,l,c;this._process=(0,FKe.default)(this._serverParams.command,(r=this._serverParams.args)!==null&&r!==void 0?r:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:u$t(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:dN.default.platform==="win32"&&d$t(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}n(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,n;return this._stderrStream?this._stderrStream:(n=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&n!==void 0?n:null}processReadBuffer(){for(var e,n;;)try{let r=this._readBuffer.readMessage();if(r===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,r)}catch(r){(n=this.onerror)===null||n===void 0||n.call(this,r)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(n=>{var r;if(!(!((r=this._process)===null||r===void 0)&&r.stdin))throw new Error("Not connected");let i=LKe(e);this._process.stdin.write(i)?n():this._process.stdin.once("drain",n)})}};function d$t(){return"type"in dN.default}s(d$t,"isElectron");var fK=class extends tE{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(n){return n.env={...lYe(),...n.env||{}},n.stderr="pipe",new dK(n)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",n=>{XT(this.ctx,{message:`[server stderr] ${n.toString().trimEnd()}`,server:this.name})})}};f();f();f();var pK=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:n,onComment:r}={}){let i;super({start(o){i=rK({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:n,onComment:r})},transform(o){i.feed(o)}})}};var f$t={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},fN=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,n){super(`Streamable HTTP error: ${n}`),this.code=e}},mK=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,n){var r;this._url=e,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider,this._sessionId=n?.sessionId,this._reconnectionOptions=(r=n?.reconnectionOptions)!==null&&r!==void 0?r:f$t}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let n;try{n=await rE(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new $d;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let n={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(n.Authorization=`Bearer ${r.access_token}`)}return this._sessionId&&(n["mcp-session-id"]=this._sessionId),new Headers({...n,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var n,r;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new fN(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(r=this.onerror)===null||r===void 0||r.call(this,o),o}}_getNextReconnectionDelay(e){let n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,e),i)}_scheduleReconnection(e,n=0){var r;let i=this._reconnectionOptions.maxRetries;if(i>0&&n>=i){(r=this.onerror)===null||r===void 0||r.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(n);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,n+1)})},o)}_handleSseStream(e,n){if(!e)return;let{onresumptiontoken:r,replayMessageId:i}=n,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new pK).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,r?.(m.id)),!m.event||m.event==="message")try{let g=eE.parse(JSON.parse(m.data));i!==void 0&&iN(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await rE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,n;(e=this._abortController)===null||e===void 0||e.abort(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e,n){var r,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=n||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:HY(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await rE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){NYe(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>eE.parse(b)):[eE.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new fN(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,n;if(this._sessionId)try{let r=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:r,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new fN(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(r){throw(n=this.onerror)===null||n===void 0||n.call(this,r),r}}};var hK=class extends tE{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(n){return new mK(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(sN,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),fu(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(oN,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),fu(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();var gK=class extends Db{static{s(this,"McpLanguageModelTool")}constructor(e,n){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=n}prepareInvocation(e,n){let r={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:r}}async invoke(e,n,r){return await this.invoker(n.input)}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Na;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(oA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var QKe=qe(Za());var AK=class t extends Ap{constructor(n){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new LY;this.ctx=n}static{s(this,"CLSMCPManager")}static{this.notificationType=new QKe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(n){await this.clearAllServers();for(let r of Object.keys(n))await this.addServer({name:r,...n[r]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(n,r,i){let o=this.getTool(n,r),a=this.getServerPrefix(n);if(!o){Oo.error(this.ctx,`Not found MCP ${n} server ${r} tool`);return}o._status=i,i==="enabled"?this.ctx.get(au).getToolById(`${n}.${r}`)||this.registerTool(n,a,o):this.unregisterTool(n,r)}async callTool(n,r,i){let o=this.MCPServersMap.get(n);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(r,i)}throw new Error(`MCP server ${n} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(n,r){let o=this.getAllTools().find(a=>a.name===n)?.tools;return!o||o.length===0?null:o.find(a=>a.name===r)||null}async getAndCacheAllTools(){let n=[];for(let r of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(r);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(r,l);c&&(a._status=c)}),n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:o})}else i.status==="error"?n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[],error:i.error}):n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${r}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Oo.error(this.ctx,a),await OA(this.ctx,{message:a,server:r}),n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=n}getToolStatus(n,r){let i=this.getTool(n,r);return i?i._status:null}getServerPrefix(n){let i=this.getAllTools().find(o=>o.name===n);return i?i.prefix:this.prefixGenerator.generate(n)}async addServer(n){try{await fu(this.ctx,{message:`Starting server ${n.name}`,server:n.name}),this.MCPServersMap.set(n.name,{status:"stopped",server:null});let r;n.type==="sse"?(r=new lK(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):"url"in n?(r=new hK(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):(r=new fK(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)),r.getEmitter().on(xy,()=>{this.updateToolsList()}),this.MCPServersMap.set(n.name,{status:"running",server:r}),await fu(this.ctx,{message:"Connection state: Running",server:n.name})}catch(r){if(Oo.error(this.ctx,`Error initializing MCP server ${n.name}:`,r),r instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=r.message.match(o);if(a&&"url"in n&&n.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${n.url}, will attempt to fall back to legacy SSE`;Oo.info(this.ctx,l),fu(this.ctx,{message:l,server:n.name});let c={...n,type:"sse"};return await this.addServer(c)}}let i=r instanceof Error?`message: ${r.message} stack: ${r.stack}`:String(r);await OA(this.ctx,{message:i,server:n.name}),this.MCPServersMap.set(n.name,{status:"error",server:null,error:i}),this.ctx.get($a).showWarningMessageOnlyOnce(`${n.name}.initialize`,`Failed to initialize MCP server '${n.name}'. Please check the logs for more details.`)}}async notifyClient(){let n=this.getAllTools();await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{servers:n})}registerTools(){for(let n of this.cachedMCPServerTools){let{name:r,prefix:i,tools:o}=n;for(let a of o)this.registerTool(r,i,a)}}registerTool(n,r,i){let{name:o,description:a,inputSchema:l,_status:c,_nameForModel:u,annotations:d}=i;Oo.debug(this.ctx,"register MCP Tool:",{...i}),c!=="disabled"&&this.ctx.get(au).registerTool(new gK({serverName:n,serverNamePrefix:r,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:l,annotations:d},p=>(Oo.debug(this.ctx,"copilot MCP Invoker:",n,o,p),this.callTool(n,o,p))))}unregisterAllTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i){let{name:a}=o;this.unregisterTool(r,a)}}}unregisterTool(n,r){this.ctx.get(au).unregisterTool(`${n}.${r}`)}async clearAllServers(){this.unregisterAllTools();for(let n of this.MCPServersMap.keys()){let{status:r,server:i}=this.MCPServersMap.get(n);r==="running"&&i&&(await fu(this.ctx,{message:`Stopping server ${n}`,server:n}),i.getEmitter().removeAllListeners(xy),await i.cleanup())}this.MCPServersMap.clear()}};f();var OKe=qe(Za());var yK=class t extends Km{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new OKe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var xK=qe(Za());var p$t=new xK.ProtocolRequestType("copilot/showPanelMessageRequest"),m$t=new xK.ProtocolNotificationType("copilot/showPanelMessage"),CK=class extends gR{constructor(n){super();this.ctx=n}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(n){return this.ctx.get(Cn).connection.sendNotification(m$t,n)}async sendPanelMessageRequest(n){let r=this.ctx.get(Cn).connection,i;try{i=await r.sendRequest(p$t,n)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${m2(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var h$t=new Tt("fetcher"),g$t="https://default.exp-tas.com/",vK=class extends Kr{constructor(n,r,i,o){super();this.ctx=n;this.defaultFetcher=r;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(n,r){try{return await this.defaultFetcher.fetch(n,r)}catch(i){if(Mc(i)||`${n}/`.startsWith(g$t))throw i;h$t.info(this.ctx,`Request to <${n}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(n,r);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var UKe=new Tt("fetcher"),bK=class extends Kr{constructor(n,r=new Lk(n),i=new Pk(n)){super();this.ctx=n;this.helixFetcher=r;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new vK(n,r,i,()=>{UKe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),n.get(Oy).once(()=>{this.updateFetcher()}),n.get(uh).onConfigChange(wt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=ui(n,wt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Ho).getCapabilities().fetch??!1}updateFetcher(){let n,r;if(!this.editorFetcherCapability)r="Using Helix fetcher, editor does not have fetch capability.",n=this.helixFetcher;else if(this.fetchStrategy==="client")r="Using editor fetcher, fetch strategy set to client.",n=this.editorFetcher;else if(this.fetchStrategy==="native")r="Using Helix fetcher, fetch strategy set to native.",n=this.helixFetcher;else{let i=ui(this.ctx,wt.DebugUseEditorFetcher);i?.toString()==="true"?(r="Using editor fetcher, debug flag is enabled.",n=this.editorFetcher):i?.toString()==="false"?(r="Using Helix fetcher, debug flag is disabled.",n=this.helixFetcher):(r="Editor fetcher capability available, will fallback if needed.",n=this.fallbackFetcher)}this.currentFetcher!=n&&(UKe.debug(this.ctx,r),this.currentFetcher=n)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(n,r){return this.currentFetcher.fetch(n,r)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var EK=class extends $a{constructor(n){super();this.ctx=n}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Cn).connection}showWarningMessage(n,...r){return this.connection.window.showWarningMessage(n,...r)}};f();f();var qKe=qe(require("crypto")),WKe=require("os");var A$t=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function y$t(t){let e=t.replace(/-/g,":").toLowerCase();return!A$t.has(e)}s(y$t,"validateMacAddress");function C$t(){let t=(0,WKe.networkInterfaces)();for(let e in t){let n=t[e];if(n){for(let{mac:r}of n)if(y$t(r))return r}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(C$t,"getMac");var age;function x$t(){try{let t=C$t();return qKe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(x$t,"getMacMachineId");function GKe(){return age||(age=x$t()||an()),age}s(GKe,"getMachineId");var v$t=an()+Date.now(),HKe=new Ko(v$t,GKe());f();f();var pN=qe(require("node:process"),1),Cge=require("node:buffer"),xge=qe(require("node:path"),1),cJe=require("node:url"),uJe=qe(require("node:util"),1),vge=qe(require("node:child_process"),1),xw=qe(require("node:fs/promises"),1);f();var fge=qe(require("node:process"),1),$Ke=qe(require("node:os"),1),zKe=qe(require("node:fs"),1);f();var jKe=qe(require("node:fs"),1);f();var cge=qe(require("node:fs"),1);var lge;function b$t(){try{return cge.default.statSync("/.dockerenv"),!0}catch{return!1}}s(b$t,"hasDockerEnv");function E$t(){try{return cge.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(E$t,"hasDockerCGroup");function uge(){return lge===void 0&&(lge=b$t()||E$t()),lge}s(uge,"isDocker");var dge,I$t=s(()=>{try{return jKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function Xk(){return dge===void 0&&(dge=I$t()||uge()),dge}s(Xk,"isInsideContainer");var VKe=s(()=>{if(fge.default.platform!=="linux")return!1;if($Ke.default.release().toLowerCase().includes("microsoft"))return!Xk();try{return zKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Xk():!1}catch{return!1}},"isWsl"),Zk=fge.default.env.__IS_WSL_TEST__?VKe:VKe();f();function Cw(t,e,n){let r=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=n();return r(i),i},set(i){r(i)}}),t}s(Cw,"defineLazyProperty");f();var rJe=require("node:util"),TK=qe(require("node:process"),1),iJe=require("node:child_process");f();var YKe=require("node:util"),KKe=qe(require("node:process"),1),JKe=require("node:child_process");var T$t=(0,YKe.promisify)(JKe.execFile);async function pge(){if(KKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await T$t("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(pge,"defaultBrowserId");f();f();var XKe=qe(require("node:process"),1),ZKe=require("node:util"),mge=require("node:child_process");var w$t=(0,ZKe.promisify)(mge.execFile);async function eJe(t,{humanReadableOutput:e=!0}={}){if(XKe.default.platform!=="darwin")throw new Error("macOS only");let n=e?[]:["-ss"],{stdout:r}=await w$t("osascript",["-e",t,n]);return r.trim()}s(eJe,"runAppleScript");async function hge(t){return eJe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(hge,"bundleName");f();var tJe=require("node:util"),nJe=require("node:child_process");var _$t=(0,tJe.promisify)(nJe.execFile),S$t={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},IK=class extends Error{static{s(this,"UnknownBrowserError")}};async function gge(t=_$t){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),n=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!n)throw new IK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:r}=n.groups,i=S$t[r];if(!i)throw new IK(`Unknown browser ID: ${r}`);return i}s(gge,"defaultBrowser");var R$t=(0,rJe.promisify)(iJe.execFile),k$t=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Age(){if(TK.default.platform==="darwin"){let t=await pge();return{name:await hge(t),id:t}}if(TK.default.platform==="linux"){let{stdout:t}=await R$t("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:k$t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(TK.default.platform==="win32")return gge();throw new Error("Only macOS, Linux, and Windows are supported")}s(Age,"defaultBrowser");var B$t=uJe.default.promisify(vge.default.execFile),yge=xge.default.dirname((0,cJe.fileURLToPath)(importMetaUrlShim)),oJe=xge.default.join(yge,"xdg-open"),{platform:e3,arch:sJe}=pN.default,D$t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let n="/etc/wsl.conf",r=!1;try{await xw.default.access(n,xw.constants.F_OK),r=!0}catch{}if(!r)return t;let i=await xw.default.readFile(n,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),dJe=s(async()=>`${await D$t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function P$t(){let t=await dJe(),n=Cge.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:r}=await B$t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",n],{encoding:"utf8"}),i=r.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(P$t,"getWindowsDefaultBrowserFromWsl");var aJe=s(async(t,e)=>{let n;for(let r of t)try{return await e(r)}catch(i){n=i}throw n},"pTryEach"),wK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return aJe(t.app,l=>wK({...t,app:l}));let{name:e,arguments:n=[]}=t.app??{};if(n=[...n],Array.isArray(e))return aJe(e,l=>wK({...t,app:{name:l,arguments:n}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=Zk?await P$t():await Age();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&n.push(c[d]),wK({...t,app:{name:t3[d],arguments:n}})}throw new Error(`${u.name} is not supported as a default browser`)}let r,i=[],o={};if(e3==="darwin")r="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(e3==="win32"||Zk&&!Xk()&&!e){r=Zk?await dJe():`${pN.default.env.SYSTEMROOT||pN.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),Zk||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&n.push(t.target)):t.target&&l.push(`"${t.target}"`),n.length>0&&(n=n.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",n.join(","))),t.target=Cge.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)r=e;else{let l=!yge||yge==="/",c=!1;try{await xw.default.access(oJe,xw.constants.X_OK),c=!0}catch{}r=pN.default.versions.electron??(e3==="android"||l||!c)?"xdg-open":oJe}n.length>0&&i.push(...n),t.wait||(o.stdio="ignore",o.detached=!0)}e3==="darwin"&&n.length>0&&i.push("--args",...n),t.target&&i.push(t.target);let a=vge.default.spawn(r,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),N$t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return wK({...e,target:t})},"open");function lJe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[sJe]:e}=t;if(!e)throw new Error(`${sJe} is not supported`);return e}s(lJe,"detectArchBinary");function bge({[e3]:t},{wsl:e}){if(e&&Zk)return lJe(e);if(!t)throw new Error(`${e3} is not supported`);return lJe(t)}s(bge,"detectPlatformBinary");var t3={};Cw(t3,"chrome",()=>bge({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Cw(t3,"firefox",()=>bge({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Cw(t3,"edge",()=>bge({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Cw(t3,"browser",()=>"browser");Cw(t3,"browserPrivate",()=>"browserPrivate");var _K=N$t;var SK=class extends hc{constructor(n,r=new Ege){super();this.ctx=n;this.fallback=r}static{s(this,"AgentUrlOpener")}async open(n){let r=this.ctx.get(Cn);if(!(r.clientCapabilities?.window?.showDocument?.support&&(await r.connection.window.showDocument({uri:n,external:!0})).success))return this.fallback.open(n)}},Ege=class extends hc{static{s(this,"SpawnUrlOpener")}async open(e){await _K(e)}};f();f();var RK=class extends EV{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(dh).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(dh).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(dh).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let r=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(r.length){let a=r.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var kK=class extends ou{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new RK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Ho).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function fJe(t){let e=new uh(process.env),n=IMe(e);n.set(uh,e),n.set(Oy,new Oy),n.set(Kr,new bK(n)),n.set(na,new na(n)),vme(n,{});let r=$Te();n.set(gc,r);let i=new z6(n);n.set(Gn,i),n.set(z6,i);let o=new BI(n,r);n.set(BI,o),n.set(Sr,new Sr(n,process.env)),n.set(l2,new l2),n.set(hd,new hd(n,"agent")),n.set(Ko,HKe),n.set(Jn,new XV),n.set(JT,Oze()),n.set(os,new os),n.set(po,aYe),n.set(T2,new CY(n)),n.set(ou,new kK(n)),n.set(dh,new dh(n)),n.set(Ul,new Ul),n.set(Ba,NU(n,cVe)),n.set(Xf,new Xf(n)),n.set(kg,new B5),BUe(n),IV(n),YUe(n),HRe(n),n.set(Cn,new Cn(n,t)),n.set($a,new EK(n)),n.set(gR,new CK(n)),n.set(hc,new SK(n)),n.set(Ji,new NY(n)),n.set(K6,new K6(n));let a=new Yb(n);return n.set(Tn,a),n.set(Yb,a),n.set(Tu,new hR(n,process.env)),n.set(Ol,new Ol(n)),eYe(n),LMe(n),n.set(zu,new zu),n.set(jb,new jb),n.set(gh,new gh),n.set(E0,new vY),n.set(LA,new LA),n.set(Lm,new vV(n)),n.set(Ng,new zR),n.set(lh,new lh(n)),n.set(Cy,new Cy(n)),n.set(il,new il(n)),n.set(Ic,new BY(n)),n.set(ob,new PY(n)),n.set(oA,new DY(n)),n.set(au,new au(n)),n.set(Ly,new Ly(n)),n.set(ch,new ch(n)),n.set(Ap,new AK(n)),n.set(Km,new yK(n)),n.set(sA,new sA),n}s(fJe,"createLanguageServerContext");f();var Ige=require("events"),mN=qe(require("fs"));var DK=qe(Za());f();var mJe=qe(require("fs")),hJe=qe(require("http")),n3=qe(require("path"));var BK=class{constructor(e,n){this.port=e;let r;this.server=hJe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":n.on("read",l=>{pJe(o,JSON.stringify(l))});return;case"/stdout":n.on("write",l=>{pJe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;n3.basename(__dirname)!=="debug"&&(a=n3.dirname(__dirname)),r??=mJe.readFileSync(n3.join(a,"dist","debugServer.html")).toString(),o.write(r),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function pJe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(pJe,"writeData");var Tge=class extends DK.AbstractMessageWriter{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageWriter")}async write(n){return this.ev.emit("write",n),this.delegate.write(n)}end(){this.ev.emit("end"),this.delegate.end()}},wge=class extends DK.AbstractMessageReader{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageReader")}listen(n){return this.delegate.listen(r=>{this.ev.emit("read",r),n(r)})}};async function gJe(t,e,n){let r,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){r??=new Ige.EventEmitter;let l=new BK(i,r).listen();i===0&&await _K(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=mN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=mN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&mN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");r??=new Ige.EventEmitter,r.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),r.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return r&&(e=new wge(e,r),n=new Tge(n,r)),[e,n]}s(gJe,"wrapTransports");async function CJe(){let t=kSe(process.argv.slice(2)).version(new zi().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),n,r;e["node-ipc"]?(n=new Np.IPCMessageReader(process),r=new Np.IPCMessageWriter(process)):e.stdio?(n=new Np.StreamMessageReader(process.stdin),r=new Np.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await rC.mkdtemp(AJe.default.tmpdir()+"/github-copilot-"));try{let l=xne(),c=JSON.parse(await rC.readFile(hN.join(l,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await rC.readFile(hN.join(l,"apps.json"),"utf8"))}catch{}let d=!1;for(let p of Object.keys(c)){let m=`${p}:${Cm}`;u[m]||!c[p].user||!c[p].oauth_token||(u[m]={user:c[p].user,oauth_token:c[p].oauth_token,githubAppId:Cm},d=!0)}d&&await rC.writeFile(hN.join(l,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await rC.rm(hN.join(l,"hosts.json"),{force:!0})}catch{}let i=(0,Np.createConnection)(Np.ProposedFeatures.all,...await gJe(process.env,n,r)),o=fJe(i);console=Dwe(o);let a=o.get(Cn);n.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(CJe,"main");yJe.isMainThread?require.main===module&&CJe():kwe()&&Bwe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
